# Comparing `tmp/pyspimosim-0.2.14.1-py3-none-any.whl.zip` & `tmp/pyspimosim-0.2.14.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,16 +1,16 @@
-Zip file size: 1575275 bytes, number of entries: 266
+Zip file size: 1575377 bytes, number of entries: 266
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-26 01:15 pyspimosim/__init__.py
 -rw-rw-r--  2.0 unx      144 b- defN 23-Apr-26 01:15 pyspimosim/__main__.py
 -rw-rw-r--  2.0 unx     1318 b- defN 23-Apr-30 16:15 pyspimosim/base_model.py
--rw-rw-r--  2.0 unx     9343 b- defN 23-Apr-30 16:15 pyspimosim/csv_pipe_model.py
+-rw-rw-r--  2.0 unx     9662 b- defN 23-May-09 20:46 pyspimosim/csv_pipe_model.py
 -rw-rw-r--  2.0 unx     7785 b- defN 23-May-01 15:33 pyspimosim/main.py
 -rw-rw-r--  2.0 unx      758 b- defN 23-Apr-30 16:15 pyspimosim/model_loader.py
 -rw-rw-r--  2.0 unx     9315 b- defN 23-Apr-30 16:15 pyspimosim/protocol.py
--rw-rw-r--  2.0 unx     8106 b- defN 23-Apr-30 16:15 pyspimosim/server_simulation_backend.py
+-rw-rw-r--  2.0 unx     8055 b- defN 23-May-09 20:47 pyspimosim/server_simulation_backend.py
 -rw-rw-r--  2.0 unx     6901 b- defN 23-May-01 15:33 pyspimosim/servers.py
 -rw-rw-r--  2.0 unx     1766 b- defN 23-Apr-30 16:15 pyspimosim/models/ising_model.py
 -rw-rw-r--  2.0 unx     2083 b- defN 23-Apr-30 16:15 pyspimosim/models/two_col_csv_model.py
 -rw-rw-r--  2.0 unx      687 b- defN 23-Apr-30 16:27 pyspimosim/models/www_model.py
 -rw-rw-r--  2.0 unx     1145 b- defN 23-Apr-25 07:49 pyspimosim/spimosim/LICENSE.md
 -rw-rw-r--  2.0 unx     2910 b- defN 23-May-01 15:32 pyspimosim/spimosim/README.md
 -rw-rw-r--  2.0 unx    13408 b- defN 23-May-01 15:32 pyspimosim/spimosim/index.html
@@ -255,14 +255,14 @@
 -rw-rw-r--  2.0 unx     3451 b- defN 23-Apr-26 01:15 pyspimosim/www/ising/model.js
 -rw-rw-r--  2.0 unx     1554 b- defN 23-Apr-26 01:15 pyspimosim/www/ising/plots/data-aggregators.js
 -rw-rw-r--  2.0 unx      583 b- defN 23-Apr-26 01:15 pyspimosim/www/ising/plots/plot-computers.js
 -rw-rw-r--  2.0 unx      867 b- defN 23-Apr-26 01:15 pyspimosim/www/ising/plots/plot-displays.js
 -rw-rw-r--  2.0 unx     5837 b- defN 23-Apr-26 01:15 pyspimosim/www/two_col_csv/index.html
 -rw-rw-r--  2.0 unx     2617 b- defN 23-Apr-26 01:15 pyspimosim/www/two_col_csv/model-config.js
 -rw-rw-r--  2.0 unx      129 b- defN 23-Apr-26 01:15 pyspimosim/www/two_col_csv/model-info.html
--rw-rw-r--  2.0 unx    51690 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/ALL_LICENSES.md
--rw-rw-r--  2.0 unx     1229 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/LICENSE.md
--rw-rw-r--  2.0 unx    69403 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/WHEEL
--rw-rw-r--  2.0 unx       16 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    29237 b- defN 23-May-01 15:58 pyspimosim-0.2.14.1.dist-info/RECORD
-266 files, 5851918 bytes uncompressed, 1526759 bytes compressed:  73.9%
+-rw-rw-r--  2.0 unx    51690 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/ALL_LICENSES.md
+-rw-rw-r--  2.0 unx     1229 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/LICENSE.md
+-rw-rw-r--  2.0 unx    69403 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       16 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    29237 b- defN 23-May-09 20:50 pyspimosim-0.2.14.2.dist-info/RECORD
+266 files, 5852186 bytes uncompressed, 1526861 bytes compressed:  73.9%
```

## zipnote {}

```diff
@@ -774,26 +774,26 @@
 
 Filename: pyspimosim/www/two_col_csv/model-config.js
 Comment: 
 
 Filename: pyspimosim/www/two_col_csv/model-info.html
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/ALL_LICENSES.md
+Filename: pyspimosim-0.2.14.2.dist-info/ALL_LICENSES.md
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/LICENSE.md
+Filename: pyspimosim-0.2.14.2.dist-info/LICENSE.md
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/METADATA
+Filename: pyspimosim-0.2.14.2.dist-info/METADATA
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/WHEEL
+Filename: pyspimosim-0.2.14.2.dist-info/WHEEL
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/top_level.txt
+Filename: pyspimosim-0.2.14.2.dist-info/top_level.txt
 Comment: 
 
-Filename: pyspimosim-0.2.14.1.dist-info/RECORD
+Filename: pyspimosim-0.2.14.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pyspimosim/csv_pipe_model.py

```diff
@@ -33,14 +33,15 @@
             return float(obj)
         except Exception as e:
             logging.warning("Warning! Not a float: " + str(e))
             return 0
 
 
 class NoEOFReader(io.BufferedReader):
+    encoding = "UTF-8"
     __buf = b""
 
     def read(self, size=-1):
         buf = super().read(size=size)
         while len(buf) < size:
             buf += super().read(size=size - len(buf))
         return buf
@@ -55,14 +56,23 @@
         self.__buf += super().readline()
         if self.__buf[-1:] == b"\n":
             buf = self.__buf
             self.__buf = b""
             return buf
         return b""
 
+    def __iter__(self):
+        return self
+
+    def __next__(self):
+        b = self.readline()
+        if not b:
+            raise StopIteration()
+        return b.decode("UTF-8")
+
 
 class CSVPipeReader:
     sleep_time = 0.01
     read_tries_until_done = 3
 
     def __init__(self, path, data_file_fields, block_size=1, skip_lines=0, data_is_final=False, new_fifo=True):
         self.path = path
@@ -126,20 +136,22 @@
         await self.prepare_file()
 
         if self.data_is_final:
             max_tries = self.read_tries_until_done
         else:
             max_tries = -1
 
+        if max_rows:
+            max_rows = min(max_rows, 2**22) # limit to 4 MiB
         with warnings.catch_warnings():
             warnings.simplefilter("ignore")
             raw = None
             for i in count():
                 try:
-                    raw = np.loadtxt(self.file, max_rows=max_rows, ndmin=2)
+                    raw = np.loadtxt(self.file, max_rows=max_rows, ndmin=2, comments=None)
                     if raw.shape[0] != 0:
                         break
                     if i == max_tries:
                         raise CSVPipeReaderEOF()
                     await asyncio.sleep(self.sleep_time)
                 except ValueError as e:
                     if str(e) != "I/O operation on closed file.":
@@ -220,15 +232,15 @@
         try:
             await self.csv_pipe_reader.fill_buffer(max_rows=t_max - t + 1)
         except CSVPipeReaderEOF as e:
             raise NoMoreDataException() from e
 
         for i, (name, _) in enumerate(self.data_file_fields):
             protocol.vars[name].set_all(
-                t, protocol.vars[name].dtype(self.csv_pipe_reader.buf[:, i]))
+                t, np.array(self.csv_pipe_reader.buf[:, i], dtype=protocol.vars[name].dtype))
 
         t_max = t + len(self.csv_pipe_reader.buf) - 1
         protocol.t_max = t_max
         return t_max
 
     async def step(self, vars_config, t, restart=False):
         try:
```

## pyspimosim/server_simulation_backend.py

```diff
@@ -122,16 +122,14 @@
             return True
         except InvalidParameterException as e:
             await self.handler.send_invalid_parameter(e.invalid_parameter, e.invalid_parameter_msg)
             if restart:
                 self.invalid_parameter = e.invalid_parameter
                 self.invalid_parameter_msg = e.invalid_parameter_msg
             return False
-        except Exception as e:
-            raise e
 
     async def restart(self, user_model_settings):
         self.pause()
 
         self.invalid_parameter = None
 
         if not (await self.change_model_settings(user_model_settings, True)):
```

## Comparing `pyspimosim-0.2.14.1.dist-info/ALL_LICENSES.md` & `pyspimosim-0.2.14.2.dist-info/ALL_LICENSES.md`

 * *Files identical despite different names*

## Comparing `pyspimosim-0.2.14.1.dist-info/LICENSE.md` & `pyspimosim-0.2.14.2.dist-info/LICENSE.md`

 * *Files identical despite different names*

## Comparing `pyspimosim-0.2.14.1.dist-info/METADATA` & `pyspimosim-0.2.14.2.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyspimosim
-Version: 0.2.14.1
+Version: 0.2.14.2
 Summary: SpiMoSim
 Author: Pascal Grafe
 License: # List of licenses and copyright notices
         
         ## License for pySpiMoSim and SpiMoSim that applies to everything EXCEPT TO THE FILES IN `pyspimosim/spimosim/ext_lib/`:
         
         ```
```

## Comparing `pyspimosim-0.2.14.1.dist-info/RECORD` & `pyspimosim-0.2.14.2.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 pyspimosim/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pyspimosim/__main__.py,sha256=-nUqsWhcfzMjd8L810yLPPdUV1u-u6XnhNZmapxJ6r0,144
 pyspimosim/base_model.py,sha256=dvq05q8CIJM--R9t6oMAsvh1GVFE3a44gWQkaW16JC4,1318
-pyspimosim/csv_pipe_model.py,sha256=-wYCa9bUUmfAWk2mhBpzsFLkpob-J1G0dU9La-CZLqU,9343
+pyspimosim/csv_pipe_model.py,sha256=8P8BUMs_Oaatr2aUNiQX-ZtWcb5DXZWEcK5lUtqeicE,9662
 pyspimosim/main.py,sha256=I82aRWV0xS8f65BT89iZ0QcPFNl9IfKsCRmoJSHm5sk,7785
 pyspimosim/model_loader.py,sha256=WMit8mhLPur2R4dFdX3cR2Yo9r8liNaWC8L3RiIQqcw,758
 pyspimosim/protocol.py,sha256=vZPl3dF0vNrzVTWbUPhpTp13FUSNfn0FbWlMUzX7bTQ,9315
-pyspimosim/server_simulation_backend.py,sha256=yFYTkZQimweOhx6edwctjTiTLOcNa7tX0D3n7OPL1RY,8106
+pyspimosim/server_simulation_backend.py,sha256=Jcg49hOL0Ep9q9PpFkP9aTPkV6Ac71sOew3m8a8IotA,8055
 pyspimosim/servers.py,sha256=jkSXl2w26I-4T5kuLNTdpXEhrIa-LcIilQdS4b0wFRI,6901
 pyspimosim/models/ising_model.py,sha256=gyhk-lW6PS8eBSDp-hCLfyKZhronal7CjcWskdtZwyI,1766
 pyspimosim/models/two_col_csv_model.py,sha256=gBlngzDB27rAti5clD293UULHsqH7dVVOmau590yOJw,2083
 pyspimosim/models/www_model.py,sha256=Y70v6k0niLWZF4wEC-_y4Z7LtLkvLDdjXgGkf9ysbaU,687
 pyspimosim/spimosim/LICENSE.md,sha256=MamcsPT2svZH6XO4A-lj2ifGxFZqN7p0p7C93OFDWsE,1145
 pyspimosim/spimosim/README.md,sha256=4I2veemvH0-Arpmf8x1n39UBBGAkm-loJA-hY5jCcu8,2910
 pyspimosim/spimosim/index.html,sha256=SUB_rHS4-enq3ciCg-ZriLYm-PxMvVCTI2XtohZFIus,13408
@@ -254,13 +254,13 @@
 pyspimosim/www/ising/model.js,sha256=9BcnszEYDteB5BZrHJ2-Wj5zJiu0pDjZ-aE8odpo76Y,3451
 pyspimosim/www/ising/plots/data-aggregators.js,sha256=Lho-D04Ks5n62UqDY7JqRv0o27gEdbcleJbgkmE7owc,1554
 pyspimosim/www/ising/plots/plot-computers.js,sha256=AETHcml6UzPJw6MXnbN1wo-7t1EGrmAcbb1UCipPf2Y,583
 pyspimosim/www/ising/plots/plot-displays.js,sha256=aoaQ3fPkjuLUhTXvmRPjsfWvdCnIWrmvnxNElDrPA6I,867
 pyspimosim/www/two_col_csv/index.html,sha256=Gw9D1Tdtkn0ds13qm9llz9wv1f-2KtTJrklC71tOoq8,5837
 pyspimosim/www/two_col_csv/model-config.js,sha256=w-tLCG8NeEOk4RdtgLOvWucAN2P8LKEWgfKtDmzuRrQ,2617
 pyspimosim/www/two_col_csv/model-info.html,sha256=z2uVLcPvOOSJkg95goXf6Mtqkq3bc9MsaUQht_x90Wg,129
-pyspimosim-0.2.14.1.dist-info/ALL_LICENSES.md,sha256=IVz7dV8JIwiA8y5MkhUJO7g55BZ4WPrltWvGoY2WCVE,51690
-pyspimosim-0.2.14.1.dist-info/LICENSE.md,sha256=ihIzac5TUyM-1oCebhkQNHUlHRgEDwcQ8Jv-DvKTVOs,1229
-pyspimosim-0.2.14.1.dist-info/METADATA,sha256=WM6DjGoK2Nh8adfqGpNrz5en4K1uaev0evW3UBbnQ0o,69403
-pyspimosim-0.2.14.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pyspimosim-0.2.14.1.dist-info/top_level.txt,sha256=porIeGWfRNNNNHH61NUU4_wT2OdYv-s79JUThcHpUJM,16
-pyspimosim-0.2.14.1.dist-info/RECORD,,
+pyspimosim-0.2.14.2.dist-info/ALL_LICENSES.md,sha256=IVz7dV8JIwiA8y5MkhUJO7g55BZ4WPrltWvGoY2WCVE,51690
+pyspimosim-0.2.14.2.dist-info/LICENSE.md,sha256=ihIzac5TUyM-1oCebhkQNHUlHRgEDwcQ8Jv-DvKTVOs,1229
+pyspimosim-0.2.14.2.dist-info/METADATA,sha256=LdbYz2ERfDsLtBFjgDNU-LvJehBB7P7JZrcxZp3fa-U,69403
+pyspimosim-0.2.14.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+pyspimosim-0.2.14.2.dist-info/top_level.txt,sha256=porIeGWfRNNNNHH61NUU4_wT2OdYv-s79JUThcHpUJM,16
+pyspimosim-0.2.14.2.dist-info/RECORD,,
```

