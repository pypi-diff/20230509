# Comparing `tmp/mmpy_bot-2.1.2-py3-none-any.whl.zip` & `tmp/mmpy_bot-2.1.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 30286 bytes, number of entries: 27
--rw-r--r--  2.0 unx       50 b- defN 23-Mar-29 09:14 docs/__init__.py
--rw-r--r--  2.0 unx      836 b- defN 23-Mar-29 09:14 docs/conf.py
--rw-r--r--  2.0 unx     1678 b- defN 23-Mar-29 09:14 docs/settings.py
--rw-r--r--  2.0 unx      732 b- defN 23-Mar-29 09:14 mmpy_bot/__init__.py
--rw-r--r--  2.0 unx     4927 b- defN 23-Mar-29 09:14 mmpy_bot/bot.py
--rw-r--r--  2.0 unx     7474 b- defN 23-Mar-29 09:14 mmpy_bot/driver.py
--rw-r--r--  2.0 unx     4362 b- defN 23-Mar-29 09:14 mmpy_bot/event_handler.py
--rw-r--r--  2.0 unx     9992 b- defN 23-Mar-29 09:14 mmpy_bot/function.py
--rw-r--r--  2.0 unx     2469 b- defN 23-Mar-29 09:14 mmpy_bot/scheduler.py
--rw-r--r--  2.0 unx     4635 b- defN 23-Mar-29 09:14 mmpy_bot/settings.py
--rw-r--r--  2.0 unx     3096 b- defN 23-Mar-29 09:14 mmpy_bot/threadpool.py
--rw-r--r--  2.0 unx      467 b- defN 23-Mar-29 09:14 mmpy_bot/utils.py
--rw-r--r--  2.0 unx        6 b- defN 23-Mar-29 09:15 mmpy_bot/version.txt
--rw-r--r--  2.0 unx     3908 b- defN 23-Mar-29 09:14 mmpy_bot/webhook_server.py
--rw-r--r--  2.0 unx     3517 b- defN 23-Mar-29 09:14 mmpy_bot/wrappers.py
--rw-r--r--  2.0 unx      308 b- defN 23-Mar-29 09:14 mmpy_bot/plugins/__init__.py
--rw-r--r--  2.0 unx     6866 b- defN 23-Mar-29 09:14 mmpy_bot/plugins/base.py
--rw-r--r--  2.0 unx     6981 b- defN 23-Mar-29 09:14 mmpy_bot/plugins/example.py
--rw-r--r--  2.0 unx     3308 b- defN 23-Mar-29 09:14 mmpy_bot/plugins/help_example.py
--rw-r--r--  2.0 unx     3061 b- defN 23-Mar-29 09:14 mmpy_bot/plugins/webhook_example.py
--rw-r--r--  2.0 unx      512 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/AUTHORS.rst
--rw-r--r--  2.0 unx     1073 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/LICENSE
--rw-r--r--  2.0 unx     5333 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       47 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       14 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2144 b- defN 23-Mar-29 09:15 mmpy_bot-2.1.2.dist-info/RECORD
-27 files, 77888 bytes uncompressed, 26862 bytes compressed:  65.5%
+Zip file size: 30364 bytes, number of entries: 27
+-rw-r--r--  2.0 unx       50 b- defN 23-May-09 09:30 docs/__init__.py
+-rw-r--r--  2.0 unx      836 b- defN 23-May-09 09:30 docs/conf.py
+-rw-r--r--  2.0 unx     1678 b- defN 23-May-09 09:30 docs/settings.py
+-rw-r--r--  2.0 unx      732 b- defN 23-May-09 09:30 mmpy_bot/__init__.py
+-rw-r--r--  2.0 unx     4927 b- defN 23-May-09 09:30 mmpy_bot/bot.py
+-rw-r--r--  2.0 unx     7474 b- defN 23-May-09 09:30 mmpy_bot/driver.py
+-rw-r--r--  2.0 unx     4362 b- defN 23-May-09 09:30 mmpy_bot/event_handler.py
+-rw-r--r--  2.0 unx     9992 b- defN 23-May-09 09:30 mmpy_bot/function.py
+-rw-r--r--  2.0 unx     2468 b- defN 23-May-09 09:30 mmpy_bot/scheduler.py
+-rw-r--r--  2.0 unx     4635 b- defN 23-May-09 09:30 mmpy_bot/settings.py
+-rw-r--r--  2.0 unx     3495 b- defN 23-May-09 09:30 mmpy_bot/threadpool.py
+-rw-r--r--  2.0 unx      467 b- defN 23-May-09 09:30 mmpy_bot/utils.py
+-rw-r--r--  2.0 unx        6 b- defN 23-May-09 09:30 mmpy_bot/version.txt
+-rw-r--r--  2.0 unx     3908 b- defN 23-May-09 09:30 mmpy_bot/webhook_server.py
+-rw-r--r--  2.0 unx     3517 b- defN 23-May-09 09:30 mmpy_bot/wrappers.py
+-rw-r--r--  2.0 unx      308 b- defN 23-May-09 09:30 mmpy_bot/plugins/__init__.py
+-rw-r--r--  2.0 unx     6866 b- defN 23-May-09 09:30 mmpy_bot/plugins/base.py
+-rw-r--r--  2.0 unx     6991 b- defN 23-May-09 09:30 mmpy_bot/plugins/example.py
+-rw-r--r--  2.0 unx     3333 b- defN 23-May-09 09:30 mmpy_bot/plugins/help_example.py
+-rw-r--r--  2.0 unx     3061 b- defN 23-May-09 09:30 mmpy_bot/plugins/webhook_example.py
+-rw-r--r--  2.0 unx      512 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/AUTHORS.rst
+-rw-r--r--  2.0 unx     1073 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     5333 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       47 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       14 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2144 b- defN 23-May-09 09:30 mmpy_bot-2.1.3.dist-info/RECORD
+27 files, 78321 bytes uncompressed, 26940 bytes compressed:  65.6%
```

## zipnote {}

```diff
@@ -54,29 +54,29 @@
 
 Filename: mmpy_bot/plugins/help_example.py
 Comment: 
 
 Filename: mmpy_bot/plugins/webhook_example.py
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/AUTHORS.rst
+Filename: mmpy_bot-2.1.3.dist-info/AUTHORS.rst
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/LICENSE
+Filename: mmpy_bot-2.1.3.dist-info/LICENSE
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/METADATA
+Filename: mmpy_bot-2.1.3.dist-info/METADATA
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/WHEEL
+Filename: mmpy_bot-2.1.3.dist-info/WHEEL
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/entry_points.txt
+Filename: mmpy_bot-2.1.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/top_level.txt
+Filename: mmpy_bot-2.1.3.dist-info/top_level.txt
 Comment: 
 
-Filename: mmpy_bot-2.1.2.dist-info/RECORD
+Filename: mmpy_bot-2.1.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## mmpy_bot/scheduler.py

```diff
@@ -38,15 +38,14 @@
 def _run_job(self, job):
     """Overrides default_scheduler._run_job to support running the jobs in a separate
     process.
 
     Either way, this waits for the result in a dedicated thread to prevent blocking the
     event loop.
     """
-
     # Launch job in a dedicated process and send the result through a pipe.
     if "subprocess" in job.tags:
 
         def wrapped_run(pipe: Connection):
             result = job.run()
             pipe.send(result)
```

## mmpy_bot/threadpool.py

```diff
@@ -60,24 +60,33 @@
             function, arguments = self._queue.get()
             # Notify the pool that we started working
             self._busy_workers.put(1)
             try:
                 function(*arguments)
             except Exception:
                 log.exception("Unhandled exception in main loop")
+            except BaseException:
+                # Can be KeyboardInterrupt, SystemExit, ...
+                self.alive = False
             # Notify the pool that we finished working
             self._queue.task_done()
             self._busy_workers.get()
 
     def start_scheduler_thread(self, trigger_period: float):
         def run_pending():
             log.info("Scheduler thread started.")
             while self.alive:
                 time.sleep(trigger_period)
-                default_scheduler.run_pending()
+                try:
+                    default_scheduler.run_pending()
+                except Exception:
+                    log.exception("Unhandled exception in main loop")
+                except BaseException:
+                    # Can be KeyboardInterrupt, SystemExit, ...
+                    self.alive = False
             log.info("Scheduler thread stopped.")
 
         self.add_task(run_pending)
 
     def start_webhook_server_thread(self, webhook_server: WebHookServer):
         async def start_server():
             log.info("Webhook server thread started.")
```

## mmpy_bot/version.txt

```diff
@@ -1 +1 @@
-2.1.2
+2.1.3
```

## mmpy_bot/plugins/example.py

```diff
@@ -160,12 +160,14 @@
         """Cancels all scheduled jobs, including recurring and one-time events."""
         schedule.clear()
         self.driver.reply_to(message, "Canceled all jobs.")
 
     @listen_to("^sleep ([0-9]+)$", needs_mention=True)
     async def sleep_reply(self, message: Message, seconds: str):
         """Sleeps for the specified number of seconds.
+
         Arguments:
-            - seconds: How many seconds to sleep for."""
+            - seconds: How many seconds to sleep for.
+        """
         self.driver.reply_to(message, f"Okay, I will be waiting {seconds} seconds.")
         await asyncio.sleep(int(seconds))
         self.driver.reply_to(message, "Done!")
```

## mmpy_bot/plugins/help_example.py

```diff
@@ -60,15 +60,14 @@
             self.help = listen_to("^!help$")(self.help)
 
     def get_help_string(self, message: Message) -> str:
         """Renders help information (FunctionInfo objects) into a markdown string.
 
         Help information is presented in a condensed format, grouped into categories
         """
-
         help_function_info = sorted(self.get_help(message), key=_custom_help_sort)
 
         string = "### The following functions have been registered:\n\n"
         string += "###### `(*)` require the use of `@botname`, "
         string += "`(+)` can only be used in direct message\n"
         old_category = None
 
@@ -88,13 +87,13 @@
         """Obtain Help info from PluginManager.
 
         Override this method if you need to customize which listeners will be included
         in the help.
         """
         return self.plugin_manager.get_help()
 
-    @listen_to("^help$", needs_mention=True)
+    @listen_to("^help$", needs_mention=True, human_description="help")
     async def help(self, message: Message):
         """Shows this help information."""
         self.driver.reply_to(
             message, self.get_help_string(message), direct=self.direct_help
         )
```

## Comparing `mmpy_bot-2.1.2.dist-info/AUTHORS.rst` & `mmpy_bot-2.1.3.dist-info/AUTHORS.rst`

 * *Files identical despite different names*

## Comparing `mmpy_bot-2.1.2.dist-info/LICENSE` & `mmpy_bot-2.1.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `mmpy_bot-2.1.2.dist-info/METADATA` & `mmpy_bot-2.1.3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: mmpy-bot
-Version: 2.1.2
+Version: 2.1.3
 Summary: A python based bot for Mattermost with its own webhook server.
 Home-page: https://github.com/attzonko/mmpy_bot
 Author: Alex Tzonkov
 Author-email: alex.tzonkov@gmail.com
 License: MIT
 Keywords: chat bot mattermost
 Platform: Any
@@ -23,20 +23,20 @@
 License-File: AUTHORS.rst
 Requires-Dist: aiohttp (>=3.7.4.post0)
 Requires-Dist: click (>=7.0)
 Requires-Dist: mattermostautodriver (>=1.2.2)
 Requires-Dist: schedule (>=0.6.0)
 Requires-Dist: Sphinx (>=1.3.3)
 Provides-Extra: dev
-Requires-Dist: black (==23.1.0) ; extra == 'dev'
-Requires-Dist: docformatter (==1.5.1) ; extra == 'dev'
-Requires-Dist: filelock (==3.10.7) ; extra == 'dev'
+Requires-Dist: black (==23.3.0) ; extra == 'dev'
+Requires-Dist: docformatter (==1.6.0) ; extra == 'dev'
+Requires-Dist: filelock (==3.12.0) ; extra == 'dev'
 Requires-Dist: flake8 (==6.0.0) ; extra == 'dev'
 Requires-Dist: isort (==5.12.0) ; extra == 'dev'
-Requires-Dist: pytest (==7.2.2) ; extra == 'dev'
+Requires-Dist: pytest (==7.3.1) ; extra == 'dev'
 Requires-Dist: pytest-xdist (==3.2.1) ; extra == 'dev'
 Requires-Dist: pytype (==2022.10.26) ; extra == 'dev'
 Requires-Dist: snapshottest (==0.6.0) ; extra == 'dev'
 
 [![PyPI](https://badge.fury.io/py/mmpy-bot.svg)](https://pypi.org/project/mmpy-bot/)
 [![Maintainability](https://api.codeclimate.com/v1/badges/809c8d66aea982d9e3da/maintainability)](https://codeclimate.com/github/attzonko/mmpy_bot/maintainability)
 [![Python Support](https://img.shields.io/pypi/pyversions/mmpy-bot.svg)](https://pypi.org/project/mmpy-bot/)
```

## Comparing `mmpy_bot-2.1.2.dist-info/RECORD` & `mmpy_bot-2.1.3.dist-info/RECORD`

 * *Files 13% similar despite different names*

```diff
@@ -2,26 +2,26 @@
 docs/conf.py,sha256=Bkh7k82Xk88SEFePjek_TxzIKHbQNMDBQ7qkq-aHJvY,836
 docs/settings.py,sha256=9HHUJH8jEyv6_5nmp22cSEW7gVt8_YFKvoMU7oHnkSA,1678
 mmpy_bot/__init__.py,sha256=nk_V9cFMYc8rDmi7bJWJ-Aw4oBRm1dYlUe-3edkgU58,732
 mmpy_bot/bot.py,sha256=_AeeuXwzQoUhLTzEnCSK6oN8hcHBUTRTJthX6EK2LAE,4927
 mmpy_bot/driver.py,sha256=Xpw5KfSpvb0i5v9jivuK2M5vW3A1swLLj0RSizeiM8c,7474
 mmpy_bot/event_handler.py,sha256=CBpA2ORo8KSB-NhMp62ItpOrtlOHG7ZFBcvpsbtjz1w,4362
 mmpy_bot/function.py,sha256=WvfvYkX6lMnRYTey0Aura2RebLl4RfuO7bfiSlTfrVw,9992
-mmpy_bot/scheduler.py,sha256=ikAF9xs_uPwH6C-MP0WwSr5mIDL3pw52Re__tpnTviw,2469
+mmpy_bot/scheduler.py,sha256=giGVgoC7k8OPFRfLBceUWiuMOyDliXNbHpGJTUs3YiY,2468
 mmpy_bot/settings.py,sha256=mzQOG43l9aZA2HziQen8Mct2llnAKpkgz-0F8iErdew,4635
-mmpy_bot/threadpool.py,sha256=BXQc2F-KU-PktVP00kwmaMxBh9dpC0HRsuILf8ITFWE,3096
+mmpy_bot/threadpool.py,sha256=5XbU8GZZDSCkCbbWI1edFGOyG6JW8c7EDl5zRJwQCkI,3495
 mmpy_bot/utils.py,sha256=8elgfScS-XArO0CvXOqMBe4QTkKxv4JKE6KuPTEjteY,467
-mmpy_bot/version.txt,sha256=n2JxlR7coC4MimaaeZMGJnF7d_BEOtijJ7k6UuQZSCk,6
+mmpy_bot/version.txt,sha256=6wGk6OiSJAbxWiLK3D-uKNT1E6_hG0c0eI6y6nPPA04,6
 mmpy_bot/webhook_server.py,sha256=z1PRX15VF3jMX1R8b3SgH9pZ1OKXvAum1inTxTnIH28,3908
 mmpy_bot/wrappers.py,sha256=JAK0tN72ROfz-XjHpFfKY3AYEouPCu8Vdpjj_CXLI8A,3517
 mmpy_bot/plugins/__init__.py,sha256=VKEO8vbMdWNkCTIJ4D8dNhDsZvKUIZ04oFuD0I2CoEM,308
 mmpy_bot/plugins/base.py,sha256=FIRNLtc3kFwdxyEBXjDg_XIozVCCjFIL5MYzmYrd99g,6866
-mmpy_bot/plugins/example.py,sha256=76qfsLGtI90CtgeKGFmDdSWLt5eLoM3bh97FiO8UUPQ,6981
-mmpy_bot/plugins/help_example.py,sha256=yCKPL9r9G-rO_Og859u8JkZN1HEhXB3qnyWqdA35muo,3308
+mmpy_bot/plugins/example.py,sha256=zxYtfpuGCQ1ZO_yw-7IRQ2tMpBBErnGuFyVIAGlOza4,6991
+mmpy_bot/plugins/help_example.py,sha256=SMb3q8iVL5JSJVfgFUd0Fkl8bZZFGGJxV2DRUjQmM48,3333
 mmpy_bot/plugins/webhook_example.py,sha256=4skNf8BUEVnmBadDHKvfLl5BiPSspf-Fh7f_i6AzbNw,3061
-mmpy_bot-2.1.2.dist-info/AUTHORS.rst,sha256=pvgDXNYf0Ga2Z7q4IVAJi4GQYAaIGhgzkwkOqvoTTns,512
-mmpy_bot-2.1.2.dist-info/LICENSE,sha256=zTq8q3ngTN29cMS4jOvsZDNa6rZZxF-Fg3zd3nWHkDk,1073
-mmpy_bot-2.1.2.dist-info/METADATA,sha256=8SByzflAIBph5VS6RBfp1oQoparZTO8Brnzfca1Bop8,5333
-mmpy_bot-2.1.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-mmpy_bot-2.1.2.dist-info/entry_points.txt,sha256=Wx7CpEw_4yWKfiisTSBNKIre_8tMuW_2AJivnj7eM4A,47
-mmpy_bot-2.1.2.dist-info/top_level.txt,sha256=WMBAa7gXfAw0Ig3WiX7P1O1UJ1Z6iHnrppPJs1EgE6w,14
-mmpy_bot-2.1.2.dist-info/RECORD,,
+mmpy_bot-2.1.3.dist-info/AUTHORS.rst,sha256=pvgDXNYf0Ga2Z7q4IVAJi4GQYAaIGhgzkwkOqvoTTns,512
+mmpy_bot-2.1.3.dist-info/LICENSE,sha256=zTq8q3ngTN29cMS4jOvsZDNa6rZZxF-Fg3zd3nWHkDk,1073
+mmpy_bot-2.1.3.dist-info/METADATA,sha256=zcKJqgOtbAJcfwPwpoZZxO4hKy7rh3geqIkKG7nsS9U,5333
+mmpy_bot-2.1.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+mmpy_bot-2.1.3.dist-info/entry_points.txt,sha256=Wx7CpEw_4yWKfiisTSBNKIre_8tMuW_2AJivnj7eM4A,47
+mmpy_bot-2.1.3.dist-info/top_level.txt,sha256=WMBAa7gXfAw0Ig3WiX7P1O1UJ1Z6iHnrppPJs1EgE6w,14
+mmpy_bot-2.1.3.dist-info/RECORD,,
```

