# Comparing `tmp/riptable-1.6.9.tar.gz` & `tmp/riptable-1.7.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "riptable-1.6.9.tar", last modified: Wed Apr  5 17:05:55 2023, max compression
+gzip compressed data, was "riptable-1.7.0.tar", last modified: Tue May  9 20:36:40 2023, max compression
```

## Comparing `riptable-1.6.9.tar` & `riptable-1.7.0.tar`

### file list

```diff
@@ -1,262 +1,263 @@
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.285848 riptable-1.6.9/
--rw-rw-rw-   0        0        0      291 2023-04-05 16:54:02.000000 riptable-1.6.9/.editorconfig
--rw-rw-rw-   0        0        0      196 2023-04-05 16:54:02.000000 riptable-1.6.9/.gitattributes
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.051471 riptable-1.6.9/.github/
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.067095 riptable-1.6.9/.github/workflows/
--rw-rw-rw-   0        0        0     7747 2023-04-05 16:54:02.000000 riptable-1.6.9/.github/workflows/python-package.yml
--rw-rw-rw-   0        0        0     2110 2023-04-05 16:54:02.000000 riptable-1.6.9/.gitignore
--rw-rw-rw-   0        0        0      309 2023-04-05 16:54:02.000000 riptable-1.6.9/BUILDNOTES.txt
--rw-rw-rw-   0        0        0     2634 2023-04-05 16:54:02.000000 riptable-1.6.9/LICENSE
--rw-rw-rw-   0        0        0     3464 2023-04-05 16:54:02.000000 riptable-1.6.9/LICENSES-thirdparty.md
--rw-rw-rw-   0        0        0      196 2023-04-05 16:54:02.000000 riptable-1.6.9/MANIFEST.in
--rw-rw-rw-   0        0        0      659 2023-04-05 17:05:55.285848 riptable-1.6.9/PKG-INFO
--rw-rw-rw-   0        0        0     6083 2023-04-05 16:54:02.000000 riptable-1.6.9/README.md
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.067095 riptable-1.6.9/conda_recipe/
--rw-rw-rw-   0        0        0       19 2023-04-05 16:54:02.000000 riptable-1.6.9/conda_recipe/conda_build_config.yaml
--rw-rw-rw-   0        0        0     1822 2023-04-05 16:54:02.000000 riptable-1.6.9/conda_recipe/meta.yaml
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.082720 riptable-1.6.9/dev_tools/
--rw-rw-rw-   0        0        0     3754 2023-04-05 16:54:02.000000 riptable-1.6.9/dev_tools/gen_requirements.py
--rw-rw-rw-   0        0        0    23857 2023-04-05 16:54:02.000000 riptable-1.6.9/dev_tools/validate_docstrings.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.082720 riptable-1.6.9/docs/
--rw-rw-rw-   0        0        0      901 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/CONTRIBUTING.md
--rw-rw-rw-   0        0        0      658 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/Makefile
--rw-rw-rw-   0        0        0     2979 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/THREADING.md
--rwxrwxrwx   0        0        0      799 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/make.bat
--rw-rw-rw-   0        0        0     1085 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/riptable_logo.PNG
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.082720 riptable-1.6.9/docs/source/
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.082720 riptable-1.6.9/docs/source/_static/
--rw-rw-rw-   0        0        0        0 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/_static/.keep
--rw-rw-rw-   0        0        0    14482 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/benchmarking.rst
--rw-rw-rw-   0        0        0     4478 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/conf.py
--rw-rw-rw-   0        0        0      487 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/index.rst
--rw-rw-rw-   0        0        0       68 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/modules.rst
--rw-rw-rw-   0        0        0     6795 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/riptable.rst
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.113970 riptable-1.6.9/docs/source/tutorial/
--rw-rw-rw-   0        0        0    23192 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/RiptableExercises.ipynb
--rw-rw-rw-   0        0        0    95449 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/RiptableSolutions.ipynb
--rw-rw-rw-   0        0        0    35605 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/output_11_0.png
--rw-rw-rw-   0        0        0     5827 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/output_13_0.png
--rw-rw-rw-   0        0        0    60197 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/output_15_0.png
--rw-rw-rw-   0        0        0   148394 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/output_25_0.png
--rw-rw-rw-   0        0        0   100101 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/output_27_0.png
--rw-rw-rw-   0        0        0    16998 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/perf-may-suffer.png
--rw-rw-rw-   0        0        0    45876 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/rt_autocomplete.png
--rw-rw-rw-   0        0        0    24063 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/rt_autocomplete_internal.png
--rw-rw-rw-   0        0        0    12995 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/rt_dataset.svg
--rw-rw-rw-   0        0        0    21979 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/rt_dataset_indices.svg
--rw-rw-rw-   0        0        0     6885 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/rt_fastarray.svg
--rw-rw-rw-   0        0        0    83328 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/split-apply-combine-gray.svg
--rw-rw-rw-   0        0        0      735 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial.rst
--rw-rw-rw-   0        0        0    13974 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_accums.rst
--rw-rw-rw-   0        0        0     2914 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_cat_reduce.rst
--rw-rw-rw-   0        0        0    49070 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_categoricals.rst
--rw-rw-rw-   0        0        0     7129 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_concat.rst
--rw-rw-rw-   0        0        0    35179 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_datasets.rst
--rw-rw-rw-   0        0        0    32489 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_datetimes.rst
--rw-rw-rw-   0        0        0    15663 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_filters.rst
--rw-rw-rw-   0        0        0    13358 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_intro.rst
--rw-rw-rw-   0        0        0    13460 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_io.rst
--rw-rw-rw-   0        0        0    19432 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_merge.rst
--rw-rw-rw-   0        0        0    13717 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_missing_data.rst
--rw-rw-rw-   0        0        0      820 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_numpy_rt.rst
--rw-rw-rw-   0        0        0     1993 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_performance.rst
--rw-rw-rw-   0        0        0     4168 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_reshape.rst
--rw-rw-rw-   0        0        0     5391 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_sample_data.rst
--rw-rw-rw-   0        0        0    12285 2023-04-05 16:54:02.000000 riptable-1.6.9/docs/source/tutorial/tutorial_visualize.rst
--rw-rw-rw-   0        0        0      236 2023-04-05 16:54:02.000000 riptable-1.6.9/environment.yml
--rw-rw-rw-   0        0        0     3372 2023-04-05 16:54:02.000000 riptable-1.6.9/pyproject.toml
--rw-rw-rw-   0        0        0       47 2023-04-05 16:54:02.000000 riptable-1.6.9/requirements.txt
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.160845 riptable-1.6.9/riptable/
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.176471 riptable-1.6.9/riptable/Utils/
--rw-rw-rw-   0        0        0        2 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/__init__.py
--rw-rw-rw-   0        0        0    25494 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/appdirs.py
--rw-rw-rw-   0        0        0     9278 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/common.py
--rw-rw-rw-   0        0        0     8728 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/conversion_utils.py
--rw-rw-rw-   0        0        0    21765 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/display_options.py
--rw-rw-rw-   0        0        0    13165 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/ipython_utils.py
--rw-rw-rw-   0        0        0     2250 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/pandas_utils.py
--rw-rw-rw-   0        0        0    18073 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/rt_display_nested.py
--rw-rw-rw-   0        0        0    14097 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/rt_display_properties.py
--rw-rw-rw-   0        0        0     3764 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/rt_metadata.py
--rw-rw-rw-   0        0        0    18355 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/rt_testdata.py
--rw-rw-rw-   0        0        0    11396 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/rt_testing.py
--rw-rw-rw-   0        0        0      501 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/teamcity_helper.py
--rw-rw-rw-   0        0        0     3056 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/Utils/terminalsize.py
--rw-rw-rw-   0        0        0     6318 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/__init__.py
--rw-rw-rw-   0        0        0       21 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable/_version.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.192095 riptable-1.6.9/riptable/benchmarks/
--rw-rw-rw-   0        0        0     3959 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/__init__.py
--rw-rw-rw-   0        0        0      109 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/__main__.py
--rw-rw-rw-   0        0        0     8894 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/analysis.py
--rw-rw-rw-   0        0        0      725 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_categorical.py
--rw-rw-rw-   0        0        0    11417 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_grouping.py
--rw-rw-rw-   0        0        0    20287 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_merge.py
--rw-rw-rw-   0        0        0    24715 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_numpy.py
--rw-rw-rw-   0        0        0     1079 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_operators.py
--rw-rw-rw-   0        0        0    46367 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/bench_primops.py
--rw-rw-rw-   0        0        0     6962 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/benchmark.py
--rw-rw-rw-   0        0        0    15951 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/main.py
--rw-rw-rw-   0        0        0     9889 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/rand_data.py
--rw-rw-rw-   0        0        0    19557 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/rand_keydata.py
--rw-rw-rw-   0        0        0      914 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/results.py
--rw-rw-rw-   0        0        0    13245 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/benchmarks/runner.py
--rw-rw-rw-   0        0        0     1475 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/config.py
--rw-rw-rw-   0        0        0     2685 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/conftest.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.192095 riptable-1.6.9/riptable/hypothesis_tests/
--rw-rw-rw-   0        0        0        9 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/__init__.py
--rw-rw-rw-   0        0        0     2938 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/conftest.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.207720 riptable-1.6.9/riptable/hypothesis_tests/strategies/
--rw-rw-rw-   0        0        0        0 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/strategies/__init__.py
--rw-rw-rw-   0        0        0    19383 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/strategies/categorical_strategy.py
--rw-rw-rw-   0        0        0    21811 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/strategies/helper_strategies.py
--rw-rw-rw-   0        0        0    11783 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/test_categorical_property.py
--rw-rw-rw-   0        0        0    86304 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
--rw-rw-rw-   0        0        0     3108 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/test_rt_numpy_property.py
--rw-rw-rw-   0        0        0    10986 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/test_sds_property.py
--rw-rw-rw-   0        0        0    12991 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/hypothesis_tests/test_ufunc_unary.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.207720 riptable-1.6.9/riptable/numba/
--rw-rw-rw-   0        0        0      224 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/numba/__init__.py
--rw-rw-rw-   0        0        0     2391 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/numba/indexing.py
--rw-rw-rw-   0        0        0     9430 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/numba/invalid_values.py
--rw-rw-rw-   0        0        0    50018 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_accum2.py
--rw-rw-rw-   0        0        0    19761 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_accumtable.py
--rw-rw-rw-   0        0        0     3810 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_algos.py
--rw-rw-rw-   0        0        0    20461 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_bin.py
--rw-rw-rw-   0        0        0   254920 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_categorical.py
--rw-rw-rw-   0        0        0     1078 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_compressedarray.py
--rw-rw-rw-   0        0        0     5824 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_csv.py
--rw-rw-rw-   0        0        0   283043 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_dataset.py
--rw-rw-rw-   0        0        0   266797 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_datetime.py
--rw-rw-rw-   0        0        0   106189 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_display.py
--rw-rw-rw-   0        0        0     2116 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_ema.py
--rw-rw-rw-   0        0        0    32335 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_enum.py
--rw-rw-rw-   0        0        0   230172 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_fastarray.py
--rw-rw-rw-   0        0        0    24106 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_fastarraynumba.py
--rw-rw-rw-   0        0        0    28854 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_groupby.py
--rw-rw-rw-   0        0        0    18239 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_groupbykeys.py
--rw-rw-rw-   0        0        0    27756 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_groupbynumba.py
--rw-rw-rw-   0        0        0   139235 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_groupbyops.py
--rw-rw-rw-   0        0        0   161893 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_grouping.py
--rw-rw-rw-   0        0        0    29767 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_hstack.py
--rw-rw-rw-   0        0        0     3345 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_imatrix.py
--rw-rw-rw-   0        0        0     4797 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_io.py
--rw-rw-rw-   0        0        0    23024 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_itemcontainer.py
--rw-rw-rw-   0        0        0    12139 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_ledger.py
--rw-rw-rw-   0        0        0    24934 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_matplotlib.py
--rw-rw-rw-   0        0        0   200963 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_merge.py
--rw-rw-rw-   0        0        0    92846 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_merge_asof.py
--rw-rw-rw-   0        0        0    11689 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_meta.py
--rw-rw-rw-   0        0        0    32625 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_misc.py
--rw-rw-rw-   0        0        0     1059 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_mlutils.py
--rw-rw-rw-   0        0        0    34329 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_multiset.py
--rw-rw-rw-   0        0        0   195265 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_numpy.py
--rw-rw-rw-   0        0        0    26868 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_pdataset.py
--rw-rw-rw-   0        0        0     1204 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_pgroupby.py
--rw-rw-rw-   0        0        0   135828 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_sds.py
--rw-rw-rw-   0        0        0     4463 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_sharedmemory.py
--rw-rw-rw-   0        0        0     2979 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_sort_cache.py
--rw-rw-rw-   0        0        0     7062 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_stats.py
--rw-rw-rw-   0        0        0    52842 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_str.py
--rw-rw-rw-   0        0        0   196468 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_struct.py
--rw-rw-rw-   0        0        0    17616 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_timers.py
--rw-rw-rw-   0        0        0    42160 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_timezone.py
--rw-rw-rw-   0        0        0    39281 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/rt_utils.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.207720 riptable-1.6.9/riptable/test_tooling_integration/
--rw-rw-rw-   0        0        0       71 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/__init__.py
--rw-rw-rw-   0        0        0    10970 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/ipykernel_integration_test.py
--rw-rw-rw-   0        0        0    38556 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/ipython_compatibility_test.py
--rw-rw-rw-   0        0        0    14836 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/ipython_integration_test.py
--rw-rw-rw-   0        0        0      742 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/run.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.207720 riptable-1.6.9/riptable/test_tooling_integration/test_display/
--rw-rw-rw-   0        0        0        9 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/test_display/__init__.py
--rw-rw-rw-   0        0        0     1604 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/test_display/test_display.py
--rw-rw-rw-   0        0        0     4668 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/test_tooling_integration/test_display/vnu_checker.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.207720 riptable-1.6.9/riptable/testing/
--rw-rw-rw-   0        0        0    14911 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/testing/array_assert.py
--rw-rw-rw-   0        0        0     5788 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/testing/randgen.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.285848 riptable-1.6.9/riptable/tests/
--rw-rw-rw-   0        0        0       27 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/__init__.py
--rw-rw-rw-   0        0        0     6648 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/generator_categorical_unit_test.py
--rw-rw-rw-   0        0        0     6460 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/generator_groupby_unit_test.py
--rw-rw-rw-   0        0        0     3937 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/groupby_categorical_unit_test_parameters.py
--rw-rw-rw-   0        0        0     5078 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/groupby_unit_test_parameters.py
--rw-rw-rw-   0        0        0      593 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/run.py
--rw-rw-rw-   0        0        0     1387 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/runall.py
--rw-rw-rw-   0        0        0    27535 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_accum2.py
--rw-rw-rw-   0        0        0     4390 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_accumtable.py
--rw-rw-rw-   0        0        0    20470 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_apply.py
--rw-rw-rw-   0        0        0     8459 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_base_function.py
--rw-rw-rw-   0        0        0     2553 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_bitcount.py
--rw-rw-rw-   0        0        0   138270 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical.py
--rw-rw-rw-   0        0        0    19605 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     1141 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_base_index.py
--rw-rw-rw-   0        0        0     3212 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_dtype.py
--rw-rw-rw-   0        0        0    16424 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_filter_invalid.py
--rw-rw-rw-   0        0        0     4124 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_functions.py
--rw-rw-rw-   0        0        0    33999 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_groupby.py
--rw-rw-rw-   0        0        0     3430 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_keywords.py
--rw-rw-rw-   0        0        0     3544 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_modify.py
--rw-rw-rw-   0        0        0    11486 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_ordered.py
--rw-rw-rw-   0        0        0     5883 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_setitem.py
--rw-rw-rw-   0        0        0     7248 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_sort_order.py
--rw-rw-rw-   0        0        0    19221 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_categorical_values.py
--rw-rw-rw-   0        0        0     7283 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_conversion_utils.py
--rw-rw-rw-   0        0        0     4894 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_csv.py
--rw-rw-rw-   0        0        0     6281 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_cut.py
--rw-rw-rw-   0        0        0    94892 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_dataset.py
--rw-rw-rw-   0        0        0    20218 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_dataset_slicing.py
--rw-rw-rw-   0        0        0    17510 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_date.py
--rw-rw-rw-   0        0        0   103094 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_datetime.py
--rw-rw-rw-   0        0        0    15278 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_datetime_math.py
--rw-rw-rw-   0        0        0    67667 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_fastarray.py
--rw-rw-rw-   0        0        0     4464 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_fastarray_bn.py
--rw-rw-rw-   0        0        0     3120 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_fastarray_constructor.py
--rw-rw-rw-   0        0        0    25041 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_fastarray_functions.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.285848 riptable-1.6.9/riptable/tests/test_files/
--rw-rw-rw-   0        0        0      739 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_files/groupby1_ex3.pickle
--rw-rw-rw-   0        0        0     2328 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_files/unicode_ex1.csv
--rw-rw-rw-   0        0        0     2334 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_files/unicode_ex2.csv
--rw-rw-rw-   0        0        0     2474 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_files/unicode_ex3.csv
--rw-rw-rw-   0        0        0     6831 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_flatten.py
--rw-rw-rw-   0        0        0    31848 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_groupby.py
--rw-rw-rw-   0        0        0   161516 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_groupby_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     5890 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_groupby_functions.py
--rw-rw-rw-   0        0        0     3443 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_groupby_simple_multikey.py
--rw-rw-rw-   0        0        0    56802 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_groupbyops.py
--rw-rw-rw-   0        0        0    25055 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_grouping.py
--rw-rw-rw-   0        0        0      105 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_hstack.py
--rw-rw-rw-   0        0        0    20277 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_interop_pyarrow.py
--rw-rw-rw-   0        0        0    22197 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_ismember.py
--rw-rw-rw-   0        0        0    12625 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_lexsort.py
--rw-rw-rw-   0        0        0   243669 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_merge.py
--rw-rw-rw-   0        0        0    24228 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_merge_asof.py
--rw-rw-rw-   0        0        0     7247 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_meta.py
--rw-rw-rw-   0        0        0    11644 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_multiset.py
--rw-rw-rw-   0        0        0     1086 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_pandas_utils.py
--rw-rw-rw-   0        0        0    11835 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_pdataset.py
--rw-rw-rw-   0        0        0     3664 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_pgroupby.py
--rw-rw-rw-   0        0        0     5298 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_restore_subclass.py
--rw-rw-rw-   0        0        0     7000 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_riptide_cpp.py
--rw-rw-rw-   0        0        0    21887 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_rtnumpy.py
--rw-rw-rw-   0        0        0     5435 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_rtutils.py
--rw-rw-rw-   0        0        0    76781 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_saveload.py
--rw-rw-rw-   0        0        0     1504 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_scalar.py
--rw-rw-rw-   0        0        0     3528 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_sds.py
--rw-rw-rw-   0        0        0    39970 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_sprint_fastarray.py
--rw-rw-rw-   0        0        0    25864 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_str.py
--rw-rw-rw-   0        0        0    33302 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_struct.py
--rw-rw-rw-   0        0        0      791 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_timewindow.py
--rw-rw-rw-   0        0        0    92837 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_ufunc2.py
--rw-rw-rw-   0        0        0     4828 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_unique.py
--rw-rw-rw-   0        0        0     5654 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/test_utils.py
--rw-rw-rw-   0        0        0     3380 2023-04-05 16:54:02.000000 riptable-1.6.9/riptable/tests/utils.py
-drwxrwxrwx   0        0        0        0 2023-04-05 17:05:55.160845 riptable-1.6.9/riptable.egg-info/
--rw-rw-rw-   0        0        0      659 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0     7922 2023-04-05 17:05:55.000000 riptable-1.6.9/riptable.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0        2 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable.egg-info/not-zip-safe
--rw-rw-rw-   0        0        0      110 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable.egg-info/requires.txt
--rw-rw-rw-   0        0        0        9 2023-04-05 17:05:54.000000 riptable-1.6.9/riptable.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       51 2023-04-05 16:54:02.000000 riptable-1.6.9/runtest.py
--rw-rw-rw-   0        0        0       42 2023-04-05 17:05:55.285848 riptable-1.6.9/setup.cfg
--rw-rw-rw-   0        0        0     1525 2023-04-05 16:54:02.000000 riptable-1.6.9/setup.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.098886 riptable-1.7.0/
+-rw-rw-rw-   0        0        0      291 2023-05-09 20:23:24.000000 riptable-1.7.0/.editorconfig
+-rw-rw-rw-   0        0        0      196 2023-05-09 20:23:24.000000 riptable-1.7.0/.gitattributes
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.286003 riptable-1.7.0/.github/
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/.github/workflows/
+-rw-rw-rw-   0        0        0     7747 2023-05-09 20:23:24.000000 riptable-1.7.0/.github/workflows/python-package.yml
+-rw-rw-rw-   0        0        0     2110 2023-05-09 20:23:24.000000 riptable-1.7.0/.gitignore
+-rw-rw-rw-   0        0        0      309 2023-05-09 20:23:24.000000 riptable-1.7.0/BUILDNOTES.txt
+-rw-rw-rw-   0        0        0     2634 2023-05-09 20:23:24.000000 riptable-1.7.0/LICENSE
+-rw-rw-rw-   0        0        0     3464 2023-05-09 20:23:24.000000 riptable-1.7.0/LICENSES-thirdparty.md
+-rw-rw-rw-   0        0        0      196 2023-05-09 20:23:24.000000 riptable-1.7.0/MANIFEST.in
+-rw-rw-rw-   0        0        0      659 2023-05-09 20:36:40.098886 riptable-1.7.0/PKG-INFO
+-rw-rw-rw-   0        0        0     6083 2023-05-09 20:23:24.000000 riptable-1.7.0/README.md
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/conda_recipe/
+-rw-rw-rw-   0        0        0       19 2023-05-09 20:23:24.000000 riptable-1.7.0/conda_recipe/conda_build_config.yaml
+-rw-rw-rw-   0        0        0     1804 2023-05-09 20:23:24.000000 riptable-1.7.0/conda_recipe/meta.yaml
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.302582 riptable-1.7.0/dev_tools/
+-rw-rw-rw-   0        0        0     3944 2023-05-09 20:23:24.000000 riptable-1.7.0/dev_tools/gen_requirements.py
+-rw-rw-rw-   0        0        0    25367 2023-05-09 20:23:24.000000 riptable-1.7.0/dev_tools/validate_docstrings.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/
+-rw-rw-rw-   0        0        0      901 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/CONTRIBUTING.md
+-rw-rw-rw-   0        0        0      658 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/Makefile
+-rw-rw-rw-   0        0        0     2979 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/THREADING.md
+-rwxrwxrwx   0        0        0      799 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/make.bat
+-rw-rw-rw-   0        0        0     1085 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/riptable_logo.PNG
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/source/
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.318222 riptable-1.7.0/docs/source/_static/
+-rw-rw-rw-   0        0        0        0 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/_static/.keep
+-rw-rw-rw-   0        0        0    14482 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/benchmarking.rst
+-rw-rw-rw-   0        0        0     4478 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/conf.py
+-rw-rw-rw-   0        0        0      487 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/index.rst
+-rw-rw-rw-   0        0        0       68 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/modules.rst
+-rw-rw-rw-   0        0        0     6795 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/riptable.rst
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.895775 riptable-1.7.0/docs/source/tutorial/
+-rw-rw-rw-   0        0        0    23344 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/RiptableExercises.ipynb
+-rw-rw-rw-   0        0        0    95601 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/RiptableSolutions.ipynb
+-rw-rw-rw-   0        0        0    35605 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_11_0.png
+-rw-rw-rw-   0        0        0     5827 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_13_0.png
+-rw-rw-rw-   0        0        0    60197 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_15_0.png
+-rw-rw-rw-   0        0        0   148394 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_25_0.png
+-rw-rw-rw-   0        0        0   100101 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/output_27_0.png
+-rw-rw-rw-   0        0        0    16998 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/perf-may-suffer.png
+-rw-rw-rw-   0        0        0    45876 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_autocomplete.png
+-rw-rw-rw-   0        0        0    24063 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_autocomplete_internal.png
+-rw-rw-rw-   0        0        0    12995 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_dataset.svg
+-rw-rw-rw-   0        0        0    21979 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_dataset_indices.svg
+-rw-rw-rw-   0        0        0     6885 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/rt_fastarray.svg
+-rw-rw-rw-   0        0        0    83328 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/split-apply-combine-gray.svg
+-rw-rw-rw-   0        0        0      770 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial.rst
+-rw-rw-rw-   0        0        0    13974 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_accums.rst
+-rw-rw-rw-   0        0        0     3913 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst
+-rw-rw-rw-   0        0        0     2914 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_cat_reduce.rst
+-rw-rw-rw-   0        0        0    49655 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_categoricals.rst
+-rw-rw-rw-   0        0        0     7129 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_concat.rst
+-rw-rw-rw-   0        0        0    35411 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_datasets.rst
+-rw-rw-rw-   0        0        0    32677 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_datetimes.rst
+-rw-rw-rw-   0        0        0    15663 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_filters.rst
+-rw-rw-rw-   0        0        0    13353 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_intro.rst
+-rw-rw-rw-   0        0        0    13470 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_io.rst
+-rw-rw-rw-   0        0        0    19432 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_merge.rst
+-rw-rw-rw-   0        0        0    13843 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_missing_data.rst
+-rw-rw-rw-   0        0        0      820 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_numpy_rt.rst
+-rw-rw-rw-   0        0        0     1993 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_performance.rst
+-rw-rw-rw-   0        0        0     4168 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_reshape.rst
+-rw-rw-rw-   0        0        0     5500 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_sample_data.rst
+-rw-rw-rw-   0        0        0    12285 2023-05-09 20:23:24.000000 riptable-1.7.0/docs/source/tutorial/tutorial_visualize.rst
+-rw-rw-rw-   0        0        0      236 2023-05-09 20:23:24.000000 riptable-1.7.0/environment.yml
+-rw-rw-rw-   0        0        0     3372 2023-05-09 20:23:24.000000 riptable-1.7.0/pyproject.toml
+-rw-rw-rw-   0        0        0       47 2023-05-09 20:23:24.000000 riptable-1.7.0/requirements.txt
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.958258 riptable-1.7.0/riptable/
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.973888 riptable-1.7.0/riptable/Utils/
+-rw-rw-rw-   0        0        0        2 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/__init__.py
+-rw-rw-rw-   0        0        0    25494 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/appdirs.py
+-rw-rw-rw-   0        0        0     9278 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/common.py
+-rw-rw-rw-   0        0        0     8728 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/conversion_utils.py
+-rw-rw-rw-   0        0        0    21765 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/display_options.py
+-rw-rw-rw-   0        0        0    13165 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/ipython_utils.py
+-rw-rw-rw-   0        0        0     2250 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/pandas_utils.py
+-rw-rw-rw-   0        0        0    18073 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_display_nested.py
+-rw-rw-rw-   0        0        0    14097 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_display_properties.py
+-rw-rw-rw-   0        0        0     3764 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_metadata.py
+-rw-rw-rw-   0        0        0    18355 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_testdata.py
+-rw-rw-rw-   0        0        0    11396 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/rt_testing.py
+-rw-rw-rw-   0        0        0      501 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/teamcity_helper.py
+-rw-rw-rw-   0        0        0     3056 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/Utils/terminalsize.py
+-rw-rw-rw-   0        0        0     6318 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/__init__.py
+-rw-rw-rw-   0        0        0       21 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable/_version.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.989508 riptable-1.7.0/riptable/benchmarks/
+-rw-rw-rw-   0        0        0     3959 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/__init__.py
+-rw-rw-rw-   0        0        0      109 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/__main__.py
+-rw-rw-rw-   0        0        0     8894 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/analysis.py
+-rw-rw-rw-   0        0        0      725 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_categorical.py
+-rw-rw-rw-   0        0        0    11417 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_grouping.py
+-rw-rw-rw-   0        0        0    20287 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_merge.py
+-rw-rw-rw-   0        0        0    24715 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_numpy.py
+-rw-rw-rw-   0        0        0     1079 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_operators.py
+-rw-rw-rw-   0        0        0    46367 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/bench_primops.py
+-rw-rw-rw-   0        0        0     6962 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/benchmark.py
+-rw-rw-rw-   0        0        0    15951 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/main.py
+-rw-rw-rw-   0        0        0     9889 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/rand_data.py
+-rw-rw-rw-   0        0        0    19557 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/rand_keydata.py
+-rw-rw-rw-   0        0        0      914 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/results.py
+-rw-rw-rw-   0        0        0    13245 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/benchmarks/runner.py
+-rw-rw-rw-   0        0        0     1475 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/config.py
+-rw-rw-rw-   0        0        0     2685 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/hypothesis_tests/
+-rw-rw-rw-   0        0        0        9 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/__init__.py
+-rw-rw-rw-   0        0        0     2938 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/hypothesis_tests/strategies/
+-rw-rw-rw-   0        0        0        0 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/__init__.py
+-rw-rw-rw-   0        0        0    19383 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/categorical_strategy.py
+-rw-rw-rw-   0        0        0    21811 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/strategies/helper_strategies.py
+-rw-rw-rw-   0        0        0    11783 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_categorical_property.py
+-rw-rw-rw-   0        0        0    86304 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
+-rw-rw-rw-   0        0        0     3108 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_rt_numpy_property.py
+-rw-rw-rw-   0        0        0    10986 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_sds_property.py
+-rw-rw-rw-   0        0        0    12991 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/hypothesis_tests/test_ufunc_unary.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/numba/
+-rw-rw-rw-   0        0        0      224 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/__init__.py
+-rw-rw-rw-   0        0        0     2391 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/indexing.py
+-rw-rw-rw-   0        0        0     9430 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/numba/invalid_values.py
+-rw-rw-rw-   0        0        0    50018 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_accum2.py
+-rw-rw-rw-   0        0        0    19761 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_accumtable.py
+-rw-rw-rw-   0        0        0     3810 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_algos.py
+-rw-rw-rw-   0        0        0    24445 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_bin.py
+-rw-rw-rw-   0        0        0   265037 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_categorical.py
+-rw-rw-rw-   0        0        0     1078 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_compressedarray.py
+-rw-rw-rw-   0        0        0     5824 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_csv.py
+-rw-rw-rw-   0        0        0   283494 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_dataset.py
+-rw-rw-rw-   0        0        0   274981 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_datetime.py
+-rw-rw-rw-   0        0        0   106189 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_display.py
+-rw-rw-rw-   0        0        0     2116 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_ema.py
+-rw-rw-rw-   0        0        0    32335 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_enum.py
+-rw-rw-rw-   0        0        0   237243 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_fastarray.py
+-rw-rw-rw-   0        0        0    24106 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_fastarraynumba.py
+-rw-rw-rw-   0        0        0    29850 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupby.py
+-rw-rw-rw-   0        0        0    18239 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbykeys.py
+-rw-rw-rw-   0        0        0    27756 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbynumba.py
+-rw-rw-rw-   0        0        0   139819 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_groupbyops.py
+-rw-rw-rw-   0        0        0   161893 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_grouping.py
+-rw-rw-rw-   0        0        0    29767 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_hstack.py
+-rw-rw-rw-   0        0        0     3345 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_imatrix.py
+-rw-rw-rw-   0        0        0     4797 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_io.py
+-rw-rw-rw-   0        0        0    23024 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_itemcontainer.py
+-rw-rw-rw-   0        0        0    12139 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_ledger.py
+-rw-rw-rw-   0        0        0    24924 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_matplotlib.py
+-rw-rw-rw-   0        0        0   200963 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_merge.py
+-rw-rw-rw-   0        0        0    92846 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_merge_asof.py
+-rw-rw-rw-   0        0        0    11689 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_meta.py
+-rw-rw-rw-   0        0        0    32625 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_misc.py
+-rw-rw-rw-   0        0        0     1059 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_mlutils.py
+-rw-rw-rw-   0        0        0    34329 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_multiset.py
+-rw-rw-rw-   0        0        0   195805 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_numpy.py
+-rw-rw-rw-   0        0        0    26902 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_pdataset.py
+-rw-rw-rw-   0        0        0     1204 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_pgroupby.py
+-rw-rw-rw-   0        0        0   135828 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sds.py
+-rw-rw-rw-   0        0        0     4463 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sharedmemory.py
+-rw-rw-rw-   0        0        0     2979 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_sort_cache.py
+-rw-rw-rw-   0        0        0     7062 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_stats.py
+-rw-rw-rw-   0        0        0    54140 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_str.py
+-rw-rw-rw-   0        0        0   196468 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_struct.py
+-rw-rw-rw-   0        0        0    17616 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_timers.py
+-rw-rw-rw-   0        0        0    42160 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_timezone.py
+-rw-rw-rw-   0        0        0    39281 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/rt_utils.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.005105 riptable-1.7.0/riptable/test_tooling_integration/
+-rw-rw-rw-   0        0        0       71 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/__init__.py
+-rw-rw-rw-   0        0        0    11006 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipykernel_integration_test.py
+-rw-rw-rw-   0        0        0    38590 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipython_compatibility_test.py
+-rw-rw-rw-   0        0        0    14870 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/ipython_integration_test.py
+-rw-rw-rw-   0        0        0      742 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/run.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.020737 riptable-1.7.0/riptable/test_tooling_integration/test_display/
+-rw-rw-rw-   0        0        0        9 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/__init__.py
+-rw-rw-rw-   0        0        0     1604 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/test_display.py
+-rw-rw-rw-   0        0        0     4668 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/test_tooling_integration/test_display/vnu_checker.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.020737 riptable-1.7.0/riptable/testing/
+-rw-rw-rw-   0        0        0    14911 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/testing/array_assert.py
+-rw-rw-rw-   0        0        0     5788 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/testing/randgen.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.083228 riptable-1.7.0/riptable/tests/
+-rw-rw-rw-   0        0        0       27 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/__init__.py
+-rw-rw-rw-   0        0        0     6648 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/generator_categorical_unit_test.py
+-rw-rw-rw-   0        0        0     6460 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/generator_groupby_unit_test.py
+-rw-rw-rw-   0        0        0     3937 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/groupby_categorical_unit_test_parameters.py
+-rw-rw-rw-   0        0        0     5078 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/groupby_unit_test_parameters.py
+-rw-rw-rw-   0        0        0      593 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/run.py
+-rw-rw-rw-   0        0        0     1387 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/runall.py
+-rw-rw-rw-   0        0        0    27732 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_accum2.py
+-rw-rw-rw-   0        0        0     4390 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_accumtable.py
+-rw-rw-rw-   0        0        0    20470 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_apply.py
+-rw-rw-rw-   0        0        0     8459 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_base_function.py
+-rw-rw-rw-   0        0        0     2553 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_bitcount.py
+-rw-rw-rw-   0        0        0   140008 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical.py
+-rw-rw-rw-   0        0        0    19605 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     1141 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_base_index.py
+-rw-rw-rw-   0        0        0     3312 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_dtype.py
+-rw-rw-rw-   0        0        0    16622 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_filter_invalid.py
+-rw-rw-rw-   0        0        0     4124 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_functions.py
+-rw-rw-rw-   0        0        0    37109 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_groupby.py
+-rw-rw-rw-   0        0        0     3430 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_keywords.py
+-rw-rw-rw-   0        0        0     3544 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_modify.py
+-rw-rw-rw-   0        0        0    11486 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_ordered.py
+-rw-rw-rw-   0        0        0     5883 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_setitem.py
+-rw-rw-rw-   0        0        0     7248 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_sort_order.py
+-rw-rw-rw-   0        0        0    19221 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_categorical_values.py
+-rw-rw-rw-   0        0        0     7283 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_conversion_utils.py
+-rw-rw-rw-   0        0        0     4894 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_csv.py
+-rw-rw-rw-   0        0        0     7141 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_cut.py
+-rw-rw-rw-   0        0        0    99865 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_dataset.py
+-rw-rw-rw-   0        0        0    20218 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_dataset_slicing.py
+-rw-rw-rw-   0        0        0    17510 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_date.py
+-rw-rw-rw-   0        0        0   112583 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_datetime.py
+-rw-rw-rw-   0        0        0    15278 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_datetime_math.py
+-rw-rw-rw-   0        0        0    69259 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray.py
+-rw-rw-rw-   0        0        0     6396 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_bn.py
+-rw-rw-rw-   0        0        0     3120 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_constructor.py
+-rw-rw-rw-   0        0        0    25041 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_fastarray_functions.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:40.098886 riptable-1.7.0/riptable/tests/test_files/
+-rw-rw-rw-   0        0        0      739 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/groupby1_ex3.pickle
+-rw-rw-rw-   0        0        0     2328 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex1.csv
+-rw-rw-rw-   0        0        0     2334 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex2.csv
+-rw-rw-rw-   0        0        0     2474 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_files/unicode_ex3.csv
+-rw-rw-rw-   0        0        0     6831 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_flatten.py
+-rw-rw-rw-   0        0        0    34515 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby.py
+-rw-rw-rw-   0        0        0   161516 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     5890 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_functions.py
+-rw-rw-rw-   0        0        0     3443 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupby_simple_multikey.py
+-rw-rw-rw-   0        0        0    56802 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_groupbyops.py
+-rw-rw-rw-   0        0        0    25055 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_grouping.py
+-rw-rw-rw-   0        0        0      105 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_hstack.py
+-rw-rw-rw-   0        0        0    20277 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_interop_pyarrow.py
+-rw-rw-rw-   0        0        0    22197 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_ismember.py
+-rw-rw-rw-   0        0        0    12625 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_lexsort.py
+-rw-rw-rw-   0        0        0   243669 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_merge.py
+-rw-rw-rw-   0        0        0    24228 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_merge_asof.py
+-rw-rw-rw-   0        0        0     7247 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_meta.py
+-rw-rw-rw-   0        0        0    11644 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_multiset.py
+-rw-rw-rw-   0        0        0     1086 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pandas_utils.py
+-rw-rw-rw-   0        0        0    11835 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pdataset.py
+-rw-rw-rw-   0        0        0     3664 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_pgroupby.py
+-rw-rw-rw-   0        0        0     5298 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_restore_subclass.py
+-rw-rw-rw-   0        0        0     7000 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_riptide_cpp.py
+-rw-rw-rw-   0        0        0    21887 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_rtnumpy.py
+-rw-rw-rw-   0        0        0     5435 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_rtutils.py
+-rw-rw-rw-   0        0        0    76781 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_saveload.py
+-rw-rw-rw-   0        0        0     1504 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_scalar.py
+-rw-rw-rw-   0        0        0     3528 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_sds.py
+-rw-rw-rw-   0        0        0    39970 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_sprint_fastarray.py
+-rw-rw-rw-   0        0        0    26324 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_str.py
+-rw-rw-rw-   0        0        0    33302 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_struct.py
+-rw-rw-rw-   0        0        0      791 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_timewindow.py
+-rw-rw-rw-   0        0        0    92837 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_ufunc2.py
+-rw-rw-rw-   0        0        0     4828 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_unique.py
+-rw-rw-rw-   0        0        0     5654 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/test_utils.py
+-rw-rw-rw-   0        0        0     3380 2023-05-09 20:23:24.000000 riptable-1.7.0/riptable/tests/utils.py
+drwxrwxrwx   0        0        0        0 2023-05-09 20:36:39.958258 riptable-1.7.0/riptable.egg-info/
+-rw-rw-rw-   0        0        0      659 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     7978 2023-05-09 20:36:39.000000 riptable-1.7.0/riptable.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0        2 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/not-zip-safe
+-rw-rw-rw-   0        0        0       99 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        9 2023-05-09 20:36:38.000000 riptable-1.7.0/riptable.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       51 2023-05-09 20:23:24.000000 riptable-1.7.0/runtest.py
+-rw-rw-rw-   0        0        0       42 2023-05-09 20:36:40.098886 riptable-1.7.0/setup.cfg
+-rw-rw-rw-   0        0        0     1506 2023-05-09 20:23:24.000000 riptable-1.7.0/setup.py
```

### Comparing `riptable-1.6.9/.github/workflows/python-package.yml` & `riptable-1.7.0/.github/workflows/python-package.yml`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/.gitignore` & `riptable-1.7.0/.gitignore`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/LICENSE` & `riptable-1.7.0/LICENSE`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/LICENSES-thirdparty.md` & `riptable-1.7.0/LICENSES-thirdparty.md`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/PKG-INFO` & `riptable-1.7.0/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.6.9
+Version: 1.7.0
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.6.9/README.md` & `riptable-1.7.0/README.md`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/conda_recipe/meta.yaml` & `riptable-1.7.0/conda_recipe/meta.yaml`

 * *Files 5% similar despite different names*

```diff
@@ -12,18 +12,17 @@
 
 requirements:
   host:
     - python {{ python}}
     - setuptools_scm
   run:
     - python
-    - riptide_cpp >=1.12.0,<2 # run with any (compatible) version in this range
-    - pandas >=0.24,<2.0
+    - riptide_cpp >=1.12.2,<2 # run with any (compatible) version in this range
+    - pandas >=1.0,<3.0
     - ansi2html >=1.5.2
-    - ipykernel
     - numpy >=1.22
     - numba >=0.56.2
     - python-dateutil
 
 test:
   source_files:
     - riptable
```

### Comparing `riptable-1.6.9/dev_tools/gen_requirements.py` & `riptable-1.7.0/dev_tools/gen_requirements.py`

 * *Files 7% similar despite different names*

```diff
@@ -9,14 +9,19 @@
     return platform.system() == "Linux"
 
 
 def is_windows() -> bool:
     return platform.system() == "Windows"
 
 
+def is_python(major: int, minor: int) -> bool:
+    ver = sys.version_info
+    return ver.major == major and ver.minor == minor
+
+
 _ABSEIL_REQ = "abseil-cpp==20220623.*"
 _BENCHMARK_REQ = "benchmark>=1.7,<1.8"
 _NUMPY_REQ = "numpy>=1.22"
 _TBB_VER = "==2021.6.*"
 _TBB_REQ = "tbb" + _TBB_VER
 _TBB_DEVEL_REQ = "tbb-devel" + _TBB_VER
 _ZSTD_REQ = "zstd>=1.5.2,<1.6"
@@ -49,18 +54,17 @@
     _ZSTD_REQ,  # PyPI package doesn't exist
 ] + toolchain_reqs
 
 # Core runtime requirements for riptable and riptide_cpp.
 runtime_reqs = [
     # No riptide_cpp as that must be handled separately
     "ansi2html>=1.5.2",
-    "ipykernel",
     "numba>=0.56.2",
     _NUMPY_REQ,
-    "pandas>=0.24,<2.0",
+    "pandas>=1.0,<3.0",
     "python-dateutil",
     _TBB_REQ,
 ]
 
 # Flake8 style guide requirements.
 flake8_reqs = [
     "flake8==6.*",
@@ -68,15 +72,16 @@
 
 # Complete test requirements for riptable tests.
 tests_reqs = [
     "arrow",
     "bokeh",
     "bottleneck",
     "hypothesis",
-    "ipython",
+    "ipykernel",
+    "ipython<8.13" if is_python(3, 8) else "ipython",
     "matplotlib",
     "nose",
     "pyarrow",
     "pymoo",
     "pytest",
     "pytest-cov",
 ]
@@ -88,31 +93,32 @@
         "sphinx-autoapi",
         "nbsphinx",
     ]
     + runtime_reqs
     + tests_reqs
 )
 
+# Black formatting requirements.
+black_reqs = [
+    "black==22.*",
+]
+
 # Docstrings validation requirements.
 # Validation requires complete riptable for iteration and evaluating examples.
 docstrings_reqs = (
     [
         "numpydoc",
         "tomli",
     ]
     + flake8_reqs
+    + black_reqs
     + runtime_reqs
     + tests_reqs
 )
 
-# Black formatting requirements.
-black_reqs = [
-    "black==22.*",
-]
-
 # Pydocstyle doc style requirements.
 pydocstyle_reqs = [
     "pydocstyle==6.*",
     "toml",
 ]
 
 # Complete developer requirements.
```

### Comparing `riptable-1.6.9/dev_tools/validate_docstrings.py` & `riptable-1.7.0/dev_tools/validate_docstrings.py`

 * *Files 4% similar despite different names*

```diff
@@ -58,14 +58,15 @@
     "GL98": "Private classes ({mentioned_private_classes}) should not be " "mentioned in public docstrings",
     "GL97": "Use 'array-like' rather than 'array_like' in docstrings.",
     "SA99": "{reference_name} in `See Also` section does not need `riptable` " "prefix, use {right_reference} instead.",
     "EX99": "Examples do not pass tests:\n{doctest_log}",
     "EX98": "flake8 error {error_code}: {error_message}{times_happening}",
     "EX97": "Do not import {imported_library}, as it is imported automatically for the examples",
     "EX96": "flake8 warning {error_code}: {error_message}{times_happening}",
+    "EX95": "black format error:\n{error_message}",
 }
 
 OUT_FORMAT_OPTS = "default", "json", "actions"
 
 NAMES_FROM_OPTS = "module", "rst"
 
 IGNORE_VALIDATION = {
@@ -232,26 +233,57 @@
         try:
             fd, fname = tempfile.mkstemp(prefix="val-", suffix=".py")
             file = os.fdopen(fd, mode="w", encoding="utf-8")
             file.write(content)
             file.close()
             cmd = ["python", "-m", "flake8", "--quiet", "--statistics", fname]
             response = subprocess.run(cmd, capture_output=True, text=True)
+            if response.stderr:
+                stderr = response.stderr.strip("\n")
+                error_messages.append(f"1 ERROR {stderr}")
             stdout = response.stdout
             stdout = stdout.replace(fname, "")
             messages = stdout.strip("\n")
             if messages:
                 error_messages.append(messages)
         finally:
             os.remove(fname)
 
         for error_message in error_messages:
             error_count, error_code, message = error_message.split(maxsplit=2)
             yield error_code, message, int(error_count)
 
+    def validate_format(self):
+        if not self.examples:
+            return
+
+        content = "".join((*self.examples_source_code,))
+
+        error_messages = []
+        try:
+            fd, fname = tempfile.mkstemp(prefix="val-", suffix=".py")
+            file = os.fdopen(fd, mode="w", encoding="utf-8")
+            file.write(content)
+            file.close()
+            cmd = ["python", "-m", "black", "--quiet", "--diff", fname]
+            response = subprocess.run(cmd, capture_output=True, text=True)
+            if response.stderr:
+                stderr = response.stderr.strip("\n")
+                error_messages.append(stderr)
+            stdout = response.stdout
+            stdout = stdout.replace(fname, "<example>")
+            messages = stdout.strip("\n")
+            if messages:
+                error_messages.append(messages)
+        finally:
+            os.remove(fname)
+
+        for error_message in error_messages:
+            yield error_message
+
     def non_hyphenated_array_like(self):
         return "array_like" in self.raw_doc
 
 
 def riptable_validate(
     func_name: str,
     errors: typing.Optional(list[str]) = None,
@@ -310,25 +342,35 @@
         if result["examples_errs"]:
             result["errors"].append(riptable_error("EX99", doctest_log=result["examples_errs"]))
 
         for error_code, error_message, error_count in doc.validate_pep8():
             times_happening = f" ({error_count} times)" if error_count > 1 else ""
             result["errors"].append(
                 riptable_error(
-                    "EX98" if flake8_errors and matches(error_code, flake8_errors) else "EX96",
+                    "EX98"
+                    if error_code == "ERROR" or (flake8_errors and matches(error_code, flake8_errors))
+                    else "EX96",
                     error_code=error_code,
                     error_message=error_message,
                     times_happening=times_happening,
                 )
             )
         examples_source_code = "".join(doc.examples_source_code)
         for wrong_import in [v.__name__ for v in IMPORT_CONTEXT.values()]:
             if re.search(f"import {wrong_import}\W+", examples_source_code):
                 result["errors"].append(riptable_error("EX97", imported_library=wrong_import))
 
+        for error_message in doc.validate_format():
+            result["errors"].append(
+                riptable_error(
+                    "EX95",
+                    error_message=error_message,
+                )
+            )
+
     if doc.non_hyphenated_array_like():
         result["errors"].append(riptable_error("GL97"))
 
     plt.close("all")
 
     if errors or not_errors:
         filtered_errors = []
@@ -632,15 +674,15 @@
         default=False,
         action="store_true",
         help="If this flag is set, deprecated objects are ignored when validating all docstrings.",
     )
     argparser.add_argument(
         "--flake8-errors",
         default=None,
-        help="Comma separated list of flake8 error codes to treat as EX98 errors. Others are treated as warnings.",
+        help="Comma separated list of flake8 error codes to treat as errors. Others are treated as warnings.",
     )
     argparser.add_argument(
         "--out",
         "-o",
         default=None,
         type=str,
         help="Output file path, else use stdout.",
```

### Comparing `riptable-1.6.9/docs/CONTRIBUTING.md` & `riptable-1.7.0/docs/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/Makefile` & `riptable-1.7.0/docs/Makefile`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/THREADING.md` & `riptable-1.7.0/docs/THREADING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/make.bat` & `riptable-1.7.0/docs/make.bat`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/riptable_logo.PNG` & `riptable-1.7.0/docs/riptable_logo.PNG`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/benchmarking.rst` & `riptable-1.7.0/docs/source/benchmarking.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/conf.py` & `riptable-1.7.0/docs/source/conf.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/riptable.rst` & `riptable-1.7.0/docs/source/riptable.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/RiptableExercises.ipynb` & `riptable-1.7.0/docs/source/tutorial/RiptableExercises.ipynb`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9530045017220725%*

 * *Differences: {"'cells'": "{40: {'source': {insert: [(0, '**Create a DateTimeNano of the combined TradeTime + "*

 * *            "Date by simple addition. Riptable knows how to sum the types.**\\n')], delete: [0]}, "*

 * *            "'attachments': OrderedDict()}}",*

 * * "'metadata'": "{'kernelspec': {'display_name': 'riptable-sphinxdoc'}, 'language_info': "*

 * *               "{'version': '3.10.6'}, 'vscode': OrderedDict([('interpreter', "*

 * *               "OrderedDict([('hash', "*

 * *               "'bd27bbf9d08d999c15d6ab686ecdc65a1056d9b0e []*

```diff
@@ -323,18 +323,19 @@
             "cell_type": "code",
             "execution_count": null,
             "metadata": {},
             "outputs": [],
             "source": []
         },
         {
+            "attachments": {},
             "cell_type": "markdown",
             "metadata": {},
             "source": [
-                "**Create a DateTimeNano of the combined TradeDateTime by simple addition. Riptable knows how to sum the types.**\n",
+                "**Create a DateTimeNano of the combined TradeTime + Date by simple addition. Riptable knows how to sum the types.**\n",
                 "\n",
                 "Be careful here, by default you'll get a GMT timezone, you can force NYC with `rt.DateTimeNano(..., from_tz='NYC')`."
             ]
         },
         {
             "cell_type": "code",
             "execution_count": null,
@@ -883,27 +884,32 @@
                 "\n",
                 "To load from csv files, use the slow but robust pandas loader, with `rt.Dataset.from_pandas(pd.read_csv(file))`."
             ]
         }
     ],
     "metadata": {
         "kernelspec": {
-            "display_name": "Python 3 (ipykernel)",
+            "display_name": "riptable-sphinxdoc",
             "language": "python",
             "name": "python3"
         },
         "language_info": {
             "codemirror_mode": {
                 "name": "ipython",
                 "version": 3
             },
             "file_extension": ".py",
             "mimetype": "text/x-python",
             "name": "python",
             "nbconvert_exporter": "python",
             "pygments_lexer": "ipython3",
-            "version": "3.9.13"
+            "version": "3.10.6"
+        },
+        "vscode": {
+            "interpreter": {
+                "hash": "bd27bbf9d08d999c15d6ab686ecdc65a1056d9b0e13010aed0eef84441088a82"
+            }
         }
     },
     "nbformat": 4,
     "nbformat_minor": 4
 }
```

### Comparing `riptable-1.6.9/docs/source/tutorial/RiptableSolutions.ipynb` & `riptable-1.7.0/docs/source/tutorial/RiptableSolutions.ipynb`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9530009920634921%*

 * *Differences: {"'cells'": "{40: {'source': {insert: [(0, '**Create a DateTimeNano of the combined TradeTime + "*

 * *            "Date by simple addition. Riptable knows how to sum the types.**\\n')], delete: [0]}, "*

 * *            "'attachments': OrderedDict()}}",*

 * * "'metadata'": "{'kernelspec': {'display_name': 'riptable-sphinxdoc'}, 'language_info': "*

 * *               "{'version': '3.10.6'}, 'vscode': OrderedDict([('interpreter', "*

 * *               "OrderedDict([('hash', "*

 * *               "'bd27bbf9d08d999c15d6ab686ecdc65a1056d9b0e []*

```diff
@@ -485,18 +485,19 @@
                 }
             ],
             "source": [
                 "my_dset.sample()"
             ]
         },
         {
+            "attachments": {},
             "cell_type": "markdown",
             "metadata": {},
             "source": [
-                "**Create a DateTimeNano of the combined TradeDateTime by simple addition. Riptable knows how to sum the types.**\n",
+                "**Create a DateTimeNano of the combined TradeTime + Date by simple addition. Riptable knows how to sum the types.**\n",
                 "\n",
                 "Be careful here, by default you'll get a GMT timezone, you can force NYC with `rt.DateTimeNano(..., from_tz='NYC')`."
             ]
         },
         {
             "cell_type": "code",
             "execution_count": 20,
@@ -1358,27 +1359,32 @@
                 "\n",
                 "To load from csv files, use the slow but robust pandas loader, with `rt.Dataset.from_pandas(pd.read_csv(file))`."
             ]
         }
     ],
     "metadata": {
         "kernelspec": {
-            "display_name": "Python 3 (ipykernel)",
+            "display_name": "riptable-sphinxdoc",
             "language": "python",
             "name": "python3"
         },
         "language_info": {
             "codemirror_mode": {
                 "name": "ipython",
                 "version": 3
             },
             "file_extension": ".py",
             "mimetype": "text/x-python",
             "name": "python",
             "nbconvert_exporter": "python",
             "pygments_lexer": "ipython3",
-            "version": "3.9.13"
+            "version": "3.10.6"
+        },
+        "vscode": {
+            "interpreter": {
+                "hash": "bd27bbf9d08d999c15d6ab686ecdc65a1056d9b0e13010aed0eef84441088a82"
+            }
         }
     },
     "nbformat": 4,
     "nbformat_minor": 4
 }
```

### Comparing `riptable-1.6.9/docs/source/tutorial/output_11_0.png` & `riptable-1.7.0/docs/source/tutorial/output_11_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/output_13_0.png` & `riptable-1.7.0/docs/source/tutorial/output_13_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/output_15_0.png` & `riptable-1.7.0/docs/source/tutorial/output_15_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/output_25_0.png` & `riptable-1.7.0/docs/source/tutorial/output_25_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/output_27_0.png` & `riptable-1.7.0/docs/source/tutorial/output_27_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/perf-may-suffer.png` & `riptable-1.7.0/docs/source/tutorial/perf-may-suffer.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/rt_autocomplete.png` & `riptable-1.7.0/docs/source/tutorial/rt_autocomplete.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/rt_autocomplete_internal.png` & `riptable-1.7.0/docs/source/tutorial/rt_autocomplete_internal.png`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/rt_dataset.svg` & `riptable-1.7.0/docs/source/tutorial/rt_dataset.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/rt_dataset_indices.svg` & `riptable-1.7.0/docs/source/tutorial/rt_dataset_indices.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/rt_fastarray.svg` & `riptable-1.7.0/docs/source/tutorial/rt_fastarray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/split-apply-combine-gray.svg` & `riptable-1.7.0/docs/source/tutorial/split-apply-combine-gray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial.rst`

 * *Files 10% similar despite different names*

```diff
@@ -29,9 +29,10 @@
 Appendix
 --------
 .. toctree::
    :maxdepth: 1
    
    tutorial_numpy_rt
    tutorial_cat_reduce
+   tutorial_cat_adv_instantiation
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_accums.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_accums.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_cat_reduce.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_cat_reduce.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_categoricals.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_categoricals.rst`

 * *Files 2% similar despite different names*

```diff
@@ -52,15 +52,18 @@
     *Symbol   Value
     -------   -----
     AAPL         20
     MSFT         35
     TSLA         50
 
 A Dataset is returned containing the groups from the Categorical and the result
-of the operation we called on each group.
+of the operation we called on each group. 
+
+Note the prepended '*' in the Symbol column. This indicates that the column 
+was used as the grouping variable in an operation.
 
 Categoricals as Split, Apply, Combine Operations
 ------------------------------------------------
 
 Hadley Wickham, known for his work on Rstats, described the operation
 (also known as a group by operation) as *split, apply, combine*.
 
@@ -113,25 +116,25 @@
     3       25
     4       18
     5       45
 
 The alignment of the result to the original data is easier to see if you add 
 the results to the Dataset::
 
-    >>> ds.CumValue = ds.Symbol.cumsum(ds.Value)
-    >>> # Sort to make the cumulative sum more clear, then display only the relevant columns.
-    >>> ds.sort_copy('Symbol')
-    #   Symbol   Value2   CumSum
-    -   ------   ------   ------
-    0   AAPL          2        2
-    1   AAPL          5        7
-    2   MSFT         10       10
-    3   MSFT          8       18
-    4   TSLA         25       25
-    5   TSLA         20       45
+    >>> ds.CumValue2 = ds.Symbol.cumsum(ds.Value2)
+    >>> # Sort to make the cumulative sum per group more clear, then display only the relevant columns.
+    >>> ds.sort_copy('Symbol').col_filter(['Symbol', 'Value2', 'CumValue2'])
+    #   Symbol   Value2   CumValue2
+    -   ------   ------   ---------
+    0   AAPL          2           2
+    1   AAPL          5           7
+    2   MSFT         10          10
+    3   MSFT          8          18
+    4   TSLA         25          25
+    5   TSLA         20          45
 
 A commonly used non-reducing function is ``shift()``. You can use it to
 compare values with shifted versions of themselves  for example,
 todays price compared to yesterdays price, the volume compared to the
 volume an hour ago, etc.
 
 Where a category has no previous value to shift forward, the missing
@@ -434,14 +437,17 @@
     >>> c1.count()
     *key_0   Count
     ------   -----
     a            2
     b            3
     c            0
 
+Note that the first column in the output is labeled 'key_0'. This was code-generated because there was no explicit column name declaration. 
+You can use the :meth:`.FastArray.set_name` method to assign a column name to the Categorical before doing any grouping operations.
+The Count column was created by the ``count()`` method.
 
 Filter Values or Categories from Certain Categorical Operations
 ---------------------------------------------------------------
 
 Its also possible to filter values for only a certain operation.
 
 In `Get and Operate on Subsets of Data Using Filters <tutorial_filters.rst>`__, 
@@ -464,15 +470,15 @@
     TSLA     30.00
 
 The data that doesnt meet the condition is omitted from the computation
 for only that operation.
 
 To filter out an entire category::
 
-    >>> ds.Symbol.mean(ds.value, filter=ds.Symbol != 'MSFT')
+    >>> ds.Symbol.mean(ds.Value, filter=ds.Symbol != 'MSFT')
     *Symbol   Value
     -------   -----
     AAPL      10.00
     MSFT        nan
     TSLA      25.00
 
 In this case, the filtered category is shown, but the result of the operation
@@ -639,25 +645,24 @@
 the Categorical, and operate on filtered data by passing the filter
 keyword argument to the function you use.
 
 Later on well cover another Riptable function, ``Accum2()``, that
 aggregates two groups similarly but provides summary data and a styled 
 output.
 
-Bucket Numeric Data for Analysis
---------------------------------
+Partition Numeric Data into Bins for Analysis
+---------------------------------------------
 
-When you have a large amount of numeric data, ``cut()`` and ``qcut()``
-can help you split the values into Categorical bins (a.k.a. buckets)
-for analysis.
+When you have a large array of numeric data, ``rt.cut()`` and ``rt.qcut()``
+can help you partition the values into Categorical bins for analysis.
 
-Use ``cut()`` for buckets based on values of your choosing. Use
-``qcut()`` for buckets based on sample quantiles.
+Use ``cut()`` to create equal-width bins or bins defined by specified endpoints. 
+Use ``qcut()`` to create bins based on sample quantiles.
 
-Lets create a moderately large Dataset::
+Lets use a moderately large Dataset::
 
     >>> N = 1_000
     >>> ds2 = rt.Dataset()
     >>> ds2.Symbol = rt.FA(rng.choice(['AAPL', 'AMZN', 'MSFT'], N))
     >>> base_price = 100 + rt.FA(np.linspace(0, 900, N))
     >>> noise = rt.FA(rng.normal(0, 50, N))
     >>> ds2.Price = base_price + noise
@@ -692,23 +697,23 @@
     994   AAPL     1,046.27
     995   AAPL       913.48
     996   AMZN       996.90
     997   AMZN     1,011.89
     998   MSFT       984.06
     999   MSFT       907.39
 
-With ``cut()``, you can create equal-width buckets or choose your own
-intervals.
+Create equal-width bins with ``rt.cut()``
+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 
-To split values into equal-width buckets, just specify an integer number
-of buckets (in this case 5)::
+To partition values into equal-width bins, use ``cut()`` and specify the number 
+of bins::
 
-    >>> ds2.PriceBucket = rt.cut(ds2.Price, 5)
+    >>> ds2.PriceBin = rt.cut(ds2.Price, bins=5)
     >>> ds2
-      #   Symbol      Price   PriceBucket      
+      #   Symbol      Price   PriceBin      
     ---   ------   --------   -----------------
       0   AMZN        93.87   -3.011->221.182  
       1   AMZN       150.69   -3.011->221.182  
       2   AAPL       154.76   -3.011->221.182  
       3   MSFT       153.99   -3.011->221.182  
       4   AMZN       105.55   -3.011->221.182  
       5   AMZN        62.25   -3.011->221.182  
@@ -734,29 +739,29 @@
      994  AAPL     1,046.27   893.763->1117.956
      995  AAPL       913.48   893.763->1117.956
      996  AMZN       996.90   893.763->1117.956
      997  AMZN     1,011.89   893.763->1117.956
      998  MSFT       984.06   893.763->1117.956
      999  MSFT       907.39   893.763->1117.956
 
-Notice that the buckets form the groups of a Categorical::
+Notice that the bins form the categories of a Categorical::
 
-    >>> ds2.PriceBucket
+    >>> ds2.PriceBin
     Categorical([-3.011->221.182, -3.011->221.182, -3.011->221.182, -3.011->221.182, -3.011->221.182, ..., 893.763->1117.956, 893.763->1117.956, 893.763->1117.956, 893.763->1117.956, 893.763->1117.956]) Length: 1000
       FastArray([1, 1, 1, 1, 1, ..., 5, 5, 5, 5, 5], dtype=int8) Base Index: 1
       FastArray([b'-3.011->221.182', b'221.182->445.376', b'445.376->669.569', b'669.569->893.763', b'893.763->1117.956'], dtype='|S17') Unique count: 5
 
-To choose your own intervals, provide the endpoints. Here, we define
-bins that cover two intervals: one bin for prices from 0 to 500 (0
-excluded), and one for prices from 500 to 1,000 (500 excluded)::
+To specify your own bin endpoints, provide an array. Here, we define two
+bins: one for prices from 0 to 600 (with both endpoints, 0 and 600, included), 
+and one for prices from 600 to 1,200 (600 excluded, 1,200 included)::
 
-    >>> buckets = [0, 600, 1200]
-    >>> ds2.PriceBucket2 = rt.cut(ds2.Price, buckets)
+    >>> bins = [0, 600, 1200]
+    >>> ds2.PriceBin2 = rt.cut(ds2.Price, bins)
     >>> ds2
-      #   Symbol      Price   PriceBucket         PriceBucket2 
+      #   Symbol      Price   PriceBin            PriceBin2 
     ---   ------   --------   -----------------   -------------
       0   AMZN        93.87   -3.011->221.182     0.0->600.0   
       1   AMZN       150.69   -3.011->221.182     0.0->600.0   
       2   AAPL       154.76   -3.011->221.182     0.0->600.0   
       3   MSFT       153.99   -3.011->221.182     0.0->600.0   
       4   AMZN       105.55   -3.011->221.182     0.0->600.0   
       5   AMZN        62.25   -3.011->221.182     0.0->600.0   
@@ -782,26 +787,21 @@
     994   AAPL     1,046.27   893.763->1117.956   600.0->1200.0
     995   AAPL       913.48   893.763->1117.956   600.0->1200.0
     996   AMZN       996.90   893.763->1117.956   600.0->1200.0
     997   AMZN     1,011.89   893.763->1117.956   600.0->1200.0
     998   MSFT       984.06   893.763->1117.956   600.0->1200.0
     999   MSFT       907.39   893.763->1117.956   600.0->1200.0
 
-In interval notation, the intervals look like this: (0, 600] (600, 1200]
 
-The left side of each interval is open (meaning the left value is
-excluded), and the right side is closed. To switch which side is closed,
-pass ``right=False``.
-
-Use ``qcut()`` to get buckets based on sample quantiles. Unlike
-``cut()``, ``qcut()`` will usually result in buckets that are of roughly
-equal size  that is, each bucket will contain around the same number of
-data points.
+Create bins based on sample quantiles with ``rt.qcut()``
+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+
+To partition values into bins based on sample quantiles, use ``qcut()``.
 
-Well create a Dataset with symbol groups and contracts per day::
+Well create another Dataset with symbol groups and contracts per day::
 
     >>> N = 1_000
     >>> ds3 = rt.Dataset()
     >>> ds3.SymbolGroup = rt.FA(rng.choice(['spx', 'eqt_comp', 'eqt300', 'eqtrest'], N))
     >>> ds3.ContractsPerDay = rng.integers(low=0, high=5_000, size=N)
     >>> ds3.head()
      #   SymbolGroup   ContractsPerDay
@@ -823,18 +823,18 @@
     14   eqt_comp                3,537
     15   eqt300                  4,177
     16   eqt_comp                  376
     17   eqt_comp                  444
     18   eqt_comp                1,504
     19   eqtrest                   118
 
-Create three labeled buckets for the volume::
+Create three labeled, quantile-based bins for the volume::
 
     >>> label_names = ['Low', 'Medium', 'High']
-    >>> ds3.Volume = rt.qcut(ds3.ContractsPerDay, 3, labels=label_names)
+    >>> ds3.Volume = rt.qcut(ds3.ContractsPerDay, q=3, labels=label_names)
     >>> ds3.head()
      #   SymbolGroup   ContractsPerDay   Volume
     --   -----------   ---------------   ------
      0   eqt300                  1,624   Low   
      1   spx                       851   Low   
      2   spx                     3,487   High  
      3   eqt300                    345   Low   
@@ -851,29 +851,29 @@
     14   eqt_comp                3,537   High  
     15   eqt300                  4,177   High  
     16   eqt_comp                  376   Low   
     17   eqt_comp                  444   Low   
     18   eqt_comp                1,504   Low   
     19   eqtrest                   118   Low  
 
-See the total number of contracts per day for each bucket::
+As with ``cut()``, the bins form the categories of a Categorical::
 
-    >>> ds3.Volume.nansum(ds3.ContractsPerDay)
-    *Volume   ContractsPerDay
-    -------   ---------------
-    Clipped                 0
-    Low               287,043
-    Medium            850,758
-    High            1,392,177
+    >>> ds3.Volume
+    Categorical([High, High, Medium, High, Low, ..., Low, Medium, High, Low, Low]) Length: 1000
+      FastArray([4, 4, 3, 4, 2, ..., 2, 3, 4, 2, 2], dtype=int8) Base Index: 1
+      FastArray([b'Clipped', b'Low', b'Medium', b'High'], dtype='|S7') Unique count: 4
 
-Similarly to ``cut()``, ``qcut()`` can take a list of quantiles (numbers
+The 'Clipped' bin is created to hold any out-of-bounds values (though there are
+none in this case).
+
+Alternatively, you can give ``qcut()`` a list of quantiles (numbers
 between 0 and 1, inclusive). Here, we create quartiles::
 
     >>> quartiles = [0, .25, .5, .75, 1.]
-    >>> ds3.VolQuartiles = rt.qcut(ds3.ContractsPerDay, quartiles)
+    >>> ds3.VolQuartiles = rt.qcut(ds3.ContractsPerDay, q=quartiles)
     >>> ds3.head()
      #   SymbolGroup   ContractsPerDay   Volume   VolQuartiles   
     --   -----------   ---------------   ------   ---------------
      0   eqt300                  1,624   Low      1273.75->2601.0
      1   spx                       851   Low      0.0->1273.75   
      2   spx                     3,487   High     2601.0->3793.0 
      3   eqt300                    345   Low      0.0->1273.75   
@@ -899,15 +899,15 @@
 
 Categoricals support most common functions. For functions that arent
 supported (for example, a function youve written), you can use
 ``apply_reduce()`` to apply a reducing function and
 ``apply_nonreduce()`` to apply a non-reducing function.
 
 ``apply_reduce()``
-~~~~~~~~~~~~~~~~~~
+^^^^^^^^^^^^^^^^^^
 
 The function you use with ``apply_reduce()`` can take in one or multiple
 columns/FastArrays as input, but it must return a single value per group.
 
 To illustrate, well use ``apply_reduce()`` with two simple lambda
 functions that each return one value. (A lambda function is an anonymous
 function that consists of a single statement and gives back a return
@@ -1002,15 +1002,15 @@
      47   AAPL     53.34   106.68     11.36   26,904.13
      48   TSLA     67.35   134.70      2.10   74,124.69
      49   TSLA     45.62    91.25      2.10   74,124.69
 
 As expected, every instance of a category gets the same value.
 
 ``apply_nonreduce()``
-~~~~~~~~~~~~~~~~~~~~~
+^^^^^^^^^^^^^^^^^^^^^
 
 For ``apply_nonreduce()``, our lambda function computes a new value for
 every element of the original input::
 
     >>> ds.MyCalc3 = ds.Symbol.apply_nonreduce(lambda x: x.cumsum() + 2, ds.Value)
     >>> ds
       #   Symbol   Value   Value2   MyCalc1     MyCalc2   MyCalc3
@@ -1083,15 +1083,15 @@
      45   AMZN     70.44   140.88      4.03   39,400.64    508.07    646.95
      46   TSLA     14.92    29.84      2.10   74,124.69    659.09    686.92
      47   AAPL     53.34   106.68     11.36   26,904.13    286.10    390.78
      48   TSLA     67.35   134.70      2.10   74,124.69    726.44    859.14
      49   TSLA     45.62    91.25      2.10   74,124.69    772.06    861.31
 
 ``apply()``
-~~~~~~~~~~~
+^^^^^^^^^^^
 
 If you want your custom function to return multiple aggregations  for
 example, you want to return both the mean value of one column and the
 minimum value of another column  use ``apply()``.
 
 Warning: Because ``apply()`` isnt a vectorized operation, it can be
 slow and use a lot of memory if youre using it on large amounts of
@@ -1164,14 +1164,16 @@
     AAPL        160.02   213.35
     TSLA        202.05   269.41
     TSLA        136.87   182.50
 
 Because the operations in this function are non-reducing operations, the
 resulting Dataset is expanded.
 
+Note that until a reported bug is fixed, column names might not persist through grouping operations.
+
 In the next section, `Accums <tutorial_accums.rst>`__, we look at
 another way to do multi-key groupings with fancier output.
 
 --------------
 
 Questions or comments about this guide? Email
 RiptableDocumentation@sig.com.
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_concat.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_concat.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_datasets.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_datasets.rst`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-Intro to Riptable Datasets, FastArrays, and Structs
+Riptable Datasets, FastArrays, and Structs
 ===================================================
 
 What Is a Dataset?
 ------------------
 
 A Dataset is a table of data that consists of a sequence of columns of
 the same length. Its similar to a spreadsheet, a SQL table, a Pandas
@@ -54,14 +54,17 @@
     2   C               2
     3   D               3
 
 Another way to think of a Dataset is as a dictionary of same-length
 FastArrays, where each key is a column name thats mapped to a FastArray
 of values that all have the same dtype.
 
+For Python dictionary details, see `Pythons
+documentation <https://docs.python.org/3/tutorial/datastructures.html#dictionaries>`__.
+
 Use the Dataset Constructor with Dictionary-Style Input
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 ``rt.Dataset()`` uses dictionary-style syntax::
 
     >>> ds = rt.Dataset({'Column1': ['A', 'B', 'C', 'D'], 'Column2': [0.0, 1.0, 2.0, 3.0]})
     >>> ds
@@ -367,27 +370,30 @@
 statistics:
 
 =============== ==============================
 **Calculation** **Description**
 =============== ==============================
 Count           Total number of items
 Valid           Total number of valid values
-Nans            Total number of NaN values
+Nans            Total number of NaN values*
 Mean            Mean
 Std             Standard deviation
 Min             Minimum value
 P10             10th percentile
 P25             25th percentile
 P50             50th percentile
 P75             75th percentile
 P90             90th percentile
 Max             Maximum value
 MeanM           Mean without top or bottom 10%
 =============== ==============================
 
+\*NaN stands for Not a Number, and is commonly used to represent missing data. 
+For details, see `Working with Missing Data <tutorial_missing_data.rst>`__.
+
 You can also use ``describe()`` on a single column::
 
     >>> ds2.Value.describe()
     *Stats   Value
     ------   -----
     Count    50.00
     Valid    50.00
@@ -400,15 +406,16 @@
     P50       0.52
     P75       0.78
     P90       0.86
     Max       0.98
     MeanM     0.54
 
 If your Dataset is very large, you can get column statistics with
-``statx()``, which you can import from ``riptable.rt_stats``. It gives
+``statx()``, which you can import from ``riptable.rt_stats``. 
+``statx()`` provides rapid sampling and gives
 you a few more percentiles than ``describe()`` does, but it works only
 on one column at a time::
 
     >>> from riptable.rt_stats import statx
     >>> statx(ds2.Value)
              Stat      Value
     0         min   0.043804
@@ -432,14 +439,18 @@
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 See a columns unique values::
 
     >>> ds2.Symbol.unique()
     FastArray([b'AAPL', b'AMZN', b'GME', b'SPY', b'TSLA'], dtype='|S4')
 
+A note about strings in FastArrays: When you view a FastArray of
+strings, youll see a b next to each string. These b's indicate that the strings are encoded to byte strings,
+which saves memory compared to saving strings as ASCII.
+
 Count the number of unique values in a column::
 
     >>> ds2.Symbol.count()
     *Symbol   Count
     -------   -----
     AAPL         12
     AMZN         12
@@ -594,73 +605,14 @@
     0      1         1
     1      4   2000000
 
 More often, youll probably use filters to get subsets of your data. That's
 covered in more detail in `Get and Operate on Subsets of Data Using
 Filters <tutorial_filters.rst>`__.
 
-Delete a Column from a Dataset
-------------------------------
-
-To delete a column from a Dataset, use ``del ds.ColumnName``.
-
-Hold Two or More Datasets in a Struct
--------------------------------------
-
-When youre working with multiple Datasets, it can be helpful to keep
-them together in a Riptable Struct. Structs were created as a base class
-for Datasets. They also replicate Matlab structs.
-
-You can think of a Struct as a Python dictionary, but with attribute
-access allowed for keys.
-
-Data structures stored together in a Struct dont need to be aligned::
-
-    >>> s = rt.Struct()
-    >>> s.ds = ds
-    >>> s.ds2 = ds2
-
-You can access each data structure using attribute-style access. For
-example:
-
-    >>> s.ds2
-      #   Symbol   Size   Value
-    ---   ------   ----   -----
-      0   AAPL      300    0.77
-      1   AMZN      100    0.44
-      2   AAPL      300    0.86
-      3   GME       500    0.70
-      4   SPY       100    0.09
-      5   AMZN      300    0.98
-      6   TSLA      200    0.76
-      7   SPY       300    0.79
-      8   TSLA      300    0.13
-      9   TSLA      300    0.45
-     10   AAPL      400    0.37
-     11   AAPL      400    0.93
-     12   AAPL      400    0.64
-     13   GME       100    0.82
-     14   AMZN      100    0.44
-    ...   ...       ...     ...
-     35   GME       200    0.19
-     36   TSLA      400    0.13
-     37   SPY       200    0.48
-     38   AMZN      500    0.23
-     39   GME       400    0.67
-     40   AAPL      300    0.44
-     41   SPY       100    0.83
-     42   TSLA      500    0.70
-     43   AAPL      500    0.31
-     44   AAPL      100    0.83
-     45   AAPL      200    0.80
-     46   AMZN      400    0.39
-     47   AMZN      500    0.29
-     48   AMZN      300    0.68
-     49   AMZN      400    0.14
-
 Perform Operations on Dataset Columns
 -------------------------------------
 
 FastArrays are a subclass of NumPys ndarray. Thanks to this, you can do
 anything with FastArrays that you can do with NumPy arrays.
 
 In particular, NumPys universal functions (ufuncs) are supported,
@@ -733,14 +685,19 @@
     >>> ds3
     #   A   B   C      D       E    F
     -   -   -   -   ----   -----   --
     0   0   5   5   5.10   -1.00   20
     1   1   5   6   6.10   -2.25   22
     2   2   5   7   7.10   -4.00   24
 
+Delete a Column from a Dataset
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+To delete a column from a Dataset, use ``del ds.ColumnName``.
+
 Reducing Operations vs.Non-Reducing Operations
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 The operations weve performed so far have been *non-reducing*
 operations. A non-reducing operation takes in multiple input values and
 returns one output value for each input value. That is, the resulting
 FastArray is the same length as the FastArray you operated on, and it
@@ -988,22 +945,67 @@
     -   ---------------   -----   -----   ------   ----------   -------   ------
     0   SPY:191003:187:    0.93    1.03   SPY      191003       C         187.00
     1   SPY:191003:193:    0.71    0.61   SPY      191003       C         193.00
     2   TLT:191003:135:   -0.72    0.52   TLT      191003       P         135.50
     3   AAPL:191018:260    0.45   -0.14   AAPL     191018       C         260.00
     4   AAPL:191018:265   -0.81    0.68   AAPL     191018       P         265.00
 
-A note about strings in FastArrays: When you view a FastArray of
-strings, youll see a b next to each string::
+Hold Two or More Datasets in a Struct
+-------------------------------------
 
-    >>> ds5.Symbol
-    FastArray([b'SPY', b'SPY', b'TLT', b'AAPL', b'AAPL'], dtype='|S4')
+When youre working with multiple Datasets, it can be helpful to keep
+them together in a Riptable Struct. Structs were created as a base class
+for Datasets. They also replicate Matlab structs.
 
-These b's indicate that the strings are encoded to byte strings,
-which saves memory compared to saving strings as ASCII.
+You can think of a Struct as a Python dictionary, but with attribute
+access allowed for keys.
+
+Data structures stored together in a Struct dont need to be aligned::
+
+    >>> s = rt.Struct()
+    >>> s.ds = ds
+    >>> s.ds2 = ds2
+
+You can access each data structure using attribute-style access. For
+example:
+
+    >>> s.ds2
+      #   Symbol   Size   Value
+    ---   ------   ----   -----
+      0   AAPL      300    0.77
+      1   AMZN      100    0.44
+      2   AAPL      300    0.86
+      3   GME       500    0.70
+      4   SPY       100    0.09
+      5   AMZN      300    0.98
+      6   TSLA      200    0.76
+      7   SPY       300    0.79
+      8   TSLA      300    0.13
+      9   TSLA      300    0.45
+     10   AAPL      400    0.37
+     11   AAPL      400    0.93
+     12   AAPL      400    0.64
+     13   GME       100    0.82
+     14   AMZN      100    0.44
+    ...   ...       ...     ...
+     35   GME       200    0.19
+     36   TSLA      400    0.13
+     37   SPY       200    0.48
+     38   AMZN      500    0.23
+     39   GME       400    0.67
+     40   AAPL      300    0.44
+     41   SPY       100    0.83
+     42   TSLA      500    0.70
+     43   AAPL      500    0.31
+     44   AAPL      100    0.83
+     45   AAPL      200    0.80
+     46   AMZN      400    0.39
+     47   AMZN      500    0.29
+     48   AMZN      300    0.68
+     49   AMZN      400    0.14
 
 Riptable has a few other methods for operating on strings. We'll use them as
 the basis for filtering data in the next section, `Get and Operate on Subsets 
 of Data Using Filters <tutorial_filters.rst>`__.
 
 --------------
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_datetimes.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_datetimes.rst`

 * *Files 1% similar despite different names*

```diff
@@ -15,30 +15,30 @@
 information for display.
 
 ``Date`` Objects
 ----------------
 
 A Date object stores an array of dates with no time data attached. You
 can create Date arrays from strings, integer date values, or Matlab
-ordinal dates. Creating Date arrays from strings is fairly common.
+ordinal dates. For Matlab details, see `Matlab Dates and Times <https://www.mathworks.com/help/matlab/date-and-time-operations.html>`__. 
 
-If your string dates are in YYYYMMDD format, you can simply pass the
+Creating Date arrays from strings is fairly common. If your string dates are in YYYYMMDD format, you can simply pass the
 list of strings to ``rt.Date()``::
 
     >>> rt.Date(['20210101', '20210519', '20220308'])
     Date(['2021-01-01', '2021-05-19', '2022-03-08'])
 
 If your string dates are in another format, you can tell ``rt.Date()``
 what to expect using Python ``strptime`` format code::
 
     >>> rt.Date(['12/31/19', '6/30/19', '02/21/19'], format='%m/%d/%y')
     Date(['2019-12-31', '2019-06-30', '2019-02-21'])
 
-For a list of format codes, see `Pythons
-documentation <https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior>`__.
+For a list of format codes and ``strptime`` implementation details, see `Pythons
+'strftime' cheatsheet <https://strftime.org/>`__. The formatting codes are the same for ``strftime`` and ``strptime``. 
 
 Note: Under the hood, dates are stored as integers  specifically, as
 the number of days since the Unix epoch, 01-01-1970::
 
     >>> date_arr = rt.Date(['19700102', '19700103', '19700212'])
     >>> date_arr._fa
     FastArray([ 1,  2, 42])
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_filters.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_filters.rst`

 * *Files 0% similar despite different names*

```diff
@@ -37,15 +37,15 @@
 used to compare arrays.
 
 When an array is compared element-wise with a scalar value or a same-length array,
 the result is an array of Booleans.
 
     >>> a = rt.FastArray([1, 2, 3, 4, 5])
     >>> b = rt.FastArray([0, 5, 2, 4, 8])
-    >>> a < 3 
+    >>> a > 3 
     FastArray([False, False, False,  True,  True])
     >>> a <= b
     FastArray([False,  True, False,  True,  True])
 
 These Boolean arrays can be used to filter data. In this 
 context, they're often called Boolean mask arrays.
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_intro.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_intro.rst`

 * *Files 1% similar despite different names*

```diff
@@ -19,41 +19,40 @@
 with than those provided by Pandas and other existing libraries. 
 
 NumPy and Pandas users will find it easy to convert their data to
 Riptable (and back again if need be). Its also possible to convert data
 from CSV or SQL files. Similarly, h5 files can be converted to
 Riptables format. Matlab users, who will generally find similar syntax
 and functionality in Riptable, can use special keyword arguments to
-convert Matlab data to Riptables format. See `IO Tools and Working with
-Other File Types <tutorial_io.rst>`__ for details.
+convert Matlab data to Riptables format. See `Work with Riptable Files and Other File Formats <tutorial_io.rst>`__ for details.
 
 For data visualization, any of the standard plotting tools (for example,
 matplotlib.pyplot) will work out of the box. To see a few basic
 examples, check out the `Visualize Data <tutorial_visualize.rst>`__
 section.
 
-A Note to Pandas Users
-----------------------
-
-If youve used Pandas, youll notice many similarities in Riptable 
-though be aware that Riptable has some not-always-immediately-obvious
-differences. This tutorial doesnt call out those differences
-specifically; see the API Reference for details of differences in specific 
-methods, functions, attributes, etc.
-
 Who This Tutorial Is For
 ------------------------
 
 If youre new to Riptable, this tutorial is for you. Its intended to
 help get you familiar with Riptables basic functionality and syntax.
 
 Some experience with Python will be helpful, especially familiarity with
 dictionary syntax, sequences (lists, tuples, etc.), and basic functions
 and arguments.
 
+A Note to Pandas Users
+----------------------
+
+If youve used Pandas, youll notice many similarities in Riptable 
+though be aware that Riptable has some not-always-immediately-obvious
+differences. This tutorial doesnt call out those differences
+specifically; see the API Reference for details of differences in specific 
+methods, functions, attributes, etc.
+
 Install and Import Riptable
 ---------------------------
 
 To install Riptable on Windows or Linux, create a Conda environment and type::
 
     conda install riptable
 
@@ -320,14 +319,14 @@
    strings: ``ds._A``
 -  Show all columns and long strings: ``ds._H``
 -  Show all columns with wrapping, and long strings: ``ds._G``
 -  Show all rows (up to 10,000): ``ds._V``
 -  Transpose columns and rows: ``ds._T``
 
 Now that were all set up, were ready to look at Riptables
-foundational data structures: `Intro to Riptable Datasets, FastArrays,
+foundational data structures: `Riptable Datasets, FastArrays,
 and Structs <tutorial_datasets.rst>`__.
 
 --------------
 
 Questions or comments about this guide? Email
 RiptableDocumentation@sig.com.
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_io.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_io.rst`

 * *Files 1% similar despite different names*

```diff
@@ -1,9 +1,9 @@
-IO Tools and Working with Other File Types
-==========================================
+Work with Riptable Files and Other File Formats
+===============================================
 
 SDS is Riptables native file format, and its the only data format
 fully supported directly within Riptable. That said, there are ways to
 get data thats in other formats in and out of Riptable.
 
 SDS
 ---
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_merge.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_merge.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_missing_data.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_missing_data.rst`

 * *Files 1% similar despite different names*

```diff
@@ -60,15 +60,15 @@
     >>> ds
     #   Ints   Floats   FloatsPlus
     -   ----   ------   ----------
     0    Inv      nan          nan
     1      2     1.50         3.00
     2      3     2.70         5.40
 
-To help, many arithmatic functions have NaN versions that ignore ``NaN``
+To help, many arithmetic functions have NaN versions that ignore ``NaN``
 values::
 
     >>> ds.Ints.nansum()
     5
 
 Be careful with missing integers, however! As of this writing, missing
 integer values are treated at face value in arithmetic operations::
@@ -199,14 +199,16 @@
     3   B       nan
     4   A      9.00
     5   B     16.00
 
 Propagate forward the last encountered non-``NaN`` value for the
 category::
 
+Note that until a reported bug is fixed, explicit column name declarations might not be displayed for grouping operations.
+
     >>> ds.Cat.fill_forward(ds.x)
     *gb_key_0       x
     ---------   -----
     A            1.00
     B            4.00
     A            1.00
     B            4.00
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_numpy_rt.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_numpy_rt.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_performance.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_performance.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_reshape.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_reshape.rst`

 * *Files 1% similar despite different names*

```diff
@@ -19,15 +19,15 @@
     0   20191111   AAPL         10
     1   20191111   MSFT         20
     2   20191111   TSLA         30
     3   20191112   MSFT         20
     4   20191112   AAPL         10
     5   20191112   TSLA         30
 
-While format this is ideal for Riptables work, the repeated date and
+While this format is ideal for Riptables work, the repeated date and
 symbol values make it a bit unintuitive for humans to read and make
 sense of.
 
 In this case, a simple transform from long format to wide doesnt help
 much::
 
     >>> long_ds._T
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_sample_data.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_sample_data.rst`

 * *Files 6% similar despite different names*

```diff
@@ -32,15 +32,15 @@
     FastArray([1., 1., 1., 1., 1., 1., 1., 1., 1., 1.])
 
 10 integer ones::
 
     >>> rt.ones(10, int)
     FastArray([1, 1, 1, 1, 1, 1, 1, 1, 1, 1])
 
-The following methods generate repated specified values.
+The following methods generate repeated specified values.
 
 10 fives::
 
     >>> rt.repeat(5, 10)
     FastArray([5, 5, 5, 5, 5, 5, 5, 5, 5, 5])
 
 10 repeats of the array::
@@ -87,15 +87,15 @@
     array([2.  , 2.25, 2.5 , 2.75, 3.  ])
 
 For randomly generated values, you have several options.
 
 For integers and floating-point values, NumPy has you covered. Call
 ``default_rng`` to get a new instance of a NumPy Generator, then call
 its methods. To generate values that can be replicated, initialize with
-a seed::
+a seed value of your choice to initialize the BitGenerator::
 
     >>> rng = np.random.default_rng(seed=42)
 
 10 floating-point numbers between 0.0 and 1.0 (1.0 excluded)::
 
     >>> rng.random(10)
     array([0.77395605, 0.43887844, 0.85859792, 0.69736803, 0.09417735,
@@ -118,15 +118,16 @@
     array(['SPY', 'GME', 'AMZN', 'AMZN', 'AMZN', 'GME', 'TSLA', 'GME', 'TSLA', 'TSLA'], dtype='<U4')
 
 10 random Booleans::
 
     >>> rng.choice([True, False], 10)
     array([False, False,  True, False,  True,  True, False,  True,  True, True])
 
-See NumPys documentation for more details and other methods.
+See `NumPys
+documentation <https://numpy.org/doc/stable/user/index.html>`__ for more details and other methods.
 
 Riptable has methods for generating random Date and DateTimeNano arrays.
 
 5 DateTimeNanos with NYT time zone::
 
     >>> rt.DateTimeNano.random(5)
     DateTimeNano(['20000507 22:02:14.350793900', '20040720 00:24:28.668289697', '19771017 22:34:39.521017110', '20130819 05:29:22.584265022', '20170622 00:50:06.970974486'], to_tz='NYC')
@@ -145,14 +146,13 @@
 
 Though ``Date`` objects dont (yet) have a ``random`` method, you can
 use ``rng.choice`` to pick dates from a range::
 
     >>> rt.Date(rng.choice(rt.Date.range('20220201', '20220430'), 5))
     Date(['2022-04-12', '2022-02-17', '2022-03-14', '2022-02-12', '2022-04-03'])
 
-Next we cover ways to get data in and out of Riptable: `IO Tools and
-Working with Other File Types <tutorial_io.rst>`__.
+Next we cover ways to get data in and out of Riptable: `Work with Riptable Files and Other File Formats <tutorial_io.rst>`__.
 
 --------------
 
 Questions or comments about this guide? Email
 RiptableDocumentation@sig.com.
```

### Comparing `riptable-1.6.9/docs/source/tutorial/tutorial_visualize.rst` & `riptable-1.7.0/docs/source/tutorial/tutorial_visualize.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/pyproject.toml` & `riptable-1.7.0/pyproject.toml`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/appdirs.py` & `riptable-1.7.0/riptable/Utils/appdirs.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/common.py` & `riptable-1.7.0/riptable/Utils/common.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/conversion_utils.py` & `riptable-1.7.0/riptable/Utils/conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/display_options.py` & `riptable-1.7.0/riptable/Utils/display_options.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/ipython_utils.py` & `riptable-1.7.0/riptable/Utils/ipython_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/pandas_utils.py` & `riptable-1.7.0/riptable/Utils/pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/rt_display_nested.py` & `riptable-1.7.0/riptable/Utils/rt_display_nested.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/rt_display_properties.py` & `riptable-1.7.0/riptable/Utils/rt_display_properties.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/rt_metadata.py` & `riptable-1.7.0/riptable/Utils/rt_metadata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/rt_testdata.py` & `riptable-1.7.0/riptable/Utils/rt_testdata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/rt_testing.py` & `riptable-1.7.0/riptable/Utils/rt_testing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/Utils/terminalsize.py` & `riptable-1.7.0/riptable/Utils/terminalsize.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/__init__.py` & `riptable-1.7.0/riptable/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/__init__.py` & `riptable-1.7.0/riptable/benchmarks/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/analysis.py` & `riptable-1.7.0/riptable/benchmarks/analysis.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_categorical.py` & `riptable-1.7.0/riptable/benchmarks/bench_categorical.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_grouping.py` & `riptable-1.7.0/riptable/benchmarks/bench_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_merge.py` & `riptable-1.7.0/riptable/benchmarks/bench_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_numpy.py` & `riptable-1.7.0/riptable/benchmarks/bench_numpy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_operators.py` & `riptable-1.7.0/riptable/benchmarks/bench_operators.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/bench_primops.py` & `riptable-1.7.0/riptable/benchmarks/bench_primops.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/benchmark.py` & `riptable-1.7.0/riptable/benchmarks/benchmark.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/main.py` & `riptable-1.7.0/riptable/benchmarks/main.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/rand_data.py` & `riptable-1.7.0/riptable/benchmarks/rand_data.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/rand_keydata.py` & `riptable-1.7.0/riptable/benchmarks/rand_keydata.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/results.py` & `riptable-1.7.0/riptable/benchmarks/results.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/benchmarks/runner.py` & `riptable-1.7.0/riptable/benchmarks/runner.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/config.py` & `riptable-1.7.0/riptable/config.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/conftest.py` & `riptable-1.7.0/riptable/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/conftest.py` & `riptable-1.7.0/riptable/hypothesis_tests/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/strategies/categorical_strategy.py` & `riptable-1.7.0/riptable/hypothesis_tests/strategies/categorical_strategy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/strategies/helper_strategies.py` & `riptable-1.7.0/riptable/hypothesis_tests/strategies/helper_strategies.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/test_categorical_property.py` & `riptable-1.7.0/riptable/hypothesis_tests/test_categorical_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py` & `riptable-1.7.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/test_rt_numpy_property.py` & `riptable-1.7.0/riptable/hypothesis_tests/test_rt_numpy_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/test_sds_property.py` & `riptable-1.7.0/riptable/hypothesis_tests/test_sds_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/hypothesis_tests/test_ufunc_unary.py` & `riptable-1.7.0/riptable/hypothesis_tests/test_ufunc_unary.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/numba/indexing.py` & `riptable-1.7.0/riptable/numba/indexing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/numba/invalid_values.py` & `riptable-1.7.0/riptable/numba/invalid_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_accum2.py` & `riptable-1.7.0/riptable/rt_accum2.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_accumtable.py` & `riptable-1.7.0/riptable/rt_accumtable.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_algos.py` & `riptable-1.7.0/riptable/rt_algos.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_bin.py` & `riptable-1.7.0/riptable/rt_bin.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 __all__ = ["cut", "qcut", "quantile"]
 
 from typing import (
+    Literal,
     Optional,
 )
 
 import numpy as np
 import riptide_cpp as rc
 
 from .rt_categorical import Categorical
@@ -413,102 +414,175 @@
     bins,
     labels=True,
     right=True,
     retbins=False,
     precision=3,
     include_lowest=False,
     filter: Optional[np.ndarray] = None,
+    duplicates: Literal["raise", "drop"] = "raise",
 ):
     """
-    Bin values into discrete intervals.
+    Partition values into discrete bins.
 
-    Use `cut` when you need to segment and sort data values into bins. This
-    function is also useful for going from a continuous variable to a
-    categorical variable. For example, `cut` could convert ages to groups of
-    age ranges. Supports binning into an equal number of bins or a
-    pre-specified array of bins.
+    This function is also useful for converting a continuous variable to a
+    `.Categorical` variable.
+
+    Values can be partitioned into a specified number of equal-width bins
+    or bins bounded by specified endpoints.
+
+    For bins bounded by specified endpoints, values that fall outside of the
+    bin range are put into the 'Filtered' bin, which is mapped to 0 in the
+    returned `.Categorical`. See the exception (caused by a known issue) noted
+    in the description of the `right` parameter, below.
+
+    Other known issues are noted in the parameter descriptions and shown in the
+    Examples section, below.
 
     Parameters
     ----------
-    x : array-like
-        The input array to be binned. Must be 1-dimensional.
-    bins : int, sequence of scalars
-        The criteria to bin by:
-            * int: Defines the number of equal-width bins in the range of `x`.
-              The range of `x` is extended by .1% on each side to include the minimum
-              and maximum values of `x`.
-            * sequence of scalars: Defines the bin edges allowing for non-uniform width.
-              No extension of the range of `x` is done.
-    right : bool, default True
-        Indicates whether `bins` includes the rightmost edge or not. If
-        ``right == True`` (the default), then the `bins` ``[1, 2, 3, 4]``
-        indicate (1,2], (2,3], (3,4].
-    labels : boolean, array, or None
-        Specifies the labels for the returned bins. If an array, must be the same
-        length as the resulting bins. If False, returns only integer indicators of the
-        bins. If None or True, the labels are created based on the bins.
-        This affects the type of the output container (see below).
-    retbins : bool, default False
-        Whether to return the bins or not. Useful when bins is provided
-        as a scalar.
+    x : `array`
+        The input array to be partitioned. Must be 1-dimensional. NaN values are
+        put into the 'Filtered' bin.
+    bins : `int` or sequence of scalar
+        Determines how bins are created:
+
+            - `int`: Creates `int` number of equal-width bins in the range of `x`.
+            - sequence of scalar: Creates bins based on the specified endpoints.
+              Bins can be of non-uniform width.
+    right : `bool`, default `True`
+        Indicates whether each bin includes its right endpoint or not.
+        Note: Until known issues are fixed:
+
+        - Each bin includes its right endpoint, even if `right` is set to `False`.
+        - If `right` is `True` (the default), the first bin includes its left
+          endpoint even if `include_lowest` is `False` (the default).
+        - If `right` is `False`, values of `x` that fall outside of the last
+          bin's right endpoint are put into a bin labeled with an integer representing
+          the bin number. For example, if ``bins=[1, 2, 3, 4]``, a value of 5
+          in `x` is put in a bin labeled ``!<4>``. This bin is mapped to 4 in
+          the integer mapping array.
+    labels : `bool`, `array`, or `None`, default `True`
+        Specify the labels for the returned bins. If an array, it must be the
+        same length as the number of resulting bins (that is, its length should
+        be one fewer than the number of endpoints). If `True` (the default) or
+        `None`, the labels are created based on the bin endpoints. If `False`,
+        only a `.FastArray` of the integer bin mappings is returned.
+    retbins : `bool`, default `False`
+        Whether to return an array of the bin endpoints. Useful when `bins`
+        is provided as a scalar or other labels are specified. See the Returns
+        section below for details of the output.
     precision : int, default 3
-        The precision at which to store and display the bins labels.
-    include_lowest : bool, default False
-        Whether the first interval should be left-inclusive or not.
-    filter: ndarray of bool, default None
-        If provided, any False values will be ignored in the calculation.
+        The precision at which to display the bin labels. Note that the
+        endpoints used for partitioning are not changed.
+    include_lowest : `bool`, default `False`
+        Indicates whether the first bin should include its left endpoint
+        or not. Note: Until a known issue is fixed, the first bin always
+        includes its left endpoint, except when `right` is set to `False`.
+    filter: `array` of `bool`, optional
+        A boolean mask array. If a filter is provided, any values of `x`
+        corresponding to `False` values are put in the 'Filtered' bin and mapped
+        to 0 in the integer bin mapping array. Note that until a known issue
+        is fixed, this parameter accepts a mask array that is shorter than `x`
+        and ignores values of `x` that are past the last corresponding value of
+        the mask.
+    duplicates : {'raise', 'drop'}, default 'raise'
+        If bin endpoints are not unique, raise an error or drop duplicate values.
 
     Returns
     -------
-    out : Categorical or FastArray
-        An array-like object representing the respective bin for each value
-        of `x`. The type depends on the value of `labels`:
-
-        * False : returns a FastArray of integers
-        * array, True, or None : returns a Categorical
-    bins : ndarray of floats
-        The computed or specified bins. Only returned when `retbins=True`.
+    bins : Categorical or FastArray
+        - If `labels` is `True` or `None`, a `.Categorical` is returned,
+          consisting of the bins, the integer mapping codes for the bins, and
+          the unique bin labels.
+        - If `labels` is `False`, a `.FastArray` is returned that contains the
+          integer mapping codes.
+
+    endpoints (optional) : `~numpy.ndarray` of str
+        An array of the bin endpoints. Returned as a separate value, only
+        when `retbins` is `True`.
 
     See Also
     --------
-    :meth:`~rt.rt_bin.qcut` :
-        Discretize variable into equal-sized buckets based on rank or based on sample quantiles.
-    :class:`~rt.rt_categorical.Categorical` :
-        Array type for storing data that come from a fixed set of values.
+    riptable.qcut :
+        Partition values into bins based on rank or sample quantiles.
 
     Examples
     --------
-    Discretize into three equal-sized bins.
+    Partition values into three equal-sized bins.
 
-    >>> rt.cut(np.array([1, 7, 5, 4, 6, 3]), 3)
+    >>> rt.cut(x=rt.FA([1, 7, 5, 4, 6, 3]), bins=3)
     Categorical([1.0->3.0, 5.0->7.0, 3.0->5.0, 3.0->5.0, 5.0->7.0, 1.0->3.0]) Length: 6
       FastArray([1, 3, 2, 2, 3, 1], dtype=int8) Base Index: 1
       FastArray([b'1.0->3.0', b'3.0->5.0', b'5.0->7.0'], dtype='|S8') Unique count: 3
 
-    Also return the bins.
+    Also return an array of the bin endpoints.
 
-    >>> rt.cut(np.array([1, 7, 5, 4, 6, 3]), 3, retbins=True)
-    (Categorical([1.0->3.0, 5.0->7.0, 3.0->5.0, 3.0->5.0, 5.0->7.0, 1.0->3.0]) Length: 6
+    >>> cat, endpoints = rt.cut(x=rt.FA([1, 7, 5, 4, 6, 3]), bins=3, retbins=True)
+    >>> cat
+    Categorical([1.0->3.0, 5.0->7.0, 3.0->5.0, 3.0->5.0, 5.0->7.0, 1.0->3.0]) Length: 6
       FastArray([1, 3, 2, 2, 3, 1], dtype=int8) Base Index: 1
-      FastArray([b'1.0->3.0', b'3.0->5.0', b'5.0->7.0'], dtype='|S8') Unique count: 3,
-     array([1., 3., 5., 7.]))
+      FastArray([b'1.0->3.0', b'3.0->5.0', b'5.0->7.0'], dtype='|S8') Unique count: 3
+    >>> endpoints
+    array([1., 3., 5., 7.])
 
-    Return just an array of integers.
+    Return just the array of integer bin mappings.
 
-    >>> rt.cut(np.array([1, 7, 5, 4, 6, 3]), 3, labels=False)
+    >>> rt.cut(x=rt.FA([1, 7, 5, 4, 6, 3]), bins=3, labels=False)
     FastArray([1, 3, 2, 2, 3, 1], dtype=int8)
 
-    Discovers the same bins, but assign them specific labels. Notice that
-    the returned Categorical's categories are `labels` and it is ordered.
+    Assign the bins specific labels. Notice that the returned `.Categorical`
+    object's categories are `labels`.
 
-    >>> rt.cut(np.array([1, 7, 5, 4, 6, 3]),
-    ...        3, labels=["bad", "medium", "good"])
+    >>> rt.cut(x=rt.FA([1, 7, 5, 4, 6, 3]),
+    ...        bins=3, labels=["bad", "medium", "good"])
     Categorical([bad, good, medium, medium, good, bad]) Length: 6
       FastArray([1, 3, 2, 2, 3, 1], dtype=int8) Base Index: 1
       FastArray([b'bad', b'medium', b'good'], dtype='|S6') Unique count: 3
+
+    Partition values into bins with specified endpoints. Values that fall outside
+    of the bins are put in the 'Filtered' category.
+
+    >>> rt.cut(x=rt.FA([1, 7, 5, 4, 6, 3]), bins=[1, 3, 6])
+    Categorical([1.0->3.0, Filtered, 3.0->6.0, 3.0->6.0, 3.0->6.0, 1.0->3.0]) Length: 6
+      FastArray([1, 0, 2, 2, 2, 1], dtype=int8) Base Index: 1
+      FastArray([b'1.0->3.0', b'3.0->6.0'], dtype='|S8') Unique count: 2
+
+    **Known Issues**
+
+    Each bin includes its right endpoint, even if `right` is set to `False`.
+
+    >>> rt.cut(x=rt.FA([2, 3, 4]), bins=[1, 2, 3, 4], right=False)
+    Categorical([1.0->2.0, 2.0->3.0, 3.0->4.0]) Length: 3
+      FastArray([1, 2, 3], dtype=int8) Base Index: 1
+      FastArray([b'1.0->2.0', b'2.0->3.0', b'3.0->4.0'], dtype='|S8') Unique count: 3
+
+    If `right` is `True` (the default), the first bin includes its left endpoint
+    even if `include_lowest` is `False` (the default).
+
+    >>> rt.cut(x=rt.FA([1, 2, 3, 4]), bins=3, include_lowest=False)
+    Categorical([1.0->2.0, 1.0->2.0, 2.0->3.0, 3.0->4.0]) Length: 4
+      FastArray([1, 1, 2, 3], dtype=int8) Base Index: 1
+      FastArray([b'1.0->2.0', b'2.0->3.0', b'3.0->4.0'], dtype='|S8') Unique count: 3
+
+    If `right` is `False`, values of `x` that fall outside of the last bin's
+    right endpoint are put into a bin labeled with an integer representing
+    the bin number.
+
+    >>> rt.cut(x=rt.FA([1, 2, 3, 4, 5, 6]), bins=[1, 2, 3, 4], right=False)
+    Categorical([Filtered, 1.0->2.0, 2.0->3.0, 3.0->4.0, !<4>, !<4>]) Length: 6
+      FastArray([0, 1, 2, 3, 4, 4], dtype=int8) Base Index: 1
+      FastArray([b'1.0->2.0', b'2.0->3.0', b'3.0->4.0'], dtype='|S8') Unique count: 3
+
+    If a boolean mask filter is provided that's shorter than the length of `x`,
+    values of `x` that are past the length of the mask are ignored.
+
+    >>> rt.cut(x=rt.FA([1, 2, 3, 4]), bins=2, filter=rt.FA([False, True, True]))
+    Categorical([Filtered, 2.0->2.5, 2.5->3.0]) Length: 3
+      FastArray([0, 1, 2], dtype=int8) Base Index: 1
+      FastArray([b'2.0->2.5', b'2.5->3.0'], dtype='|S8') Unique count: 2
     """
     # NOTE: this binning code is changed a bit from histogram for var(x) == 0
 
     # for handling the cut for datetime and timedelta objects
     # x_is_series, series_index, name, x = _preprocess_for_cut(x)
 
     if not isinstance(x, np.ndarray):
@@ -556,15 +630,22 @@
             raise ValueError("bins must increase monotonically.")
 
     dtype = x.dtype
 
     labels = None if labels is True else labels
 
     fac, bins, ret_labels = _bins_to_cuts_new(
-        x, bins, right=right, labels=labels, precision=precision, include_lowest=include_lowest, dtype=dtype
+        x,
+        bins,
+        right=right,
+        labels=labels,
+        precision=precision,
+        include_lowest=include_lowest,
+        dtype=dtype,
+        duplicates=duplicates,
     )
 
     labels = ret_labels if labels is not False else labels
 
     # if they want labels, make a categorical
 
     return _cut_result(fac, labels, bins, retbins)
```

### Comparing `riptable-1.6.9/riptable/rt_categorical.py` & `riptable-1.7.0/riptable/rt_categorical.py`

 * *Files 2% similar despite different names*

```diff
@@ -1527,14 +1527,15 @@
                 raise ValueError(f"Filtering is not allowed for base index 0. Use base-1 indexing instead.")
 
         index = values
         instance = None
         grouping = None
 
         # prepare to eliminate sort_gb
+        arg_sort_gb = sort_gb
         if sort_display is not None:
             sort_gb = sort_display
 
         # for how final display is sorted
         if sort_gb is None:
             _sort_gb = False
         else:
@@ -1543,18 +1544,20 @@
         # default to hash for uniques
         if lex is None:
             _lex = False
         else:
             _lex = lex
 
         # default to bytestrings - more performant, less memory
+        arg_unicode = unicode
         if unicode is None:
             unicode = False
 
         # default to 1-based indexing (filtering, etc. fully supported in this mode)
+        arg_base_index = base_index
         if base_index is None:
             base_index = 1
 
         # pop all single items from lists, or wrap in array
         if isinstance(values, list):
             if len(values) == 0:
                 raise ValueError("Categorical: values was an empty list and is not allowed.")
@@ -1570,24 +1573,25 @@
                 # note this differs from groupby's default mode
                 if ordered is None and lex is None and sort_gb is None and from_matlab is False:
                     pass
                     # TJD  want to force default sort in future
                     # ordered = True
 
         # from categorical, deep copy - send to regular categorical.copy() to correctly preserve attributes
+        # use original arguments rather than defaulted ones to avoid warnings in copy().
         if isinstance(values, Categorical):
             return values.copy(
                 categories=categories,  # main data
                 ordered=ordered,
-                sort_gb=sort_gb,
+                sort_gb=arg_sort_gb,
                 lex=lex,  # sorting/hashing
-                base_index=base_index,
+                base_index=arg_base_index,
                 filter=filter,  # priority options
                 dtype=dtype,
-                unicode=unicode,
+                unicode=arg_unicode,
                 invalid=invalid,
                 auto_add=auto_add,  # misc options
                 from_matlab=from_matlab,
                 _from_categorical=_from_categorical,
             )
 
         # all constructors will funnel to this branch
@@ -2226,14 +2230,81 @@
         # key chain also has the name
         self._gb_keychain = None
         return super().set_name(name)
 
     # ------------------------------------------------------------
     @property
     def _fa(self) -> FastArray:
+        """
+        Return the array of integer category mapping codes that corresponds to the array of `Categorical` values.
+
+        Returns
+        -------
+        FastArray
+            A `.FastArray` of the integer category mapping codes of the `Categorical`.
+
+        See Also
+        --------
+        Categorical.category_array : Return the array of unique categories of a `Categorical`.
+        Categorical.categories :
+            Return the unique categories of a single-key or multi-key `Categorical`, prepended with the 'Filtered' category.
+        Categorical.category_dict : Return a dictionary of the unique categories.
+        Categorical.category_mapping :
+            Return a dictionary of the integer category mapping codes for a `Categorical` created with an :py:class:`~enum.IntEnum` or a mapping dictionary.
+
+        Examples
+        --------
+        Single-key string `Categorical`:
+
+        >>> c = rt.Categorical(['a','a','b','c','a'])
+        >>> c
+        Categorical([a, a, b, c, a]) Length: 5
+          FastArray([1, 1, 2, 3, 1], dtype=int8) Base Index: 1
+          FastArray([b'a', b'b', b'c'], dtype='|S1') Unique count: 3
+        >>> c._fa
+        FastArray([1, 1, 2, 3, 1], dtype=int8)
+
+        Multi-key `Categorical`:
+
+        >>> c2 = rt.Categorical([rt.FA([1, 2, 3, 3, 3, 1]), rt.FA(['a','b','c','c','c','a'])])
+        >>> c2
+        Categorical([(1, a), (2, b), (3, c), (3, c), (3, c), (1, a)]) Length: 6
+          FastArray([1, 2, 3, 3, 3, 1], dtype=int8) Base Index: 1
+          {'key_0': FastArray([1, 2, 3]), 'key_1': FastArray([b'a', b'b', b'c'], dtype='|S1')} Unique count: 3
+        >>> c2._fa
+        FastArray([1, 2, 3, 3, 3, 1], dtype=int8)
+
+        A `Categorical` constructed with an :py:class:`~enum.IntEnum` or a mapping dictionary returns the provided integer category mapping codes:
+
+        >>> log_levels = {10: "DEBUG", 20: "INFO", 30: "WARNING", 40: "ERROR", 50: "CRITICAL"}
+        >>> c3 = rt.Categorical([10, 10, 40, 0, 50, 10, 30], log_levels)
+        >>> c3
+        Categorical([DEBUG, DEBUG, ERROR, !<0>, CRITICAL, DEBUG, WARNING]) Length: 7
+          FastArray([10, 10, 40,  0, 50, 10, 30]) Base Index: None
+          {10:'DEBUG', 20:'INFO', 30:'WARNING', 40:'ERROR', 50:'CRITICAL'} Unique count: 5
+        >>> c3._fa
+        FastArray([10, 10, 40,  0, 50, 10, 30])
+
+        A 'Filtered' category is mapped to 0 in the integer array:
+
+        >>> c4 = rt.Categorical(['b','b','c','d','e','b','c'])
+        >>> c4
+        Categorical([b, b, c, d, e, b, c]) Length: 7
+          FastArray([1, 1, 2, 3, 4, 1, 2], dtype=int8) Base Index: 1
+          FastArray([b'b', b'c', b'd', b'e'], dtype='|S1') Unique count: 4
+        >>> c4._fa
+        FastArray([1, 1, 2, 3, 4, 1, 2], dtype=int8)
+        >>> c4.category_remove('c')  # A removed category becomes 'Filtered'.
+        >>> c4
+        Categorical([b, b, Filtered, d, e, b, Filtered]) Length: 7
+          FastArray([1, 1, 0, 2, 3, 1, 0], dtype=int8) Base Index: 1
+          FastArray([b'b', b'c', b'd', b'e'], dtype='|S1') Unique count: 4
+        >>> c4._fa
+        FastArray([1, 1, 0, 2, 3, 1, 0], dtype=int8)
+        """
         result = self.view(FastArray)
         _copy_name(self, result)
         return result
 
     # ------------------------------------------------------------
     @property
     def base_index(self) -> IntEnum:
@@ -2330,17 +2401,88 @@
     def _categories(self):
         return self._categories_wrap.get_categories()
 
     # -----------------------------------------------------------------------------------
     @property
     def category_array(self) -> FastArray:
         """
-        Return the array of stored unique categories.
+        Return the array of unique categories of a `Categorical`.
+
+        Unlike `Categorical.categories`, this method does not prepend the 'Filtered' category to the returned array.
+
+        Raises an error for multi-key `Categorical` objects. To get the categories of a multi-key `Categorical`, use `Categorical.categories`.
+
+        Returns
+        -------
+        FastArray
+            A `.FastArray` of the unique categories of the `Categorical`.
 
-        Unlike the default for categories(), this will not prepend the invalid category.
+        See Also
+        --------
+        Categorical._fa :
+            Return the array of integer category mapping codes that corresponds to the array of `Categorical` values.
+        Categorical.categories :
+            Return the unique categories of a single-key or multi-key `Categorical`, prepended with the 'Filtered' category.
+        Categorical.category_dict : Return a dictionary of the unique categories.
+        Categorical.category_mapping :
+            Return a dictionary of the integer category mapping codes for a `Categorical` created with an :py:class:`~enum.IntEnum` or a mapping dictionary.
+
+        Examples
+        --------
+        Single-key string `Categorical`:
+
+        >>> c = rt.Categorical(['a','a','b','c','a'])
+        >>> c
+        Categorical([a, a, b, c, a]) Length: 5
+          FastArray([1, 1, 2, 3, 1], dtype=int8) Base Index: 1
+          FastArray([b'a', b'b', b'c'], dtype='|S1') Unique count: 3
+        >>> c.category_array
+        FastArray([b'a', b'b', b'c'], dtype='|S1')
+
+        Single-key integer `Categorical`:
+
+        >>> c2 = rt.Categorical([4, 5, 4, 4, 6, 5, 6])
+        >>> c2
+        Categorical([4, 5, 4, 4, 6, 5, 6]) Length: 7
+          FastArray([1, 2, 1, 1, 3, 2, 3], dtype=int8) Base Index: 1
+          FastArray([4, 5, 6]) Unique count: 3
+        >>> c2.category_array
+        FastArray([4, 5, 6])
+
+        Single-key integer `Categorical` with categories provided:
+
+        >>> c3 = rt.Categorical([2, 3, 4, 2, 3, 4], categories=['a', 'b', 'c', 'd', 'e'])
+        >>> c3
+        Categorical([b, c, d, b, c, d]) Length: 6
+          FastArray([2, 3, 4, 2, 3, 4]) Base Index: 1
+          FastArray([b'a', b'b', b'c', b'd', b'e'], dtype='|S1') Unique count: 5
+        >>> c3.category_array
+        FastArray([b'a', b'b', b'c', b'd', b'e'], dtype='|S1')
+
+        The 'Filtered' category isn't included:
+
+        >>> c4 = rt.Categorical([0, 1, 1, 0, 2, 1, 1, 1, 2, 0], categories=['a', 'b', 'c'])
+        >>> c4
+        Categorical([Filtered, a, a, Filtered, b, a, a, a, b, Filtered]) Length: 10
+          FastArray([0, 1, 1, 0, 2, 1, 1, 1, 2, 0]) Base Index: 1
+          FastArray([b'a', b'b', b'c'], dtype='|S1') Unique count: 3
+        >>> c4.category_array
+        FastArray([b'a', b'b', b'c'], dtype='|S1')
+
+        A `Categorical` constructed with an :py:class:`~enum.IntEnum` or a mapping dictionary returns the provided string categories:
+
+        >>> log_levels = {10: "DEBUG", 20: "INFO", 30: "WARNING", 40: "ERROR", 50: "CRITICAL"}
+        >>> c5 = rt.Categorical([10, 10, 40, 0, 50, 10, 30], log_levels)
+        >>> c5
+        Categorical([DEBUG, DEBUG, ERROR, !<0>, CRITICAL, DEBUG, WARNING]) Length: 7
+          FastArray([10, 10, 40,  0, 50, 10, 30]) Base Index: None
+          {10:'DEBUG', 20:'INFO', 30:'WARNING', 40:'ERROR', 50:'CRITICAL'} Unique count: 5
+        >>> c5.category_array
+        FastArray([b'DEBUG', b'INFO', b'WARNING', b'ERROR', b'CRITICAL'],
+                dtype='|S8')
         """
         return self._categories_wrap._get_array()
 
     @property
     def category_codes(self) -> FastArray:
         return self._categories_wrap._get_codes()
 
@@ -2802,15 +2944,22 @@
           FastArray([0, 1, 2], dtype=int8) Base Index: 1
           FastArray([b'a', b'b', b'c'], dtype='|S1') Unique count: 3
         """
         temp = FastArray.shift(self, periods=periods, invalid=0)
         return self.newclassfrominstance(temp, self)
 
     # -------------------------------------------------------
-    def shift(self, arr, window: Optional[int] = None, *, periods: Optional[int] = None):
+    def shift(
+        self,
+        arr,
+        window: Optional[int] = None,
+        *,
+        periods: Optional[int] = None,
+        filter: Optional[FastArray[bool]] = None,
+    ):
         """
         Shift values in each group by the specified number of periods.
 
         Where the shift introduces a missing value, the missing value is filled
         with the invalid value for the array's data type (for example, NaN for
         floating-point arrays or the sentinel value for integer arrays).
 
@@ -2818,32 +2967,34 @@
         Parameters
         ----------
         arr : array or list of array
             The array of values to shift.
         window : int, default 1
             The number of periods to shift. Can be a negative number to shift
             values backward.
-        periods: int, optional, default 1
-            Can use ``periods`` instead of ``window`` for Pandas parameter
+        periods : int, optional, default 1
+            Can use `periods` instead of `window` for Pandas parameter
             support.
+        filter : FastArray of bool, optional
+            Set of rows to include. Filtered out rows are skipped by the shift and become NaN in the output.
 
         Returns
         -------
         Dataset
             A `.Dataset` containing a column of shifted values.
 
         See Also
         --------
         Categorical.shift_cat : Shift the values of a `Categorical`.
         .FastArray.shift : Shift the values of a `.FastArray`.
         .DateTimeNano.shift : Shift the values of a `.DateTimeNano` array.
 
         Examples
         --------
-        With the default ``window=1``:
+        With the default `window=1`:
 
         >>> c = rt.Cat(['a', 'a', 'a', 'b', 'b', 'b', 'c', 'c', 'c'])
         >>> fa = rt.arange(9)
         >>> shift_val = c.shift(fa)
         >>> shift_val
         #   col_0
         -   -----
@@ -2885,14 +3036,31 @@
         3       4
         4       5
         5     Inv
         6       7
         7       8
         8     Inv
 
+        With `filter`:
+
+        >>> filt = rt.FA([True, True, True, True, False, True, False, True, True])
+        >>> shift_filt = c.shift(fa, filter=filt)
+        >>> shift_filt
+        #   col_0
+        -   -----
+        0     Inv
+        1       0
+        2       1
+        3     Inv
+        4     Inv
+        5       3
+        6     Inv
+        7     Inv
+        8       7
+
         Results put in a `.Dataset` to show the shifts in relation to the
         categories:
 
         >>> ds = rt.Dataset()
         >>> ds.c = c
         >>> ds.shift_val = shift_val
         >>> ds.shift_val_2 = shift_val_2
@@ -2931,15 +3099,15 @@
         # only one of window and period may be specified
         if periods is not None:
             if window is not None:
                 raise ValueError("Only one of window or periods may be specified")
             window = periods
         elif window is None:
             window = 1
-        return self._calculate_all(GB_FUNCTIONS.GB_ROLLING_SHIFT, arr, func_param=(window))
+        return self._calculate_all(GB_FUNCTIONS.GB_ROLLING_SHIFT, arr, func_param=(window), filter=filter)
 
     @classmethod
     def _from_meta_data(cls, arrdict, arrflags, meta):
         meta = MetaData(meta)
         name = meta["name"]
 
         # load defaults for the current version
@@ -4361,14 +4529,103 @@
         The grouping object should be queried for all grouping-related properties.
         This is also a property in GroupBy, and is called by many routines in the GroupByOps parent class.
 
         See Also: Grouping
         """
         return self._grouping
 
+    # ---------------------------------------------------------------
+    def nth(
+        self,
+        arr: Union[list, tuple, np.ndarray],
+        n: int = 1,
+        transform: Optional[bool] = None,
+        filter: Optional[np.ndarray] = None,
+        showfilter: Optional[bool] = None,
+    ):
+        """
+        Select the nth row from each group.
+
+        Parameters
+        ----------
+        arr : array or list of array
+            The array of values to select from.
+        n : int
+            A single nth value for the row.
+        transform : bool
+            If `True`, the output will have the same shape as `arr`. If
+            `False`, the output will typically have the same shape as
+            the `Categorical`.
+        filter : array of bool, optional
+            Elements to include in the operation.
+        showfilter : bool
+            If `True`, the output contains an extra row representing the
+            operation applied to a stack of all the elements that were
+            filtered out (both at `Categorical` creation and in this operation,
+            using a filter.)
+
+        Examples
+        --------
+        >>> ds = rt.Dataset({'A': rt.Categorical(['a', 'a', 'b', 'a', 'b']),
+        ...                  'B': [rt.nan, 2, 3, 4, 5]})
+        >>> c = ds.A
+        >>> c.nth([ds.A, ds.B], 0)
+        *A      B
+        --   ----
+        a     nan
+        b    3.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 18.0 B
+
+        >>> c.nth([ds.A, ds.B], 1)
+        *A     B
+        --  ----
+        a   2.00
+        b   5.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 18.0 B
+
+        >>> c.nth([ds.A, ds.B], -1)
+        *A      B
+        --   ----
+        a    4.00
+        b    5.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 18.0 B
+
+        >>> c.nth(ds.B, -2, transform=True)
+        #      B
+        -   ----
+        0   2.00
+        1   2.00
+        2   3.00
+        3   2.00
+        4   3.00
+        <BLANKLINE>
+        [5 rows x 1 columns] total bytes: 40.0 B
+
+        >>> c.nth(ds.B, 1, filter=ds.B.isnotnan())
+        *A      B
+        --   ----
+        a    4.00
+        b    5.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 18.0 B
+
+        >>> c.nth(ds.B, -2, filter=ds.A!='b', showfilter=True)
+        *A            B
+        --------   ----
+        Filtered   3.00
+        a          2.00
+        b           nan
+        <BLANKLINE>
+        [3 rows x 2 columns] total bytes: 48.0 B
+        """
+        return super()._nth(arr, n=n, transform=transform, filter=filter, showfilter=showfilter)
+
     # -------------------------------------------------------
     @property
     def transform(self):
         """
         TO BE DEPRECATED
 
         Examples
```

### Comparing `riptable-1.6.9/riptable/rt_compressedarray.py` & `riptable-1.7.0/riptable/rt_compressedarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_csv.py` & `riptable-1.7.0/riptable/rt_csv.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_dataset.py` & `riptable-1.7.0/riptable/rt_dataset.py`

 * *Files 1% similar despite different names*

```diff
@@ -6934,22 +6934,26 @@
 
     # -------------------------------------------------------
     def trim(
         self,
         func: Optional[Callable[[np.ndarray], np.ndarray]] = None,
         zeros: bool = True,
         nans: bool = True,
+        columns: bool = True,
         rows: bool = True,
         keep: bool = False,
         ret_filters: bool = False,
     ) -> Union["Dataset", Tuple["Dataset", np.ndarray, np.ndarray]]:
         """
-        Returns a Dataset with columns removed that contain all zeros or all nans (or either).
+        Returns a Dataset with columns and/or rows removed that contain all zeros and/or nans.
+        Whether to remove only zeros, only nans, or both zeros and nans is controlled by kwargs `zeros` and `nans`.
 
-        If `rows` is True (the default), any rows which are all zeros or all nans will also be removed.
+        If `columns` is True (the default), any columns which are all zeros and/or nans will be removed.
+
+        If `rows` is True (the default), any rows which are all zeros and/or nans will be removed.
 
         If `func` is set, it will bypass the zeros and nan check and instead call `func`.
 
         * Any column that contains all True after calling `func` will be removed.
 
         * Any row that contains all True after calling `func` will be removed if `rows` is True.
 
@@ -6958,16 +6962,18 @@
         ----------
         func
             A function which inputs an array and returns a boolean mask.
         zeros : bool
             Defaults to True. Values must be non-zero.
         nans : bool
             Defaults to True. Values cannot be nan.
+        columns : bool
+            Defaults to True. Reduce columns if entire column filtered.
         rows : bool
-            Defaults to True. Reduce rows also if entire row filtered.
+            Defaults to True. Reduce rows if entire row filtered.
         keep : bool
             Defaults to False.  When set to True, does the opposite.
         ret_filters : bool
             If True, return row and column filters based on the comparisons
 
         Returns
         -------
@@ -7022,15 +7028,16 @@
                         # check if all FALSE
                         addcol = sum(result) != 0
                     else:
                         # check if all TRUE
                         # print('**col ', col, sum(result), len(arr))
                         addcol = sum(result) != len(arr)
 
-                    if addcol:
+                    # add if not all TRUE/FALSE or if columns == False (to add all columms)
+                    if addcol or not columns:
                         col_filter_mask.append(result)
                         col_filter.append(col)
                         colboolmask[i] = True
                 else:
                     # add because did not return bool
                     col_filter.append(col)
                     colboolmask[i] = True
```

### Comparing `riptable-1.6.9/riptable/rt_datetime.py` & `riptable-1.7.0/riptable/rt_datetime.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-__all__ = [
+__all__ = [
     "DateTimeBase",
     "DateTimeNano",
     "TimeSpan",
     "Date",
     "DateSpan",
     "DateTimeUTC",
     "DateTimeNanoScalar",
@@ -12,20 +12,21 @@
     "parse_epoch",
     "timestring_to_nano",
     "datestring_to_nano",
     "datetimestring_to_nano",
     "strptime_to_nano",
 ]
 
-import time
-import warnings
 from datetime import date
 from datetime import datetime as dt
 from datetime import timezone
+import math
+import time
 from typing import TYPE_CHECKING, List, Optional, Tuple, Union
+import warnings
 
 import numpy as np
 import riptide_cpp as rc
 from dateutil import tz
 
 from .rt_categorical import Categorical
 from .rt_enum import (
@@ -1540,14 +1541,102 @@
         Date(['Inv', 'Inv', '2019-02-05'])
         >>> d.isnotnan()
         FastArray([False, False,  True])
         """
         return ~self.isnan()
 
     # ------------------------------------------------------------
+    def isfinite(self):
+        """
+        Return a boolean array that's True for each `Date` element that's
+        not a NaN (Not a Number), False otherwise.
+
+        Both the DateTime NaN (0) and Riptable's int32 sentinel value are
+        considered to be NaN.
+
+        Returns
+        -------
+        `FastArray`
+            A `FastArray` of booleans that's True for each non-NaN element,
+            False otherwise.
+
+        See Also
+        --------
+        Date.isnan, DateTimeNano.isnan, DateTimeNano.isnotnan, riptable.isnan,
+        riptable.isnotnan, riptable.isnanorzero, FastArray.isnan,
+        FastArray.isnotnan, FastArray.notna, FastArray.isnanorzero,
+        Categorical.isnan, Categorical.isnotnan, Categorical.notna
+        Dataset.mask_or_isnan :
+            Return a boolean array that's True for each `Dataset` row that
+            contains at least one NaN.
+        Dataset.mask_and_isnan :
+            Return a boolean array that's True for each all-NaN `Dataset` row.
+
+        Notes
+        -----
+        Riptable currently uses 0 for the DateTime NaN value. This constant is
+        held in the `DateTimeBase` class.
+
+        Examples
+        --------
+        >>> d = rt.Date.range('20190201', days = 3, step = 2)
+        >>> d[0] = 0
+        >>> d[1] = d.inv
+        >>> d
+        Date(['Inv', 'Inv', '2019-02-05'])
+        >>> d.isfinite()
+        FastArray([False, False,  True])
+        """
+        return ~self.isnan()
+
+    # ------------------------------------------------------------
+    def isnotfinite(self):
+        """
+        Return a boolean array that's True for each `Date` element that's
+        a NaN (Not a Number), False otherwise.
+
+        Both the DateTime NaN (0) and Riptable's int32 sentinel value are
+        considered to be NaN.
+
+        Returns
+        -------
+        `FastArray`
+            A `FastArray` of booleans that's True for each NaN element, False
+            otherwise.
+
+        See Also
+        --------
+        Date.isnotnan, DateTimeNano.isnan, DateTimeNano.isnotnan, riptable.isnan,
+        riptable.isnotnan, riptable.isnanorzero, FastArray.isnan,
+        FastArray.isnotnan, FastArray.notna, FastArray.isnanorzero,
+        Categorical.isnan, Categorical.isnotnan, Categorical.notna
+        Dataset.mask_or_isnan :
+            Return a boolean array that's True for each `Dataset` row that
+            contains at least one NaN.
+        Dataset.mask_and_isnan :
+            Return a boolean array that's True for each all-NaN `Dataset` row.
+
+        Notes
+        -----
+        Riptable currently uses 0 for the DateTime NaN value. This constant is
+        held in the `DateTimeBase` class.
+
+        Examples
+        --------
+        >>> d = rt.Date.range('20190201', days = 3, step = 2)
+        >>> d[0] = 0
+        >>> d[1] = d.inv
+        >>> d
+        Date(['Inv', 'Inv', '2019-02-05'])
+        >>> d.isnotfinite()
+        FastArray([ True,  True, False])
+        """
+        return self._fa.isnanorzero()
+
+    # ------------------------------------------------------------
     @property
     def yyyymmdd(self):
         return DateTimeNano(self._fa * NANOS_PER_DAY, from_tz="GMT", to_tz="GMT").yyyymmdd
 
     # ------------------------------------------------------------
     @property
     def _year_splits(self):
@@ -2565,15 +2654,15 @@
     MetaDefault = {
         # vars for container loader
         "name": "Date",
         "typeid": TypeId.DateSpan,
         "version": 0,  # if no version, assume before versions implemented
         "instance_vars": {"_display_length": DisplayLength.Long},
     }
-    NAN_DATE = INVALID_DICT[7]  # int32 sentinel
+    NAN_DATE = INVALID_DICT[np.dtype(np.int32).num]  # int32 sentinel
     forbidden_mathops = ()
 
     def __new__(cls, arr, unit=None):
         instance = None
         if isinstance(arr, list) or np.isscalar(arr):
             arr = FastArray(arr, dtype=np.int32)
 
@@ -4141,15 +4230,15 @@
     }
     # TODO: add more intervals here and to DateTimeNano quarters
     # need to interact with the business calendar class
     # maybe merge these with TimeSpan unit conversion dict?
     FrequencyStrings = {
         "H": "h",
         "T": "m",
-        "MIN": "s",
+        "MIN": "m",
         "S": "s",
         "L": "ms",
         "MS": "ms",
         "U": "us",
         "US": "us",
         "N": "ns",
         "NS": "ns",
@@ -5081,14 +5170,104 @@
         DateTimeNano(['Inv', 'Inv', '20210712 22:44:19.000000000'], to_tz='NYC')
         >>> dtn.isnotnan()
         FastArray([False, False,  True])
         """
         return ~self.isnan()
 
     # -------------------------------------------------------------
+    def isfinite(self):
+        """
+        Return a boolean array that's True for each `DateTimeNano` element
+        that's not a NaN (Not a Number), False otherwise.
+
+        Both the DateTime NaN (0) and Riptable's int64 sentinel value are
+        considered to be NaN.
+
+        Returns
+        -------
+        `FastArray`
+            A `FastArray` of booleans that's True for each non-NaN element,
+            False otherwise.
+
+        See Also
+        --------
+        DateTimeNano.isnan, Date.isnan, Date.isnotnan, riptable.isnan,
+        riptable.isnotnan, riptable.isnanorzero, FastArray.isnan,
+        FastArray.isnotnan, FastArray.notna, FastArray.isnanorzero,
+        Categorical.isnan, Categorical.isnotnan, Categorical.notna
+        Dataset.mask_or_isnan :
+            Return a boolean array that's True for each `Dataset` row that
+            contains at least one NaN.
+        Dataset.mask_and_isnan :
+            Return a boolean array that's True for each all-NaN `Dataset` row.
+
+        Notes
+        -----
+        Riptable currently uses 0 for the DateTime NaN value. This constant is
+        held in the `DateTimeBase` class.
+
+        Examples
+        --------
+        >>> dtn = rt.DateTimeNano(['20210101 09:31:15', '20210519 05:21:17',
+        ...                        '20210713 02:44:19'], from_tz = 'NYC')
+        >>> dtn[0] = 0
+        >>> dtn[1] = dtn.inv
+        >>> dtn
+        DateTimeNano(['Inv', 'Inv', '20210712 22:44:19.000000000'], to_tz='NYC')
+        >>> dtn.isfinite()
+        FastArray([False, False,  True])
+        """
+        return ~self.isnan()
+
+    # -------------------------------------------------------------
+    def isnotfinite(self):
+        """
+        Return a boolean array that's True for each `DateTimeNano` element
+        that's a NaN (Not a Number), False otherwise.
+
+        Both the DateTime NaN (0) and Riptable's int64 sentinel value are
+        considered to be NaN.
+
+        Returns
+        -------
+        `FastArray`
+            A `FastArray` of booleans that's True for each NaN element, False
+            otherwise.
+
+        See Also
+        --------
+        DateTimeNano.isnotnan, Date.isnan, Date.isnotnan, riptable.isnan,
+        riptable.isnotnan, riptable.isnanorzero, FastArray.isnan,
+        FastArray.isnotnan, FastArray.notna, FastArray.isnanorzero,
+        Categorical.isnan, Categorical.isnotnan, Categorical.notna
+        Dataset.mask_or_isnan :
+            Return a boolean array that's True for each `Dataset` row that contains
+            at least one NaN.
+        Dataset.mask_and_isnan :
+            Return a boolean array that's True for each all-NaN `Dataset` row.
+
+        Notes
+        -----
+        Riptable currently uses 0 for the DateTime NaN value. This constant is
+        held in the `DateTimeBase` class.
+
+        Examples
+        --------
+        >>> dtn = rt.DateTimeNano(['20210101 09:31:15', '20210519 05:21:17',
+        ...                        '20210713 02:44:19'], from_tz = 'NYC')
+        >>> dtn[0] = 0
+        >>> dtn[1] = dtn.inv
+        >>> dtn
+        DateTimeNano(['Inv', 'Inv', '20210712 22:44:19.000000000'], to_tz='NYC')
+        >>> dtn.isnotfinite()
+        FastArray([ True,  True, False])
+        """
+        return self._fa.isnanorzero()
+
+    # -------------------------------------------------------------
     def _datetimenano_compare_check(self, funcname, other):
         caller = self._fa
 
         if isinstance(other, (DateTimeNano, DateTimeNanoScalar)):
             if other._timezone._to_tz != self._timezone._to_tz:
                 warnings.warn(
                     f"DateTimeNano objects are being displayed in different timezones. Results may not appear to be correct for {funcname}"
@@ -6982,14 +7161,16 @@
     """
     Derived from np.int32
     Number of days between two dates
     """
 
     __slots__ = "_display_length"
 
+    NAN_DATESPANSCALAR = INVALID_DICT[np.dtype(np.int32).num]  # int32 sentinel
+
     # ------------------------------------------------------------
     def __new__(cls, arr, **kwargs):
         return super().__new__(cls, arr)
 
     # ------------------------------------------------------------
     def __init__(*args, **kwargs):
         self = args[0]
@@ -7020,14 +7201,30 @@
 
     # ------------------------------------------------------------
     @property
     def _np(self):
         return self.view(np.int32)
 
     # ------------------------------------------------------------
+    def isnan(self):
+        return self == DateSpanScalar.NAN_DATESPANSCALAR
+
+    # ------------------------------------------------------------
+    def isnotnan(self):
+        return self != DateSpanScalar.NAN_DATESPANSCALAR
+
+    # ------------------------------------------------------------
+    def isfinite(self):
+        return self != DateSpanScalar.NAN_DATESPANSCALAR
+
+    # ------------------------------------------------------------
+    def isnotfinite(self):
+        return self == DateSpanScalar.NAN_DATESPANSCALAR
+
+    # ------------------------------------------------------------
     @property
     def _fa(self):
         return self.view(np.int32)
 
     # used in adding a scalar to a Dataset
     def repeat(self, repeats, axis=None):
         return DateSpan(self._np.repeat(repeats, axis=axis))
@@ -7130,14 +7327,26 @@
         return self._strftime(format)
 
     # ------------------------------------------------------------
     def isnan(self):
         return self <= 0
 
     # ------------------------------------------------------------
+    def isnotnan(self):
+        return self > 0
+
+    # ------------------------------------------------------------
+    def isfinite(self):
+        return self > 0
+
+    # ------------------------------------------------------------
+    def isnotfinite(self):
+        return self <= 0
+
+    # ------------------------------------------------------------
     @property
     def _np(self):
         return self.view(np.int64)
 
     # ------------------------------------------------------------
     @property
     def _fa(self):
@@ -7259,14 +7468,30 @@
         TimeSpan(['09:00:00.000000000', '10:45:00.000000000', '02:30:00.000000000'])
         >>> ts[0].strftime('%X')
         '09:00:00'
         """
         return self._strftime(format)
 
     # ------------------------------------------------------------
+    def isnan(self):
+        return math.isnan(self)
+
+    # ------------------------------------------------------------
+    def isnotnan(self):
+        return not math.isnan(self)
+
+    # ------------------------------------------------------------
+    def isfinite(self):
+        return math.isfinite(self)
+
+    # ------------------------------------------------------------
+    def isnotfinite(self):
+        return not math.isfinite(self)
+
+    # ------------------------------------------------------------
     def get_classname(self):
         return __class__.__name__
 
     # ------------------------------------------------------------
     def __repr__(self):
         itemformat = self.get_item_format()
         return f"{self.get_classname()}('{TimeSpan.display_item_clock(self._np)}')"
```

### Comparing `riptable-1.6.9/riptable/rt_display.py` & `riptable-1.7.0/riptable/rt_display.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_ema.py` & `riptable-1.7.0/riptable/rt_ema.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_enum.py` & `riptable-1.7.0/riptable/rt_enum.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_fastarray.py` & `riptable-1.7.0/riptable/rt_fastarray.py`

 * *Files 3% similar despite different names*

```diff
@@ -244,1213 +244,1213 @@
 00000f30: 3a0d 0a20 2020 2028 746f 742c 206e 2920  :..    (tot, n) 
 00000f40: 3d20 5f66 6e61 6e73 756d 6865 6c70 6572  = _fnansumhelper
 00000f50: 2878 2c20 6669 6c74 6572 290d 0a20 2020  (x, filter)..   
 00000f60: 2072 6574 7572 6e20 746f 7420 2f20 6e0d   return tot / n.
 00000f70: 0a0d 0a0d 0a40 6e62 2e6e 6a69 7428 7061  .....@nb.njit(pa
 00000f80: 7261 6c6c 656c 3d54 7275 6529 0d0a 6465  rallel=True)..de
 00000f90: 6620 5f66 6e61 6e76 6172 2878 2c20 6669  f _fnanvar(x, fi
-00000fa0: 6c74 6572 293a 0d0a 0d0a 2020 2020 6162  lter):....    ab
-00000fb0: 6320 3d20 302e 300d 0a20 2020 206c 656e  c = 0.0..    len
-00000fc0: 6774 6820 3d20 300d 0a0d 0a20 2020 2066  gth = 0....    f
-00000fd0: 6f72 2069 2069 6e20 6e62 2e70 7261 6e67  or i in nb.prang
-00000fe0: 6528 6c65 6e28 7829 293a 0d0a 2020 2020  e(len(x)):..    
-00000ff0: 2020 2020 6966 2066 696c 7465 725b 695d      if filter[i]
-00001000: 2061 6e64 206e 6f74 205f 6973 6e61 6e28   and not _isnan(
-00001010: 785b 695d 293a 0d0a 2020 2020 2020 2020  x[i]):..        
-00001020: 2020 2020 6162 6320 2b3d 2078 5b69 5d0d      abc += x[i].
-00001030: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
-00001040: 6774 6820 2b3d 2031 0d0a 0d0a 2020 2020  gth += 1....    
-00001050: 6d65 616e 203d 2061 6263 202f 206c 656e  mean = abc / len
-00001060: 6774 680d 0a0d 0a20 2020 2072 6574 203d  gth....    ret =
-00001070: 2030 2e30 0d0a 0d0a 2020 2020 666f 7220   0.0....    for 
-00001080: 6920 696e 206e 622e 7072 616e 6765 286c  i in nb.prange(l
-00001090: 656e 2878 2929 3a0d 0a20 2020 2020 2020  en(x)):..       
-000010a0: 2069 6620 6669 6c74 6572 5b69 5d20 616e   if filter[i] an
-000010b0: 6420 6e6f 7420 5f69 736e 616e 2878 5b69  d not _isnan(x[i
-000010c0: 5d29 3a0d 0a20 2020 2020 2020 2020 2020  ]):..           
-000010d0: 2072 6574 202b 3d20 2878 5b69 5d20 2d20   ret += (x[i] - 
-000010e0: 6d65 616e 2920 2a2a 2032 0d0a 2020 2020  mean) ** 2..    
-000010f0: 6966 206c 656e 6774 6820 3e20 313a 0d0a  if length > 1:..
-00001100: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00001110: 6574 202f 2028 6c65 6e67 7468 202d 2031  et / (length - 1
-00001120: 290d 0a20 2020 2069 6620 6c65 6e67 7468  )..    if length
-00001130: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-00001140: 7265 7475 726e 206e 702e 4e61 4e0d 0a20  return np.NaN.. 
-00001150: 2020 2069 6620 6c65 6e67 7468 203d 3d20     if length == 
-00001160: 303a 0d0a 2020 2020 2020 2020 7261 6973  0:..        rais
-00001170: 6520 5661 6c75 6545 7272 6f72 2822 5472  e ValueError("Tr
-00001180: 6965 6420 746f 2074 616b 6520 7468 6520  ied to take the 
-00001190: 7661 7269 616e 6365 206f 6620 616e 2065  variance of an e
-000011a0: 6d70 7479 2061 7272 6179 2e22 290d 0a0d  mpty array.")...
-000011b0: 0a0d 0a64 6566 205f 666e 616e 7374 6428  ...def _fnanstd(
-000011c0: 782c 2066 696c 7465 7229 3a0d 0a20 2020  x, filter):..   
-000011d0: 2072 6574 7572 6e20 6d61 7468 2e73 7172   return math.sqr
-000011e0: 7428 5f66 6e61 6e76 6172 2878 2c20 6669  t(_fnanvar(x, fi
-000011f0: 6c74 6572 2929 0d0a 0d0a 0d0a 406e 622e  lter))......@nb.
-00001200: 6e6a 6974 2870 6172 616c 6c65 6c3d 5472  njit(parallel=Tr
-00001210: 7565 290d 0a64 6566 205f 6673 756d 6865  ue)..def _fsumhe
-00001220: 6c70 6572 2878 2c20 6669 6c74 6572 293a  lper(x, filter):
-00001230: 0d0a 2020 2020 7265 7420 3d20 300d 0a20  ..    ret = 0.. 
-00001240: 2020 206c 656e 6774 6820 3d20 300d 0a20     length = 0.. 
-00001250: 2020 2066 6f72 2069 2069 6e20 6e62 2e70     for i in nb.p
-00001260: 7261 6e67 6528 6c65 6e28 7829 293a 0d0a  range(len(x)):..
-00001270: 2020 2020 2020 2020 6966 2066 696c 7465          if filte
-00001280: 725b 695d 3a0d 0a20 2020 2020 2020 2020  r[i]:..         
-00001290: 2020 2072 6574 202b 3d20 785b 695d 0d0a     ret += x[i]..
-000012a0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-000012b0: 7468 202b 3d20 310d 0a20 2020 2072 6574  th += 1..    ret
-000012c0: 7572 6e20 2872 6574 2c20 6c65 6e67 7468  urn (ret, length
-000012d0: 290d 0a0d 0a0d 0a64 6566 205f 6673 756d  )......def _fsum
-000012e0: 2878 2c20 6669 6c74 6572 293a 0d0a 2020  (x, filter):..  
-000012f0: 2020 7265 7475 726e 205f 6673 756d 6865    return _fsumhe
-00001300: 6c70 6572 2878 2c20 6669 6c74 6572 295b  lper(x, filter)[
-00001310: 305d 0d0a 0d0a 0d0a 6465 6620 5f66 6d65  0]......def _fme
-00001320: 616e 2878 2c20 6669 6c74 6572 293a 0d0a  an(x, filter):..
-00001330: 2020 2020 2874 6f74 2c20 6e29 203d 205f      (tot, n) = _
-00001340: 6673 756d 6865 6c70 6572 2878 2c20 6669  fsumhelper(x, fi
-00001350: 6c74 6572 290d 0a20 2020 2072 6574 7572  lter)..    retur
-00001360: 6e20 746f 7420 2f20 6e0d 0a0d 0a0d 0a40  n tot / n......@
-00001370: 6e62 2e6e 6a69 7428 7061 7261 6c6c 656c  nb.njit(parallel
-00001380: 3d54 7275 6529 0d0a 6465 6620 5f66 7661  =True)..def _fva
-00001390: 7228 782c 2066 696c 7465 7229 3a0d 0a0d  r(x, filter):...
-000013a0: 0a20 2020 2061 6263 203d 2030 2e30 0d0a  .    abc = 0.0..
-000013b0: 2020 2020 6c65 6e67 7468 203d 2030 0d0a      length = 0..
-000013c0: 0d0a 2020 2020 666f 7220 6920 696e 206e  ..    for i in n
-000013d0: 622e 7072 616e 6765 286c 656e 2878 2929  b.prange(len(x))
-000013e0: 3a0d 0a20 2020 2020 2020 2069 6620 6669  :..        if fi
-000013f0: 6c74 6572 5b69 5d3a 0d0a 2020 2020 2020  lter[i]:..      
-00001400: 2020 2020 2020 6162 6320 2b3d 2078 5b69        abc += x[i
-00001410: 5d0d 0a20 2020 2020 2020 2020 2020 206c  ]..            l
-00001420: 656e 6774 6820 2b3d 2031 0d0a 0d0a 2020  ength += 1....  
-00001430: 2020 6d65 616e 203d 2061 6263 202f 206c    mean = abc / l
-00001440: 656e 6774 680d 0a0d 0a20 2020 2072 6574  ength....    ret
-00001450: 203d 2030 2e30 0d0a 0d0a 2020 2020 666f   = 0.0....    fo
-00001460: 7220 6920 696e 206e 622e 7072 616e 6765  r i in nb.prange
-00001470: 286c 656e 2878 2929 3a0d 0a20 2020 2020  (len(x)):..     
-00001480: 2020 2069 6620 6669 6c74 6572 5b69 5d3a     if filter[i]:
-00001490: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000014a0: 7420 2b3d 2028 785b 695d 202d 206d 6561  t += (x[i] - mea
-000014b0: 6e29 202a 2a20 320d 0a20 2020 2069 6620  n) ** 2..    if 
-000014c0: 6c65 6e67 7468 203e 2031 3a0d 0a20 2020  length > 1:..   
-000014d0: 2020 2020 2072 6574 7572 6e20 7265 7420       return ret 
-000014e0: 2f20 286c 656e 6774 6820 2d20 3129 0d0a  / (length - 1)..
-000014f0: 2020 2020 6966 206c 656e 6774 6820 3d3d      if length ==
-00001500: 2031 3a0d 0a20 2020 2020 2020 2072 6574   1:..        ret
-00001510: 7572 6e20 6e70 2e4e 614e 0d0a 2020 2020  urn np.NaN..    
-00001520: 6966 206c 656e 6774 6820 3d3d 2030 3a0d  if length == 0:.
-00001530: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
-00001540: 616c 7565 4572 726f 7228 2254 7269 6564  alueError("Tried
-00001550: 2074 6f20 7461 6b65 2074 6865 2076 6172   to take the var
-00001560: 6961 6e63 6520 6f66 2061 6e20 656d 7074  iance of an empt
-00001570: 7920 6172 7261 792e 2229 0d0a 0d0a 0d0a  y array.")......
-00001580: 6465 6620 5f66 7374 6428 782c 2066 696c  def _fstd(x, fil
-00001590: 7465 7229 3a0d 0a20 2020 2072 6574 7572  ter):..    retur
-000015a0: 6e20 6d61 7468 2e73 7172 7428 5f66 7661  n math.sqrt(_fva
-000015b0: 7228 782c 2066 696c 7465 7229 290d 0a0d  r(x, filter))...
-000015c0: 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ...# -----------
+00000fa0: 6c74 6572 293a 0d0a 2020 2020 6162 6320  lter):..    abc 
+00000fb0: 3d20 302e 300d 0a20 2020 206c 656e 6774  = 0.0..    lengt
+00000fc0: 6820 3d20 300d 0a0d 0a20 2020 2066 6f72  h = 0....    for
+00000fd0: 2069 2069 6e20 6e62 2e70 7261 6e67 6528   i in nb.prange(
+00000fe0: 6c65 6e28 7829 293a 0d0a 2020 2020 2020  len(x)):..      
+00000ff0: 2020 6966 2066 696c 7465 725b 695d 2061    if filter[i] a
+00001000: 6e64 206e 6f74 205f 6973 6e61 6e28 785b  nd not _isnan(x[
+00001010: 695d 293a 0d0a 2020 2020 2020 2020 2020  i]):..          
+00001020: 2020 6162 6320 2b3d 2078 5b69 5d0d 0a20    abc += x[i].. 
+00001030: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
+00001040: 6820 2b3d 2031 0d0a 0d0a 2020 2020 6d65  h += 1....    me
+00001050: 616e 203d 2061 6263 202f 206c 656e 6774  an = abc / lengt
+00001060: 680d 0a0d 0a20 2020 2072 6574 203d 2030  h....    ret = 0
+00001070: 2e30 0d0a 0d0a 2020 2020 666f 7220 6920  .0....    for i 
+00001080: 696e 206e 622e 7072 616e 6765 286c 656e  in nb.prange(len
+00001090: 2878 2929 3a0d 0a20 2020 2020 2020 2069  (x)):..        i
+000010a0: 6620 6669 6c74 6572 5b69 5d20 616e 6420  f filter[i] and 
+000010b0: 6e6f 7420 5f69 736e 616e 2878 5b69 5d29  not _isnan(x[i])
+000010c0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+000010d0: 6574 202b 3d20 2878 5b69 5d20 2d20 6d65  et += (x[i] - me
+000010e0: 616e 2920 2a2a 2032 0d0a 2020 2020 6966  an) ** 2..    if
+000010f0: 206c 656e 6774 6820 3e20 313a 0d0a 2020   length > 1:..  
+00001100: 2020 2020 2020 7265 7475 726e 2072 6574        return ret
+00001110: 202f 2028 6c65 6e67 7468 202d 2031 290d   / (length - 1).
+00001120: 0a20 2020 2069 6620 6c65 6e67 7468 203d  .    if length =
+00001130: 3d20 313a 0d0a 2020 2020 2020 2020 7265  = 1:..        re
+00001140: 7475 726e 206e 702e 4e61 4e0d 0a20 2020  turn np.NaN..   
+00001150: 2069 6620 6c65 6e67 7468 203d 3d20 303a   if length == 0:
+00001160: 0d0a 2020 2020 2020 2020 7261 6973 6520  ..        raise 
+00001170: 5661 6c75 6545 7272 6f72 2822 5472 6965  ValueError("Trie
+00001180: 6420 746f 2074 616b 6520 7468 6520 7661  d to take the va
+00001190: 7269 616e 6365 206f 6620 616e 2065 6d70  riance of an emp
+000011a0: 7479 2061 7272 6179 2e22 290d 0a0d 0a0d  ty array.").....
+000011b0: 0a64 6566 205f 666e 616e 7374 6428 782c  .def _fnanstd(x,
+000011c0: 2066 696c 7465 7229 3a0d 0a20 2020 2072   filter):..    r
+000011d0: 6574 7572 6e20 6d61 7468 2e73 7172 7428  eturn math.sqrt(
+000011e0: 5f66 6e61 6e76 6172 2878 2c20 6669 6c74  _fnanvar(x, filt
+000011f0: 6572 2929 0d0a 0d0a 0d0a 406e 622e 6e6a  er))......@nb.nj
+00001200: 6974 2870 6172 616c 6c65 6c3d 5472 7565  it(parallel=True
+00001210: 290d 0a64 6566 205f 6673 756d 6865 6c70  )..def _fsumhelp
+00001220: 6572 2878 2c20 6669 6c74 6572 293a 0d0a  er(x, filter):..
+00001230: 2020 2020 7265 7420 3d20 300d 0a20 2020      ret = 0..   
+00001240: 206c 656e 6774 6820 3d20 300d 0a20 2020   length = 0..   
+00001250: 2066 6f72 2069 2069 6e20 6e62 2e70 7261   for i in nb.pra
+00001260: 6e67 6528 6c65 6e28 7829 293a 0d0a 2020  nge(len(x)):..  
+00001270: 2020 2020 2020 6966 2066 696c 7465 725b        if filter[
+00001280: 695d 3a0d 0a20 2020 2020 2020 2020 2020  i]:..           
+00001290: 2072 6574 202b 3d20 785b 695d 0d0a 2020   ret += x[i]..  
+000012a0: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
+000012b0: 202b 3d20 310d 0a20 2020 2072 6574 7572   += 1..    retur
+000012c0: 6e20 2872 6574 2c20 6c65 6e67 7468 290d  n (ret, length).
+000012d0: 0a0d 0a0d 0a64 6566 205f 6673 756d 2878  .....def _fsum(x
+000012e0: 2c20 6669 6c74 6572 293a 0d0a 2020 2020  , filter):..    
+000012f0: 7265 7475 726e 205f 6673 756d 6865 6c70  return _fsumhelp
+00001300: 6572 2878 2c20 6669 6c74 6572 295b 305d  er(x, filter)[0]
+00001310: 0d0a 0d0a 0d0a 6465 6620 5f66 6d65 616e  ......def _fmean
+00001320: 2878 2c20 6669 6c74 6572 293a 0d0a 2020  (x, filter):..  
+00001330: 2020 2874 6f74 2c20 6e29 203d 205f 6673    (tot, n) = _fs
+00001340: 756d 6865 6c70 6572 2878 2c20 6669 6c74  umhelper(x, filt
+00001350: 6572 290d 0a20 2020 2072 6574 7572 6e20  er)..    return 
+00001360: 746f 7420 2f20 6e0d 0a0d 0a0d 0a40 6e62  tot / n......@nb
+00001370: 2e6e 6a69 7428 7061 7261 6c6c 656c 3d54  .njit(parallel=T
+00001380: 7275 6529 0d0a 6465 6620 5f66 7661 7228  rue)..def _fvar(
+00001390: 782c 2066 696c 7465 7229 3a0d 0a20 2020  x, filter):..   
+000013a0: 2061 6263 203d 2030 2e30 0d0a 2020 2020   abc = 0.0..    
+000013b0: 6c65 6e67 7468 203d 2030 0d0a 0d0a 2020  length = 0....  
+000013c0: 2020 666f 7220 6920 696e 206e 622e 7072    for i in nb.pr
+000013d0: 616e 6765 286c 656e 2878 2929 3a0d 0a20  ange(len(x)):.. 
+000013e0: 2020 2020 2020 2069 6620 6669 6c74 6572         if filter
+000013f0: 5b69 5d3a 0d0a 2020 2020 2020 2020 2020  [i]:..          
+00001400: 2020 6162 6320 2b3d 2078 5b69 5d0d 0a20    abc += x[i].. 
+00001410: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
+00001420: 6820 2b3d 2031 0d0a 0d0a 2020 2020 6d65  h += 1....    me
+00001430: 616e 203d 2061 6263 202f 206c 656e 6774  an = abc / lengt
+00001440: 680d 0a0d 0a20 2020 2072 6574 203d 2030  h....    ret = 0
+00001450: 2e30 0d0a 0d0a 2020 2020 666f 7220 6920  .0....    for i 
+00001460: 696e 206e 622e 7072 616e 6765 286c 656e  in nb.prange(len
+00001470: 2878 2929 3a0d 0a20 2020 2020 2020 2069  (x)):..        i
+00001480: 6620 6669 6c74 6572 5b69 5d3a 0d0a 2020  f filter[i]:..  
+00001490: 2020 2020 2020 2020 2020 7265 7420 2b3d            ret +=
+000014a0: 2028 785b 695d 202d 206d 6561 6e29 202a   (x[i] - mean) *
+000014b0: 2a20 320d 0a20 2020 2069 6620 6c65 6e67  * 2..    if leng
+000014c0: 7468 203e 2031 3a0d 0a20 2020 2020 2020  th > 1:..       
+000014d0: 2072 6574 7572 6e20 7265 7420 2f20 286c   return ret / (l
+000014e0: 656e 6774 6820 2d20 3129 0d0a 2020 2020  ength - 1)..    
+000014f0: 6966 206c 656e 6774 6820 3d3d 2031 3a0d  if length == 1:.
+00001500: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00001510: 6e70 2e4e 614e 0d0a 2020 2020 6966 206c  np.NaN..    if l
+00001520: 656e 6774 6820 3d3d 2030 3a0d 0a20 2020  ength == 0:..   
+00001530: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00001540: 4572 726f 7228 2254 7269 6564 2074 6f20  Error("Tried to 
+00001550: 7461 6b65 2074 6865 2076 6172 6961 6e63  take the varianc
+00001560: 6520 6f66 2061 6e20 656d 7074 7920 6172  e of an empty ar
+00001570: 7261 792e 2229 0d0a 0d0a 0d0a 6465 6620  ray.")......def 
+00001580: 5f66 7374 6428 782c 2066 696c 7465 7229  _fstd(x, filter)
+00001590: 3a0d 0a20 2020 2072 6574 7572 6e20 6d61  :..    return ma
+000015a0: 7468 2e73 7172 7428 5f66 7661 7228 782c  th.sqrt(_fvar(x,
+000015b0: 2066 696c 7465 7229 290d 0a0d 0a0d 0a23   filter))......#
+000015c0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 000015d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000015e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000015f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001600: 2d2d 2d0d 0a64 6566 2046 415f 4652 4f4d  ---..def FA_FROM
-00001610: 5f55 494e 5438 2875 696e 7438 6172 7229  _UINT8(uint8arr)
-00001620: 3a0d 0a20 2020 2022 2222 0d0a 2020 2020  :..    """..    
-00001630: 5573 6564 2069 6e20 6465 2d70 6963 6b6c  Used in de-pickl
-00001640: 696e 670d 0a20 2020 2022 2222 0d0a 2020  ing..    """..  
-00001650: 2020 7265 7475 726e 2072 632e 436f 6d70    return rc.Comp
-00001660: 7265 7373 4465 636f 6d70 7265 7373 4172  ressDecompressAr
-00001670: 7261 7973 285b 7569 6e74 3861 7272 5d2c  rays([uint8arr],
-00001680: 2031 295b 305d 0d0a 0d0a 0d0a 2320 2d2d   1)[0]......# --
+000015f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00001600: 0a64 6566 2046 415f 4652 4f4d 5f55 494e  .def FA_FROM_UIN
+00001610: 5438 2875 696e 7438 6172 7229 3a0d 0a20  T8(uint8arr):.. 
+00001620: 2020 2022 2222 0d0a 2020 2020 5573 6564     """..    Used
+00001630: 2069 6e20 6465 2d70 6963 6b6c 696e 670d   in de-pickling.
+00001640: 0a20 2020 2022 2222 0d0a 2020 2020 7265  .    """..    re
+00001650: 7475 726e 2072 632e 436f 6d70 7265 7373  turn rc.Compress
+00001660: 4465 636f 6d70 7265 7373 4172 7261 7973  DecompressArrays
+00001670: 285b 7569 6e74 3861 7272 5d2c 2031 295b  ([uint8arr], 1)[
+00001680: 305d 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d  0]......# ------
 00001690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000016a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000016b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000016c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 6465  ------------..de
-000016d0: 6620 4641 5f46 524f 4d5f 4259 5445 5354  f FA_FROM_BYTEST
-000016e0: 5249 4e47 2862 7974 6573 7472 696e 6729  RING(bytestring)
-000016f0: 3a0d 0a20 2020 2022 2222 0d0a 2020 2020  :..    """..    
-00001700: 5573 6564 2069 6e20 6465 2d70 6963 6b6c  Used in de-pickl
-00001710: 696e 6720 7768 656e 2074 6f73 7472 696e  ing when tostrin
-00001720: 6728 2920 7573 6564 2028 6375 7272 656e  g() used (curren
-00001730: 746c 7920 6469 7361 626c 6564 290d 0a20  tly disabled).. 
-00001740: 2020 2022 2222 0d0a 2020 2020 7265 7475     """..    retu
-00001750: 726e 2046 415f 4652 4f4d 5f55 494e 5438  rn FA_FROM_UINT8
-00001760: 286e 702e 6672 6f6d 6275 6666 6572 2862  (np.frombuffer(b
-00001770: 7974 6573 7472 696e 672c 2064 7479 7065  ytestring, dtype
-00001780: 3d6e 702e 7569 6e74 3829 290d 0a0d 0a0d  =np.uint8)).....
-00001790: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
+000016c0: 2d2d 2d2d 2d2d 2d2d 0d0a 6465 6620 4641  --------..def FA
+000016d0: 5f46 524f 4d5f 4259 5445 5354 5249 4e47  _FROM_BYTESTRING
+000016e0: 2862 7974 6573 7472 696e 6729 3a0d 0a20  (bytestring):.. 
+000016f0: 2020 2022 2222 0d0a 2020 2020 5573 6564     """..    Used
+00001700: 2069 6e20 6465 2d70 6963 6b6c 696e 6720   in de-pickling 
+00001710: 7768 656e 2074 6f73 7472 696e 6728 2920  when tostring() 
+00001720: 7573 6564 2028 6375 7272 656e 746c 7920  used (currently 
+00001730: 6469 7361 626c 6564 290d 0a20 2020 2022  disabled)..    "
+00001740: 2222 0d0a 2020 2020 7265 7475 726e 2046  ""..    return F
+00001750: 415f 4652 4f4d 5f55 494e 5438 286e 702e  A_FROM_UINT8(np.
+00001760: 6672 6f6d 6275 6666 6572 2862 7974 6573  frombuffer(bytes
+00001770: 7472 696e 672c 2064 7479 7065 3d6e 702e  tring, dtype=np.
+00001780: 7569 6e74 3829 290d 0a0d 0a0d 0a23 202d  uint8))......# -
+00001790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000017a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000017b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000017c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000017d0: 2d0d 0a64 6566 206c 6f67 6963 616c 5f66  -..def logical_f
-000017e0: 696e 645f 636f 6d6d 6f6e 5f74 7970 6528  ind_common_type(
-000017f0: 6172 7261 7974 7970 6573 2c20 7363 616c  arraytypes, scal
-00001800: 6172 7479 7065 732c 2073 6361 6c61 7276  artypes, scalarv
-00001810: 616c 293a 0d0a 2020 2020 2222 220d 0a20  al):..    """.. 
-00001820: 2020 2061 7373 756d 6573 206f 6e65 2073     assumes one s
-00001830: 6361 6c61 7220 616e 6420 6f6e 6520 6172  calar and one ar
-00001840: 7261 790d 0a0d 0a20 2020 2022 2222 0d0a  ray....    """..
-00001850: 2020 2020 7363 616c 6172 203d 2073 6361      scalar = sca
-00001860: 6c61 7274 7970 6573 5b30 5d0d 0a20 2020  lartypes[0]..   
-00001870: 2061 7272 6179 203d 2061 7272 6179 7479   array = arrayty
-00001880: 7065 735b 305d 0d0a 0d0a 2020 2020 756e  pes[0]....    un
-00001890: 7369 676e 6564 203d 2046 616c 7365 0d0a  signed = False..
-000018a0: 2020 2020 6973 696e 7465 6765 7220 3d20      isinteger = 
-000018b0: 4661 6c73 650d 0a0d 0a20 2020 2023 2054  False....    # T
-000018c0: 4a44 2074 6869 7320 726f 7574 696e 6520  JD this routine 
-000018d0: 6e65 6564 7320 746f 2062 6520 7265 7772  needs to be rewr
-000018e0: 6974 7465 6e0d 0a20 2020 2023 2063 616e  itten..    # can
-000018f0: 2063 6865 636b 2069 7369 6e73 7461 6e63   check isinstanc
-00001900: 6528 7363 616c 6172 2c28 6e70 2e69 6e74  e(scalar,(np.int
-00001910: 6567 6572 2c20 696e 7429 290d 0a0d 0a20  eger, int)).... 
-00001920: 2020 2023 2069 6620 7468 6973 2063 6f6d     # if this com
-00001930: 6573 2069 6e20 6173 206e 702e 696e 7436  es in as np.int6
-00001940: 3420 616e 6420 6e6f 7420 6120 6474 7970  4 and not a dtyp
-00001950: 652c 2077 6520 636f 6e76 6572 7420 746f  e, we convert to
-00001960: 2061 2064 7479 7065 0d0a 2020 2020 6966   a dtype..    if
-00001970: 206e 6f74 2068 6173 6174 7472 2873 6361   not hasattr(sca
-00001980: 6c61 722c 2022 6368 6172 2229 3a0d 0a20  lar, "char"):.. 
-00001990: 2020 2020 2020 2073 6361 6c61 7220 3d20         scalar = 
-000019a0: 6e70 2e64 7479 7065 2873 6361 6c61 7229  np.dtype(scalar)
-000019b0: 0d0a 0d0a 2020 2020 6966 2073 6361 6c61  ....    if scala
-000019c0: 722e 6368 6172 2069 6e20 4e75 6d70 7943  r.char in NumpyC
-000019d0: 6861 7254 7970 6573 2e55 6e73 6967 6e65  harTypes.Unsigne
-000019e0: 6449 6e74 6567 6572 3a0d 0a20 2020 2020  dInteger:..     
-000019f0: 2020 2075 6e73 6967 6e65 6420 3d20 5472     unsigned = Tr
-00001a00: 7565 0d0a 2020 2020 2020 2020 6973 696e  ue..        isin
-00001a10: 7465 6765 7220 3d20 5472 7565 0d0a 2020  teger = True..  
-00001a20: 2020 6966 2073 6361 6c61 722e 6368 6172    if scalar.char
-00001a30: 2069 6e20 4e75 6d70 7943 6861 7254 7970   in NumpyCharTyp
-00001a40: 6573 2e49 6e74 6567 6572 3a0d 0a20 2020  es.Integer:..   
-00001a50: 2020 2020 2069 7369 6e74 6567 6572 203d       isinteger =
-00001a60: 2054 7275 650d 0a0d 0a20 2020 2069 6620   True....    if 
-00001a70: 6e6f 7420 6973 696e 7465 6765 723a 0d0a  not isinteger:..
-00001a80: 2020 2020 2020 2020 2320 676f 2062 7920          # go by 
-00001a90: 6e75 6d70 7920 7570 7363 616c 6520 7275  numpy upscale ru
-00001aa0: 6c65 730d 0a20 2020 2020 2020 2023 204e  les..        # N
-00001ab0: 4f54 453a 2073 686f 756c 6420 636f 6e73  OTE: should cons
-00001ac0: 6964 6572 2061 6c6c 6f77 696e 6720 696e  ider allowing in
-00001ad0: 7465 6765 7220 5e20 5472 7565 202d 2d20  teger ^ True -- 
-00001ae0: 6f72 2063 6861 6e67 696e 6720 6120 626f  or changing a bo
-00001af0: 6f6c 2073 6361 6c61 7220 746f 2061 6e20  ol scalar to an 
-00001b00: 696e 740d 0a20 2020 2020 2020 2023 2070  int..        # p
-00001b10: 7269 6e74 2822 7075 6e74 696e 6720 6e6f  rint("punting no
-00001b20: 7420 696e 7465 6765 7220 7363 616c 6172  t integer scalar
-00001b30: 222c 2073 6361 6c61 7229 0d0a 2020 2020  ", scalar)..    
-00001b40: 2020 2020 7265 7475 726e 206e 702e 6669      return np.fi
-00001b50: 6e64 5f63 6f6d 6d6f 6e5f 7479 7065 2861  nd_common_type(a
-00001b60: 7272 6179 7479 7065 732c 2073 6361 6c61  rraytypes, scala
-00001b70: 7274 7970 6573 290d 0a0d 0a20 2020 2075  rtypes)....    u
-00001b80: 6e73 6967 6e65 6420 3d20 4661 6c73 650d  nsigned = False.
-00001b90: 0a20 2020 2069 7369 6e74 6567 6572 203d  .    isinteger =
-00001ba0: 2046 616c 7365 0d0a 0d0a 2020 2020 7472   False....    tr
-00001bb0: 793a 0d0a 2020 2020 2020 2020 6966 2061  y:..        if a
-00001bc0: 7272 6179 2e63 6861 7220 696e 204e 756d  rray.char in Num
-00001bd0: 7079 4368 6172 5479 7065 732e 556e 7369  pyCharTypes.Unsi
-00001be0: 676e 6564 496e 7465 6765 723a 0d0a 2020  gnedInteger:..  
-00001bf0: 2020 2020 2020 2020 2020 756e 7369 676e            unsign
-00001c00: 6564 203d 2054 7275 650d 0a20 2020 2020  ed = True..     
-00001c10: 2020 2020 2020 2069 7369 6e74 6567 6572         isinteger
-00001c20: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-00001c30: 2069 6620 6172 7261 792e 6368 6172 2069   if array.char i
-00001c40: 6e20 4e75 6d70 7943 6861 7254 7970 6573  n NumpyCharTypes
-00001c50: 2e49 6e74 6567 6572 3a0d 0a20 2020 2020  .Integer:..     
-00001c60: 2020 2020 2020 2069 7369 6e74 6567 6572         isinteger
-00001c70: 203d 2054 7275 650d 0a20 2020 2065 7863   = True..    exc
-00001c80: 6570 743a 0d0a 2020 2020 2020 2020 7061  ept:..        pa
-00001c90: 7373 0d0a 0d0a 2020 2020 2320 6966 2069  ss....    # if i
-00001ca0: 7369 6e73 7461 6e63 6528 6172 7261 792c  sinstance(array,
-00001cb0: 2069 6e74 293a 0d0a 2020 2020 2320 2020   int):..    #   
-00001cc0: 2069 7369 6e74 6567 6572 203d 2054 7275   isinteger = Tru
-00001cd0: 650d 0a0d 0a20 2020 2023 2049 4620 4152  e....    # IF AR
-00001ce0: 5241 5920 4953 2055 4e53 4947 4e45 4420  RAY IS UNSIGNED 
-00001cf0: 4259 2053 4341 4c41 5220 4953 2053 4947  BY SCALAR IS SIG
-00001d00: 4e45 4420 7570 6361 7374 0d0a 0d0a 2020  NED upcast....  
-00001d10: 2020 6966 206e 6f74 2069 7369 6e74 6567    if not isinteg
-00001d20: 6572 3a0d 0a20 2020 2020 2020 2023 2067  er:..        # g
-00001d30: 6f20 6279 206e 756d 7079 2075 7073 6361  o by numpy upsca
-00001d40: 6c65 2072 756c 6573 0d0a 2020 2020 2020  le rules..      
-00001d50: 2020 2320 4e4f 5445 3a20 7368 6f75 6c64    # NOTE: should
-00001d60: 2063 6f6e 7369 6465 7220 616c 6c6f 7769   consider allowi
-00001d70: 6e67 2069 6e74 6567 6572 205e 2054 7275  ng integer ^ Tru
-00001d80: 6520 2d2d 206f 7220 6368 616e 6769 6e67  e -- or changing
-00001d90: 2061 2062 6f6f 6c20 7363 616c 6172 2074   a bool scalar t
-00001da0: 6f20 616e 2069 6e74 0d0a 2020 2020 2020  o an int..      
-00001db0: 2020 2320 7072 696e 7428 2270 756e 7469    # print("punti
-00001dc0: 6e67 206e 6f74 2069 6e74 6567 6572 2061  ng not integer a
-00001dd0: 7272 6179 222c 2061 7272 6179 290d 0a20  rray", array).. 
-00001de0: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
-00001df0: 2e66 696e 645f 636f 6d6d 6f6e 5f74 7970  .find_common_typ
-00001e00: 6528 6172 7261 7974 7970 6573 2c20 7363  e(arraytypes, sc
-00001e10: 616c 6172 7479 7065 7329 0d0a 0d0a 2020  alartypes)....  
-00001e20: 2020 6669 6e61 6c20 3d20 4e6f 6e65 0d0a    final = None..
-00001e30: 0d0a 2020 2020 7363 616c 6172 7661 6c20  ..    scalarval 
-00001e40: 3d20 696e 7428 7363 616c 6172 7661 6c29  = int(scalarval)
-00001e50: 0d0a 0d0a 2020 2020 2320 4465 7465 726d  ....    # Determ
-00001e60: 696e 6520 7468 6520 706f 7373 6962 6c65  ine the possible
-00001e70: 2069 6e74 6567 6572 2075 7073 6361 6c69   integer upscali
-00001e80: 6e67 2062 6173 6564 206f 6e20 7468 6520  ng based on the 
-00001e90: 7363 616c 6172 2076 616c 7565 0d0a 2020  scalar value..  
-00001ea0: 2020 6966 2075 6e73 6967 6e65 643a 0d0a    if unsigned:..
-00001eb0: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
-00001ec0: 7276 616c 203c 3d20 3235 353a 0d0a 2020  rval <= 255:..  
-00001ed0: 2020 2020 2020 2020 2020 6669 6e61 6c20            final 
-00001ee0: 3d20 6e70 2e75 696e 7438 0d0a 2020 2020  = np.uint8..    
-00001ef0: 2020 2020 656c 6966 2073 6361 6c61 7276      elif scalarv
-00001f00: 616c 203c 3d20 3635 3533 353a 0d0a 2020  al <= 65535:..  
-00001f10: 2020 2020 2020 2020 2020 6669 6e61 6c20            final 
-00001f20: 3d20 6e70 2e75 696e 7431 360d 0a20 2020  = np.uint16..   
-00001f30: 2020 2020 2065 6c69 6620 7363 616c 6172       elif scalar
-00001f40: 7661 6c20 3c3d 2028 322a 2a33 3220 2d20  val <= (2**32 - 
-00001f50: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
-00001f60: 2066 696e 616c 203d 206e 702e 7569 6e74   final = np.uint
-00001f70: 3332 0d0a 2020 2020 2020 2020 656c 6966  32..        elif
-00001f80: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
-00001f90: 2a2a 3634 202d 2031 293a 0d0a 2020 2020  **64 - 1):..    
-00001fa0: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
-00001fb0: 6e70 2e75 696e 7436 340d 0a20 2020 2020  np.uint64..     
-00001fc0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00001fd0: 2020 2020 2020 6669 6e61 6c20 3d20 6e70        final = np
-00001fe0: 2e66 6c6f 6174 3634 0d0a 2020 2020 656c  .float64..    el
-00001ff0: 7365 3a0d 0a20 2020 2020 2020 2069 6620  se:..        if 
-00002000: 7363 616c 6172 7661 6c20 3e3d 202d 3132  scalarval >= -12
-00002010: 3820 616e 6420 7363 616c 6172 7661 6c20  8 and scalarval 
-00002020: 3c3d 2031 3237 3a0d 0a20 2020 2020 2020  <= 127:..       
-00002030: 2020 2020 2066 696e 616c 203d 206e 702e       final = np.
-00002040: 696e 7438 0d0a 2020 2020 2020 2020 656c  int8..        el
-00002050: 6966 2073 6361 6c61 7276 616c 203e 3d20  if scalarval >= 
-00002060: 2d33 3237 3638 2061 6e64 2073 6361 6c61  -32768 and scala
-00002070: 7276 616c 203c 3d20 3332 3736 373a 0d0a  rval <= 32767:..
-00002080: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-00002090: 6c20 3d20 6e70 2e69 6e74 3136 0d0a 2020  l = np.int16..  
-000020a0: 2020 2020 2020 656c 6966 2073 6361 6c61        elif scala
-000020b0: 7276 616c 203e 3d20 2d28 322a 2a33 3129  rval >= -(2**31)
-000020c0: 2061 6e64 2073 6361 6c61 7276 616c 203c   and scalarval <
-000020d0: 3d20 2832 2a2a 3331 202d 2031 293a 0d0a  = (2**31 - 1):..
-000020e0: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-000020f0: 6c20 3d20 6e70 2e69 6e74 3332 0d0a 2020  l = np.int32..  
-00002100: 2020 2020 2020 656c 6966 2073 6361 6c61        elif scala
-00002110: 7276 616c 203e 3d20 2d28 322a 2a36 3329  rval >= -(2**63)
-00002120: 2061 6e64 2073 6361 6c61 7276 616c 203c   and scalarval <
-00002130: 3d20 2832 2a2a 3633 202d 2031 293a 0d0a  = (2**63 - 1):..
-00002140: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-00002150: 6c20 3d20 6e70 2e69 6e74 3634 0d0a 2020  l = np.int64..  
-00002160: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00002170: 2020 2020 2020 2020 2066 696e 616c 203d           final =
-00002180: 206e 702e 666c 6f61 7436 340d 0a0d 0a20   np.float64.... 
-00002190: 2020 2066 696e 616c 203d 206e 702e 6474     final = np.dt
-000021a0: 7970 6528 6669 6e61 6c29 0d0a 0d0a 2020  ype(final)....  
-000021b0: 2020 2320 646f 206e 6f74 2061 6c6c 6f77    # do not allow
-000021c0: 2064 6f77 6e63 6173 7469 6e67 0d0a 2020   downcasting..  
-000021d0: 2020 6966 2061 7272 6179 2e6e 756d 203c    if array.num <
-000021e0: 2066 696e 616c 2e6e 756d 3a0d 0a20 2020   final.num:..   
-000021f0: 2020 2020 2023 2070 7269 6e74 2822 7265       # print("re
-00002200: 7475 726e 696e 6720 6669 6e61 6c22 2c20  turning final", 
-00002210: 6669 6e61 6c29 0d0a 2020 2020 2020 2020  final)..        
-00002220: 7265 7475 726e 2066 696e 616c 0d0a 0d0a  return final....
-00002230: 2020 2020 7265 7475 726e 2061 7272 6179      return array
-00002240: 0d0a 0d0a 2020 2020 2320 6966 2074 7970  ....    # if typ
-00002250: 6528 6172 6773 5b30 5d29 2069 6e20 5363  e(args[0]) in Sc
-00002260: 616c 6172 5479 7065 3a0d 0a20 2020 2023  alarType:..    #
-00002270: 2020 2020 7072 696e 7428 2263 6f6e 7665      print("conve
-00002280: 7274 696e 6720 6172 6732 2074 6f20 222c  rting arg2 to ",
-00002290: 2066 696e 616c 5f64 7479 7065 290d 0a20   final_dtype).. 
-000022a0: 2020 2023 2020 2020 6172 6773 5b31 5d20     #    args[1] 
-000022b0: 3d20 6172 6773 5b31 5d2e 6173 7479 7065  = args[1].astype
-000022c0: 2866 696e 616c 5f64 7479 7065 293b 0d0a  (final_dtype);..
-000022d0: 2020 2020 2320 656c 7365 3a0d 0a20 2020      # else:..   
-000022e0: 2023 2020 2020 7072 696e 7428 2263 6f6e   #    print("con
-000022f0: 7665 7274 696e 6720 6172 6731 2074 6f20  verting arg1 to 
-00002300: 222c 2066 696e 616c 5f64 7479 7065 290d  ", final_dtype).
-00002310: 0a20 2020 2023 2020 2020 6172 6773 5b30  .    #    args[0
-00002320: 5d20 3d20 6172 6773 5b30 5d2e 6173 7479  ] = args[0].asty
-00002330: 7065 2866 696e 616c 5f64 7479 7065 293b  pe(final_dtype);
-00002340: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
+000017c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a64  -------------..d
+000017d0: 6566 206c 6f67 6963 616c 5f66 696e 645f  ef logical_find_
+000017e0: 636f 6d6d 6f6e 5f74 7970 6528 6172 7261  common_type(arra
+000017f0: 7974 7970 6573 2c20 7363 616c 6172 7479  ytypes, scalarty
+00001800: 7065 732c 2073 6361 6c61 7276 616c 293a  pes, scalarval):
+00001810: 0d0a 2020 2020 2222 220d 0a20 2020 2061  ..    """..    a
+00001820: 7373 756d 6573 206f 6e65 2073 6361 6c61  ssumes one scala
+00001830: 7220 616e 6420 6f6e 6520 6172 7261 790d  r and one array.
+00001840: 0a0d 0a20 2020 2022 2222 0d0a 2020 2020  ...    """..    
+00001850: 7363 616c 6172 203d 2073 6361 6c61 7274  scalar = scalart
+00001860: 7970 6573 5b30 5d0d 0a20 2020 2061 7272  ypes[0]..    arr
+00001870: 6179 203d 2061 7272 6179 7479 7065 735b  ay = arraytypes[
+00001880: 305d 0d0a 0d0a 2020 2020 756e 7369 676e  0]....    unsign
+00001890: 6564 203d 2046 616c 7365 0d0a 2020 2020  ed = False..    
+000018a0: 6973 696e 7465 6765 7220 3d20 4661 6c73  isinteger = Fals
+000018b0: 650d 0a0d 0a20 2020 2023 2054 4a44 2074  e....    # TJD t
+000018c0: 6869 7320 726f 7574 696e 6520 6e65 6564  his routine need
+000018d0: 7320 746f 2062 6520 7265 7772 6974 7465  s to be rewritte
+000018e0: 6e0d 0a20 2020 2023 2063 616e 2063 6865  n..    # can che
+000018f0: 636b 2069 7369 6e73 7461 6e63 6528 7363  ck isinstance(sc
+00001900: 616c 6172 2c28 6e70 2e69 6e74 6567 6572  alar,(np.integer
+00001910: 2c20 696e 7429 290d 0a0d 0a20 2020 2023  , int))....    #
+00001920: 2069 6620 7468 6973 2063 6f6d 6573 2069   if this comes i
+00001930: 6e20 6173 206e 702e 696e 7436 3420 616e  n as np.int64 an
+00001940: 6420 6e6f 7420 6120 6474 7970 652c 2077  d not a dtype, w
+00001950: 6520 636f 6e76 6572 7420 746f 2061 2064  e convert to a d
+00001960: 7479 7065 0d0a 2020 2020 6966 206e 6f74  type..    if not
+00001970: 2068 6173 6174 7472 2873 6361 6c61 722c   hasattr(scalar,
+00001980: 2022 6368 6172 2229 3a0d 0a20 2020 2020   "char"):..     
+00001990: 2020 2073 6361 6c61 7220 3d20 6e70 2e64     scalar = np.d
+000019a0: 7479 7065 2873 6361 6c61 7229 0d0a 0d0a  type(scalar)....
+000019b0: 2020 2020 6966 2073 6361 6c61 722e 6368      if scalar.ch
+000019c0: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
+000019d0: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
+000019e0: 6567 6572 3a0d 0a20 2020 2020 2020 2075  eger:..        u
+000019f0: 6e73 6967 6e65 6420 3d20 5472 7565 0d0a  nsigned = True..
+00001a00: 2020 2020 2020 2020 6973 696e 7465 6765          isintege
+00001a10: 7220 3d20 5472 7565 0d0a 2020 2020 6966  r = True..    if
+00001a20: 2073 6361 6c61 722e 6368 6172 2069 6e20   scalar.char in 
+00001a30: 4e75 6d70 7943 6861 7254 7970 6573 2e49  NumpyCharTypes.I
+00001a40: 6e74 6567 6572 3a0d 0a20 2020 2020 2020  nteger:..       
+00001a50: 2069 7369 6e74 6567 6572 203d 2054 7275   isinteger = Tru
+00001a60: 650d 0a0d 0a20 2020 2069 6620 6e6f 7420  e....    if not 
+00001a70: 6973 696e 7465 6765 723a 0d0a 2020 2020  isinteger:..    
+00001a80: 2020 2020 2320 676f 2062 7920 6e75 6d70      # go by nump
+00001a90: 7920 7570 7363 616c 6520 7275 6c65 730d  y upscale rules.
+00001aa0: 0a20 2020 2020 2020 2023 204e 4f54 453a  .        # NOTE:
+00001ab0: 2073 686f 756c 6420 636f 6e73 6964 6572   should consider
+00001ac0: 2061 6c6c 6f77 696e 6720 696e 7465 6765   allowing intege
+00001ad0: 7220 5e20 5472 7565 202d 2d20 6f72 2063  r ^ True -- or c
+00001ae0: 6861 6e67 696e 6720 6120 626f 6f6c 2073  hanging a bool s
+00001af0: 6361 6c61 7220 746f 2061 6e20 696e 740d  calar to an int.
+00001b00: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
+00001b10: 2822 7075 6e74 696e 6720 6e6f 7420 696e  ("punting not in
+00001b20: 7465 6765 7220 7363 616c 6172 222c 2073  teger scalar", s
+00001b30: 6361 6c61 7229 0d0a 2020 2020 2020 2020  calar)..        
+00001b40: 7265 7475 726e 206e 702e 6669 6e64 5f63  return np.find_c
+00001b50: 6f6d 6d6f 6e5f 7479 7065 2861 7272 6179  ommon_type(array
+00001b60: 7479 7065 732c 2073 6361 6c61 7274 7970  types, scalartyp
+00001b70: 6573 290d 0a0d 0a20 2020 2075 6e73 6967  es)....    unsig
+00001b80: 6e65 6420 3d20 4661 6c73 650d 0a20 2020  ned = False..   
+00001b90: 2069 7369 6e74 6567 6572 203d 2046 616c   isinteger = Fal
+00001ba0: 7365 0d0a 0d0a 2020 2020 7472 793a 0d0a  se....    try:..
+00001bb0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
+00001bc0: 2e63 6861 7220 696e 204e 756d 7079 4368  .char in NumpyCh
+00001bd0: 6172 5479 7065 732e 556e 7369 676e 6564  arTypes.Unsigned
+00001be0: 496e 7465 6765 723a 0d0a 2020 2020 2020  Integer:..      
+00001bf0: 2020 2020 2020 756e 7369 676e 6564 203d        unsigned =
+00001c00: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
+00001c10: 2020 2069 7369 6e74 6567 6572 203d 2054     isinteger = T
+00001c20: 7275 650d 0a20 2020 2020 2020 2069 6620  rue..        if 
+00001c30: 6172 7261 792e 6368 6172 2069 6e20 4e75  array.char in Nu
+00001c40: 6d70 7943 6861 7254 7970 6573 2e49 6e74  mpyCharTypes.Int
+00001c50: 6567 6572 3a0d 0a20 2020 2020 2020 2020  eger:..         
+00001c60: 2020 2069 7369 6e74 6567 6572 203d 2054     isinteger = T
+00001c70: 7275 650d 0a20 2020 2065 7863 6570 743a  rue..    except:
+00001c80: 0d0a 2020 2020 2020 2020 7061 7373 0d0a  ..        pass..
+00001c90: 0d0a 2020 2020 2320 6966 2069 7369 6e73  ..    # if isins
+00001ca0: 7461 6e63 6528 6172 7261 792c 2069 6e74  tance(array, int
+00001cb0: 293a 0d0a 2020 2020 2320 2020 2069 7369  ):..    #    isi
+00001cc0: 6e74 6567 6572 203d 2054 7275 650d 0a0d  nteger = True...
+00001cd0: 0a20 2020 2023 2049 4620 4152 5241 5920  .    # IF ARRAY 
+00001ce0: 4953 2055 4e53 4947 4e45 4420 4259 2053  IS UNSIGNED BY S
+00001cf0: 4341 4c41 5220 4953 2053 4947 4e45 4420  CALAR IS SIGNED 
+00001d00: 7570 6361 7374 0d0a 0d0a 2020 2020 6966  upcast....    if
+00001d10: 206e 6f74 2069 7369 6e74 6567 6572 3a0d   not isinteger:.
+00001d20: 0a20 2020 2020 2020 2023 2067 6f20 6279  .        # go by
+00001d30: 206e 756d 7079 2075 7073 6361 6c65 2072   numpy upscale r
+00001d40: 756c 6573 0d0a 2020 2020 2020 2020 2320  ules..        # 
+00001d50: 4e4f 5445 3a20 7368 6f75 6c64 2063 6f6e  NOTE: should con
+00001d60: 7369 6465 7220 616c 6c6f 7769 6e67 2069  sider allowing i
+00001d70: 6e74 6567 6572 205e 2054 7275 6520 2d2d  nteger ^ True --
+00001d80: 206f 7220 6368 616e 6769 6e67 2061 2062   or changing a b
+00001d90: 6f6f 6c20 7363 616c 6172 2074 6f20 616e  ool scalar to an
+00001da0: 2069 6e74 0d0a 2020 2020 2020 2020 2320   int..        # 
+00001db0: 7072 696e 7428 2270 756e 7469 6e67 206e  print("punting n
+00001dc0: 6f74 2069 6e74 6567 6572 2061 7272 6179  ot integer array
+00001dd0: 222c 2061 7272 6179 290d 0a20 2020 2020  ", array)..     
+00001de0: 2020 2072 6574 7572 6e20 6e70 2e66 696e     return np.fin
+00001df0: 645f 636f 6d6d 6f6e 5f74 7970 6528 6172  d_common_type(ar
+00001e00: 7261 7974 7970 6573 2c20 7363 616c 6172  raytypes, scalar
+00001e10: 7479 7065 7329 0d0a 0d0a 2020 2020 6669  types)....    fi
+00001e20: 6e61 6c20 3d20 4e6f 6e65 0d0a 0d0a 2020  nal = None....  
+00001e30: 2020 7363 616c 6172 7661 6c20 3d20 696e    scalarval = in
+00001e40: 7428 7363 616c 6172 7661 6c29 0d0a 0d0a  t(scalarval)....
+00001e50: 2020 2020 2320 4465 7465 726d 696e 6520      # Determine 
+00001e60: 7468 6520 706f 7373 6962 6c65 2069 6e74  the possible int
+00001e70: 6567 6572 2075 7073 6361 6c69 6e67 2062  eger upscaling b
+00001e80: 6173 6564 206f 6e20 7468 6520 7363 616c  ased on the scal
+00001e90: 6172 2076 616c 7565 0d0a 2020 2020 6966  ar value..    if
+00001ea0: 2075 6e73 6967 6e65 643a 0d0a 2020 2020   unsigned:..    
+00001eb0: 2020 2020 6966 2073 6361 6c61 7276 616c      if scalarval
+00001ec0: 203c 3d20 3235 353a 0d0a 2020 2020 2020   <= 255:..      
+00001ed0: 2020 2020 2020 6669 6e61 6c20 3d20 6e70        final = np
+00001ee0: 2e75 696e 7438 0d0a 2020 2020 2020 2020  .uint8..        
+00001ef0: 656c 6966 2073 6361 6c61 7276 616c 203c  elif scalarval <
+00001f00: 3d20 3635 3533 353a 0d0a 2020 2020 2020  = 65535:..      
+00001f10: 2020 2020 2020 6669 6e61 6c20 3d20 6e70        final = np
+00001f20: 2e75 696e 7431 360d 0a20 2020 2020 2020  .uint16..       
+00001f30: 2065 6c69 6620 7363 616c 6172 7661 6c20   elif scalarval 
+00001f40: 3c3d 2028 322a 2a33 3220 2d20 3129 3a0d  <= (2**32 - 1):.
+00001f50: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
+00001f60: 616c 203d 206e 702e 7569 6e74 3332 0d0a  al = np.uint32..
+00001f70: 2020 2020 2020 2020 656c 6966 2073 6361          elif sca
+00001f80: 6c61 7276 616c 203c 3d20 2832 2a2a 3634  larval <= (2**64
+00001f90: 202d 2031 293a 0d0a 2020 2020 2020 2020   - 1):..        
+00001fa0: 2020 2020 6669 6e61 6c20 3d20 6e70 2e75      final = np.u
+00001fb0: 696e 7436 340d 0a20 2020 2020 2020 2065  int64..        e
+00001fc0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00001fd0: 2020 6669 6e61 6c20 3d20 6e70 2e66 6c6f    final = np.flo
+00001fe0: 6174 3634 0d0a 2020 2020 656c 7365 3a0d  at64..    else:.
+00001ff0: 0a20 2020 2020 2020 2069 6620 7363 616c  .        if scal
+00002000: 6172 7661 6c20 3e3d 202d 3132 3820 616e  arval >= -128 an
+00002010: 6420 7363 616c 6172 7661 6c20 3c3d 2031  d scalarval <= 1
+00002020: 3237 3a0d 0a20 2020 2020 2020 2020 2020  27:..           
+00002030: 2066 696e 616c 203d 206e 702e 696e 7438   final = np.int8
+00002040: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
+00002050: 6361 6c61 7276 616c 203e 3d20 2d33 3237  calarval >= -327
+00002060: 3638 2061 6e64 2073 6361 6c61 7276 616c  68 and scalarval
+00002070: 203c 3d20 3332 3736 373a 0d0a 2020 2020   <= 32767:..    
+00002080: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
+00002090: 6e70 2e69 6e74 3136 0d0a 2020 2020 2020  np.int16..      
+000020a0: 2020 656c 6966 2073 6361 6c61 7276 616c    elif scalarval
+000020b0: 203e 3d20 2d28 322a 2a33 3129 2061 6e64   >= -(2**31) and
+000020c0: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
+000020d0: 2a2a 3331 202d 2031 293a 0d0a 2020 2020  **31 - 1):..    
+000020e0: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
+000020f0: 6e70 2e69 6e74 3332 0d0a 2020 2020 2020  np.int32..      
+00002100: 2020 656c 6966 2073 6361 6c61 7276 616c    elif scalarval
+00002110: 203e 3d20 2d28 322a 2a36 3329 2061 6e64   >= -(2**63) and
+00002120: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
+00002130: 2a2a 3633 202d 2031 293a 0d0a 2020 2020  **63 - 1):..    
+00002140: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
+00002150: 6e70 2e69 6e74 3634 0d0a 2020 2020 2020  np.int64..      
+00002160: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00002170: 2020 2020 2066 696e 616c 203d 206e 702e       final = np.
+00002180: 666c 6f61 7436 340d 0a0d 0a20 2020 2066  float64....    f
+00002190: 696e 616c 203d 206e 702e 6474 7970 6528  inal = np.dtype(
+000021a0: 6669 6e61 6c29 0d0a 0d0a 2020 2020 2320  final)....    # 
+000021b0: 646f 206e 6f74 2061 6c6c 6f77 2064 6f77  do not allow dow
+000021c0: 6e63 6173 7469 6e67 0d0a 2020 2020 6966  ncasting..    if
+000021d0: 2061 7272 6179 2e6e 756d 203c 2066 696e   array.num < fin
+000021e0: 616c 2e6e 756d 3a0d 0a20 2020 2020 2020  al.num:..       
+000021f0: 2023 2070 7269 6e74 2822 7265 7475 726e   # print("return
+00002200: 696e 6720 6669 6e61 6c22 2c20 6669 6e61  ing final", fina
+00002210: 6c29 0d0a 2020 2020 2020 2020 7265 7475  l)..        retu
+00002220: 726e 2066 696e 616c 0d0a 0d0a 2020 2020  rn final....    
+00002230: 7265 7475 726e 2061 7272 6179 0d0a 0d0a  return array....
+00002240: 2020 2020 2320 6966 2074 7970 6528 6172      # if type(ar
+00002250: 6773 5b30 5d29 2069 6e20 5363 616c 6172  gs[0]) in Scalar
+00002260: 5479 7065 3a0d 0a20 2020 2023 2020 2020  Type:..    #    
+00002270: 7072 696e 7428 2263 6f6e 7665 7274 696e  print("convertin
+00002280: 6720 6172 6732 2074 6f20 222c 2066 696e  g arg2 to ", fin
+00002290: 616c 5f64 7479 7065 290d 0a20 2020 2023  al_dtype)..    #
+000022a0: 2020 2020 6172 6773 5b31 5d20 3d20 6172      args[1] = ar
+000022b0: 6773 5b31 5d2e 6173 7479 7065 2866 696e  gs[1].astype(fin
+000022c0: 616c 5f64 7479 7065 293b 0d0a 2020 2020  al_dtype);..    
+000022d0: 2320 656c 7365 3a0d 0a20 2020 2023 2020  # else:..    #  
+000022e0: 2020 7072 696e 7428 2263 6f6e 7665 7274    print("convert
+000022f0: 696e 6720 6172 6731 2074 6f20 222c 2066  ing arg1 to ", f
+00002300: 696e 616c 5f64 7479 7065 290d 0a20 2020  inal_dtype)..   
+00002310: 2023 2020 2020 6172 6773 5b30 5d20 3d20   #    args[0] = 
+00002320: 6172 6773 5b30 5d2e 6173 7479 7065 2866  args[0].astype(f
+00002330: 696e 616c 5f64 7479 7065 293b 0d0a 0d0a  inal_dtype);....
+00002340: 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ..# ------------
 00002350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002380: 2d2d 2d2d 2d2d 0d0a 6465 6620 5f41 5354  ------..def _AST
-00002390: 5950 4528 7365 6c66 2c20 6474 7970 6529  YPE(self, dtype)
-000023a0: 3a0d 0a20 2020 2022 2222 696e 7465 726e  :..    """intern
-000023b0: 616c 2063 616c 6c20 6672 6f6d 2061 7272  al call from arr
-000023c0: 6179 5f75 6675 6e63 2074 6f20 636f 6e76  ay_ufunc to conv
-000023d0: 6572 7420 6172 7261 7973 2e20 2072 6574  ert arrays.  ret
-000023e0: 7572 6e73 206e 756d 7079 2061 7272 6179  urns numpy array
-000023f0: 7322 2222 0d0a 2020 2020 2320 7265 7475  s"""..    # retu
-00002400: 726e 2073 656c 662e 6173 7479 7065 2864  rn self.astype(d
-00002410: 7479 7065 290d 0a20 2020 2074 6f5f 6e75  type)..    to_nu
-00002420: 6d20 3d20 6474 7970 652e 6e75 6d0d 0a20  m = dtype.num.. 
-00002430: 2020 2069 6620 7365 6c66 2e64 7479 7065     if self.dtype
-00002440: 2e6e 756d 203c 3d20 3133 2061 6e64 2074  .num <= 13 and t
-00002450: 6f5f 6e75 6d20 3c3d 2031 333a 0d0a 2020  o_num <= 13:..  
-00002460: 2020 2020 2020 6966 2046 6173 7441 7272        if FastArr
-00002470: 6179 2e53 6166 6543 6f6e 7665 7273 696f  ay.SafeConversio
-00002480: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
-00002490: 2023 2070 6572 666f 726d 2061 2073 6166   # perform a saf
-000024a0: 6520 636f 6e76 6572 7369 6f6e 2075 6e64  e conversion und
-000024b0: 6572 7374 616e 6469 6e67 2073 656e 7469  erstanding senti
-000024c0: 6e65 6c73 0d0a 2020 2020 2020 2020 2020  nels..          
-000024d0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-000024e0: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
-000024f0: 2e5f 4153 5f46 415f 5459 5045 2873 656c  ._AS_FA_TYPE(sel
-00002500: 662c 2074 6f5f 6e75 6d29 2e5f 6e70 0d0a  f, to_num)._np..
-00002510: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00002520: 2020 2020 2020 2020 2020 2023 2070 6572             # per
-00002530: 666f 726d 2075 6e73 6166 6520 636f 6e76  form unsafe conv
-00002540: 6572 7369 6f6e 204e 4f54 2075 6e64 6572  ersion NOT under
-00002550: 7374 616e 6469 6e67 2073 656e 7469 6e65  standing sentine
-00002560: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
-00002570: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
-00002580: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-00002590: 4153 5f46 415f 5459 5045 5f55 4e53 4146  AS_FA_TYPE_UNSAF
-000025a0: 4528 7365 6c66 2c20 746f 5f6e 756d 292e  E(self, to_num).
-000025b0: 5f6e 700d 0a0d 0a20 2020 2072 6574 7572  _np....    retur
-000025c0: 6e20 7365 6c66 2e61 7374 7970 6528 6474  n self.astype(dt
-000025d0: 7970 6529 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ype)......# ----
+00002380: 2d2d 0d0a 6465 6620 5f41 5354 5950 4528  --..def _ASTYPE(
+00002390: 7365 6c66 2c20 6474 7970 6529 3a0d 0a20  self, dtype):.. 
+000023a0: 2020 2022 2222 696e 7465 726e 616c 2063     """internal c
+000023b0: 616c 6c20 6672 6f6d 2061 7272 6179 5f75  all from array_u
+000023c0: 6675 6e63 2074 6f20 636f 6e76 6572 7420  func to convert 
+000023d0: 6172 7261 7973 2e20 2072 6574 7572 6e73  arrays.  returns
+000023e0: 206e 756d 7079 2061 7272 6179 7322 2222   numpy arrays"""
+000023f0: 0d0a 2020 2020 2320 7265 7475 726e 2073  ..    # return s
+00002400: 656c 662e 6173 7479 7065 2864 7479 7065  elf.astype(dtype
+00002410: 290d 0a20 2020 2074 6f5f 6e75 6d20 3d20  )..    to_num = 
+00002420: 6474 7970 652e 6e75 6d0d 0a20 2020 2069  dtype.num..    i
+00002430: 6620 7365 6c66 2e64 7479 7065 2e6e 756d  f self.dtype.num
+00002440: 203c 3d20 3133 2061 6e64 2074 6f5f 6e75   <= 13 and to_nu
+00002450: 6d20 3c3d 2031 333a 0d0a 2020 2020 2020  m <= 13:..      
+00002460: 2020 6966 2046 6173 7441 7272 6179 2e53    if FastArray.S
+00002470: 6166 6543 6f6e 7665 7273 696f 6e73 3a0d  afeConversions:.
+00002480: 0a20 2020 2020 2020 2020 2020 2023 2070  .            # p
+00002490: 6572 666f 726d 2061 2073 6166 6520 636f  erform a safe co
+000024a0: 6e76 6572 7369 6f6e 2075 6e64 6572 7374  nversion underst
+000024b0: 616e 6469 6e67 2073 656e 7469 6e65 6c73  anding sentinels
+000024c0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000024d0: 7475 726e 2054 7970 6552 6567 6973 7465  turn TypeRegiste
+000024e0: 722e 4d61 7468 4c65 6467 6572 2e5f 4153  r.MathLedger._AS
+000024f0: 5f46 415f 5459 5045 2873 656c 662c 2074  _FA_TYPE(self, t
+00002500: 6f5f 6e75 6d29 2e5f 6e70 0d0a 2020 2020  o_num)._np..    
+00002510: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00002520: 2020 2020 2020 2023 2070 6572 666f 726d         # perform
+00002530: 2075 6e73 6166 6520 636f 6e76 6572 7369   unsafe conversi
+00002540: 6f6e 204e 4f54 2075 6e64 6572 7374 616e  on NOT understan
+00002550: 6469 6e67 2073 656e 7469 6e65 6c73 0d0a  ding sentinels..
+00002560: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002570: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
+00002580: 4d61 7468 4c65 6467 6572 2e5f 4153 5f46  MathLedger._AS_F
+00002590: 415f 5459 5045 5f55 4e53 4146 4528 7365  A_TYPE_UNSAFE(se
+000025a0: 6c66 2c20 746f 5f6e 756d 292e 5f6e 700d  lf, to_num)._np.
+000025b0: 0a0d 0a20 2020 2072 6574 7572 6e20 7365  ...    return se
+000025c0: 6c66 2e61 7374 7970 6528 6474 7970 6529  lf.astype(dtype)
+000025d0: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
 000025e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000025f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002610: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2d2d  ----------..# --
+00002610: 2d2d 2d2d 2d2d 0d0a 2320 2d2d 2d2d 2d2d  ------..# ------
 00002620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 636c  ------------..cl
-00002660: 6173 7320 4661 7374 4172 7261 7928 6e70  ass FastArray(np
-00002670: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
-00002680: 2222 220d 0a0d 0a20 2020 2041 2060 4661  """....    A `Fa
-00002690: 7374 4172 7261 7960 2069 7320 6120 312d  stArray` is a 1-
-000026a0: 6469 6d65 6e73 696f 6e61 6c20 6172 7261  dimensional arra
-000026b0: 7920 6f66 2069 7465 6d73 2074 6861 7420  y of items that 
-000026c0: 6172 6520 7468 6520 7361 6d65 2064 6174  are the same dat
-000026d0: 6120 7479 7065 2e0d 0a0d 0a20 2020 2042  a type.....    B
-000026e0: 6563 6175 7365 2069 7427 7320 6120 7375  ecause it's a su
-000026f0: 6263 6c61 7373 206f 6620 4e75 6d50 7927  bclass of NumPy'
-00002700: 7320 606e 756d 7079 2e6e 6461 7272 6179  s `numpy.ndarray
-00002710: 602c 2061 6c6c 2060 606e 6461 7272 6179  `, all ``ndarray
-00002720: 6060 2066 756e 6374 696f 6e73 2061 6e64  `` functions and
-00002730: 2061 7474 7269 6275 7465 730d 0a20 2020   attributes..   
-00002740: 2063 616e 2062 6520 7573 6564 2077 6974   can be used wit
-00002750: 6820 6046 6173 7441 7272 6179 6020 6f62  h `FastArray` ob
-00002760: 6a65 6374 732e 2048 6f77 6576 6572 2c20  jects. However, 
-00002770: 5269 7074 6162 6c65 206f 7074 696d 697a  Riptable optimiz
-00002780: 6573 206d 616e 7920 6f66 204e 756d 5079  es many of NumPy
-00002790: 2773 0d0a 2020 2020 6675 6e63 7469 6f6e  's..    function
-000027a0: 7320 746f 206d 616b 6520 7468 656d 2066  s to make them f
-000027b0: 6173 7465 7220 616e 6420 6d6f 7265 206d  aster and more m
-000027c0: 656d 6f72 792d 6566 6669 6369 656e 742e  emory-efficient.
-000027d0: 2052 6970 7461 626c 6520 6861 7320 616c   Riptable has al
-000027e0: 736f 2061 6464 6564 0d0a 2020 2020 736f  so added..    so
-000027f0: 6d65 206d 6574 686f 6473 2e0d 0a0d 0a20  me methods..... 
-00002800: 2020 2060 4661 7374 4172 7261 7960 206f     `FastArray` o
-00002810: 626a 6563 7473 2077 6974 6820 6d6f 7265  bjects with more
-00002820: 2074 6861 6e20 3120 6469 6d65 6e73 696f   than 1 dimensio
-00002830: 6e20 6172 6520 6e6f 7420 7375 7070 6f72  n are not suppor
-00002840: 7465 642e 0d0a 0d0a 2020 2020 5365 6520  ted.....    See 
-00002850: 604e 756d 5079 2773 0d0a 2020 2020 646f  `NumPy's..    do
-00002860: 6373 203c 6874 7470 733a 2f2f 6e75 6d70  cs <https://nump
-00002870: 792e 6f72 672f 6465 7664 6f63 732f 7265  y.org/devdocs/re
-00002880: 6665 7265 6e63 652f 6765 6e65 7261 7465  ference/generate
-00002890: 642f 6e75 6d70 792e 6e64 6172 7261 792e  d/numpy.ndarray.
-000028a0: 6874 6d6c 3e60 5f20 666f 720d 0a20 2020  html>`_ for..   
-000028b0: 2064 6574 6169 6c73 206f 6e20 616c 6c20   details on all 
-000028c0: 6060 6e64 6172 7261 7960 6020 6d65 7468  ``ndarray`` meth
-000028d0: 6f64 7320 616e 6420 6174 7472 6962 7574  ods and attribut
-000028e0: 6573 2e0d 0a0d 0a20 2020 2050 6172 616d  es.....    Param
-000028f0: 6574 6572 730d 0a20 2020 202d 2d2d 2d2d  eters..    -----
-00002900: 2d2d 2d2d 2d0d 0a20 2020 2061 7272 203a  -----..    arr :
-00002910: 2061 7272 6179 2c20 6974 6572 6162 6c65   array, iterable
-00002920: 2c20 6f72 2073 6361 6c61 7220 7661 6c75  , or scalar valu
-00002930: 650d 0a20 2020 2020 2020 2043 6f6e 7461  e..        Conta
-00002940: 696e 7320 6461 7461 2074 6f20 6265 2073  ins data to be s
-00002950: 746f 7265 6420 696e 2074 6865 2060 4661  tored in the `Fa
-00002960: 7374 4172 7261 7960 2e0d 0a0d 0a20 2020  stArray`.....   
-00002970: 202a 2a6b 7761 7267 730d 0a20 2020 2020   **kwargs..     
-00002980: 2020 2041 6464 6974 696f 6e61 6c20 6b65     Additional ke
-00002990: 7977 6f72 6420 6172 6775 6d65 6e74 7320  yword arguments 
-000029a0: 746f 2062 6520 7061 7373 6564 2074 6f20  to be passed to 
-000029b0: 7468 6520 6675 6e63 7469 6f6e 2e0d 0a0d  the function....
-000029c0: 0a20 2020 204e 6f74 6573 0d0a 2020 2020  .    Notes..    
-000029d0: 2d2d 2d2d 2d0d 0a20 2020 2054 6f20 696d  -----..    To im
-000029e0: 7072 6f76 6520 7065 7266 6f72 6d61 6e63  prove performanc
-000029f0: 652c 2060 4661 7374 4172 7261 7960 206f  e, `FastArray` o
-00002a00: 626a 6563 7473 2074 616b 6520 6f76 6572  bjects take over
-00002a10: 2073 6f6d 6520 6f66 204e 756d 5079 2773   some of NumPy's
-00002a20: 2075 6e69 7665 7273 616c 2066 756e 6374   universal funct
-00002a30: 696f 6e73 0d0a 2020 2020 2875 6675 6e63  ions..    (ufunc
-00002a40: 7329 2c20 7573 6520 6172 7261 7920 7265  s), use array re
-00002a50: 6379 636c 696e 6720 616e 6420 6d75 6c74  cycling and mult
-00002a60: 6970 6c65 2074 6872 6561 6473 2c20 616e  iple threads, an
-00002a70: 6420 7061 7373 2063 6572 7461 696e 206d  d pass certain m
-00002a80: 6574 686f 6420 6361 6c6c 7320 746f 0d0a  ethod calls to..
-00002a90: 2020 2020 6042 6f74 746c 656e 6563 6b20      `Bottleneck 
-00002aa0: 3c68 7474 7073 3a2f 2f6b 7767 6f6f 646d  <https://kwgoodm
-00002ab0: 616e 2e67 6974 6875 622e 696f 2f62 6f74  an.github.io/bot
-00002ac0: 746c 656e 6563 6b2d 646f 632f 696e 6465  tleneck-doc/inde
-00002ad0: 782e 6874 6d6c 3e60 5f2e 0d0a 0d0a 2020  x.html>`_.....  
-00002ae0: 2020 4e6f 7465 2074 6861 7420 7768 656e    Note that when
-00002af0: 6576 6572 2052 6970 7461 626c 6520 6861  ever Riptable ha
-00002b00: 7320 696d 706c 656d 656e 7465 6420 6974  s implemented it
-00002b10: 7320 6f77 6e20 7665 7273 696f 6e20 6f66  s own version of
-00002b20: 0d0a 2020 2020 616e 2065 7869 7374 696e  ..    an existin
-00002b30: 6720 4e75 6d50 7920 6d65 7468 6f64 2c20  g NumPy method, 
-00002b40: 6120 6361 6c6c 2074 6f20 7468 6520 4e75  a call to the Nu
-00002b50: 6d50 7920 6d65 7468 6f64 2072 6573 756c  mPy method resul
-00002b60: 7473 2069 6e20 6120 6361 6c6c 2074 6f20  ts in a call to 
-00002b70: 7468 650d 0a20 2020 206f 7074 696d 697a  the..    optimiz
-00002b80: 6564 2052 6970 7461 626c 6520 7665 7273  ed Riptable vers
-00002b90: 696f 6e20 696e 7374 6561 642e 2057 6520  ion instead. We 
-00002ba0: 656e 636f 7572 6167 6520 7573 6572 7320  encourage users 
-00002bb0: 746f 2064 6972 6563 746c 7920 6361 6c6c  to directly call
-00002bc0: 2074 6865 2052 6970 7461 626c 650d 0a20   the Riptable.. 
-00002bd0: 2020 206d 6574 686f 6420 696e 206f 7264     method in ord
-00002be0: 6572 2074 6f20 6176 6f69 6420 616e 7920  er to avoid any 
-00002bf0: 636f 6e66 7573 696f 6e20 6173 2074 6f20  confusion as to 
-00002c00: 7768 6174 206d 6574 686f 6420 6973 2061  what method is a
-00002c10: 6374 7561 6c6c 7920 6265 696e 6720 6361  ctually being ca
-00002c20: 6c6c 6564 2e0d 0a0d 0a20 2020 2053 6565  lled.....    See
-00002c30: 2074 6865 206c 6973 7420 6f66 2060 4e75   the list of `Nu
-00002c40: 6d50 7920 4d65 7468 6f64 7320 4f70 7469  mPy Methods Opti
-00002c50: 6d69 7a65 6420 6279 2052 6970 7461 626c  mized by Riptabl
-00002c60: 6520 666f 7220 4661 7374 4172 7261 7973  e for FastArrays
-00002c70: 0d0a 2020 2020 3c68 7474 7073 3a74 7574  ..    <https:tut
-00002c80: 6f72 6961 6c5f 6e75 6d70 795f 7274 2e68  orial_numpy_rt.h
-00002c90: 746d 6c3e 605f 2e0d 0a0d 0a0d 0a20 2020  tml>`_.......   
-00002ca0: 2045 7861 6d70 6c65 730d 0a20 2020 202d   Examples..    -
-00002cb0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 202a 2a43  -------..    **C
-00002cc0: 6f6e 7374 7275 6374 2061 2046 6173 7441  onstruct a FastA
-00002cd0: 7272 6179 2a2a 0d0a 0d0a 2020 2020 5061  rray**....    Pa
-00002ce0: 7373 2061 206c 6973 7420 746f 2074 6865  ss a list to the
-00002cf0: 2063 6f6e 7374 7275 6374 6f72 3a0d 0a0d   constructor:...
-00002d00: 0a20 2020 203e 3e3e 2072 742e 4661 7374  .    >>> rt.Fast
-00002d10: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-00002d20: 342c 2035 5d29 0d0a 2020 2020 4661 7374  4, 5])..    Fast
-00002d30: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-00002d40: 342c 2035 5d29 0d0a 0d0a 2020 2020 3e3e  4, 5])....    >>
-00002d50: 3e20 234e 4f54 453a 2072 742e 4641 2061  > #NOTE: rt.FA a
-00002d60: 6c73 6f20 776f 726b 732e 0d0a 2020 2020  lso works...    
-00002d70: 3e3e 3e20 7274 2e46 4128 5b31 2e30 2c20  >>> rt.FA([1.0, 
-00002d80: 322e 302c 2033 2e30 2c20 342e 302c 2035  2.0, 3.0, 4.0, 5
-00002d90: 2e30 5d29 0d0a 2020 2020 4661 7374 4172  .0])..    FastAr
-00002da0: 7261 7928 5b31 2e2c 2032 2e2c 2033 2e2c  ray([1., 2., 3.,
-00002db0: 2034 2e2c 2035 2e5d 290d 0a0d 0a20 2020   4., 5.])....   
-00002dc0: 204f 7220 7573 6520 6120 7574 696c 6974   Or use a utilit
-00002dd0: 7920 6675 6e63 7469 6f6e 3a0d 0a0d 0a20  y function:.... 
-00002de0: 2020 203e 3e3e 2072 742e 6675 6c6c 2831     >>> rt.full(1
-00002df0: 302c 2030 2e37 290d 0a20 2020 2046 6173  0, 0.7)..    Fas
-00002e00: 7441 7272 6179 285b 302e 372c 2030 2e37  tArray([0.7, 0.7
-00002e10: 2c20 302e 372c 2030 2e37 2c20 302e 372c  , 0.7, 0.7, 0.7,
-00002e20: 2030 2e37 2c20 302e 372c 2030 2e37 2c20   0.7, 0.7, 0.7, 
-00002e30: 302e 372c 2030 2e37 5d29 0d0a 0d0a 2020  0.7, 0.7])....  
-00002e40: 2020 3e3e 3e20 7274 2e61 7261 6e67 6528    >>> rt.arange(
-00002e50: 3130 290d 0a20 2020 2046 6173 7441 7272  10)..    FastArr
-00002e60: 6179 285b 302c 2031 2c20 322c 2033 2c20  ay([0, 1, 2, 3, 
-00002e70: 342c 2035 2c20 362c 2037 2c20 382c 2039  4, 5, 6, 7, 8, 9
-00002e80: 5d29 0d0a 0d0a 2020 2020 596f 7520 6361  ])....    You ca
-00002e90: 6e20 6f70 7469 6f6e 616c 6c79 2073 7065  n optionally spe
-00002ea0: 6369 6679 2061 2064 6174 6120 7479 7065  cify a data type
-00002eb0: 3a0d 0a0d 0a20 2020 203e 3e3e 2078 203d  :....    >>> x =
-00002ec0: 2072 742e 4661 7374 4172 7261 7928 5b33   rt.FastArray([3
-00002ed0: 2c20 362c 2031 305d 2c20 2064 7479 7065  , 6, 10],  dtype
-00002ee0: 203d 2072 742e 666c 6f61 7436 3429 0d0a   = rt.float64)..
-00002ef0: 2020 2020 3e3e 3e20 782c 2078 2e64 7479      >>> x, x.dty
-00002f00: 7065 0d0a 2020 2020 2846 6173 7441 7272  pe..    (FastArr
-00002f10: 6179 285b 2033 2e2c 2020 362e 2c20 3130  ay([ 3.,  6., 10
-00002f20: 2e5d 292c 2064 7479 7065 2827 666c 6f61  .]), dtype('floa
-00002f30: 7436 3427 2929 0d0a 0d0a 2020 2020 3e3e  t64'))....    >>
-00002f40: 3e20 2320 5573 696e 6720 6120 7374 7269  > # Using a stri
-00002f50: 6e67 2073 686f 7274 6375 743a 0d0a 2020  ng shortcut:..  
-00002f60: 2020 3e3e 3e20 7820 3d20 7274 2e46 6173    >>> x = rt.Fas
-00002f70: 7441 7272 6179 285b 332c 362c 3130 5d2c  tArray([3,6,10],
-00002f80: 2020 6474 7970 6520 3d20 2766 6c6f 6174    dtype = 'float
-00002f90: 3634 2729 0d0a 2020 2020 3e3e 3e20 782c  64')..    >>> x,
-00002fa0: 2078 2e64 7479 7065 0d0a 2020 2020 2846   x.dtype..    (F
-00002fb0: 6173 7441 7272 6179 285b 2033 2e2c 2020  astArray([ 3.,  
-00002fc0: 362e 2c20 3130 2e5d 292c 2064 7479 7065  6., 10.]), dtype
-00002fd0: 2827 666c 6f61 7436 3427 2929 0d0a 0d0a  ('float64'))....
-00002fe0: 2020 2020 4279 2064 6566 6175 6c74 2c20      By default, 
-00002ff0: 6368 6172 6163 7465 7273 2061 7265 2073  characters are s
-00003000: 746f 7265 6420 6173 2062 7974 6520 7374  tored as byte st
-00003010: 7269 6e67 732e 2057 6865 6e20 6060 756e  rings. When ``un
-00003020: 6963 6f64 653d 5472 7565 6060 2c0d 0a20  icode=True``,.. 
-00003030: 2020 2074 6865 2060 4661 7374 4172 7261     the `FastArra
-00003040: 7960 2061 6c6c 6f77 7320 556e 6963 6f64  y` allows Unicod
-00003050: 6520 6368 6172 6163 7465 7273 2e0d 0a0d  e characters....
-00003060: 0a20 2020 203e 3e3e 2072 742e 4641 286c  .    >>> rt.FA(l
-00003070: 6973 7428 2761 6263 2729 2c20 756e 6963  ist('abc'), unic
-00003080: 6f64 653d 5472 7565 290d 0a20 2020 2046  ode=True)..    F
-00003090: 6173 7441 7272 6179 285b 2761 272c 2027  astArray(['a', '
-000030a0: 6227 2c20 2763 275d 2c20 6474 7970 653d  b', 'c'], dtype=
-000030b0: 273c 5531 2729 0d0a 0d0a 2020 2020 546f  '<U1')....    To
-000030c0: 2063 6f6e 7665 7274 2061 6e20 6578 6973   convert an exis
-000030d0: 7469 6e67 204e 756d 5079 2061 7272 6179  ting NumPy array
-000030e0: 2c20 7573 6520 7468 6520 6046 6173 7441  , use the `FastA
-000030f0: 7272 6179 6020 636f 6e73 7472 7563 746f  rray` constructo
-00003100: 722e 0d0a 0d0a 2020 2020 3e3e 3e20 6e70  r.....    >>> np
-00003110: 5f61 7272 203d 206e 702e 6172 7261 7928  _arr = np.array(
-00003120: 5b31 2c20 322c 2033 5d29 0d0a 2020 2020  [1, 2, 3])..    
-00003130: 3e3e 3e20 7274 2e46 4128 6e70 5f61 7272  >>> rt.FA(np_arr
-00003140: 290d 0a20 2020 2046 6173 7441 7272 6179  )..    FastArray
-00003150: 285b 312c 2032 2c20 335d 290d 0a0d 0a20  ([1, 2, 3]).... 
-00003160: 2020 2054 6f20 7669 6577 2074 6865 204e     To view the N
-00003170: 756d 5079 2061 7272 6179 2061 7320 6120  umPy array as a 
-00003180: 6046 6173 7441 7272 6179 6020 2877 6869  `FastArray` (whi
-00003190: 6368 2069 7320 736c 6967 6874 6c79 206c  ch is slightly l
-000031a0: 6573 7320 6578 7065 6e73 6976 6520 7468  ess expensive th
-000031b0: 616e 0d0a 2020 2020 7573 696e 6720 7468  an..    using th
-000031c0: 6520 636f 6e73 7472 7563 746f 7229 2c20  e constructor), 
-000031d0: 7573 6520 7468 6520 6076 6965 7760 206d  use the `view` m
-000031e0: 6574 686f 642e 0d0a 0d0a 2020 2020 3e3e  ethod.....    >>
-000031f0: 3e20 6661 203d 206e 705f 6172 722e 7669  > fa = np_arr.vi
-00003200: 6577 2846 4129 0d0a 2020 2020 3e3e 3e20  ew(FA)..    >>> 
-00003210: 6661 0d0a 2020 2020 4661 7374 4172 7261  fa..    FastArra
-00003220: 7928 5b31 2c20 322c 2033 5d29 0d0a 0d0a  y([1, 2, 3])....
-00003230: 2020 2020 546f 2076 6965 7720 6974 2061      To view it a
-00003240: 7320 6120 4e75 6d50 7920 6172 7261 7920  s a NumPy array 
-00003250: 6167 6169 6e3a 0d0a 0d0a 2020 2020 3e3e  again:....    >>
-00003260: 3e20 6661 2e76 6965 7728 6e70 2e6e 6461  > fa.view(np.nda
-00003270: 7272 6179 290d 0a20 2020 2061 7272 6179  rray)..    array
-00003280: 285b 312c 2032 2c20 335d 290d 0a0d 0a20  ([1, 2, 3]).... 
-00003290: 2020 203e 3e3e 2023 2041 6c74 6572 6e61     >>> # Alterna
-000032a0: 7469 7665 6c79 3a0d 0a20 2020 203e 3e3e  tively:..    >>>
-000032b0: 2066 612e 5f6e 700d 0a20 2020 2061 7272   fa._np..    arr
-000032c0: 6179 285b 312c 2032 2c20 335d 290d 0a0d  ay([1, 2, 3])...
-000032d0: 0a20 2020 202a 2a47 6574 2061 2053 7562  .    **Get a Sub
-000032e0: 7365 7420 6f66 2061 2046 6173 7441 7272  set of a FastArr
-000032f0: 6179 2a2a 0d0a 0d0a 2020 2020 596f 7520  ay**....    You 
-00003300: 6361 6e20 7573 6520 7374 616e 6461 7264  can use standard
-00003310: 2050 7974 686f 6e20 736c 6963 696e 6720   Python slicing 
-00003320: 6e6f 7461 7469 6f6e 206f 7220 6661 6e63  notation or fanc
-00003330: 7920 696e 6465 7869 6e67 2074 6f20 6163  y indexing to ac
-00003340: 6365 7373 2061 0d0a 2020 2020 7375 6273  cess a..    subs
-00003350: 6574 206f 6620 6120 6046 6173 7441 7272  et of a `FastArr
-00003360: 6179 602e 0d0a 0d0a 2020 2020 3e3e 3e20  ay`.....    >>> 
-00003370: 2320 4372 6561 7465 2061 2046 6173 7441  # Create a FastA
-00003380: 7272 6179 3a0d 0a20 2020 203e 3e3e 2061  rray:..    >>> a
-00003390: 7272 6179 203d 2072 742e 6172 616e 6765  rray = rt.arange
-000033a0: 2838 292a 2a32 0d0a 2020 2020 3e3e 3e20  (8)**2..    >>> 
-000033b0: 6172 7261 790d 0a20 2020 2046 6173 7441  array..    FastA
-000033c0: 7272 6179 285b 302c 2031 2c20 342c 2039  rray([0, 1, 4, 9
-000033d0: 2c20 3136 2c20 3235 2c20 3336 2c20 3439  , 16, 25, 36, 49
-000033e0: 5d29 0d0a 2020 2020 3e3e 3e20 2320 5573  ])..    >>> # Us
-000033f0: 6520 5079 7468 6f6e 2073 6c69 6369 6e67  e Python slicing
-00003400: 2074 6f20 6765 7420 656c 656d 656e 7473   to get elements
-00003410: 2032 2c20 332c 2061 6e64 2034 3a0d 0a20   2, 3, and 4:.. 
-00003420: 2020 203e 3e3e 2061 7272 6179 5b32 3a35     >>> array[2:5
-00003430: 5d0d 0a20 2020 2046 6173 7441 7272 6179  ]..    FastArray
-00003440: 285b 342c 2039 2c20 3136 5d29 0d0a 0d0a  ([4, 9, 16])....
-00003450: 2020 2020 3e3e 3e20 2320 5573 6520 6661      >>> # Use fa
-00003460: 6e63 7920 696e 6465 7869 6e67 2074 6f20  ncy indexing to 
-00003470: 6765 7420 656c 656d 656e 7473 2032 2c20  get elements 2, 
-00003480: 342c 2061 6e64 2031 2028 696e 2074 6861  4, and 1 (in tha
-00003490: 7420 6f72 6465 7229 3a0d 0a20 2020 203e  t order):..    >
-000034a0: 3e3e 2061 7272 6179 5b5b 322c 2034 2c20  >> array[[2, 4, 
-000034b0: 315d 5d0d 0a20 2020 2046 6173 7441 7272  1]]..    FastArr
-000034c0: 6179 285b 342c 2031 362c 2031 5d29 0d0a  ay([4, 16, 1])..
-000034d0: 0d0a 2020 2020 466f 7220 6d6f 7265 2064  ..    For more d
-000034e0: 6574 6169 6c73 2c20 7365 6520 7468 6520  etails, see the 
-000034f0: 6578 616d 706c 6573 2066 6f72 2031 2d64  examples for 1-d
-00003500: 696d 656e 7369 6f6e 616c 2061 7272 6179  imensional array
-00003510: 7320 696e 204e 756d 5079 2773 2064 6f63  s in NumPy's doc
-00003520: 733a 0d0a 2020 2020 6049 6e64 6578 696e  s:..    `Indexin
-00003530: 6720 6f6e 206e 6461 7272 6179 7320 3c68  g on ndarrays <h
-00003540: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
-00003550: 2f64 6f63 2f73 7461 626c 652f 7573 6572  /doc/stable/user
-00003560: 2f62 6173 6963 732e 696e 6465 7869 6e67  /basics.indexing
-00003570: 2e68 746d 6c3e 605f 2e0d 0a0d 0a20 2020  .html>`_.....   
-00003580: 204e 6f74 6520 7468 6174 2073 6c69 6369   Note that slici
-00003590: 6e67 2063 7265 6174 6573 2061 2076 6965  ng creates a vie
-000035a0: 7720 6f66 2074 6865 2061 7272 6179 2061  w of the array a
-000035b0: 6e64 2064 6f65 7320 6e6f 7420 636f 7079  nd does not copy
-000035c0: 2074 6865 2075 6e64 6572 6c79 696e 6720   the underlying 
-000035d0: 6461 7461 3b0d 0a20 2020 206d 6f64 6966  data;..    modif
-000035e0: 7969 6e67 2074 6865 2073 6c69 6365 206d  ying the slice m
-000035f0: 6f64 6966 6965 7320 7468 6520 6f72 6967  odifies the orig
-00003600: 696e 616c 2061 7272 6179 2e20 4661 6e63  inal array. Fanc
-00003610: 7920 696e 6465 7869 6e67 2063 7265 6174  y indexing creat
-00003620: 6573 2061 2063 6f70 7920 6f66 0d0a 2020  es a copy of..  
-00003630: 2020 7468 6520 6578 7472 6163 7465 6420    the extracted 
-00003640: 6461 7461 3b20 6d6f 6469 6679 696e 6720  data; modifying 
-00003650: 7468 6973 2061 7272 6179 2064 6f65 7320  this array does 
-00003660: 6e6f 7420 6d6f 6469 6679 2074 6865 206f  not modify the o
-00003670: 7269 6769 6e61 6c20 6172 7261 792e 0d0a  riginal array...
-00003680: 0d0a 2020 2020 596f 7520 6361 6e20 616c  ..    You can al
-00003690: 736f 2070 6173 7320 6120 426f 6f6c 6561  so pass a Boolea
-000036a0: 6e20 6d61 736b 2061 7272 6179 2e0d 0a0d  n mask array....
-000036b0: 0a20 2020 203e 3e3e 2023 2043 7265 6174  .    >>> # Creat
-000036c0: 6520 6120 426f 6f6c 6561 6e20 6d61 736b  e a Boolean mask
-000036d0: 3a0d 0a20 2020 203e 3e3e 2065 7665 6e4d  :..    >>> evenM
-000036e0: 6173 6b20 3d20 2861 7272 6179 2025 2032  ask = (array % 2
-000036f0: 203d 3d20 3029 0d0a 2020 2020 3e3e 3e20   == 0)..    >>> 
-00003700: 6576 656e 4d61 736b 0d0a 2020 2020 4661  evenMask..    Fa
-00003710: 7374 4172 7261 7928 5b54 7275 652c 2046  stArray([True, F
-00003720: 616c 7365 2c20 5472 7565 2c20 4661 6c73  alse, True, Fals
-00003730: 652c 2054 7275 652c 2046 616c 7365 2c20  e, True, False, 
-00003740: 5472 7565 2c20 4661 6c73 655d 290d 0a20  True, False]).. 
-00003750: 2020 203e 3e3e 2023 2049 6e64 6578 2075     >>> # Index u
-00003760: 7369 6e67 2074 6865 2042 6f6f 6c65 616e  sing the Boolean
-00003770: 206d 6173 6b3a 0d0a 2020 2020 3e3e 3e20   mask:..    >>> 
-00003780: 6172 7261 795b 6576 656e 4d61 736b 5d0d  array[evenMask].
-00003790: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
-000037a0: 302c 2034 2c20 3136 2c20 3336 5d29 0d0a  0, 4, 16, 36])..
-000037b0: 0d0a 2020 2020 2a2a 486f 7720 746f 2053  ..    **How to S
-000037c0: 7562 636c 6173 7320 4661 7374 4172 7261  ubclass FastArra
-000037d0: 792a 2a0d 0a0d 0a20 2020 2049 6e63 6c75  y**....    Inclu
-000037e0: 6465 2074 6865 2072 6571 7569 7265 6420  de the required 
-000037f0: 636c 6173 7320 6465 6669 6e69 7469 6f6e  class definition
-00003800: 3a0d 0a0d 0a20 2020 203e 3e3e 2063 6c61  :....    >>> cla
-00003810: 7373 2054 6573 7453 7562 636c 6173 7328  ss TestSubclass(
-00003820: 4661 7374 4172 7261 7929 3a0d 0a20 2020  FastArray):..   
-00003830: 202e 2e2e 2020 2020 2064 6566 205f 5f6e   ...     def __n
-00003840: 6577 5f5f 2863 6c73 2c20 6172 722c 202a  ew__(cls, arr, *
-00003850: 2a61 7267 7329 3a0d 0a20 2020 202e 2e2e  *args):..    ...
-00003860: 2020 2020 2020 2020 2023 2042 6566 6f72           # Befor
-00003870: 6520 7468 6973 2063 616c 6c2c 2061 7272  e this call, arr
-00003880: 206e 6565 6473 2074 6f20 6265 2061 206e   needs to be a n
-00003890: 702e 6e64 6172 7261 7920 696e 7374 616e  p.ndarray instan
-000038a0: 6365 2e0d 0a20 2020 202e 2e2e 2020 2020  ce...    ...    
-000038b0: 2020 2020 2072 6574 7572 6e20 6172 722e       return arr.
-000038c0: 7669 6577 2863 6c73 290d 0a20 2020 202e  view(cls)..    .
-000038d0: 2e2e 2020 2020 2064 6566 205f 5f69 6e69  ..     def __ini
-000038e0: 745f 5f28 7365 6c66 2c20 6172 722c 202a  t__(self, arr, *
-000038f0: 2a61 7267 7329 3a0d 0a20 2020 202e 2e2e  *args):..    ...
-00003900: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
-00003910: 0a20 2020 2049 6620 7468 6520 7375 6263  .    If the subc
-00003920: 6c61 7373 2069 7320 636f 6d70 7574 6162  lass is computab
-00003930: 6c65 2c20 796f 7520 6d69 6768 7420 6465  le, you might de
-00003940: 6669 6e65 2079 6f75 7220 6f77 6e20 6d61  fine your own ma
-00003950: 7468 206f 7065 7261 7469 6f6e 732e 2049  th operations. I
-00003960: 6e20 7468 6573 650d 0a20 2020 206f 7065  n these..    ope
-00003970: 7261 7469 6f6e 732c 2079 6f75 206d 6967  rations, you mig
-00003980: 6874 2064 6566 696e 6520 7768 6174 2074  ht define what t
-00003990: 6865 2073 7562 636c 6173 7320 6361 6e20  he subclass can 
-000039a0: 6265 2063 6f6d 7075 7465 6420 7769 7468  be computed with
-000039b0: 2e20 466f 7220 6578 616d 706c 6573 206f  . For examples o
-000039c0: 660d 0a20 2020 206e 6577 2064 6566 696e  f..    new defin
-000039d0: 6974 696f 6e73 2c20 7365 6520 7468 6520  itions, see the 
-000039e0: 6044 6174 6554 696d 654e 616e 6f60 2063  `DateTimeNano` c
-000039f0: 6c61 7373 2e0d 0a0d 0a20 2020 2043 6f6d  lass.....    Com
-00003a00: 6d6f 6e20 6f70 6572 6174 696f 6e73 2074  mon operations t
-00003a10: 6f20 686f 6f6b 2061 7265 2063 6f6d 7061  o hook are compa
-00003a20: 7269 736f 6e73 2028 6060 5f5f 6571 5f5f  risons (``__eq__
-00003a30: 2829 6060 2c20 6060 5f5f 6e65 5f5f 2829  ()``, ``__ne__()
-00003a40: 6060 2c20 6060 5f5f 6774 5f5f 2829 6060  ``, ``__gt__()``
-00003a50: 2c0d 0a20 2020 2060 605f 5f6c 745f 5f28  ,..    ``__lt__(
-00003a60: 2960 602c 2060 605f 5f6c 655f 5f28 2960  )``, ``__le__()`
-00003a70: 602c 2060 605f 5f67 655f 5f28 2960 6029  `, ``__ge__()``)
-00003a80: 2061 6e64 2062 6173 6963 206d 6174 6820   and basic math 
-00003a90: 6675 6e63 7469 6f6e 7320 2860 605f 5f61  functions (``__a
-00003aa0: 6464 5f5f 2829 6060 2c0d 0a20 2020 2060  dd__()``,..    `
-00003ab0: 605f 5f73 7562 5f5f 2829 6060 2c20 6060  `__sub__()``, ``
-00003ac0: 5f5f 6d75 6c5f 5f28 2960 602c 2065 7463  __mul__()``, etc
-00003ad0: 2e29 2e0d 0a0d 0a20 2020 2042 7261 636b  .).....    Brack
-00003ae0: 6574 2069 6e64 6578 696e 6720 6f70 6572  et indexing oper
-00003af0: 6174 696f 6e73 2061 7265 2076 6572 7920  ations are very 
-00003b00: 636f 6d6d 6f6e 2e20 4966 2074 6865 2073  common. If the s
-00003b10: 7562 636c 6173 7320 6e65 6564 7320 746f  ubclass needs to
-00003b20: 2073 6574 206f 7220 7265 7475 726e 0d0a   set or return..
-00003b30: 2020 2020 6120 7661 6c75 6520 6f74 6865      a value othe
-00003b40: 7220 7468 616e 2074 6861 7420 696e 2074  r than that in t
-00003b50: 6865 2075 6e64 6572 6c79 696e 6720 6172  he underlying ar
-00003b60: 7261 792c 2079 6f75 206e 6565 6420 746f  ray, you need to
-00003b70: 2074 616b 6520 6f76 6572 0d0a 2020 2020   take over..    
-00003b80: 605f 5f67 6574 6974 656d 5f5f 2829 6020  `__getitem__()` 
-00003b90: 6f72 2060 5f5f 7365 7469 7465 6d5f 5f28  or `__setitem__(
-00003ba0: 2960 2e0d 0a0d 0a20 2020 2049 6e64 6578  )`.....    Index
-00003bb0: 696e 6720 6973 2061 6c73 6f20 7573 6564  ing is also used
-00003bc0: 2069 6e20 6469 7370 6c61 792e 2046 6f72   in display. For
-00003bd0: 2072 6567 756c 6172 2063 6f6e 736f 6c65   regular console
-00003be0: 2f6e 6f74 6562 6f6f 6b20 6469 7370 6c61  /notebook displa
-00003bf0: 792c 2079 6f75 206e 6565 6420 746f 0d0a  y, you need to..
-00003c00: 2020 2020 7461 6b65 206f 7665 723a 0d0a      take over:..
-00003c10: 0d0a 2020 2020 2a20 605f 5f72 6570 725f  ..    * `__repr_
-00003c20: 5f28 2960 0d0a 2020 2020 2a20 605f 5f73  _()`..    * `__s
-00003c30: 7472 5f5f 2829 600d 0a20 2020 202a 2060  tr__()`..    * `
-00003c40: 5f72 6570 725f 6874 6d6c 5f28 2960 2028  _repr_html_()` (
-00003c50: 666f 7220 4a75 7079 7465 724c 6162 2061  for JupyterLab a
-00003c60: 6e64 204a 7570 7974 6572 206e 6f74 6562  nd Jupyter noteb
-00003c70: 6f6f 6b73 290d 0a0d 0a20 2020 2049 6620  ooks)....    If 
-00003c80: 7468 6520 6172 7261 7920 6973 2062 6569  the array is bei
-00003c90: 6e67 2064 6973 706c 6179 6564 2069 6e20  ng displayed in 
-00003ca0: 6120 6044 6174 6173 6574 6020 616e 6420  a `Dataset` and 
-00003cb0: 796f 7520 7265 7175 6972 6520 6365 7274  you require cert
-00003cc0: 6169 6e20 666f 726d 6174 7469 6e67 2c20  ain formatting, 
-00003cd0: 796f 750d 0a20 2020 206e 6565 6420 746f  you..    need to
-00003ce0: 2064 6566 696e 6520 7477 6f20 6d6f 7265   define two more
-00003cf0: 206d 6574 686f 6473 3a0d 0a0d 0a20 2020   methods:....   
-00003d00: 2060 6064 6973 706c 6179 5f71 7565 7279   ``display_query
-00003d10: 5f70 726f 7065 7274 6965 7328 2960 600d  _properties()``.
-00003d20: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00003d30: 2061 6e20 6049 7465 6d46 6f72 6d61 7460   an `ItemFormat`
-00003d40: 206f 626a 6563 7420 2873 6565 2060 7274   object (see `rt
-00003d50: 2e55 7469 6c73 2e72 745f 6469 7370 6c61  .Utils.rt_displa
-00003d60: 795f 7072 6f70 6572 7469 6573 6029 0d0a  y_properties`)..
-00003d70: 0d0a 2020 2020 6060 6469 7370 6c61 795f  ..    ``display_
-00003d80: 636f 6e76 6572 745f 6675 6e63 2829 6060  convert_func()``
-00003d90: 0d0a 2020 2020 2020 2020 5468 6520 636f  ..        The co
-00003da0: 6e76 6572 7369 6f6e 2066 756e 6374 696f  nversion functio
-00003db0: 6e20 7265 7475 726e 6564 2062 7920 6060  n returned by ``
-00003dc0: 6469 7370 6c61 795f 7175 6572 795f 7072  display_query_pr
-00003dd0: 6f70 6572 7469 6573 2829 6060 0d0a 2020  operties()``..  
-00003de0: 2020 2020 2020 6d75 7374 2072 6574 7572        must retur
-00003df0: 6e20 6120 7374 7269 6e67 2e20 4561 6368  n a string. Each
-00003e00: 2069 7465 6d20 6265 696e 6720 6469 7370   item being disp
-00003e10: 6c61 7965 642c 2074 6865 2072 6573 756c  layed, the resul
-00003e20: 7420 6f66 2060 605f 5f67 6574 6974 656d  t of ``__getitem
-00003e30: 5f5f 2829 6060 0d0a 2020 2020 2020 2020  __()``..        
-00003e40: 6174 2061 2073 696e 676c 6520 696e 6465  at a single inde
-00003e50: 782c 2077 696c 6c20 676f 2074 6872 6f75  x, will go throu
-00003e60: 6768 2074 6869 7320 6675 6e63 7469 6f6e  gh this function
-00003e70: 2069 6e64 6976 6964 7561 6c6c 792c 2061   individually, a
-00003e80: 6363 6f6d 7061 6e69 6564 2062 790d 0a20  ccompanied by.. 
-00003e90: 2020 2020 2020 2061 6e20 6049 7465 6d46         an `ItemF
-00003ea0: 6f72 6d61 7460 206f 626a 6563 742e 0d0a  ormat` object...
-00003eb0: 0d0a 2020 2020 4d61 6e79 2052 6970 7461  ..    Many Ripta
-00003ec0: 626c 6520 6f70 6572 6174 696f 6e73 206e  ble operations n
-00003ed0: 6565 6420 746f 2072 6574 7572 6e20 6172  eed to return ar
-00003ee0: 7261 7973 206f 6620 7468 6520 7361 6d65  rays of the same
-00003ef0: 2063 6c61 7373 2074 6865 7920 7265 6365   class they rece
-00003f00: 6976 6564 2e20 546f 0d0a 2020 2020 656e  ived. To..    en
-00003f10: 7375 7265 2074 6861 7420 796f 7572 2073  sure that your s
-00003f20: 7562 636c 6173 7320 7769 6c6c 2072 6574  ubclass will ret
-00003f30: 6169 6e20 6974 7320 7370 6563 6961 6c20  ain its special 
-00003f40: 7072 6f70 6572 7469 6573 2c20 796f 7520  properties, you 
-00003f50: 6e65 6564 2074 6f20 7461 6b65 206f 7665  need to take ove
-00003f60: 720d 0a20 2020 2060 6e65 7763 6c61 7373  r..    `newclass
-00003f70: 6672 6f6d 696e 7374 616e 6365 2829 602e  frominstance()`.
-00003f80: 2046 6169 6c75 7265 2074 6f20 7461 6b65   Failure to take
-00003f90: 2074 6869 7320 6f76 6572 2077 696c 6c20   this over will 
-00003fa0: 6f66 7465 6e20 7265 7375 6c74 2069 6e20  often result in 
-00003fb0: 616e 206f 626a 6563 740d 0a20 2020 2077  an object..    w
-00003fc0: 6974 6820 756e 696e 6974 6961 6c69 7a65  ith uninitialize
-00003fd0: 6420 7661 7269 6162 6c65 732e 0d0a 0d0a  d variables.....
-00003fe0: 2020 2020 6063 6f70 7928 2960 2069 7320      `copy()` is 
-00003ff0: 616e 6f74 6865 7220 6d65 7468 6f64 2074  another method t
-00004000: 6861 7420 6973 2063 616c 6c65 6420 6765  hat is called ge
-00004010: 6e65 7269 6361 6c6c 7920 696e 2052 6970  nerically in Rip
-00004020: 7461 626c 6520 726f 7574 696e 6573 2c20  table routines, 
-00004030: 616e 640d 0a20 2020 206e 6565 6473 2074  and..    needs t
-00004040: 6f20 6265 2074 616b 656e 206f 7665 7220  o be taken over 
-00004050: 746f 2072 6574 6169 6e20 7375 6263 6c61  to retain subcla
-00004060: 7373 2070 726f 7065 7274 6965 732e 0d0a  ss properties...
-00004070: 0d0a 2020 2020 466f 7220 6120 7669 6577  ..    For a view
-00004080: 206f 6620 7468 6520 756e 6465 726c 7969   of the underlyi
-00004090: 6e67 2060 4661 7374 4172 7261 7960 2c20  ng `FastArray`, 
-000040a0: 796f 7520 6361 6e20 7573 6520 7468 6520  you can use the 
-000040b0: 605f 6661 6020 7072 6f70 6572 7479 2e0d  `_fa` property..
-000040c0: 0a20 2020 2022 2222 0d0a 0d0a 2020 2020  .    """....    
-000040d0: 2320 4465 6669 6e65 7320 6120 6765 6e65  # Defines a gene
-000040e0: 7269 6320 6e70 2e6e 6461 7272 6179 2073  ric np.ndarray s
-000040f0: 7562 636c 6173 732c 2074 6861 7420 6361  ubclass, that ca
-00004100: 6e20 6361 6368 6520 6e75 6d70 7920 6172  n cache numpy ar
-00004110: 7261 7973 0d0a 2020 2020 2320 5374 6174  rays..    # Stat
-00004120: 6963 2043 6c61 7373 2056 4152 4941 424c  ic Class VARIABL
-00004130: 4553 0d0a 0d0a 2020 2020 2320 6368 616e  ES....    # chan
-00004140: 6765 2074 6869 7320 746f 2073 686f 7720  ge this to show 
-00004150: 6f72 206c 6573 7320 7661 6c75 6573 206f  or less values o
-00004160: 6e20 5f5f 7265 7072 5f5f 0d0a 2020 2020  n __repr__..    
-00004170: 4d41 585f 4449 5350 4c41 595f 4c45 4e20  MAX_DISPLAY_LEN 
-00004180: 3d20 3130 0d0a 0d0a 2020 2020 2320 7365  = 10....    # se
-00004190: 7420 746f 2032 206f 7220 3320 666f 7220  t to 2 or 3 for 
-000041a0: 6578 7472 6120 6465 6275 6720 696e 666f  extra debug info
-000041b0: 726d 6174 696f 6e0d 0a20 2020 2056 6572  rmation..    Ver
-000041c0: 626f 7365 203d 2031 0d0a 0d0a 2020 2020  bose = 1....    
-000041d0: 2320 7365 7420 746f 2074 7275 6520 666f  # set to true fo
-000041e0: 7220 7265 7573 696e 6720 6e75 6d70 7920  r reusing numpy 
-000041f0: 6172 7261 7973 2069 6e73 7465 6164 206f  arrays instead o
-00004200: 6620 6465 6c65 7469 6e67 2074 6865 6d20  f deleting them 
-00004210: 636f 6d70 6c65 7465 6c79 0d0a 2020 2020  completely..    
-00004220: 5265 6379 636c 6520 3d20 5472 7565 0d0a  Recycle = True..
-00004230: 0d0a 2020 2020 2320 7365 7420 746f 2074  ..    # set to t
-00004240: 7275 6520 746f 2070 7265 7365 7276 6520  rue to preserve 
-00004250: 7365 6e74 696e 656c 7320 6475 7269 6e67  sentinels during
-00004260: 2069 6e74 6572 6e61 6c20 6172 7261 795f   internal array_
-00004270: 7566 756e 6320 6361 6c63 756c 6174 696f  ufunc calculatio
-00004280: 6e73 0d0a 2020 2020 5361 6665 436f 6e76  ns..    SafeConv
-00004290: 6572 7369 6f6e 7320 3d20 5472 7565 0d0a  ersions = True..
-000042a0: 0d0a 2020 2020 2320 7365 7420 746f 2066  ..    # set to f
-000042b0: 616c 7365 2074 6f20 6265 206a 7573 7420  alse to be just 
-000042c0: 6e6f 726d 616c 206e 756d 7079 0d0a 2020  normal numpy..  
-000042d0: 2020 4661 7374 6572 5546 756e 6320 3d20    FasterUFunc = 
-000042e0: 5472 7565 0d0a 0d0a 2020 2020 4e45 575f  True....    NEW_
-000042f0: 4152 5241 595f 4655 4e43 5449 4f4e 5f45  ARRAY_FUNCTION_E
-00004300: 4e41 424c 4544 203d 2046 616c 7365 0d0a  NABLED = False..
-00004310: 2020 2020 2222 2245 6e61 626c 6520 696d      """Enable im
-00004320: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-00004330: 6172 7261 7920 6675 6e63 7469 6f6e 2070  array function p
-00004340: 726f 746f 636f 6c20 2864 6566 6175 6c74  rotocol (default
-00004350: 2046 616c 7365 292e 2222 220d 0a0d 0a20   False).""".... 
-00004360: 2020 2023 2030 3d51 7569 6574 2c20 313d     # 0=Quiet, 1=
-00004370: 5761 726e 2c20 323d 4578 6365 7074 696f  Warn, 2=Exceptio
-00004380: 6e0d 0a20 2020 2057 6172 6e69 6e67 4c65  n..    WarningLe
-00004390: 7665 6c20 3d20 310d 0a0d 0a20 2020 2023  vel = 1....    #
-000043a0: 2073 6574 2074 6f20 7472 7565 2074 6f20   set to true to 
-000043b0: 6e6f 7420 616c 6c6f 7720 6172 6172 7973  not allow ararys
-000043c0: 2077 6520 646f 206e 6f74 2073 7570 706f   we do not suppo
-000043d0: 7274 0d0a 2020 2020 4e6f 546f 6c65 7261  rt..    NoTolera
-000043e0: 6e63 6520 3d20 4661 6c73 650d 0a0d 0a20  nce = False.... 
-000043f0: 2020 2023 2073 6574 2074 6f20 6661 6c73     # set to fals
-00004400: 6520 746f 206e 6f74 2063 6f6d 7072 6573  e to not compres
-00004410: 7320 7768 656e 2070 6963 6b6c 696e 670d  s when pickling.
-00004420: 0a20 2020 2043 6f6d 7072 6573 7350 6963  .    CompressPic
-00004430: 6b6c 6520 3d20 5472 7565 0d0a 0d0a 2020  kle = True....  
-00004440: 2020 2320 6120 6469 6374 696f 6e61 7279    # a dictionary
-00004450: 2074 6f20 6176 6f69 6420 7265 7065 6174   to avoid repeat
-00004460: 696e 6720 7761 726e 696e 6773 2069 6e20  ing warnings in 
-00004470: 6d75 6c74 6970 6c65 2070 6c61 6365 730d  multiple places.
-00004480: 0a20 2020 2023 2054 4f44 4f3a 2077 7261  .    # TODO: wra
-00004490: 7020 7468 6973 2069 6e20 6120 636c 6173  p this in a clas
-000044a0: 7320 736f 2074 6861 7420 7761 726e 696e  s so that warnin
-000044b0: 6773 2063 616e 2062 6520 7475 726e 6564  gs can be turned
-000044c0: 206f 6e2f 6f66 660d 0a20 2020 2057 6172   on/off..    War
-000044d0: 6e69 6e67 4469 6374 203d 207b 0d0a 2020  ningDict = {..  
-000044e0: 2020 2020 2020 226d 756c 7469 706c 655f        "multiple_
-000044f0: 6469 6d65 6e73 696f 6e73 223a 2022 4661  dimensions": "Fa
-00004500: 7374 4172 7261 7920 636f 6e74 6169 6e73  stArray contains
-00004510: 2074 776f 206f 7220 6d6f 7265 2064 696d   two or more dim
-00004520: 656e 7369 6f6e 7320 6772 6561 7465 7220  ensions greater 
-00004530: 7468 616e 206f 6e65 202d 2073 6861 7065  than one - shape
-00004540: 3a7b 7d2e 2020 5072 6f62 6c65 6d73 206d  :{}.  Problems m
-00004550: 6179 206f 6363 7572 2e22 0d0a 2020 2020  ay occur."..    
-00004560: 7d0d 0a0d 0a20 2020 2023 2046 6f72 2072  }....    # For r
-00004570: 6564 7563 7469 6f6e 206f 7065 7261 7469  eduction operati
-00004580: 6f6e 732c 2074 6865 2069 6465 6e74 6974  ons, the identit
-00004590: 7920 656c 656d 656e 7420 6f66 2074 6865  y element of the
-000045a0: 206f 7065 7261 7469 6f6e 2028 666f 7220   operation (for 
-000045b0: 6f70 6572 6174 696f 6e73 0d0a 2020 2020  operations..    
-000045c0: 2320 7768 6572 6520 7375 6368 2061 6e20  # where such an 
-000045d0: 656c 656d 656e 7420 6973 2064 6566 696e  element is defin
-000045e0: 6564 292e 0d0a 2020 2020 2320 4e2e 422e  ed)...    # N.B.
-000045f0: 2041 7320 6f66 206e 756d 7079 2031 2e31   As of numpy 1.1
-00004600: 3920 6974 2064 6f65 7320 6e6f 7420 6170  9 it does not ap
-00004610: 7065 6172 2074 6865 7265 2773 2061 2073  pear there's a s
-00004620: 7472 6169 6768 7466 6f72 7761 7264 2077  traightforward w
-00004630: 6179 206f 6620 6765 7474 696e 6720 6672  ay of getting fr
-00004640: 6f6d 0d0a 2020 2020 2320 2020 736f 6d65  om..    #   some
-00004650: 7468 696e 6720 6c69 6b65 2060 606e 702e  thing like ``np.
-00004660: 7375 6d60 6020 6261 636b 2074 6f20 6060  sum`` back to ``
-00004670: 6e70 2e61 6464 6060 2c20 6672 6f6d 2077  np.add``, from w
-00004680: 6869 6368 2077 6520 636f 756c 6420 6765  hich we could ge
-00004690: 7420 7468 6520 2e69 6465 6e74 6974 7920  t the .identity 
-000046a0: 7072 6f70 6572 7479 2e0d 0a20 2020 2023  property...    #
-000046b0: 2020 2049 6620 7468 6174 2065 7665 7220     If that ever 
-000046c0: 6368 616e 6765 732c 2074 6869 7320 6469  changes, this di
-000046d0: 6374 696f 6e61 7279 2077 6f75 6c64 206e  ctionary would n
-000046e0: 6f20 6c6f 6e67 6572 2062 6520 6e65 6365  o longer be nece
-000046f0: 7373 6172 7920 736f 2069 7420 6361 6e2b  ssary so it can+
-00004700: 7368 6f75 6c64 2062 6520 7265 6d6f 7665  should be remove
-00004710: 642e 0d0a 2020 2020 5f72 6564 7563 655f  d...    _reduce_
-00004720: 6f70 5f69 6465 6e74 6974 795f 7661 6c75  op_identity_valu
-00004730: 653a 204d 6170 7069 6e67 5b52 4544 5543  e: Mapping[REDUC
-00004740: 455f 4655 4e43 5449 4f4e 532c 2041 6e79  E_FUNCTIONS, Any
-00004750: 5d20 3d20 7b0d 0a20 2020 2020 2020 2052  ] = {..        R
-00004760: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-00004770: 5245 4455 4345 5f41 4c4c 3a20 5472 7565  REDUCE_ALL: True
-00004780: 2c20 2023 206e 702e 616c 6c28 6e70 2e61  ,  # np.all(np.a
-00004790: 7272 6179 285b 5d29 290d 0a20 2020 2020  rray([]))..     
-000047a0: 2020 2052 4544 5543 455f 4655 4e43 5449     REDUCE_FUNCTI
-000047b0: 4f4e 532e 5245 4455 4345 5f41 4e59 3a20  ONS.REDUCE_ANY: 
-000047c0: 4661 6c73 652c 2020 2320 6e70 2e61 6e79  False,  # np.any
-000047d0: 286e 702e 6172 7261 7928 5b5d 2929 0d0a  (np.array([]))..
-000047e0: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
-000047f0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-00004800: 4e41 4e53 554d 3a20 6e70 2e61 6464 2e69  NANSUM: np.add.i
-00004810: 6465 6e74 6974 792c 0d0a 2020 2020 2020  dentity,..      
-00004820: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
-00004830: 4e53 2e52 4544 5543 455f 5355 4d3a 206e  NS.REDUCE_SUM: n
-00004840: 702e 6164 642e 6964 656e 7469 7479 2c0d  p.add.identity,.
-00004850: 0a20 2020 207d 0d0a 0d0a 2020 2020 2320  .    }....    # 
+00002650: 2d2d 2d2d 2d2d 2d2d 0d0a 636c 6173 7320  --------..class 
+00002660: 4661 7374 4172 7261 7928 6e70 2e6e 6461  FastArray(np.nda
+00002670: 7272 6179 293a 0d0a 2020 2020 2222 220d  rray):..    """.
+00002680: 0a0d 0a20 2020 2041 2060 4661 7374 4172  ...    A `FastAr
+00002690: 7261 7960 2069 7320 6120 312d 6469 6d65  ray` is a 1-dime
+000026a0: 6e73 696f 6e61 6c20 6172 7261 7920 6f66  nsional array of
+000026b0: 2069 7465 6d73 2074 6861 7420 6172 6520   items that are 
+000026c0: 7468 6520 7361 6d65 2064 6174 6120 7479  the same data ty
+000026d0: 7065 2e0d 0a0d 0a20 2020 2042 6563 6175  pe.....    Becau
+000026e0: 7365 2069 7427 7320 6120 7375 6263 6c61  se it's a subcla
+000026f0: 7373 206f 6620 4e75 6d50 7927 7320 606e  ss of NumPy's `n
+00002700: 756d 7079 2e6e 6461 7272 6179 602c 2061  umpy.ndarray`, a
+00002710: 6c6c 2060 606e 6461 7272 6179 6060 2066  ll ``ndarray`` f
+00002720: 756e 6374 696f 6e73 2061 6e64 2061 7474  unctions and att
+00002730: 7269 6275 7465 730d 0a20 2020 2063 616e  ributes..    can
+00002740: 2062 6520 7573 6564 2077 6974 6820 6046   be used with `F
+00002750: 6173 7441 7272 6179 6020 6f62 6a65 6374  astArray` object
+00002760: 732e 2048 6f77 6576 6572 2c20 5269 7074  s. However, Ript
+00002770: 6162 6c65 206f 7074 696d 697a 6573 206d  able optimizes m
+00002780: 616e 7920 6f66 204e 756d 5079 2773 0d0a  any of NumPy's..
+00002790: 2020 2020 6675 6e63 7469 6f6e 7320 746f      functions to
+000027a0: 206d 616b 6520 7468 656d 2066 6173 7465   make them faste
+000027b0: 7220 616e 6420 6d6f 7265 206d 656d 6f72  r and more memor
+000027c0: 792d 6566 6669 6369 656e 742e 2052 6970  y-efficient. Rip
+000027d0: 7461 626c 6520 6861 7320 616c 736f 2061  table has also a
+000027e0: 6464 6564 0d0a 2020 2020 736f 6d65 206d  dded..    some m
+000027f0: 6574 686f 6473 2e0d 0a0d 0a20 2020 2060  ethods.....    `
+00002800: 4661 7374 4172 7261 7960 206f 626a 6563  FastArray` objec
+00002810: 7473 2077 6974 6820 6d6f 7265 2074 6861  ts with more tha
+00002820: 6e20 3120 6469 6d65 6e73 696f 6e20 6172  n 1 dimension ar
+00002830: 6520 6e6f 7420 7375 7070 6f72 7465 642e  e not supported.
+00002840: 0d0a 0d0a 2020 2020 5365 6520 604e 756d  ....    See `Num
+00002850: 5079 2773 0d0a 2020 2020 646f 6373 203c  Py's..    docs <
+00002860: 6874 7470 733a 2f2f 6e75 6d70 792e 6f72  https://numpy.or
+00002870: 672f 6465 7664 6f63 732f 7265 6665 7265  g/devdocs/refere
+00002880: 6e63 652f 6765 6e65 7261 7465 642f 6e75  nce/generated/nu
+00002890: 6d70 792e 6e64 6172 7261 792e 6874 6d6c  mpy.ndarray.html
+000028a0: 3e60 5f20 666f 720d 0a20 2020 2064 6574  >`_ for..    det
+000028b0: 6169 6c73 206f 6e20 616c 6c20 6060 6e64  ails on all ``nd
+000028c0: 6172 7261 7960 6020 6d65 7468 6f64 7320  array`` methods 
+000028d0: 616e 6420 6174 7472 6962 7574 6573 2e0d  and attributes..
+000028e0: 0a0d 0a20 2020 2050 6172 616d 6574 6572  ...    Parameter
+000028f0: 730d 0a20 2020 202d 2d2d 2d2d 2d2d 2d2d  s..    ---------
+00002900: 2d0d 0a20 2020 2061 7272 203a 2061 7272  -..    arr : arr
+00002910: 6179 2c20 6974 6572 6162 6c65 2c20 6f72  ay, iterable, or
+00002920: 2073 6361 6c61 7220 7661 6c75 650d 0a20   scalar value.. 
+00002930: 2020 2020 2020 2043 6f6e 7461 696e 7320         Contains 
+00002940: 6461 7461 2074 6f20 6265 2073 746f 7265  data to be store
+00002950: 6420 696e 2074 6865 2060 4661 7374 4172  d in the `FastAr
+00002960: 7261 7960 2e0d 0a0d 0a20 2020 202a 2a6b  ray`.....    **k
+00002970: 7761 7267 730d 0a20 2020 2020 2020 2041  wargs..        A
+00002980: 6464 6974 696f 6e61 6c20 6b65 7977 6f72  dditional keywor
+00002990: 6420 6172 6775 6d65 6e74 7320 746f 2062  d arguments to b
+000029a0: 6520 7061 7373 6564 2074 6f20 7468 6520  e passed to the 
+000029b0: 6675 6e63 7469 6f6e 2e0d 0a0d 0a20 2020  function.....   
+000029c0: 204e 6f74 6573 0d0a 2020 2020 2d2d 2d2d   Notes..    ----
+000029d0: 2d0d 0a20 2020 2054 6f20 696d 7072 6f76  -..    To improv
+000029e0: 6520 7065 7266 6f72 6d61 6e63 652c 2060  e performance, `
+000029f0: 4661 7374 4172 7261 7960 206f 626a 6563  FastArray` objec
+00002a00: 7473 2074 616b 6520 6f76 6572 2073 6f6d  ts take over som
+00002a10: 6520 6f66 204e 756d 5079 2773 2075 6e69  e of NumPy's uni
+00002a20: 7665 7273 616c 2066 756e 6374 696f 6e73  versal functions
+00002a30: 0d0a 2020 2020 2875 6675 6e63 7329 2c20  ..    (ufuncs), 
+00002a40: 7573 6520 6172 7261 7920 7265 6379 636c  use array recycl
+00002a50: 696e 6720 616e 6420 6d75 6c74 6970 6c65  ing and multiple
+00002a60: 2074 6872 6561 6473 2c20 616e 6420 7061   threads, and pa
+00002a70: 7373 2063 6572 7461 696e 206d 6574 686f  ss certain metho
+00002a80: 6420 6361 6c6c 7320 746f 0d0a 2020 2020  d calls to..    
+00002a90: 6042 6f74 746c 656e 6563 6b20 3c68 7474  `Bottleneck <htt
+00002aa0: 7073 3a2f 2f6b 7767 6f6f 646d 616e 2e67  ps://kwgoodman.g
+00002ab0: 6974 6875 622e 696f 2f62 6f74 746c 656e  ithub.io/bottlen
+00002ac0: 6563 6b2d 646f 632f 696e 6465 782e 6874  eck-doc/index.ht
+00002ad0: 6d6c 3e60 5f2e 0d0a 0d0a 2020 2020 4e6f  ml>`_.....    No
+00002ae0: 7465 2074 6861 7420 7768 656e 6576 6572  te that whenever
+00002af0: 2052 6970 7461 626c 6520 6861 7320 696d   Riptable has im
+00002b00: 706c 656d 656e 7465 6420 6974 7320 6f77  plemented its ow
+00002b10: 6e20 7665 7273 696f 6e20 6f66 0d0a 2020  n version of..  
+00002b20: 2020 616e 2065 7869 7374 696e 6720 4e75    an existing Nu
+00002b30: 6d50 7920 6d65 7468 6f64 2c20 6120 6361  mPy method, a ca
+00002b40: 6c6c 2074 6f20 7468 6520 4e75 6d50 7920  ll to the NumPy 
+00002b50: 6d65 7468 6f64 2072 6573 756c 7473 2069  method results i
+00002b60: 6e20 6120 6361 6c6c 2074 6f20 7468 650d  n a call to the.
+00002b70: 0a20 2020 206f 7074 696d 697a 6564 2052  .    optimized R
+00002b80: 6970 7461 626c 6520 7665 7273 696f 6e20  iptable version 
+00002b90: 696e 7374 6561 642e 2057 6520 656e 636f  instead. We enco
+00002ba0: 7572 6167 6520 7573 6572 7320 746f 2064  urage users to d
+00002bb0: 6972 6563 746c 7920 6361 6c6c 2074 6865  irectly call the
+00002bc0: 2052 6970 7461 626c 650d 0a20 2020 206d   Riptable..    m
+00002bd0: 6574 686f 6420 696e 206f 7264 6572 2074  ethod in order t
+00002be0: 6f20 6176 6f69 6420 616e 7920 636f 6e66  o avoid any conf
+00002bf0: 7573 696f 6e20 6173 2074 6f20 7768 6174  usion as to what
+00002c00: 206d 6574 686f 6420 6973 2061 6374 7561   method is actua
+00002c10: 6c6c 7920 6265 696e 6720 6361 6c6c 6564  lly being called
+00002c20: 2e0d 0a0d 0a20 2020 2053 6565 2074 6865  .....    See the
+00002c30: 206c 6973 7420 6f66 2060 4e75 6d50 7920   list of `NumPy 
+00002c40: 4d65 7468 6f64 7320 4f70 7469 6d69 7a65  Methods Optimize
+00002c50: 6420 6279 2052 6970 7461 626c 6520 666f  d by Riptable fo
+00002c60: 7220 4661 7374 4172 7261 7973 0d0a 2020  r FastArrays..  
+00002c70: 2020 3c68 7474 7073 3a74 7574 6f72 6961    <https:tutoria
+00002c80: 6c5f 6e75 6d70 795f 7274 2e68 746d 6c3e  l_numpy_rt.html>
+00002c90: 605f 2e0d 0a0d 0a0d 0a20 2020 2045 7861  `_.......    Exa
+00002ca0: 6d70 6c65 730d 0a20 2020 202d 2d2d 2d2d  mples..    -----
+00002cb0: 2d2d 2d0d 0a20 2020 202a 2a43 6f6e 7374  ---..    **Const
+00002cc0: 7275 6374 2061 2046 6173 7441 7272 6179  ruct a FastArray
+00002cd0: 2a2a 0d0a 0d0a 2020 2020 5061 7373 2061  **....    Pass a
+00002ce0: 206c 6973 7420 746f 2074 6865 2063 6f6e   list to the con
+00002cf0: 7374 7275 6374 6f72 3a0d 0a0d 0a20 2020  structor:....   
+00002d00: 203e 3e3e 2072 742e 4661 7374 4172 7261   >>> rt.FastArra
+00002d10: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
+00002d20: 5d29 0d0a 2020 2020 4661 7374 4172 7261  ])..    FastArra
+00002d30: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
+00002d40: 5d29 0d0a 0d0a 2020 2020 3e3e 3e20 234e  ])....    >>> #N
+00002d50: 4f54 453a 2072 742e 4641 2061 6c73 6f20  OTE: rt.FA also 
+00002d60: 776f 726b 732e 0d0a 2020 2020 3e3e 3e20  works...    >>> 
+00002d70: 7274 2e46 4128 5b31 2e30 2c20 322e 302c  rt.FA([1.0, 2.0,
+00002d80: 2033 2e30 2c20 342e 302c 2035 2e30 5d29   3.0, 4.0, 5.0])
+00002d90: 0d0a 2020 2020 4661 7374 4172 7261 7928  ..    FastArray(
+00002da0: 5b31 2e2c 2032 2e2c 2033 2e2c 2034 2e2c  [1., 2., 3., 4.,
+00002db0: 2035 2e5d 290d 0a0d 0a20 2020 204f 7220   5.])....    Or 
+00002dc0: 7573 6520 6120 7574 696c 6974 7920 6675  use a utility fu
+00002dd0: 6e63 7469 6f6e 3a0d 0a0d 0a20 2020 203e  nction:....    >
+00002de0: 3e3e 2072 742e 6675 6c6c 2831 302c 2030  >> rt.full(10, 0
+00002df0: 2e37 290d 0a20 2020 2046 6173 7441 7272  .7)..    FastArr
+00002e00: 6179 285b 302e 372c 2030 2e37 2c20 302e  ay([0.7, 0.7, 0.
+00002e10: 372c 2030 2e37 2c20 302e 372c 2030 2e37  7, 0.7, 0.7, 0.7
+00002e20: 2c20 302e 372c 2030 2e37 2c20 302e 372c  , 0.7, 0.7, 0.7,
+00002e30: 2030 2e37 5d29 0d0a 0d0a 2020 2020 3e3e   0.7])....    >>
+00002e40: 3e20 7274 2e61 7261 6e67 6528 3130 290d  > rt.arange(10).
+00002e50: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
+00002e60: 302c 2031 2c20 322c 2033 2c20 342c 2035  0, 1, 2, 3, 4, 5
+00002e70: 2c20 362c 2037 2c20 382c 2039 5d29 0d0a  , 6, 7, 8, 9])..
+00002e80: 0d0a 2020 2020 596f 7520 6361 6e20 6f70  ..    You can op
+00002e90: 7469 6f6e 616c 6c79 2073 7065 6369 6679  tionally specify
+00002ea0: 2061 2064 6174 6120 7479 7065 3a0d 0a0d   a data type:...
+00002eb0: 0a20 2020 203e 3e3e 2078 203d 2072 742e  .    >>> x = rt.
+00002ec0: 4661 7374 4172 7261 7928 5b33 2c20 362c  FastArray([3, 6,
+00002ed0: 2031 305d 2c20 2064 7479 7065 203d 2072   10],  dtype = r
+00002ee0: 742e 666c 6f61 7436 3429 0d0a 2020 2020  t.float64)..    
+00002ef0: 3e3e 3e20 782c 2078 2e64 7479 7065 0d0a  >>> x, x.dtype..
+00002f00: 2020 2020 2846 6173 7441 7272 6179 285b      (FastArray([
+00002f10: 2033 2e2c 2020 362e 2c20 3130 2e5d 292c   3.,  6., 10.]),
+00002f20: 2064 7479 7065 2827 666c 6f61 7436 3427   dtype('float64'
+00002f30: 2929 0d0a 0d0a 2020 2020 3e3e 3e20 2320  ))....    >>> # 
+00002f40: 5573 696e 6720 6120 7374 7269 6e67 2073  Using a string s
+00002f50: 686f 7274 6375 743a 0d0a 2020 2020 3e3e  hortcut:..    >>
+00002f60: 3e20 7820 3d20 7274 2e46 6173 7441 7272  > x = rt.FastArr
+00002f70: 6179 285b 332c 362c 3130 5d2c 2020 6474  ay([3,6,10],  dt
+00002f80: 7970 6520 3d20 2766 6c6f 6174 3634 2729  ype = 'float64')
+00002f90: 0d0a 2020 2020 3e3e 3e20 782c 2078 2e64  ..    >>> x, x.d
+00002fa0: 7479 7065 0d0a 2020 2020 2846 6173 7441  type..    (FastA
+00002fb0: 7272 6179 285b 2033 2e2c 2020 362e 2c20  rray([ 3.,  6., 
+00002fc0: 3130 2e5d 292c 2064 7479 7065 2827 666c  10.]), dtype('fl
+00002fd0: 6f61 7436 3427 2929 0d0a 0d0a 2020 2020  oat64'))....    
+00002fe0: 4279 2064 6566 6175 6c74 2c20 6368 6172  By default, char
+00002ff0: 6163 7465 7273 2061 7265 2073 746f 7265  acters are store
+00003000: 6420 6173 2062 7974 6520 7374 7269 6e67  d as byte string
+00003010: 732e 2057 6865 6e20 6060 756e 6963 6f64  s. When ``unicod
+00003020: 653d 5472 7565 6060 2c0d 0a20 2020 2074  e=True``,..    t
+00003030: 6865 2060 4661 7374 4172 7261 7960 2061  he `FastArray` a
+00003040: 6c6c 6f77 7320 556e 6963 6f64 6520 6368  llows Unicode ch
+00003050: 6172 6163 7465 7273 2e0d 0a0d 0a20 2020  aracters.....   
+00003060: 203e 3e3e 2072 742e 4641 286c 6973 7428   >>> rt.FA(list(
+00003070: 2761 6263 2729 2c20 756e 6963 6f64 653d  'abc'), unicode=
+00003080: 5472 7565 290d 0a20 2020 2046 6173 7441  True)..    FastA
+00003090: 7272 6179 285b 2761 272c 2027 6227 2c20  rray(['a', 'b', 
+000030a0: 2763 275d 2c20 6474 7970 653d 273c 5531  'c'], dtype='<U1
+000030b0: 2729 0d0a 0d0a 2020 2020 546f 2063 6f6e  ')....    To con
+000030c0: 7665 7274 2061 6e20 6578 6973 7469 6e67  vert an existing
+000030d0: 204e 756d 5079 2061 7272 6179 2c20 7573   NumPy array, us
+000030e0: 6520 7468 6520 6046 6173 7441 7272 6179  e the `FastArray
+000030f0: 6020 636f 6e73 7472 7563 746f 722e 0d0a  ` constructor...
+00003100: 0d0a 2020 2020 3e3e 3e20 6e70 5f61 7272  ..    >>> np_arr
+00003110: 203d 206e 702e 6172 7261 7928 5b31 2c20   = np.array([1, 
+00003120: 322c 2033 5d29 0d0a 2020 2020 3e3e 3e20  2, 3])..    >>> 
+00003130: 7274 2e46 4128 6e70 5f61 7272 290d 0a20  rt.FA(np_arr).. 
+00003140: 2020 2046 6173 7441 7272 6179 285b 312c     FastArray([1,
+00003150: 2032 2c20 335d 290d 0a0d 0a20 2020 2054   2, 3])....    T
+00003160: 6f20 7669 6577 2074 6865 204e 756d 5079  o view the NumPy
+00003170: 2061 7272 6179 2061 7320 6120 6046 6173   array as a `Fas
+00003180: 7441 7272 6179 6020 2877 6869 6368 2069  tArray` (which i
+00003190: 7320 736c 6967 6874 6c79 206c 6573 7320  s slightly less 
+000031a0: 6578 7065 6e73 6976 6520 7468 616e 0d0a  expensive than..
+000031b0: 2020 2020 7573 696e 6720 7468 6520 636f      using the co
+000031c0: 6e73 7472 7563 746f 7229 2c20 7573 6520  nstructor), use 
+000031d0: 7468 6520 6076 6965 7760 206d 6574 686f  the `view` metho
+000031e0: 642e 0d0a 0d0a 2020 2020 3e3e 3e20 6661  d.....    >>> fa
+000031f0: 203d 206e 705f 6172 722e 7669 6577 2846   = np_arr.view(F
+00003200: 4129 0d0a 2020 2020 3e3e 3e20 6661 0d0a  A)..    >>> fa..
+00003210: 2020 2020 4661 7374 4172 7261 7928 5b31      FastArray([1
+00003220: 2c20 322c 2033 5d29 0d0a 0d0a 2020 2020  , 2, 3])....    
+00003230: 546f 2076 6965 7720 6974 2061 7320 6120  To view it as a 
+00003240: 4e75 6d50 7920 6172 7261 7920 6167 6169  NumPy array agai
+00003250: 6e3a 0d0a 0d0a 2020 2020 3e3e 3e20 6661  n:....    >>> fa
+00003260: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
+00003270: 290d 0a20 2020 2061 7272 6179 285b 312c  )..    array([1,
+00003280: 2032 2c20 335d 290d 0a0d 0a20 2020 203e   2, 3])....    >
+00003290: 3e3e 2023 2041 6c74 6572 6e61 7469 7665  >> # Alternative
+000032a0: 6c79 3a0d 0a20 2020 203e 3e3e 2066 612e  ly:..    >>> fa.
+000032b0: 5f6e 700d 0a20 2020 2061 7272 6179 285b  _np..    array([
+000032c0: 312c 2032 2c20 335d 290d 0a0d 0a20 2020  1, 2, 3])....   
+000032d0: 202a 2a47 6574 2061 2053 7562 7365 7420   **Get a Subset 
+000032e0: 6f66 2061 2046 6173 7441 7272 6179 2a2a  of a FastArray**
+000032f0: 0d0a 0d0a 2020 2020 596f 7520 6361 6e20  ....    You can 
+00003300: 7573 6520 7374 616e 6461 7264 2050 7974  use standard Pyt
+00003310: 686f 6e20 736c 6963 696e 6720 6e6f 7461  hon slicing nota
+00003320: 7469 6f6e 206f 7220 6661 6e63 7920 696e  tion or fancy in
+00003330: 6465 7869 6e67 2074 6f20 6163 6365 7373  dexing to access
+00003340: 2061 0d0a 2020 2020 7375 6273 6574 206f   a..    subset o
+00003350: 6620 6120 6046 6173 7441 7272 6179 602e  f a `FastArray`.
+00003360: 0d0a 0d0a 2020 2020 3e3e 3e20 2320 4372  ....    >>> # Cr
+00003370: 6561 7465 2061 2046 6173 7441 7272 6179  eate a FastArray
+00003380: 3a0d 0a20 2020 203e 3e3e 2061 7272 6179  :..    >>> array
+00003390: 203d 2072 742e 6172 616e 6765 2838 292a   = rt.arange(8)*
+000033a0: 2a32 0d0a 2020 2020 3e3e 3e20 6172 7261  *2..    >>> arra
+000033b0: 790d 0a20 2020 2046 6173 7441 7272 6179  y..    FastArray
+000033c0: 285b 302c 2031 2c20 342c 2039 2c20 3136  ([0, 1, 4, 9, 16
+000033d0: 2c20 3235 2c20 3336 2c20 3439 5d29 0d0a  , 25, 36, 49])..
+000033e0: 2020 2020 3e3e 3e20 2320 5573 6520 5079      >>> # Use Py
+000033f0: 7468 6f6e 2073 6c69 6369 6e67 2074 6f20  thon slicing to 
+00003400: 6765 7420 656c 656d 656e 7473 2032 2c20  get elements 2, 
+00003410: 332c 2061 6e64 2034 3a0d 0a20 2020 203e  3, and 4:..    >
+00003420: 3e3e 2061 7272 6179 5b32 3a35 5d0d 0a20  >> array[2:5].. 
+00003430: 2020 2046 6173 7441 7272 6179 285b 342c     FastArray([4,
+00003440: 2039 2c20 3136 5d29 0d0a 0d0a 2020 2020   9, 16])....    
+00003450: 3e3e 3e20 2320 5573 6520 6661 6e63 7920  >>> # Use fancy 
+00003460: 696e 6465 7869 6e67 2074 6f20 6765 7420  indexing to get 
+00003470: 656c 656d 656e 7473 2032 2c20 342c 2061  elements 2, 4, a
+00003480: 6e64 2031 2028 696e 2074 6861 7420 6f72  nd 1 (in that or
+00003490: 6465 7229 3a0d 0a20 2020 203e 3e3e 2061  der):..    >>> a
+000034a0: 7272 6179 5b5b 322c 2034 2c20 315d 5d0d  rray[[2, 4, 1]].
+000034b0: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
+000034c0: 342c 2031 362c 2031 5d29 0d0a 0d0a 2020  4, 16, 1])....  
+000034d0: 2020 466f 7220 6d6f 7265 2064 6574 6169    For more detai
+000034e0: 6c73 2c20 7365 6520 7468 6520 6578 616d  ls, see the exam
+000034f0: 706c 6573 2066 6f72 2031 2d64 696d 656e  ples for 1-dimen
+00003500: 7369 6f6e 616c 2061 7272 6179 7320 696e  sional arrays in
+00003510: 204e 756d 5079 2773 2064 6f63 733a 0d0a   NumPy's docs:..
+00003520: 2020 2020 6049 6e64 6578 696e 6720 6f6e      `Indexing on
+00003530: 206e 6461 7272 6179 7320 3c68 7474 7073   ndarrays <https
+00003540: 3a2f 2f6e 756d 7079 2e6f 7267 2f64 6f63  ://numpy.org/doc
+00003550: 2f73 7461 626c 652f 7573 6572 2f62 6173  /stable/user/bas
+00003560: 6963 732e 696e 6465 7869 6e67 2e68 746d  ics.indexing.htm
+00003570: 6c3e 605f 2e0d 0a0d 0a20 2020 204e 6f74  l>`_.....    Not
+00003580: 6520 7468 6174 2073 6c69 6369 6e67 2063  e that slicing c
+00003590: 7265 6174 6573 2061 2076 6965 7720 6f66  reates a view of
+000035a0: 2074 6865 2061 7272 6179 2061 6e64 2064   the array and d
+000035b0: 6f65 7320 6e6f 7420 636f 7079 2074 6865  oes not copy the
+000035c0: 2075 6e64 6572 6c79 696e 6720 6461 7461   underlying data
+000035d0: 3b0d 0a20 2020 206d 6f64 6966 7969 6e67  ;..    modifying
+000035e0: 2074 6865 2073 6c69 6365 206d 6f64 6966   the slice modif
+000035f0: 6965 7320 7468 6520 6f72 6967 696e 616c  ies the original
+00003600: 2061 7272 6179 2e20 4661 6e63 7920 696e   array. Fancy in
+00003610: 6465 7869 6e67 2063 7265 6174 6573 2061  dexing creates a
+00003620: 2063 6f70 7920 6f66 0d0a 2020 2020 7468   copy of..    th
+00003630: 6520 6578 7472 6163 7465 6420 6461 7461  e extracted data
+00003640: 3b20 6d6f 6469 6679 696e 6720 7468 6973  ; modifying this
+00003650: 2061 7272 6179 2064 6f65 7320 6e6f 7420   array does not 
+00003660: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
+00003670: 6e61 6c20 6172 7261 792e 0d0a 0d0a 2020  nal array.....  
+00003680: 2020 596f 7520 6361 6e20 616c 736f 2070    You can also p
+00003690: 6173 7320 6120 426f 6f6c 6561 6e20 6d61  ass a Boolean ma
+000036a0: 736b 2061 7272 6179 2e0d 0a0d 0a20 2020  sk array.....   
+000036b0: 203e 3e3e 2023 2043 7265 6174 6520 6120   >>> # Create a 
+000036c0: 426f 6f6c 6561 6e20 6d61 736b 3a0d 0a20  Boolean mask:.. 
+000036d0: 2020 203e 3e3e 2065 7665 6e4d 6173 6b20     >>> evenMask 
+000036e0: 3d20 2861 7272 6179 2025 2032 203d 3d20  = (array % 2 == 
+000036f0: 3029 0d0a 2020 2020 3e3e 3e20 6576 656e  0)..    >>> even
+00003700: 4d61 736b 0d0a 2020 2020 4661 7374 4172  Mask..    FastAr
+00003710: 7261 7928 5b54 7275 652c 2046 616c 7365  ray([True, False
+00003720: 2c20 5472 7565 2c20 4661 6c73 652c 2054  , True, False, T
+00003730: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
+00003740: 2c20 4661 6c73 655d 290d 0a20 2020 203e  , False])..    >
+00003750: 3e3e 2023 2049 6e64 6578 2075 7369 6e67  >> # Index using
+00003760: 2074 6865 2042 6f6f 6c65 616e 206d 6173   the Boolean mas
+00003770: 6b3a 0d0a 2020 2020 3e3e 3e20 6172 7261  k:..    >>> arra
+00003780: 795b 6576 656e 4d61 736b 5d0d 0a20 2020  y[evenMask]..   
+00003790: 2046 6173 7441 7272 6179 285b 302c 2034   FastArray([0, 4
+000037a0: 2c20 3136 2c20 3336 5d29 0d0a 0d0a 2020  , 16, 36])....  
+000037b0: 2020 2a2a 486f 7720 746f 2053 7562 636c    **How to Subcl
+000037c0: 6173 7320 4661 7374 4172 7261 792a 2a0d  ass FastArray**.
+000037d0: 0a0d 0a20 2020 2049 6e63 6c75 6465 2074  ...    Include t
+000037e0: 6865 2072 6571 7569 7265 6420 636c 6173  he required clas
+000037f0: 7320 6465 6669 6e69 7469 6f6e 3a0d 0a0d  s definition:...
+00003800: 0a20 2020 203e 3e3e 2063 6c61 7373 2054  .    >>> class T
+00003810: 6573 7453 7562 636c 6173 7328 4661 7374  estSubclass(Fast
+00003820: 4172 7261 7929 3a0d 0a20 2020 202e 2e2e  Array):..    ...
+00003830: 2020 2020 2064 6566 205f 5f6e 6577 5f5f       def __new__
+00003840: 2863 6c73 2c20 6172 722c 202a 2a61 7267  (cls, arr, **arg
+00003850: 7329 3a0d 0a20 2020 202e 2e2e 2020 2020  s):..    ...    
+00003860: 2020 2020 2023 2042 6566 6f72 6520 7468       # Before th
+00003870: 6973 2063 616c 6c2c 2061 7272 206e 6565  is call, arr nee
+00003880: 6473 2074 6f20 6265 2061 206e 702e 6e64  ds to be a np.nd
+00003890: 6172 7261 7920 696e 7374 616e 6365 2e0d  array instance..
+000038a0: 0a20 2020 202e 2e2e 2020 2020 2020 2020  .    ...        
+000038b0: 2072 6574 7572 6e20 6172 722e 7669 6577   return arr.view
+000038c0: 2863 6c73 290d 0a20 2020 202e 2e2e 2020  (cls)..    ...  
+000038d0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000038e0: 7365 6c66 2c20 6172 722c 202a 2a61 7267  self, arr, **arg
+000038f0: 7329 3a0d 0a20 2020 202e 2e2e 2020 2020  s):..    ...    
+00003900: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
+00003910: 2049 6620 7468 6520 7375 6263 6c61 7373   If the subclass
+00003920: 2069 7320 636f 6d70 7574 6162 6c65 2c20   is computable, 
+00003930: 796f 7520 6d69 6768 7420 6465 6669 6e65  you might define
+00003940: 2079 6f75 7220 6f77 6e20 6d61 7468 206f   your own math o
+00003950: 7065 7261 7469 6f6e 732e 2049 6e20 7468  perations. In th
+00003960: 6573 650d 0a20 2020 206f 7065 7261 7469  ese..    operati
+00003970: 6f6e 732c 2079 6f75 206d 6967 6874 2064  ons, you might d
+00003980: 6566 696e 6520 7768 6174 2074 6865 2073  efine what the s
+00003990: 7562 636c 6173 7320 6361 6e20 6265 2063  ubclass can be c
+000039a0: 6f6d 7075 7465 6420 7769 7468 2e20 466f  omputed with. Fo
+000039b0: 7220 6578 616d 706c 6573 206f 660d 0a20  r examples of.. 
+000039c0: 2020 206e 6577 2064 6566 696e 6974 696f     new definitio
+000039d0: 6e73 2c20 7365 6520 7468 6520 6044 6174  ns, see the `Dat
+000039e0: 6554 696d 654e 616e 6f60 2063 6c61 7373  eTimeNano` class
+000039f0: 2e0d 0a0d 0a20 2020 2043 6f6d 6d6f 6e20  .....    Common 
+00003a00: 6f70 6572 6174 696f 6e73 2074 6f20 686f  operations to ho
+00003a10: 6f6b 2061 7265 2063 6f6d 7061 7269 736f  ok are compariso
+00003a20: 6e73 2028 6060 5f5f 6571 5f5f 2829 6060  ns (``__eq__()``
+00003a30: 2c20 6060 5f5f 6e65 5f5f 2829 6060 2c20  , ``__ne__()``, 
+00003a40: 6060 5f5f 6774 5f5f 2829 6060 2c0d 0a20  ``__gt__()``,.. 
+00003a50: 2020 2060 605f 5f6c 745f 5f28 2960 602c     ``__lt__()``,
+00003a60: 2060 605f 5f6c 655f 5f28 2960 602c 2060   ``__le__()``, `
+00003a70: 605f 5f67 655f 5f28 2960 6029 2061 6e64  `__ge__()``) and
+00003a80: 2062 6173 6963 206d 6174 6820 6675 6e63   basic math func
+00003a90: 7469 6f6e 7320 2860 605f 5f61 6464 5f5f  tions (``__add__
+00003aa0: 2829 6060 2c0d 0a20 2020 2060 605f 5f73  ()``,..    ``__s
+00003ab0: 7562 5f5f 2829 6060 2c20 6060 5f5f 6d75  ub__()``, ``__mu
+00003ac0: 6c5f 5f28 2960 602c 2065 7463 2e29 2e0d  l__()``, etc.)..
+00003ad0: 0a0d 0a20 2020 2042 7261 636b 6574 2069  ...    Bracket i
+00003ae0: 6e64 6578 696e 6720 6f70 6572 6174 696f  ndexing operatio
+00003af0: 6e73 2061 7265 2076 6572 7920 636f 6d6d  ns are very comm
+00003b00: 6f6e 2e20 4966 2074 6865 2073 7562 636c  on. If the subcl
+00003b10: 6173 7320 6e65 6564 7320 746f 2073 6574  ass needs to set
+00003b20: 206f 7220 7265 7475 726e 0d0a 2020 2020   or return..    
+00003b30: 6120 7661 6c75 6520 6f74 6865 7220 7468  a value other th
+00003b40: 616e 2074 6861 7420 696e 2074 6865 2075  an that in the u
+00003b50: 6e64 6572 6c79 696e 6720 6172 7261 792c  nderlying array,
+00003b60: 2079 6f75 206e 6565 6420 746f 2074 616b   you need to tak
+00003b70: 6520 6f76 6572 0d0a 2020 2020 605f 5f67  e over..    `__g
+00003b80: 6574 6974 656d 5f5f 2829 6020 6f72 2060  etitem__()` or `
+00003b90: 5f5f 7365 7469 7465 6d5f 5f28 2960 2e0d  __setitem__()`..
+00003ba0: 0a0d 0a20 2020 2049 6e64 6578 696e 6720  ...    Indexing 
+00003bb0: 6973 2061 6c73 6f20 7573 6564 2069 6e20  is also used in 
+00003bc0: 6469 7370 6c61 792e 2046 6f72 2072 6567  display. For reg
+00003bd0: 756c 6172 2063 6f6e 736f 6c65 2f6e 6f74  ular console/not
+00003be0: 6562 6f6f 6b20 6469 7370 6c61 792c 2079  ebook display, y
+00003bf0: 6f75 206e 6565 6420 746f 0d0a 2020 2020  ou need to..    
+00003c00: 7461 6b65 206f 7665 723a 0d0a 0d0a 2020  take over:....  
+00003c10: 2020 2a20 605f 5f72 6570 725f 5f28 2960    * `__repr__()`
+00003c20: 0d0a 2020 2020 2a20 605f 5f73 7472 5f5f  ..    * `__str__
+00003c30: 2829 600d 0a20 2020 202a 2060 5f72 6570  ()`..    * `_rep
+00003c40: 725f 6874 6d6c 5f28 2960 2028 666f 7220  r_html_()` (for 
+00003c50: 4a75 7079 7465 724c 6162 2061 6e64 204a  JupyterLab and J
+00003c60: 7570 7974 6572 206e 6f74 6562 6f6f 6b73  upyter notebooks
+00003c70: 290d 0a0d 0a20 2020 2049 6620 7468 6520  )....    If the 
+00003c80: 6172 7261 7920 6973 2062 6569 6e67 2064  array is being d
+00003c90: 6973 706c 6179 6564 2069 6e20 6120 6044  isplayed in a `D
+00003ca0: 6174 6173 6574 6020 616e 6420 796f 7520  ataset` and you 
+00003cb0: 7265 7175 6972 6520 6365 7274 6169 6e20  require certain 
+00003cc0: 666f 726d 6174 7469 6e67 2c20 796f 750d  formatting, you.
+00003cd0: 0a20 2020 206e 6565 6420 746f 2064 6566  .    need to def
+00003ce0: 696e 6520 7477 6f20 6d6f 7265 206d 6574  ine two more met
+00003cf0: 686f 6473 3a0d 0a0d 0a20 2020 2060 6064  hods:....    ``d
+00003d00: 6973 706c 6179 5f71 7565 7279 5f70 726f  isplay_query_pro
+00003d10: 7065 7274 6965 7328 2960 600d 0a20 2020  perties()``..   
+00003d20: 2020 2020 2052 6574 7572 6e73 2061 6e20       Returns an 
+00003d30: 6049 7465 6d46 6f72 6d61 7460 206f 626a  `ItemFormat` obj
+00003d40: 6563 7420 2873 6565 2060 7274 2e55 7469  ect (see `rt.Uti
+00003d50: 6c73 2e72 745f 6469 7370 6c61 795f 7072  ls.rt_display_pr
+00003d60: 6f70 6572 7469 6573 6029 0d0a 0d0a 2020  operties`)....  
+00003d70: 2020 6060 6469 7370 6c61 795f 636f 6e76    ``display_conv
+00003d80: 6572 745f 6675 6e63 2829 6060 0d0a 2020  ert_func()``..  
+00003d90: 2020 2020 2020 5468 6520 636f 6e76 6572        The conver
+00003da0: 7369 6f6e 2066 756e 6374 696f 6e20 7265  sion function re
+00003db0: 7475 726e 6564 2062 7920 6060 6469 7370  turned by ``disp
+00003dc0: 6c61 795f 7175 6572 795f 7072 6f70 6572  lay_query_proper
+00003dd0: 7469 6573 2829 6060 0d0a 2020 2020 2020  ties()``..      
+00003de0: 2020 6d75 7374 2072 6574 7572 6e20 6120    must return a 
+00003df0: 7374 7269 6e67 2e20 4561 6368 2069 7465  string. Each ite
+00003e00: 6d20 6265 696e 6720 6469 7370 6c61 7965  m being displaye
+00003e10: 642c 2074 6865 2072 6573 756c 7420 6f66  d, the result of
+00003e20: 2060 605f 5f67 6574 6974 656d 5f5f 2829   ``__getitem__()
+00003e30: 6060 0d0a 2020 2020 2020 2020 6174 2061  ``..        at a
+00003e40: 2073 696e 676c 6520 696e 6465 782c 2077   single index, w
+00003e50: 696c 6c20 676f 2074 6872 6f75 6768 2074  ill go through t
+00003e60: 6869 7320 6675 6e63 7469 6f6e 2069 6e64  his function ind
+00003e70: 6976 6964 7561 6c6c 792c 2061 6363 6f6d  ividually, accom
+00003e80: 7061 6e69 6564 2062 790d 0a20 2020 2020  panied by..     
+00003e90: 2020 2061 6e20 6049 7465 6d46 6f72 6d61     an `ItemForma
+00003ea0: 7460 206f 626a 6563 742e 0d0a 0d0a 2020  t` object.....  
+00003eb0: 2020 4d61 6e79 2052 6970 7461 626c 6520    Many Riptable 
+00003ec0: 6f70 6572 6174 696f 6e73 206e 6565 6420  operations need 
+00003ed0: 746f 2072 6574 7572 6e20 6172 7261 7973  to return arrays
+00003ee0: 206f 6620 7468 6520 7361 6d65 2063 6c61   of the same cla
+00003ef0: 7373 2074 6865 7920 7265 6365 6976 6564  ss they received
+00003f00: 2e20 546f 0d0a 2020 2020 656e 7375 7265  . To..    ensure
+00003f10: 2074 6861 7420 796f 7572 2073 7562 636c   that your subcl
+00003f20: 6173 7320 7769 6c6c 2072 6574 6169 6e20  ass will retain 
+00003f30: 6974 7320 7370 6563 6961 6c20 7072 6f70  its special prop
+00003f40: 6572 7469 6573 2c20 796f 7520 6e65 6564  erties, you need
+00003f50: 2074 6f20 7461 6b65 206f 7665 720d 0a20   to take over.. 
+00003f60: 2020 2060 6e65 7763 6c61 7373 6672 6f6d     `newclassfrom
+00003f70: 696e 7374 616e 6365 2829 602e 2046 6169  instance()`. Fai
+00003f80: 6c75 7265 2074 6f20 7461 6b65 2074 6869  lure to take thi
+00003f90: 7320 6f76 6572 2077 696c 6c20 6f66 7465  s over will ofte
+00003fa0: 6e20 7265 7375 6c74 2069 6e20 616e 206f  n result in an o
+00003fb0: 626a 6563 740d 0a20 2020 2077 6974 6820  bject..    with 
+00003fc0: 756e 696e 6974 6961 6c69 7a65 6420 7661  uninitialized va
+00003fd0: 7269 6162 6c65 732e 0d0a 0d0a 2020 2020  riables.....    
+00003fe0: 6063 6f70 7928 2960 2069 7320 616e 6f74  `copy()` is anot
+00003ff0: 6865 7220 6d65 7468 6f64 2074 6861 7420  her method that 
+00004000: 6973 2063 616c 6c65 6420 6765 6e65 7269  is called generi
+00004010: 6361 6c6c 7920 696e 2052 6970 7461 626c  cally in Riptabl
+00004020: 6520 726f 7574 696e 6573 2c20 616e 640d  e routines, and.
+00004030: 0a20 2020 206e 6565 6473 2074 6f20 6265  .    needs to be
+00004040: 2074 616b 656e 206f 7665 7220 746f 2072   taken over to r
+00004050: 6574 6169 6e20 7375 6263 6c61 7373 2070  etain subclass p
+00004060: 726f 7065 7274 6965 732e 0d0a 0d0a 2020  roperties.....  
+00004070: 2020 466f 7220 6120 7669 6577 206f 6620    For a view of 
+00004080: 7468 6520 756e 6465 726c 7969 6e67 2060  the underlying `
+00004090: 4661 7374 4172 7261 7960 2c20 796f 7520  FastArray`, you 
+000040a0: 6361 6e20 7573 6520 7468 6520 605f 6661  can use the `_fa
+000040b0: 6020 7072 6f70 6572 7479 2e0d 0a20 2020  ` property...   
+000040c0: 2022 2222 0d0a 0d0a 2020 2020 2320 4465   """....    # De
+000040d0: 6669 6e65 7320 6120 6765 6e65 7269 6320  fines a generic 
+000040e0: 6e70 2e6e 6461 7272 6179 2073 7562 636c  np.ndarray subcl
+000040f0: 6173 732c 2074 6861 7420 6361 6e20 6361  ass, that can ca
+00004100: 6368 6520 6e75 6d70 7920 6172 7261 7973  che numpy arrays
+00004110: 0d0a 2020 2020 2320 5374 6174 6963 2043  ..    # Static C
+00004120: 6c61 7373 2056 4152 4941 424c 4553 0d0a  lass VARIABLES..
+00004130: 0d0a 2020 2020 2320 6368 616e 6765 2074  ..    # change t
+00004140: 6869 7320 746f 2073 686f 7720 6f72 206c  his to show or l
+00004150: 6573 7320 7661 6c75 6573 206f 6e20 5f5f  ess values on __
+00004160: 7265 7072 5f5f 0d0a 2020 2020 4d41 585f  repr__..    MAX_
+00004170: 4449 5350 4c41 595f 4c45 4e20 3d20 3130  DISPLAY_LEN = 10
+00004180: 0d0a 0d0a 2020 2020 2320 7365 7420 746f  ....    # set to
+00004190: 2032 206f 7220 3320 666f 7220 6578 7472   2 or 3 for extr
+000041a0: 6120 6465 6275 6720 696e 666f 726d 6174  a debug informat
+000041b0: 696f 6e0d 0a20 2020 2056 6572 626f 7365  ion..    Verbose
+000041c0: 203d 2031 0d0a 0d0a 2020 2020 2320 7365   = 1....    # se
+000041d0: 7420 746f 2074 7275 6520 666f 7220 7265  t to true for re
+000041e0: 7573 696e 6720 6e75 6d70 7920 6172 7261  using numpy arra
+000041f0: 7973 2069 6e73 7465 6164 206f 6620 6465  ys instead of de
+00004200: 6c65 7469 6e67 2074 6865 6d20 636f 6d70  leting them comp
+00004210: 6c65 7465 6c79 0d0a 2020 2020 5265 6379  letely..    Recy
+00004220: 636c 6520 3d20 5472 7565 0d0a 0d0a 2020  cle = True....  
+00004230: 2020 2320 7365 7420 746f 2074 7275 6520    # set to true 
+00004240: 746f 2070 7265 7365 7276 6520 7365 6e74  to preserve sent
+00004250: 696e 656c 7320 6475 7269 6e67 2069 6e74  inels during int
+00004260: 6572 6e61 6c20 6172 7261 795f 7566 756e  ernal array_ufun
+00004270: 6320 6361 6c63 756c 6174 696f 6e73 0d0a  c calculations..
+00004280: 2020 2020 5361 6665 436f 6e76 6572 7369      SafeConversi
+00004290: 6f6e 7320 3d20 5472 7565 0d0a 0d0a 2020  ons = True....  
+000042a0: 2020 2320 7365 7420 746f 2066 616c 7365    # set to false
+000042b0: 2074 6f20 6265 206a 7573 7420 6e6f 726d   to be just norm
+000042c0: 616c 206e 756d 7079 0d0a 2020 2020 4661  al numpy..    Fa
+000042d0: 7374 6572 5546 756e 6320 3d20 5472 7565  sterUFunc = True
+000042e0: 0d0a 0d0a 2020 2020 4e45 575f 4152 5241  ....    NEW_ARRA
+000042f0: 595f 4655 4e43 5449 4f4e 5f45 4e41 424c  Y_FUNCTION_ENABL
+00004300: 4544 203d 2046 616c 7365 0d0a 2020 2020  ED = False..    
+00004310: 2222 2245 6e61 626c 6520 696d 706c 656d  """Enable implem
+00004320: 656e 7461 7469 6f6e 206f 6620 6172 7261  entation of arra
+00004330: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
+00004340: 636f 6c20 2864 6566 6175 6c74 2046 616c  col (default Fal
+00004350: 7365 292e 2222 220d 0a0d 0a20 2020 2023  se)."""....    #
+00004360: 2030 3d51 7569 6574 2c20 313d 5761 726e   0=Quiet, 1=Warn
+00004370: 2c20 323d 4578 6365 7074 696f 6e0d 0a20  , 2=Exception.. 
+00004380: 2020 2057 6172 6e69 6e67 4c65 7665 6c20     WarningLevel 
+00004390: 3d20 310d 0a0d 0a20 2020 2023 2073 6574  = 1....    # set
+000043a0: 2074 6f20 7472 7565 2074 6f20 6e6f 7420   to true to not 
+000043b0: 616c 6c6f 7720 6172 6172 7973 2077 6520  allow ararys we 
+000043c0: 646f 206e 6f74 2073 7570 706f 7274 0d0a  do not support..
+000043d0: 2020 2020 4e6f 546f 6c65 7261 6e63 6520      NoTolerance 
+000043e0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2023  = False....    #
+000043f0: 2073 6574 2074 6f20 6661 6c73 6520 746f   set to false to
+00004400: 206e 6f74 2063 6f6d 7072 6573 7320 7768   not compress wh
+00004410: 656e 2070 6963 6b6c 696e 670d 0a20 2020  en pickling..   
+00004420: 2043 6f6d 7072 6573 7350 6963 6b6c 6520   CompressPickle 
+00004430: 3d20 5472 7565 0d0a 0d0a 2020 2020 2320  = True....    # 
+00004440: 6120 6469 6374 696f 6e61 7279 2074 6f20  a dictionary to 
+00004450: 6176 6f69 6420 7265 7065 6174 696e 6720  avoid repeating 
+00004460: 7761 726e 696e 6773 2069 6e20 6d75 6c74  warnings in mult
+00004470: 6970 6c65 2070 6c61 6365 730d 0a20 2020  iple places..   
+00004480: 2023 2054 4f44 4f3a 2077 7261 7020 7468   # TODO: wrap th
+00004490: 6973 2069 6e20 6120 636c 6173 7320 736f  is in a class so
+000044a0: 2074 6861 7420 7761 726e 696e 6773 2063   that warnings c
+000044b0: 616e 2062 6520 7475 726e 6564 206f 6e2f  an be turned on/
+000044c0: 6f66 660d 0a20 2020 2057 6172 6e69 6e67  off..    Warning
+000044d0: 4469 6374 203d 207b 0d0a 2020 2020 2020  Dict = {..      
+000044e0: 2020 226d 756c 7469 706c 655f 6469 6d65    "multiple_dime
+000044f0: 6e73 696f 6e73 223a 2022 4661 7374 4172  nsions": "FastAr
+00004500: 7261 7920 636f 6e74 6169 6e73 2074 776f  ray contains two
+00004510: 206f 7220 6d6f 7265 2064 696d 656e 7369   or more dimensi
+00004520: 6f6e 7320 6772 6561 7465 7220 7468 616e  ons greater than
+00004530: 206f 6e65 202d 2073 6861 7065 3a7b 7d2e   one - shape:{}.
+00004540: 2020 5072 6f62 6c65 6d73 206d 6179 206f    Problems may o
+00004550: 6363 7572 2e22 0d0a 2020 2020 7d0d 0a0d  ccur."..    }...
+00004560: 0a20 2020 2023 2046 6f72 2072 6564 7563  .    # For reduc
+00004570: 7469 6f6e 206f 7065 7261 7469 6f6e 732c  tion operations,
+00004580: 2074 6865 2069 6465 6e74 6974 7920 656c   the identity el
+00004590: 656d 656e 7420 6f66 2074 6865 206f 7065  ement of the ope
+000045a0: 7261 7469 6f6e 2028 666f 7220 6f70 6572  ration (for oper
+000045b0: 6174 696f 6e73 0d0a 2020 2020 2320 7768  ations..    # wh
+000045c0: 6572 6520 7375 6368 2061 6e20 656c 656d  ere such an elem
+000045d0: 656e 7420 6973 2064 6566 696e 6564 292e  ent is defined).
+000045e0: 0d0a 2020 2020 2320 4e2e 422e 2041 7320  ..    # N.B. As 
+000045f0: 6f66 206e 756d 7079 2031 2e31 3920 6974  of numpy 1.19 it
+00004600: 2064 6f65 7320 6e6f 7420 6170 7065 6172   does not appear
+00004610: 2074 6865 7265 2773 2061 2073 7472 6169   there's a strai
+00004620: 6768 7466 6f72 7761 7264 2077 6179 206f  ghtforward way o
+00004630: 6620 6765 7474 696e 6720 6672 6f6d 0d0a  f getting from..
+00004640: 2020 2020 2320 2020 736f 6d65 7468 696e      #   somethin
+00004650: 6720 6c69 6b65 2060 606e 702e 7375 6d60  g like ``np.sum`
+00004660: 6020 6261 636b 2074 6f20 6060 6e70 2e61  ` back to ``np.a
+00004670: 6464 6060 2c20 6672 6f6d 2077 6869 6368  dd``, from which
+00004680: 2077 6520 636f 756c 6420 6765 7420 7468   we could get th
+00004690: 6520 2e69 6465 6e74 6974 7920 7072 6f70  e .identity prop
+000046a0: 6572 7479 2e0d 0a20 2020 2023 2020 2049  erty...    #   I
+000046b0: 6620 7468 6174 2065 7665 7220 6368 616e  f that ever chan
+000046c0: 6765 732c 2074 6869 7320 6469 6374 696f  ges, this dictio
+000046d0: 6e61 7279 2077 6f75 6c64 206e 6f20 6c6f  nary would no lo
+000046e0: 6e67 6572 2062 6520 6e65 6365 7373 6172  nger be necessar
+000046f0: 7920 736f 2069 7420 6361 6e2b 7368 6f75  y so it can+shou
+00004700: 6c64 2062 6520 7265 6d6f 7665 642e 0d0a  ld be removed...
+00004710: 2020 2020 5f72 6564 7563 655f 6f70 5f69      _reduce_op_i
+00004720: 6465 6e74 6974 795f 7661 6c75 653a 204d  dentity_value: M
+00004730: 6170 7069 6e67 5b52 4544 5543 455f 4655  apping[REDUCE_FU
+00004740: 4e43 5449 4f4e 532c 2041 6e79 5d20 3d20  NCTIONS, Any] = 
+00004750: 7b0d 0a20 2020 2020 2020 2052 4544 5543  {..        REDUC
+00004760: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00004770: 4345 5f41 4c4c 3a20 5472 7565 2c20 2023  CE_ALL: True,  #
+00004780: 206e 702e 616c 6c28 6e70 2e61 7272 6179   np.all(np.array
+00004790: 285b 5d29 290d 0a20 2020 2020 2020 2052  ([]))..        R
+000047a0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+000047b0: 5245 4455 4345 5f41 4e59 3a20 4661 6c73  REDUCE_ANY: Fals
+000047c0: 652c 2020 2320 6e70 2e61 6e79 286e 702e  e,  # np.any(np.
+000047d0: 6172 7261 7928 5b5d 2929 0d0a 2020 2020  array([]))..    
+000047e0: 2020 2020 5245 4455 4345 5f46 554e 4354      REDUCE_FUNCT
+000047f0: 494f 4e53 2e52 4544 5543 455f 4e41 4e53  IONS.REDUCE_NANS
+00004800: 554d 3a20 6e70 2e61 6464 2e69 6465 6e74  UM: np.add.ident
+00004810: 6974 792c 0d0a 2020 2020 2020 2020 5245  ity,..        RE
+00004820: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00004830: 4544 5543 455f 5355 4d3a 206e 702e 6164  EDUCE_SUM: np.ad
+00004840: 642e 6964 656e 7469 7479 2c0d 0a20 2020  d.identity,..   
+00004850: 207d 0d0a 0d0a 2020 2020 2320 2d2d 2d2d   }....    # ----
 00004860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000048a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000048b0: 636c 6173 7320 5f41 7272 6179 4675 6e63  class _ArrayFunc
-000048c0: 7469 6f6e 4865 6c70 6572 3a0d 0a20 2020  tionHelper:..   
-000048d0: 2020 2020 2023 2054 4f44 4f20 6164 6420       # TODO add 
-000048e0: 7573 6167 6520 6578 616d 706c 6573 0d0a  usage examples..
-000048f0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00004900: 2020 2020 2041 7272 6179 2066 756e 6374       Array funct
-00004910: 696f 6e20 6865 6c70 6572 2069 7320 7265  ion helper is re
-00004920: 7370 6f6e 7369 626c 6520 6d61 696e 7461  sponsible mainta
-00004930: 696e 696e 6720 7468 6520 6172 7261 7920  ining the array 
-00004940: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-00004950: 6c20 6172 7261 7920 696d 706c 656d 656e  l array implemen
-00004960: 7461 7469 6f6e 7320 696e 2074 6865 0d0a  tations in the..
-00004970: 2020 2020 2020 2020 666f 726d 206f 6620          form of 
-00004980: 7468 6520 666f 6c6c 6f77 696e 6720 4150  the following AP
-00004990: 493a 0d0a 0d0a 2020 2020 2020 2020 2d20  I:....        - 
-000049a0: 6765 745f 6172 7261 795f 6675 6e63 7469  get_array_functi
-000049b0: 6f6e 3a20 6769 7665 6e20 7468 6520 4e75  on: given the Nu
-000049c0: 6d70 7920 6675 6e63 7469 6f6e 2c20 7265  mpy function, re
-000049d0: 7475 726e 7320 6f76 6572 7269 6464 656e  turns overridden
-000049e0: 2061 7272 6179 2066 756e 6374 696f 6e0d   array function.
-000049f0: 0a20 2020 2020 2020 202d 2067 6574 5f61  .        - get_a
-00004a00: 7272 6179 5f66 756e 6374 696f 6e5f 7479  rray_function_ty
-00004a10: 7065 5f63 6f6d 7061 7469 6269 6c69 7479  pe_compatibility
-00004a20: 5f63 6865 636b 3a20 6769 7665 6e20 7468  _check: given th
-00004a30: 6520 4e75 6d70 7920 6675 6e63 7469 6f6e  e Numpy function
-00004a40: 2c20 7265 7475 726e 7320 6f76 6572 7269  , returns overri
-00004a50: 6464 656e 2061 7272 6179 2066 756e 6374  dden array funct
-00004a60: 696f 6e20 7479 7065 2063 6f6d 7061 7469  ion type compati
-00004a70: 6269 6c69 7479 2063 6865 636b 0d0a 2020  bility check..  
-00004a80: 2020 2020 2020 2d20 7265 6769 7374 6572        - register
-00004a90: 5f61 7272 6179 5f66 756e 6374 696f 6e3a  _array_function:
-00004aa0: 2061 2066 756e 6374 696f 6e20 6465 636f   a function deco
-00004ab0: 7261 746f 7220 7768 6f73 6520 6172 6775  rator whose argu
-00004ac0: 6d65 6e74 2069 7320 7468 6520 4e75 6d70  ment is the Nump
-00004ad0: 7920 6675 6e63 7469 6f6e 2074 6f20 6f76  y function to ov
-00004ae0: 6572 7269 6465 2061 6e64 2074 6865 2066  erride and the f
-00004af0: 756e 6374 696f 6e20 7468 6174 2077 696c  unction that wil
-00004b00: 6c20 6f76 6572 7269 6465 2069 740d 0a20  l override it.. 
-00004b10: 2020 2020 2020 202d 2072 6567 6973 7465         - registe
-00004b20: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00004b30: 5f74 7970 655f 636f 6d70 6174 6962 696c  _type_compatibil
-00004b40: 6974 793a 2073 696d 696c 6172 2074 6f20  ity: similar to 
-00004b50: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
-00004b60: 756e 6374 696f 6e2c 2062 7574 2067 7561  unction, but gua
-00004b70: 7264 7320 6167 6169 6e73 7420 696e 636f  rds against inco
-00004b80: 6d70 6174 6962 6c65 2061 7272 6179 2066  mpatible array f
-00004b90: 756e 6374 696f 6e20 7072 6f74 6f63 6f6c  unction protocol
-00004ba0: 2074 7970 6520 6172 6775 6d65 6e74 7320   type arguments 
-00004bb0: 666f 7220 7468 6520 6769 7665 6e20 4e75  for the given Nu
-00004bc0: 6d70 7920 6675 6e63 7469 6f6e 0d0a 2020  mpy function..  
-00004bd0: 2020 2020 2020 2d20 6465 7265 6769 7374        - deregist
-00004be0: 6572 3a20 6465 7265 6769 7374 7261 7469  er: deregistrati
-00004bf0: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
-00004c00: 6675 6e63 7469 6f6e 2061 6e64 2074 7970  function and typ
-00004c10: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-00004c20: 6f76 6572 7269 6465 0d0a 2020 2020 2020  override..      
-00004c30: 2020 2d20 6465 7265 6769 7374 6572 5f61    - deregister_a
-00004c40: 7272 6179 5f66 756e 6374 696f 6e5f 7479  rray_function_ty
-00004c50: 7065 5f63 6f6d 7061 7469 6269 6c69 7479  pe_compatibility
-00004c60: 3a20 6465 7265 6769 7374 7261 7469 6f6e  : deregistration
-00004c70: 206f 6620 4e75 6d70 7920 6675 6e63 7469   of Numpy functi
-00004c80: 6f6e 2074 7970 6520 636f 6d70 6174 6962  on type compatib
-00004c90: 696c 6974 7920 6f76 6572 7269 6465 0d0a  ility override..
-00004ca0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00004cb0: 2020 2020 2020 2023 2054 4f44 4f20 6465         # TODO de
-00004cc0: 7369 676e 2063 6f6e 7369 6465 7261 7469  sign considerati
-00004cd0: 6f6e 202d 2075 7369 6e67 2061 2073 696e  on - using a sin
-00004ce0: 676c 6520 6469 6374 2077 6974 6820 7475  gle dict with tu
-00004cf0: 706c 6520 7479 7065 2063 6f6d 7061 7469  ple type compati
-00004d00: 6269 6c69 7479 2061 6e64 2072 6564 6972  bility and redir
-00004d10: 6563 7465 6420 6361 6c6c 6162 6c65 730d  ected callables.
-00004d20: 0a20 2020 2020 2020 2023 2077 6865 7265  .        # where
-00004d30: 2061 2064 6566 6175 6c74 2074 7970 6520   a default type 
-00004d40: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
-00004d50: 6563 6b20 6361 6e20 6265 2074 6865 2064  eck can be the d
-00004d60: 6566 6175 6c74 2076 616c 7565 0d0a 2020  efault value..  
-00004d70: 2020 2020 2020 2320 6120 6469 6374 696f        # a dictio
-00004d80: 6e61 7279 2074 6861 7420 6d61 7073 206e  nary that maps n
-00004d90: 756d 7079 2066 756e 6374 696f 6e73 2074  umpy functions t
-00004da0: 6f20 6f75 7220 6375 7374 6f6d 2076 6172  o our custom var
-00004db0: 6961 6e74 730d 0a20 2020 2020 2020 2048  iants..        H
-00004dc0: 414e 444c 4544 5f46 554e 4354 494f 4e53  ANDLED_FUNCTIONS
-00004dd0: 3a20 4469 6374 5b63 616c 6c61 626c 652c  : Dict[callable,
-00004de0: 2063 616c 6c61 626c 655d 203d 207b 7d0d   callable] = {}.
-00004df0: 0a20 2020 2020 2020 2022 2222 4469 6374  .        """Dict
-00004e00: 696f 6e61 7279 206f 6620 4e75 6d70 7920  ionary of Numpy 
-00004e10: 4150 4920 6675 6e63 7469 6f6e 2077 6974  API function wit
-00004e20: 6820 6f76 6572 7269 6464 656e 2066 756e  h overridden fun
-00004e30: 6374 696f 6e73 2e22 2222 0d0a 2020 2020  ctions."""..    
-00004e40: 2020 2020 4841 4e44 4c45 445f 5459 5045      HANDLED_TYPE
-00004e50: 5f43 4f4d 5041 5449 4249 4c49 5459 5f43  _COMPATIBILITY_C
-00004e60: 4845 434b 3a20 4469 6374 5b63 616c 6c61  HECK: Dict[calla
-00004e70: 626c 652c 2063 616c 6c61 626c 655d 203d  ble, callable] =
-00004e80: 207b 7d0d 0a20 2020 2020 2020 2022 2222   {}..        """
-00004e90: 4469 6374 696f 6e61 7279 206f 6620 7479  Dictionary of ty
-00004ea0: 7065 2063 6f6d 7061 7469 6269 6c69 7479  pe compatibility
-00004eb0: 2066 756e 6374 696f 6e73 2070 6572 2065   functions per e
-00004ec0: 6163 6820 4e75 6d70 7920 4150 4920 6f76  ach Numpy API ov
-00004ed0: 6572 7269 6464 656e 2066 756e 6374 696f  erridden functio
-00004ee0: 6e2e 2222 220d 0a0d 0a20 2020 2020 2020  n."""....       
-00004ef0: 2040 636c 6173 736d 6574 686f 640d 0a20   @classmethod.. 
-00004f00: 2020 2020 2020 2064 6566 2067 6574 5f61         def get_a
-00004f10: 7272 6179 5f66 756e 6374 696f 6e28 636c  rray_function(cl
-00004f20: 732c 206e 705f 6675 6e63 7469 6f6e 3a20  s, np_function: 
-00004f30: 4361 6c6c 6162 6c65 2920 2d3e 204f 7074  Callable) -> Opt
-00004f40: 696f 6e61 6c5b 4361 6c6c 6162 6c65 5d3a  ional[Callable]:
-00004f50: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
-00004f60: 220d 0a20 2020 2020 2020 2020 2020 2047  "..            G
-00004f70: 6976 656e 2074 6865 204e 756d 7079 2066  iven the Numpy f
-00004f80: 756e 6374 696f 6e2c 2072 6574 7572 6e73  unction, returns
-00004f90: 206f 7665 7272 6964 6465 6e20 6172 7261   overridden arra
-00004fa0: 7920 6675 6e63 7469 6f6e 2069 6620 696d  y function if im
-00004fb0: 706c 656d 656e 7465 642c 206f 7468 6572  plemented, other
-00004fc0: 7769 7365 204e 6f6e 652e 0d0a 0d0a 2020  wise None.....  
-00004fd0: 2020 2020 2020 2020 2020 5061 7261 6d65            Parame
-00004fe0: 7465 7273 0d0a 2020 2020 2020 2020 2020  ters..          
-00004ff0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-00005000: 2020 2020 2020 2020 2020 6e70 5f66 756e            np_fun
-00005010: 6374 696f 6e3a 2063 616c 6c61 626c 650d  ction: callable.
-00005020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005030: 2054 6865 206f 7665 7272 6964 6465 6e20   The overridden 
-00005040: 4e75 6d70 7920 6172 7261 7920 6675 6e63  Numpy array func
-00005050: 7469 6f6e 2e0d 0a0d 0a20 2020 2020 2020  tion.....       
-00005060: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00005070: 2020 2020 2020 2020 2020 2d2d 2d2d 2d2d            ------
-00005080: 2d0d 0a20 2020 2020 2020 2020 2020 2063  -..            c
-00005090: 616c 6c61 626c 652c 206f 7074 696f 6e61  allable, optiona
-000050a0: 6c0d 0a20 2020 2020 2020 2020 2020 2020  l..             
-000050b0: 2020 2054 6865 206f 7665 7272 6964 6465     The overridde
-000050c0: 6e20 6675 6e63 7469 6f6e 2061 7320 6120  n function as a 
-000050d0: 6361 6c6c 6162 6c65 206f 7220 4e6f 6e65  callable or None
-000050e0: 2069 6620 6974 2773 206e 6f74 2069 6d70   if it's not imp
-000050f0: 6c65 6d65 6e74 6564 2e0d 0a20 2020 2020  lemented...     
-00005100: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00005110: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-00005120: 6c73 2e48 414e 444c 4544 5f46 554e 4354  ls.HANDLED_FUNCT
-00005130: 494f 4e53 2e67 6574 286e 705f 6675 6e63  IONS.get(np_func
-00005140: 7469 6f6e 2c20 4e6f 6e65 290d 0a0d 0a20  tion, None).... 
-00005150: 2020 2020 2020 2040 636c 6173 736d 6574         @classmet
-00005160: 686f 640d 0a20 2020 2020 2020 2064 6566  hod..        def
-00005170: 2067 6574 5f61 7272 6179 5f66 756e 6374   get_array_funct
-00005180: 696f 6e5f 7479 7065 5f63 6f6d 7061 7469  ion_type_compati
-00005190: 6269 6c69 7479 5f63 6865 636b 2863 6c73  bility_check(cls
-000051a0: 2c20 6e70 5f66 756e 6374 696f 6e3a 2043  , np_function: C
-000051b0: 616c 6c61 626c 6529 202d 3e20 4f70 7469  allable) -> Opti
-000051c0: 6f6e 616c 5b43 616c 6c61 626c 655d 3a0d  onal[Callable]:.
-000051d0: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
-000051e0: 0d0a 2020 2020 2020 2020 2020 2020 4769  ..            Gi
-000051f0: 7665 6e20 7468 6520 4e75 6d70 7920 6675  ven the Numpy fu
-00005200: 6e63 7469 6f6e 2c20 7265 7475 726e 7320  nction, returns 
-00005210: 7468 6520 636f 7272 6573 706f 6e64 696e  the correspondin
-00005220: 6720 6172 7261 7920 6675 6e63 7469 6f6e  g array function
-00005230: 2074 7970 6520 636f 6d70 6174 6962 696c   type compatibil
-00005240: 6974 7920 6361 6c6c 6162 6c65 2c20 6f74  ity callable, ot
-00005250: 6865 7277 6973 6520 4e6f 6e65 2e0d 0a0d  herwise None....
-00005260: 0a20 2020 2020 2020 2020 2020 2050 6172  .            Par
-00005270: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00005280: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00005290: 0a20 2020 2020 2020 2020 2020 206e 705f  .            np_
-000052a0: 6675 6e63 7469 6f6e 3a20 6361 6c6c 6162  function: callab
-000052b0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-000052c0: 2020 2020 5468 6520 6f76 6572 7269 6464      The overridd
-000052d0: 656e 204e 756d 7079 2061 7272 6179 2066  en Numpy array f
-000052e0: 756e 6374 696f 6e2e 0d0a 0d0a 2020 2020  unction.....    
-000052f0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00005300: 0a20 2020 2020 2020 2020 2020 202d 2d2d  .            ---
-00005310: 2d2d 2d2d 0d0a 2020 2020 2020 2020 2020  ----..          
-00005320: 2020 6361 6c6c 6162 6c65 2c20 6f70 7469    callable, opti
-00005330: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-00005340: 2020 2020 2020 5468 6520 6f76 6572 7269        The overri
-00005350: 6464 656e 2074 7970 6520 636f 6d70 6174  dden type compat
-00005360: 6962 696c 6974 7920 6675 6e63 7469 6f6e  ibility function
-00005370: 2061 7320 6120 6361 6c6c 6162 6c65 206f   as a callable o
-00005380: 7220 4e6f 6e65 2069 6620 6974 2773 206e  r None if it's n
-00005390: 6f74 2069 6d70 6c65 6d65 6e74 6564 2e0d  ot implemented..
-000053a0: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
-000053b0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000053c0: 7475 726e 2063 6c73 2e48 414e 444c 4544  turn cls.HANDLED
-000053d0: 5f54 5950 455f 434f 4d50 4154 4942 494c  _TYPE_COMPATIBIL
-000053e0: 4954 595f 4348 4543 4b2e 6765 7428 6e70  ITY_CHECK.get(np
-000053f0: 5f66 756e 6374 696f 6e2c 204e 6f6e 6529  _function, None)
-00005400: 0d0a 0d0a 2020 2020 2020 2020 4063 6c61  ....        @cla
-00005410: 7373 6d65 7468 6f64 0d0a 2020 2020 2020  ssmethod..      
-00005420: 2020 6465 6620 7265 6769 7374 6572 5f61    def register_a
-00005430: 7272 6179 5f66 756e 6374 696f 6e28 636c  rray_function(cl
-00005440: 732c 206e 705f 6675 6e63 7469 6f6e 3a20  s, np_function: 
-00005450: 4361 6c6c 6162 6c65 2920 2d3e 2043 616c  Callable) -> Cal
-00005460: 6c61 626c 653a 0d0a 2020 2020 2020 2020  lable:..        
-00005470: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00005480: 2020 2020 2020 4120 6675 6e63 7469 6f6e        A function
-00005490: 2064 6563 6f72 6174 6f72 2077 686f 7365   decorator whose
-000054a0: 2061 7267 756d 656e 7420 6973 2074 6865   argument is the
-000054b0: 204e 756d 7079 2066 756e 6374 696f 6e20   Numpy function 
-000054c0: 746f 206f 7665 7272 6964 6520 616e 6420  to override and 
-000054d0: 7468 6520 6675 6e63 7469 6f6e 2074 6861  the function tha
-000054e0: 7420 7769 6c6c 206f 7665 7272 6964 6520  t will override 
-000054f0: 6974 2e0d 0a20 2020 2020 2020 2020 2020  it...           
-00005500: 2020 5468 6973 2072 6567 6973 7465 7273    This registers
-00005510: 2074 6865 2060 6e70 5f66 756e 6374 696f   the `np_functio
-00005520: 6e60 2077 6974 6820 7468 6520 6675 6e63  n` with the func
-00005530: 7469 6f6e 2074 6861 7420 6974 2064 6563  tion that it dec
-00005540: 6f72 6174 6573 2e0d 0a0d 0a20 2020 2020  orates.....     
-00005550: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00005560: 730d 0a20 2020 2020 2020 2020 2020 202d  s..            -
-00005570: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-00005580: 2020 2020 2020 206e 705f 6675 6e63 7469         np_functi
-00005590: 6f6e 3a20 6361 6c6c 6162 6c65 0d0a 2020  on: callable..  
-000055a0: 2020 2020 2020 2020 2020 2020 2020 5468                Th
-000055b0: 6520 6f76 6572 7269 6464 656e 204e 756d  e overridden Num
-000055c0: 7079 2061 7272 6179 2066 756e 6374 696f  py array functio
-000055d0: 6e2e 0d0a 0d0a 2020 2020 2020 2020 2020  n.....          
-000055e0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-000055f0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00005600: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
-00005610: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
-00005620: 2020 2020 2020 5468 6520 6465 636f 7261        The decora
-00005630: 746f 7220 7468 6174 2072 6567 6973 7465  tor that registe
-00005640: 7273 2060 6e70 5f66 756e 6374 696f 6e60  rs `np_function`
-00005650: 2077 6974 6820 7468 6520 6465 636f 7261   with the decora
-00005660: 7465 6420 6675 6e63 7469 6f6e 2e0d 0a20  ted function... 
-00005670: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
-00005680: 2020 2020 2020 2020 2020 2020 2320 4077              # @w
-00005690: 7261 7073 286e 705f 6675 6e63 7469 6f6e  raps(np_function
-000056a0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-000056b0: 6566 2064 6563 6f72 6174 6f72 2866 756e  ef decorator(fun
-000056c0: 6329 3a0d 0a20 2020 2020 2020 2020 2020  c):..           
-000056d0: 2020 2020 2063 6c73 2e48 414e 444c 4544       cls.HANDLED
-000056e0: 5f46 554e 4354 494f 4e53 5b6e 705f 6675  _FUNCTIONS[np_fu
-000056f0: 6e63 7469 6f6e 5d20 3d20 6675 6e63 0d0a  nction] = func..
-00005700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005710: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
-00005720: 6c65 6446 6f72 286c 6f67 6769 6e67 2e44  ledFor(logging.D
-00005730: 4542 5547 293a 0d0a 2020 2020 2020 2020  EBUG):..        
-00005740: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
-00005750: 6572 2e64 6562 7567 280d 0a20 2020 2020  er.debug(..     
+000048a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 636c 6173  ------..    clas
+000048b0: 7320 5f41 7272 6179 4675 6e63 7469 6f6e  s _ArrayFunction
+000048c0: 4865 6c70 6572 3a0d 0a20 2020 2020 2020  Helper:..       
+000048d0: 2023 2054 4f44 4f20 6164 6420 7573 6167   # TODO add usag
+000048e0: 6520 6578 616d 706c 6573 0d0a 2020 2020  e examples..    
+000048f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00004900: 2041 7272 6179 2066 756e 6374 696f 6e20   Array function 
+00004910: 6865 6c70 6572 2069 7320 7265 7370 6f6e  helper is respon
+00004920: 7369 626c 6520 6d61 696e 7461 696e 696e  sible maintainin
+00004930: 6720 7468 6520 6172 7261 7920 6675 6e63  g the array func
+00004940: 7469 6f6e 2070 726f 746f 636f 6c20 6172  tion protocol ar
+00004950: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
+00004960: 6f6e 7320 696e 2074 6865 0d0a 2020 2020  ons in the..    
+00004970: 2020 2020 666f 726d 206f 6620 7468 6520      form of the 
+00004980: 666f 6c6c 6f77 696e 6720 4150 493a 0d0a  following API:..
+00004990: 0d0a 2020 2020 2020 2020 2d20 6765 745f  ..        - get_
+000049a0: 6172 7261 795f 6675 6e63 7469 6f6e 3a20  array_function: 
+000049b0: 6769 7665 6e20 7468 6520 4e75 6d70 7920  given the Numpy 
+000049c0: 6675 6e63 7469 6f6e 2c20 7265 7475 726e  function, return
+000049d0: 7320 6f76 6572 7269 6464 656e 2061 7272  s overridden arr
+000049e0: 6179 2066 756e 6374 696f 6e0d 0a20 2020  ay function..   
+000049f0: 2020 2020 202d 2067 6574 5f61 7272 6179       - get_array
+00004a00: 5f66 756e 6374 696f 6e5f 7479 7065 5f63  _function_type_c
+00004a10: 6f6d 7061 7469 6269 6c69 7479 5f63 6865  ompatibility_che
+00004a20: 636b 3a20 6769 7665 6e20 7468 6520 4e75  ck: given the Nu
+00004a30: 6d70 7920 6675 6e63 7469 6f6e 2c20 7265  mpy function, re
+00004a40: 7475 726e 7320 6f76 6572 7269 6464 656e  turns overridden
+00004a50: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
+00004a60: 7479 7065 2063 6f6d 7061 7469 6269 6c69  type compatibili
+00004a70: 7479 2063 6865 636b 0d0a 2020 2020 2020  ty check..      
+00004a80: 2020 2d20 7265 6769 7374 6572 5f61 7272    - register_arr
+00004a90: 6179 5f66 756e 6374 696f 6e3a 2061 2066  ay_function: a f
+00004aa0: 756e 6374 696f 6e20 6465 636f 7261 746f  unction decorato
+00004ab0: 7220 7768 6f73 6520 6172 6775 6d65 6e74  r whose argument
+00004ac0: 2069 7320 7468 6520 4e75 6d70 7920 6675   is the Numpy fu
+00004ad0: 6e63 7469 6f6e 2074 6f20 6f76 6572 7269  nction to overri
+00004ae0: 6465 2061 6e64 2074 6865 2066 756e 6374  de and the funct
+00004af0: 696f 6e20 7468 6174 2077 696c 6c20 6f76  ion that will ov
+00004b00: 6572 7269 6465 2069 740d 0a20 2020 2020  erride it..     
+00004b10: 2020 202d 2072 6567 6973 7465 725f 6172     - register_ar
+00004b20: 7261 795f 6675 6e63 7469 6f6e 5f74 7970  ray_function_typ
+00004b30: 655f 636f 6d70 6174 6962 696c 6974 793a  e_compatibility:
+00004b40: 2073 696d 696c 6172 2074 6f20 7265 6769   similar to regi
+00004b50: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00004b60: 696f 6e2c 2062 7574 2067 7561 7264 7320  ion, but guards 
+00004b70: 6167 6169 6e73 7420 696e 636f 6d70 6174  against incompat
+00004b80: 6962 6c65 2061 7272 6179 2066 756e 6374  ible array funct
+00004b90: 696f 6e20 7072 6f74 6f63 6f6c 2074 7970  ion protocol typ
+00004ba0: 6520 6172 6775 6d65 6e74 7320 666f 7220  e arguments for 
+00004bb0: 7468 6520 6769 7665 6e20 4e75 6d70 7920  the given Numpy 
+00004bc0: 6675 6e63 7469 6f6e 0d0a 2020 2020 2020  function..      
+00004bd0: 2020 2d20 6465 7265 6769 7374 6572 3a20    - deregister: 
+00004be0: 6465 7265 6769 7374 7261 7469 6f6e 206f  deregistration o
+00004bf0: 6620 7468 6520 4e75 6d70 7920 6675 6e63  f the Numpy func
+00004c00: 7469 6f6e 2061 6e64 2074 7970 6520 636f  tion and type co
+00004c10: 6d70 6174 6962 696c 6974 7920 6f76 6572  mpatibility over
+00004c20: 7269 6465 0d0a 2020 2020 2020 2020 2d20  ride..        - 
+00004c30: 6465 7265 6769 7374 6572 5f61 7272 6179  deregister_array
+00004c40: 5f66 756e 6374 696f 6e5f 7479 7065 5f63  _function_type_c
+00004c50: 6f6d 7061 7469 6269 6c69 7479 3a20 6465  ompatibility: de
+00004c60: 7265 6769 7374 7261 7469 6f6e 206f 6620  registration of 
+00004c70: 4e75 6d70 7920 6675 6e63 7469 6f6e 2074  Numpy function t
+00004c80: 7970 6520 636f 6d70 6174 6962 696c 6974  ype compatibilit
+00004c90: 7920 6f76 6572 7269 6465 0d0a 0d0a 2020  y override....  
+00004ca0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00004cb0: 2020 2023 2054 4f44 4f20 6465 7369 676e     # TODO design
+00004cc0: 2063 6f6e 7369 6465 7261 7469 6f6e 202d   consideration -
+00004cd0: 2075 7369 6e67 2061 2073 696e 676c 6520   using a single 
+00004ce0: 6469 6374 2077 6974 6820 7475 706c 6520  dict with tuple 
+00004cf0: 7479 7065 2063 6f6d 7061 7469 6269 6c69  type compatibili
+00004d00: 7479 2061 6e64 2072 6564 6972 6563 7465  ty and redirecte
+00004d10: 6420 6361 6c6c 6162 6c65 730d 0a20 2020  d callables..   
+00004d20: 2020 2020 2023 2077 6865 7265 2061 2064       # where a d
+00004d30: 6566 6175 6c74 2074 7970 6520 636f 6d70  efault type comp
+00004d40: 6174 6962 696c 6974 7920 6368 6563 6b20  atibility check 
+00004d50: 6361 6e20 6265 2074 6865 2064 6566 6175  can be the defau
+00004d60: 6c74 2076 616c 7565 0d0a 2020 2020 2020  lt value..      
+00004d70: 2020 2320 6120 6469 6374 696f 6e61 7279    # a dictionary
+00004d80: 2074 6861 7420 6d61 7073 206e 756d 7079   that maps numpy
+00004d90: 2066 756e 6374 696f 6e73 2074 6f20 6f75   functions to ou
+00004da0: 7220 6375 7374 6f6d 2076 6172 6961 6e74  r custom variant
+00004db0: 730d 0a20 2020 2020 2020 2048 414e 444c  s..        HANDL
+00004dc0: 4544 5f46 554e 4354 494f 4e53 3a20 4469  ED_FUNCTIONS: Di
+00004dd0: 6374 5b63 616c 6c61 626c 652c 2063 616c  ct[callable, cal
+00004de0: 6c61 626c 655d 203d 207b 7d0d 0a20 2020  lable] = {}..   
+00004df0: 2020 2020 2022 2222 4469 6374 696f 6e61       """Dictiona
+00004e00: 7279 206f 6620 4e75 6d70 7920 4150 4920  ry of Numpy API 
+00004e10: 6675 6e63 7469 6f6e 2077 6974 6820 6f76  function with ov
+00004e20: 6572 7269 6464 656e 2066 756e 6374 696f  erridden functio
+00004e30: 6e73 2e22 2222 0d0a 2020 2020 2020 2020  ns."""..        
+00004e40: 4841 4e44 4c45 445f 5459 5045 5f43 4f4d  HANDLED_TYPE_COM
+00004e50: 5041 5449 4249 4c49 5459 5f43 4845 434b  PATIBILITY_CHECK
+00004e60: 3a20 4469 6374 5b63 616c 6c61 626c 652c  : Dict[callable,
+00004e70: 2063 616c 6c61 626c 655d 203d 207b 7d0d   callable] = {}.
+00004e80: 0a20 2020 2020 2020 2022 2222 4469 6374  .        """Dict
+00004e90: 696f 6e61 7279 206f 6620 7479 7065 2063  ionary of type c
+00004ea0: 6f6d 7061 7469 6269 6c69 7479 2066 756e  ompatibility fun
+00004eb0: 6374 696f 6e73 2070 6572 2065 6163 6820  ctions per each 
+00004ec0: 4e75 6d70 7920 4150 4920 6f76 6572 7269  Numpy API overri
+00004ed0: 6464 656e 2066 756e 6374 696f 6e2e 2222  dden function.""
+00004ee0: 220d 0a0d 0a20 2020 2020 2020 2040 636c  "....        @cl
+00004ef0: 6173 736d 6574 686f 640d 0a20 2020 2020  assmethod..     
+00004f00: 2020 2064 6566 2067 6574 5f61 7272 6179     def get_array
+00004f10: 5f66 756e 6374 696f 6e28 636c 732c 206e  _function(cls, n
+00004f20: 705f 6675 6e63 7469 6f6e 3a20 4361 6c6c  p_function: Call
+00004f30: 6162 6c65 2920 2d3e 204f 7074 696f 6e61  able) -> Optiona
+00004f40: 6c5b 4361 6c6c 6162 6c65 5d3a 0d0a 2020  l[Callable]:..  
+00004f50: 2020 2020 2020 2020 2020 2222 220d 0a20            """.. 
+00004f60: 2020 2020 2020 2020 2020 2047 6976 656e             Given
+00004f70: 2074 6865 204e 756d 7079 2066 756e 6374   the Numpy funct
+00004f80: 696f 6e2c 2072 6574 7572 6e73 206f 7665  ion, returns ove
+00004f90: 7272 6964 6465 6e20 6172 7261 7920 6675  rridden array fu
+00004fa0: 6e63 7469 6f6e 2069 6620 696d 706c 656d  nction if implem
+00004fb0: 656e 7465 642c 206f 7468 6572 7769 7365  ented, otherwise
+00004fc0: 204e 6f6e 652e 0d0a 0d0a 2020 2020 2020   None.....      
+00004fd0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00004fe0: 0d0a 2020 2020 2020 2020 2020 2020 2d2d  ..            --
+00004ff0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00005000: 2020 2020 2020 6e70 5f66 756e 6374 696f        np_functio
+00005010: 6e3a 2063 616c 6c61 626c 650d 0a20 2020  n: callable..   
+00005020: 2020 2020 2020 2020 2020 2020 2054 6865               The
+00005030: 206f 7665 7272 6964 6465 6e20 4e75 6d70   overridden Nump
+00005040: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
+00005050: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00005060: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+00005070: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00005080: 2020 2020 2020 2020 2020 2063 616c 6c61             calla
+00005090: 626c 652c 206f 7074 696f 6e61 6c0d 0a20  ble, optional.. 
+000050a0: 2020 2020 2020 2020 2020 2020 2020 2054                 T
+000050b0: 6865 206f 7665 7272 6964 6465 6e20 6675  he overridden fu
+000050c0: 6e63 7469 6f6e 2061 7320 6120 6361 6c6c  nction as a call
+000050d0: 6162 6c65 206f 7220 4e6f 6e65 2069 6620  able or None if 
+000050e0: 6974 2773 206e 6f74 2069 6d70 6c65 6d65  it's not impleme
+000050f0: 6e74 6564 2e0d 0a20 2020 2020 2020 2020  nted...         
+00005100: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00005110: 2020 2020 7265 7475 726e 2063 6c73 2e48      return cls.H
+00005120: 414e 444c 4544 5f46 554e 4354 494f 4e53  ANDLED_FUNCTIONS
+00005130: 2e67 6574 286e 705f 6675 6e63 7469 6f6e  .get(np_function
+00005140: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2020  , None)....     
+00005150: 2020 2040 636c 6173 736d 6574 686f 640d     @classmethod.
+00005160: 0a20 2020 2020 2020 2064 6566 2067 6574  .        def get
+00005170: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
+00005180: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
+00005190: 7479 5f63 6865 636b 2863 6c73 2c20 6e70  ty_check(cls, np
+000051a0: 5f66 756e 6374 696f 6e3a 2043 616c 6c61  _function: Calla
+000051b0: 626c 6529 202d 3e20 4f70 7469 6f6e 616c  ble) -> Optional
+000051c0: 5b43 616c 6c61 626c 655d 3a0d 0a20 2020  [Callable]:..   
+000051d0: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
+000051e0: 2020 2020 2020 2020 2020 4769 7665 6e20            Given 
+000051f0: 7468 6520 4e75 6d70 7920 6675 6e63 7469  the Numpy functi
+00005200: 6f6e 2c20 7265 7475 726e 7320 7468 6520  on, returns the 
+00005210: 636f 7272 6573 706f 6e64 696e 6720 6172  corresponding ar
+00005220: 7261 7920 6675 6e63 7469 6f6e 2074 7970  ray function typ
+00005230: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
+00005240: 6361 6c6c 6162 6c65 2c20 6f74 6865 7277  callable, otherw
+00005250: 6973 6520 4e6f 6e65 2e0d 0a0d 0a20 2020  ise None.....   
+00005260: 2020 2020 2020 2020 2050 6172 616d 6574           Paramet
+00005270: 6572 730d 0a20 2020 2020 2020 2020 2020  ers..           
+00005280: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00005290: 2020 2020 2020 2020 206e 705f 6675 6e63           np_func
+000052a0: 7469 6f6e 3a20 6361 6c6c 6162 6c65 0d0a  tion: callable..
+000052b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000052c0: 5468 6520 6f76 6572 7269 6464 656e 204e  The overridden N
+000052d0: 756d 7079 2061 7272 6179 2066 756e 6374  umpy array funct
+000052e0: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
+000052f0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+00005300: 2020 2020 2020 2020 202d 2d2d 2d2d 2d2d           -------
+00005310: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
+00005320: 6c6c 6162 6c65 2c20 6f70 7469 6f6e 616c  llable, optional
+00005330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005340: 2020 5468 6520 6f76 6572 7269 6464 656e    The overridden
+00005350: 2074 7970 6520 636f 6d70 6174 6962 696c   type compatibil
+00005360: 6974 7920 6675 6e63 7469 6f6e 2061 7320  ity function as 
+00005370: 6120 6361 6c6c 6162 6c65 206f 7220 4e6f  a callable or No
+00005380: 6e65 2069 6620 6974 2773 206e 6f74 2069  ne if it's not i
+00005390: 6d70 6c65 6d65 6e74 6564 2e0d 0a20 2020  mplemented...   
+000053a0: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
+000053b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000053c0: 2063 6c73 2e48 414e 444c 4544 5f54 5950   cls.HANDLED_TYP
+000053d0: 455f 434f 4d50 4154 4942 494c 4954 595f  E_COMPATIBILITY_
+000053e0: 4348 4543 4b2e 6765 7428 6e70 5f66 756e  CHECK.get(np_fun
+000053f0: 6374 696f 6e2c 204e 6f6e 6529 0d0a 0d0a  ction, None)....
+00005400: 2020 2020 2020 2020 4063 6c61 7373 6d65          @classme
+00005410: 7468 6f64 0d0a 2020 2020 2020 2020 6465  thod..        de
+00005420: 6620 7265 6769 7374 6572 5f61 7272 6179  f register_array
+00005430: 5f66 756e 6374 696f 6e28 636c 732c 206e  _function(cls, n
+00005440: 705f 6675 6e63 7469 6f6e 3a20 4361 6c6c  p_function: Call
+00005450: 6162 6c65 2920 2d3e 2043 616c 6c61 626c  able) -> Callabl
+00005460: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00005470: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
+00005480: 2020 4120 6675 6e63 7469 6f6e 2064 6563    A function dec
+00005490: 6f72 6174 6f72 2077 686f 7365 2061 7267  orator whose arg
+000054a0: 756d 656e 7420 6973 2074 6865 204e 756d  ument is the Num
+000054b0: 7079 2066 756e 6374 696f 6e20 746f 206f  py function to o
+000054c0: 7665 7272 6964 6520 616e 6420 7468 6520  verride and the 
+000054d0: 6675 6e63 7469 6f6e 2074 6861 7420 7769  function that wi
+000054e0: 6c6c 206f 7665 7272 6964 6520 6974 2e0d  ll override it..
+000054f0: 0a20 2020 2020 2020 2020 2020 2020 5468  .             Th
+00005500: 6973 2072 6567 6973 7465 7273 2074 6865  is registers the
+00005510: 2060 6e70 5f66 756e 6374 696f 6e60 2077   `np_function` w
+00005520: 6974 6820 7468 6520 6675 6e63 7469 6f6e  ith the function
+00005530: 2074 6861 7420 6974 2064 6563 6f72 6174   that it decorat
+00005540: 6573 2e0d 0a0d 0a20 2020 2020 2020 2020  es.....         
+00005550: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00005560: 2020 2020 2020 2020 2020 202d 2d2d 2d2d             -----
+00005570: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2020  -----..         
+00005580: 2020 206e 705f 6675 6e63 7469 6f6e 3a20     np_function: 
+00005590: 6361 6c6c 6162 6c65 0d0a 2020 2020 2020  callable..      
+000055a0: 2020 2020 2020 2020 2020 5468 6520 6f76            The ov
+000055b0: 6572 7269 6464 656e 204e 756d 7079 2061  erridden Numpy a
+000055c0: 7272 6179 2066 756e 6374 696f 6e2e 0d0a  rray function...
+000055d0: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
+000055e0: 7475 726e 730d 0a20 2020 2020 2020 2020  turns..         
+000055f0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+00005600: 2020 2020 2020 2020 6361 6c6c 6162 6c65          callable
+00005610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005620: 2020 5468 6520 6465 636f 7261 746f 7220    The decorator 
+00005630: 7468 6174 2072 6567 6973 7465 7273 2060  that registers `
+00005640: 6e70 5f66 756e 6374 696f 6e60 2077 6974  np_function` wit
+00005650: 6820 7468 6520 6465 636f 7261 7465 6420  h the decorated 
+00005660: 6675 6e63 7469 6f6e 2e0d 0a20 2020 2020  function...     
+00005670: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
+00005680: 2020 2020 2020 2020 2020 2320 4077 7261            # @wra
+00005690: 7073 286e 705f 6675 6e63 7469 6f6e 290d  ps(np_function).
+000056a0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
+000056b0: 2064 6563 6f72 6174 6f72 2866 756e 6329   decorator(func)
+000056c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000056d0: 2020 2063 6c73 2e48 414e 444c 4544 5f46     cls.HANDLED_F
+000056e0: 554e 4354 494f 4e53 5b6e 705f 6675 6e63  UNCTIONS[np_func
+000056f0: 7469 6f6e 5d20 3d20 6675 6e63 0d0a 2020  tion] = func..  
+00005700: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00005710: 206c 6f67 6765 722e 6973 456e 6162 6c65   logger.isEnable
+00005720: 6446 6f72 286c 6f67 6769 6e67 2e44 4542  dFor(logging.DEB
+00005730: 5547 293a 0d0a 2020 2020 2020 2020 2020  UG):..          
+00005740: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
+00005750: 2e64 6562 7567 280d 0a20 2020 2020 2020  .debug(..       
 00005760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005770: 2020 2066 227b 636c 732e 5f5f 6e61 6d65     f"{cls.__name
-00005780: 5f5f 7d2e 7265 6769 7374 6572 5f61 7272  __}.register_arr
-00005790: 6179 5f66 756e 6374 696f 6e3a 2072 6567  ay_function: reg
-000057a0: 6973 7465 7265 6420 7b72 6570 7228 6675  istered {repr(fu
-000057b0: 6e63 2e5f 5f6e 616d 655f 5f29 7d20 696e  nc.__name__)} in
-000057c0: 2070 6c61 6365 206f 6620 7b6e 705f 6675   place of {np_fu
-000057d0: 6e63 7469 6f6e 2e5f 5f6e 616d 655f 5f7d  nction.__name__}
-000057e0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000057f0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00005800: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00005810: 2066 756e 630d 0a0d 0a20 2020 2020 2020   func....       
-00005820: 2020 2020 2072 6574 7572 6e20 6465 636f       return deco
-00005830: 7261 746f 720d 0a0d 0a20 2020 2020 2020  rator....       
-00005840: 2040 636c 6173 736d 6574 686f 640d 0a20   @classmethod.. 
-00005850: 2020 2020 2020 2064 6566 2072 6567 6973         def regis
-00005860: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-00005870: 6f6e 5f74 7970 655f 636f 6d70 6174 6962  on_type_compatib
-00005880: 696c 6974 7928 636c 732c 206e 705f 6675  ility(cls, np_fu
-00005890: 6e63 7469 6f6e 3a20 4361 6c6c 6162 6c65  nction: Callable
-000058a0: 2920 2d3e 2043 616c 6c61 626c 653a 0d0a  ) -> Callable:..
-000058b0: 2020 2020 2020 2020 2020 2020 2222 220d              """.
-000058c0: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
-000058d0: 7320 7265 6769 7374 6572 7320 7468 6520  s registers the 
-000058e0: 7479 7065 2063 6f6d 7061 7469 6269 6c69  type compatibili
-000058f0: 7479 2063 6865 636b 2066 6f72 2074 6865  ty check for the
-00005900: 2060 6e70 5f66 756e 6374 696f 6e60 2077   `np_function` w
-00005910: 6974 6820 7468 6520 6675 6e63 7469 6f6e  ith the function
-00005920: 2074 6861 7420 6974 2064 6563 6f72 6174   that it decorat
-00005930: 6573 2e0d 0a0d 0a20 2020 2020 2020 2020  es.....         
-00005940: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00005950: 2020 2020 2020 2020 2020 202d 2d2d 2d2d             -----
-00005960: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2020  -----..         
-00005970: 2020 206e 705f 6675 6e63 7469 6f6e 3a20     np_function: 
-00005980: 6361 6c6c 6162 6c65 0d0a 2020 2020 2020  callable..      
-00005990: 2020 2020 2020 2020 2020 5468 6520 6f76            The ov
-000059a0: 6572 7269 6464 656e 204e 756d 7079 2061  erridden Numpy a
-000059b0: 7272 6179 2066 756e 6374 696f 6e2e 0d0a  rray function...
-000059c0: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
-000059d0: 7475 726e 730d 0a20 2020 2020 2020 2020  turns..         
-000059e0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-000059f0: 2020 2020 2020 2020 6361 6c6c 6162 6c65          callable
-00005a00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005a10: 2020 5468 6520 6465 636f 7261 746f 7220    The decorator 
-00005a20: 7468 6174 2072 6567 6973 7465 7273 2074  that registers t
-00005a30: 6865 2074 7970 6520 636f 6d70 6174 6962  he type compatib
-00005a40: 696c 6974 7920 6368 6563 6b20 666f 7220  ility check for 
-00005a50: 7468 6520 606e 705f 6675 6e63 7469 6f6e  the `np_function
-00005a60: 6020 7769 7468 2074 6865 2064 6563 6f72  ` with the decor
-00005a70: 6174 6564 2066 756e 6374 696f 6e2e 0d0a  ated function...
-00005a80: 2020 2020 2020 2020 2020 2020 2222 220d              """.
+00005770: 2066 227b 636c 732e 5f5f 6e61 6d65 5f5f   f"{cls.__name__
+00005780: 7d2e 7265 6769 7374 6572 5f61 7272 6179  }.register_array
+00005790: 5f66 756e 6374 696f 6e3a 2072 6567 6973  _function: regis
+000057a0: 7465 7265 6420 7b72 6570 7228 6675 6e63  tered {repr(func
+000057b0: 2e5f 5f6e 616d 655f 5f29 7d20 696e 2070  .__name__)} in p
+000057c0: 6c61 6365 206f 6620 7b6e 705f 6675 6e63  lace of {np_func
+000057d0: 7469 6f6e 2e5f 5f6e 616d 655f 5f7d 220d  tion.__name__}".
+000057e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000057f0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00005800: 2020 2020 2020 2020 7265 7475 726e 2066          return f
+00005810: 756e 630d 0a0d 0a20 2020 2020 2020 2020  unc....         
+00005820: 2020 2072 6574 7572 6e20 6465 636f 7261     return decora
+00005830: 746f 720d 0a0d 0a20 2020 2020 2020 2040  tor....        @
+00005840: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
+00005850: 2020 2020 2064 6566 2072 6567 6973 7465       def registe
+00005860: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+00005870: 5f74 7970 655f 636f 6d70 6174 6962 696c  _type_compatibil
+00005880: 6974 7928 636c 732c 206e 705f 6675 6e63  ity(cls, np_func
+00005890: 7469 6f6e 3a20 4361 6c6c 6162 6c65 2920  tion: Callable) 
+000058a0: 2d3e 2043 616c 6c61 626c 653a 0d0a 2020  -> Callable:..  
+000058b0: 2020 2020 2020 2020 2020 2222 220d 0a20            """.. 
+000058c0: 2020 2020 2020 2020 2020 2054 6869 7320             This 
+000058d0: 7265 6769 7374 6572 7320 7468 6520 7479  registers the ty
+000058e0: 7065 2063 6f6d 7061 7469 6269 6c69 7479  pe compatibility
+000058f0: 2063 6865 636b 2066 6f72 2074 6865 2060   check for the `
+00005900: 6e70 5f66 756e 6374 696f 6e60 2077 6974  np_function` wit
+00005910: 6820 7468 6520 6675 6e63 7469 6f6e 2074  h the function t
+00005920: 6861 7420 6974 2064 6563 6f72 6174 6573  hat it decorates
+00005930: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00005940: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00005950: 2020 2020 2020 2020 202d 2d2d 2d2d 2d2d           -------
+00005960: 2d2d 2d0d 0a20 2020 2020 2020 2020 2020  ---..           
+00005970: 206e 705f 6675 6e63 7469 6f6e 3a20 6361   np_function: ca
+00005980: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
+00005990: 2020 2020 2020 2020 5468 6520 6f76 6572          The over
+000059a0: 7269 6464 656e 204e 756d 7079 2061 7272  ridden Numpy arr
+000059b0: 6179 2066 756e 6374 696f 6e2e 0d0a 0d0a  ay function.....
+000059c0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+000059d0: 726e 730d 0a20 2020 2020 2020 2020 2020  rns..           
+000059e0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+000059f0: 2020 2020 2020 6361 6c6c 6162 6c65 0d0a        callable..
+00005a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a10: 5468 6520 6465 636f 7261 746f 7220 7468  The decorator th
+00005a20: 6174 2072 6567 6973 7465 7273 2074 6865  at registers the
+00005a30: 2074 7970 6520 636f 6d70 6174 6962 696c   type compatibil
+00005a40: 6974 7920 6368 6563 6b20 666f 7220 7468  ity check for th
+00005a50: 6520 606e 705f 6675 6e63 7469 6f6e 6020  e `np_function` 
+00005a60: 7769 7468 2074 6865 2064 6563 6f72 6174  with the decorat
+00005a70: 6564 2066 756e 6374 696f 6e2e 0d0a 2020  ed function...  
+00005a80: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
 00005a90: 0a20 2020 2020 2020 2020 2020 2023 2040  .            # @
 00005aa0: 7772 6170 7328 6e70 5f66 756e 6374 696f  wraps(np_functio
 00005ab0: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
 00005ac0: 6465 6620 6465 636f 7261 746f 7228 6368  def decorator(ch
 00005ad0: 6563 6b5f 7479 7065 5f63 6f6d 7061 7469  eck_type_compati
 00005ae0: 6269 6c69 7479 293a 0d0a 2020 2020 2020  bility):..      
 00005af0: 2020 2020 2020 2020 2020 636c 732e 4841            cls.HA
@@ -1614,12773 +1614,13215 @@
 000064d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000064e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000064f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
 00006510: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
 00006520: 636c 732c 2061 7272 2c20 2a2a 6b77 6172  cls, arr, **kwar
 00006530: 6773 2920 2d3e 2046 6173 7441 7272 6179  gs) -> FastArray
-00006540: 3a0d 0a0d 0a20 2020 2020 2020 2061 6c6c  :....        all
-00006550: 6f77 5f75 6e69 636f 6465 203d 206b 7761  ow_unicode = kwa
-00006560: 7267 732e 6765 7428 2275 6e69 636f 6465  rgs.get("unicode
-00006570: 222c 2046 616c 7365 290d 0a20 2020 2020  ", False)..     
-00006580: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00006590: 2020 2020 2064 656c 206b 7761 7267 735b       del kwargs[
-000065a0: 2275 6e69 636f 6465 225d 0d0a 2020 2020  "unicode"]..    
-000065b0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-000065c0: 2020 2020 2020 2020 2070 6173 730d 0a20           pass.. 
-000065d0: 2020 2020 2020 2023 2049 6620 616c 7265         # If alre
-000065e0: 6164 7920 6120 6e75 6d70 7920 6172 7261  ady a numpy arra
-000065f0: 7920 6e6f 206e 6565 6420 746f 2063 616c  y no need to cal
-00006600: 6c20 6173 616e 790d 0a20 2020 2020 2020  l asany..       
-00006610: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
-00006620: 7272 2c20 6e70 2e6e 6461 7272 6179 2920  rr, np.ndarray) 
-00006630: 616e 6420 6c65 6e28 6b77 6172 6773 2920  and len(kwargs) 
-00006640: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-00006650: 2020 2069 6e73 7461 6e63 6520 3d20 6172     instance = ar
-00006660: 720d 0a20 2020 2020 2020 2020 2020 2069  r..            i
-00006670: 6620 6973 696e 7374 616e 6365 2869 6e73  f isinstance(ins
-00006680: 7461 6e63 652c 2063 6c73 2920 616e 6420  tance, cls) and 
-00006690: 696e 7374 616e 6365 2e64 7479 7065 2e63  instance.dtype.c
-000066a0: 6861 7220 213d 2022 5522 3a0d 0a20 2020  har != "U":..   
-000066b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000066c0: 696e 7374 616e 6365 2e64 7479 7065 2e63  instance.dtype.c
-000066d0: 6861 7220 6e6f 7420 696e 204e 756d 7079  har not in Numpy
-000066e0: 4368 6172 5479 7065 732e 5375 7070 6f72  CharTypes.Suppor
-000066f0: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
-00006700: 2020 2020 2020 2020 2020 636c 732e 5f70            cls._p
-00006710: 6f73 7369 626c 795f 7761 726e 280d 0a20  ossibly_warn(.. 
+00006540: 3a0d 0a20 2020 2020 2020 2061 6c6c 6f77  :..        allow
+00006550: 5f75 6e69 636f 6465 203d 206b 7761 7267  _unicode = kwarg
+00006560: 732e 6765 7428 2275 6e69 636f 6465 222c  s.get("unicode",
+00006570: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+00006580: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00006590: 2020 2064 656c 206b 7761 7267 735b 2275     del kwargs["u
+000065a0: 6e69 636f 6465 225d 0d0a 2020 2020 2020  nicode"]..      
+000065b0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+000065c0: 2020 2020 2020 2070 6173 730d 0a20 2020         pass..   
+000065d0: 2020 2020 2023 2049 6620 616c 7265 6164       # If alread
+000065e0: 7920 6120 6e75 6d70 7920 6172 7261 7920  y a numpy array 
+000065f0: 6e6f 206e 6565 6420 746f 2063 616c 6c20  no need to call 
+00006600: 6173 616e 790d 0a20 2020 2020 2020 2069  asany..        i
+00006610: 6620 6973 696e 7374 616e 6365 2861 7272  f isinstance(arr
+00006620: 2c20 6e70 2e6e 6461 7272 6179 2920 616e  , np.ndarray) an
+00006630: 6420 6c65 6e28 6b77 6172 6773 2920 3d3d  d len(kwargs) ==
+00006640: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00006650: 2069 6e73 7461 6e63 6520 3d20 6172 720d   instance = arr.
+00006660: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00006670: 6973 696e 7374 616e 6365 2869 6e73 7461  isinstance(insta
+00006680: 6e63 652c 2063 6c73 2920 616e 6420 696e  nce, cls) and in
+00006690: 7374 616e 6365 2e64 7479 7065 2e63 6861  stance.dtype.cha
+000066a0: 7220 213d 2022 5522 3a0d 0a20 2020 2020  r != "U":..     
+000066b0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
+000066c0: 7374 616e 6365 2e64 7479 7065 2e63 6861  stance.dtype.cha
+000066d0: 7220 6e6f 7420 696e 204e 756d 7079 4368  r not in NumpyCh
+000066e0: 6172 5479 7065 732e 5375 7070 6f72 7465  arTypes.Supporte
+000066f0: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+00006700: 2020 2020 2020 2020 636c 732e 5f70 6f73          cls._pos
+00006710: 7369 626c 795f 7761 726e 280d 0a20 2020  sibly_warn(..   
 00006720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006730: 2020 2020 2020 2066 2246 6173 7441 7272         f"FastArr
-00006740: 6179 2063 6f6e 7461 696e 7320 616e 2075  ay contains an u
-00006750: 6e73 7570 706f 7274 6564 2074 7970 6520  nsupported type 
-00006760: 277b 696e 7374 616e 6365 2e64 7479 7065  '{instance.dtype
-00006770: 7d27 2e20 2050 726f 626c 656d 7320 6d61  }'.  Problems ma
-00006780: 7920 6f63 6375 722e 2020 436f 6e73 6964  y occur.  Consid
-00006790: 6572 2063 6174 6567 6f72 6963 616c 732e  er categoricals.
-000067a0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000067b0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-000067c0: 2020 2020 2020 2020 2020 2320 6966 2061            # if a
-000067d0: 6c72 6561 6479 2061 2046 6173 7441 7272  lready a FastArr
-000067e0: 6179 2c20 646f 206e 6f74 2072 6577 7261  ay, do not rewra
-000067f0: 7020 7468 6973 0d0a 2020 2020 2020 2020  p this..        
-00006800: 2020 2020 2020 2020 7265 7475 726e 2069          return i
-00006810: 6e73 7461 6e63 650d 0a20 2020 2020 2020  nstance..       
-00006820: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00006830: 2020 2020 2320 666c 6970 2074 6865 206c      # flip the l
-00006840: 6973 7420 6f72 206f 7468 6572 206f 626a  ist or other obj
-00006850: 6563 7420 746f 2061 206e 756d 7079 2061  ect to a numpy a
-00006860: 7272 6179 0d0a 2020 2020 2020 2020 2020  rray..          
-00006870: 2020 696e 7374 616e 6365 203d 206e 702e    instance = np.
-00006880: 6173 616e 7961 7272 6179 2861 7272 2c20  asanyarray(arr, 
-00006890: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-000068a0: 2020 2020 2069 6620 6e6f 7420 616c 6c6f       if not allo
-000068b0: 775f 756e 6963 6f64 6520 616e 6420 696e  w_unicode and in
-000068c0: 7374 616e 6365 2e64 7479 7065 2e63 6861  stance.dtype.cha
-000068d0: 7220 3d3d 2022 5522 3a0d 0a20 2020 2020  r == "U":..     
-000068e0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-000068f0: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00006900: 7461 6e63 6520 3d20 6e70 2e61 7361 7272  tance = np.asarr
-00006910: 6179 2869 6e73 7461 6e63 652c 2064 7479  ay(instance, dty
-00006920: 7065 3d22 5322 290d 0a20 2020 2020 2020  pe="S")..       
-00006930: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-00006940: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00006950: 7373 0d0a 0d0a 2020 2020 2020 2020 6966  ss....        if
-00006960: 206c 656e 2869 6e73 7461 6e63 652e 7368   len(instance.sh
-00006970: 6170 6529 203d 3d20 303a 0d0a 2020 2020  ape) == 0:..    
-00006980: 2020 2020 2020 2020 6966 2069 6e73 7461          if insta
-00006990: 6e63 652e 6474 7970 652e 6368 6172 2069  nce.dtype.char i
-000069a0: 6e20 4e75 6d70 7943 6861 7254 7970 6573  n NumpyCharTypes
-000069b0: 2e53 7570 706f 7274 6564 3a0d 0a20 2020  .Supported:..   
-000069c0: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-000069d0: 7461 6e63 6520 3d20 6e70 2e61 7361 6e79  tance = np.asany
-000069e0: 6172 7261 7928 5b69 6e73 7461 6e63 655d  array([instance]
-000069f0: 2c20 2a2a 6b77 6172 6773 290d 0a20 2020  , **kwargs)..   
-00006a00: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00006a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a20: 2320 6e70 2e61 7361 7272 6179 206f 6e20  # np.asarray on 
-00006a30: 6120 7365 7420 7769 6c6c 2072 6574 7572  a set will retur
-00006a40: 6e20 616e 206f 626a 6563 7420 6f66 2031  n an object of 1
-00006a50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006a60: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00006a70: 6172 722c 2073 6574 293a 0d0a 2020 2020  arr, set):..    
-00006a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a90: 696e 7374 616e 6365 203d 206e 702e 6173  instance = np.as
-00006aa0: 6172 7261 7928 6c69 7374 2861 7272 292c  array(list(arr),
-00006ab0: 202a 2a6b 7761 7267 7329 0d0a 2020 2020   **kwargs)..    
-00006ac0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00006ad0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00006ae0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00006af0: 6545 7272 6f72 2866 2246 6173 7441 7272  eError(f"FastArr
-00006b00: 6179 2063 616e 6e6f 7420 696e 6974 6961  ay cannot initia
-00006b10: 6c69 7a65 207b 6172 727d 2229 0d0a 0d0a  lize {arr}")....
-00006b20: 2020 2020 2020 2020 6966 2069 6e73 7461          if insta
-00006b30: 6e63 652e 6e64 696d 203e 2031 3a0d 0a20  nce.ndim > 1:.. 
-00006b40: 2020 2020 2020 2020 2020 2023 206f 6e6c             # onl
-00006b50: 7920 6f6e 6520 6469 6d65 6e73 696f 6e20  y one dimension 
-00006b60: 6361 6e20 6265 2067 7265 6174 6572 2074  can be greater t
-00006b70: 6861 6e20 6f6e 650d 0a20 2020 2020 2020  han one..       
-00006b80: 2020 2020 2069 6620 636c 732e 5f63 6865       if cls._che
-00006b90: 636b 5f6e 6469 6d28 696e 7374 616e 6365  ck_ndim(instance
-00006ba0: 2920 3e20 313a 0d0a 2020 2020 2020 2020  ) > 1:..        
-00006bb0: 2020 2020 2020 2020 636c 732e 5f70 6f73          cls._pos
-00006bc0: 7369 626c 795f 7761 726e 2846 6173 7441  sibly_warn(FastA
-00006bd0: 7272 6179 2e57 6172 6e69 6e67 4469 6374  rray.WarningDict
-00006be0: 5b22 6d75 6c74 6970 6c65 5f64 696d 656e  ["multiple_dimen
-00006bf0: 7369 6f6e 7322 5d2e 666f 726d 6174 2869  sions"].format(i
-00006c00: 6e73 7461 6e63 652e 7368 6170 6529 290d  nstance.shape)).
-00006c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006c20: 2023 2077 6172 6e69 6e67 732e 7761 726e   # warnings.warn
-00006c30: 2866 2246 6173 7441 7272 6179 2063 6f6e  (f"FastArray con
-00006c40: 7461 696e 7320 7477 6f20 6f72 206d 6f72  tains two or mor
-00006c50: 6520 6469 6d65 6e73 696f 6e73 2067 7265  e dimensions gre
-00006c60: 6174 6572 2074 6861 6e20 6f6e 6520 2d20  ater than one - 
-00006c70: 7368 6170 653a 7b69 6e73 7461 6e63 652e  shape:{instance.
-00006c80: 7368 6170 657d 2e20 2050 726f 626c 656d  shape}.  Problem
-00006c90: 7320 6d61 7920 6f63 6375 722e 2229 0d0a  s may occur.")..
-00006ca0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00006cb0: 2028 696e 7374 616e 6365 2e66 6c61 6773   (instance.flags
-00006cc0: 2e66 5f63 6f6e 7469 6775 6f75 7320 6f72  .f_contiguous or
-00006cd0: 2069 6e73 7461 6e63 652e 666c 6167 732e   instance.flags.
-00006ce0: 635f 636f 6e74 6967 756f 7573 293a 0d0a  c_contiguous):..
-00006cf0: 2020 2020 2020 2020 2020 2020 2320 636f              # co
-00006d00: 7079 2073 686f 756c 6420 656c 696d 696e  py should elimin
-00006d10: 6174 6520 7374 7269 6465 7320 7072 6f62  ate strides prob
-00006d20: 6c65 6d0d 0a20 2020 2020 2020 2020 2020  lem..           
-00006d30: 2069 6e73 7461 6e63 6520 3d20 696e 7374   instance = inst
-00006d40: 616e 6365 2e63 6f70 7928 290d 0a20 2020  ance.copy()..   
-00006d50: 2020 2020 2020 2020 2063 6c73 2e5f 706f           cls._po
-00006d60: 7373 6962 6c79 5f77 6172 6e28 6622 4661  ssibly_warn(f"Fa
-00006d70: 7374 4172 7261 7920 696e 6974 6961 6c69  stArray initiali
-00006d80: 7a65 6420 7769 7468 2073 7472 6964 6573  zed with strides
-00006d90: 2e22 290d 0a0d 0a20 2020 2020 2020 2023  .")....        #
-00006da0: 2066 6f72 2061 7272 6179 7320 7468 6174   for arrays that
-00006db0: 2063 616e 2063 6175 7365 2070 726f 626c   can cause probl
-00006dc0: 656d 7320 6275 7420 7765 2061 6c6c 6f77  ems but we allow
-00006dd0: 206e 6f77 0d0a 2020 2020 2020 2020 6966   now..        if
-00006de0: 2063 6c73 2e4e 6f54 6f6c 6572 616e 6365   cls.NoTolerance
-00006df0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-00006e00: 6620 6e6f 7420 2869 6e73 7461 6e63 652e  f not (instance.
-00006e10: 666c 6167 732e 665f 636f 6e74 6967 756f  flags.f_contiguo
-00006e20: 7573 206f 7220 696e 7374 616e 6365 2e66  us or instance.f
-00006e30: 6c61 6773 2e63 5f63 6f6e 7469 6775 6f75  lags.c_contiguou
-00006e40: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
-00006e50: 2020 2020 2023 2063 6f70 7920 7368 6f75       # copy shou
-00006e60: 6c64 2065 6c69 6d69 6e61 7465 2073 7472  ld eliminate str
-00006e70: 6964 6573 2070 726f 626c 656d 0d0a 2020  ides problem..  
-00006e80: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00006e90: 7374 616e 6365 203d 2069 6e73 7461 6e63  stance = instanc
-00006ea0: 652e 636f 7079 2829 0d0a 2020 2020 2020  e.copy()..      
-00006eb0: 2020 2020 2020 2020 2020 636c 732e 5f70            cls._p
-00006ec0: 6f73 7369 626c 795f 7761 726e 2866 2246  ossibly_warn(f"F
-00006ed0: 6173 7441 7272 6179 2069 6e69 7469 616c  astArray initial
-00006ee0: 697a 6564 2077 6974 6820 7374 7269 6465  ized with stride
-00006ef0: 732e 2229 0d0a 0d0a 2020 2020 2020 2020  s.")....        
-00006f00: 6966 2069 6e73 7461 6e63 652e 6474 7970  if instance.dtyp
-00006f10: 652e 6368 6172 206e 6f74 2069 6e20 4e75  e.char not in Nu
-00006f20: 6d70 7943 6861 7254 7970 6573 2e53 7570  mpyCharTypes.Sup
-00006f30: 706f 7274 6564 3a0d 0a20 2020 2020 2020  ported:..       
-00006f40: 2020 2020 2063 6c73 2e5f 706f 7373 6962       cls._possib
-00006f50: 6c79 5f77 6172 6e28 0d0a 2020 2020 2020  ly_warn(..      
-00006f60: 2020 2020 2020 2020 2020 6622 4661 7374            f"Fast
-00006f70: 4172 7261 7920 636f 6e74 6169 6e73 2061  Array contains a
-00006f80: 6e20 756e 7375 7070 6f72 7465 6420 7479  n unsupported ty
-00006f90: 7065 2027 7b69 6e73 7461 6e63 652e 6474  pe '{instance.dt
-00006fa0: 7970 657d 272e 2020 5072 6f62 6c65 6d73  ype}'.  Problems
-00006fb0: 206d 6179 206f 6363 7572 2e20 2043 6f6e   may occur.  Con
-00006fc0: 7369 6465 7220 6361 7465 676f 7269 6361  sider categorica
-00006fd0: 6c73 2e22 0d0a 2020 2020 2020 2020 2020  ls."..          
-00006fe0: 2020 290d 0a0d 0a20 2020 2020 2020 2072    )....        r
-00006ff0: 6574 7572 6e20 696e 7374 616e 6365 2e76  eturn instance.v
-00007000: 6965 7728 636c 7329 0d0a 0d0a 2020 2020  iew(cls)....    
-00007010: 6465 6620 5f5f 6172 7261 795f 6669 6e61  def __array_fina
-00007020: 6c69 7a65 5f5f 2873 656c 662c 206f 626a  lize__(self, obj
-00007030: 293a 0d0a 2020 2020 2020 2020 2222 2246  ):..        """F
-00007040: 696e 616c 697a 6573 2073 656c 6620 6672  inalizes self fr
-00007050: 6f6d 206f 7468 6572 2c20 6361 6c6c 6564  om other, called
-00007060: 2061 7320 7061 7274 206f 6620 6e64 6172   as part of ndar
-00007070: 7261 792e 5f5f 6e65 775f 5f28 2922 2222  ray.__new__()"""
-00007080: 0d0a 2020 2020 2020 2020 6966 206f 626a  ..        if obj
-00007090: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-000070a0: 2020 2020 2020 2072 6574 7572 6e0d 0a20         return.. 
-000070b0: 2020 2020 2020 2066 726f 6d5f 7065 6572         from_peer
-000070c0: 203d 2069 7369 6e73 7461 6e63 6528 6f62   = isinstance(ob
-000070d0: 6a2c 2046 6173 7441 7272 6179 290d 0a20  j, FastArray).. 
-000070e0: 2020 2020 2020 2069 6620 6672 6f6d 5f70         if from_p
-000070f0: 6565 7220 616e 6420 6861 7361 7474 7228  eer and hasattr(
-00007100: 6f62 6a2c 2022 5f6e 616d 6522 293a 0d0a  obj, "_name"):..
-00007110: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007120: 2e5f 6e61 6d65 203d 206f 626a 2e5f 6e61  ._name = obj._na
-00007130: 6d65 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  me....    # ----
+00006730: 2020 2020 2066 2246 6173 7441 7272 6179       f"FastArray
+00006740: 2063 6f6e 7461 696e 7320 616e 2075 6e73   contains an uns
+00006750: 7570 706f 7274 6564 2074 7970 6520 277b  upported type '{
+00006760: 696e 7374 616e 6365 2e64 7479 7065 7d27  instance.dtype}'
+00006770: 2e20 2050 726f 626c 656d 7320 6d61 7920  .  Problems may 
+00006780: 6f63 6375 722e 2020 436f 6e73 6964 6572  occur.  Consider
+00006790: 2063 6174 6567 6f72 6963 616c 732e 220d   categoricals.".
+000067a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000067b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000067c0: 2020 2020 2020 2020 2320 6966 2061 6c72          # if alr
+000067d0: 6561 6479 2061 2046 6173 7441 7272 6179  eady a FastArray
+000067e0: 2c20 646f 206e 6f74 2072 6577 7261 7020  , do not rewrap 
+000067f0: 7468 6973 0d0a 2020 2020 2020 2020 2020  this..          
+00006800: 2020 2020 2020 7265 7475 726e 2069 6e73        return ins
+00006810: 7461 6e63 650d 0a20 2020 2020 2020 2065  tance..        e
+00006820: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00006830: 2020 2320 666c 6970 2074 6865 206c 6973    # flip the lis
+00006840: 7420 6f72 206f 7468 6572 206f 626a 6563  t or other objec
+00006850: 7420 746f 2061 206e 756d 7079 2061 7272  t to a numpy arr
+00006860: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
+00006870: 696e 7374 616e 6365 203d 206e 702e 6173  instance = np.as
+00006880: 616e 7961 7272 6179 2861 7272 2c20 2a2a  anyarray(arr, **
+00006890: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
+000068a0: 2020 2069 6620 6e6f 7420 616c 6c6f 775f     if not allow_
+000068b0: 756e 6963 6f64 6520 616e 6420 696e 7374  unicode and inst
+000068c0: 616e 6365 2e64 7479 7065 2e63 6861 7220  ance.dtype.char 
+000068d0: 3d3d 2022 5522 3a0d 0a20 2020 2020 2020  == "U":..       
+000068e0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000068f0: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
+00006900: 6e63 6520 3d20 6e70 2e61 7361 7272 6179  nce = np.asarray
+00006910: 2869 6e73 7461 6e63 652c 2064 7479 7065  (instance, dtype
+00006920: 3d22 5322 290d 0a20 2020 2020 2020 2020  ="S")..         
+00006930: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+00006940: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00006950: 0d0a 0d0a 2020 2020 2020 2020 6966 206c  ....        if l
+00006960: 656e 2869 6e73 7461 6e63 652e 7368 6170  en(instance.shap
+00006970: 6529 203d 3d20 303a 0d0a 2020 2020 2020  e) == 0:..      
+00006980: 2020 2020 2020 6966 2069 6e73 7461 6e63        if instanc
+00006990: 652e 6474 7970 652e 6368 6172 2069 6e20  e.dtype.char in 
+000069a0: 4e75 6d70 7943 6861 7254 7970 6573 2e53  NumpyCharTypes.S
+000069b0: 7570 706f 7274 6564 3a0d 0a20 2020 2020  upported:..     
+000069c0: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
+000069d0: 6e63 6520 3d20 6e70 2e61 7361 6e79 6172  nce = np.asanyar
+000069e0: 7261 7928 5b69 6e73 7461 6e63 655d 2c20  ray([instance], 
+000069f0: 2a2a 6b77 6172 6773 290d 0a20 2020 2020  **kwargs)..     
+00006a00: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00006a10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00006a20: 6e70 2e61 7361 7272 6179 206f 6e20 6120  np.asarray on a 
+00006a30: 7365 7420 7769 6c6c 2072 6574 7572 6e20  set will return 
+00006a40: 616e 206f 626a 6563 7420 6f66 2031 0d0a  an object of 1..
+00006a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006a60: 6966 2069 7369 6e73 7461 6e63 6528 6172  if isinstance(ar
+00006a70: 722c 2073 6574 293a 0d0a 2020 2020 2020  r, set):..      
+00006a80: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00006a90: 7374 616e 6365 203d 206e 702e 6173 6172  stance = np.asar
+00006aa0: 7261 7928 6c69 7374 2861 7272 292c 202a  ray(list(arr), *
+00006ab0: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
+00006ac0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00006ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006ae0: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+00006af0: 7272 6f72 2866 2246 6173 7441 7272 6179  rror(f"FastArray
+00006b00: 2063 616e 6e6f 7420 696e 6974 6961 6c69   cannot initiali
+00006b10: 7a65 207b 6172 727d 2229 0d0a 0d0a 2020  ze {arr}")....  
+00006b20: 2020 2020 2020 6966 2069 6e73 7461 6e63        if instanc
+00006b30: 652e 6e64 696d 203e 2031 3a0d 0a20 2020  e.ndim > 1:..   
+00006b40: 2020 2020 2020 2020 2023 206f 6e6c 7920           # only 
+00006b50: 6f6e 6520 6469 6d65 6e73 696f 6e20 6361  one dimension ca
+00006b60: 6e20 6265 2067 7265 6174 6572 2074 6861  n be greater tha
+00006b70: 6e20 6f6e 650d 0a20 2020 2020 2020 2020  n one..         
+00006b80: 2020 2069 6620 636c 732e 5f63 6865 636b     if cls._check
+00006b90: 5f6e 6469 6d28 696e 7374 616e 6365 2920  _ndim(instance) 
+00006ba0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
+00006bb0: 2020 2020 2020 636c 732e 5f70 6f73 7369        cls._possi
+00006bc0: 626c 795f 7761 726e 2846 6173 7441 7272  bly_warn(FastArr
+00006bd0: 6179 2e57 6172 6e69 6e67 4469 6374 5b22  ay.WarningDict["
+00006be0: 6d75 6c74 6970 6c65 5f64 696d 656e 7369  multiple_dimensi
+00006bf0: 6f6e 7322 5d2e 666f 726d 6174 2869 6e73  ons"].format(ins
+00006c00: 7461 6e63 652e 7368 6170 6529 290d 0a20  tance.shape)).. 
+00006c10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00006c20: 2077 6172 6e69 6e67 732e 7761 726e 2866   warnings.warn(f
+00006c30: 2246 6173 7441 7272 6179 2063 6f6e 7461  "FastArray conta
+00006c40: 696e 7320 7477 6f20 6f72 206d 6f72 6520  ins two or more 
+00006c50: 6469 6d65 6e73 696f 6e73 2067 7265 6174  dimensions great
+00006c60: 6572 2074 6861 6e20 6f6e 6520 2d20 7368  er than one - sh
+00006c70: 6170 653a 7b69 6e73 7461 6e63 652e 7368  ape:{instance.sh
+00006c80: 6170 657d 2e20 2050 726f 626c 656d 7320  ape}.  Problems 
+00006c90: 6d61 7920 6f63 6375 722e 2229 0d0a 2020  may occur.")..  
+00006ca0: 2020 2020 2020 656c 6966 206e 6f74 2028        elif not (
+00006cb0: 696e 7374 616e 6365 2e66 6c61 6773 2e66  instance.flags.f
+00006cc0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2069  _contiguous or i
+00006cd0: 6e73 7461 6e63 652e 666c 6167 732e 635f  nstance.flags.c_
+00006ce0: 636f 6e74 6967 756f 7573 293a 0d0a 2020  contiguous):..  
+00006cf0: 2020 2020 2020 2020 2020 2320 636f 7079            # copy
+00006d00: 2073 686f 756c 6420 656c 696d 696e 6174   should eliminat
+00006d10: 6520 7374 7269 6465 7320 7072 6f62 6c65  e strides proble
+00006d20: 6d0d 0a20 2020 2020 2020 2020 2020 2069  m..            i
+00006d30: 6e73 7461 6e63 6520 3d20 696e 7374 616e  nstance = instan
+00006d40: 6365 2e63 6f70 7928 290d 0a20 2020 2020  ce.copy()..     
+00006d50: 2020 2020 2020 2063 6c73 2e5f 706f 7373         cls._poss
+00006d60: 6962 6c79 5f77 6172 6e28 6622 4661 7374  ibly_warn(f"Fast
+00006d70: 4172 7261 7920 696e 6974 6961 6c69 7a65  Array initialize
+00006d80: 6420 7769 7468 2073 7472 6964 6573 2e22  d with strides."
+00006d90: 290d 0a0d 0a20 2020 2020 2020 2023 2066  )....        # f
+00006da0: 6f72 2061 7272 6179 7320 7468 6174 2063  or arrays that c
+00006db0: 616e 2063 6175 7365 2070 726f 626c 656d  an cause problem
+00006dc0: 7320 6275 7420 7765 2061 6c6c 6f77 206e  s but we allow n
+00006dd0: 6f77 0d0a 2020 2020 2020 2020 6966 2063  ow..        if c
+00006de0: 6c73 2e4e 6f54 6f6c 6572 616e 6365 3a0d  ls.NoTolerance:.
+00006df0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00006e00: 6e6f 7420 2869 6e73 7461 6e63 652e 666c  not (instance.fl
+00006e10: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
+00006e20: 206f 7220 696e 7374 616e 6365 2e66 6c61   or instance.fla
+00006e30: 6773 2e63 5f63 6f6e 7469 6775 6f75 7329  gs.c_contiguous)
+00006e40: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00006e50: 2020 2023 2063 6f70 7920 7368 6f75 6c64     # copy should
+00006e60: 2065 6c69 6d69 6e61 7465 2073 7472 6964   eliminate strid
+00006e70: 6573 2070 726f 626c 656d 0d0a 2020 2020  es problem..    
+00006e80: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00006e90: 616e 6365 203d 2069 6e73 7461 6e63 652e  ance = instance.
+00006ea0: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+00006eb0: 2020 2020 2020 2020 636c 732e 5f70 6f73          cls._pos
+00006ec0: 7369 626c 795f 7761 726e 2866 2246 6173  sibly_warn(f"Fas
+00006ed0: 7441 7272 6179 2069 6e69 7469 616c 697a  tArray initializ
+00006ee0: 6564 2077 6974 6820 7374 7269 6465 732e  ed with strides.
+00006ef0: 2229 0d0a 0d0a 2020 2020 2020 2020 6966  ")....        if
+00006f00: 2069 6e73 7461 6e63 652e 6474 7970 652e   instance.dtype.
+00006f10: 6368 6172 206e 6f74 2069 6e20 4e75 6d70  char not in Nump
+00006f20: 7943 6861 7254 7970 6573 2e53 7570 706f  yCharTypes.Suppo
+00006f30: 7274 6564 3a0d 0a20 2020 2020 2020 2020  rted:..         
+00006f40: 2020 2063 6c73 2e5f 706f 7373 6962 6c79     cls._possibly
+00006f50: 5f77 6172 6e28 0d0a 2020 2020 2020 2020  _warn(..        
+00006f60: 2020 2020 2020 2020 6622 4661 7374 4172          f"FastAr
+00006f70: 7261 7920 636f 6e74 6169 6e73 2061 6e20  ray contains an 
+00006f80: 756e 7375 7070 6f72 7465 6420 7479 7065  unsupported type
+00006f90: 2027 7b69 6e73 7461 6e63 652e 6474 7970   '{instance.dtyp
+00006fa0: 657d 272e 2020 5072 6f62 6c65 6d73 206d  e}'.  Problems m
+00006fb0: 6179 206f 6363 7572 2e20 2043 6f6e 7369  ay occur.  Consi
+00006fc0: 6465 7220 6361 7465 676f 7269 6361 6c73  der categoricals
+00006fd0: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
+00006fe0: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
+00006ff0: 7572 6e20 696e 7374 616e 6365 2e76 6965  urn instance.vie
+00007000: 7728 636c 7329 0d0a 0d0a 2020 2020 6465  w(cls)....    de
+00007010: 6620 5f5f 6172 7261 795f 6669 6e61 6c69  f __array_finali
+00007020: 7a65 5f5f 2873 656c 662c 206f 626a 293a  ze__(self, obj):
+00007030: 0d0a 2020 2020 2020 2020 2222 2246 696e  ..        """Fin
+00007040: 616c 697a 6573 2073 656c 6620 6672 6f6d  alizes self from
+00007050: 206f 7468 6572 2c20 6361 6c6c 6564 2061   other, called a
+00007060: 7320 7061 7274 206f 6620 6e64 6172 7261  s part of ndarra
+00007070: 792e 5f5f 6e65 775f 5f28 2922 2222 0d0a  y.__new__()"""..
+00007080: 2020 2020 2020 2020 6966 206f 626a 2069          if obj i
+00007090: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+000070a0: 2020 2020 2072 6574 7572 6e0d 0a20 2020       return..   
+000070b0: 2020 2020 2066 726f 6d5f 7065 6572 203d       from_peer =
+000070c0: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
+000070d0: 2046 6173 7441 7272 6179 290d 0a20 2020   FastArray)..   
+000070e0: 2020 2020 2069 6620 6672 6f6d 5f70 6565       if from_pee
+000070f0: 7220 616e 6420 6861 7361 7474 7228 6f62  r and hasattr(ob
+00007100: 6a2c 2022 5f6e 616d 6522 293a 0d0a 2020  j, "_name"):..  
+00007110: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00007120: 6e61 6d65 203d 206f 626a 2e5f 6e61 6d65  name = obj._name
+00007130: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
 00007140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007180: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00007190: 5f5f 7265 6475 6365 5f5f 2873 656c 6629  __reduce__(self)
-000071a0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-000071b0: 2020 2020 2020 2020 5573 6564 2066 6f72          Used for
-000071c0: 2070 6963 6b6c 696e 672e 0d0a 2020 2020   pickling...    
-000071d0: 2020 2020 466f 7220 6a75 7374 2061 2046      For just a F
-000071e0: 6173 7441 7272 6179 2077 6520 7061 7373  astArray we pass
-000071f0: 2062 6163 6b20 7468 6520 7669 6577 206f   back the view o
-00007200: 6620 7468 6520 6e70 2e6e 6461 7272 6179  f the np.ndarray
-00007210: 2c20 7768 6963 6820 7468 656e 206b 6e6f  , which then kno
-00007220: 7773 2068 6f77 2074 6f20 7069 636b 6c65  ws how to pickle
-00007230: 2069 7473 656c 662e 0d0a 2020 2020 2020   itself...      
-00007240: 2020 4e4f 5445 3a20 4920 7468 696e 6b20    NOTE: I think 
-00007250: 7468 6572 6520 6973 2061 2066 6173 7465  there is a faste
-00007260: 7220 7761 792e 2e20 706f 7373 6962 6c65  r way.. possible
-00007270: 2072 6574 7572 6e69 6e67 2061 2062 7974   returning a byt
-00007280: 6520 7374 7269 6e67 2e0d 0a20 2020 2020  e string...     
-00007290: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000072a0: 636c 7320 3d20 7479 7065 2873 656c 6629  cls = type(self)
-000072b0: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
-000072c0: 6563 6b20 6966 2073 7562 636c 6173 7365  eck if subclasse
-000072d0: 6420 726f 7574 696e 6520 6b6e 6f77 7320  d routine knows 
-000072e0: 686f 7720 746f 2073 6572 6961 6c69 7a65  how to serialize
-000072f0: 2069 7473 656c 660d 0a20 2020 2020 2020   itself..       
-00007300: 2069 6620 6861 7361 7474 7228 7365 6c66   if hasattr(self
-00007310: 2c20 225f 6275 696c 645f 7364 735f 6d65  , "_build_sds_me
-00007320: 7461 5f64 6174 6122 293a 0d0a 2020 2020  ta_data"):..    
-00007330: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00007340: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00007350: 6d65 203d 2073 656c 662e 5f6e 616d 650d  me = self._name.
-00007360: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00007370: 6570 743a 0d0a 2020 2020 2020 2020 2020  ept:..          
-00007380: 2020 2020 2020 6e61 6d65 203d 2022 756e        name = "un
-00007390: 6b6e 6f77 6e22 0d0a 0d0a 2020 2020 2020  known"....      
-000073a0: 2020 2020 2020 7475 7073 203d 2073 656c        tups = sel
-000073b0: 662e 5f62 7569 6c64 5f73 6473 5f6d 6574  f._build_sds_met
-000073c0: 615f 6461 7461 286e 616d 6529 0d0a 2020  a_data(name)..  
-000073d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000073e0: 2028 636c 732e 5f6c 6f61 645f 6672 6f6d   (cls._load_from
-000073f0: 5f73 6473 5f6d 6574 615f 6461 7461 2c20  _sds_meta_data, 
-00007400: 286e 616d 652c 2073 656c 662e 7669 6577  (name, self.view
-00007410: 2846 6173 7441 7272 6179 292c 2074 7570  (FastArray), tup
-00007420: 735b 315d 2c20 7475 7073 5b30 5d29 290d  s[1], tups[0])).
-00007430: 0a0d 0a20 2020 2020 2020 2023 2073 6574  ...        # set
-00007440: 2074 6f20 7472 7565 2074 6f20 7475 726e   to true to turn
-00007450: 2063 6f6d 7072 6573 7369 6f6e 206f 6e0d   compression on.
-00007460: 0a20 2020 2020 2020 2069 6620 636c 732e  .        if cls.
-00007470: 436f 6d70 7265 7373 5069 636b 6c65 2061  CompressPickle a
-00007480: 6e64 206c 656e 2873 656c 6629 203e 2030  nd len(self) > 0
-00007490: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-000074a0: 2063 7265 6174 6520 6120 7369 6e67 6c65   create a single
-000074b0: 2063 6f6d 7072 6573 7365 6420 6172 7261   compressed arra
-000074c0: 7920 6f66 2075 696e 7438 0d0a 2020 2020  y of uint8..    
-000074d0: 2020 2020 2020 2020 6361 7272 203d 2072          carr = r
-000074e0: 632e 436f 6d70 7265 7373 4465 636f 6d70  c.CompressDecomp
-000074f0: 7265 7373 4172 7261 7973 285b 7365 6c66  ressArrays([self
-00007500: 5d2c 2030 295b 305d 0d0a 2020 2020 2020  ], 0)[0]..      
-00007510: 2020 2020 2020 7265 7475 726e 2028 4641        return (FA
-00007520: 5f46 524f 4d5f 5549 4e54 382c 2028 6361  _FROM_UINT8, (ca
-00007530: 7272 2e76 6965 7728 6e70 2e6e 6461 7272  rr.view(np.ndarr
-00007540: 6179 292c 2929 0d0a 2020 2020 2020 2020  ay),))..        
-00007550: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00007560: 2020 2072 6574 7572 6e20 280d 0a20 2020     return (..   
-00007570: 2020 2020 2020 2020 2020 2020 2063 6c73               cls
-00007580: 2e5f 5f6e 6577 5f5f 2c0d 0a20 2020 2020  .__new__,..     
-00007590: 2020 2020 2020 2020 2020 2028 0d0a 2020             (..  
+00007180: 2d2d 2d2d 0d0a 2020 2020 6465 6620 5f5f  ----..    def __
+00007190: 7265 6475 6365 5f5f 2873 656c 6629 3a0d  reduce__(self):.
+000071a0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+000071b0: 2020 2020 2020 5573 6564 2066 6f72 2070        Used for p
+000071c0: 6963 6b6c 696e 672e 0d0a 2020 2020 2020  ickling...      
+000071d0: 2020 466f 7220 6a75 7374 2061 2046 6173    For just a Fas
+000071e0: 7441 7272 6179 2077 6520 7061 7373 2062  tArray we pass b
+000071f0: 6163 6b20 7468 6520 7669 6577 206f 6620  ack the view of 
+00007200: 7468 6520 6e70 2e6e 6461 7272 6179 2c20  the np.ndarray, 
+00007210: 7768 6963 6820 7468 656e 206b 6e6f 7773  which then knows
+00007220: 2068 6f77 2074 6f20 7069 636b 6c65 2069   how to pickle i
+00007230: 7473 656c 662e 0d0a 2020 2020 2020 2020  tself...        
+00007240: 4e4f 5445 3a20 4920 7468 696e 6b20 7468  NOTE: I think th
+00007250: 6572 6520 6973 2061 2066 6173 7465 7220  ere is a faster 
+00007260: 7761 792e 2e20 706f 7373 6962 6c65 2072  way.. possible r
+00007270: 6574 7572 6e69 6e67 2061 2062 7974 6520  eturning a byte 
+00007280: 7374 7269 6e67 2e0d 0a20 2020 2020 2020  string...       
+00007290: 2022 2222 0d0a 2020 2020 2020 2020 636c   """..        cl
+000072a0: 7320 3d20 7479 7065 2873 656c 6629 0d0a  s = type(self)..
+000072b0: 0d0a 2020 2020 2020 2020 2320 6368 6563  ..        # chec
+000072c0: 6b20 6966 2073 7562 636c 6173 7365 6420  k if subclassed 
+000072d0: 726f 7574 696e 6520 6b6e 6f77 7320 686f  routine knows ho
+000072e0: 7720 746f 2073 6572 6961 6c69 7a65 2069  w to serialize i
+000072f0: 7473 656c 660d 0a20 2020 2020 2020 2069  tself..        i
+00007300: 6620 6861 7361 7474 7228 7365 6c66 2c20  f hasattr(self, 
+00007310: 225f 6275 696c 645f 7364 735f 6d65 7461  "_build_sds_meta
+00007320: 5f64 6174 6122 293a 0d0a 2020 2020 2020  _data"):..      
+00007330: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00007340: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00007350: 203d 2073 656c 662e 5f6e 616d 650d 0a20   = self._name.. 
+00007360: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00007370: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00007380: 2020 2020 6e61 6d65 203d 2022 756e 6b6e      name = "unkn
+00007390: 6f77 6e22 0d0a 0d0a 2020 2020 2020 2020  own"....        
+000073a0: 2020 2020 7475 7073 203d 2073 656c 662e      tups = self.
+000073b0: 5f62 7569 6c64 5f73 6473 5f6d 6574 615f  _build_sds_meta_
+000073c0: 6461 7461 286e 616d 6529 0d0a 2020 2020  data(name)..    
+000073d0: 2020 2020 2020 2020 7265 7475 726e 2028          return (
+000073e0: 636c 732e 5f6c 6f61 645f 6672 6f6d 5f73  cls._load_from_s
+000073f0: 6473 5f6d 6574 615f 6461 7461 2c20 286e  ds_meta_data, (n
+00007400: 616d 652c 2073 656c 662e 7669 6577 2846  ame, self.view(F
+00007410: 6173 7441 7272 6179 292c 2074 7570 735b  astArray), tups[
+00007420: 315d 2c20 7475 7073 5b30 5d29 290d 0a0d  1], tups[0]))...
+00007430: 0a20 2020 2020 2020 2023 2073 6574 2074  .        # set t
+00007440: 6f20 7472 7565 2074 6f20 7475 726e 2063  o true to turn c
+00007450: 6f6d 7072 6573 7369 6f6e 206f 6e0d 0a20  ompression on.. 
+00007460: 2020 2020 2020 2069 6620 636c 732e 436f         if cls.Co
+00007470: 6d70 7265 7373 5069 636b 6c65 2061 6e64  mpressPickle and
+00007480: 206c 656e 2873 656c 6629 203e 2030 3a0d   len(self) > 0:.
+00007490: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
+000074a0: 7265 6174 6520 6120 7369 6e67 6c65 2063  reate a single c
+000074b0: 6f6d 7072 6573 7365 6420 6172 7261 7920  ompressed array 
+000074c0: 6f66 2075 696e 7438 0d0a 2020 2020 2020  of uint8..      
+000074d0: 2020 2020 2020 6361 7272 203d 2072 632e        carr = rc.
+000074e0: 436f 6d70 7265 7373 4465 636f 6d70 7265  CompressDecompre
+000074f0: 7373 4172 7261 7973 285b 7365 6c66 5d2c  ssArrays([self],
+00007500: 2030 295b 305d 0d0a 2020 2020 2020 2020   0)[0]..        
+00007510: 2020 2020 7265 7475 726e 2028 4641 5f46      return (FA_F
+00007520: 524f 4d5f 5549 4e54 382c 2028 6361 7272  ROM_UINT8, (carr
+00007530: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
+00007540: 292c 2929 0d0a 2020 2020 2020 2020 656c  ),))..        el
+00007550: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00007560: 2072 6574 7572 6e20 280d 0a20 2020 2020   return (..     
+00007570: 2020 2020 2020 2020 2020 2063 6c73 2e5f             cls._
+00007580: 5f6e 6577 5f5f 2c0d 0a20 2020 2020 2020  _new__,..       
+00007590: 2020 2020 2020 2020 2028 0d0a 2020 2020           (..    
 000075a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000075b0: 2020 636c 732c 0d0a 2020 2020 2020 2020    cls,..        
-000075c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000075d0: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
-000075e0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000075f0: 2020 2020 292c 0d0a 2020 2020 2020 2020      ),..        
-00007600: 2020 2020 290d 0a0d 0a20 2020 2023 202d      )....    # -
+000075b0: 636c 732c 0d0a 2020 2020 2020 2020 2020  cls,..          
+000075c0: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
+000075d0: 6965 7728 6e70 2e6e 6461 7272 6179 292c  iew(np.ndarray),
+000075e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000075f0: 2020 292c 0d0a 2020 2020 2020 2020 2020    ),..          
+00007600: 2020 290d 0a0d 0a20 2020 2023 202d 2d2d    )....    # ---
 00007610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007650: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
-00007660: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
-00007670: 2064 6566 205f 6368 6563 6b5f 6e64 696d   def _check_ndim
-00007680: 2863 6c73 2c20 696e 7374 616e 6365 293a  (cls, instance):
-00007690: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000076a0: 2020 2020 2020 2049 7465 7261 7465 7320         Iterates 
-000076b0: 7468 726f 7567 6820 6469 6d65 6e73 696f  through dimensio
-000076c0: 6e73 206f 6620 616e 2061 7272 6179 2c20  ns of an array, 
-000076d0: 636f 756e 7469 6e67 2068 6f77 206d 616e  counting how man
-000076e0: 7920 6469 6d65 6e73 696f 6e73 2068 6176  y dimensions hav
-000076f0: 6520 7661 6c75 6573 2067 7265 6174 6572  e values greater
-00007700: 2074 6861 6e20 312e 0d0a 2020 2020 2020   than 1...      
-00007710: 2020 5072 6f62 6c65 6d73 206d 6179 206f    Problems may o
-00007720: 6363 7572 6520 7769 7468 206d 756c 7469  ccure with multi
-00007730: 6469 6d65 6e73 696f 6e61 6c20 4661 7374  dimensional Fast
-00007740: 4172 7261 7973 2c20 616e 6420 7468 6520  Arrays, and the 
-00007750: 7573 6572 2077 696c 6c20 6265 2077 6172  user will be war
-00007760: 6e65 642e 0d0a 2020 2020 2020 2020 2222  ned...        ""
-00007770: 220d 0a20 2020 2020 2020 2069 6e64 6578  "..        index
-00007780: 203d 2030 0d0a 2020 2020 2020 2020 6162   = 0..        ab
-00007790: 6f76 656f 6e65 203d 2030 0d0a 2020 2020  oveone = 0..    
-000077a0: 2020 2020 7768 696c 6520 696e 6465 7820      while index 
-000077b0: 3c20 696e 7374 616e 6365 2e6e 6469 6d3a  < instance.ndim:
-000077c0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000077d0: 2069 6e73 7461 6e63 652e 7368 6170 655b   instance.shape[
-000077e0: 696e 6465 785d 203e 2031 3a0d 0a20 2020  index] > 1:..   
-000077f0: 2020 2020 2020 2020 2020 2020 2061 626f               abo
-00007800: 7665 6f6e 6520 2b3d 2031 0d0a 2020 2020  veone += 1..    
-00007810: 2020 2020 2020 2020 696e 6465 7820 2b3d          index +=
-00007820: 2031 0d0a 2020 2020 2020 2020 7265 7475   1..        retu
-00007830: 726e 2061 626f 7665 6f6e 650d 0a0d 0a20  rn aboveone.... 
-00007840: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00007650: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040 636c  -------..    @cl
+00007660: 6173 736d 6574 686f 640d 0a20 2020 2064  assmethod..    d
+00007670: 6566 205f 6368 6563 6b5f 6e64 696d 2863  ef _check_ndim(c
+00007680: 6c73 2c20 696e 7374 616e 6365 293a 0d0a  ls, instance):..
+00007690: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000076a0: 2020 2020 2049 7465 7261 7465 7320 7468       Iterates th
+000076b0: 726f 7567 6820 6469 6d65 6e73 696f 6e73  rough dimensions
+000076c0: 206f 6620 616e 2061 7272 6179 2c20 636f   of an array, co
+000076d0: 756e 7469 6e67 2068 6f77 206d 616e 7920  unting how many 
+000076e0: 6469 6d65 6e73 696f 6e73 2068 6176 6520  dimensions have 
+000076f0: 7661 6c75 6573 2067 7265 6174 6572 2074  values greater t
+00007700: 6861 6e20 312e 0d0a 2020 2020 2020 2020  han 1...        
+00007710: 5072 6f62 6c65 6d73 206d 6179 206f 6363  Problems may occ
+00007720: 7572 6520 7769 7468 206d 756c 7469 6469  ure with multidi
+00007730: 6d65 6e73 696f 6e61 6c20 4661 7374 4172  mensional FastAr
+00007740: 7261 7973 2c20 616e 6420 7468 6520 7573  rays, and the us
+00007750: 6572 2077 696c 6c20 6265 2077 6172 6e65  er will be warne
+00007760: 642e 0d0a 2020 2020 2020 2020 2222 220d  d...        """.
+00007770: 0a20 2020 2020 2020 2069 6e64 6578 203d  .        index =
+00007780: 2030 0d0a 2020 2020 2020 2020 6162 6f76   0..        abov
+00007790: 656f 6e65 203d 2030 0d0a 2020 2020 2020  eone = 0..      
+000077a0: 2020 7768 696c 6520 696e 6465 7820 3c20    while index < 
+000077b0: 696e 7374 616e 6365 2e6e 6469 6d3a 0d0a  instance.ndim:..
+000077c0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+000077d0: 6e73 7461 6e63 652e 7368 6170 655b 696e  nstance.shape[in
+000077e0: 6465 785d 203e 2031 3a0d 0a20 2020 2020  dex] > 1:..     
+000077f0: 2020 2020 2020 2020 2020 2061 626f 7665             above
+00007800: 6f6e 6520 2b3d 2031 0d0a 2020 2020 2020  one += 1..      
+00007810: 2020 2020 2020 696e 6465 7820 2b3d 2031        index += 1
+00007820: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00007830: 2061 626f 7665 6f6e 650d 0a0d 0a20 2020   aboveone....   
+00007840: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 00007850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00007890: 0a20 2020 2064 6566 2067 6574 5f6e 616d  .    def get_nam
-000078a0: 6528 7365 6c66 2920 2d3e 2073 7472 3a0d  e(self) -> str:.
-000078b0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000078c0: 2020 2020 2020 4765 7420 7468 6520 6e61        Get the na
-000078d0: 6d65 2074 6861 7427 7320 6173 7369 676e  me that's assign
-000078e0: 6564 2074 6f20 6120 6046 6173 7441 7272  ed to a `FastArr
-000078f0: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
-00007900: 5768 656e 2061 2060 4661 7374 4172 7261  When a `FastArra
-00007910: 7960 206f 626a 6563 7420 6973 2063 7265  y` object is cre
-00007920: 6174 6564 2c20 6974 2068 6173 206e 6f20  ated, it has no 
-00007930: 6e61 6d65 2e20 4974 2063 616e 2062 6520  name. It can be 
-00007940: 6173 7369 676e 6564 2061 206e 616d 650d  assigned a name.
-00007950: 0a20 2020 2020 2020 2076 6961 2060 7365  .        via `se
-00007960: 745f 6e61 6d65 602e 2046 6f72 2064 6574  t_name`. For det
-00007970: 6169 6c73 2c20 7365 6520 3a6d 6574 683a  ails, see :meth:
-00007980: 6046 6173 7441 7272 6179 2e73 6574 5f6e  `FastArray.set_n
-00007990: 616d 6560 2e0d 0a0d 0a20 2020 2020 2020  ame`.....       
-000079a0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-000079b0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-000079c0: 2020 2073 7472 206f 7220 4e6f 6e65 0d0a     str or None..
-000079d0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-000079e0: 6173 7369 676e 6564 206e 616d 652c 206f  assigned name, o
-000079f0: 7220 4e6f 6e65 2069 6620 7468 6520 6172  r None if the ar
-00007a00: 7261 7920 6861 7320 6e6f 7420 6265 656e  ray has not been
-00007a10: 206e 616d 6564 2e0d 0a0d 0a20 2020 2020   named.....     
-00007a20: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00007a30: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00007a40: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00007a50: 2e73 6574 5f6e 616d 650d 0a0d 0a20 2020  .set_name....   
-00007a60: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00007a70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00007a80: 0a20 2020 2020 2020 2041 7373 6967 6e20  .        Assign 
-00007a90: 7468 6520 6046 6173 7441 7272 6179 6020  the `FastArray` 
-00007aa0: 6120 6e61 6d65 2075 7369 6e67 203a 6d65  a name using :me
-00007ab0: 7468 3a60 4661 7374 4172 7261 792e 7365  th:`FastArray.se
-00007ac0: 745f 6e61 6d65 603a 0d0a 0d0a 2020 2020  t_name`:....    
-00007ad0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e61      >>> a = rt.a
-00007ae0: 7261 6e67 6528 3529 0d0a 2020 2020 2020  range(5)..      
-00007af0: 2020 3e3e 3e20 612e 7365 745f 6e61 6d65    >>> a.set_name
-00007b00: 2827 4641 204e 616d 6527 290d 0a20 2020  ('FA Name')..   
-00007b10: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00007b20: 302c 2031 2c20 322c 2033 2c20 345d 290d  0, 1, 2, 3, 4]).
-00007b30: 0a0d 0a20 2020 2020 2020 2047 6574 2074  ...        Get t
-00007b40: 6865 206e 616d 653a 0d0a 0d0a 2020 2020  he name:....    
-00007b50: 2020 2020 3e3e 3e20 612e 6765 745f 6e61      >>> a.get_na
-00007b60: 6d65 2829 0d0a 2020 2020 2020 2020 2746  me()..        'F
-00007b70: 4120 4e61 6d65 270d 0a20 2020 2020 2020  A Name'..       
-00007b80: 2022 2222 0d0a 2020 2020 2020 2020 6e61   """..        na
-00007b90: 6d65 203d 204e 6f6e 650d 0a20 2020 2020  me = None..     
-00007ba0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00007bb0: 2020 2020 206e 616d 6520 3d20 7365 6c66       name = self
-00007bc0: 2e5f 6e61 6d65 0d0a 2020 2020 2020 2020  ._name..        
-00007bd0: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-00007be0: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
-00007bf0: 2020 2072 6574 7572 6e20 6e61 6d65 0d0a     return name..
-00007c00: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00007880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00007890: 2020 2064 6566 2067 6574 5f6e 616d 6528     def get_name(
+000078a0: 7365 6c66 2920 2d3e 2073 7472 3a0d 0a20  self) -> str:.. 
+000078b0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000078c0: 2020 2020 4765 7420 7468 6520 6e61 6d65      Get the name
+000078d0: 2074 6861 7427 7320 6173 7369 676e 6564   that's assigned
+000078e0: 2074 6f20 6120 6046 6173 7441 7272 6179   to a `FastArray
+000078f0: 602e 0d0a 0d0a 2020 2020 2020 2020 5768  `.....        Wh
+00007900: 656e 2061 2060 4661 7374 4172 7261 7960  en a `FastArray`
+00007910: 206f 626a 6563 7420 6973 2063 7265 6174   object is creat
+00007920: 6564 2c20 6974 2068 6173 206e 6f20 6e61  ed, it has no na
+00007930: 6d65 2e20 4974 2063 616e 2062 6520 6173  me. It can be as
+00007940: 7369 676e 6564 2061 206e 616d 650d 0a20  signed a name.. 
+00007950: 2020 2020 2020 2076 6961 2060 7365 745f         via `set_
+00007960: 6e61 6d65 602e 2046 6f72 2064 6574 6169  name`. For detai
+00007970: 6c73 2c20 7365 6520 3a6d 6574 683a 6046  ls, see :meth:`F
+00007980: 6173 7441 7272 6179 2e73 6574 5f6e 616d  astArray.set_nam
+00007990: 6560 2e0d 0a0d 0a20 2020 2020 2020 2052  e`.....        R
+000079a0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+000079b0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+000079c0: 2073 7472 206f 7220 4e6f 6e65 0d0a 2020   str or None..  
+000079d0: 2020 2020 2020 2020 2020 5468 6520 6173            The as
+000079e0: 7369 676e 6564 206e 616d 652c 206f 7220  signed name, or 
+000079f0: 4e6f 6e65 2069 6620 7468 6520 6172 7261  None if the arra
+00007a00: 7920 6861 7320 6e6f 7420 6265 656e 206e  y has not been n
+00007a10: 616d 6564 2e0d 0a0d 0a20 2020 2020 2020  amed.....       
+00007a20: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00007a30: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00007a40: 2020 2020 2046 6173 7441 7272 6179 2e73       FastArray.s
+00007a50: 6574 5f6e 616d 650d 0a0d 0a20 2020 2020  et_name....     
+00007a60: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+00007a70: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00007a80: 2020 2020 2020 2041 7373 6967 6e20 7468         Assign th
+00007a90: 6520 6046 6173 7441 7272 6179 6020 6120  e `FastArray` a 
+00007aa0: 6e61 6d65 2075 7369 6e67 203a 6d65 7468  name using :meth
+00007ab0: 3a60 4661 7374 4172 7261 792e 7365 745f  :`FastArray.set_
+00007ac0: 6e61 6d65 603a 0d0a 0d0a 2020 2020 2020  name`:....      
+00007ad0: 2020 3e3e 3e20 6120 3d20 7274 2e61 7261    >>> a = rt.ara
+00007ae0: 6e67 6528 3529 0d0a 2020 2020 2020 2020  nge(5)..        
+00007af0: 3e3e 3e20 612e 7365 745f 6e61 6d65 2827  >>> a.set_name('
+00007b00: 4641 204e 616d 6527 290d 0a20 2020 2020  FA Name')..     
+00007b10: 2020 2046 6173 7441 7272 6179 285b 302c     FastArray([0,
+00007b20: 2031 2c20 322c 2033 2c20 345d 290d 0a0d   1, 2, 3, 4])...
+00007b30: 0a20 2020 2020 2020 2047 6574 2074 6865  .        Get the
+00007b40: 206e 616d 653a 0d0a 0d0a 2020 2020 2020   name:....      
+00007b50: 2020 3e3e 3e20 612e 6765 745f 6e61 6d65    >>> a.get_name
+00007b60: 2829 0d0a 2020 2020 2020 2020 2746 4120  ()..        'FA 
+00007b70: 4e61 6d65 270d 0a20 2020 2020 2020 2022  Name'..        "
+00007b80: 2222 0d0a 2020 2020 2020 2020 6e61 6d65  ""..        name
+00007b90: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00007ba0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00007bb0: 2020 206e 616d 6520 3d20 7365 6c66 2e5f     name = self._
+00007bc0: 6e61 6d65 0d0a 2020 2020 2020 2020 6578  name..        ex
+00007bd0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+00007be0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
+00007bf0: 2072 6574 7572 6e20 6e61 6d65 0d0a 0d0a   return name....
+00007c00: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
 00007c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c50: 2d2d 0d0a 2020 2020 6465 6620 7365 745f  --..    def set_
-00007c60: 6e61 6d65 2873 656c 662c 206e 616d 6529  name(self, name)
-00007c70: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-00007c80: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00007c90: 2020 2020 2041 7373 6967 6e20 6120 6e61       Assign a na
-00007ca0: 6d65 2074 6f20 6120 6046 6173 7441 7272  me to a `FastArr
-00007cb0: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
-00007cc0: 4120 6046 6173 7441 7272 6179 6020 6973  A `FastArray` is
-00007cd0: 2061 2077 7261 7070 6572 2061 726f 756e   a wrapper aroun
-00007ce0: 6420 6120 4e75 6d50 7920 606e 6461 7272  d a NumPy `ndarr
-00007cf0: 6179 602e 2057 6865 6e20 6120 6046 6173  ay`. When a `Fas
-00007d00: 7441 7272 6179 6020 6973 0d0a 2020 2020  tArray` is..    
-00007d10: 2020 2020 6372 6561 7465 642c 2069 7420      created, it 
-00007d20: 6861 7320 6e6f 206e 616d 652e 2059 6f75  has no name. You
-00007d30: 2063 616e 2061 7373 6967 6e20 6974 2061   can assign it a
-00007d40: 206e 616d 6520 7573 696e 6720 6073 6574   name using `set
-00007d50: 5f6e 616d 6560 2e0d 0a0d 0a20 2020 2020  _name`.....     
-00007d60: 2020 202a 2a49 6e74 6572 6163 7469 6f6e     **Interaction
-00007d70: 7320 7769 7468 2044 6174 6173 6574 204f  s with Dataset O
-00007d80: 626a 6563 7473 2a2a 0d0a 0d0a 2020 2020  bjects**....    
-00007d90: 2020 2020 5768 656e 2061 6e20 756e 6e61      When an unna
-00007da0: 6d65 6420 6046 6173 7441 7272 6179 6020  med `FastArray` 
-00007db0: 6973 2061 6464 6564 2074 6f20 6120 6044  is added to a `D
-00007dc0: 6174 6173 6574 603a 0d0a 0d0a 2020 2020  ataset`:....    
-00007dd0: 2020 2020 2d20 5468 6520 6046 6173 7441      - The `FastA
-00007de0: 7272 6179 6020 696e 6865 7269 7473 2074  rray` inherits t
-00007df0: 6865 206e 616d 6520 6f66 2074 6865 2060  he name of the `
-00007e00: 4461 7461 7365 7460 2063 6f6c 756d 6e2e  Dataset` column.
-00007e10: 0d0a 2020 2020 2020 2020 2d20 4361 6c6c  ..        - Call
-00007e20: 696e 6720 6060 6661 2e73 6574 5f6e 616d  ing ``fa.set_nam
-00007e30: 6560 6020 6f72 2060 6064 732e 636f 6c2e  e`` or ``ds.col.
-00007e40: 7365 745f 6e61 6d65 6060 2c20 6f72 2063  set_name``, or c
-00007e50: 6861 6e67 696e 6720 7468 6520 6469 7370  hanging the disp
-00007e60: 6c61 7965 640d 0a20 2020 2020 2020 2020  layed..         
-00007e70: 2063 6f6c 756d 6e20 6e61 6d65 2076 6961   column name via
-00007e80: 2060 6064 732e 636f 6c5f 7265 6e61 6d65   ``ds.col_rename
-00007e90: 6060 2c20 6368 616e 6765 7320 7468 6520  ``, changes the 
-00007ea0: 6e61 6d65 2061 7373 6967 6e65 6420 746f  name assigned to
-00007eb0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
-00007ec0: 6046 6173 7441 7272 6179 602e 0d0a 0d0a  `FastArray`.....
-00007ed0: 2020 2020 2020 2020 2020 2020 2d20 4e6f              - No
-00007ee0: 7465 2074 6861 7420 6361 6c6c 696e 6720  te that calling 
-00007ef0: 6060 6661 2e73 6574 5f6e 616d 6560 6020  ``fa.set_name`` 
-00007f00: 6f72 2060 6064 732e 636f 6c2e 7365 745f  or ``ds.col.set_
-00007f10: 6e61 6d65 6060 2064 6f65 736e 2774 2063  name`` doesn't c
-00007f20: 6861 6e67 6520 7468 650d 0a20 2020 2020  hange the..     
-00007f30: 2020 2020 2020 2020 2064 6973 706c 6179           display
-00007f40: 6564 2063 6f6c 756d 6e20 6e61 6d65 2e0d  ed column name..
-00007f50: 0a0d 0a20 2020 2020 2020 2057 6865 6e20  ...        When 
-00007f60: 6120 6e61 6d65 6420 6046 6173 7441 7272  a named `FastArr
-00007f70: 6179 6020 6973 2061 6464 6564 2074 6f20  ay` is added to 
-00007f80: 6120 6044 6174 6173 6574 603a 0d0a 0d0a  a `Dataset`:....
-00007f90: 2020 2020 2020 2020 2d20 4120 6e65 7720          - A new 
-00007fa0: 6046 6173 7441 7272 6179 6020 696e 7374  `FastArray` inst
-00007fb0: 616e 6365 2069 7320 6372 6561 7465 6420  ance is created 
-00007fc0: 7468 6174 2069 6e68 6572 6974 7320 7468  that inherits th
-00007fd0: 6520 6044 6174 6173 6574 6020 636f 6c75  e `Dataset` colu
-00007fe0: 6d6e 206e 616d 652e 0d0a 2020 2020 2020  mn name...      
-00007ff0: 2020 2d20 4361 6c6c 696e 6720 6060 6473    - Calling ``ds
-00008000: 2e63 6f6c 2e73 6574 5f6e 616d 6560 6020  .col.set_name`` 
-00008010: 6f72 2063 6861 6e67 696e 6720 7468 6520  or changing the 
-00008020: 6469 7370 6c61 7965 6420 636f 6c75 6d6e  displayed column
-00008030: 206e 616d 6520 7669 610d 0a20 2020 2020   name via..     
-00008040: 2020 2020 2060 6064 732e 636f 6c5f 7265       ``ds.col_re
-00008050: 6e61 6d65 6060 2063 6861 6e67 6573 2074  name`` changes t
-00008060: 6865 206e 6577 2069 6e73 7461 6e63 6527  he new instance'
-00008070: 7320 6e61 6d65 2e0d 0a20 2020 2020 2020  s name...       
-00008080: 202d 2043 616c 6c69 6e67 2060 7365 745f   - Calling `set_
-00008090: 6e61 6d65 6020 6f6e 2074 6865 206f 7269  name` on the ori
-000080a0: 6769 6e61 6c20 6046 6173 7441 7272 6179  ginal `FastArray
-000080b0: 6020 696e 7374 616e 6365 2063 6861 6e67  ` instance chang
-000080c0: 6573 206f 6e6c 7920 7468 6174 2069 6e73  es only that ins
-000080d0: 7461 6e63 6527 730d 0a20 2020 2020 2020  tance's..       
-000080e0: 2020 206e 616d 652e 0d0a 0d0a 2020 2020     name.....    
-000080f0: 2020 2020 496e 2062 6f74 6820 6361 7365      In both case
-00008100: 732c 2074 6865 204e 756d 5079 2061 7272  s, the NumPy arr
-00008110: 6179 2075 6e64 6572 6c79 696e 6720 7468  ay underlying th
-00008120: 6520 6046 6173 7441 7272 6179 6020 6973  e `FastArray` is
-00008130: 2073 6861 7265 6420 2d2d 2063 6861 6e67   shared -- chang
-00008140: 6573 0d0a 2020 2020 2020 2020 746f 2069  es..        to i
-00008150: 7473 2076 616c 7565 7320 6170 7065 6172  ts values appear
-00008160: 2069 6e20 7468 6520 6044 6174 6173 6574   in the `Dataset
-00008170: 6020 636f 6c75 6d6e 2c20 616e 6420 7669  ` column, and vi
-00008180: 6365 2d76 6572 7361 2e0d 0a0d 0a20 2020  ce-versa.....   
-00008190: 2020 2020 202a 2a49 6e74 6572 6163 7469       **Interacti
-000081a0: 6f6e 7320 7769 7468 2046 6173 7441 7272  ons with FastArr
-000081b0: 6179 204f 626a 6563 7473 2a2a 0d0a 0d0a  ay Objects**....
-000081c0: 2020 2020 2020 2020 2d20 5768 656e 2061          - When a
-000081d0: 2060 4661 7374 4172 7261 7960 2069 7320   `FastArray` is 
-000081e0: 6372 6561 7465 6420 6173 2061 2076 6965  created as a vie
-000081f0: 7720 6f66 2061 6e6f 7468 6572 2c20 6e61  w of another, na
-00008200: 6d65 6420 6046 6173 7441 7272 6179 602c  med `FastArray`,
-00008210: 2074 6865 206e 6577 0d0a 2020 2020 2020   the new..      
-00008220: 2020 2020 6046 6173 7441 7272 6179 6020      `FastArray` 
-00008230: 696e 7374 616e 6365 2069 6e68 6572 6974  instance inherit
-00008240: 7320 7468 6520 6e61 6d65 2066 726f 6d20  s the name from 
-00008250: 7468 6520 6f72 6967 696e 616c 2060 4661  the original `Fa
-00008260: 7374 4172 7261 7960 2e0d 0a20 2020 2020  stArray`...     
-00008270: 2020 202d 2057 6865 7468 6572 2074 6865     - Whether the
-00008280: 206f 7269 6769 6e61 6c20 6046 6173 7441   original `FastA
-00008290: 7272 6179 6020 6973 206e 616d 6564 206f  rray` is named o
-000082a0: 7220 756e 6e61 6d65 642c 2063 616c 6c69  r unnamed, calli
-000082b0: 6e67 2060 7365 745f 6e61 6d65 6020 6f6e  ng `set_name` on
-000082c0: 0d0a 2020 2020 2020 2020 2020 6569 7468  ..          eith
-000082d0: 6572 2060 4661 7374 4172 7261 7960 2064  er `FastArray` d
-000082e0: 6f65 7320 6e6f 7420 6368 616e 6765 2074  oes not change t
-000082f0: 6865 206e 616d 6520 6f66 2074 6865 206f  he name of the o
-00008300: 7468 6572 2060 4661 7374 4172 7261 7960  ther `FastArray`
-00008310: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00008320: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00008330: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00008340: 2020 2020 206e 616d 6520 3a20 7374 720d       name : str.
-00008350: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-00008360: 206e 616d 6520 746f 2061 7373 6967 6e20   name to assign 
-00008370: 746f 2074 6865 2060 4661 7374 4172 7261  to the `FastArra
-00008380: 7960 2e0d 0a0d 0a20 2020 2020 2020 2052  y`.....        R
-00008390: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-000083a0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000083b0: 2060 4661 7374 4172 7261 7960 0d0a 2020   `FastArray`..  
-000083c0: 2020 2020 2020 2020 2020 5468 6520 6046            The `F
-000083d0: 6173 7441 7272 6179 6020 6973 2072 6574  astArray` is ret
-000083e0: 7572 6e65 642e 2054 6865 206e 616d 6520  urned. The name 
-000083f0: 6361 6e20 6265 2061 6363 6573 7365 6420  can be accessed 
-00008400: 7573 696e 670d 0a20 2020 2020 2020 2020  using..         
-00008410: 2020 203a 6d65 7468 3a60 4661 7374 4172     :meth:`FastAr
-00008420: 7261 792e 6765 745f 6e61 6d65 602e 0d0a  ray.get_name`...
-00008430: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-00008440: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-00008450: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
-00008460: 7374 4172 7261 792e 6765 745f 6e61 6d65  stArray.get_name
-00008470: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-00008480: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-00008490: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000084a0: 3e3e 3e20 6120 3d20 7274 2e61 7261 6e67  >>> a = rt.arang
-000084b0: 6528 3529 0d0a 2020 2020 2020 2020 3e3e  e(5)..        >>
-000084c0: 3e20 612e 7365 745f 6e61 6d65 2827 4641  > a.set_name('FA
-000084d0: 204e 616d 6527 290d 0a20 2020 2020 2020   Name')..       
-000084e0: 2046 6173 7441 7272 6179 285b 302c 2031   FastArray([0, 1
-000084f0: 2c20 322c 2033 2c20 345d 290d 0a0d 0a20  , 2, 3, 4]).... 
-00008500: 2020 2020 2020 2059 6f75 2063 616e 2067         You can g
-00008510: 6574 2074 6865 206e 616d 6520 7573 696e  et the name usin
-00008520: 6720 3a6d 6574 683a 6046 6173 7441 7272  g :meth:`FastArr
-00008530: 6179 2e67 6574 5f6e 616d 6560 3a0d 0a0d  ay.get_name`:...
-00008540: 0a20 2020 2020 2020 203e 3e3e 2061 2e67  .        >>> a.g
-00008550: 6574 5f6e 616d 6528 290d 0a20 2020 2020  et_name()..     
-00008560: 2020 2027 4641 204e 616d 6527 0d0a 0d0a     'FA Name'....
-00008570: 2020 2020 2020 2020 5768 656e 2061 6e20          When an 
-00008580: 756e 6e61 6d65 6420 6046 6173 7441 7272  unnamed `FastArr
-00008590: 6179 6020 6973 2061 6464 6564 2074 6f20  ay` is added to 
-000085a0: 6120 6044 6174 6173 6574 6020 636f 6c75  a `Dataset` colu
-000085b0: 6d6e 2c20 7468 6520 6046 6173 7441 7272  mn, the `FastArr
-000085c0: 6179 600d 0a20 2020 2020 2020 2069 6e68  ay`..        inh
-000085d0: 6572 6974 7320 7468 6520 6e61 6d65 206f  erits the name o
-000085e0: 6620 7468 6520 636f 6c75 6d6e 2e0d 0a0d  f the column....
-000085f0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-00008600: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
-00008610: 2c20 322c 2033 5d29 0d0a 2020 2020 2020  , 2, 3])..      
-00008620: 2020 3e3e 3e20 6473 203d 2072 742e 4461    >>> ds = rt.Da
-00008630: 7461 7365 7428 290d 0a20 2020 2020 2020  taset()..       
-00008640: 203e 3e3e 2064 732e 436f 6c75 6d6e 5f4e   >>> ds.Column_N
-00008650: 616d 6520 3d20 610d 0a20 2020 2020 2020  ame = a..       
-00008660: 203e 3e3e 2061 2e67 6574 5f6e 616d 6528   >>> a.get_name(
-00008670: 290d 0a20 2020 2020 2020 2027 436f 6c75  )..        'Colu
-00008680: 6d6e 5f4e 616d 6527 0d0a 0d0a 2020 2020  mn_Name'....    
-00008690: 2020 2020 4361 6c6c 696e 6720 6060 6473      Calling ``ds
-000086a0: 2e63 6f6c 2e73 6574 5f6e 616d 6560 6020  .col.set_name`` 
-000086b0: 6368 616e 6765 7320 7468 6520 6e61 6d65  changes the name
-000086c0: 2061 7373 6967 6e65 6420 746f 2074 6865   assigned to the
-000086d0: 2060 4661 7374 4172 7261 7960 0d0a 2020   `FastArray`..  
-000086e0: 2020 2020 2020 2862 7574 206e 6f74 2074        (but not t
-000086f0: 6865 2064 6973 706c 6179 6564 2063 6f6c  he displayed col
-00008700: 756d 6e20 6e61 6d65 292e 0d0a 0d0a 2020  umn name).....  
-00008710: 2020 2020 2020 3e3e 3e20 6473 2e43 6f6c        >>> ds.Col
-00008720: 756d 6e5f 4e61 6d65 2e73 6574 5f6e 616d  umn_Name.set_nam
-00008730: 6528 274e 6577 204e 616d 6527 290d 0a20  e('New Name').. 
-00008740: 2020 2020 2020 203e 3e3e 2061 2e67 6574         >>> a.get
-00008750: 5f6e 616d 6528 290d 0a20 2020 2020 2020  _name()..       
-00008760: 2027 4e65 7720 4e61 6d65 270d 0a20 2020   'New Name'..   
-00008770: 2020 2020 203e 3e3e 2064 730d 0a20 2020       >>> ds..   
-00008780: 2020 2020 2023 2020 2043 6f6c 756d 6e5f       #   Column_
-00008790: 4e61 6d65 0d0a 2020 2020 2020 2020 2d20  Name..        - 
-000087a0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20    -----------.. 
-000087b0: 2020 2020 2020 2030 2020 2020 2020 2020         0        
-000087c0: 2020 2020 2031 0d0a 2020 2020 2020 2020       1..        
-000087d0: 3120 2020 2020 2020 2020 2020 2020 320d  1             2.
-000087e0: 0a20 2020 2020 2020 2032 2020 2020 2020  .        2      
-000087f0: 2020 2020 2020 2033 0d0a 0d0a 2020 2020         3....    
-00008800: 2020 2020 5768 656e 2061 206e 616d 6564      When a named
-00008810: 2060 4661 7374 4172 7261 7960 2069 7320   `FastArray` is 
-00008820: 6164 6465 6420 746f 2061 2060 4461 7461  added to a `Data
-00008830: 7365 7460 2063 6f6c 756d 6e2c 2061 206e  set` column, a n
-00008840: 6577 2060 4661 7374 4172 7261 7960 0d0a  ew `FastArray`..
-00008850: 2020 2020 2020 2020 696e 7374 616e 6365          instance
-00008860: 2069 7320 6372 6561 7465 6420 7468 6174   is created that
-00008870: 2069 6e68 6572 6974 7320 7468 6520 636f   inherits the co
-00008880: 6c75 6d6e 206e 616d 652e 2054 6865 206f  lumn name. The o
-00008890: 7269 6769 6e61 6c20 696e 7374 616e 6365  riginal instance
-000088a0: 2069 730d 0a20 2020 2020 2020 206e 6f74   is..        not
-000088b0: 2072 656e 616d 6564 2e0d 0a0d 0a20 2020   renamed.....   
-000088c0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-000088d0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-000088e0: 2033 5d29 0d0a 2020 2020 2020 2020 3e3e   3])..        >>
-000088f0: 3e20 612e 7365 745f 6e61 6d65 2827 4641  > a.set_name('FA
-00008900: 204e 616d 6527 290d 0a20 2020 2020 2020   Name')..       
-00008910: 203e 3e3e 2064 7320 3d20 7274 2e44 6174   >>> ds = rt.Dat
-00008920: 6173 6574 2829 0d0a 2020 2020 2020 2020  aset()..        
-00008930: 3e3e 3e20 6473 2e43 6f6c 756d 6e5f 4e61  >>> ds.Column_Na
-00008940: 6d65 203d 2061 0d0a 2020 2020 2020 2020  me = a..        
-00008950: 3e3e 3e20 6473 2e43 6f6c 756d 6e5f 4e61  >>> ds.Column_Na
-00008960: 6d65 2e67 6574 5f6e 616d 6528 290d 0a20  me.get_name().. 
-00008970: 2020 2020 2020 2027 436f 6c75 6d6e 5f4e         'Column_N
-00008980: 616d 6527 0d0a 2020 2020 2020 2020 3e3e  ame'..        >>
-00008990: 3e20 612e 6765 745f 6e61 6d65 2829 0d0a  > a.get_name()..
-000089a0: 2020 2020 2020 2020 2746 4120 4e61 6d65          'FA Name
-000089b0: 270d 0a0d 0a20 2020 2020 2020 2043 6861  '....        Cha
-000089c0: 6e67 696e 6720 7468 6520 6469 7370 6c61  nging the displa
-000089d0: 7965 6420 636f 6c75 6d6e 206e 616d 6520  yed column name 
-000089e0: 6166 6665 6374 7320 7468 6520 6e61 6d65  affects the name
-000089f0: 206f 6620 7468 6520 6e65 7720 696e 7374   of the new inst
-00008a00: 616e 6365 2c0d 0a20 2020 2020 2020 2062  ance,..        b
-00008a10: 7574 206e 6f74 2074 6865 206e 616d 6520  ut not the name 
-00008a20: 6f66 2074 6865 206f 7269 6769 6e61 6c20  of the original 
-00008a30: 6046 6173 7441 7272 6179 602e 0d0a 0d0a  `FastArray`.....
-00008a40: 2020 2020 2020 2020 3e3e 3e20 6473 2e63          >>> ds.c
-00008a50: 6f6c 5f72 656e 616d 6528 2743 6f6c 756d  ol_rename('Colum
-00008a60: 6e5f 4e61 6d65 272c 2027 4e65 775f 436f  n_Name', 'New_Co
-00008a70: 6c75 6d6e 2729 0d0a 2020 2020 2020 2020  lumn')..        
-00008a80: 3e3e 3e20 6473 2e4e 6577 5f43 6f6c 756d  >>> ds.New_Colum
-00008a90: 6e2e 6765 745f 6e61 6d65 2829 0d0a 2020  n.get_name()..  
-00008aa0: 2020 2020 2020 274e 6577 5f43 6f6c 756d        'New_Colum
-00008ab0: 6e27 0d0a 2020 2020 2020 2020 3e3e 3e20  n'..        >>> 
-00008ac0: 612e 6765 745f 6e61 6d65 2829 0d0a 2020  a.get_name()..  
-00008ad0: 2020 2020 2020 2746 4120 4e61 6d65 270d        'FA Name'.
-00008ae0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00008af0: 2020 2020 2020 7365 6c66 2e5f 6e61 6d65        self._name
-00008b00: 203d 206e 616d 650d 0a20 2020 2020 2020   = name..       
-00008b10: 2072 6574 7572 6e20 7365 6c66 0d0a 0d0a   return self....
-00008b20: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00007c50: 0d0a 2020 2020 6465 6620 7365 745f 6e61  ..    def set_na
+00007c60: 6d65 2873 656c 662c 206e 616d 6529 202d  me(self, name) -
+00007c70: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+00007c80: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00007c90: 2020 2041 7373 6967 6e20 6120 6e61 6d65     Assign a name
+00007ca0: 2074 6f20 6120 6046 6173 7441 7272 6179   to a `FastArray
+00007cb0: 602e 0d0a 0d0a 2020 2020 2020 2020 4120  `.....        A 
+00007cc0: 6046 6173 7441 7272 6179 6020 6973 2061  `FastArray` is a
+00007cd0: 2077 7261 7070 6572 2061 726f 756e 6420   wrapper around 
+00007ce0: 6120 4e75 6d50 7920 606e 6461 7272 6179  a NumPy `ndarray
+00007cf0: 602e 2057 6865 6e20 6120 6046 6173 7441  `. When a `FastA
+00007d00: 7272 6179 6020 6973 0d0a 2020 2020 2020  rray` is..      
+00007d10: 2020 6372 6561 7465 642c 2069 7420 6861    created, it ha
+00007d20: 7320 6e6f 206e 616d 652e 2059 6f75 2063  s no name. You c
+00007d30: 616e 2061 7373 6967 6e20 6974 2061 206e  an assign it a n
+00007d40: 616d 6520 7573 696e 6720 6073 6574 5f6e  ame using `set_n
+00007d50: 616d 6560 2e0d 0a0d 0a20 2020 2020 2020  ame`.....       
+00007d60: 202a 2a49 6e74 6572 6163 7469 6f6e 7320   **Interactions 
+00007d70: 7769 7468 2044 6174 6173 6574 204f 626a  with Dataset Obj
+00007d80: 6563 7473 2a2a 0d0a 0d0a 2020 2020 2020  ects**....      
+00007d90: 2020 5768 656e 2061 6e20 756e 6e61 6d65    When an unname
+00007da0: 6420 6046 6173 7441 7272 6179 6020 6973  d `FastArray` is
+00007db0: 2061 6464 6564 2074 6f20 6120 6044 6174   added to a `Dat
+00007dc0: 6173 6574 603a 0d0a 0d0a 2020 2020 2020  aset`:....      
+00007dd0: 2020 2d20 5468 6520 6046 6173 7441 7272    - The `FastArr
+00007de0: 6179 6020 696e 6865 7269 7473 2074 6865  ay` inherits the
+00007df0: 206e 616d 6520 6f66 2074 6865 2060 4461   name of the `Da
+00007e00: 7461 7365 7460 2063 6f6c 756d 6e2e 0d0a  taset` column...
+00007e10: 2020 2020 2020 2020 2d20 4361 6c6c 696e          - Callin
+00007e20: 6720 6060 6661 2e73 6574 5f6e 616d 6560  g ``fa.set_name`
+00007e30: 6020 6f72 2060 6064 732e 636f 6c2e 7365  ` or ``ds.col.se
+00007e40: 745f 6e61 6d65 6060 2c20 6f72 2063 6861  t_name``, or cha
+00007e50: 6e67 696e 6720 7468 6520 6469 7370 6c61  nging the displa
+00007e60: 7965 640d 0a20 2020 2020 2020 2020 2063  yed..          c
+00007e70: 6f6c 756d 6e20 6e61 6d65 2076 6961 2060  olumn name via `
+00007e80: 6064 732e 636f 6c5f 7265 6e61 6d65 6060  `ds.col_rename``
+00007e90: 2c20 6368 616e 6765 7320 7468 6520 6e61  , changes the na
+00007ea0: 6d65 2061 7373 6967 6e65 6420 746f 2074  me assigned to t
+00007eb0: 6865 0d0a 2020 2020 2020 2020 2020 6046  he..          `F
+00007ec0: 6173 7441 7272 6179 602e 0d0a 0d0a 2020  astArray`.....  
+00007ed0: 2020 2020 2020 2020 2020 2d20 4e6f 7465            - Note
+00007ee0: 2074 6861 7420 6361 6c6c 696e 6720 6060   that calling ``
+00007ef0: 6661 2e73 6574 5f6e 616d 6560 6020 6f72  fa.set_name`` or
+00007f00: 2060 6064 732e 636f 6c2e 7365 745f 6e61   ``ds.col.set_na
+00007f10: 6d65 6060 2064 6f65 736e 2774 2063 6861  me`` doesn't cha
+00007f20: 6e67 6520 7468 650d 0a20 2020 2020 2020  nge the..       
+00007f30: 2020 2020 2020 2064 6973 706c 6179 6564         displayed
+00007f40: 2063 6f6c 756d 6e20 6e61 6d65 2e0d 0a0d   column name....
+00007f50: 0a20 2020 2020 2020 2057 6865 6e20 6120  .        When a 
+00007f60: 6e61 6d65 6420 6046 6173 7441 7272 6179  named `FastArray
+00007f70: 6020 6973 2061 6464 6564 2074 6f20 6120  ` is added to a 
+00007f80: 6044 6174 6173 6574 603a 0d0a 0d0a 2020  `Dataset`:....  
+00007f90: 2020 2020 2020 2d20 4120 6e65 7720 6046        - A new `F
+00007fa0: 6173 7441 7272 6179 6020 696e 7374 616e  astArray` instan
+00007fb0: 6365 2069 7320 6372 6561 7465 6420 7468  ce is created th
+00007fc0: 6174 2069 6e68 6572 6974 7320 7468 6520  at inherits the 
+00007fd0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
+00007fe0: 206e 616d 652e 0d0a 2020 2020 2020 2020   name...        
+00007ff0: 2d20 4361 6c6c 696e 6720 6060 6473 2e63  - Calling ``ds.c
+00008000: 6f6c 2e73 6574 5f6e 616d 6560 6020 6f72  ol.set_name`` or
+00008010: 2063 6861 6e67 696e 6720 7468 6520 6469   changing the di
+00008020: 7370 6c61 7965 6420 636f 6c75 6d6e 206e  splayed column n
+00008030: 616d 6520 7669 610d 0a20 2020 2020 2020  ame via..       
+00008040: 2020 2060 6064 732e 636f 6c5f 7265 6e61     ``ds.col_rena
+00008050: 6d65 6060 2063 6861 6e67 6573 2074 6865  me`` changes the
+00008060: 206e 6577 2069 6e73 7461 6e63 6527 7320   new instance's 
+00008070: 6e61 6d65 2e0d 0a20 2020 2020 2020 202d  name...        -
+00008080: 2043 616c 6c69 6e67 2060 7365 745f 6e61   Calling `set_na
+00008090: 6d65 6020 6f6e 2074 6865 206f 7269 6769  me` on the origi
+000080a0: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
+000080b0: 696e 7374 616e 6365 2063 6861 6e67 6573  instance changes
+000080c0: 206f 6e6c 7920 7468 6174 2069 6e73 7461   only that insta
+000080d0: 6e63 6527 730d 0a20 2020 2020 2020 2020  nce's..         
+000080e0: 206e 616d 652e 0d0a 0d0a 2020 2020 2020   name.....      
+000080f0: 2020 496e 2062 6f74 6820 6361 7365 732c    In both cases,
+00008100: 2074 6865 204e 756d 5079 2061 7272 6179   the NumPy array
+00008110: 2075 6e64 6572 6c79 696e 6720 7468 6520   underlying the 
+00008120: 6046 6173 7441 7272 6179 6020 6973 2073  `FastArray` is s
+00008130: 6861 7265 6420 2d2d 2063 6861 6e67 6573  hared -- changes
+00008140: 0d0a 2020 2020 2020 2020 746f 2069 7473  ..        to its
+00008150: 2076 616c 7565 7320 6170 7065 6172 2069   values appear i
+00008160: 6e20 7468 6520 6044 6174 6173 6574 6020  n the `Dataset` 
+00008170: 636f 6c75 6d6e 2c20 616e 6420 7669 6365  column, and vice
+00008180: 2d76 6572 7361 2e0d 0a0d 0a20 2020 2020  -versa.....     
+00008190: 2020 202a 2a49 6e74 6572 6163 7469 6f6e     **Interaction
+000081a0: 7320 7769 7468 2046 6173 7441 7272 6179  s with FastArray
+000081b0: 204f 626a 6563 7473 2a2a 0d0a 0d0a 2020   Objects**....  
+000081c0: 2020 2020 2020 2d20 5768 656e 2061 2060        - When a `
+000081d0: 4661 7374 4172 7261 7960 2069 7320 6372  FastArray` is cr
+000081e0: 6561 7465 6420 6173 2061 2076 6965 7720  eated as a view 
+000081f0: 6f66 2061 6e6f 7468 6572 2c20 6e61 6d65  of another, name
+00008200: 6420 6046 6173 7441 7272 6179 602c 2074  d `FastArray`, t
+00008210: 6865 206e 6577 0d0a 2020 2020 2020 2020  he new..        
+00008220: 2020 6046 6173 7441 7272 6179 6020 696e    `FastArray` in
+00008230: 7374 616e 6365 2069 6e68 6572 6974 7320  stance inherits 
+00008240: 7468 6520 6e61 6d65 2066 726f 6d20 7468  the name from th
+00008250: 6520 6f72 6967 696e 616c 2060 4661 7374  e original `Fast
+00008260: 4172 7261 7960 2e0d 0a20 2020 2020 2020  Array`...       
+00008270: 202d 2057 6865 7468 6572 2074 6865 206f   - Whether the o
+00008280: 7269 6769 6e61 6c20 6046 6173 7441 7272  riginal `FastArr
+00008290: 6179 6020 6973 206e 616d 6564 206f 7220  ay` is named or 
+000082a0: 756e 6e61 6d65 642c 2063 616c 6c69 6e67  unnamed, calling
+000082b0: 2060 7365 745f 6e61 6d65 6020 6f6e 0d0a   `set_name` on..
+000082c0: 2020 2020 2020 2020 2020 6569 7468 6572            either
+000082d0: 2060 4661 7374 4172 7261 7960 2064 6f65   `FastArray` doe
+000082e0: 7320 6e6f 7420 6368 616e 6765 2074 6865  s not change the
+000082f0: 206e 616d 6520 6f66 2074 6865 206f 7468   name of the oth
+00008300: 6572 2060 4661 7374 4172 7261 7960 2e0d  er `FastArray`..
+00008310: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+00008320: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+00008330: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+00008340: 2020 206e 616d 6520 3a20 7374 720d 0a20     name : str.. 
+00008350: 2020 2020 2020 2020 2020 2054 6865 206e             The n
+00008360: 616d 6520 746f 2061 7373 6967 6e20 746f  ame to assign to
+00008370: 2074 6865 2060 4661 7374 4172 7261 7960   the `FastArray`
+00008380: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+00008390: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+000083a0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2060  -----..        `
+000083b0: 4661 7374 4172 7261 7960 0d0a 2020 2020  FastArray`..    
+000083c0: 2020 2020 2020 2020 5468 6520 6046 6173          The `Fas
+000083d0: 7441 7272 6179 6020 6973 2072 6574 7572  tArray` is retur
+000083e0: 6e65 642e 2054 6865 206e 616d 6520 6361  ned. The name ca
+000083f0: 6e20 6265 2061 6363 6573 7365 6420 7573  n be accessed us
+00008400: 696e 670d 0a20 2020 2020 2020 2020 2020  ing..           
+00008410: 203a 6d65 7468 3a60 4661 7374 4172 7261   :meth:`FastArra
+00008420: 792e 6765 745f 6e61 6d65 602e 0d0a 0d0a  y.get_name`.....
+00008430: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+00008440: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00008450: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00008460: 4172 7261 792e 6765 745f 6e61 6d65 0d0a  Array.get_name..
+00008470: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00008480: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00008490: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+000084a0: 3e20 6120 3d20 7274 2e61 7261 6e67 6528  > a = rt.arange(
+000084b0: 3529 0d0a 2020 2020 2020 2020 3e3e 3e20  5)..        >>> 
+000084c0: 612e 7365 745f 6e61 6d65 2827 4641 204e  a.set_name('FA N
+000084d0: 616d 6527 290d 0a20 2020 2020 2020 2046  ame')..        F
+000084e0: 6173 7441 7272 6179 285b 302c 2031 2c20  astArray([0, 1, 
+000084f0: 322c 2033 2c20 345d 290d 0a0d 0a20 2020  2, 3, 4])....   
+00008500: 2020 2020 2059 6f75 2063 616e 2067 6574       You can get
+00008510: 2074 6865 206e 616d 6520 7573 696e 6720   the name using 
+00008520: 3a6d 6574 683a 6046 6173 7441 7272 6179  :meth:`FastArray
+00008530: 2e67 6574 5f6e 616d 6560 3a0d 0a0d 0a20  .get_name`:.... 
+00008540: 2020 2020 2020 203e 3e3e 2061 2e67 6574         >>> a.get
+00008550: 5f6e 616d 6528 290d 0a20 2020 2020 2020  _name()..       
+00008560: 2027 4641 204e 616d 6527 0d0a 0d0a 2020   'FA Name'....  
+00008570: 2020 2020 2020 5768 656e 2061 6e20 756e        When an un
+00008580: 6e61 6d65 6420 6046 6173 7441 7272 6179  named `FastArray
+00008590: 6020 6973 2061 6464 6564 2074 6f20 6120  ` is added to a 
+000085a0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
+000085b0: 2c20 7468 6520 6046 6173 7441 7272 6179  , the `FastArray
+000085c0: 600d 0a20 2020 2020 2020 2069 6e68 6572  `..        inher
+000085d0: 6974 7320 7468 6520 6e61 6d65 206f 6620  its the name of 
+000085e0: 7468 6520 636f 6c75 6d6e 2e0d 0a0d 0a20  the column..... 
+000085f0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+00008600: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
+00008610: 322c 2033 5d29 0d0a 2020 2020 2020 2020  2, 3])..        
+00008620: 3e3e 3e20 6473 203d 2072 742e 4461 7461  >>> ds = rt.Data
+00008630: 7365 7428 290d 0a20 2020 2020 2020 203e  set()..        >
+00008640: 3e3e 2064 732e 436f 6c75 6d6e 5f4e 616d  >> ds.Column_Nam
+00008650: 6520 3d20 610d 0a20 2020 2020 2020 203e  e = a..        >
+00008660: 3e3e 2061 2e67 6574 5f6e 616d 6528 290d  >> a.get_name().
+00008670: 0a20 2020 2020 2020 2027 436f 6c75 6d6e  .        'Column
+00008680: 5f4e 616d 6527 0d0a 0d0a 2020 2020 2020  _Name'....      
+00008690: 2020 4361 6c6c 696e 6720 6060 6473 2e63    Calling ``ds.c
+000086a0: 6f6c 2e73 6574 5f6e 616d 6560 6020 6368  ol.set_name`` ch
+000086b0: 616e 6765 7320 7468 6520 6e61 6d65 2061  anges the name a
+000086c0: 7373 6967 6e65 6420 746f 2074 6865 2060  ssigned to the `
+000086d0: 4661 7374 4172 7261 7960 0d0a 2020 2020  FastArray`..    
+000086e0: 2020 2020 2862 7574 206e 6f74 2074 6865      (but not the
+000086f0: 2064 6973 706c 6179 6564 2063 6f6c 756d   displayed colum
+00008700: 6e20 6e61 6d65 292e 0d0a 0d0a 2020 2020  n name).....    
+00008710: 2020 2020 3e3e 3e20 6473 2e43 6f6c 756d      >>> ds.Colum
+00008720: 6e5f 4e61 6d65 2e73 6574 5f6e 616d 6528  n_Name.set_name(
+00008730: 274e 6577 204e 616d 6527 290d 0a20 2020  'New Name')..   
+00008740: 2020 2020 203e 3e3e 2061 2e67 6574 5f6e       >>> a.get_n
+00008750: 616d 6528 290d 0a20 2020 2020 2020 2027  ame()..        '
+00008760: 4e65 7720 4e61 6d65 270d 0a20 2020 2020  New Name'..     
+00008770: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
+00008780: 2020 2023 2020 2043 6f6c 756d 6e5f 4e61     #   Column_Na
+00008790: 6d65 0d0a 2020 2020 2020 2020 2d20 2020  me..        -   
+000087a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+000087b0: 2020 2020 2030 2020 2020 2020 2020 2020       0          
+000087c0: 2020 2031 0d0a 2020 2020 2020 2020 3120     1..        1 
+000087d0: 2020 2020 2020 2020 2020 2020 320d 0a20              2.. 
+000087e0: 2020 2020 2020 2032 2020 2020 2020 2020         2        
+000087f0: 2020 2020 2033 0d0a 0d0a 2020 2020 2020       3....      
+00008800: 2020 5768 656e 2061 206e 616d 6564 2060    When a named `
+00008810: 4661 7374 4172 7261 7960 2069 7320 6164  FastArray` is ad
+00008820: 6465 6420 746f 2061 2060 4461 7461 7365  ded to a `Datase
+00008830: 7460 2063 6f6c 756d 6e2c 2061 206e 6577  t` column, a new
+00008840: 2060 4661 7374 4172 7261 7960 0d0a 2020   `FastArray`..  
+00008850: 2020 2020 2020 696e 7374 616e 6365 2069        instance i
+00008860: 7320 6372 6561 7465 6420 7468 6174 2069  s created that i
+00008870: 6e68 6572 6974 7320 7468 6520 636f 6c75  nherits the colu
+00008880: 6d6e 206e 616d 652e 2054 6865 206f 7269  mn name. The ori
+00008890: 6769 6e61 6c20 696e 7374 616e 6365 2069  ginal instance i
+000088a0: 730d 0a20 2020 2020 2020 206e 6f74 2072  s..        not r
+000088b0: 656e 616d 6564 2e0d 0a0d 0a20 2020 2020  enamed.....     
+000088c0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+000088d0: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
+000088e0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+000088f0: 612e 7365 745f 6e61 6d65 2827 4641 204e  a.set_name('FA N
+00008900: 616d 6527 290d 0a20 2020 2020 2020 203e  ame')..        >
+00008910: 3e3e 2064 7320 3d20 7274 2e44 6174 6173  >> ds = rt.Datas
+00008920: 6574 2829 0d0a 2020 2020 2020 2020 3e3e  et()..        >>
+00008930: 3e20 6473 2e43 6f6c 756d 6e5f 4e61 6d65  > ds.Column_Name
+00008940: 203d 2061 0d0a 2020 2020 2020 2020 3e3e   = a..        >>
+00008950: 3e20 6473 2e43 6f6c 756d 6e5f 4e61 6d65  > ds.Column_Name
+00008960: 2e67 6574 5f6e 616d 6528 290d 0a20 2020  .get_name()..   
+00008970: 2020 2020 2027 436f 6c75 6d6e 5f4e 616d       'Column_Nam
+00008980: 6527 0d0a 2020 2020 2020 2020 3e3e 3e20  e'..        >>> 
+00008990: 612e 6765 745f 6e61 6d65 2829 0d0a 2020  a.get_name()..  
+000089a0: 2020 2020 2020 2746 4120 4e61 6d65 270d        'FA Name'.
+000089b0: 0a0d 0a20 2020 2020 2020 2043 6861 6e67  ...        Chang
+000089c0: 696e 6720 7468 6520 6469 7370 6c61 7965  ing the displaye
+000089d0: 6420 636f 6c75 6d6e 206e 616d 6520 6166  d column name af
+000089e0: 6665 6374 7320 7468 6520 6e61 6d65 206f  fects the name o
+000089f0: 6620 7468 6520 6e65 7720 696e 7374 616e  f the new instan
+00008a00: 6365 2c0d 0a20 2020 2020 2020 2062 7574  ce,..        but
+00008a10: 206e 6f74 2074 6865 206e 616d 6520 6f66   not the name of
+00008a20: 2074 6865 206f 7269 6769 6e61 6c20 6046   the original `F
+00008a30: 6173 7441 7272 6179 602e 0d0a 0d0a 2020  astArray`.....  
+00008a40: 2020 2020 2020 3e3e 3e20 6473 2e63 6f6c        >>> ds.col
+00008a50: 5f72 656e 616d 6528 2743 6f6c 756d 6e5f  _rename('Column_
+00008a60: 4e61 6d65 272c 2027 4e65 775f 436f 6c75  Name', 'New_Colu
+00008a70: 6d6e 2729 0d0a 2020 2020 2020 2020 3e3e  mn')..        >>
+00008a80: 3e20 6473 2e4e 6577 5f43 6f6c 756d 6e2e  > ds.New_Column.
+00008a90: 6765 745f 6e61 6d65 2829 0d0a 2020 2020  get_name()..    
+00008aa0: 2020 2020 274e 6577 5f43 6f6c 756d 6e27      'New_Column'
+00008ab0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00008ac0: 6765 745f 6e61 6d65 2829 0d0a 2020 2020  get_name()..    
+00008ad0: 2020 2020 2746 4120 4e61 6d65 270d 0a20      'FA Name'.. 
+00008ae0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00008af0: 2020 2020 7365 6c66 2e5f 6e61 6d65 203d      self._name =
+00008b00: 206e 616d 650d 0a20 2020 2020 2020 2072   name..        r
+00008b10: 6574 7572 6e20 7365 6c66 0d0a 0d0a 2020  eturn self....  
+00008b20: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 00008b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00008b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00008b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008b70: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00008b80: 686f 640d 0a20 2020 2064 6566 205f 4661  hod..    def _Fa
-00008b90: 7374 4675 6e63 7469 6f6e 734f 6e28 293a  stFunctionsOn():
-00008ba0: 0d0a 2020 2020 2020 2020 6966 2046 6173  ..        if Fas
-00008bb0: 7441 7272 6179 2e56 6572 626f 7365 203e  tArray.Verbose >
-00008bc0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00008bd0: 2070 7269 6e74 2866 2246 4153 5446 554e   print(f"FASTFUN
-00008be0: 4320 4f4e 3a20 6661 7374 6675 6e63 2077  C ON: fastfunc w
-00008bf0: 6173 207b 4661 7374 4172 7261 792e 4661  as {FastArray.Fa
-00008c00: 7374 6572 5546 756e 637d 2229 0d0a 2020  sterUFunc}")..  
-00008c10: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
-00008c20: 4661 7374 6572 5546 756e 6320 3d20 5472  FasterUFunc = Tr
-00008c30: 7565 0d0a 0d0a 2020 2020 4073 7461 7469  ue....    @stati
-00008c40: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00008c50: 205f 4661 7374 4675 6e63 7469 6f6e 734f   _FastFunctionsO
-00008c60: 6666 2829 3a0d 0a20 2020 2020 2020 2069  ff():..        i
-00008c70: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-00008c80: 6f73 6520 3e20 303a 0d0a 2020 2020 2020  ose > 0:..      
-00008c90: 2020 2020 2020 7072 696e 7428 6622 4641        print(f"FA
-00008ca0: 5354 4655 4e43 204f 4646 3a20 6661 7374  STFUNC OFF: fast
-00008cb0: 6675 6e63 2077 6173 207b 4661 7374 4172  func was {FastAr
-00008cc0: 7261 792e 4661 7374 6572 5546 756e 637d  ray.FasterUFunc}
-00008cd0: 2229 0d0a 2020 2020 2020 2020 4661 7374  ")..        Fast
-00008ce0: 4172 7261 792e 4661 7374 6572 5546 756e  Array.FasterUFun
-00008cf0: 6320 3d20 4661 6c73 650d 0a0d 0a20 2020  c = False....   
-00008d00: 2040 7072 6f70 6572 7479 0d0a 2020 2020   @property..    
-00008d10: 6465 6620 5f6e 7028 7365 6c66 2920 2d3e  def _np(self) ->
-00008d20: 206e 702e 6e64 6172 7261 793a 0d0a 2020   np.ndarray:..  
-00008d30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00008d40: 2020 2071 7569 636b 2077 6179 2074 6f20     quick way to 
-00008d50: 7265 7475 726e 2061 206e 756d 7079 2061  return a numpy a
-00008d60: 7272 6179 2069 6e73 7465 6164 206f 6620  rray instead of 
-00008d70: 6661 7374 2061 7272 6179 0d0a 2020 2020  fast array..    
-00008d80: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00008d90: 2072 6574 7572 6e20 7365 6c66 2e76 6965   return self.vie
-00008da0: 7728 6e70 2e6e 6461 7272 6179 290d 0a0d  w(np.ndarray)...
-00008db0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00008dc0: 6f64 0d0a 2020 2020 6465 6620 5f56 3028  od..    def _V0(
-00008dd0: 293a 0d0a 2020 2020 2020 2020 7072 696e  ):..        prin
-00008de0: 7428 2273 6574 7469 6e67 2076 6572 626f  t("setting verbo
-00008df0: 7365 206c 6576 656c 2074 6f20 3022 290d  se level to 0").
-00008e00: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00008e10: 6179 2e56 6572 626f 7365 203d 2030 0d0a  ay.Verbose = 0..
-00008e20: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00008e30: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-00008e40: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00008e50: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-00008e60: 5631 2829 3a0d 0a20 2020 2020 2020 2070  V1():..        p
-00008e70: 7269 6e74 2822 7365 7474 696e 6720 7665  rint("setting ve
-00008e80: 7262 6f73 6520 6c65 7665 6c20 746f 2031  rbose level to 1
-00008e90: 2229 0d0a 2020 2020 2020 2020 4661 7374  ")..        Fast
-00008ea0: 4172 7261 792e 5665 7262 6f73 6520 3d20  Array.Verbose = 
-00008eb0: 310d 0a20 2020 2020 2020 2072 6574 7572  1..        retur
-00008ec0: 6e20 4661 7374 4172 7261 792e 5665 7262  n FastArray.Verb
-00008ed0: 6f73 650d 0a0d 0a20 2020 2040 7374 6174  ose....    @stat
-00008ee0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-00008ef0: 6620 5f56 3228 293a 0d0a 2020 2020 2020  f _V2():..      
-00008f00: 2020 7072 696e 7428 2273 6574 7469 6e67    print("setting
-00008f10: 2076 6572 626f 7365 206c 6576 656c 2074   verbose level t
-00008f20: 6f20 3222 290d 0a20 2020 2020 2020 2046  o 2")..        F
-00008f30: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-00008f40: 203d 2032 0d0a 2020 2020 2020 2020 7265   = 2..        re
-00008f50: 7475 726e 2046 6173 7441 7272 6179 2e56  turn FastArray.V
-00008f60: 6572 626f 7365 0d0a 0d0a 2020 2020 4073  erbose....    @s
-00008f70: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00008f80: 2064 6566 205f 4f4e 2829 3a0d 0a20 2020   def _ON():..   
-00008f90: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00008fa0: 2020 656e 6162 6c65 2069 6e74 6572 6365    enable interce
-00008fb0: 7074 696e 6720 6172 7261 7920 7566 756e  pting array ufun
-00008fc0: 630d 0a20 2020 2020 2020 2022 2222 0d0a  c..        """..
-00008fd0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00008fe0: 6173 7441 7272 6179 2e5f 4661 7374 4675  astArray._FastFu
-00008ff0: 6e63 7469 6f6e 734f 6e28 290d 0a0d 0a20  nctionsOn().... 
-00009000: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00009010: 0d0a 2020 2020 6465 6620 5f4f 4646 2829  ..    def _OFF()
-00009020: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00009030: 2020 2020 2020 2020 6469 7361 626c 6520          disable 
-00009040: 696e 7465 7263 6570 7469 6e67 206f 6620  intercepting of 
-00009050: 6172 7261 7920 7566 756e 630d 0a20 2020  array ufunc..   
-00009060: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00009070: 2020 7265 7475 726e 2046 6173 7441 7272    return FastArr
-00009080: 6179 2e5f 4661 7374 4675 6e63 7469 6f6e  ay._FastFunction
-00009090: 734f 6666 2829 0d0a 0d0a 2020 2020 4073  sOff()....    @s
-000090a0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-000090b0: 2064 6566 205f 544f 4e28 293a 0d0a 2020   def _TON():..  
-000090c0: 2020 2020 2020 7072 696e 7428 2254 6872        print("Thr
-000090d0: 6561 6469 6e67 206f 6e22 290d 0a20 2020  eading on")..   
-000090e0: 2020 2020 2072 6574 7572 6e20 7263 2e54       return rc.T
-000090f0: 6872 6561 6469 6e67 4d6f 6465 2830 290d  hreadingMode(0).
-00009100: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00009110: 7468 6f64 0d0a 2020 2020 6465 6620 5f54  thod..    def _T
-00009120: 4f46 4628 293a 0d0a 2020 2020 2020 2020  OFF():..        
-00009130: 7072 696e 7428 2254 6872 6561 6469 6e67  print("Threading
-00009140: 206f 6666 2229 0d0a 2020 2020 2020 2020   off")..        
-00009150: 7265 7475 726e 2072 632e 5468 7265 6164  return rc.Thread
-00009160: 696e 674d 6f64 6528 3129 0d0a 0d0a 2020  ingMode(1)....  
-00009170: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00009180: 0a20 2020 2064 6566 205f 524f 4e28 7175  .    def _RON(qu
-00009190: 6965 743d 4661 6c73 6529 3a0d 0a20 2020  iet=False):..   
-000091a0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000091b0: 2020 5475 726e 206f 6e20 7265 6379 636c    Turn on recycl
-000091c0: 696e 672e 0d0a 0d0a 2020 2020 2020 2020  ing.....        
-000091d0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-000091e0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-000091f0: 2020 2020 2020 2020 7175 6965 743a 2062          quiet: b
-00009200: 6f6f 6c2c 206f 7074 696f 6e61 6c0d 0a0d  ool, optional...
-00009210: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00009220: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00009230: 2d0d 0a20 2020 2020 2020 2054 7275 6520  -..        True 
-00009240: 6966 2072 6563 7963 6c69 6e67 2077 6173  if recycling was
-00009250: 2070 7265 7669 6f75 736c 7920 6f6e 2c20   previously on, 
-00009260: 656c 7365 2046 616c 7365 0d0a 2020 2020  else False..    
-00009270: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00009280: 2069 6620 6e6f 7420 7175 6965 743a 0d0a   if not quiet:..
-00009290: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000092a0: 7428 2252 6563 7963 6c69 6e67 206e 756d  t("Recycling num
-000092b0: 7079 2061 7272 6179 7320 6f6e 2229 0d0a  py arrays on")..
-000092c0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000092d0: 2072 632e 5365 7452 6563 7963 6c65 4d6f   rc.SetRecycleMo
-000092e0: 6465 2830 290d 0a20 2020 2020 2020 2046  de(0)..        F
-000092f0: 6173 7441 7272 6179 2e52 6563 7963 6c65  astArray.Recycle
-00009300: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-00009310: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-00009320: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00009330: 686f 640d 0a20 2020 2064 6566 205f 524f  hod..    def _RO
-00009340: 4646 2871 7569 6574 3d46 616c 7365 293a  FF(quiet=False):
-00009350: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00009360: 2020 2020 2020 2054 7572 6e20 6f66 6620         Turn off 
-00009370: 7265 6379 636c 696e 672e 0d0a 0d0a 2020  recycling.....  
-00009380: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00009390: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-000093a0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7175  ----..        qu
-000093b0: 6965 743a 2062 6f6f 6c2c 206f 7074 696f  iet: bool, optio
-000093c0: 6e61 6c0d 0a0d 0a20 2020 2020 2020 2052  nal....        R
-000093d0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-000093e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000093f0: 2054 7275 6520 6966 2072 6563 7963 6c69   True if recycli
-00009400: 6e67 2077 6173 2070 7265 7669 6f75 736c  ng was previousl
-00009410: 7920 6f6e 2c20 656c 7365 2046 616c 7365  y on, else False
-00009420: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00009430: 2020 2020 2020 2069 6620 6e6f 7420 7175         if not qu
-00009440: 6965 743a 0d0a 2020 2020 2020 2020 2020  iet:..          
-00009450: 2020 7072 696e 7428 2252 6563 7963 6c69    print("Recycli
-00009460: 6e67 206e 756d 7079 2061 7272 6179 7320  ng numpy arrays 
-00009470: 6f66 6622 290d 0a20 2020 2020 2020 2072  off")..        r
-00009480: 6573 756c 7420 3d20 7263 2e53 6574 5265  esult = rc.SetRe
-00009490: 6379 636c 654d 6f64 6528 3129 0d0a 2020  cycleMode(1)..  
-000094a0: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
-000094b0: 5265 6379 636c 6520 3d20 4661 6c73 650d  Recycle = False.
-000094c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000094d0: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
-000094e0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-000094f0: 2064 6566 205f 5244 554d 5028 293a 0d0a   def _RDUMP():..
-00009500: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00009510: 2020 2020 2044 6973 706c 6179 7320 746f       Displays to
-00009520: 2073 6572 7665 7227 7320 7374 646f 7574   server's stdout
-00009530: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00009540: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00009550: 2d2d 2d2d 0d0a 2020 2020 2020 2020 546f  ----..        To
-00009560: 7461 6c20 7369 7a65 206f 6620 6974 656d  tal size of item
-00009570: 7320 6e6f 7420 696e 2075 7365 0d0a 2020  s not in use..  
-00009580: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00009590: 2020 2072 6574 7572 6e20 7263 2e52 6563     return rc.Rec
-000095a0: 7963 6c65 4475 6d70 2829 0d0a 0d0a 2020  ycleDump()....  
-000095b0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-000095c0: 0a20 2020 2064 6566 205f 4743 4e4f 5728  .    def _GCNOW(
-000095d0: 7469 6d65 6f75 743a 2069 6e74 203d 2030  timeout: int = 0
-000095e0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-000095f0: 0a20 2020 2020 2020 2050 6173 7320 7468  .        Pass th
-00009600: 6520 6761 7262 6167 6520 636f 6c6c 6563  e garbage collec
-00009610: 746f 7220 7469 6d65 6f75 7420 7661 6c75  tor timeout valu
-00009620: 6520 746f 2063 6c65 616e 7570 2e0d 0a20  e to cleanup... 
-00009630: 2020 2020 2020 2050 6173 7369 6e67 2030         Passing 0
-00009640: 2077 696c 6c20 666f 7263 6520 616e 2069   will force an i
-00009650: 6d6d 6564 6961 7465 2067 6172 6261 6765  mmediate garbage
-00009660: 2063 6f6c 6c65 6374 696f 6e2e 0d0a 0d0a   collection.....
-00009670: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00009680: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00009690: 0d0a 2020 2020 2020 2020 4469 6374 696f  ..        Dictio
-000096a0: 6e61 7279 206f 6620 6d65 6d6f 7279 2068  nary of memory h
-000096b0: 6575 7269 7374 6963 7320 696e 636c 7564  euristics includ
-000096c0: 696e 6720 2754 6f74 616c 4465 6c65 7465  ing 'TotalDelete
-000096d0: 6427 0d0a 2020 2020 2020 2020 2222 220d  d'..        """.
-000096e0: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
-000096f0: 6763 0d0a 0d0a 2020 2020 2020 2020 6763  gc....        gc
-00009700: 2e63 6f6c 6c65 6374 2829 0d0a 2020 2020  .collect()..    
-00009710: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00009720: 5265 6379 636c 6547 6172 6261 6765 436f  RecycleGarbageCo
-00009730: 6c6c 6563 744e 6f77 2874 696d 656f 7574  llectNow(timeout
-00009740: 290d 0a20 2020 2020 2020 2074 6f74 616c  )..        total
-00009750: 4465 6c65 7465 6420 3d20 7265 7375 6c74  Deleted = result
-00009760: 5b22 546f 7461 6c44 656c 6574 6564 225d  ["TotalDeleted"]
-00009770: 0d0a 2020 2020 2020 2020 6966 2074 6f74  ..        if tot
-00009780: 616c 4465 6c65 7465 6420 3e20 303a 0d0a  alDeleted > 0:..
-00009790: 2020 2020 2020 2020 2020 2020 4661 7374              Fast
-000097a0: 4172 7261 792e 5f47 434e 4f57 2874 696d  Array._GCNOW(tim
-000097b0: 656f 7574 290d 0a20 2020 2020 2020 2072  eout)..        r
-000097c0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-000097d0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-000097e0: 640d 0a20 2020 2064 6566 205f 4743 5345  d..    def _GCSE
-000097f0: 5428 7469 6d65 6f75 743a 2069 6e74 203d  T(timeout: int =
-00009800: 2031 3030 293a 0d0a 2020 2020 2020 2020   100):..        
-00009810: 2222 220d 0a20 2020 2020 2020 2050 6173  """..        Pas
-00009820: 7320 7468 6520 6761 7262 6167 6520 636f  s the garbage co
-00009830: 6c6c 6563 746f 7220 7469 6d65 6f75 7420  llector timeout 
-00009840: 7661 6c75 6520 746f 2065 7870 6972 650d  value to expire.
-00009850: 0a20 2020 2020 2020 2054 6865 2074 696d  .        The tim
-00009860: 656f 7574 2076 616c 7565 2069 7320 726f  eout value is ro
-00009870: 7567 686c 7920 696e 2032 2f35 2073 6563  ughly in 2/5 sec
-00009880: 730d 0a20 2020 2020 2020 2041 2076 616c  s..        A val
-00009890: 7565 206f 6620 3130 3020 6973 2075 7375  ue of 100 is usu
-000098a0: 616c 6c79 2061 626f 7574 2034 3020 7365  ally about 40 se
-000098b0: 636f 6e64 730d 0a0d 0a20 2020 2020 2020  conds....       
-000098c0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-000098d0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-000098e0: 2020 2050 7265 7669 6f75 7320 7469 6d65     Previous time
-000098f0: 7370 616e 0d0a 2020 2020 2020 2020 2222  span..        ""
-00009900: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00009910: 6e20 7263 2e52 6563 7963 6c65 5365 7447  n rc.RecycleSetG
-00009920: 6172 6261 6765 436f 6c6c 6563 7454 696d  arbageCollectTim
-00009930: 656f 7574 2874 696d 656f 7574 290d 0a0d  eout(timeout)...
-00009940: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00009950: 6f64 0d0a 2020 2020 6465 6620 5f4c 4f4e  od..    def _LON
-00009960: 2829 3a0d 0a20 2020 2020 2020 2022 2222  ():..        """
-00009970: 5475 726e 2074 6865 206d 6174 6820 6c65  Turn the math le
-00009980: 6467 6572 206f 6e20 746f 2072 6563 6f72  dger on to recor
-00009990: 6420 616c 6c20 6172 7261 7920 6d61 7468  d all array math
-000099a0: 2072 6f75 7469 6e65 7322 2222 0d0a 2020   routines"""..  
-000099b0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-000099c0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-000099d0: 6467 6572 2e5f 4c65 6467 6572 4f6e 2829  dger._LedgerOn()
-000099e0: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-000099f0: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-00009a00: 4c4f 4646 2829 3a0d 0a20 2020 2020 2020  LOFF():..       
-00009a10: 2022 2222 5475 726e 2074 6865 206d 6174   """Turn the mat
-00009a20: 6820 6c65 6467 6572 206f 6666 2222 220d  h ledger off""".
-00009a30: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009a40: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-00009a50: 684c 6564 6765 722e 5f4c 6564 6765 724f  hLedger._LedgerO
-00009a60: 6666 2829 0d0a 0d0a 2020 2020 4073 7461  ff()....    @sta
-00009a70: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
-00009a80: 6566 205f 4c44 554d 5028 6461 7461 7365  ef _LDUMP(datase
-00009a90: 743d 5472 7565 293a 0d0a 2020 2020 2020  t=True):..      
-00009aa0: 2020 2222 2250 7269 6e74 206f 7574 2074    """Print out t
-00009ab0: 6865 206d 6174 6820 6c65 6467 6572 2222  he math ledger""
-00009ac0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00009ad0: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
-00009ae0: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
-00009af0: 7244 756d 7028 6461 7461 7365 743d 6461  rDump(dataset=da
-00009b00: 7461 7365 7429 0d0a 0d0a 2020 2020 4073  taset)....    @s
-00009b10: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00009b20: 2064 6566 205f 4c44 554d 5046 2866 696c   def _LDUMPF(fil
-00009b30: 656e 616d 6529 3a0d 0a20 2020 2020 2020  ename):..       
-00009b40: 2022 2222 5361 7665 2074 6865 206d 6174   """Save the mat
-00009b50: 6820 6c65 6467 6572 2074 6f20 6120 6669  h ledger to a fi
-00009b60: 6c65 2222 220d 0a20 2020 2020 2020 2072  le"""..        r
-00009b70: 6574 7572 6e20 5479 7065 5265 6769 7374  eturn TypeRegist
-00009b80: 6572 2e4d 6174 684c 6564 6765 722e 5f4c  er.MathLedger._L
-00009b90: 6564 6765 7244 756d 7046 696c 6528 6669  edgerDumpFile(fi
-00009ba0: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2040  lename)....    @
-00009bb0: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-00009bc0: 2020 6465 6620 5f4c 434c 4541 5228 293a    def _LCLEAR():
-00009bd0: 0d0a 2020 2020 2020 2020 2222 2243 6c65  ..        """Cle
-00009be0: 6172 2061 6c6c 2074 6865 2065 6e74 7269  ar all the entri
-00009bf0: 6573 2069 6e20 7468 6520 6d61 7468 206c  es in the math l
-00009c00: 6564 6765 7222 2222 0d0a 2020 2020 2020  edger"""..      
-00009c10: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-00009c20: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
-00009c30: 2e5f 4c65 6467 6572 436c 6561 7228 290d  ._LedgerClear().
-00009c40: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00009c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c90: 2d2d 2d0d 0a20 2020 2064 6566 205f 5f73  ---..    def __s
-00009ca0: 6574 6974 656d 5f5f 2873 656c 662c 2066  etitem__(self, f
-00009cb0: 6c64 2c20 7661 6c75 6529 3a0d 0a20 2020  ld, value):..   
-00009cc0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00009cd0: 2020 5573 6564 206f 6e20 7468 6520 6c65    Used on the le
-00009ce0: 6674 2068 616e 6420 7369 6465 206f 660d  ft hand side of.
-00009cf0: 0a20 2020 2020 2020 2061 7272 5b66 6c64  .        arr[fld
-00009d00: 5d20 3d20 7661 6c75 650d 0a0d 0a20 2020  ] = value....   
-00009d10: 2020 2020 2054 6869 7320 726f 7574 696e       This routin
-00009d20: 6520 7472 6965 7320 746f 2063 6f6e 7665  e tries to conve
-00009d30: 7274 2069 6e76 616c 6964 2064 7479 7065  rt invalid dtype
-00009d40: 7320 746f 2074 6861 7420 696e 7661 6c69  s to that invali
-00009d50: 6473 2061 7265 2070 7265 7365 7276 6564  ds are preserved
-00009d60: 2077 6865 6e20 7365 7474 696e 670d 0a20   when setting.. 
-00009d70: 2020 2020 2020 2054 6865 206d 6273 6574         The mbset
-00009d80: 2070 6f72 7469 6f6e 206f 6620 7468 6973   portion of this
-00009d90: 2069 7320 6e6f 2077 7269 7474 656e 2028   is no written (
-00009da0: 7768 6963 6820 7769 6c6c 206e 6f74 2072  which will not r
-00009db0: 6169 7365 2061 6e20 696e 6465 7865 7272  aise an indexerr
-00009dc0: 6f72 206f 6e20 6f75 7420 6f66 2062 6f75  or on out of bou
-00009dd0: 6e64 7329 0d0a 0d0a 2020 2020 2020 2020  nds)....        
-00009de0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00009df0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00009e00: 2020 2020 2020 2020 666c 643a 2073 6361          fld: sca
-00009e10: 6c61 722c 2062 6f6f 6c65 616e 2c20 6661  lar, boolean, fa
-00009e20: 6e63 7920 696e 6465 7820 6d61 736b 2c20  ncy index mask, 
-00009e30: 736c 6963 652c 2073 6571 7565 6e63 652c  slice, sequence,
-00009e40: 206f 7220 6c69 7374 0d0a 2020 2020 2020   or list..      
-00009e50: 2020 7661 6c75 653a 2073 6361 6c61 722c    value: scalar,
-00009e60: 2073 6571 7565 6e63 6520 6f72 2064 6174   sequence or dat
-00009e70: 6173 6574 2076 616c 7565 2061 7320 666f  aset value as fo
-00009e80: 6c6c 6f77 730d 0a20 2020 2020 2020 2020  llows..         
-00009e90: 2020 2020 2020 2073 6571 7565 6e63 6520         sequence 
-00009ea0: 6361 6e20 6265 206c 6973 742c 2074 7570  can be list, tup
-00009eb0: 6c65 2c20 6e70 2e6e 6461 7272 6179 2c20  le, np.ndarray, 
-00009ec0: 4661 7374 4172 7261 790d 0a0d 0a20 2020  FastArray....   
-00009ed0: 2020 2020 2052 6169 7365 730d 0a20 2020       Raises..   
-00009ee0: 2020 2020 202d 2d2d 2d2d 2d0d 0a20 2020       ------..   
-00009ef0: 2020 2020 2049 6e64 6578 4572 726f 720d       IndexError.
-00009f00: 0a0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-00009f10: 2020 2020 2020 2020 6e65 7776 616c 7565          newvalue
-00009f20: 203d 204e 6f6e 650d 0a0d 0a20 2020 2020   = None....     
-00009f30: 2020 2023 2074 7279 2074 6f20 6d61 6b65     # try to make
-00009f40: 2061 6e20 6172 7261 792c 2065 7665 6e20   an array, even 
-00009f50: 6966 2061 7272 6179 206f 6620 310d 0a20  if array of 1.. 
-00009f60: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
-00009f70: 6361 6c61 7228 7661 6c75 6529 3a0d 0a20  calar(value):.. 
-00009f80: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00009f90: 7420 6973 696e 7374 616e 6365 2876 616c  t isinstance(val
-00009fa0: 7565 2c20 2873 7472 2c20 6279 7465 732c  ue, (str, bytes,
-00009fb0: 206e 702e 6279 7465 735f 2c20 6e70 2e73   np.bytes_, np.s
-00009fc0: 7472 5f29 293a 0d0a 2020 2020 2020 2020  tr_)):..        
-00009fd0: 2020 2020 2020 2020 2320 636f 6e76 6572          # conver
-00009fe0: 7420 746f 2061 7272 6179 206f 6620 3120  t to array of 1 
-00009ff0: 6974 656d 0d0a 2020 2020 2020 2020 2020  item..          
-0000a000: 2020 2020 2020 6e65 7776 616c 7565 203d        newvalue =
-0000a010: 2046 6173 7441 7272 6179 285b 7661 6c75   FastArray([valu
-0000a020: 655d 290d 0a20 2020 2020 2020 2065 6c69  e])..        eli
-0000a030: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-0000a040: 7565 2c20 286c 6973 742c 2074 7570 6c65  ue, (list, tuple
-0000a050: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
-0000a060: 2023 2063 6f6e 7665 7274 2074 6f20 6e75   # convert to nu
-0000a070: 6d70 7920 6172 7261 790d 0a20 2020 2020  mpy array..     
-0000a080: 2020 2020 2020 206e 6577 7661 6c75 6520         newvalue 
-0000a090: 3d20 4661 7374 4172 7261 7928 7661 6c75  = FastArray(valu
-0000a0a0: 652c 2075 6e69 636f 6465 3d54 7275 6529  e, unicode=True)
-0000a0b0: 0d0a 2020 2020 2020 2020 656c 6966 2069  ..        elif i
-0000a0c0: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
-0000a0d0: 206e 702e 6e64 6172 7261 7929 3a0d 0a20   np.ndarray):.. 
-0000a0e0: 2020 2020 2020 2020 2020 2023 206a 7573             # jus
-0000a0f0: 7420 7265 6665 7265 6e63 6520 6974 0d0a  t reference it..
-0000a100: 2020 2020 2020 2020 2020 2020 6e65 7776              newv
-0000a110: 616c 7565 203d 2076 616c 7565 0d0a 0d0a  alue = value....
-0000a120: 2020 2020 2020 2020 6966 206e 6577 7661          if newva
-0000a130: 6c75 6520 6973 206e 6f74 204e 6f6e 653a  lue is not None:
-0000a140: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000a150: 2320 6e6f 7720 7765 2068 6176 6520 6120  # now we have a 
-0000a160: 6e75 6d70 7920 6172 7261 792e 2e20 636f  numpy array.. co
-0000a170: 6e76 6572 7420 7468 6520 6474 7970 6520  nvert the dtype 
-0000a180: 746f 206d 6174 6368 2075 730d 0a20 2020  to match us..   
-0000a190: 2020 2020 2020 2020 2023 2074 6869 7320           # this 
-0000a1a0: 7368 6f75 6c64 2074 616b 6520 6361 7265  should take care
-0000a1b0: 206f 6620 696e 7661 6c69 6473 0d0a 2020   of invalids..  
-0000a1c0: 2020 2020 2020 2020 2020 2320 636f 6e76            # conv
-0000a1d0: 6572 7420 6669 7273 7420 3134 2063 6f6d  ert first 14 com
-0000a1e0: 6d6f 6e20 7479 7065 7320 2862 6f6f 6c2c  mon types (bool,
-0000a1f0: 2069 6e74 732c 2066 6c6f 6174 7329 0d0a   ints, floats)..
-0000a200: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0000a210: 6577 7661 6c75 652e 6474 7970 6520 213d  ewvalue.dtype !=
-0000a220: 2073 656c 662e 6474 7970 6520 616e 6420   self.dtype and 
-0000a230: 6e65 7776 616c 7565 2e64 7479 7065 2e6e  newvalue.dtype.n
-0000a240: 756d 203c 3d20 3133 3a0d 0a20 2020 2020  um <= 13:..     
-0000a250: 2020 2020 2020 2020 2020 206e 6577 7661             newva
-0000a260: 6c75 6520 3d20 6e65 7776 616c 7565 2e61  lue = newvalue.a
-0000a270: 7374 7970 6528 7365 6c66 2e64 7479 7065  stype(self.dtype
-0000a280: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000a290: 2023 2063 6865 636b 2066 6f72 2062 6f6f   # check for boo
-0000a2a0: 6c65 616e 2061 7272 6179 2073 696e 6365  lean array since
-0000a2b0: 2077 6520 646f 206e 6f74 2068 616e 646c   we do not handl
-0000a2c0: 6520 6661 6e63 7920 696e 6465 7820 7965  e fancy index ye
-0000a2d0: 740d 0a20 2020 2020 2020 2020 2020 2069  t..            i
-0000a2e0: 6620 6973 696e 7374 616e 6365 2866 6c64  f isinstance(fld
-0000a2f0: 2c20 6e70 2e6e 6461 7272 6179 2920 616e  , np.ndarray) an
-0000a300: 6420 666c 642e 6474 7970 652e 6e75 6d20  d fld.dtype.num 
-0000a310: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-0000a320: 2020 2020 2020 2069 735f 756e 7375 7070         is_unsupp
-0000a330: 6f72 7465 6420 3d20 7365 6c66 2e5f 6973  orted = self._is
-0000a340: 5f6e 6f74 5f73 7570 706f 7274 6564 286e  _not_supported(n
-0000a350: 6577 7661 6c75 6529 0d0a 2020 2020 2020  ewvalue)..      
-0000a360: 2020 2020 2020 2020 2020 6966 2069 735f            if is_
-0000a370: 756e 7375 7070 6f72 7465 643a 0d0a 2020  unsupported:..  
-0000a380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a390: 2020 2320 6d61 6b65 2069 7420 636f 6e74    # make it cont
-0000a3a0: 6967 756f 7573 2c20 696e 2063 6173 6520  iguous, in case 
-0000a3b0: 7468 6174 2773 2074 6865 2070 726f 626c  that's the probl
-0000a3c0: 656d 3f0d 0a20 2020 2020 2020 2020 2020  em?..           
-0000a3d0: 2020 2020 2020 2020 206e 6577 7661 6c75           newvalu
-0000a3e0: 6520 3d20 6e65 7776 616c 7565 2e63 6f70  e = newvalue.cop
-0000a3f0: 7928 290d 0a20 2020 2020 2020 2020 2020  y()..           
-0000a400: 2020 2020 2020 2020 2023 2072 652d 7465           # re-te
-0000a410: 7374 2073 7570 706f 7274 2c20 6a75 7374  st support, just
-0000a420: 2074 6f20 6265 2073 7572 652e 0d0a 2020   to be sure...  
-0000a430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a440: 2020 6973 5f75 6e73 7570 706f 7274 6564    is_unsupported
-0000a450: 203d 2073 656c 662e 5f69 735f 6e6f 745f   = self._is_not_
-0000a460: 7375 7070 6f72 7465 6428 6e65 7776 616c  supported(newval
-0000a470: 7565 290d 0a0d 0a20 2020 2020 2020 2020  ue)....         
-0000a480: 2020 2020 2020 2023 2069 6620 7375 7070         # if supp
-0000a490: 6f72 7465 642c 2063 616c 6c20 6f75 7220  orted, call our 
-0000a4a0: 7365 7469 7465 6d2c 2069 7420 7769 6c6c  setitem, it will
-0000a4b0: 2072 6574 7572 6e20 4661 6c73 6520 6966   return False if
-0000a4c0: 2069 7420 6661 696c 730d 0a20 2020 2020   it fails..     
-0000a4d0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0000a4e0: 7420 6973 5f75 6e73 7570 706f 7274 6564  t is_unsupported
-0000a4f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000a500: 2020 2020 2020 2069 6620 7263 2e53 6574         if rc.Set
-0000a510: 4974 656d 2873 656c 662c 2066 6c64 2c20  Item(self, fld, 
-0000a520: 6e65 7776 616c 7565 293a 0d0a 2020 2020  newvalue):..    
-0000a530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a540: 2020 2020 7265 7475 726e 0d0a 2020 2020      return..    
-0000a550: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0000a560: 2020 2020 2020 2020 2020 2020 2020 6e70                np
-0000a570: 2e6e 6461 7272 6179 2e5f 5f73 6574 6974  .ndarray.__setit
-0000a580: 656d 5f5f 2873 656c 662c 2066 6c64 2c20  em__(self, fld, 
-0000a590: 6e65 7776 616c 7565 290d 0a20 2020 2020  newvalue)..     
-0000a5a0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0000a5b0: 6365 7074 696f 6e3a 0d0a 2020 2020 2020  ception:..      
-0000a5c0: 2020 2020 2020 2020 2020 2320 6f64 6420            # odd 
-0000a5d0: 6261 6c6c 2063 6173 6573 2068 616e 646c  ball cases handl
-0000a5e0: 6564 2068 6572 6520 6c69 6b65 2075 6675  ed here like ufu
-0000a5f0: 6e63 2074 6573 7473 0d0a 2020 2020 2020  nc tests..      
-0000a600: 2020 2020 2020 2020 2020 6e70 2e6e 6461            np.nda
-0000a610: 7272 6179 2e5f 5f73 6574 6974 656d 5f5f  rray.__setitem__
-0000a620: 2873 656c 662c 2066 6c64 2c20 7661 6c75  (self, fld, valu
-0000a630: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000a640: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-0000a650: 2020 2320 7075 6e74 2074 6f20 6e6f 726d    # punt to norm
-0000a660: 616c 206e 756d 7079 0d0a 2020 2020 2020  al numpy..      
-0000a670: 2020 6e70 2e6e 6461 7272 6179 2e5f 5f73    np.ndarray.__s
-0000a680: 6574 6974 656d 5f5f 2873 656c 662c 2066  etitem__(self, f
-0000a690: 6c64 2c20 7661 6c75 6529 0d0a 0d0a 2020  ld, value)....  
-0000a6a0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-0000a6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000a6f0: 2020 2020 6465 6620 5f5f 6765 7469 7465      def __getite
-0000a700: 6d5f 5f28 7365 6c66 2c20 666c 6429 202d  m__(self, fld) -
-0000a710: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-0000a720: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000a730: 2020 2072 6970 7461 626c 6520 6861 7320     riptable has 
-0000a740: 7370 6563 6961 6c20 726f 7574 696e 6573  special routines
-0000a750: 2074 6f20 6861 6e64 6c65 2061 7272 6179   to handle array
-0000a760: 2069 6e70 7574 2069 6e20 7468 6520 696e   input in the in
-0000a770: 6465 7865 722e 0d0a 2020 2020 2020 2020  dexer...        
-0000a780: 4576 6572 7974 6869 6e67 2065 6c73 6520  Everything else 
-0000a790: 7769 6c6c 2067 6f20 746f 206e 756d 7079  will go to numpy
-0000a7a0: 2067 6574 6974 656d 2e0d 0a20 2020 2020   getitem...     
-0000a7b0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0000a7c0: 6966 2069 7369 6e73 7461 6e63 6528 666c  if isinstance(fl
-0000a7d0: 642c 206e 702e 6e64 6172 7261 7929 3a0d  d, np.ndarray):.
-0000a7e0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-0000a7f0: 6573 756c 743d 2073 7570 6572 2846 6173  esult= super(Fas
-0000a800: 7441 7272 6179 2c20 7365 6c66 292e 5f5f  tArray, self).__
-0000a810: 6765 7469 7465 6d5f 5f28 666c 6429 2e76  getitem__(fld).v
-0000a820: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-0000a830: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0000a840: 6c64 2e64 7479 7065 203d 3d20 6e70 2e62  ld.dtype == np.b
-0000a850: 6f6f 6c5f 3a0d 0a20 2020 2020 2020 2020  ool_:..         
-0000a860: 2020 2020 2020 2023 206d 616b 6520 7375         # make su
-0000a870: 7265 206e 6f20 7374 7269 6469 6e67 0d0a  re no striding..
-0000a880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a890: 2320 4e4f 5445 3a20 7769 6c6c 2066 6169  # NOTE: will fai
-0000a8a0: 6c20 6f6e 2073 656c 662e 6474 7970 652e  l on self.dtype.
-0000a8b0: 6279 7465 6f72 6465 7220 6173 206c 6974  byteorder as lit
-0000a8c0: 746c 6520 656e 6469 616e 0d0a 2020 2020  tle endian..    
-0000a8d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0000a8e0: 656c 662e 666c 6167 732e 665f 636f 6e74  elf.flags.f_cont
-0000a8f0: 6967 756f 7573 3a0d 0a20 2020 2020 2020  iguous:..       
-0000a900: 2020 2020 2020 2020 2020 2020 2023 2064               # d
-0000a910: 696d 656e 7369 6f6e 7320 6d75 7374 206d  imensions must m
-0000a920: 6174 6368 0d0a 2020 2020 2020 2020 2020  atch..          
-0000a930: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0000a940: 662e 6e64 696d 203d 3d20 666c 642e 6e64  f.ndim == fld.nd
-0000a950: 696d 2061 6e64 2073 656c 662e 6e64 696d  im and self.ndim
-0000a960: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a980: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
-0000a990: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-0000a9a0: 494e 4445 585f 424f 4f4c 2873 656c 662c  INDEX_BOOL(self,
-0000a9b0: 2066 6c64 290d 0a0d 0a20 2020 2020 2020   fld)....       
-0000a9c0: 2020 2020 2023 2069 6620 7765 2068 6176       # if we hav
-0000a9d0: 6520 6661 6e63 7920 696e 6465 7869 6e67  e fancy indexing
-0000a9e0: 2061 6e64 2077 6520 7375 7070 6f72 7420   and we support 
-0000a9f0: 7468 6520 6172 7261 7920 7479 7065 2c20  the array type, 
-0000aa00: 6d61 6b65 2073 7572 6520 7765 2064 6f20  make sure we do 
-0000aa10: 6e6f 7420 6861 7665 2073 7472 6964 6520  not have stride 
-0000aa20: 7072 6f62 6c65 6d0d 0a20 2020 2020 2020  problem..       
-0000aa30: 2020 2020 2069 6620 666c 642e 6474 7970       if fld.dtyp
-0000aa40: 652e 6368 6172 2069 6e20 4e75 6d70 7943  e.char in NumpyC
-0000aa50: 6861 7254 7970 6573 2e41 6c6c 496e 7465  harTypes.AllInte
-0000aa60: 6765 7220 616e 6420 7365 6c66 2e64 7479  ger and self.dty
-0000aa70: 7065 2e63 6861 7220 696e 204e 756d 7079  pe.char in Numpy
-0000aa80: 4368 6172 5479 7065 732e 5375 7070 6f72  CharTypes.Suppor
-0000aa90: 7465 6441 6c74 6572 6e61 7465 3a0d 0a20  tedAlternate:.. 
-0000aaa0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000aab0: 6620 7365 6c66 2e66 6c61 6773 2e66 5f63  f self.flags.f_c
-0000aac0: 6f6e 7469 6775 6f75 7320 616e 6420 666c  ontiguous and fl
-0000aad0: 642e 666c 6167 732e 665f 636f 6e74 6967  d.flags.f_contig
-0000aae0: 756f 7573 3a0d 0a20 2020 2020 2020 2020  uous:..         
-0000aaf0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0000ab00: 6e28 7365 6c66 2e73 6861 7065 2920 3d3d  n(self.shape) ==
-0000ab10: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
-0000ab20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0000ab30: 7572 6e20 5479 7065 5265 6769 7374 6572  urn TypeRegister
-0000ab40: 2e4d 6174 684c 6564 6765 722e 5f4d 4247  .MathLedger._MBG
-0000ab50: 4554 2873 656c 662c 2066 6c64 290d 0a0d  ET(self, fld)...
-0000ab60: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-0000ab70: 756c 7420 3d20 5479 7065 5265 6769 7374  ult = TypeRegist
-0000ab80: 6572 2e4d 6174 684c 6564 6765 722e 5f47  er.MathLedger._G
-0000ab90: 4554 4954 454d 2873 7570 6572 2846 6173  ETITEM(super(Fas
-0000aba0: 7441 7272 6179 2c20 7365 6c66 292c 2066  tArray, self), f
-0000abb0: 6c64 290d 0a20 2020 2020 2020 2020 2020  ld)..           
-0000abc0: 2072 6574 7572 6e20 7265 7375 6c74 2e76   return result.v
-0000abd0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-0000abe0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000abf0: 2020 2020 2020 2020 2020 2023 2063 6f75             # cou
-0000ac00: 6c64 2062 6520 6120 6c69 7374 2077 6869  ld be a list whi
-0000ac10: 6368 2069 7320 6f66 7465 6e20 636f 6e76  ch is often conv
-0000ac20: 6572 7465 6420 746f 2061 6e20 6172 7261  erted to an arra
-0000ac30: 790d 0a0d 0a20 2020 2020 2020 2020 2020  y....           
-0000ac40: 2023 2054 6869 7320 6173 7375 6d65 7320   # This assumes 
-0000ac50: 7468 6174 2046 6173 7441 7272 6179 2068  that FastArray h
-0000ac60: 6173 2061 2073 6f6c 6520 7061 7265 6e74  as a sole parent
-0000ac70: 2c20 6e70 2e6e 6461 7272 6179 0d0a 2020  , np.ndarray..  
-0000ac80: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
-0000ac90: 6869 7320 6368 616e 6765 732c 2074 6865  his changes, the
-0000aca0: 2073 7570 6572 2829 2063 616c 6c20 6e65   super() call ne
-0000acb0: 6564 7320 746f 2062 6520 7573 6564 0d0a  eds to be used..
-0000acc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000acd0: 726e 206e 702e 6e64 6172 7261 792e 5f5f  rn np.ndarray.__
-0000ace0: 6765 7469 7465 6d5f 5f28 7365 6c66 2c20  getitem__(self, 
-0000acf0: 666c 6429 0d0a 2020 2020 2020 2020 2020  fld)..          
-0000ad00: 2020 2320 7265 7475 726e 2073 7570 6572    # return super
-0000ad10: 2846 6173 7441 7272 6179 2c20 7365 6c66  (FastArray, self
-0000ad20: 292e 5f5f 6765 7469 7465 6d5f 5f28 666c  ).__getitem__(fl
-0000ad30: 6429 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  d)....    # ----
-0000ad40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ad50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ad60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ad70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ad80: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-0000ad90: 6469 7370 6c61 795f 7175 6572 795f 7072  display_query_pr
-0000ada0: 6f70 6572 7469 6573 2873 656c 6629 3a0d  operties(self):.
-0000adb0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000adc0: 2020 2020 2020 5265 7475 726e 7320 616e        Returns an
-0000add0: 2049 7465 6d46 6f72 6d61 7420 6f62 6a65   ItemFormat obje
-0000ade0: 6374 2061 6e64 2061 2066 756e 6374 696f  ct and a functio
-0000adf0: 6e20 666f 7220 636f 6e76 6572 7469 6e67  n for converting
-0000ae00: 2074 6865 2046 6173 7441 7272 6179 7320   the FastArrays 
-0000ae10: 6974 656d 7320 746f 2073 7472 696e 6773  items to strings
-0000ae20: 2e0d 0a20 2020 2020 2020 2042 6173 6963  ...        Basic
-0000ae30: 2074 7970 6573 3a20 426f 6f6c 2c20 496e   types: Bool, In
-0000ae40: 742c 2046 6c6f 6174 2c20 4279 7465 732c  t, Float, Bytes,
-0000ae50: 2053 7472 696e 6720 616c 6c20 6861 7665   String all have
-0000ae60: 2064 6566 6175 6c74 2066 6f72 6d61 7473   default formats
-0000ae70: 202f 2063 6f6e 7665 7273 696f 6e20 6675   / conversion fu
-0000ae80: 6e63 7469 6f6e 732e 0d0a 2020 2020 2020  nctions...      
-0000ae90: 2020 2873 6565 2055 7469 6c73 2e72 745f    (see Utils.rt_
-0000aea0: 6469 7370 6c61 795f 7072 6f70 6572 7469  display_properti
-0000aeb0: 6573 290d 0a0d 0a20 2020 2020 2020 2049  es)....        I
-0000aec0: 6620 6120 6e65 7720 7479 7065 2069 7320  f a new type is 
-0000aed0: 6120 7375 6263 6c61 7373 206f 6620 4661  a subclass of Fa
-0000aee0: 7374 4172 7261 7920 616e 6420 6e65 6564  stArray and need
-0000aef0: 7320 746f 2062 6520 6469 7370 6c61 7965  s to be displaye
-0000af00: 6420 696e 2066 6f72 6d61 740d 0a20 2020  d in format..   
-0000af10: 2020 2020 2064 6966 6665 7265 6e74 2066       different f
-0000af20: 726f 6d20 6974 7320 756e 6465 726c 7969  rom its underlyi
-0000af30: 6e67 2074 7970 652c 2069 7420 7769 6c6c  ng type, it will
-0000af40: 206e 6565 6420 746f 2074 616b 6520 6f76   need to take ov
-0000af50: 6572 2074 6869 7320 726f 7574 696e 652e  er this routine.
-0000af60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0000af70: 2020 2020 2020 2061 7272 5f74 7970 652c         arr_type,
-0000af80: 2063 6f6e 7665 7274 5f66 756e 6320 3d20   convert_func = 
-0000af90: 4469 7370 6c61 7943 6f6e 7665 7274 2e67  DisplayConvert.g
-0000afa0: 6574 5f64 6973 706c 6179 5f63 6f6e 7665  et_display_conve
-0000afb0: 7274 2873 656c 6629 0d0a 2020 2020 2020  rt(self)..      
-0000afc0: 2020 6469 7370 6c61 795f 666f 726d 6174    display_format
-0000afd0: 203d 2064 6566 6175 6c74 5f69 7465 6d5f   = default_item_
-0000afe0: 666f 726d 6174 732e 6765 7428 6172 725f  formats.get(arr_
-0000aff0: 7479 7065 2c20 4974 656d 466f 726d 6174  type, ItemFormat
-0000b000: 2829 290d 0a20 2020 2020 2020 2069 6620  ())..        if 
-0000b010: 6c65 6e28 7365 6c66 2e73 6861 7065 2920  len(self.shape) 
-0000b020: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
-0000b030: 2020 6469 7370 6c61 795f 666f 726d 6174    display_format
-0000b040: 2e63 6f6e 7665 7274 203d 2063 6f6e 7665  .convert = conve
-0000b050: 7274 5f66 756e 630d 0a20 2020 2020 2020  rt_func..       
-0000b060: 2020 2020 2063 6f6e 7665 7274 5f66 756e       convert_fun
-0000b070: 6320 3d20 4469 7370 6c61 7943 6f6e 7665  c = DisplayConve
-0000b080: 7274 2e63 6f6e 7665 7274 4d75 6c74 6944  rt.convertMultiD
-0000b090: 696d 730d 0a0d 0a20 2020 2020 2020 2023  ims....        #
-0000b0a0: 2061 6464 2073 656e 7469 6e65 6c20 7661   add sentinel va
-0000b0b0: 6c75 6520 666f 7220 696e 7465 6765 720d  lue for integer.
-0000b0c0: 0a20 2020 2020 2020 2069 6620 6469 7370  .        if disp
-0000b0d0: 6c61 795f 666f 726d 6174 2e69 6e76 616c  lay_format.inval
-0000b0e0: 6964 2069 7320 4e6f 6e65 3a0d 0a20 2020  id is None:..   
-0000b0f0: 2020 2020 2020 2020 2064 6973 706c 6179           display
-0000b100: 5f66 6f72 6d61 7420 3d20 6469 7370 6c61  _format = displa
-0000b110: 795f 666f 726d 6174 2e63 6f70 7928 290d  y_format.copy().
-0000b120: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000b130: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-0000b140: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
-0000b150: 732e 416c 6c49 6e74 6567 6572 3a0d 0a20  s.AllInteger:.. 
-0000b160: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0000b170: 6973 706c 6179 5f66 6f72 6d61 742e 696e  isplay_format.in
-0000b180: 7661 6c69 6420 3d20 494e 5641 4c49 445f  valid = INVALID_
-0000b190: 4449 4354 5b73 656c 662e 6474 7970 652e  DICT[self.dtype.
-0000b1a0: 6e75 6d5d 0d0a 2020 2020 2020 2020 7265  num]..        re
-0000b1b0: 7475 726e 2064 6973 706c 6179 5f66 6f72  turn display_for
-0000b1c0: 6d61 742c 2063 6f6e 7665 7274 5f66 756e  mat, convert_fun
-0000b1d0: 630d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  c....    # -----
-0000b1e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b220: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2061  -----..    def a
-0000b230: 7374 7970 6528 7365 6c66 2c20 6474 7970  stype(self, dtyp
-0000b240: 652c 206f 7264 6572 3d22 4b22 2c20 6361  e, order="K", ca
-0000b250: 7374 696e 673d 2275 6e73 6166 6522 2c20  sting="unsafe", 
-0000b260: 7375 626f 6b3d 5472 7565 2c20 636f 7079  subok=True, copy
-0000b270: 3d54 7275 6529 202d 3e20 4661 7374 4172  =True) -> FastAr
-0000b280: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
-0000b290: 220d 0a20 2020 2020 2020 2052 6574 7572  "..        Retur
-0000b2a0: 6e20 6120 6046 6173 7441 7272 6179 6020  n a `FastArray` 
-0000b2b0: 7769 7468 2076 616c 7565 7320 636f 6e76  with values conv
-0000b2c0: 6572 7465 6420 746f 2074 6865 2073 7065  erted to the spe
-0000b2d0: 6369 6669 6564 2064 6174 6120 7479 7065  cified data type
-0000b2e0: 2e0d 0a0d 0a20 2020 2020 2020 2043 6865  .....        Che
-0000b2f0: 636b 2079 6f75 7220 7265 7375 6c74 7320  ck your results 
-0000b300: 7768 656e 2079 6f75 2063 6f6e 7665 7274  when you convert
-0000b310: 206d 6973 7369 6e67 2076 616c 7565 732e   missing values.
-0000b320: 2053 656e 7469 6e65 6c20 7661 6c75 6573   Sentinel values
-0000b330: 2061 7265 0d0a 2020 2020 2020 2020 7072   are..        pr
-0000b340: 6573 6572 7665 6420 7768 656e 2052 6970  eserved when Rip
-0000b350: 7461 626c 6520 6861 6e64 6c65 7320 7468  table handles th
-0000b360: 6520 636f 6e76 6572 7369 6f6e 2e20 486f  e conversion. Ho
-0000b370: 7765 7665 722c 2069 6e20 736f 6d65 2063  wever, in some c
-0000b380: 6173 6573 0d0a 2020 2020 2020 2020 7468  ases..        th
-0000b390: 6520 6172 7261 7920 6973 2073 656e 7420  e array is sent 
-0000b3a0: 746f 204e 756d 5079 2066 6f72 2063 6f6e  to NumPy for con
-0000b3b0: 7665 7273 696f 6e20 616e 6420 7265 7375  version and resu
-0000b3c0: 6c74 7320 6d61 7920 6e6f 7420 6265 2077  lts may not be w
-0000b3d0: 6861 740d 0a20 2020 2020 2020 2079 6f75  hat..        you
-0000b3e0: 2065 7870 6563 742e 0d0a 0d0a 2020 2020   expect.....    
-0000b3f0: 2020 2020 466f 7220 7061 7261 6d65 7465      For paramete
-0000b400: 7220 6465 7363 7269 7074 696f 6e73 2c20  r descriptions, 
-0000b410: 7365 6520 3a70 793a 6d65 7468 3a60 6e75  see :py:meth:`nu
-0000b420: 6d70 792e 6e64 6172 7261 792e 6173 7479  mpy.ndarray.asty
-0000b430: 7065 602e 204e 6f74 650d 0a20 2020 2020  pe`. Note..     
-0000b440: 2020 2074 6861 7420 756e 7469 6c20 6120     that until a 
-0000b450: 7265 706f 7274 6564 2062 7567 2069 7320  reported bug is 
-0000b460: 6669 7865 642c 2074 6865 2060 6361 7374  fixed, the `cast
-0000b470: 696e 6760 2070 6172 616d 6574 6572 2069  ing` parameter i
-0000b480: 7320 6967 6e6f 7265 640d 0a20 2020 2020  s ignored..     
-0000b490: 2020 2077 6865 6e20 5269 7074 6162 6c65     when Riptable
-0000b4a0: 2068 616e 646c 6573 2074 6865 2063 6f6e   handles the con
-0000b4b0: 7665 7273 696f 6e2e 0d0a 0d0a 2020 2020  version.....    
-0000b4c0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-0000b4d0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-0000b4e0: 2020 2020 2020 6046 6173 7441 7272 6179        `FastArray
-0000b4f0: 600d 0a20 2020 2020 2020 2020 2020 2041  `..            A
-0000b500: 2060 4661 7374 4172 7261 7960 2077 6974   `FastArray` wit
-0000b510: 6820 7661 6c75 6573 2063 6f6e 7665 7274  h values convert
-0000b520: 6564 2074 6f20 7468 6520 7370 6563 6966  ed to the specif
-0000b530: 6965 6420 6461 7461 2074 7970 652e 0d0a  ied data type...
-0000b540: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-0000b550: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-0000b560: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4461  ----..        Da
-0000b570: 7461 7365 742e 6173 7479 7065 0d0a 0d0a  taset.astype....
-0000b580: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-0000b590: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0000b5a0: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-0000b5b0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-0000b5c0: 285b 312e 372c 2032 2e30 2c20 332e 305d  ([1.7, 2.0, 3.0]
-0000b5d0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0000b5e0: 2e61 7374 7970 6528 696e 7429 0d0a 2020  .astype(int)..  
-0000b5f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000b600: 5b31 2c20 322c 2033 5d29 0d0a 0d0a 2020  [1, 2, 3])....  
-0000b610: 2020 2020 2020 436f 6e76 6572 7420 6120        Convert a 
-0000b620: 604e 614e 6020 746f 2061 6e20 6069 6e74  `NaN` to an `int
-0000b630: 6020 7365 6e74 696e 656c 2061 6e64 2062  ` sentinel and b
-0000b640: 6163 6b3a 0d0a 0d0a 2020 2020 2020 2020  ack:....        
-0000b650: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-0000b660: 7272 6179 285b 7274 2e6e 616e 2c20 312e  rray([rt.nan, 1.
-0000b670: 302c 2032 2e30 5d29 0d0a 2020 2020 2020  0, 2.0])..      
-0000b680: 2020 3e3e 3e20 615f 696e 7420 3d20 612e    >>> a_int = a.
-0000b690: 6173 7479 7065 2869 6e74 290d 0a20 2020  astype(int)..   
-0000b6a0: 2020 2020 203e 3e3e 2061 5f69 6e74 0d0a       >>> a_int..
-0000b6b0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000b6c0: 7928 5b2d 3231 3437 3438 3336 3438 2c20  y([-2147483648, 
-0000b6d0: 2020 2020 2020 2020 2020 312c 2020 2020            1,    
-0000b6e0: 2020 2020 2020 2032 5d29 0d0a 2020 2020         2])..    
-0000b6f0: 2020 2020 3e3e 3e20 615f 696e 742e 6173      >>> a_int.as
-0000b700: 7479 7065 2866 6c6f 6174 290d 0a20 2020  type(float)..   
-0000b710: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-0000b720: 6e61 6e2c 2020 312e 2c20 2032 2e5d 290d  nan,  1.,  2.]).
-0000b730: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000b740: 2020 2020 2020 2320 7265 7375 6c74 3d20        # result= 
-0000b750: 7375 7065 7228 4661 7374 4172 7261 792c  super(FastArray,
-0000b760: 2073 656c 6629 2e61 7374 7970 6528 6474   self).astype(dt
-0000b770: 7970 652c 206f 7264 6572 2c63 6173 7469  ype, order,casti
-0000b780: 6e67 2c73 7562 6f6b 2c63 6f70 7929 0d0a  ng,subok,copy)..
-0000b790: 2020 2020 2020 2020 2320 3137 2069 7320          # 17 is 
-0000b7a0: 6f62 6a65 6374 0d0a 2020 2020 2020 2020  object..        
-0000b7b0: 2320 3138 203d 2041 5343 4949 2073 7472  # 18 = ASCII str
-0000b7c0: 696e 670d 0a20 2020 2020 2020 2023 2031  ing..        # 1
-0000b7d0: 3920 3d20 554e 4943 4f44 4520 7374 7269  9 = UNICODE stri
-0000b7e0: 6e67 0d0a 2020 2020 2020 2020 746f 5f6e  ng..        to_n
-0000b7f0: 756d 203d 206e 702e 6474 7970 6528 6474  um = np.dtype(dt
-0000b800: 7970 6529 2e6e 756d 0d0a 0d0a 2020 2020  ype).num....    
-0000b810: 2020 2020 2320 6368 6563 6b20 666f 7220      # check for 
-0000b820: 636f 6e74 6967 756f 7573 2069 6e20 6f6e  contiguous in on
-0000b830: 6520 6f72 2074 776f 2064 696d 656e 7369  e or two dimensi
-0000b840: 6f6e 730d 0a20 2020 2020 2020 2069 6620  ons..        if 
-0000b850: 7365 6c66 2e66 6c61 6773 2e66 5f63 6f6e  self.flags.f_con
-0000b860: 7469 6775 6f75 7320 6f72 2073 656c 662e  tiguous or self.
-0000b870: 666c 6167 732e 635f 636f 6e74 6967 756f  flags.c_contiguo
-0000b880: 7573 3a0d 0a20 2020 2020 2020 2020 2020  us:..           
-0000b890: 2069 6620 6f72 6465 7220 3d3d 2022 4b22   if order == "K"
-0000b8a0: 2061 6e64 2073 7562 6f6b 2061 6e64 2063   and subok and c
-0000b8b0: 6f70 7920 616e 6420 7365 6c66 2e64 7479  opy and self.dty
-0000b8c0: 7065 2e6e 756d 203c 3d20 3133 2061 6e64  pe.num <= 13 and
-0000b8d0: 2074 6f5f 6e75 6d20 3c3d 2031 333a 0d0a   to_num <= 13:..
-0000b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8f0: 2320 7065 7266 6f72 6d20 6120 7361 6665  # perform a safe
-0000b900: 2063 6f6e 7665 7273 696f 6e20 756e 6465   conversion unde
-0000b910: 7273 7461 6e64 696e 6720 7365 6e74 696e  rstanding sentin
-0000b920: 656c 730d 0a20 2020 2020 2020 2020 2020  els..           
-0000b930: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
-0000b940: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-0000b950: 6765 722e 5f41 535f 4641 5f54 5950 4528  ger._AS_FA_TYPE(
-0000b960: 7365 6c66 2c20 746f 5f6e 756d 290d 0a0d  self, to_num)...
-0000b970: 0a20 2020 2020 2020 2023 2070 756e 7420  .        # punt 
-0000b980: 746f 206e 756d 7079 0d0a 2020 2020 2020  to numpy..      
-0000b990: 2020 7265 7375 6c74 203d 2054 7970 6552    result = TypeR
-0000b9a0: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
-0000b9b0: 6572 2e5f 4153 5459 5045 2873 7570 6572  er._ASTYPE(super
-0000b9c0: 2846 6173 7441 7272 6179 2c20 7365 6c66  (FastArray, self
-0000b9d0: 292c 2064 7479 7065 2c20 6f72 6465 722c  ), dtype, order,
-0000b9e0: 2063 6173 7469 6e67 2c20 7375 626f 6b2c   casting, subok,
-0000b9f0: 2063 6f70 7929 0d0a 2020 2020 2020 2020   copy)..        
-0000ba00: 7265 7475 726e 2072 6573 756c 742e 7669  return result.vi
-0000ba10: 6577 2846 6173 7441 7272 6179 290d 0a0d  ew(FastArray)...
-0000ba20: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-0000ba30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ba40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ba50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ba60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ba70: 2d0d 0a20 2020 2064 6566 205f 7669 6577  -..    def _view
-0000ba80: 5f69 6e74 6572 6e61 6c28 7365 6c66 2c20  _internal(self, 
-0000ba90: 7479 7065 3d4e 6f6e 6529 3a0d 0a20 2020  type=None):..   
-0000baa0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000bab0: 2020 4661 7374 4172 7261 7920 7375 6263    FastArray subc
-0000bac0: 6c61 7373 6573 206e 6565 6420 746f 2074  lasses need to t
-0000bad0: 616b 6520 7468 6973 206f 7665 7220 6966  ake this over if
-0000bae0: 2074 6865 7920 7761 6e74 2074 6f20 6d61   they want to ma
-0000baf0: 6b65 2061 2073 6861 6c6c 6f77 2063 6f70  ke a shallow cop
-0000bb00: 7920 6f66 0d0a 2020 2020 2020 2020 6120  y of..        a 
-0000bb10: 6661 7374 6172 7261 7920 696e 7374 6561  fastarray instea
-0000bb20: 6420 6f66 2076 6965 7769 6e67 2074 6865  d of viewing the
-0000bb30: 6d73 656c 7665 7320 6173 2061 2066 6173  mselves as a fas
-0000bb40: 7461 7272 6179 2028 7768 6963 6820 6472  tarray (which dr
-0000bb50: 6f70 7320 7468 6569 7220 6f74 6865 7220  ops their other 
-0000bb60: 7072 6f70 6572 7469 6573 292e 0d0a 2020  properties)...  
-0000bb70: 2020 2020 2020 5461 6b69 6e67 206f 7665        Taking ove
-0000bb80: 7220 7669 6577 2064 6972 6563 746c 7920  r view directly 
-0000bb90: 6d61 7920 6861 7665 2061 206c 6f74 206f  may have a lot o
-0000bba0: 6620 756e 696e 7465 6e64 6564 2063 6f6e  f unintended con
-0000bbb0: 7365 7175 656e 6365 732e 0d0a 2020 2020  sequences...    
-0000bbc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000bbd0: 2069 6620 7479 7065 2069 7320 6e6f 7420   if type is not 
-0000bbe0: 4661 7374 4172 7261 7920 6f72 2074 7970  FastArray or typ
-0000bbf0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-0000bc00: 2020 2020 2020 2020 2020 2020 6e65 7761              newa
-0000bc10: 7272 203d 2073 656c 662e 7669 6577 2874  rr = self.view(t
-0000bc20: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-0000bc30: 2020 2320 636f 7079 2061 6c6c 2074 6865    # copy all the
-0000bc40: 2070 726f 7065 7274 6965 730d 0a20 2020   properties..   
-0000bc50: 2020 2020 2020 2020 206e 6577 6172 722e           newarr.
-0000bc60: 5f5f 6469 6374 5f5f 203d 2073 656c 662e  __dict__ = self.
-0000bc70: 5f5f 6469 6374 5f5f 2e63 6f70 7928 290d  __dict__.copy().
-0000bc80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000bc90: 7572 6e20 6e65 7761 7272 0d0a 2020 2020  urn newarr..    
-0000bca0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0000bcb0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
-0000bcc0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00008b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00008b70: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00008b80: 640d 0a20 2020 2064 6566 205f 4661 7374  d..    def _Fast
+00008b90: 4675 6e63 7469 6f6e 734f 6e28 293a 0d0a  FunctionsOn():..
+00008ba0: 2020 2020 2020 2020 6966 2046 6173 7441          if FastA
+00008bb0: 7272 6179 2e56 6572 626f 7365 203e 2030  rray.Verbose > 0
+00008bc0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00008bd0: 7269 6e74 2866 2246 4153 5446 554e 4320  rint(f"FASTFUNC 
+00008be0: 4f4e 3a20 6661 7374 6675 6e63 2077 6173  ON: fastfunc was
+00008bf0: 207b 4661 7374 4172 7261 792e 4661 7374   {FastArray.Fast
+00008c00: 6572 5546 756e 637d 2229 0d0a 2020 2020  erUFunc}")..    
+00008c10: 2020 2020 4661 7374 4172 7261 792e 4661      FastArray.Fa
+00008c20: 7374 6572 5546 756e 6320 3d20 5472 7565  sterUFunc = True
+00008c30: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00008c40: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
+00008c50: 4661 7374 4675 6e63 7469 6f6e 734f 6666  FastFunctionsOff
+00008c60: 2829 3a0d 0a20 2020 2020 2020 2069 6620  ():..        if 
+00008c70: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+00008c80: 6520 3e20 303a 0d0a 2020 2020 2020 2020  e > 0:..        
+00008c90: 2020 2020 7072 696e 7428 6622 4641 5354      print(f"FAST
+00008ca0: 4655 4e43 204f 4646 3a20 6661 7374 6675  FUNC OFF: fastfu
+00008cb0: 6e63 2077 6173 207b 4661 7374 4172 7261  nc was {FastArra
+00008cc0: 792e 4661 7374 6572 5546 756e 637d 2229  y.FasterUFunc}")
+00008cd0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00008ce0: 7261 792e 4661 7374 6572 5546 756e 6320  ray.FasterUFunc 
+00008cf0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2040  = False....    @
+00008d00: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
+00008d10: 6620 5f6e 7028 7365 6c66 2920 2d3e 206e  f _np(self) -> n
+00008d20: 702e 6e64 6172 7261 793a 0d0a 2020 2020  p.ndarray:..    
+00008d30: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00008d40: 2052 6574 7572 6e20 6120 4e75 6d50 7920   Return a NumPy 
+00008d50: 6172 7261 7920 7669 6577 206f 6620 7468  array view of th
+00008d60: 6520 696e 7075 7420 6046 6173 7441 7272  e input `FastArr
+00008d70: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
+00008d80: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00008d90: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00008da0: 2020 6e75 6d70 792e 6e64 6172 7261 790d    numpy.ndarray.
+00008db0: 0a20 2020 2020 2020 2020 2020 2041 204e  .            A N
+00008dc0: 756d 5079 2061 7272 6179 2076 6965 7720  umPy array view 
+00008dd0: 6f66 2074 6865 2069 6e70 7574 2060 4661  of the input `Fa
+00008de0: 7374 4172 7261 7960 2e0d 0a0d 0a20 2020  stArray`.....   
+00008df0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00008e00: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00008e10: 0a20 2020 2020 2020 2046 6173 7461 7272  .        Fastarr
+00008e20: 6179 2e76 6965 7720 3a20 5669 6577 2061  ay.view : View a
+00008e30: 204e 756d 5079 2061 7272 6179 2061 7320   NumPy array as 
+00008e40: 6120 6046 6173 7441 7272 6179 602e 0d0a  a `FastArray`...
+00008e50: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00008e60: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00008e70: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5265  ----..        Re
+00008e80: 7475 726e 2061 204e 756d 5079 2061 7272  turn a NumPy arr
+00008e90: 6179 2076 6965 7720 666f 7220 616e 2069  ay view for an i
+00008ea0: 6e74 6567 6572 2060 4661 7374 4172 7261  nteger `FastArra
+00008eb0: 7960 3a0d 0a0d 0a20 2020 2020 2020 203e  y`:....        >
+00008ec0: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
+00008ed0: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
+00008ee0: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+00008ef0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00008f00: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
+00008f10: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00008f20: 5f6e 700d 0a20 2020 2020 2020 2061 7272  _np..        arr
+00008f30: 6179 285b 312c 2032 2c20 332c 2034 2c20  ay([1, 2, 3, 4, 
+00008f40: 355d 290d 0a0d 0a20 2020 2020 2020 2055  5])....        U
+00008f50: 7064 6174 6520 7468 6520 6046 6173 7441  pdate the `FastA
+00008f60: 7272 6179 6020 7573 696e 6720 7468 6520  rray` using the 
+00008f70: 4e75 6d50 7920 6172 7261 7920 7669 6577  NumPy array view
+00008f80: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+00008f90: 206e 7076 6965 7720 3d20 612e 5f6e 700d   npview = a._np.
+00008fa0: 0a20 2020 2020 2020 203e 3e3e 206e 7076  .        >>> npv
+00008fb0: 6965 775b 325d 203d 2031 300d 0a20 2020  iew[2] = 10..   
+00008fc0: 2020 2020 203e 3e3e 2061 0d0a 2020 2020       >>> a..    
+00008fd0: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
+00008fe0: 312c 2020 322c 2031 302c 2020 342c 2020  1,  2, 10,  4,  
+00008ff0: 355d 290d 0a20 2020 2020 2020 2022 2222  5])..        """
+00009000: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00009010: 2073 656c 662e 7669 6577 286e 702e 6e64   self.view(np.nd
+00009020: 6172 7261 7929 0d0a 0d0a 2020 2020 4073  array)....    @s
+00009030: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00009040: 2064 6566 205f 5630 2829 3a0d 0a20 2020   def _V0():..   
+00009050: 2020 2020 2070 7269 6e74 2822 7365 7474       print("sett
+00009060: 696e 6720 7665 7262 6f73 6520 6c65 7665  ing verbose leve
+00009070: 6c20 746f 2030 2229 0d0a 2020 2020 2020  l to 0")..      
+00009080: 2020 4661 7374 4172 7261 792e 5665 7262    FastArray.Verb
+00009090: 6f73 6520 3d20 300d 0a20 2020 2020 2020  ose = 0..       
+000090a0: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
+000090b0: 792e 5665 7262 6f73 650d 0a0d 0a20 2020  y.Verbose....   
+000090c0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+000090d0: 2020 2020 6465 6620 5f56 3128 293a 0d0a      def _V1():..
+000090e0: 2020 2020 2020 2020 7072 696e 7428 2273          print("s
+000090f0: 6574 7469 6e67 2076 6572 626f 7365 206c  etting verbose l
+00009100: 6576 656c 2074 6f20 3122 290d 0a20 2020  evel to 1")..   
+00009110: 2020 2020 2046 6173 7441 7272 6179 2e56       FastArray.V
+00009120: 6572 626f 7365 203d 2031 0d0a 2020 2020  erbose = 1..    
+00009130: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+00009140: 7272 6179 2e56 6572 626f 7365 0d0a 0d0a  rray.Verbose....
+00009150: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00009160: 640d 0a20 2020 2064 6566 205f 5632 2829  d..    def _V2()
+00009170: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
+00009180: 2822 7365 7474 696e 6720 7665 7262 6f73  ("setting verbos
+00009190: 6520 6c65 7665 6c20 746f 2032 2229 0d0a  e level to 2")..
+000091a0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+000091b0: 792e 5665 7262 6f73 6520 3d20 320d 0a20  y.Verbose = 2.. 
+000091c0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+000091d0: 7374 4172 7261 792e 5665 7262 6f73 650d  stArray.Verbose.
+000091e0: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+000091f0: 7468 6f64 0d0a 2020 2020 6465 6620 5f4f  thod..    def _O
+00009200: 4e28 293a 0d0a 2020 2020 2020 2020 2222  N():..        ""
+00009210: 220d 0a20 2020 2020 2020 2065 6e61 626c  "..        enabl
+00009220: 6520 696e 7465 7263 6570 7469 6e67 2061  e intercepting a
+00009230: 7272 6179 2075 6675 6e63 0d0a 2020 2020  rray ufunc..    
+00009240: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00009250: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
+00009260: 792e 5f46 6173 7446 756e 6374 696f 6e73  y._FastFunctions
+00009270: 4f6e 2829 0d0a 0d0a 2020 2020 4073 7461  On()....    @sta
+00009280: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
+00009290: 6566 205f 4f46 4628 293a 0d0a 2020 2020  ef _OFF():..    
+000092a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000092b0: 2064 6973 6162 6c65 2069 6e74 6572 6365   disable interce
+000092c0: 7074 696e 6720 6f66 2061 7272 6179 2075  pting of array u
+000092d0: 6675 6e63 0d0a 2020 2020 2020 2020 2222  func..        ""
+000092e0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+000092f0: 6e20 4661 7374 4172 7261 792e 5f46 6173  n FastArray._Fas
+00009300: 7446 756e 6374 696f 6e73 4f66 6628 290d  tFunctionsOff().
+00009310: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00009320: 7468 6f64 0d0a 2020 2020 6465 6620 5f54  thod..    def _T
+00009330: 4f4e 2829 3a0d 0a20 2020 2020 2020 2070  ON():..        p
+00009340: 7269 6e74 2822 5468 7265 6164 696e 6720  rint("Threading 
+00009350: 6f6e 2229 0d0a 2020 2020 2020 2020 7265  on")..        re
+00009360: 7475 726e 2072 632e 5468 7265 6164 696e  turn rc.Threadin
+00009370: 674d 6f64 6528 3029 0d0a 0d0a 2020 2020  gMode(0)....    
+00009380: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+00009390: 2020 2064 6566 205f 544f 4646 2829 3a0d     def _TOFF():.
+000093a0: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
+000093b0: 5468 7265 6164 696e 6720 6f66 6622 290d  Threading off").
+000093c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000093d0: 7263 2e54 6872 6561 6469 6e67 4d6f 6465  rc.ThreadingMode
+000093e0: 2831 290d 0a0d 0a20 2020 2040 7374 6174  (1)....    @stat
+000093f0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+00009400: 6620 5f52 4f4e 2871 7569 6574 3d46 616c  f _RON(quiet=Fal
+00009410: 7365 293a 0d0a 2020 2020 2020 2020 2222  se):..        ""
+00009420: 220d 0a20 2020 2020 2020 2054 7572 6e20  "..        Turn 
+00009430: 6f6e 2072 6563 7963 6c69 6e67 2e0d 0a0d  on recycling....
+00009440: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+00009450: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+00009460: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00009470: 2071 7569 6574 3a20 626f 6f6c 2c20 6f70   quiet: bool, op
+00009480: 7469 6f6e 616c 0d0a 0d0a 2020 2020 2020  tional....      
+00009490: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+000094a0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+000094b0: 2020 2020 5472 7565 2069 6620 7265 6379      True if recy
+000094c0: 636c 696e 6720 7761 7320 7072 6576 696f  cling was previo
+000094d0: 7573 6c79 206f 6e2c 2065 6c73 6520 4661  usly on, else Fa
+000094e0: 6c73 650d 0a20 2020 2020 2020 2022 2222  lse..        """
+000094f0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00009500: 2071 7569 6574 3a0d 0a20 2020 2020 2020   quiet:..       
+00009510: 2020 2020 2070 7269 6e74 2822 5265 6379       print("Recy
+00009520: 636c 696e 6720 6e75 6d70 7920 6172 7261  cling numpy arra
+00009530: 7973 206f 6e22 290d 0a20 2020 2020 2020  ys on")..       
+00009540: 2072 6573 756c 7420 3d20 7263 2e53 6574   result = rc.Set
+00009550: 5265 6379 636c 654d 6f64 6528 3029 0d0a  RecycleMode(0)..
+00009560: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00009570: 792e 5265 6379 636c 6520 3d20 5472 7565  y.Recycle = True
+00009580: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00009590: 2072 6573 756c 740d 0a0d 0a20 2020 2040   result....    @
+000095a0: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+000095b0: 2020 6465 6620 5f52 4f46 4628 7175 6965    def _ROFF(quie
+000095c0: 743d 4661 6c73 6529 3a0d 0a20 2020 2020  t=False):..     
+000095d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000095e0: 5475 726e 206f 6666 2072 6563 7963 6c69  Turn off recycli
+000095f0: 6e67 2e0d 0a0d 0a20 2020 2020 2020 2050  ng.....        P
+00009600: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+00009610: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+00009620: 2020 2020 2020 2071 7569 6574 3a20 626f         quiet: bo
+00009630: 6f6c 2c20 6f70 7469 6f6e 616c 0d0a 0d0a  ol, optional....
+00009640: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+00009650: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00009660: 0d0a 2020 2020 2020 2020 5472 7565 2069  ..        True i
+00009670: 6620 7265 6379 636c 696e 6720 7761 7320  f recycling was 
+00009680: 7072 6576 696f 7573 6c79 206f 6e2c 2065  previously on, e
+00009690: 6c73 6520 4661 6c73 650d 0a20 2020 2020  lse False..     
+000096a0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000096b0: 6966 206e 6f74 2071 7569 6574 3a0d 0a20  if not quiet:.. 
+000096c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000096d0: 2822 5265 6379 636c 696e 6720 6e75 6d70  ("Recycling nump
+000096e0: 7920 6172 7261 7973 206f 6666 2229 0d0a  y arrays off")..
+000096f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00009700: 2072 632e 5365 7452 6563 7963 6c65 4d6f   rc.SetRecycleMo
+00009710: 6465 2831 290d 0a20 2020 2020 2020 2046  de(1)..        F
+00009720: 6173 7441 7272 6179 2e52 6563 7963 6c65  astArray.Recycle
+00009730: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+00009740: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
+00009750: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00009760: 7468 6f64 0d0a 2020 2020 6465 6620 5f52  thod..    def _R
+00009770: 4455 4d50 2829 3a0d 0a20 2020 2020 2020  DUMP():..       
+00009780: 2022 2222 0d0a 2020 2020 2020 2020 4469   """..        Di
+00009790: 7370 6c61 7973 2074 6f20 7365 7276 6572  splays to server
+000097a0: 2773 2073 7464 6f75 740d 0a0d 0a20 2020  's stdout....   
+000097b0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+000097c0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+000097d0: 2020 2020 2020 2054 6f74 616c 2073 697a         Total siz
+000097e0: 6520 6f66 2069 7465 6d73 206e 6f74 2069  e of items not i
+000097f0: 6e20 7573 650d 0a20 2020 2020 2020 2022  n use..        "
+00009800: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00009810: 726e 2072 632e 5265 6379 636c 6544 756d  rn rc.RecycleDum
+00009820: 7028 290d 0a0d 0a20 2020 2040 7374 6174  p()....    @stat
+00009830: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+00009840: 6620 5f47 434e 4f57 2874 696d 656f 7574  f _GCNOW(timeout
+00009850: 3a20 696e 7420 3d20 3029 3a0d 0a20 2020  : int = 0):..   
+00009860: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00009870: 2020 5061 7373 2074 6865 2067 6172 6261    Pass the garba
+00009880: 6765 2063 6f6c 6c65 6374 6f72 2074 696d  ge collector tim
+00009890: 656f 7574 2076 616c 7565 2074 6f20 636c  eout value to cl
+000098a0: 6561 6e75 702e 0d0a 2020 2020 2020 2020  eanup...        
+000098b0: 5061 7373 696e 6720 3020 7769 6c6c 2066  Passing 0 will f
+000098c0: 6f72 6365 2061 6e20 696d 6d65 6469 6174  orce an immediat
+000098d0: 6520 6761 7262 6167 6520 636f 6c6c 6563  e garbage collec
+000098e0: 7469 6f6e 2e0d 0a0d 0a20 2020 2020 2020  tion.....       
+000098f0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+00009900: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+00009910: 2020 2044 6963 7469 6f6e 6172 7920 6f66     Dictionary of
+00009920: 206d 656d 6f72 7920 6865 7572 6973 7469   memory heuristi
+00009930: 6373 2069 6e63 6c75 6469 6e67 2027 546f  cs including 'To
+00009940: 7461 6c44 656c 6574 6564 270d 0a20 2020  talDeleted'..   
+00009950: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00009960: 2020 696d 706f 7274 2067 630d 0a0d 0a20    import gc.... 
+00009970: 2020 2020 2020 2067 632e 636f 6c6c 6563         gc.collec
+00009980: 7428 290d 0a20 2020 2020 2020 2072 6573  t()..        res
+00009990: 756c 7420 3d20 7263 2e52 6563 7963 6c65  ult = rc.Recycle
+000099a0: 4761 7262 6167 6543 6f6c 6c65 6374 4e6f  GarbageCollectNo
+000099b0: 7728 7469 6d65 6f75 7429 0d0a 2020 2020  w(timeout)..    
+000099c0: 2020 2020 746f 7461 6c44 656c 6574 6564      totalDeleted
+000099d0: 203d 2072 6573 756c 745b 2254 6f74 616c   = result["Total
+000099e0: 4465 6c65 7465 6422 5d0d 0a20 2020 2020  Deleted"]..     
+000099f0: 2020 2069 6620 746f 7461 6c44 656c 6574     if totalDelet
+00009a00: 6564 203e 2030 3a0d 0a20 2020 2020 2020  ed > 0:..       
+00009a10: 2020 2020 2046 6173 7441 7272 6179 2e5f       FastArray._
+00009a20: 4743 4e4f 5728 7469 6d65 6f75 7429 0d0a  GCNOW(timeout)..
+00009a30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00009a40: 6573 756c 740d 0a0d 0a20 2020 2040 7374  esult....    @st
+00009a50: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
+00009a60: 6465 6620 5f47 4353 4554 2874 696d 656f  def _GCSET(timeo
+00009a70: 7574 3a20 696e 7420 3d20 3130 3029 3a0d  ut: int = 100):.
+00009a80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00009a90: 2020 2020 2020 5061 7373 2074 6865 2067        Pass the g
+00009aa0: 6172 6261 6765 2063 6f6c 6c65 6374 6f72  arbage collector
+00009ab0: 2074 696d 656f 7574 2076 616c 7565 2074   timeout value t
+00009ac0: 6f20 6578 7069 7265 0d0a 2020 2020 2020  o expire..      
+00009ad0: 2020 5468 6520 7469 6d65 6f75 7420 7661    The timeout va
+00009ae0: 6c75 6520 6973 2072 6f75 6768 6c79 2069  lue is roughly i
+00009af0: 6e20 322f 3520 7365 6373 0d0a 2020 2020  n 2/5 secs..    
+00009b00: 2020 2020 4120 7661 6c75 6520 6f66 2031      A value of 1
+00009b10: 3030 2069 7320 7573 7561 6c6c 7920 6162  00 is usually ab
+00009b20: 6f75 7420 3430 2073 6563 6f6e 6473 0d0a  out 40 seconds..
+00009b30: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00009b40: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00009b50: 2d2d 0d0a 2020 2020 2020 2020 5072 6576  --..        Prev
+00009b60: 696f 7573 2074 696d 6573 7061 6e0d 0a20  ious timespan.. 
+00009b70: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00009b80: 2020 2020 7265 7475 726e 2072 632e 5265      return rc.Re
+00009b90: 6379 636c 6553 6574 4761 7262 6167 6543  cycleSetGarbageC
+00009ba0: 6f6c 6c65 6374 5469 6d65 6f75 7428 7469  ollectTimeout(ti
+00009bb0: 6d65 6f75 7429 0d0a 0d0a 2020 2020 4073  meout)....    @s
+00009bc0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00009bd0: 2064 6566 205f 4c4f 4e28 293a 0d0a 2020   def _LON():..  
+00009be0: 2020 2020 2020 2222 2254 7572 6e20 7468        """Turn th
+00009bf0: 6520 6d61 7468 206c 6564 6765 7220 6f6e  e math ledger on
+00009c00: 2074 6f20 7265 636f 7264 2061 6c6c 2061   to record all a
+00009c10: 7272 6179 206d 6174 6820 726f 7574 696e  rray math routin
+00009c20: 6573 2222 220d 0a20 2020 2020 2020 2072  es"""..        r
+00009c30: 6574 7572 6e20 5479 7065 5265 6769 7374  eturn TypeRegist
+00009c40: 6572 2e4d 6174 684c 6564 6765 722e 5f4c  er.MathLedger._L
+00009c50: 6564 6765 724f 6e28 290d 0a0d 0a20 2020  edgerOn()....   
+00009c60: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+00009c70: 2020 2020 6465 6620 5f4c 4f46 4628 293a      def _LOFF():
+00009c80: 0d0a 2020 2020 2020 2020 2222 2254 7572  ..        """Tur
+00009c90: 6e20 7468 6520 6d61 7468 206c 6564 6765  n the math ledge
+00009ca0: 7220 6f66 6622 2222 0d0a 2020 2020 2020  r off"""..      
+00009cb0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+00009cc0: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
+00009cd0: 2e5f 4c65 6467 6572 4f66 6628 290d 0a0d  ._LedgerOff()...
+00009ce0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00009cf0: 6f64 0d0a 2020 2020 6465 6620 5f4c 4455  od..    def _LDU
+00009d00: 4d50 2864 6174 6173 6574 3d54 7275 6529  MP(dataset=True)
+00009d10: 3a0d 0a20 2020 2020 2020 2022 2222 5072  :..        """Pr
+00009d20: 696e 7420 6f75 7420 7468 6520 6d61 7468  int out the math
+00009d30: 206c 6564 6765 7222 2222 0d0a 2020 2020   ledger"""..    
+00009d40: 2020 2020 7265 7475 726e 2054 7970 6552      return TypeR
+00009d50: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
+00009d60: 6572 2e5f 4c65 6467 6572 4475 6d70 2864  er._LedgerDump(d
+00009d70: 6174 6173 6574 3d64 6174 6173 6574 290d  ataset=dataset).
+00009d80: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00009d90: 7468 6f64 0d0a 2020 2020 6465 6620 5f4c  thod..    def _L
+00009da0: 4455 4d50 4628 6669 6c65 6e61 6d65 293a  DUMPF(filename):
+00009db0: 0d0a 2020 2020 2020 2020 2222 2253 6176  ..        """Sav
+00009dc0: 6520 7468 6520 6d61 7468 206c 6564 6765  e the math ledge
+00009dd0: 7220 746f 2061 2066 696c 6522 2222 0d0a  r to a file"""..
+00009de0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00009df0: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+00009e00: 4c65 6467 6572 2e5f 4c65 6467 6572 4475  Ledger._LedgerDu
+00009e10: 6d70 4669 6c65 2866 696c 656e 616d 6529  mpFile(filename)
+00009e20: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00009e30: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
+00009e40: 4c43 4c45 4152 2829 3a0d 0a20 2020 2020  LCLEAR():..     
+00009e50: 2020 2022 2222 436c 6561 7220 616c 6c20     """Clear all 
+00009e60: 7468 6520 656e 7472 6965 7320 696e 2074  the entries in t
+00009e70: 6865 206d 6174 6820 6c65 6467 6572 2222  he math ledger""
+00009e80: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00009e90: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
+00009ea0: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
+00009eb0: 7243 6c65 6172 2829 0d0a 0d0a 2020 2020  rClear()....    
+00009ec0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00009ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00009f10: 2020 6465 6620 5f5f 7365 7469 7465 6d5f    def __setitem_
+00009f20: 5f28 7365 6c66 2c20 666c 642c 2076 616c  _(self, fld, val
+00009f30: 7565 293a 0d0a 2020 2020 2020 2020 2222  ue):..        ""
+00009f40: 220d 0a20 2020 2020 2020 2055 7365 6420  "..        Used 
+00009f50: 6f6e 2074 6865 206c 6566 7420 6861 6e64  on the left hand
+00009f60: 2073 6964 6520 6f66 0d0a 2020 2020 2020   side of..      
+00009f70: 2020 6172 725b 666c 645d 203d 2076 616c    arr[fld] = val
+00009f80: 7565 0d0a 0d0a 2020 2020 2020 2020 5468  ue....        Th
+00009f90: 6973 2072 6f75 7469 6e65 2074 7269 6573  is routine tries
+00009fa0: 2074 6f20 636f 6e76 6572 7420 696e 7661   to convert inva
+00009fb0: 6c69 6420 6474 7970 6573 2074 6f20 7468  lid dtypes to th
+00009fc0: 6174 2069 6e76 616c 6964 7320 6172 6520  at invalids are 
+00009fd0: 7072 6573 6572 7665 6420 7768 656e 2073  preserved when s
+00009fe0: 6574 7469 6e67 0d0a 2020 2020 2020 2020  etting..        
+00009ff0: 5468 6520 6d62 7365 7420 706f 7274 696f  The mbset portio
+0000a000: 6e20 6f66 2074 6869 7320 6973 206e 6f20  n of this is no 
+0000a010: 7772 6974 7465 6e20 2877 6869 6368 2077  written (which w
+0000a020: 696c 6c20 6e6f 7420 7261 6973 6520 616e  ill not raise an
+0000a030: 2069 6e64 6578 6572 726f 7220 6f6e 206f   indexerror on o
+0000a040: 7574 206f 6620 626f 756e 6473 290d 0a0d  ut of bounds)...
+0000a050: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+0000a060: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+0000a070: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000a080: 2066 6c64 3a20 7363 616c 6172 2c20 626f   fld: scalar, bo
+0000a090: 6f6c 6561 6e2c 2066 616e 6379 2069 6e64  olean, fancy ind
+0000a0a0: 6578 206d 6173 6b2c 2073 6c69 6365 2c20  ex mask, slice, 
+0000a0b0: 7365 7175 656e 6365 2c20 6f72 206c 6973  sequence, or lis
+0000a0c0: 740d 0a20 2020 2020 2020 2076 616c 7565  t..        value
+0000a0d0: 3a20 7363 616c 6172 2c20 7365 7175 656e  : scalar, sequen
+0000a0e0: 6365 206f 7220 6461 7461 7365 7420 7661  ce or dataset va
+0000a0f0: 6c75 6520 6173 2066 6f6c 6c6f 7773 0d0a  lue as follows..
+0000a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a110: 7365 7175 656e 6365 2063 616e 2062 6520  sequence can be 
+0000a120: 6c69 7374 2c20 7475 706c 652c 206e 702e  list, tuple, np.
+0000a130: 6e64 6172 7261 792c 2046 6173 7441 7272  ndarray, FastArr
+0000a140: 6179 0d0a 0d0a 2020 2020 2020 2020 5261  ay....        Ra
+0000a150: 6973 6573 0d0a 2020 2020 2020 2020 2d2d  ises..        --
+0000a160: 2d2d 2d2d 0d0a 2020 2020 2020 2020 496e  ----..        In
+0000a170: 6465 7845 7272 6f72 0d0a 0d0a 2020 2020  dexError....    
+0000a180: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000a190: 206e 6577 7661 6c75 6520 3d20 4e6f 6e65   newvalue = None
+0000a1a0: 0d0a 0d0a 2020 2020 2020 2020 2320 7472  ....        # tr
+0000a1b0: 7920 746f 206d 616b 6520 616e 2061 7272  y to make an arr
+0000a1c0: 6179 2c20 6576 656e 2069 6620 6172 7261  ay, even if arra
+0000a1d0: 7920 6f66 2031 0d0a 2020 2020 2020 2020  y of 1..        
+0000a1e0: 6966 206e 702e 6973 7363 616c 6172 2876  if np.isscalar(v
+0000a1f0: 616c 7565 293a 0d0a 2020 2020 2020 2020  alue):..        
+0000a200: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+0000a210: 7461 6e63 6528 7661 6c75 652c 2028 7374  tance(value, (st
+0000a220: 722c 2062 7974 6573 2c20 6e70 2e62 7974  r, bytes, np.byt
+0000a230: 6573 5f2c 206e 702e 7374 725f 2929 3a0d  es_, np.str_)):.
+0000a240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a250: 2023 2063 6f6e 7665 7274 2074 6f20 6172   # convert to ar
+0000a260: 7261 7920 6f66 2031 2069 7465 6d0d 0a20  ray of 1 item.. 
+0000a270: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0000a280: 6577 7661 6c75 6520 3d20 4661 7374 4172  ewvalue = FastAr
+0000a290: 7261 7928 5b76 616c 7565 5d29 0d0a 2020  ray([value])..  
+0000a2a0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+0000a2b0: 7461 6e63 6528 7661 6c75 652c 2028 6c69  tance(value, (li
+0000a2c0: 7374 2c20 7475 706c 6529 293a 0d0a 2020  st, tuple)):..  
+0000a2d0: 2020 2020 2020 2020 2020 2320 636f 6e76            # conv
+0000a2e0: 6572 7420 746f 206e 756d 7079 2061 7272  ert to numpy arr
+0000a2f0: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
+0000a300: 6e65 7776 616c 7565 203d 2046 6173 7441  newvalue = FastA
+0000a310: 7272 6179 2876 616c 7565 2c20 756e 6963  rray(value, unic
+0000a320: 6f64 653d 5472 7565 290d 0a20 2020 2020  ode=True)..     
+0000a330: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0000a340: 6365 2876 616c 7565 2c20 6e70 2e6e 6461  ce(value, np.nda
+0000a350: 7272 6179 293a 0d0a 2020 2020 2020 2020  rray):..        
+0000a360: 2020 2020 2320 6a75 7374 2072 6566 6572      # just refer
+0000a370: 656e 6365 2069 740d 0a20 2020 2020 2020  ence it..       
+0000a380: 2020 2020 206e 6577 7661 6c75 6520 3d20       newvalue = 
+0000a390: 7661 6c75 650d 0a0d 0a20 2020 2020 2020  value....       
+0000a3a0: 2069 6620 6e65 7776 616c 7565 2069 7320   if newvalue is 
+0000a3b0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000a3c0: 2020 2020 2020 2023 206e 6f77 2077 6520         # now we 
+0000a3d0: 6861 7665 2061 206e 756d 7079 2061 7272  have a numpy arr
+0000a3e0: 6179 2e2e 2063 6f6e 7665 7274 2074 6865  ay.. convert the
+0000a3f0: 2064 7479 7065 2074 6f20 6d61 7463 6820   dtype to match 
+0000a400: 7573 0d0a 2020 2020 2020 2020 2020 2020  us..            
+0000a410: 2320 7468 6973 2073 686f 756c 6420 7461  # this should ta
+0000a420: 6b65 2063 6172 6520 6f66 2069 6e76 616c  ke care of inval
+0000a430: 6964 730d 0a20 2020 2020 2020 2020 2020  ids..           
+0000a440: 2023 2063 6f6e 7665 7274 2066 6972 7374   # convert first
+0000a450: 2031 3420 636f 6d6d 6f6e 2074 7970 6573   14 common types
+0000a460: 2028 626f 6f6c 2c20 696e 7473 2c20 666c   (bool, ints, fl
+0000a470: 6f61 7473 290d 0a20 2020 2020 2020 2020  oats)..         
+0000a480: 2020 2069 6620 6e65 7776 616c 7565 2e64     if newvalue.d
+0000a490: 7479 7065 2021 3d20 7365 6c66 2e64 7479  type != self.dty
+0000a4a0: 7065 2061 6e64 206e 6577 7661 6c75 652e  pe and newvalue.
+0000a4b0: 6474 7970 652e 6e75 6d20 3c3d 2031 333a  dtype.num <= 13:
+0000a4c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a4d0: 2020 6e65 7776 616c 7565 203d 206e 6577    newvalue = new
+0000a4e0: 7661 6c75 652e 6173 7479 7065 2873 656c  value.astype(sel
+0000a4f0: 662e 6474 7970 6529 0d0a 0d0a 2020 2020  f.dtype)....    
+0000a500: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+0000a510: 666f 7220 626f 6f6c 6561 6e20 6172 7261  for boolean arra
+0000a520: 7920 7369 6e63 6520 7765 2064 6f20 6e6f  y since we do no
+0000a530: 7420 6861 6e64 6c65 2066 616e 6379 2069  t handle fancy i
+0000a540: 6e64 6578 2079 6574 0d0a 2020 2020 2020  ndex yet..      
+0000a550: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000a560: 6e63 6528 666c 642c 206e 702e 6e64 6172  nce(fld, np.ndar
+0000a570: 7261 7929 2061 6e64 2066 6c64 2e64 7479  ray) and fld.dty
+0000a580: 7065 2e6e 756d 203d 3d20 303a 0d0a 2020  pe.num == 0:..  
+0000a590: 2020 2020 2020 2020 2020 2020 2020 6973                is
+0000a5a0: 5f75 6e73 7570 706f 7274 6564 203d 2073  _unsupported = s
+0000a5b0: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
+0000a5c0: 6f72 7465 6428 6e65 7776 616c 7565 290d  orted(newvalue).
+0000a5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a5e0: 2069 6620 6973 5f75 6e73 7570 706f 7274   if is_unsupport
+0000a5f0: 6564 3a0d 0a20 2020 2020 2020 2020 2020  ed:..           
+0000a600: 2020 2020 2020 2020 2023 206d 616b 6520           # make 
+0000a610: 6974 2063 6f6e 7469 6775 6f75 732c 2069  it contiguous, i
+0000a620: 6e20 6361 7365 2074 6861 7427 7320 7468  n case that's th
+0000a630: 6520 7072 6f62 6c65 6d3f 0d0a 2020 2020  e problem?..    
+0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a650: 6e65 7776 616c 7565 203d 206e 6577 7661  newvalue = newva
+0000a660: 6c75 652e 636f 7079 2829 0d0a 2020 2020  lue.copy()..    
+0000a670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a680: 2320 7265 2d74 6573 7420 7375 7070 6f72  # re-test suppor
+0000a690: 742c 206a 7573 7420 746f 2062 6520 7375  t, just to be su
+0000a6a0: 7265 2e0d 0a20 2020 2020 2020 2020 2020  re...           
+0000a6b0: 2020 2020 2020 2020 2069 735f 756e 7375           is_unsu
+0000a6c0: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
+0000a6d0: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
+0000a6e0: 286e 6577 7661 6c75 6529 0d0a 0d0a 2020  (newvalue)....  
+0000a6f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000a700: 6966 2073 7570 706f 7274 6564 2c20 6361  if supported, ca
+0000a710: 6c6c 206f 7572 2073 6574 6974 656d 2c20  ll our setitem, 
+0000a720: 6974 2077 696c 6c20 7265 7475 726e 2046  it will return F
+0000a730: 616c 7365 2069 6620 6974 2066 6169 6c73  alse if it fails
+0000a740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a750: 2020 6966 206e 6f74 2069 735f 756e 7375    if not is_unsu
+0000a760: 7070 6f72 7465 643a 0d0a 2020 2020 2020  pported:..      
+0000a770: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000a780: 2072 632e 5365 7449 7465 6d28 7365 6c66   rc.SetItem(self
+0000a790: 2c20 666c 642c 206e 6577 7661 6c75 6529  , fld, newvalue)
+0000a7a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000a7b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000a7c0: 6e0d 0a20 2020 2020 2020 2020 2020 2074  n..            t
+0000a7d0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000a7e0: 2020 2020 206e 702e 6e64 6172 7261 792e       np.ndarray.
+0000a7f0: 5f5f 7365 7469 7465 6d5f 5f28 7365 6c66  __setitem__(self
+0000a800: 2c20 666c 642c 206e 6577 7661 6c75 6529  , fld, newvalue)
+0000a810: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
+0000a820: 6365 7074 2045 7863 6570 7469 6f6e 3a0d  cept Exception:.
+0000a830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a840: 2023 206f 6464 2062 616c 6c20 6361 7365   # odd ball case
+0000a850: 7320 6861 6e64 6c65 6420 6865 7265 206c  s handled here l
+0000a860: 696b 6520 7566 756e 6320 7465 7374 730d  ike ufunc tests.
+0000a870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a880: 206e 702e 6e64 6172 7261 792e 5f5f 7365   np.ndarray.__se
+0000a890: 7469 7465 6d5f 5f28 7365 6c66 2c20 666c  titem__(self, fl
+0000a8a0: 642c 2076 616c 7565 290d 0a20 2020 2020  d, value)..     
+0000a8b0: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+0000a8c0: 0a20 2020 2020 2020 2023 2070 756e 7420  .        # punt 
+0000a8d0: 746f 206e 6f72 6d61 6c20 6e75 6d70 790d  to normal numpy.
+0000a8e0: 0a20 2020 2020 2020 206e 702e 6e64 6172  .        np.ndar
+0000a8f0: 7261 792e 5f5f 7365 7469 7465 6d5f 5f28  ray.__setitem__(
+0000a900: 7365 6c66 2c20 666c 642c 2076 616c 7565  self, fld, value
+0000a910: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+0000a920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a960: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+0000a970: 5f67 6574 6974 656d 5f5f 2873 656c 662c  _getitem__(self,
+0000a980: 2066 6c64 2920 2d3e 2046 6173 7441 7272   fld) -> FastArr
+0000a990: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+0000a9a0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
+0000a9b0: 6c65 2068 6173 2073 7065 6369 616c 2072  le has special r
+0000a9c0: 6f75 7469 6e65 7320 746f 2068 616e 646c  outines to handl
+0000a9d0: 6520 6172 7261 7920 696e 7075 7420 696e  e array input in
+0000a9e0: 2074 6865 2069 6e64 6578 6572 2e0d 0a20   the indexer... 
+0000a9f0: 2020 2020 2020 2045 7665 7279 7468 696e         Everythin
+0000aa00: 6720 656c 7365 2077 696c 6c20 676f 2074  g else will go t
+0000aa10: 6f20 6e75 6d70 7920 6765 7469 7465 6d2e  o numpy getitem.
+0000aa20: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000aa30: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000aa40: 616e 6365 2866 6c64 2c20 6e70 2e6e 6461  ance(fld, np.nda
+0000aa50: 7272 6179 293a 0d0a 2020 2020 2020 2020  rray):..        
+0000aa60: 2020 2020 2320 7265 7375 6c74 3d20 7375      # result= su
+0000aa70: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
+0000aa80: 656c 6629 2e5f 5f67 6574 6974 656d 5f5f  elf).__getitem__
+0000aa90: 2866 6c64 292e 7669 6577 2846 6173 7441  (fld).view(FastA
+0000aaa0: 7272 6179 290d 0a20 2020 2020 2020 2020  rray)..         
+0000aab0: 2020 2069 6620 666c 642e 6474 7970 6520     if fld.dtype 
+0000aac0: 3d3d 206e 702e 626f 6f6c 5f3a 0d0a 2020  == np.bool_:..  
+0000aad0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000aae0: 6d61 6b65 2073 7572 6520 6e6f 2073 7472  make sure no str
+0000aaf0: 6964 696e 670d 0a20 2020 2020 2020 2020  iding..         
+0000ab00: 2020 2020 2020 2023 204e 4f54 453a 2077         # NOTE: w
+0000ab10: 696c 6c20 6661 696c 206f 6e20 7365 6c66  ill fail on self
+0000ab20: 2e64 7479 7065 2e62 7974 656f 7264 6572  .dtype.byteorder
+0000ab30: 2061 7320 6c69 7474 6c65 2065 6e64 6961   as little endia
+0000ab40: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
+0000ab50: 2020 2069 6620 7365 6c66 2e66 6c61 6773     if self.flags
+0000ab60: 2e66 5f63 6f6e 7469 6775 6f75 733a 0d0a  .f_contiguous:..
+0000ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab80: 2020 2020 2320 6469 6d65 6e73 696f 6e73      # dimensions
+0000ab90: 206d 7573 7420 6d61 7463 680d 0a20 2020   must match..   
+0000aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abb0: 2069 6620 7365 6c66 2e6e 6469 6d20 3d3d   if self.ndim ==
+0000abc0: 2066 6c64 2e6e 6469 6d20 616e 6420 7365   fld.ndim and se
+0000abd0: 6c66 2e6e 6469 6d20 3d3d 2031 3a0d 0a20  lf.ndim == 1:.. 
+0000abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abf0: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
+0000ac00: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0000ac10: 6564 6765 722e 5f49 4e44 4558 5f42 4f4f  edger._INDEX_BOO
+0000ac20: 4c28 7365 6c66 2c20 666c 6429 0d0a 0d0a  L(self, fld)....
+0000ac30: 2020 2020 2020 2020 2020 2020 2320 6966              # if
+0000ac40: 2077 6520 6861 7665 2066 616e 6379 2069   we have fancy i
+0000ac50: 6e64 6578 696e 6720 616e 6420 7765 2073  ndexing and we s
+0000ac60: 7570 706f 7274 2074 6865 2061 7272 6179  upport the array
+0000ac70: 2074 7970 652c 206d 616b 6520 7375 7265   type, make sure
+0000ac80: 2077 6520 646f 206e 6f74 2068 6176 6520   we do not have 
+0000ac90: 7374 7269 6465 2070 726f 626c 656d 0d0a  stride problem..
+0000aca0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0000acb0: 6c64 2e64 7479 7065 2e63 6861 7220 696e  ld.dtype.char in
+0000acc0: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
+0000acd0: 416c 6c49 6e74 6567 6572 2061 6e64 2073  AllInteger and s
+0000ace0: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
+0000acf0: 6e20 4e75 6d70 7943 6861 7254 7970 6573  n NumpyCharTypes
+0000ad00: 2e53 7570 706f 7274 6564 416c 7465 726e  .SupportedAltern
+0000ad10: 6174 653a 0d0a 2020 2020 2020 2020 2020  ate:..          
+0000ad20: 2020 2020 2020 6966 2073 656c 662e 666c        if self.fl
+0000ad30: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
+0000ad40: 2061 6e64 2066 6c64 2e66 6c61 6773 2e66   and fld.flags.f
+0000ad50: 5f63 6f6e 7469 6775 6f75 733a 0d0a 2020  _contiguous:..  
+0000ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad70: 2020 6966 206c 656e 2873 656c 662e 7368    if len(self.sh
+0000ad80: 6170 6529 203d 3d20 313a 0d0a 2020 2020  ape) == 1:..    
+0000ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ada0: 2020 2020 7265 7475 726e 2054 7970 6552      return TypeR
+0000adb0: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
+0000adc0: 6572 2e5f 4d42 4745 5428 7365 6c66 2c20  er._MBGET(self, 
+0000add0: 666c 6429 0d0a 0d0a 2020 2020 2020 2020  fld)....        
+0000ade0: 2020 2020 7265 7375 6c74 203d 2054 7970      result = Typ
+0000adf0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+0000ae00: 6467 6572 2e5f 4745 5449 5445 4d28 7375  dger._GETITEM(su
+0000ae10: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
+0000ae20: 656c 6629 2c20 666c 6429 0d0a 2020 2020  elf), fld)..    
+0000ae30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+0000ae40: 6573 756c 742e 7669 6577 2846 6173 7441  esult.view(FastA
+0000ae50: 7272 6179 290d 0a20 2020 2020 2020 2065  rray)..        e
+0000ae60: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000ae70: 2020 2320 636f 756c 6420 6265 2061 206c    # could be a l
+0000ae80: 6973 7420 7768 6963 6820 6973 206f 6674  ist which is oft
+0000ae90: 656e 2063 6f6e 7665 7274 6564 2074 6f20  en converted to 
+0000aea0: 616e 2061 7272 6179 0d0a 0d0a 2020 2020  an array....    
+0000aeb0: 2020 2020 2020 2020 2320 5468 6973 2061          # This a
+0000aec0: 7373 756d 6573 2074 6861 7420 4661 7374  ssumes that Fast
+0000aed0: 4172 7261 7920 6861 7320 6120 736f 6c65  Array has a sole
+0000aee0: 2070 6172 656e 742c 206e 702e 6e64 6172   parent, np.ndar
+0000aef0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+0000af00: 2023 2049 6620 7468 6973 2063 6861 6e67   # If this chang
+0000af10: 6573 2c20 7468 6520 7375 7065 7228 2920  es, the super() 
+0000af20: 6361 6c6c 206e 6565 6473 2074 6f20 6265  call needs to be
+0000af30: 2075 7365 640d 0a20 2020 2020 2020 2020   used..         
+0000af40: 2020 2072 6574 7572 6e20 6e70 2e6e 6461     return np.nda
+0000af50: 7272 6179 2e5f 5f67 6574 6974 656d 5f5f  rray.__getitem__
+0000af60: 2873 656c 662c 2066 6c64 290d 0a20 2020  (self, fld)..   
+0000af70: 2020 2020 2020 2020 2023 2072 6574 7572           # retur
+0000af80: 6e20 7375 7065 7228 4661 7374 4172 7261  n super(FastArra
+0000af90: 792c 2073 656c 6629 2e5f 5f67 6574 6974  y, self).__getit
+0000afa0: 656d 5f5f 2866 6c64 290d 0a0d 0a20 2020  em__(fld)....   
+0000afb0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0000afc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000afd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000afe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+0000b000: 2020 2064 6566 2064 6973 706c 6179 5f71     def display_q
+0000b010: 7565 7279 5f70 726f 7065 7274 6965 7328  uery_properties(
+0000b020: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0000b030: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+0000b040: 7572 6e73 2061 6e20 4974 656d 466f 726d  urns an ItemForm
+0000b050: 6174 206f 626a 6563 7420 616e 6420 6120  at object and a 
+0000b060: 6675 6e63 7469 6f6e 2066 6f72 2063 6f6e  function for con
+0000b070: 7665 7274 696e 6720 7468 6520 4661 7374  verting the Fast
+0000b080: 4172 7261 7973 2069 7465 6d73 2074 6f20  Arrays items to 
+0000b090: 7374 7269 6e67 732e 0d0a 2020 2020 2020  strings...      
+0000b0a0: 2020 4261 7369 6320 7479 7065 733a 2042    Basic types: B
+0000b0b0: 6f6f 6c2c 2049 6e74 2c20 466c 6f61 742c  ool, Int, Float,
+0000b0c0: 2042 7974 6573 2c20 5374 7269 6e67 2061   Bytes, String a
+0000b0d0: 6c6c 2068 6176 6520 6465 6661 756c 7420  ll have default 
+0000b0e0: 666f 726d 6174 7320 2f20 636f 6e76 6572  formats / conver
+0000b0f0: 7369 6f6e 2066 756e 6374 696f 6e73 2e0d  sion functions..
+0000b100: 0a20 2020 2020 2020 2028 7365 6520 5574  .        (see Ut
+0000b110: 696c 732e 7274 5f64 6973 706c 6179 5f70  ils.rt_display_p
+0000b120: 726f 7065 7274 6965 7329 0d0a 0d0a 2020  roperties)....  
+0000b130: 2020 2020 2020 4966 2061 206e 6577 2074        If a new t
+0000b140: 7970 6520 6973 2061 2073 7562 636c 6173  ype is a subclas
+0000b150: 7320 6f66 2046 6173 7441 7272 6179 2061  s of FastArray a
+0000b160: 6e64 206e 6565 6473 2074 6f20 6265 2064  nd needs to be d
+0000b170: 6973 706c 6179 6564 2069 6e20 666f 726d  isplayed in form
+0000b180: 6174 0d0a 2020 2020 2020 2020 6469 6666  at..        diff
+0000b190: 6572 656e 7420 6672 6f6d 2069 7473 2075  erent from its u
+0000b1a0: 6e64 6572 6c79 696e 6720 7479 7065 2c20  nderlying type, 
+0000b1b0: 6974 2077 696c 6c20 6e65 6564 2074 6f20  it will need to 
+0000b1c0: 7461 6b65 206f 7665 7220 7468 6973 2072  take over this r
+0000b1d0: 6f75 7469 6e65 2e0d 0a20 2020 2020 2020  outine...       
+0000b1e0: 2022 2222 0d0a 2020 2020 2020 2020 6172   """..        ar
+0000b1f0: 725f 7479 7065 2c20 636f 6e76 6572 745f  r_type, convert_
+0000b200: 6675 6e63 203d 2044 6973 706c 6179 436f  func = DisplayCo
+0000b210: 6e76 6572 742e 6765 745f 6469 7370 6c61  nvert.get_displa
+0000b220: 795f 636f 6e76 6572 7428 7365 6c66 290d  y_convert(self).
+0000b230: 0a20 2020 2020 2020 2064 6973 706c 6179  .        display
+0000b240: 5f66 6f72 6d61 7420 3d20 6465 6661 756c  _format = defaul
+0000b250: 745f 6974 656d 5f66 6f72 6d61 7473 2e67  t_item_formats.g
+0000b260: 6574 2861 7272 5f74 7970 652c 2049 7465  et(arr_type, Ite
+0000b270: 6d46 6f72 6d61 7428 2929 0d0a 2020 2020  mFormat())..    
+0000b280: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
+0000b290: 7368 6170 6529 203e 2031 3a0d 0a20 2020  shape) > 1:..   
+0000b2a0: 2020 2020 2020 2020 2064 6973 706c 6179           display
+0000b2b0: 5f66 6f72 6d61 742e 636f 6e76 6572 7420  _format.convert 
+0000b2c0: 3d20 636f 6e76 6572 745f 6675 6e63 0d0a  = convert_func..
+0000b2d0: 2020 2020 2020 2020 2020 2020 636f 6e76              conv
+0000b2e0: 6572 745f 6675 6e63 203d 2044 6973 706c  ert_func = Displ
+0000b2f0: 6179 436f 6e76 6572 742e 636f 6e76 6572  ayConvert.conver
+0000b300: 744d 756c 7469 4469 6d73 0d0a 0d0a 2020  tMultiDims....  
+0000b310: 2020 2020 2020 2320 6164 6420 7365 6e74        # add sent
+0000b320: 696e 656c 2076 616c 7565 2066 6f72 2069  inel value for i
+0000b330: 6e74 6567 6572 0d0a 2020 2020 2020 2020  nteger..        
+0000b340: 6966 2064 6973 706c 6179 5f66 6f72 6d61  if display_forma
+0000b350: 742e 696e 7661 6c69 6420 6973 204e 6f6e  t.invalid is Non
+0000b360: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000b370: 6469 7370 6c61 795f 666f 726d 6174 203d  display_format =
+0000b380: 2064 6973 706c 6179 5f66 6f72 6d61 742e   display_format.
+0000b390: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+0000b3a0: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
+0000b3b0: 652e 6368 6172 2069 6e20 4e75 6d70 7943  e.char in NumpyC
+0000b3c0: 6861 7254 7970 6573 2e41 6c6c 496e 7465  harTypes.AllInte
+0000b3d0: 6765 723a 0d0a 2020 2020 2020 2020 2020  ger:..          
+0000b3e0: 2020 2020 2020 6469 7370 6c61 795f 666f        display_fo
+0000b3f0: 726d 6174 2e69 6e76 616c 6964 203d 2049  rmat.invalid = I
+0000b400: 4e56 414c 4944 5f44 4943 545b 7365 6c66  NVALID_DICT[self
+0000b410: 2e64 7479 7065 2e6e 756d 5d0d 0a20 2020  .dtype.num]..   
+0000b420: 2020 2020 2072 6574 7572 6e20 6469 7370       return disp
+0000b430: 6c61 795f 666f 726d 6174 2c20 636f 6e76  lay_format, conv
+0000b440: 6572 745f 6675 6e63 0d0a 0d0a 2020 2020  ert_func....    
+0000b450: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+0000b460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+0000b4a0: 2020 6465 6620 6173 7479 7065 2873 656c    def astype(sel
+0000b4b0: 662c 2064 7479 7065 2c20 6f72 6465 723d  f, dtype, order=
+0000b4c0: 224b 222c 2063 6173 7469 6e67 3d22 756e  "K", casting="un
+0000b4d0: 7361 6665 222c 2073 7562 6f6b 3d54 7275  safe", subok=Tru
+0000b4e0: 652c 2063 6f70 793d 5472 7565 2920 2d3e  e, copy=True) ->
+0000b4f0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+0000b500: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000b510: 2020 5265 7475 726e 2061 2060 4661 7374    Return a `Fast
+0000b520: 4172 7261 7960 2077 6974 6820 7661 6c75  Array` with valu
+0000b530: 6573 2063 6f6e 7665 7274 6564 2074 6f20  es converted to 
+0000b540: 7468 6520 7370 6563 6966 6965 6420 6461  the specified da
+0000b550: 7461 2074 7970 652e 0d0a 0d0a 2020 2020  ta type.....    
+0000b560: 2020 2020 4368 6563 6b20 796f 7572 2072      Check your r
+0000b570: 6573 756c 7473 2077 6865 6e20 796f 7520  esults when you 
+0000b580: 636f 6e76 6572 7420 6d69 7373 696e 6720  convert missing 
+0000b590: 7661 6c75 6573 2e20 5365 6e74 696e 656c  values. Sentinel
+0000b5a0: 2076 616c 7565 7320 6172 650d 0a20 2020   values are..   
+0000b5b0: 2020 2020 2070 7265 7365 7276 6564 2077       preserved w
+0000b5c0: 6865 6e20 5269 7074 6162 6c65 2068 616e  hen Riptable han
+0000b5d0: 646c 6573 2074 6865 2063 6f6e 7665 7273  dles the convers
+0000b5e0: 696f 6e2e 2048 6f77 6576 6572 2c20 696e  ion. However, in
+0000b5f0: 2073 6f6d 6520 6361 7365 730d 0a20 2020   some cases..   
+0000b600: 2020 2020 2074 6865 2061 7272 6179 2069       the array i
+0000b610: 7320 7365 6e74 2074 6f20 4e75 6d50 7920  s sent to NumPy 
+0000b620: 666f 7220 636f 6e76 6572 7369 6f6e 2061  for conversion a
+0000b630: 6e64 2072 6573 756c 7473 206d 6179 206e  nd results may n
+0000b640: 6f74 2062 6520 7768 6174 0d0a 2020 2020  ot be what..    
+0000b650: 2020 2020 796f 7520 6578 7065 6374 2e0d      you expect..
+0000b660: 0a0d 0a20 2020 2020 2020 2046 6f72 2070  ...        For p
+0000b670: 6172 616d 6574 6572 2064 6573 6372 6970  arameter descrip
+0000b680: 7469 6f6e 732c 2073 6565 203a 7079 3a6d  tions, see :py:m
+0000b690: 6574 683a 606e 756d 7079 2e6e 6461 7272  eth:`numpy.ndarr
+0000b6a0: 6179 2e61 7374 7970 6560 2e20 4e6f 7465  ay.astype`. Note
+0000b6b0: 0d0a 2020 2020 2020 2020 7468 6174 2075  ..        that u
+0000b6c0: 6e74 696c 2061 2072 6570 6f72 7465 6420  ntil a reported 
+0000b6d0: 6275 6720 6973 2066 6978 6564 2c20 7468  bug is fixed, th
+0000b6e0: 6520 6063 6173 7469 6e67 6020 7061 7261  e `casting` para
+0000b6f0: 6d65 7465 7220 6973 2069 676e 6f72 6564  meter is ignored
+0000b700: 0d0a 2020 2020 2020 2020 7768 656e 2052  ..        when R
+0000b710: 6970 7461 626c 6520 6861 6e64 6c65 7320  iptable handles 
+0000b720: 7468 6520 636f 6e76 6572 7369 6f6e 2e0d  the conversion..
+0000b730: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+0000b740: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+0000b750: 2d2d 2d0d 0a20 2020 2020 2020 2060 4661  ---..        `Fa
+0000b760: 7374 4172 7261 7960 0d0a 2020 2020 2020  stArray`..      
+0000b770: 2020 2020 2020 4120 6046 6173 7441 7272        A `FastArr
+0000b780: 6179 6020 7769 7468 2076 616c 7565 7320  ay` with values 
+0000b790: 636f 6e76 6572 7465 6420 746f 2074 6865  converted to the
+0000b7a0: 2073 7065 6369 6669 6564 2064 6174 6120   specified data 
+0000b7b0: 7479 7065 2e0d 0a0d 0a20 2020 2020 2020  type.....       
+0000b7c0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+0000b7d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+0000b7e0: 2020 2020 2044 6174 6173 6574 2e61 7374       Dataset.ast
+0000b7f0: 7970 650d 0a0d 0a20 2020 2020 2020 2045  ype....        E
+0000b800: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+0000b810: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0000b820: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+0000b830: 7374 4172 7261 7928 5b31 2e37 2c20 322e  stArray([1.7, 2.
+0000b840: 302c 2033 2e30 5d29 0d0a 2020 2020 2020  0, 3.0])..      
+0000b850: 2020 3e3e 3e20 612e 6173 7479 7065 2869    >>> a.astype(i
+0000b860: 6e74 290d 0a20 2020 2020 2020 2046 6173  nt)..        Fas
+0000b870: 7441 7272 6179 285b 312c 2032 2c20 335d  tArray([1, 2, 3]
+0000b880: 290d 0a0d 0a20 2020 2020 2020 2043 6f6e  )....        Con
+0000b890: 7665 7274 2061 2060 4e61 4e60 2074 6f20  vert a `NaN` to 
+0000b8a0: 616e 2060 696e 7460 2073 656e 7469 6e65  an `int` sentine
+0000b8b0: 6c20 616e 6420 6261 636b 3a0d 0a0d 0a20  l and back:.... 
+0000b8c0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+0000b8d0: 742e 4661 7374 4172 7261 7928 5b72 742e  t.FastArray([rt.
+0000b8e0: 6e61 6e2c 2031 2e30 2c20 322e 305d 290d  nan, 1.0, 2.0]).
+0000b8f0: 0a20 2020 2020 2020 203e 3e3e 2061 5f69  .        >>> a_i
+0000b900: 6e74 203d 2061 2e61 7374 7970 6528 696e  nt = a.astype(in
+0000b910: 7429 0d0a 2020 2020 2020 2020 3e3e 3e20  t)..        >>> 
+0000b920: 615f 696e 740d 0a20 2020 2020 2020 2046  a_int..        F
+0000b930: 6173 7441 7272 6179 285b 2d32 3134 3734  astArray([-21474
+0000b940: 3833 3634 382c 2020 2020 2020 2020 2020  83648,          
+0000b950: 2031 2c20 2020 2020 2020 2020 2020 325d   1,           2]
+0000b960: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0000b970: 5f69 6e74 2e61 7374 7970 6528 666c 6f61  _int.astype(floa
+0000b980: 7429 0d0a 2020 2020 2020 2020 4661 7374  t)..        Fast
+0000b990: 4172 7261 7928 5b6e 616e 2c20 2031 2e2c  Array([nan,  1.,
+0000b9a0: 2020 322e 5d29 0d0a 2020 2020 2020 2020    2.])..        
+0000b9b0: 2222 220d 0a20 2020 2020 2020 2023 2072  """..        # r
+0000b9c0: 6573 756c 743d 2073 7570 6572 2846 6173  esult= super(Fas
+0000b9d0: 7441 7272 6179 2c20 7365 6c66 292e 6173  tArray, self).as
+0000b9e0: 7479 7065 2864 7479 7065 2c20 6f72 6465  type(dtype, orde
+0000b9f0: 722c 6361 7374 696e 672c 7375 626f 6b2c  r,casting,subok,
+0000ba00: 636f 7079 290d 0a20 2020 2020 2020 2023  copy)..        #
+0000ba10: 2031 3720 6973 206f 626a 6563 740d 0a20   17 is object.. 
+0000ba20: 2020 2020 2020 2023 2031 3820 3d20 4153         # 18 = AS
+0000ba30: 4349 4920 7374 7269 6e67 0d0a 2020 2020  CII string..    
+0000ba40: 2020 2020 2320 3139 203d 2055 4e49 434f      # 19 = UNICO
+0000ba50: 4445 2073 7472 696e 670d 0a20 2020 2020  DE string..     
+0000ba60: 2020 2074 6f5f 6e75 6d20 3d20 6e70 2e64     to_num = np.d
+0000ba70: 7479 7065 2864 7479 7065 292e 6e75 6d0d  type(dtype).num.
+0000ba80: 0a0d 0a20 2020 2020 2020 2023 2063 6865  ...        # che
+0000ba90: 636b 2066 6f72 2063 6f6e 7469 6775 6f75  ck for contiguou
+0000baa0: 7320 696e 206f 6e65 206f 7220 7477 6f20  s in one or two 
+0000bab0: 6469 6d65 6e73 696f 6e73 0d0a 2020 2020  dimensions..    
+0000bac0: 2020 2020 6966 2073 656c 662e 666c 6167      if self.flag
+0000bad0: 732e 665f 636f 6e74 6967 756f 7573 206f  s.f_contiguous o
+0000bae0: 7220 7365 6c66 2e66 6c61 6773 2e63 5f63  r self.flags.c_c
+0000baf0: 6f6e 7469 6775 6f75 733a 0d0a 2020 2020  ontiguous:..    
+0000bb00: 2020 2020 2020 2020 6966 206f 7264 6572          if order
+0000bb10: 203d 3d20 224b 2220 616e 6420 7375 626f   == "K" and subo
+0000bb20: 6b20 616e 6420 636f 7079 2061 6e64 2073  k and copy and s
+0000bb30: 656c 662e 6474 7970 652e 6e75 6d20 3c3d  elf.dtype.num <=
+0000bb40: 2031 3320 616e 6420 746f 5f6e 756d 203c   13 and to_num <
+0000bb50: 3d20 3133 3a0d 0a20 2020 2020 2020 2020  = 13:..         
+0000bb60: 2020 2020 2020 2023 2070 6572 666f 726d         # perform
+0000bb70: 2061 2073 6166 6520 636f 6e76 6572 7369   a safe conversi
+0000bb80: 6f6e 2075 6e64 6572 7374 616e 6469 6e67  on understanding
+0000bb90: 2073 656e 7469 6e65 6c73 0d0a 2020 2020   sentinels..    
+0000bba0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000bbb0: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
+0000bbc0: 4d61 7468 4c65 6467 6572 2e5f 4153 5f46  MathLedger._AS_F
+0000bbd0: 415f 5459 5045 2873 656c 662c 2074 6f5f  A_TYPE(self, to_
+0000bbe0: 6e75 6d29 0d0a 0d0a 2020 2020 2020 2020  num)....        
+0000bbf0: 2320 7075 6e74 2074 6f20 6e75 6d70 790d  # punt to numpy.
+0000bc00: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0000bc10: 3d20 5479 7065 5265 6769 7374 6572 2e4d  = TypeRegister.M
+0000bc20: 6174 684c 6564 6765 722e 5f41 5354 5950  athLedger._ASTYP
+0000bc30: 4528 7375 7065 7228 4661 7374 4172 7261  E(super(FastArra
+0000bc40: 792c 2073 656c 6629 2c20 6474 7970 652c  y, self), dtype,
+0000bc50: 206f 7264 6572 2c20 6361 7374 696e 672c   order, casting,
+0000bc60: 2073 7562 6f6b 2c20 636f 7079 290d 0a20   subok, copy).. 
+0000bc70: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0000bc80: 7375 6c74 2e76 6965 7728 4661 7374 4172  sult.view(FastAr
+0000bc90: 7261 7929 0d0a 0d0a 2020 2020 2320 2d2d  ray)....    # --
+0000bca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bcc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000bcd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bd00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bd10: 2d2d 2d0d 0a20 2020 2064 6566 2063 6f70  ---..    def cop
-0000bd20: 7928 7365 6c66 2c20 6f72 6465 723d 224b  y(self, order="K
-0000bd30: 2229 202d 3e20 4661 7374 4172 7261 793a  ") -> FastArray:
-0000bd40: 0d0a 2020 2020 2020 2020 2320 7265 7375  ..        # resu
-0000bd50: 6c74 3d20 7375 7065 7228 4661 7374 4172  lt= super(FastAr
-0000bd60: 7261 792c 2073 656c 6629 2e63 6f70 7928  ray, self).copy(
-0000bd70: 6f72 6465 7229 0d0a 2020 2020 2020 2020  order)..        
-0000bd80: 6966 2073 656c 662e 666c 6167 732e 665f  if self.flags.f_
-0000bd90: 636f 6e74 6967 756f 7573 206f 7220 7365  contiguous or se
-0000bda0: 6c66 2e66 6c61 6773 2e63 5f63 6f6e 7469  lf.flags.c_conti
-0000bdb0: 6775 6f75 733a 0d0a 2020 2020 2020 2020  guous:..        
-0000bdc0: 2020 2020 6966 206f 7264 6572 203d 3d20      if order == 
-0000bdd0: 224b 2220 616e 6420 7365 6c66 2e64 7479  "K" and self.dty
-0000bde0: 7065 2e6e 756d 203c 3d20 3133 3a0d 0a20  pe.num <= 13:.. 
-0000bdf0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000be00: 2070 6572 666f 726d 2061 2066 6173 7465   perform a faste
-0000be10: 7220 6d75 6c74 6974 6872 6561 6465 6420  r multithreaded 
-0000be20: 636f 7079 0d0a 2020 2020 2020 2020 2020  copy..          
-0000be30: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-0000be40: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-0000be50: 6467 6572 2e5f 4153 5f46 415f 5459 5045  dger._AS_FA_TYPE
-0000be60: 2873 656c 662c 2073 656c 662e 6474 7970  (self, self.dtyp
-0000be70: 652e 6e75 6d29 0d0a 0d0a 2020 2020 2020  e.num)....      
-0000be80: 2020 7265 7375 6c74 203d 2054 7970 6552    result = TypeR
-0000be90: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
-0000bea0: 6572 2e5f 434f 5059 2873 7570 6572 2846  er._COPY(super(F
-0000beb0: 6173 7441 7272 6179 2c20 7365 6c66 292c  astArray, self),
-0000bec0: 206f 7264 6572 290d 0a20 2020 2020 2020   order)..       
-0000bed0: 2072 6574 7572 6e20 7265 7375 6c74 2e76   return result.v
-0000bee0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-0000bef0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-0000bf00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf40: 2d2d 0d0a 2020 2020 6465 6620 636f 7079  --..    def copy
-0000bf50: 5f69 6e76 616c 6964 2873 656c 6629 202d  _invalid(self) -
-0000bf60: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-0000bf70: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000bf80: 2020 204d 616b 6573 2061 2063 6f70 7920     Makes a copy 
-0000bf90: 6f66 2074 6865 2061 7272 6179 2066 696c  of the array fil
-0000bfa0: 6c65 6420 7769 7468 2069 6e76 616c 6964  led with invalid
-0000bfb0: 732e 0d0a 0d0a 2020 2020 2020 2020 4578  s.....        Ex
-0000bfc0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-0000bfd0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0000bfe0: 2020 3e3e 3e20 7274 2e61 7261 6e67 6528    >>> rt.arange(
-0000bff0: 3529 2e63 6f70 795f 696e 7661 6c69 6428  5).copy_invalid(
-0000c000: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-0000c010: 7272 6179 285b 2d32 3134 3734 3833 3634  rray([-214748364
-0000c020: 382c 202d 3231 3437 3438 3336 3438 2c20  8, -2147483648, 
-0000c030: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
-0000c040: 3437 3438 3336 3438 2c20 2d32 3134 3734  47483648, -21474
-0000c050: 3833 3634 385d 290d 0a0d 0a20 2020 2020  83648])....     
-0000c060: 2020 203e 3e3e 2072 742e 6172 616e 6765     >>> rt.arange
-0000c070: 2835 292e 636f 7079 5f69 6e76 616c 6964  (5).copy_invalid
-0000c080: 2829 2e61 7374 7970 6528 6e70 2e66 6c6f  ().astype(np.flo
-0000c090: 6174 3332 290d 0a20 2020 2020 2020 2046  at32)..        F
-0000c0a0: 6173 7441 7272 6179 285b 6e61 6e2c 206e  astArray([nan, n
-0000c0b0: 616e 2c20 6e61 6e2c 206e 616e 2c20 6e61  an, nan, nan, na
-0000c0c0: 6e5d 2c20 6474 7970 653d 666c 6f61 7433  n], dtype=float3
-0000c0d0: 3229 0d0a 0d0a 2020 2020 2020 2020 5365  2)....        Se
-0000c0e0: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
-0000c0f0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0000c100: 2020 4661 7374 4172 7261 792e 696e 760d    FastArray.inv.
-0000c110: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000c120: 6179 2e66 696c 6c5f 696e 7661 6c69 640d  ay.fill_invalid.
-0000c130: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000c140: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000c150: 662e 6669 6c6c 5f69 6e76 616c 6964 2869  f.fill_invalid(i
-0000c160: 6e70 6c61 6365 3d46 616c 7365 290d 0a0d  nplace=False)...
-0000c170: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-0000c180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c1b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c1c0: 2d0d 0a20 2020 2040 7072 6f70 6572 7479  -..    @property
-0000c1d0: 0d0a 2020 2020 6465 6620 696e 7628 7365  ..    def inv(se
-0000c1e0: 6c66 2920 2d3e 206e 702e 6e75 6d62 6572  lf) -> np.number
-0000c1f0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0000c200: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-0000c210: 7468 6520 696e 7661 6c69 6420 7661 6c75  the invalid valu
-0000c220: 6520 666f 7220 7468 6520 6172 7261 792e  e for the array.
-0000c230: 0d0a 2020 2020 2020 2020 6e70 2e69 6e74  ..        np.int
-0000c240: 383a 202d 3132 380d 0a20 2020 2020 2020  8: -128..       
-0000c250: 206e 702e 7569 6e74 383a 2032 3535 0d0a   np.uint8: 255..
-0000c260: 2020 2020 2020 2020 6e70 2e69 6e74 3136          np.int16
-0000c270: 3a20 2d33 3237 3638 0d0a 2020 2020 2020  : -32768..      
-0000c280: 2020 2e2e 2e61 6e64 2073 6f20 6f6e 2e2e    ...and so on..
-0000c290: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0000c2a0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0000c2b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000c2c0: 3e3e 3e20 7274 2e61 7261 6e67 6528 3529  >>> rt.arange(5)
-0000c2d0: 2e69 6e76 0d0a 2020 2020 2020 2020 2d32  .inv..        -2
-0000c2e0: 3134 3734 3833 3634 380d 0a0d 0a20 2020  147483648....   
-0000c2f0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-0000c300: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0000c310: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000c320: 6179 2e63 6f70 795f 696e 7661 6c69 640d  ay.copy_invalid.
-0000c330: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000c340: 6179 2e66 696c 6c5f 696e 7661 6c69 640d  ay.fill_invalid.
-0000c350: 0a20 2020 2020 2020 2049 4e56 414c 4944  .        INVALID
-0000c360: 5f44 4943 540d 0a20 2020 2020 2020 2022  _DICT..        "
-0000c370: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-0000c380: 726e 2049 4e56 414c 4944 5f44 4943 545b  rn INVALID_DICT[
-0000c390: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
-0000c3a0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-0000c3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c3e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c3f0: 2d2d 2d0d 0a20 2020 2064 6566 2066 696c  ---..    def fil
-0000c400: 6c5f 696e 7661 6c69 6428 7365 6c66 2c20  l_invalid(self, 
-0000c410: 7368 6170 653d 4e6f 6e65 2c20 6474 7970  shape=None, dtyp
-0000c420: 653d 4e6f 6e65 2c20 696e 706c 6163 653d  e=None, inplace=
-0000c430: 5472 7565 2920 2d3e 2046 6173 7441 7272  True) -> FastArr
-0000c440: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-0000c450: 0d0a 2020 2020 2020 2020 4669 6c6c 7320  ..        Fills 
-0000c460: 6172 7261 7920 6f72 2072 6574 7572 6e73  array or returns
-0000c470: 2063 6f70 7920 6f66 2061 7272 6179 2077   copy of array w
-0000c480: 6974 6820 696e 7661 6c69 6420 7661 6c75  ith invalid valu
-0000c490: 6520 6f66 2061 7272 6179 2773 2064 7479  e of array's dty
-0000c4a0: 7065 206f 7220 6120 7370 6563 6966 6965  pe or a specifie
-0000c4b0: 6420 6f6e 652e 0d0a 2020 2020 2020 2020  d one...        
-0000c4c0: 5761 726e 696e 673a 2062 7920 6465 6661  Warning: by defa
-0000c4d0: 756c 7420 7468 6973 206f 7065 7261 7469  ult this operati
-0000c4e0: 6f6e 2069 7320 696e 706c 6163 652e 0d0a  on is inplace...
-0000c4f0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-0000c500: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-0000c510: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-0000c520: 3e20 613d 7274 2e61 7261 6e67 6528 3529  > a=rt.arange(5)
-0000c530: 2e66 696c 6c5f 696e 7661 6c69 6428 290d  .fill_invalid().
-0000c540: 0a20 2020 2020 2020 203e 3e3e 2061 0d0a  .        >>> a..
-0000c550: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000c560: 7928 5b2d 3231 3437 3438 3336 3438 2c20  y([-2147483648, 
-0000c570: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
-0000c580: 3437 3438 3336 3438 2c20 2d32 3134 3734  47483648, -21474
-0000c590: 3833 3634 382c 202d 3231 3437 3438 3336  83648, -21474836
-0000c5a0: 3438 5d29 0d0a 0d0a 2020 2020 2020 2020  48])....        
-0000c5b0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-0000c5c0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0000c5d0: 2020 2020 4661 7374 4172 7261 792e 696e      FastArray.in
-0000c5e0: 760d 0a20 2020 2020 2020 2046 6173 7441  v..        FastA
-0000c5f0: 7272 6179 2e66 696c 6c5f 696e 7661 6c69  rray.fill_invali
-0000c600: 640d 0a20 2020 2020 2020 2022 2222 0d0a  d..        """..
-0000c610: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000c620: 656c 662e 5f66 696c 6c5f 696e 7661 6c69  elf._fill_invali
-0000c630: 645f 696e 7465 726e 616c 2873 6861 7065  d_internal(shape
-0000c640: 3d73 6861 7065 2c20 6474 7970 653d 6474  =shape, dtype=dt
-0000c650: 7970 652c 2069 6e70 6c61 6365 3d69 6e70  ype, inplace=inp
-0000c660: 6c61 6365 290d 0a0d 0a20 2020 2064 6566  lace)....    def
-0000c670: 205f 6669 6c6c 5f69 6e76 616c 6964 5f69   _fill_invalid_i
-0000c680: 6e74 6572 6e61 6c28 7365 6c66 2c20 7368  nternal(self, sh
-0000c690: 6170 653d 4e6f 6e65 2c20 6474 7970 653d  ape=None, dtype=
-0000c6a0: 4e6f 6e65 2c20 696e 706c 6163 653d 5472  None, inplace=Tr
-0000c6b0: 7565 2c20 6669 6c6c 5f76 616c 3d4e 6f6e  ue, fill_val=Non
-0000c6c0: 6529 3a0d 0a20 2020 2020 2020 2069 6620  e):..        if 
-0000c6d0: 6474 7970 6520 6973 204e 6f6e 653a 0d0a  dtype is None:..
-0000c6e0: 2020 2020 2020 2020 2020 2020 6474 7970              dtyp
-0000c6f0: 6520 3d20 7365 6c66 2e64 7479 7065 0d0a  e = self.dtype..
-0000c700: 2020 2020 2020 2020 6966 2073 6861 7065          if shape
-0000c710: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0000c720: 2020 2020 2020 2073 6861 7065 203d 2073         shape = s
-0000c730: 656c 662e 7368 6170 650d 0a20 2020 2020  elf.shape..     
-0000c740: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
-0000c750: 7374 616e 6365 2873 6861 7065 2c20 7475  stance(shape, tu
-0000c760: 706c 6529 3a0d 0a20 2020 2020 2020 2020  ple):..         
-0000c770: 2020 2073 6861 7065 203d 2028 7368 6170     shape = (shap
-0000c780: 652c 290d 0a0d 0a20 2020 2020 2020 2069  e,)....        i
-0000c790: 6620 6669 6c6c 5f76 616c 2069 7320 4e6f  f fill_val is No
-0000c7a0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0000c7b0: 2069 6e76 203d 2049 4e56 414c 4944 5f44   inv = INVALID_D
-0000c7c0: 4943 545b 6474 7970 652e 6e75 6d5d 0d0a  ICT[dtype.num]..
-0000c7d0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000c7e0: 2020 2020 2020 2020 2020 2069 6e76 203d             inv =
-0000c7f0: 2066 696c 6c5f 7661 6c0d 0a0d 0a20 2020   fill_val....   
-0000c800: 2020 2020 2069 6620 696e 706c 6163 6520       if inplace 
-0000c810: 6973 2054 7275 653a 0d0a 2020 2020 2020  is True:..      
-0000c820: 2020 2020 2020 6966 2073 6861 7065 2021        if shape !
-0000c830: 3d20 7365 6c66 2e73 6861 7065 3a0d 0a20  = self.shape:.. 
-0000c840: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000c850: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-0000c860: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c870: 2020 2020 2020 6622 496e 706c 6163 6520        f"Inplace 
-0000c880: 6669 6c6c 2069 6e76 616c 6964 2063 616e  fill invalid can
-0000c890: 6e6f 7420 6265 2064 6966 6665 7265 6e74  not be different
-0000c8a0: 206e 756d 6265 7220 6f66 2072 6f77 7320   number of rows 
-0000c8b0: 7468 616e 2065 7869 7374 696e 6720 6172  than existing ar
-0000c8c0: 7261 792e 2047 6f74 207b 7368 6170 657d  ray. Got {shape}
-0000c8d0: 2076 732e 206c 656e 6774 6820 7b6c 656e   vs. length {len
-0000c8e0: 2873 656c 6629 7d22 0d0a 2020 2020 2020  (self)}"..      
-0000c8f0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0000c900: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
-0000c910: 6520 213d 2073 656c 662e 6474 7970 653a  e != self.dtype:
-0000c920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c930: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000c940: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-0000c950: 2020 2020 2020 2020 2066 2249 6e70 6c61           f"Inpla
-0000c960: 6365 2066 696c 6c20 696e 7661 6c69 6420  ce fill invalid 
-0000c970: 6361 6e6e 6f74 2062 6520 6469 6666 6572  cannot be differ
-0000c980: 656e 7420 6474 7970 6520 7468 616e 2065  ent dtype than e
-0000c990: 7869 7374 696e 6720 6361 7465 676f 7269  xisting categori
-0000c9a0: 6361 6c2e 2047 6f74 207b 6474 7970 657d  cal. Got {dtype}
-0000c9b0: 2076 732e 207b 6c65 6e28 7365 6c66 2e64   vs. {len(self.d
-0000c9c0: 7479 7065 297d 220d 0a20 2020 2020 2020  type)}"..       
-0000c9d0: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-0000c9e0: 2020 2020 2020 2020 2020 7365 6c66 2e66            self.f
-0000c9f0: 696c 6c28 696e 7629 0d0a 2020 2020 2020  ill(inv)..      
-0000ca00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0000ca10: 2020 2020 2061 7272 203d 2066 756c 6c28       arr = full(
-0000ca20: 7368 6170 652c 2069 6e76 2c20 6474 7970  shape, inv, dtyp
-0000ca30: 653d 6474 7970 6529 0d0a 2020 2020 2020  e=dtype)..      
-0000ca40: 2020 2020 2020 7265 7475 726e 2061 7272        return arr
-0000ca50: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-0000ca60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ca70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bce0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+0000bcf0: 6620 5f76 6965 775f 696e 7465 726e 616c  f _view_internal
+0000bd00: 2873 656c 662c 2074 7970 653d 4e6f 6e65  (self, type=None
+0000bd10: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+0000bd20: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0000bd30: 6179 2073 7562 636c 6173 7365 7320 6e65  ay subclasses ne
+0000bd40: 6564 2074 6f20 7461 6b65 2074 6869 7320  ed to take this 
+0000bd50: 6f76 6572 2069 6620 7468 6579 2077 616e  over if they wan
+0000bd60: 7420 746f 206d 616b 6520 6120 7368 616c  t to make a shal
+0000bd70: 6c6f 7720 636f 7079 206f 660d 0a20 2020  low copy of..   
+0000bd80: 2020 2020 2061 2066 6173 7461 7272 6179       a fastarray
+0000bd90: 2069 6e73 7465 6164 206f 6620 7669 6577   instead of view
+0000bda0: 696e 6720 7468 656d 7365 6c76 6573 2061  ing themselves a
+0000bdb0: 7320 6120 6661 7374 6172 7261 7920 2877  s a fastarray (w
+0000bdc0: 6869 6368 2064 726f 7073 2074 6865 6972  hich drops their
+0000bdd0: 206f 7468 6572 2070 726f 7065 7274 6965   other propertie
+0000bde0: 7329 2e0d 0a20 2020 2020 2020 2054 616b  s)...        Tak
+0000bdf0: 696e 6720 6f76 6572 2076 6965 7720 6469  ing over view di
+0000be00: 7265 6374 6c79 206d 6179 2068 6176 6520  rectly may have 
+0000be10: 6120 6c6f 7420 6f66 2075 6e69 6e74 656e  a lot of uninten
+0000be20: 6465 6420 636f 6e73 6571 7565 6e63 6573  ded consequences
+0000be30: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
+0000be40: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
+0000be50: 6973 206e 6f74 2046 6173 7441 7272 6179  is not FastArray
+0000be60: 206f 7220 7479 7065 2069 7320 6e6f 7420   or type is not 
+0000be70: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0000be80: 2020 206e 6577 6172 7220 3d20 7365 6c66     newarr = self
+0000be90: 2e76 6965 7728 7479 7065 290d 0a20 2020  .view(type)..   
+0000bea0: 2020 2020 2020 2020 2023 2063 6f70 7920           # copy 
+0000beb0: 616c 6c20 7468 6520 7072 6f70 6572 7469  all the properti
+0000bec0: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+0000bed0: 6e65 7761 7272 2e5f 5f64 6963 745f 5f20  newarr.__dict__ 
+0000bee0: 3d20 7365 6c66 2e5f 5f64 6963 745f 5f2e  = self.__dict__.
+0000bef0: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+0000bf00: 2020 2020 7265 7475 726e 206e 6577 6172      return newar
+0000bf10: 720d 0a20 2020 2020 2020 2072 6574 7572  r..        retur
+0000bf20: 6e20 7365 6c66 2e76 6965 7728 4661 7374  n self.view(Fast
+0000bf30: 4172 7261 7929 0d0a 0d0a 2020 2020 2320  Array)....    # 
+0000bf40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bf50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bf80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+0000bf90: 6465 6620 636f 7079 2873 656c 662c 206f  def copy(self, o
+0000bfa0: 7264 6572 3d22 4b22 2920 2d3e 2046 6173  rder="K") -> Fas
+0000bfb0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+0000bfc0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+0000bfd0: 7475 726e 2061 2063 6f70 7920 6f66 2074  turn a copy of t
+0000bfe0: 6865 2069 6e70 7574 2060 4661 7374 4172  he input `FastAr
+0000bff0: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
+0000c000: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+0000c010: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+0000c020: 0a20 2020 2020 2020 206f 7264 6572 203a  .        order :
+0000c030: 207b 274b 272c 2027 4327 2c20 2746 272c   {'K', 'C', 'F',
+0000c040: 2027 4127 7d2c 2064 6566 6175 6c74 2027   'A'}, default '
+0000c050: 4b27 0d0a 2020 2020 2020 2020 2020 2020  K'..            
+0000c060: 436f 6e74 726f 6c73 2074 6865 206d 656d  Controls the mem
+0000c070: 6f72 7920 6c61 796f 7574 206f 6620 7468  ory layout of th
+0000c080: 6520 636f 7079 3a20 274b 2720 6d65 616e  e copy: 'K' mean
+0000c090: 7320 6d61 7463 6820 7468 6520 6c61 796f  s match the layo
+0000c0a0: 7574 206f 6620 7468 6520 696e 7075 7420  ut of the input 
+0000c0b0: 6172 7261 7920 6173 2063 6c6f 7365 6c79  array as closely
+0000c0c0: 2061 7320 706f 7373 6962 6c65 3b0d 0a20   as possible;.. 
+0000c0d0: 2020 2020 2020 2020 2020 2027 4327 206d             'C' m
+0000c0e0: 6561 6e73 2072 6f77 2d62 6173 6564 2028  eans row-based (
+0000c0f0: 432d 7374 796c 6529 206f 7264 6572 3b20  C-style) order; 
+0000c100: 2746 2720 6d65 616e 7320 636f 6c75 6d6e  'F' means column
+0000c110: 2d62 6173 6564 2028 466f 7274 7261 6e2d  -based (Fortran-
+0000c120: 7374 796c 6529 206f 7264 6572 3b0d 0a20  style) order;.. 
+0000c130: 2020 2020 2020 2020 2020 2027 4127 206d             'A' m
+0000c140: 6561 6e73 2027 4627 2069 6620 7468 6520  eans 'F' if the 
+0000c150: 696e 7075 7420 6172 7261 7920 6973 2066  input array is f
+0000c160: 6f72 6d61 7474 6564 2061 7320 2746 272c  ormatted as 'F',
+0000c170: 2027 4327 2069 6620 6e6f 742e 0d0a 0d0a   'C' if not.....
+0000c180: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+0000c190: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000c1a0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000c1b0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+0000c1c0: 2041 2063 6f70 7920 6f66 2074 6865 2069   A copy of the i
+0000c1d0: 6e70 7574 2060 4661 7374 4172 7261 7960  nput `FastArray`
+0000c1e0: 2e0d 0a0d 0a20 2020 2020 2020 2053 6565  .....        See
+0000c1f0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
+0000c200: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000c210: 202e 4361 7465 676f 7269 6361 6c2e 636f   .Categorical.co
+0000c220: 7079 203a 2052 6574 7572 6e73 2061 2063  py : Returns a c
+0000c230: 6f70 7920 6f66 2074 6865 2069 6e70 7574  opy of the input
+0000c240: 2060 2e43 6174 6567 6f72 6963 616c 602e   `.Categorical`.
+0000c250: 0d0a 2020 2020 2020 2020 2e44 6174 6173  ..        .Datas
+0000c260: 6574 2e63 6f70 7920 3a20 5265 7475 726e  et.copy : Return
+0000c270: 7320 6120 636f 7079 206f 6620 7468 6520  s a copy of the 
+0000c280: 696e 7075 7420 602e 4461 7461 7365 7460  input `.Dataset`
+0000c290: 2e0d 0a20 2020 2020 2020 202e 5374 7275  ...        .Stru
+0000c2a0: 6374 2e63 6f70 7920 3a20 5265 7475 726e  ct.copy : Return
+0000c2b0: 7320 6120 636f 7079 206f 6620 7468 6520  s a copy of the 
+0000c2c0: 696e 7075 7420 602e 5374 7275 6374 602e  input `.Struct`.
+0000c2d0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0000c2e0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+0000c2f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000c300: 436f 7079 2061 2060 4661 7374 4172 7261  Copy a `FastArra
+0000c310: 7960 3a0d 0a0d 0a20 2020 2020 2020 203e  y`:....        >
+0000c320: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
+0000c330: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
+0000c340: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+0000c350: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+0000c360: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
+0000c370: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
+0000c380: 203d 2061 2e63 6f70 7928 290d 0a20 2020   = a.copy()..   
+0000c390: 2020 2020 203e 3e3e 2061 320d 0a20 2020       >>> a2..   
+0000c3a0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+0000c3b0: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+0000c3c0: 0a20 2020 2020 2020 203e 3e3e 2061 3220  .        >>> a2 
+0000c3d0: 6973 2061 0d0a 2020 2020 2020 2020 4661  is a..        Fa
+0000c3e0: 6c73 6520 2023 2054 6865 2063 6f70 7920  lse  # The copy 
+0000c3f0: 6973 2061 2073 6570 6172 6174 6520 6f62  is a separate ob
+0000c400: 6a65 6374 2e0d 0a20 2020 2020 2020 2022  ject...        "
+0000c410: 2222 0d0a 2020 2020 2020 2020 2320 7265  ""..        # re
+0000c420: 7375 6c74 3d20 7375 7065 7228 4661 7374  sult= super(Fast
+0000c430: 4172 7261 792c 2073 656c 6629 2e63 6f70  Array, self).cop
+0000c440: 7928 6f72 6465 7229 0d0a 2020 2020 2020  y(order)..      
+0000c450: 2020 6966 2073 656c 662e 666c 6167 732e    if self.flags.
+0000c460: 665f 636f 6e74 6967 756f 7573 206f 7220  f_contiguous or 
+0000c470: 7365 6c66 2e66 6c61 6773 2e63 5f63 6f6e  self.flags.c_con
+0000c480: 7469 6775 6f75 733a 0d0a 2020 2020 2020  tiguous:..      
+0000c490: 2020 2020 2020 6966 206f 7264 6572 203d        if order =
+0000c4a0: 3d20 224b 2220 616e 6420 7365 6c66 2e64  = "K" and self.d
+0000c4b0: 7479 7065 2e6e 756d 203c 3d20 3133 3a0d  type.num <= 13:.
+0000c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c4d0: 2023 2070 6572 666f 726d 2061 2066 6173   # perform a fas
+0000c4e0: 7465 7220 6d75 6c74 6974 6872 6561 6465  ter multithreade
+0000c4f0: 6420 636f 7079 0d0a 2020 2020 2020 2020  d copy..        
+0000c500: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0000c510: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0000c520: 4c65 6467 6572 2e5f 4153 5f46 415f 5459  Ledger._AS_FA_TY
+0000c530: 5045 2873 656c 662c 2073 656c 662e 6474  PE(self, self.dt
+0000c540: 7970 652e 6e75 6d29 0d0a 0d0a 2020 2020  ype.num)....    
+0000c550: 2020 2020 7265 7375 6c74 203d 2054 7970      result = Typ
+0000c560: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+0000c570: 6467 6572 2e5f 434f 5059 2873 7570 6572  dger._COPY(super
+0000c580: 2846 6173 7441 7272 6179 2c20 7365 6c66  (FastArray, self
+0000c590: 292c 206f 7264 6572 290d 0a20 2020 2020  ), order)..     
+0000c5a0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+0000c5b0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+0000c5c0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0000c5d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c610: 2d2d 2d2d 0d0a 2020 2020 6465 6620 636f  ----..    def co
+0000c620: 7079 5f69 6e76 616c 6964 2873 656c 6629  py_invalid(self)
+0000c630: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+0000c640: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000c650: 2020 2020 204d 616b 6573 2061 2063 6f70       Makes a cop
+0000c660: 7920 6f66 2074 6865 2061 7272 6179 2066  y of the array f
+0000c670: 696c 6c65 6420 7769 7468 2069 6e76 616c  illed with inval
+0000c680: 6964 732e 0d0a 0d0a 2020 2020 2020 2020  ids.....        
+0000c690: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0000c6a0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0000c6b0: 2020 2020 3e3e 3e20 7274 2e61 7261 6e67      >>> rt.arang
+0000c6c0: 6528 3529 2e63 6f70 795f 696e 7661 6c69  e(5).copy_invali
+0000c6d0: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
+0000c6e0: 7441 7272 6179 285b 2d32 3134 3734 3833  tArray([-2147483
+0000c6f0: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
+0000c700: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
+0000c710: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
+0000c720: 3734 3833 3634 385d 290d 0a0d 0a20 2020  7483648])....   
+0000c730: 2020 2020 203e 3e3e 2072 742e 6172 616e       >>> rt.aran
+0000c740: 6765 2835 292e 636f 7079 5f69 6e76 616c  ge(5).copy_inval
+0000c750: 6964 2829 2e61 7374 7970 6528 6e70 2e66  id().astype(np.f
+0000c760: 6c6f 6174 3332 290d 0a20 2020 2020 2020  loat32)..       
+0000c770: 2046 6173 7441 7272 6179 285b 6e61 6e2c   FastArray([nan,
+0000c780: 206e 616e 2c20 6e61 6e2c 206e 616e 2c20   nan, nan, nan, 
+0000c790: 6e61 6e5d 2c20 6474 7970 653d 666c 6f61  nan], dtype=floa
+0000c7a0: 7433 3229 0d0a 0d0a 2020 2020 2020 2020  t32)....        
+0000c7b0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+0000c7c0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0000c7d0: 2020 2020 4661 7374 4172 7261 792e 696e      FastArray.in
+0000c7e0: 760d 0a20 2020 2020 2020 2046 6173 7441  v..        FastA
+0000c7f0: 7272 6179 2e66 696c 6c5f 696e 7661 6c69  rray.fill_invali
+0000c800: 640d 0a20 2020 2020 2020 2022 2222 0d0a  d..        """..
+0000c810: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000c820: 656c 662e 6669 6c6c 5f69 6e76 616c 6964  elf.fill_invalid
+0000c830: 2869 6e70 6c61 6365 3d46 616c 7365 290d  (inplace=False).
+0000c840: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0000c850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c890: 2d2d 2d0d 0a20 2020 2040 7072 6f70 6572  ---..    @proper
+0000c8a0: 7479 0d0a 2020 2020 6465 6620 696e 7628  ty..    def inv(
+0000c8b0: 7365 6c66 2920 2d3e 206e 702e 6e75 6d62  self) -> np.numb
+0000c8c0: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
+0000c8d0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000c8e0: 7320 7468 6520 696e 7661 6c69 6420 7661  s the invalid va
+0000c8f0: 6c75 6520 666f 7220 7468 6520 6172 7261  lue for the arra
+0000c900: 792e 0d0a 2020 2020 2020 2020 6e70 2e69  y...        np.i
+0000c910: 6e74 383a 202d 3132 380d 0a20 2020 2020  nt8: -128..     
+0000c920: 2020 206e 702e 7569 6e74 383a 2032 3535     np.uint8: 255
+0000c930: 0d0a 2020 2020 2020 2020 6e70 2e69 6e74  ..        np.int
+0000c940: 3136 3a20 2d33 3237 3638 0d0a 2020 2020  16: -32768..    
+0000c950: 2020 2020 2e2e 2e61 6e64 2073 6f20 6f6e      ...and so on
+0000c960: 2e2e 0d0a 0d0a 2020 2020 2020 2020 4578  ......        Ex
+0000c970: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0000c980: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0000c990: 2020 3e3e 3e20 7274 2e61 7261 6e67 6528    >>> rt.arange(
+0000c9a0: 3529 2e69 6e76 0d0a 2020 2020 2020 2020  5).inv..        
+0000c9b0: 2d32 3134 3734 3833 3634 380d 0a0d 0a20  -2147483648.... 
+0000c9c0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+0000c9d0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000c9e0: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+0000c9f0: 7272 6179 2e63 6f70 795f 696e 7661 6c69  rray.copy_invali
+0000ca00: 640d 0a20 2020 2020 2020 2046 6173 7441  d..        FastA
+0000ca10: 7272 6179 2e66 696c 6c5f 696e 7661 6c69  rray.fill_invali
+0000ca20: 640d 0a20 2020 2020 2020 2049 4e56 414c  d..        INVAL
+0000ca30: 4944 5f44 4943 540d 0a20 2020 2020 2020  ID_DICT..       
+0000ca40: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+0000ca50: 7475 726e 2049 4e56 414c 4944 5f44 4943  turn INVALID_DIC
+0000ca60: 545b 7365 6c66 2e64 7479 7065 2e6e 756d  T[self.dtype.num
+0000ca70: 5d0d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  ]....    # -----
 0000ca80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000ca90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000caa0: 2d2d 2d0d 0a20 2020 2064 6566 2069 7369  ---..    def isi
-0000cab0: 6e28 7365 6c66 2c20 7465 7374 5f65 6c65  n(self, test_ele
-0000cac0: 6d65 6e74 732c 2061 7373 756d 655f 756e  ments, assume_un
-0000cad0: 6971 7565 3d46 616c 7365 2c20 696e 7665  ique=False, inve
-0000cae0: 7274 3d46 616c 7365 2920 2d3e 2046 6173  rt=False) -> Fas
-0000caf0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-0000cb00: 2022 2222 0d0a 2020 2020 2020 2020 4361   """..        Ca
-0000cb10: 6c63 756c 6174 6573 2060 7365 6c66 2069  lculates `self i
-0000cb20: 6e20 7465 7374 5f65 6c65 6d65 6e74 7360  n test_elements`
-0000cb30: 2c20 6272 6f61 6463 6173 7469 6e67 206f  , broadcasting o
-0000cb40: 7665 7220 6073 656c 6660 206f 6e6c 792e  ver `self` only.
-0000cb50: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0000cb60: 7320 6120 626f 6f6c 6561 6e20 6172 7261  s a boolean arra
-0000cb70: 7920 6f66 2074 6865 2073 616d 6520 7368  y of the same sh
-0000cb80: 6170 6520 6173 2060 7365 6c66 6020 7468  ape as `self` th
-0000cb90: 6174 2069 7320 5472 7565 0d0a 2020 2020  at is True..    
-0000cba0: 2020 2020 7768 6572 6520 616e 2065 6c65      where an ele
-0000cbb0: 6d65 6e74 206f 6620 6073 656c 6660 2069  ment of `self` i
-0000cbc0: 7320 696e 2060 7465 7374 5f65 6c65 6d65  s in `test_eleme
-0000cbd0: 6e74 7360 2061 6e64 2046 616c 7365 206f  nts` and False o
-0000cbe0: 7468 6572 7769 7365 2e0d 0a0d 0a20 2020  therwise.....   
-0000cbf0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-0000cc00: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000cc10: 2d2d 2d0d 0a20 2020 2020 2020 2074 6573  ---..        tes
-0000cc20: 745f 656c 656d 656e 7473 203a 2061 7272  t_elements : arr
-0000cc30: 6179 5f6c 696b 650d 0a20 2020 2020 2020  ay_like..       
-0000cc40: 2020 2020 2054 6865 2076 616c 7565 7320       The values 
-0000cc50: 6167 6169 6e73 7420 7768 6963 6820 746f  against which to
-0000cc60: 2074 6573 7420 6561 6368 2076 616c 7565   test each value
-0000cc70: 206f 6620 6065 6c65 6d65 6e74 602e 0d0a   of `element`...
-0000cc80: 2020 2020 2020 2020 2020 2020 5468 6973              This
-0000cc90: 2061 7267 756d 656e 7420 6973 2066 6c61   argument is fla
-0000cca0: 7474 656e 6564 2069 6620 6974 2069 7320  ttened if it is 
-0000ccb0: 616e 2061 7272 6179 206f 7220 6172 7261  an array or arra
-0000ccc0: 795f 6c69 6b65 2e0d 0a20 2020 2020 2020  y_like...       
-0000ccd0: 2020 2020 2053 6565 206e 6f74 6573 2066       See notes f
-0000cce0: 6f72 2062 6568 6176 696f 7220 7769 7468  or behavior with
-0000ccf0: 206e 6f6e 2d61 7272 6179 2d6c 696b 6520   non-array-like 
-0000cd00: 7061 7261 6d65 7465 7273 2e0d 0a20 2020  parameters...   
-0000cd10: 2020 2020 2061 7373 756d 655f 756e 6971       assume_uniq
-0000cd20: 7565 203a 2062 6f6f 6c2c 206f 7074 696f  ue : bool, optio
-0000cd30: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-0000cd40: 2049 6620 5472 7565 2c20 7468 6520 696e   If True, the in
-0000cd50: 7075 7420 6172 7261 7973 2061 7265 2062  put arrays are b
-0000cd60: 6f74 6820 6173 7375 6d65 6420 746f 2062  oth assumed to b
-0000cd70: 6520 756e 6971 7565 2c20 7768 6963 680d  e unique, which.
-0000cd80: 0a20 2020 2020 2020 2020 2020 2063 616e  .            can
-0000cd90: 2073 7065 6564 2075 7020 7468 6520 6361   speed up the ca
-0000cda0: 6c63 756c 6174 696f 6e2e 2020 4465 6661  lculation.  Defa
-0000cdb0: 756c 7420 6973 2046 616c 7365 2e0d 0a20  ult is False... 
-0000cdc0: 2020 2020 2020 2069 6e76 6572 7420 3a20         invert : 
-0000cdd0: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0d0a  bool, optional..
-0000cde0: 2020 2020 2020 2020 2020 2020 4966 2054              If T
-0000cdf0: 7275 652c 2074 6865 2076 616c 7565 7320  rue, the values 
-0000ce00: 696e 2074 6865 2072 6574 7572 6e65 6420  in the returned 
-0000ce10: 6172 7261 7920 6172 6520 696e 7665 7274  array are invert
-0000ce20: 6564 2c20 6173 2069 660d 0a20 2020 2020  ed, as if..     
-0000ce30: 2020 2020 2020 2063 616c 6375 6c61 7469         calculati
-0000ce40: 6e67 2060 656c 656d 656e 7420 6e6f 7420  ng `element not 
-0000ce50: 696e 2074 6573 745f 656c 656d 656e 7473  in test_elements
-0000ce60: 602e 2044 6566 6175 6c74 2069 7320 4661  `. Default is Fa
-0000ce70: 6c73 652e 0d0a 2020 2020 2020 2020 2020  lse...          
-0000ce80: 2020 6060 6e70 2e69 7369 6e28 612c 2062    ``np.isin(a, b
-0000ce90: 2c20 696e 7665 7274 3d54 7275 6529 6060  , invert=True)``
-0000cea0: 2069 7320 6571 7569 7661 6c65 6e74 2074   is equivalent t
-0000ceb0: 6f20 2862 7574 2066 6173 7465 720d 0a20  o (but faster.. 
-0000cec0: 2020 2020 2020 2020 2020 2074 6861 6e29             than)
-0000ced0: 2060 606e 702e 696e 7665 7274 286e 702e   ``np.invert(np.
-0000cee0: 6973 696e 2861 2c20 6229 2960 602e 0d0a  isin(a, b))``...
-0000cef0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0000cf00: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0000cf10: 2d2d 0d0a 2020 2020 2020 2020 6973 696e  --..        isin
-0000cf20: 203a 206e 6461 7272 6179 2c20 626f 6f6c   : ndarray, bool
-0000cf30: 0d0a 2020 2020 2020 2020 2020 2020 4861  ..            Ha
-0000cf40: 7320 7468 6520 7361 6d65 2073 6861 7065  s the same shape
-0000cf50: 2061 7320 6065 6c65 6d65 6e74 602e 2054   as `element`. T
-0000cf60: 6865 2076 616c 7565 7320 6065 6c65 6d65  he values `eleme
-0000cf70: 6e74 5b69 7369 6e5d 600d 0a20 2020 2020  nt[isin]`..     
-0000cf80: 2020 2020 2020 2061 7265 2069 6e20 6074         are in `t
-0000cf90: 6573 745f 656c 656d 656e 7473 602e 0d0a  est_elements`...
-0000cfa0: 0d0a 2020 2020 2020 2020 4e6f 7465 3a20  ..        Note: 
-0000cfb0: 6265 6861 7669 6f72 2064 6966 6665 7273  behavior differs
-0000cfc0: 2066 726f 6d20 7061 6e64 6173 0d0a 2020   from pandas..  
-0000cfd0: 2020 2020 2020 2d20 5269 7074 6162 6c65        - Riptable
-0000cfe0: 2066 6176 6f72 7320 6279 7465 7374 7269   favors bytestri
-0000cff0: 6e67 732c 2061 6e64 2077 696c 6c20 6d61  ngs, and will ma
-0000d000: 6b65 2063 6f6e 7665 7273 696f 6e73 2066  ke conversions f
-0000d010: 726f 6d20 756e 6963 6f64 652f 6279 7465  rom unicode/byte
-0000d020: 7320 746f 206d 6174 6368 2066 6f72 206f  s to match for o
-0000d030: 7065 7261 7469 6f6e 7320 6173 206e 6563  perations as nec
-0000d040: 6573 7361 7279 2e0d 0a20 2020 2020 2020  essary...       
-0000d050: 202d 2057 6520 7769 6c6c 2061 6c73 6f20   - We will also 
-0000d060: 6163 6365 7074 2073 696e 676c 6520 7363  accept single sc
-0000d070: 616c 6172 7320 666f 7220 7661 6c75 6573  alars for values
-0000d080: 2e0d 0a20 2020 2020 2020 202d 2050 616e  ...        - Pan
-0000d090: 6461 7320 7365 7269 6573 2077 696c 6c20  das series will 
-0000d0a0: 7265 7475 726e 2061 6e6f 7468 6572 2073  return another s
-0000d0b0: 6572 6965 7320 2d20 7765 2068 6176 6520  eries - we have 
-0000d0c0: 6e6f 2073 6572 6965 732c 2061 6e64 2077  no series, and w
-0000d0d0: 696c 6c20 7265 7475 726e 2061 2046 6173  ill return a Fas
-0000d0e0: 7441 7272 6179 0d0a 0d0a 2020 2020 2020  tArray....      
-0000d0f0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-0000d100: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0000d110: 2020 2020 2020 3e3e 3e20 6672 6f6d 2072        >>> from r
-0000d120: 6970 7461 626c 6520 696d 706f 7274 202a  iptable import *
-0000d130: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-0000d140: 3d20 4641 285b 2761 272c 2762 272c 2763  = FA(['a','b','c
-0000d150: 272c 2764 272c 2765 275d 2c20 756e 6963  ','d','e'], unic
-0000d160: 6f64 653d 4661 6c73 6529 0d0a 2020 2020  ode=False)..    
-0000d170: 2020 2020 3e3e 3e20 612e 6973 696e 285b      >>> a.isin([
-0000d180: 2761 272c 2762 275d 290d 0a20 2020 2020  'a','b'])..     
-0000d190: 2020 2046 6173 7441 7272 6179 285b 2054     FastArray([ T
-0000d1a0: 7275 652c 2020 5472 7565 2c20 4661 6c73  rue,  True, Fals
-0000d1b0: 652c 2046 616c 7365 2c20 4661 6c73 655d  e, False, False]
-0000d1c0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0000d1d0: 2e69 7369 6e28 2761 2729 0d0a 2020 2020  .isin('a')..    
-0000d1e0: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
-0000d1f0: 5472 7565 2c20 2046 616c 7365 2c20 4661  True,  False, Fa
-0000d200: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
-0000d210: 655d 290d 0a20 2020 2020 2020 203e 3e3e  e])..        >>>
-0000d220: 2061 2e69 7369 6e28 7b27 6227 7d29 0d0a   a.isin({'b'})..
-0000d230: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000d240: 7928 5b20 4661 6c73 652c 2054 7275 652c  y([ False, True,
-0000d250: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-0000d260: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
-0000d270: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-0000d280: 6973 696e 7374 616e 6365 2874 6573 745f  isinstance(test_
-0000d290: 656c 656d 656e 7473 2c20 7365 7429 3a0d  elements, set):.
-0000d2a0: 0a20 2020 2020 2020 2020 2020 2074 6573  .            tes
-0000d2b0: 745f 656c 656d 656e 7473 203d 206c 6973  t_elements = lis
-0000d2c0: 7428 7465 7374 5f65 6c65 6d65 6e74 7329  t(test_elements)
-0000d2d0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
-0000d2e0: 6f74 2069 7369 6e73 7461 6e63 6528 7465  ot isinstance(te
-0000d2f0: 7374 5f65 6c65 6d65 6e74 732c 206e 702e  st_elements, np.
-0000d300: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
-0000d310: 2020 2020 2020 2023 2061 6c69 676e 2062         # align b
-0000d320: 7974 6520 7374 7269 6e67 2076 7320 756e  yte string vs un
-0000d330: 6963 6f64 650d 0a20 2020 2020 2020 2020  icode..         
-0000d340: 2020 2069 6620 7365 6c66 2e64 7479 7065     if self.dtype
-0000d350: 2e63 6861 7220 696e 2022 5355 223a 0d0a  .char in "SU":..
-0000d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d370: 6966 206e 702e 6973 7363 616c 6172 2874  if np.isscalar(t
-0000d380: 6573 745f 656c 656d 656e 7473 293a 0d0a  est_elements):..
-0000d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d3a0: 2020 2020 7465 7374 5f65 6c65 6d65 6e74      test_element
-0000d3b0: 7320 3d20 6e70 2e61 7361 7272 6179 285b  s = np.asarray([
-0000d3c0: 7465 7374 5f65 6c65 6d65 6e74 735d 2c20  test_elements], 
-0000d3d0: 6474 7970 653d 7365 6c66 2e64 7479 7065  dtype=self.dtype
-0000d3e0: 2e63 6861 7229 0d0a 2020 2020 2020 2020  .char)..        
-0000d3f0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000d400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d410: 2020 2074 6573 745f 656c 656d 656e 7473     test_elements
-0000d420: 203d 206e 702e 6173 6172 7261 7928 7465   = np.asarray(te
-0000d430: 7374 5f65 6c65 6d65 6e74 732c 2064 7479  st_elements, dty
-0000d440: 7065 3d73 656c 662e 6474 7970 652e 6368  pe=self.dtype.ch
-0000d450: 6172 290d 0a20 2020 2020 2020 2020 2020  ar)..           
-0000d460: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0000d470: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000d480: 7461 6e63 6528 7465 7374 5f65 6c65 6d65  tance(test_eleme
-0000d490: 6e74 732c 2074 7570 6c65 293a 0d0a 2020  nts, tuple):..  
-0000d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d4b0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000d4c0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-0000d4d0: 2020 2020 2020 2020 2020 2020 2022 6973               "is
-0000d4e0: 696e 2064 6f65 7320 6e6f 7420 6375 7272  in does not curr
-0000d4f0: 656e 746c 7920 7375 7070 6f72 7420 7475  ently support tu
-0000d500: 706c 6573 2e20 2049 6e20 7468 6520 6675  ples.  In the fu
-0000d510: 7475 7265 2061 2074 7570 6c65 2077 696c  ture a tuple wil
-0000d520: 6c20 6265 2075 7365 6420 746f 2072 6570  l be used to rep
-0000d530: 7265 7365 6e74 2061 206d 756c 7469 2d6b  resent a multi-k
-0000d540: 6579 2e22 0d0a 2020 2020 2020 2020 2020  ey."..          
-0000d550: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0000d560: 2020 2020 2020 2020 2020 2020 2074 6573               tes
-0000d570: 745f 656c 656d 656e 7473 203d 2072 632e  t_elements = rc.
-0000d580: 4173 4661 7374 4172 7261 7928 7465 7374  AsFastArray(test
-0000d590: 5f65 6c65 6d65 6e74 7329 0d0a 0d0a 2020  _elements)....  
-0000d5a0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-0000d5b0: 2020 2020 2020 2020 2320 6f70 7469 6d69          # optimi
-0000d5c0: 7a61 7469 6f6e 3a20 6966 2077 6520 6861  zation: if we ha
-0000d5d0: 7665 206a 7573 7420 6f6e 6520 656c 656d  ve just one elem
-0000d5e0: 656e 742c 2077 6520 6361 6e20 6a75 7374  ent, we can just
-0000d5f0: 2070 6172 616c 6c65 6c20 636f 6d70 6172   parallel compar
-0000d600: 6520 7468 6174 206f 6e65 2065 6c65 6d65  e that one eleme
-0000d610: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
-0000d620: 6966 206c 656e 2874 6573 745f 656c 656d  if len(test_elem
-0000d630: 656e 7473 2920 3d3d 2031 3a0d 0a20 2020  ents) == 1:..   
-0000d640: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0000d650: 7472 696e 6720 636f 6d70 6172 6973 6f6e  tring comparison
-0000d660: 2074 6f20 696e 7420 7769 6c6c 2066 6169   to int will fai
-0000d670: 6c0d 0a20 2020 2020 2020 2020 2020 2020  l..             
-0000d680: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-0000d690: 203d 3d20 7465 7374 5f65 6c65 6d65 6e74   == test_element
-0000d6a0: 735b 305d 0d0a 2020 2020 2020 2020 2020  s[0]..          
-0000d6b0: 2020 2020 2020 2320 6368 6563 6b20 666f        # check fo
-0000d6c0: 7220 6661 696c 6564 2072 6573 756c 740d  r failed result.
-0000d6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d6e0: 2069 6620 6e70 2e69 7373 6361 6c61 7228   if np.isscalar(
-0000d6f0: 7265 7375 6c74 293a 0d0a 2020 2020 2020  result):..      
-0000d700: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000d710: 7375 6c74 203d 2069 736d 656d 6265 7228  sult = ismember(
-0000d720: 7365 6c66 2c20 7465 7374 5f65 6c65 6d65  self, test_eleme
-0000d730: 6e74 7329 5b30 5d0d 0a20 2020 2020 2020  nts)[0]..       
-0000d740: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0000d750: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0000d760: 6c74 203d 2069 736d 656d 6265 7228 7365  lt = ismember(se
-0000d770: 6c66 2c20 7465 7374 5f65 6c65 6d65 6e74  lf, test_element
-0000d780: 7329 5b30 5d0d 0a20 2020 2020 2020 2020  s)[0]..         
-0000d790: 2020 2069 6620 696e 7665 7274 3a0d 0a20     if invert:.. 
-0000d7a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0000d7b0: 702e 6c6f 6769 6361 6c5f 6e6f 7428 7265  p.logical_not(re
-0000d7c0: 7375 6c74 2c20 6f75 743d 7265 7375 6c74  sult, out=result
-0000d7d0: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-0000d7e0: 6574 7572 6e20 7265 7375 6c74 0d0a 2020  eturn result..  
-0000d7f0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-0000d800: 6570 7469 6f6e 3a0d 0a20 2020 2020 2020  eption:..       
-0000d810: 2020 2020 2023 2070 756e 7420 6e6f 6e2d       # punt non-
-0000d820: 7375 7070 6f72 7465 6420 7479 7065 7320  supported types 
-0000d830: 746f 206e 756d 7079 0d0a 2020 2020 2020  to numpy..      
-0000d840: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-0000d850: 6973 696e 2873 656c 662e 5f6e 702c 2074  isin(self._np, t
-0000d860: 6573 745f 656c 656d 656e 7473 2c20 6173  est_elements, as
-0000d870: 7375 6d65 5f75 6e69 7175 653d 6173 7375  sume_unique=assu
-0000d880: 6d65 5f75 6e69 7175 652c 2069 6e76 6572  me_unique, inver
-0000d890: 743d 696e 7665 7274 290d 0a0d 0a20 2020  t=invert)....   
-0000d8a0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-0000d8b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d8c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d8d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d8e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0000d8f0: 2020 6465 6620 6265 7477 6565 6e28 7365    def between(se
-0000d900: 6c66 2c20 6c6f 772c 2068 6967 682c 2069  lf, low, high, i
-0000d910: 6e63 6c75 6465 5f6c 6f77 3a20 626f 6f6c  nclude_low: bool
-0000d920: 203d 2054 7275 652c 2069 6e63 6c75 6465   = True, include
-0000d930: 5f68 6967 683a 2062 6f6f 6c20 3d20 4661  _high: bool = Fa
-0000d940: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
-0000d950: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
-0000d960: 0a20 2020 2020 2020 2044 6574 6572 6d69  .        Determi
-0000d970: 6e65 2077 6869 6368 2065 6c65 6d65 6e74  ne which element
-0000d980: 7320 6f66 2074 6865 2061 7272 6179 2061  s of the array a
-0000d990: 7265 2069 6e20 6120 6120 6769 7665 6e20  re in a a given 
-0000d9a0: 696e 7465 7276 616c 2e0d 0a0d 0a20 2020  interval.....   
-0000d9b0: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-0000d9c0: 6f6c 6561 6e20 6d61 736b 2069 6e64 6963  olean mask indic
-0000d9d0: 6174 696e 6720 7768 6963 6820 656c 656d  ating which elem
-0000d9e0: 656e 7473 2061 7265 2062 6574 7765 656e  ents are between
-0000d9f0: 2060 6c6f 7760 2061 6e64 2060 6869 6768   `low` and `high
-0000da00: 6020 2869 6e63 6c75 6469 6e67 2f65 7863  ` (including/exc
-0000da10: 6c75 6469 6e67 2065 6e64 706f 696e 7473  luding endpoints
-0000da20: 0d0a 2020 2020 2020 2020 6361 6e20 6265  ..        can be
-0000da30: 2063 6f6e 7472 6f6c 6c65 6420 6279 2074   controlled by t
-0000da40: 6865 2060 696e 636c 7564 655f 6c6f 7760  he `include_low`
-0000da50: 2061 6e64 2060 696e 636c 7564 655f 6869   and `include_hi
-0000da60: 6768 6020 6172 6775 6d65 6e74 7329 2e0d  gh` arguments)..
-0000da70: 0a0d 0a20 2020 2020 2020 2044 6566 6175  ...        Defau
-0000da80: 6c74 2062 6568 6176 696f 7572 2069 7320  lt behaviour is 
-0000da90: 6571 7569 7661 6c65 6e74 2074 6f20 2873  equivalent to (s
-0000daa0: 656c 6620 3e3d 206c 6f77 2920 2620 2873  elf >= low) & (s
-0000dab0: 656c 6620 3c20 6869 6768 292e 0d0a 0d0a  elf < high).....
-0000dac0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-0000dad0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-0000dae0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000daf0: 6c6f 773a 2073 6361 6c61 722c 2061 7272  low: scalar, arr
-0000db00: 6179 5f6c 696b 650d 0a20 2020 2020 2020  ay_like..       
-0000db10: 2020 2020 204c 6f77 6572 2062 6f75 6e64       Lower bound
-0000db20: 2066 6f72 2074 6573 7420 696e 7465 7276   for test interv
-0000db30: 616c 2e20 2049 6620 6172 7261 792c 2073  al.  If array, s
-0000db40: 686f 756c 6420 6861 7665 2074 6865 2073  hould have the s
-0000db50: 616d 6520 7369 7a65 2061 7320 6073 656c  ame size as `sel
-0000db60: 6660 2061 6e64 2063 6f6d 7061 7269 736f  f` and compariso
-0000db70: 6e73 2061 7265 2064 6f6e 6520 656c 656d  ns are done elem
-0000db80: 656e 7477 6973 652e 0d0a 2020 2020 2020  entwise...      
-0000db90: 2020 6869 6768 3a20 7363 616c 6172 2c20    high: scalar, 
-0000dba0: 6172 7261 795f 6c69 6b65 0d0a 2020 2020  array_like..    
-0000dbb0: 2020 2020 2020 2020 5570 7065 7220 626f          Upper bo
-0000dbc0: 756e 6420 666f 7220 7465 7374 2069 6e74  und for test int
-0000dbd0: 6572 7661 6c2e 2020 4966 2061 7272 6179  erval.  If array
-0000dbe0: 2c20 7368 6f75 6c64 2068 6176 6520 7468  , should have th
-0000dbf0: 6520 7361 6d65 2073 697a 6520 6173 2060  e same size as `
-0000dc00: 7365 6c66 6020 616e 6420 636f 6d70 6172  self` and compar
-0000dc10: 6973 6f6e 7320 6172 6520 646f 6e65 2065  isons are done e
-0000dc20: 6c65 6d65 6e74 7769 7365 2e0d 0a20 2020  lementwise...   
-0000dc30: 2020 2020 2069 6e63 6c75 6465 5f6c 6f77       include_low
-0000dc40: 3a20 626f 6f6c 0d0a 2020 2020 2020 2020  : bool..        
-0000dc50: 2020 2020 5368 6f75 6c64 2074 6865 206c      Should the l
-0000dc60: 6566 7420 656e 6470 6f69 6e74 2069 6e63  eft endpoint inc
-0000dc70: 6c75 6465 6420 696e 2074 6865 2074 6573  luded in the tes
-0000dc80: 7420 696e 7465 7276 616c 0d0a 2020 2020  t interval..    
-0000dc90: 2020 2020 696e 636c 7564 655f 6869 6768      include_high
-0000dca0: 3a20 626f 6f6c 0d0a 2020 2020 2020 2020  : bool..        
-0000dcb0: 2020 2020 5368 6f75 6c64 2074 6865 2072      Should the r
-0000dcc0: 6967 6874 2065 6e64 706f 696e 7420 696e  ight endpoint in
-0000dcd0: 636c 7564 6564 2069 6e20 7468 6520 7465  cluded in the te
-0000dce0: 7374 2069 6e74 6572 7661 6c0d 0a0d 0a20  st interval.... 
-0000dcf0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-0000dd00: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-0000dd10: 0a20 2020 2020 2020 2061 7272 6179 5f6c  .        array_l
-0000dd20: 696b 655b 626f 6f6c 5d0d 0a20 2020 2020  ike[bool]..     
-0000dd30: 2020 2020 2020 2041 6e20 626f 6f6c 6561         An boolea
-0000dd40: 6e20 6d61 736b 2069 6e64 6963 6174 696e  n mask indicatin
-0000dd50: 6720 6966 2074 6865 2061 7373 6f63 6961  g if the associa
-0000dd60: 7465 6420 656c 656d 656e 7473 2061 7265  ted elements are
-0000dd70: 2069 6e20 7468 6520 7465 7374 2069 6e74   in the test int
-0000dd80: 6572 7661 6c0d 0a20 2020 2020 2020 2022  erval..        "
-0000dd90: 2222 0d0a 2020 2020 2020 2020 6c6f 7720  ""..        low 
-0000dda0: 3d20 6173 616e 7961 7272 6179 286c 6f77  = asanyarray(low
-0000ddb0: 290d 0a20 2020 2020 2020 2068 6967 6820  )..        high 
-0000ddc0: 3d20 6173 616e 7961 7272 6179 2868 6967  = asanyarray(hig
-0000ddd0: 6829 0d0a 0d0a 2020 2020 2020 2020 6966  h)....        if
-0000dde0: 2069 6e63 6c75 6465 5f6c 6f77 3a0d 0a20   include_low:.. 
-0000ddf0: 2020 2020 2020 2020 2020 2072 6574 203d             ret =
-0000de00: 2073 656c 6620 3e3d 206c 6f77 0d0a 2020   self >= low..  
-0000de10: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0000de20: 2020 2020 2020 2020 2072 6574 203d 2073           ret = s
-0000de30: 656c 6620 3e20 6c6f 770d 0a20 2020 2020  elf > low..     
-0000de40: 2020 2069 6620 696e 636c 7564 655f 6869     if include_hi
-0000de50: 6768 3a0d 0a20 2020 2020 2020 2020 2020  gh:..           
-0000de60: 2072 6574 2026 3d20 7365 6c66 203c 3d20   ret &= self <= 
-0000de70: 6869 6768 0d0a 2020 2020 2020 2020 656c  high..        el
-0000de80: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0000de90: 2072 6574 2026 3d20 7365 6c66 203c 2068   ret &= self < h
-0000dea0: 6967 680d 0a20 2020 2020 2020 2072 6574  igh..        ret
-0000deb0: 7572 6e20 7265 740d 0a0d 0a20 2020 2023  urn ret....    #
-0000dec0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-0000ded0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000def0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000df00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0000df10: 2064 6566 2073 616d 706c 6528 0d0a 2020   def sample(..  
-0000df20: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
-0000df30: 2020 2020 204e 3a20 696e 7420 3d20 3130       N: int = 10
-0000df40: 2c0d 0a20 2020 2020 2020 2066 696c 7465  ,..        filte
-0000df50: 723a 204f 7074 696f 6e61 6c5b 6e70 2e6e  r: Optional[np.n
-0000df60: 6461 7272 6179 5d20 3d20 4e6f 6e65 2c0d  darray] = None,.
-0000df70: 0a20 2020 2020 2020 2073 6565 643a 204f  .        seed: O
-0000df80: 7074 696f 6e61 6c5b 556e 696f 6e5b 696e  ptional[Union[in
-0000df90: 742c 2053 6571 7565 6e63 655b 696e 745d  t, Sequence[int]
-0000dfa0: 2c20 6e70 2e72 616e 646f 6d2e 5365 6564  , np.random.Seed
-0000dfb0: 5365 7175 656e 6365 2c20 6e70 2e72 616e  Sequence, np.ran
-0000dfc0: 646f 6d2e 4765 6e65 7261 746f 725d 5d20  dom.Generator]] 
-0000dfd0: 3d20 4e6f 6e65 2c0d 0a20 2020 2029 202d  = None,..    ) -
-0000dfe0: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-0000dff0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000e000: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-0000e010: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-0000e020: 2020 2020 2020 203e 3e3e 2061 3d72 742e         >>> a=rt.
-0000e030: 6172 616e 6765 2831 3029 0d0a 2020 2020  arange(10)..    
-0000e040: 2020 2020 3e3e 3e20 612e 7361 6d70 6c65      >>> a.sample
-0000e050: 2833 290d 0a20 2020 2020 2020 2046 6173  (3)..        Fas
-0000e060: 7441 7272 6179 285b 302c 2034 2c20 395d  tArray([0, 4, 9]
-0000e070: 290d 0a20 2020 2020 2020 2022 2222 0d0a  )..        """..
-0000e080: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000e090: 616d 706c 6528 7365 6c66 2c20 4e3d 4e2c  ample(self, N=N,
-0000e0a0: 2066 696c 7465 723d 6669 6c74 6572 2c20   filter=filter, 
-0000e0b0: 7365 6564 3d73 6565 6429 0d0a 0d0a 2020  seed=seed)....  
-0000e0c0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-0000e0d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e0e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e0f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000e110: 2020 2020 6465 6620 6475 706c 6963 6174      def duplicat
-0000e120: 6564 2873 656c 662c 206b 6565 703d 2266  ed(self, keep="f
-0000e130: 6972 7374 222c 2068 6967 685f 756e 6971  irst", high_uniq
-0000e140: 7565 3d46 616c 7365 2920 2d3e 2046 6173  ue=False) -> Fas
-0000e150: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-0000e160: 2022 2222 0d0a 2020 2020 2020 2020 5365   """..        Se
-0000e170: 6520 7061 6e64 6173 2e53 6572 6965 732e  e pandas.Series.
-0000e180: 6475 706c 6963 6174 6564 0d0a 0d0a 2020  duplicated....  
-0000e190: 2020 2020 2020 4475 706c 6963 6174 6564        Duplicated
-0000e1a0: 2076 616c 7565 7320 6172 6520 696e 6469   values are indi
-0000e1b0: 6361 7465 6420 6173 2054 7275 6520 7661  cated as True va
-0000e1c0: 6c75 6573 2069 6e20 7468 6520 7265 7375  lues in the resu
-0000e1d0: 6c74 696e 670d 0a20 2020 2020 2020 2046  lting..        F
-0000e1e0: 6173 7441 7272 6179 2e20 4569 7468 6572  astArray. Either
-0000e1f0: 2061 6c6c 2064 7570 6c69 6361 7465 732c   all duplicates,
-0000e200: 2061 6c6c 2065 7863 6570 7420 7468 6520   all except the 
-0000e210: 6669 7273 7420 6f72 2061 6c6c 2065 7863  first or all exc
-0000e220: 6570 7420 7468 650d 0a20 2020 2020 2020  ept the..       
-0000e230: 206c 6173 7420 6f63 6375 7272 656e 6365   last occurrence
-0000e240: 206f 6620 6475 706c 6963 6174 6573 2063   of duplicates c
-0000e250: 616e 2062 6520 696e 6469 6361 7465 642e  an be indicated.
-0000e260: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-0000e270: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-0000e280: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0000e290: 2020 2020 6b65 6570 203a 207b 2766 6972      keep : {'fir
-0000e2a0: 7374 272c 2027 6c61 7374 272c 2046 616c  st', 'last', Fal
-0000e2b0: 7365 7d2c 2064 6566 6175 6c74 2027 6669  se}, default 'fi
-0000e2c0: 7273 7427 0d0a 2020 2020 2020 2020 2020  rst'..          
-0000e2d0: 2020 2d20 2766 6972 7374 2720 3a20 4d61    - 'first' : Ma
-0000e2e0: 726b 2064 7570 6c69 6361 7465 7320 6173  rk duplicates as
-0000e2f0: 2054 7275 6520 6578 6365 7074 2066 6f72   True except for
-0000e300: 2074 6865 2066 6972 7374 206f 6363 7572   the first occur
-0000e310: 7265 6e63 652e 0d0a 2020 2020 2020 2020  rence...        
-0000e320: 2020 2020 2d20 276c 6173 7427 203a 204d      - 'last' : M
-0000e330: 6172 6b20 6475 706c 6963 6174 6573 2061  ark duplicates a
-0000e340: 7320 5472 7565 2065 7863 6570 7420 666f  s True except fo
-0000e350: 7220 7468 6520 6c61 7374 206f 6363 7572  r the last occur
-0000e360: 7265 6e63 652e 0d0a 2020 2020 2020 2020  rence...        
-0000e370: 2020 2020 2d20 4661 6c73 6520 3a20 4d61      - False : Ma
-0000e380: 726b 2076 616c 7565 7320 7769 7468 206a  rk values with j
-0000e390: 7573 7420 6f6e 6520 6f63 6375 7272 656e  ust one occurren
-0000e3a0: 6365 2061 7320 4661 6c73 652e 0d0a 0d0a  ce as False.....
-0000e3b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000e3c0: 2020 2020 2061 7272 203d 2073 656c 660d       arr = self.
-0000e3d0: 0a0d 0a20 2020 2020 2020 2069 6620 6b65  ...        if ke
-0000e3e0: 6570 203d 3d20 226c 6173 7422 3a0d 0a20  ep == "last":.. 
-0000e3f0: 2020 2020 2020 2020 2020 2061 7272 203d             arr =
-0000e400: 2061 7272 5b3a 3a2d 315d 2e63 6f70 7928   arr[::-1].copy(
-0000e410: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
-0000e420: 6620 6b65 6570 2069 7320 6e6f 7420 4661  f keep is not Fa
-0000e430: 6c73 6520 616e 6420 6b65 6570 2021 3d20  lse and keep != 
-0000e440: 2266 6972 7374 223a 0d0a 2020 2020 2020  "first":..      
-0000e450: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0000e460: 6545 7272 6f72 2866 276b 6565 7020 6d75  eError(f'keep mu
-0000e470: 7374 2062 6520 6569 7468 6572 2022 6669  st be either "fi
-0000e480: 7273 7422 2c20 226c 6173 7422 206f 7220  rst", "last" or 
-0000e490: 4661 6c73 6527 290d 0a0d 0a20 2020 2020  False')....     
-0000e4a0: 2020 2023 2063 7265 6174 6520 616e 2072     # create an r
-0000e4b0: 6574 7572 6e20 6172 7261 7920 616c 6c20  eturn array all 
-0000e4c0: 7365 7420 746f 2054 7275 650d 0a20 2020  set to True..   
-0000e4d0: 2020 2020 2072 6573 756c 7420 3d20 6f6e       result = on
-0000e4e0: 6573 286c 656e 2861 7272 292c 2064 7479  es(len(arr), dty
-0000e4f0: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
-0000e500: 2020 2020 2020 2020 6720 3d20 4772 6f75          g = Grou
-0000e510: 7069 6e67 2861 7272 2e5f 6661 2069 6620  ping(arr._fa if 
-0000e520: 6861 7361 7474 7228 6172 722c 2022 5f66  hasattr(arr, "_f
-0000e530: 6122 2920 656c 7365 2061 7272 2c20 6c65  a") else arr, le
-0000e540: 783d 6869 6768 5f75 6e69 7175 6529 0d0a  x=high_unique)..
-0000e550: 0d0a 2020 2020 2020 2020 6966 206b 6565  ..        if kee
-0000e560: 7020 6973 2046 616c 7365 3a0d 0a20 2020  p is False:..   
-0000e570: 2020 2020 2020 2020 2023 2073 6561 7263           # searc
-0000e580: 6820 666f 7220 6772 6f75 7073 2077 6974  h for groups wit
-0000e590: 6820 6120 636f 756e 7420 6f66 2031 0d0a  h a count of 1..
-0000e5a0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0000e5b0: 6c74 5b67 2e69 6669 7273 746b 6579 5b67  lt[g.ifirstkey[g
-0000e5c0: 2e6e 636f 756e 7467 726f 7570 5b31 3a5d  .ncountgroup[1:]
-0000e5d0: 203d 3d20 315d 5d20 3d20 4661 6c73 650d   == 1]] = False.
-0000e5e0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0000e5f0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0000e600: 6c74 5b67 2e69 6669 7273 746b 6579 5d20  lt[g.ifirstkey] 
-0000e610: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
-0000e620: 2020 2020 2020 2069 6620 6b65 6570 203d         if keep =
-0000e630: 3d20 226c 6173 7422 3a0d 0a20 2020 2020  = "last":..     
-0000e640: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0000e650: 7420 3d20 7265 7375 6c74 5b3a 3a2d 315d  t = result[::-1]
-0000e660: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
-0000e670: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-0000e680: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-0000e690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6d0: 2d2d 0d0a 2020 2020 6465 6620 7361 7665  --..    def save
-0000e6e0: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-0000e6f0: 0d0a 2020 2020 2020 2020 6669 6c65 7061  ..        filepa
-0000e700: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
-0000e710: 732e 5061 7468 4c69 6b65 5d2c 0d0a 2020  s.PathLike],..  
-0000e720: 2020 2020 2020 7368 6172 653a 204f 7074        share: Opt
-0000e730: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
-0000e740: 652c 0d0a 2020 2020 2020 2020 636f 6d70  e,..        comp
-0000e750: 7265 7373 3a20 626f 6f6c 203d 2054 7275  ress: bool = Tru
-0000e760: 652c 0d0a 2020 2020 2020 2020 6f76 6572  e,..        over
-0000e770: 7772 6974 653a 2062 6f6f 6c20 3d20 5472  write: bool = Tr
-0000e780: 7565 2c0d 0a20 2020 2020 2020 206e 616d  ue,..        nam
-0000e790: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
-0000e7a0: 203d 204e 6f6e 652c 0d0a 2020 2020 2920   = None,..    ) 
-0000e7b0: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
-0000e7c0: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
-0000e7d0: 6176 6520 6120 7369 6e67 6c65 2061 7272  ave a single arr
-0000e7e0: 6179 2069 6e20 616e 202e 7364 7320 6669  ay in an .sds fi
-0000e7f0: 6c65 2e0d 0a0d 0a20 2020 2020 2020 2050  le.....        P
-0000e800: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-0000e810: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-0000e820: 2020 2020 2020 2066 696c 6570 6174 683a         filepath:
-0000e830: 2073 7472 206f 7220 6f73 2e50 6174 684c   str or os.PathL
-0000e840: 696b 650d 0a20 2020 2020 2020 2073 6861  ike..        sha
-0000e850: 7265 203a 2073 7472 2c20 6f70 7469 6f6e  re : str, option
-0000e860: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
-0000e870: 0d0a 2020 2020 2020 2020 636f 6d70 7265  ..        compre
-0000e880: 7373 203a 2062 6f6f 6c2c 2064 6566 6175  ss : bool, defau
-0000e890: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
-0000e8a0: 206f 7665 7277 7269 7465 203a 2062 6f6f   overwrite : boo
-0000e8b0: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
-0000e8c0: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
-0000e8d0: 7374 722c 206f 7074 696f 6e61 6c2c 2064  str, optional, d
-0000e8e0: 6566 6175 6c74 204e 6f6e 650d 0a0d 0a20  efault None.... 
-0000e8f0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-0000e900: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000e910: 2d0d 0a20 2020 2020 2020 2072 745f 7364  -..        rt_sd
-0000e920: 732e 7361 7665 5f73 6473 0d0a 2020 2020  s.save_sds..    
-0000e930: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000e940: 2073 6176 655f 7364 7328 6669 6c65 7061   save_sds(filepa
-0000e950: 7468 2c20 7365 6c66 2c20 7368 6172 653d  th, self, share=
-0000e960: 7368 6172 652c 2063 6f6d 7072 6573 733d  share, compress=
-0000e970: 636f 6d70 7265 7373 2c20 6f76 6572 7772  compress, overwr
-0000e980: 6974 653d 6f76 6572 7772 6974 652c 206e  ite=overwrite, n
-0000e990: 616d 653d 6e61 6d65 290d 0a0d 0a20 2020  ame=name)....   
-0000e9a0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-0000e9b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e9c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e9d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e9e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0000e9f0: 2020 2064 6566 2066 696c 7465 7228 7365     def filter(se
-0000ea00: 6c66 2c20 6669 6c74 6572 3a20 6e70 742e  lf, filter: npt.
-0000ea10: 4172 7261 794c 696b 6529 202d 3e20 2246  ArrayLike) -> "F
-0000ea20: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
-0000ea30: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000ea40: 2052 6574 7572 6e20 6120 636f 7079 206f   Return a copy o
-0000ea50: 6620 7468 6520 6046 6173 7441 7272 6179  f the `FastArray
-0000ea60: 6020 636f 6e74 6169 6e69 6e67 206f 6e6c  ` containing onl
-0000ea70: 7920 7468 6520 656c 656d 656e 7473 2074  y the elements t
-0000ea80: 6861 7420 6d65 6574 2074 6865 2073 7065  hat meet the spe
-0000ea90: 6369 6669 6564 0d0a 2020 2020 2020 2020  cified..        
-0000eaa0: 636f 6e64 6974 696f 6e2e 0d0a 0d0a 2020  condition.....  
-0000eab0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-0000eac0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0000ead0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6669  ----..        fi
-0000eae0: 6c74 6572 203a 2061 7272 6179 3a20 6661  lter : array: fa
-0000eaf0: 6e63 7920 696e 6465 7820 6f72 2042 6f6f  ncy index or Boo
-0000eb00: 6c65 616e 206d 6173 6b0d 0a20 2020 2020  lean mask..     
-0000eb10: 2020 2020 2020 2041 2066 616e 6379 2069         A fancy i
-0000eb20: 6e64 6578 2073 7065 6369 6669 6573 2062  ndex specifies b
-0000eb30: 6f74 6820 7468 6520 6465 7369 7265 6420  oth the desired 
-0000eb40: 656c 656d 656e 7473 2061 6e64 2074 6865  elements and the
-0000eb50: 6972 206f 7264 6572 2069 6e20 7468 650d  ir order in the.
-0000eb60: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000eb70: 7572 6e65 6420 6046 6173 7441 7272 6179  urned `FastArray
-0000eb80: 602e 2057 6865 6e20 6120 426f 6f6c 6561  `. When a Boolea
-0000eb90: 6e20 6d61 736b 2069 7320 7061 7373 6564  n mask is passed
-0000eba0: 2c20 6f6e 6c79 2072 6f77 7320 7468 6174  , only rows that
-0000ebb0: 206d 6565 7420 7468 650d 0a20 2020 2020   meet the..     
-0000ebc0: 2020 2020 2020 2073 7065 6369 6669 6564         specified
-0000ebd0: 2063 6f6e 6469 7469 6f6e 2061 7265 2069   condition are i
-0000ebe0: 6e20 7468 6520 7265 7475 726e 6564 2060  n the returned `
-0000ebf0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
-0000ec00: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-0000ec10: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-0000ec20: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-0000ec30: 7261 7960 0d0a 0d0a 2020 2020 2020 2020  ray`....        
-0000ec40: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
-0000ec50: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4966  ----..        If
-0000ec60: 2079 6f75 2077 616e 7420 746f 2070 6572   you want to per
-0000ec70: 666f 726d 2061 6e20 6f70 6572 6174 696f  form an operatio
-0000ec80: 6e20 6f6e 2061 2066 696c 7465 7265 6420  n on a filtered 
-0000ec90: 4661 7374 4172 7261 792c 2069 7427 7320  FastArray, it's 
-0000eca0: 6d6f 7265 2065 6666 6963 6965 6e74 2074  more efficient t
-0000ecb0: 6f0d 0a20 2020 2020 2020 2070 6572 666f  o..        perfo
-0000ecc0: 726d 2074 6865 206f 7065 7261 7469 6f6e  rm the operation
-0000ecd0: 2075 7369 6e67 2074 6865 2060 6066 696c   using the ``fil
-0000ece0: 7465 7260 6020 6b65 7977 6f72 6420 6172  ter`` keyword ar
-0000ecf0: 6775 6d65 6e74 2e20 466f 7220 6578 616d  gument. For exam
-0000ed00: 706c 652c 0d0a 2020 2020 2020 2020 6060  ple,..        ``
-0000ed10: 6d79 5f66 612e 7375 6d28 6669 6c74 6572  my_fa.sum(filter
-0000ed20: 203d 2062 6f6f 6c65 616e 5f6d 6173 6b29   = boolean_mask)
-0000ed30: 6060 2e0d 0a0d 0a20 2020 2020 2020 2045  ``.....        E
-0000ed40: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-0000ed50: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0000ed60: 2020 2043 7265 6174 6520 6120 6046 6173     Create a `Fas
-0000ed70: 7441 7272 6179 603a 0d0a 0d0a 2020 2020  tArray`:....    
-0000ed80: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
-0000ed90: 4661 7374 4172 7261 7928 6e70 2e6c 696e  FastArray(np.lin
-0000eda0: 7370 6163 6528 302c 2031 2c20 3131 2929  space(0, 1, 11))
-0000edb0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
-0000edc0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000edd0: 7261 7928 5b30 2e20 2c20 302e 312c 2030  ray([0. , 0.1, 0
-0000ede0: 2e32 2c20 302e 332c 2030 2e34 2c20 302e  .2, 0.3, 0.4, 0.
-0000edf0: 352c 2030 2e36 2c20 302e 372c 2030 2e38  5, 0.6, 0.7, 0.8
-0000ee00: 2c20 302e 392c 2031 2e20 5d29 0d0a 0d0a  , 0.9, 1. ])....
-0000ee10: 2020 2020 2020 2020 4669 6c74 6572 2075          Filter u
-0000ee20: 7369 6e67 2061 2066 616e 6379 2069 6e64  sing a fancy ind
-0000ee30: 6578 3a0d 0a0d 0a20 2020 2020 2020 203e  ex:....        >
-0000ee40: 3e3e 2066 612e 6669 6c74 6572 285b 352c  >> fa.filter([5,
-0000ee50: 2030 2c20 315d 290d 0a20 2020 2020 2020   0, 1])..       
-0000ee60: 2046 6173 7441 7272 6179 285b 302e 352c   FastArray([0.5,
-0000ee70: 2030 2e20 2c20 302e 315d 290d 0a0d 0a20   0. , 0.1]).... 
-0000ee80: 2020 2020 2020 2046 696c 7465 7220 7573         Filter us
-0000ee90: 696e 6720 6120 636f 6e64 6974 696f 6e20  ing a condition 
-0000eea0: 7468 6174 2063 7265 6174 6573 2061 2042  that creates a B
-0000eeb0: 6f6f 6c65 616e 206d 6173 6b20 6172 7261  oolean mask arra
-0000eec0: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
-0000eed0: 3e20 6661 2e66 696c 7465 7228 6661 203e  > fa.filter(fa >
-0000eee0: 2030 2e37 3529 0d0a 2020 2020 2020 2020   0.75)..        
-0000eef0: 4661 7374 4172 7261 7928 5b30 2e38 2c20  FastArray([0.8, 
-0000ef00: 302e 392c 2031 2e20 5d29 0d0a 0d0a 2020  0.9, 1. ])....  
-0000ef10: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-0000ef20: 2020 2020 2023 206e 6f72 6d61 6c69 7a65       # normalize
-0000ef30: 2072 6f77 6669 6c74 6572 0d0a 2020 2020   rowfilter..    
-0000ef40: 2020 2020 6966 206e 702e 6973 7363 616c      if np.isscal
-0000ef50: 6172 2866 696c 7465 7229 3a0d 0a20 2020  ar(filter):..   
-0000ef60: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
-0000ef70: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
-0000ef80: 5b66 696c 7465 725d 290d 0a20 2020 2020  [filter])..     
-0000ef90: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
-0000efa0: 7374 616e 6365 2866 696c 7465 722c 206e  stance(filter, n
-0000efb0: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
-0000efc0: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
-0000efd0: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
-0000efe0: 6669 6c74 6572 290d 0a0d 0a20 2020 2020  filter)....     
-0000eff0: 2020 2023 2045 6e73 7572 6520 6669 6c74     # Ensure filt
-0000f000: 6572 2069 7320 626f 6f6c 6561 6e20 6f72  er is boolean or
-0000f010: 2069 6e74 6567 6572 730d 0a20 2020 2020   integers..     
-0000f020: 2020 2069 6620 6e6f 7420 286e 702e 6973     if not (np.is
-0000f030: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
-0000f040: 6474 7970 652c 206e 702e 696e 7465 6765  dtype, np.intege
-0000f050: 7229 206f 7220 6e70 2e69 7373 7562 6474  r) or np.issubdt
-0000f060: 7970 6528 6669 6c74 6572 2e64 7479 7065  ype(filter.dtype
-0000f070: 2c20 626f 6f6c 2929 3a0d 0a20 2020 2020  , bool)):..     
-0000f080: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-0000f090: 6545 7272 6f72 2866 2254 6865 2066 696c  eError(f"The fil
-0000f0a0: 7465 7220 6d75 7374 2062 6520 6120 626f  ter must be a bo
-0000f0b0: 6f6c 6561 6e20 6d61 736b 206f 7220 696e  olean mask or in
-0000f0c0: 7465 6765 7220 6661 6e63 7920 696e 6465  teger fancy inde
-0000f0d0: 782e 2229 0d0a 0d0a 2020 2020 2020 2020  x.")....        
-0000f0e0: 2320 456e 7375 7265 2060 6669 6c74 6572  # Ensure `filter
-0000f0f0: 6020 6973 2074 6865 2072 6967 6874 2073  ` is the right s
-0000f100: 6861 7065 2e0d 0a20 2020 2020 2020 2023  hape...        #
-0000f110: 2055 6e6c 696b 6520 6044 6174 6173 6574   Unlike `Dataset
-0000f120: 2e66 696c 7465 7260 2077 6520 646f 6e27  .filter` we don'
-0000f130: 7420 636f 6e76 6572 7420 626f 6f6c 2074  t convert bool t
-0000f140: 6f20 6661 6e63 792c 2020 6265 6361 7573  o fancy,  becaus
-0000f150: 6520 7765 2772 6520 6e6f 7420 7265 7573  e we're not reus
-0000f160: 696e 6720 7468 6520 6661 6e63 7920 696e  ing the fancy in
-0000f170: 6469 6365 732e 0d0a 2020 2020 2020 2020  dices...        
-0000f180: 6966 2066 696c 7465 722e 6e64 696d 2021  if filter.ndim !
-0000f190: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
-0000f1a0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000f1b0: 6f72 2822 6046 6173 7441 7272 6179 2e66  or("`FastArray.f
-0000f1c0: 696c 7465 7260 206f 6e6c 7920 6163 6365  ilter` only acce
-0000f1d0: 7074 7320 3144 2061 7272 6179 7320 666f  pts 1D arrays fo
-0000f1e0: 7220 7468 6520 656c 656d 656e 7420 7365  r the element se
-0000f1f0: 6c65 6374 6f72 2f6d 6173 6b2e 2229 0d0a  lector/mask.")..
-0000f200: 2020 2020 2020 2020 2320 426f 6f6c 6561          # Boolea
-0000f210: 6e20 6172 7261 7920 6e65 6564 7320 746f  n array needs to
-0000f220: 2062 6520 7468 6520 7269 6768 7420 6c65   be the right le
-0000f230: 6e67 7468 2061 7320 7765 6c6c 2e0d 0a20  ngth as well... 
-0000f240: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
-0000f250: 7562 6474 7970 6528 6669 6c74 6572 2e64  ubdtype(filter.d
-0000f260: 7479 7065 2c20 626f 6f6c 2920 616e 6420  type, bool) and 
-0000f270: 286c 656e 2866 696c 7465 7229 2021 3d20  (len(filter) != 
-0000f280: 7365 6c66 2e73 6861 7065 5b30 5d29 3a0d  self.shape[0]):.
-0000f290: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0000f2a0: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
-0000f2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f2c0: 6622 5468 6520 6c65 6e67 7468 206f 6620  f"The length of 
-0000f2d0: 7468 6520 7072 6f76 6964 6564 2073 656c  the provided sel
-0000f2e0: 6563 7469 6f6e 206d 6173 6b20 287b 6c65  ection mask ({le
-0000f2f0: 6e28 6669 6c74 6572 297d 2920 646f 6573  n(filter)}) does
-0000f300: 206e 6f74 206d 6174 6368 2074 6865 206c   not match the l
-0000f310: 656e 6774 6820 6f66 2074 6865 2046 6173  ength of the Fas
-0000f320: 7441 7272 6179 287b 7365 6c66 2e73 6861  tArray({self.sha
-0000f330: 7065 5b30 5d7d 292e 220d 0a20 2020 2020  pe[0]})."..     
-0000f340: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0000f350: 2020 2020 2320 5065 7266 6f72 6d20 6669      # Perform fi
-0000f360: 6c74 6572 2061 6e64 2072 6574 7572 6e0d  lter and return.
-0000f370: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000f380: 7365 6c66 5b66 696c 7465 725d 0d0a 0d0a  self[filter]....
-0000f390: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-0000f3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f3e0: 0d0a 2020 2020 6465 6620 7265 7368 6170  ..    def reshap
-0000f3f0: 6528 7365 6c66 2c20 2a61 7267 732c 202a  e(self, *args, *
-0000f400: 2a6b 7761 7267 7329 202d 3e20 4661 7374  *kwargs) -> Fast
-0000f410: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-0000f420: 7265 7375 6c74 203d 2073 7570 6572 2846  result = super(F
-0000f430: 6173 7441 7272 6179 2c20 7365 6c66 292e  astArray, self).
-0000f440: 7265 7368 6170 6528 2a61 7267 732c 202a  reshape(*args, *
-0000f450: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
-0000f460: 2020 2320 7468 6973 2077 6172 6e69 6e67    # this warning
-0000f470: 2068 6170 7065 6e73 2074 6f6f 206d 7563   happens too muc
-0000f480: 6820 6e6f 770d 0a20 2020 2020 2020 2023  h now..        #
-0000f490: 2069 6620 4661 7374 4172 7261 792e 5f63   if FastArray._c
-0000f4a0: 6865 636b 5f6e 6469 6d28 7265 7375 6c74  heck_ndim(result
-0000f4b0: 2920 213d 2031 3a0d 0a20 2020 2020 2020  ) != 1:..       
-0000f4c0: 2023 2020 2020 7761 726e 696e 6773 2e77   #    warnings.w
-0000f4d0: 6172 6e28 4661 7374 4172 7261 792e 5761  arn(FastArray.Wa
-0000f4e0: 726e 696e 6744 6963 745b 226d 756c 7469  rningDict["multi
-0000f4f0: 706c 655f 6469 6d65 6e73 696f 6e73 225d  ple_dimensions"]
-0000f500: 2e66 6f72 6d61 7428 7265 7375 6c74 2e73  .format(result.s
-0000f510: 6861 7065 2929 0d0a 0d0a 2020 2020 2020  hape))....      
-0000f520: 2020 6966 206e 6f74 2028 7265 7375 6c74    if not (result
-0000f530: 2e66 6c61 6773 2e63 5f63 6f6e 7469 6775  .flags.c_contigu
-0000f540: 6f75 7320 6f72 2072 6573 756c 742e 666c  ous or result.fl
-0000f550: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
-0000f560: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000f570: 2320 6669 7820 7374 7269 6465 7320 7072  # fix strides pr
-0000f580: 6f62 6c65 6d0d 0a20 2020 2020 2020 2020  oblem..         
-0000f590: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0000f5a0: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
-0000f5b0: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-0000f5c0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-0000f5d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f610: 2d2d 0d0a 2020 2020 6465 6620 7265 7065  --..    def repe
-0000f620: 6174 2873 656c 662c 2072 6570 6561 7473  at(self, repeats
-0000f630: 2c20 6178 6973 3d4e 6f6e 6529 202d 3e20  , axis=None) -> 
-0000f640: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-0000f650: 2020 2020 2222 2253 6565 2060 7269 7074      """See `ript
-0000f660: 6162 6c65 2e72 6570 6561 7460 2e22 2222  able.repeat`."""
-0000f670: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000f680: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
-0000f690: 7065 6174 732c 2061 7869 733d 6178 6973  peats, axis=axis
-0000f6a0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-0000f6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6f0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
-0000f700: 696c 6528 7365 6c66 2c20 7265 7073 2920  ile(self, reps) 
-0000f710: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
-0000f720: 2020 2020 2020 2022 2222 5365 6520 6072         """See `r
-0000f730: 6970 7461 626c 652e 7469 6c65 602e 2222  iptable.tile`.""
-0000f740: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-0000f750: 6e20 7469 6c65 2873 656c 662c 2072 6570  n tile(self, rep
-0000f760: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
-0000f770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f7a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f7b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-0000f7c0: 5f6b 7761 7267 5f63 6865 636b 2873 656c  _kwarg_check(sel
-0000f7d0: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-0000f7e0: 6773 293a 0d0a 2020 2020 2020 2020 2320  gs):..        # 
-0000f7f0: 7765 2068 616e 646c 6520 6474 7970 650d  we handle dtype.
-0000f800: 0a20 2020 2020 2020 2069 6620 2822 6464  .        if ("dd
-0000f810: 6f66 2220 696e 206b 7761 7267 7320 616e  of" in kwargs an
-0000f820: 6420 6b77 6172 6773 5b22 6464 6f66 225d  d kwargs["ddof"]
-0000f830: 2021 3d20 3129 206f 7220 2261 7869 7322   != 1) or "axis"
-0000f840: 2069 6e20 6b77 6172 6773 206f 7220 226b   in kwargs or "k
-0000f850: 6565 7064 696d 7322 2069 6e20 6b77 6172  eepdims" in kwar
-0000f860: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-0000f870: 2072 6574 7572 6e20 5472 7565 0d0a 0d0a   return True....
-0000f880: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-0000f890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f8a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f8b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f8c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f8d0: 0d0a 2020 2020 6465 6620 5f72 6564 7563  ..    def _reduc
-0000f8e0: 655f 6368 6563 6b28 7365 6c66 2c20 7265  e_check(self, re
-0000f8f0: 6475 6365 4675 6e63 3a20 5245 4455 4345  duceFunc: REDUCE
-0000f900: 5f46 554e 4354 494f 4e53 2c20 6e70 4675  _FUNCTIONS, npFu
-0000f910: 6e63 2c20 2a61 7267 732c 202a 2a6b 7761  nc, *args, **kwa
-0000f920: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
-0000f930: 2222 0d0a 2020 2020 2020 2020 4172 6732  ""..        Arg2
-0000f940: 3a20 6e70 4675 6e63 2070 6173 7320 696e  : npFunc pass in
-0000f950: 204e 6f6e 6520 6966 206e 6f20 6e75 6d70   None if no nump
-0000f960: 7920 6571 7569 7661 6c65 6e74 2066 756e  y equivalent fun
-0000f970: 6374 696f 6e0d 0a20 2020 2020 2020 2022  ction..        "
-0000f980: 2222 0d0a 2020 2020 2020 2020 6966 206e  ""..        if n
-0000f990: 7046 756e 6320 6973 206e 6f74 204e 6f6e  pFunc is not Non
-0000f9a0: 6520 616e 6420 2873 656c 662e 5f6b 7761  e and (self._kwa
-0000f9b0: 7267 5f63 6865 636b 282a 6172 6773 2c20  rg_check(*args, 
-0000f9c0: 2a2a 6b77 6172 6773 2920 6f72 206c 656e  **kwargs) or len
-0000f9d0: 2873 656c 662e 7368 6170 6529 2021 3d20  (self.shape) != 
-0000f9e0: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
-0000f9f0: 2023 2054 4f44 4f3a 2061 6464 2074 6f20   # TODO: add to 
-0000fa00: 6d61 7468 206c 6564 6765 720d 0a20 2020  math ledger..   
-0000fa10: 2020 2020 2020 2020 2023 2073 6574 2064           # set d
-0000fa20: 646f 663d 3120 6966 204e 4f54 2073 6574  dof=1 if NOT set
-0000fa30: 2077 6869 6368 2069 7320 4661 7374 4172   which is FastAr
-0000fa40: 7261 7920 6465 6661 756c 7420 746f 206d  ray default to m
-0000fa50: 6174 6368 206d 6174 6c61 622f 7061 6e64  atch matlab/pand
-0000fa60: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
-0000fa70: 6966 2022 6464 6f66 2220 6e6f 7420 696e  if "ddof" not in
-0000fa80: 206b 7761 7267 7320 616e 6420 7265 6475   kwargs and redu
-0000fa90: 6365 4675 6e63 2069 6e20 5b0d 0a20 2020  ceFunc in [..   
-0000faa0: 2020 2020 2020 2020 2020 2020 2052 4544               RED
-0000fab0: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-0000fac0: 4455 4345 5f56 4152 2c0d 0a20 2020 2020  DUCE_VAR,..     
-0000fad0: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
-0000fae0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-0000faf0: 4345 5f4e 414e 5641 522c 0d0a 2020 2020  CE_NANVAR,..    
-0000fb00: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
-0000fb10: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-0000fb20: 5543 455f 5354 442c 0d0a 2020 2020 2020  UCE_STD,..      
-0000fb30: 2020 2020 2020 2020 2020 5245 4455 4345            REDUCE
-0000fb40: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-0000fb50: 455f 4e41 4e53 5444 2c0d 0a20 2020 2020  E_NANSTD,..     
-0000fb60: 2020 2020 2020 205d 3a0d 0a20 2020 2020         ]:..     
-0000fb70: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-0000fb80: 735b 2264 646f 6622 5d20 3d20 310d 0a0d  s["ddof"] = 1...
-0000fb90: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-0000fba0: 756c 7420 3d20 6e70 4675 6e63 2873 656c  ult = npFunc(sel
-0000fbb0: 662e 5f6e 702c 202a 6172 6773 2c20 2a2a  f._np, *args, **
-0000fbc0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
-0000fbd0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-0000fbe0: 6c74 0d0a 0d0a 2020 2020 2020 2020 7265  lt....        re
-0000fbf0: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
-0000fc00: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-0000fc10: 5245 4455 4345 2873 656c 662c 2072 6564  REDUCE(self, red
-0000fc20: 7563 6546 756e 6329 0d0a 0d0a 2020 2020  uceFunc)....    
-0000fc30: 2020 2020 2320 4974 2773 2070 6f73 7369      # It's possi
-0000fc40: 626c 6520 7468 6572 6520 7761 7320 6e6f  ble there was no
-0000fc50: 2072 6573 756c 7420 7265 7475 726e 6564   result returned
-0000fc60: 2066 726f 6d20 7468 6520 7265 6475 6374   from the reduct
-0000fc70: 696f 6e20 6675 6e63 7469 6f6e 3b0d 0a20  ion function;.. 
-0000fc80: 2020 2020 2020 2023 2065 2e67 2e20 6966         # e.g. if
-0000fc90: 2074 6865 2069 6e70 7574 2077 6173 2065   the input was e
-0000fca0: 6d70 7479 2e20 4966 2074 6865 2066 756e  mpty. If the fun
-0000fcb0: 6374 696f 6e20 6265 696e 6720 6361 6c6c  ction being call
-0000fcc0: 6564 2069 7320 7765 6c6c 2d64 6566 696e  ed is well-defin
-0000fcd0: 6564 0d0a 2020 2020 2020 2020 2320 666f  ed..        # fo
-0000fce0: 7220 656d 7074 7920 6c69 7374 7320 2d2d  r empty lists --
-0000fcf0: 2069 2e65 2e20 6974 2069 7320 6120 7265   i.e. it is a re
-0000fd00: 6475 6374 696f 6e20 6f70 6572 6174 696f  duction operatio
-0000fd10: 6e20 7769 7468 2061 2064 6566 696e 6564  n with a defined
-0000fd20: 0d0a 2020 2020 2020 2020 2320 6964 656e  ..        # iden
-0000fd30: 7469 7479 2065 6c65 6d65 6e74 202d 2d20  tity element -- 
-0000fd40: 7365 7420 7468 6520 7265 7375 6c74 2074  set the result t
-0000fd50: 6f20 7468 6520 6964 656e 7469 7479 2065  o the identity e
-0000fd60: 6c65 6d65 6e74 2073 6f20 7468 6520 7265  lement so the re
-0000fd70: 7374 206f 660d 0a20 2020 2020 2020 2023  st of..        #
-0000fd80: 2074 6865 206c 6f67 6963 2062 656c 6f77   the logic below
-0000fd90: 2077 696c 6c20 776f 726b 2063 6f72 7265   will work corre
-0000fda0: 6374 6c79 2e0d 0a20 2020 2020 2020 2023  ctly...        #
-0000fdb0: 2049 6620 7468 6572 6520 6973 206e 6f20   If there is no 
-0000fdc0: 6964 656e 7469 7479 2065 6c65 6d65 6e74  identity element
-0000fdd0: 2066 6f72 2074 6869 7320 6f70 6572 6174   for this operat
-0000fde0: 696f 6e2c 2072 6169 7365 2061 6e20 6578  ion, raise an ex
-0000fdf0: 6365 7074 696f 6e20 746f 0d0a 2020 2020  ception to..    
-0000fe00: 2020 2020 2320 6c65 7420 7468 6520 7573      # let the us
-0000fe10: 6572 206b 6e6f 773b 2077 6527 6420 7261  er know; we'd ra
-0000fe20: 6973 6520 616e 2065 7863 6570 7469 6f6e  ise an exception
-0000fe30: 2062 656c 6f77 202a 616e 7977 6179 2a2c   below *anyway*,
-0000fe40: 2061 6e64 2074 6869 7320 616c 6c6f 7773   and this allows
-0000fe50: 0d0a 2020 2020 2020 2020 2320 7573 2074  ..        # us t
-0000fe60: 6f20 7072 6f76 6964 6520 7468 6520 7573  o provide the us
-0000fe70: 6572 2077 6974 6820 6120 6d6f 7265 2d64  er with a more-d
-0000fe80: 6573 6372 6970 7469 7665 2f61 6374 696f  escriptive/actio
-0000fe90: 6e61 626c 6520 6572 726f 7220 6d65 7373  nable error mess
-0000fea0: 6167 652e 0d0a 2020 2020 2020 2020 6966  age...        if
-0000feb0: 2072 6573 756c 7420 6973 204e 6f6e 653a   result is None:
-0000fec0: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
-0000fed0: 5f69 6465 6e74 6974 795f 7661 6c20 3d20  _identity_val = 
-0000fee0: 7479 7065 2873 656c 6629 2e5f 7265 6475  type(self)._redu
-0000fef0: 6365 5f6f 705f 6964 656e 7469 7479 5f76  ce_op_identity_v
-0000ff00: 616c 7565 2e67 6574 2872 6564 7563 6546  alue.get(reduceF
-0000ff10: 756e 632c 204e 6f6e 6529 0d0a 2020 2020  unc, None)..    
-0000ff20: 2020 2020 2020 2020 6966 206f 705f 6964          if op_id
-0000ff30: 656e 7469 7479 5f76 616c 2069 7320 6e6f  entity_val is no
-0000ff40: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0000ff50: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-0000ff60: 3d20 6f70 5f69 6465 6e74 6974 795f 7661  = op_identity_va
-0000ff70: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
-0000ff80: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0000ff90: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0000ffa0: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
-0000ffb0: 2020 2020 2020 2020 2020 2020 2066 2252               f"R
-0000ffc0: 6564 7563 7469 6f6e 2027 7b73 7472 2872  eduction '{str(r
-0000ffd0: 6564 7563 6546 756e 6329 7d27 2064 6f65  educeFunc)}' doe
-0000ffe0: 7320 6e6f 7420 6861 7665 2061 6e20 6964  s not have an id
-0000fff0: 656e 7469 7479 2065 6c65 6d65 6e74 2073  entity element s
-00010000: 6f20 6361 6e6e 6f74 2062 6520 636f 6d70  o cannot be comp
-00010010: 7574 6564 206f 7665 7220 616e 2065 6d70  uted over an emp
-00010020: 7479 2061 7272 6179 2e22 0d0a 2020 2020  ty array."..    
-00010030: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00010040: 0a20 2020 2020 2020 2023 2057 6173 2061  .        # Was a
-00010050: 6e20 6f75 7470 7574 2064 7479 7065 2077  n output dtype w
-00010060: 6173 2065 7870 6c69 6369 746c 7920 7370  as explicitly sp
-00010070: 6563 6966 6965 643f 0d0a 2020 2020 2020  ecified?..      
-00010080: 2020 6474 7970 6520 3d20 6b77 6172 6773    dtype = kwargs
-00010090: 2e67 6574 2822 6474 7970 6522 2c20 4e6f  .get("dtype", No
-000100a0: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
-000100b0: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
-000100c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000100d0: 2320 7573 6572 2066 6f72 6365 6420 6474  # user forced dt
-000100e0: 7970 6520 7265 7475 726e 2076 616c 7565  ype return value
-000100f0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00010100: 7475 726e 2064 7479 7065 2872 6573 756c  turn dtype(resul
-00010110: 7429 0d0a 0d0a 2020 2020 2020 2020 2320  t)....        # 
-00010120: 7072 6573 6572 7665 2074 7970 6520 666f  preserve type fo
-00010130: 7220 6d69 6e2f 6d61 782f 6e61 6e6d 696e  r min/max/nanmin
-00010140: 2f6e 616e 6d61 780d 0a20 2020 2020 2020  /nanmax..       
-00010150: 2069 6620 7265 6475 6365 4675 6e63 2069   if reduceFunc i
-00010160: 6e20 5b0d 0a20 2020 2020 2020 2020 2020  n [..           
-00010170: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
-00010180: 532e 5245 4455 4345 5f4d 494e 2c0d 0a20  S.REDUCE_MIN,.. 
-00010190: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
-000101a0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-000101b0: 4345 5f4e 414e 4d49 4e2c 0d0a 2020 2020  CE_NANMIN,..    
-000101c0: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
-000101d0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-000101e0: 4d41 582c 0d0a 2020 2020 2020 2020 2020  MAX,..          
-000101f0: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
-00010200: 4e53 2e52 4544 5543 455f 4e41 4e4d 4158  NS.REDUCE_NANMAX
-00010210: 2c0d 0a20 2020 2020 2020 205d 3a0d 0a20  ,..        ]:.. 
-00010220: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00010230: 6e20 7365 6c66 2e64 7479 7065 2e74 7970  n self.dtype.typ
-00010240: 6528 7265 7375 6c74 290d 0a0d 0a20 2020  e(result)....   
-00010250: 2020 2020 2023 2069 6e74 6572 6e61 6c6c       # internall
-00010260: 7920 6e75 6d70 7920 6578 7065 6374 7320  y numpy expects 
-00010270: 6120 6474 7970 6520 7265 7475 726e 6564  a dtype returned
-00010280: 2066 6f72 206e 616e 7374 6420 616e 6420   for nanstd and 
-00010290: 6f74 6865 7220 6361 6c63 756c 6174 696f  other calculatio
-000102a0: 6e73 0d0a 2020 2020 2020 2020 6966 2069  ns..        if i
-000102b0: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
-000102c0: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
-000102d0: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
-000102e0: 2020 2023 2066 6f72 2075 696e 7436 342c     # for uint64,
-000102f0: 2074 6865 2068 6967 6820 6269 7420 6d75   the high bit mu
-00010300: 7374 2062 6520 7072 6573 6572 7665 640d  st be preserved.
-00010310: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00010320: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-00010330: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
-00010340: 732e 556e 7369 676e 6564 496e 7465 6765  s.UnsignedIntege
-00010350: 7236 343a 0d0a 2020 2020 2020 2020 2020  r64:..          
-00010360: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-00010370: 7569 6e74 3634 2872 6573 756c 7429 0d0a  uint64(result)..
-00010380: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00010390: 726e 206e 702e 696e 7436 3428 7265 7375  rn np.int64(resu
-000103a0: 6c74 290d 0a0d 0a20 2020 2020 2020 2072  lt)....        r
-000103b0: 6574 7572 6e20 6e70 2e66 6c6f 6174 3634  eturn np.float64
-000103c0: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
-000103d0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-000103e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000103f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00010420: 2020 2064 6566 205f 636f 6d70 6172 655f     def _compare_
-00010430: 6368 6563 6b28 7365 6c66 2c20 6675 6e63  check(self, func
-00010440: 2c20 6f74 6865 7229 202d 3e20 4661 7374  , other) -> Fast
-00010450: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00010460: 2320 6120 7573 6572 206d 6967 6874 2074  # a user might t
-00010470: 7970 6520 696e 2061 2073 7472 696e 6720  ype in a string 
-00010480: 616e 6420 7765 2077 616e 7420 6120 6279  and we want a by
-00010490: 7465 7320 7374 7269 6e67 0d0a 2020 2020  tes string..    
-000104a0: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
-000104b0: 652e 6368 6172 2069 6e20 2253 5522 3a0d  e.char in "SU":.
-000104c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000104d0: 6973 696e 7374 616e 6365 286f 7468 6572  isinstance(other
-000104e0: 2c20 7374 7229 3a0d 0a20 2020 2020 2020  , str):..       
-000104f0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00010500: 2e64 7479 7065 2e63 6861 7220 3d3d 2022  .dtype.char == "
-00010510: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
-00010520: 2020 2020 2020 2020 2023 2077 6520 6172           # we ar
-00010530: 6520 6279 7465 2073 7472 696e 6773 2062  e byte strings b
-00010540: 7574 2073 6361 6c61 7220 756e 6963 6f64  ut scalar unicod
-00010550: 6520 7061 7373 6564 2069 6e0d 0a20 2020  e passed in..   
-00010560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010570: 206f 7468 6572 203d 2073 7472 2e65 6e63   other = str.enc
-00010580: 6f64 6528 6f74 6865 7229 0d0a 0d0a 2020  ode(other)....  
-00010590: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-000105a0: 6e73 7461 6e63 6528 6f74 6865 722c 206c  nstance(other, l
-000105b0: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
-000105c0: 2020 2020 2020 2023 2063 6f6e 7665 7274         # convert
-000105d0: 2074 6865 206c 6973 7420 736f 2061 2063   the list so a c
-000105e0: 6f6d 7061 7269 736f 6e20 6361 6e20 6265  omparison can be
-000105f0: 206d 6164 6520 746f 2074 6865 2062 7974   made to the byt
-00010600: 6520 7374 7269 6e67 2061 7272 6179 0d0a  e string array..
-00010610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010620: 6f74 6865 7220 3d20 4661 7374 4172 7261  other = FastArra
-00010630: 7928 6f74 6865 7229 0d0a 0d0a 2020 2020  y(other)....    
-00010640: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00010650: 2066 756e 6328 6f74 6865 7229 0d0a 0d0a   func(other)....
-00010660: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
-00010670: 5445 3a20 6e75 6d70 7920 646f 6573 2063  TE: numpy does c
-00010680: 616c 6c20 4641 2075 6675 6e63 2066 6f72  all FA ufunc for
-00010690: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
-000106a0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-000106b0: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-000106c0: 4661 7374 4172 7261 7929 2061 6e64 2069  FastArray) and i
-000106d0: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
-000106e0: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
-000106f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010700: 7265 7375 6c74 203d 2072 6573 756c 742e  result = result.
-00010710: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
-00010720: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00010730: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
-00010740: 2020 2020 2020 7265 7375 6c74 203d 2066        result = f
-00010750: 756e 6328 6f74 6865 7229 0d0a 2020 2020  unc(other)..    
-00010760: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00010770: 740d 0a0d 0a20 2020 2064 6566 205f 5f6e  t....    def __n
-00010780: 655f 5f28 7365 6c66 2c20 6f74 6865 7229  e__(self, other)
-00010790: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-000107a0: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
-000107b0: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
-000107c0: 6e65 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  ne__, other)....
-000107d0: 2020 2020 6465 6620 5f5f 6571 5f5f 2873      def __eq__(s
-000107e0: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
-000107f0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00010800: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
-00010810: 2873 7570 6572 2829 2e5f 5f65 715f 5f2c  (super().__eq__,
-00010820: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
-00010830: 6566 205f 5f67 655f 5f28 7365 6c66 2c20  ef __ge__(self, 
-00010840: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
-00010850: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
-00010860: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
-00010870: 7228 292e 5f5f 6765 5f5f 2c20 6f74 6865  r().__ge__, othe
-00010880: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
-00010890: 6774 5f5f 2873 656c 662c 206f 7468 6572  gt__(self, other
-000108a0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-000108b0: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
-000108c0: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
-000108d0: 5f67 745f 5f2c 206f 7468 6572 290d 0a0d  _gt__, other)...
-000108e0: 0a20 2020 2064 6566 205f 5f6c 655f 5f28  .    def __le__(
-000108f0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
-00010900: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00010910: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
-00010920: 6b28 7375 7065 7228 292e 5f5f 6c65 5f5f  k(super().__le__
-00010930: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
-00010940: 6465 6620 5f5f 6c74 5f5f 2873 656c 662c  def __lt__(self,
-00010950: 206f 7468 6572 293a 0d0a 2020 2020 2020   other):..      
-00010960: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
-00010970: 6f6d 7061 7265 5f63 6865 636b 2873 7570  ompare_check(sup
-00010980: 6572 2829 2e5f 5f6c 745f 5f2c 206f 7468  er().__lt__, oth
-00010990: 6572 290d 0a0d 0a20 2020 2064 6566 2065  er)....    def e
-000109a0: 7128 7365 6c66 2c20 6f74 6865 7229 3a0d  q(self, other):.
-000109b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000109c0: 7365 6c66 2e5f 5f65 715f 5f28 6f74 6865  self.__eq__(othe
-000109d0: 7229 0d0a 0d0a 2020 2020 6465 6620 6e65  r)....    def ne
-000109e0: 2873 656c 662c 206f 7468 6572 293a 0d0a  (self, other):..
-000109f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00010a00: 656c 662e 5f5f 6e65 5f5f 286f 7468 6572  elf.__ne__(other
-00010a10: 290d 0a0d 0a20 2020 2064 6566 2067 6528  )....    def ge(
-00010a20: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
-00010a30: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00010a40: 6c66 2e5f 5f67 655f 5f28 6f74 6865 7229  lf.__ge__(other)
-00010a50: 0d0a 0d0a 2020 2020 6465 6620 6c65 2873  ....    def le(s
-00010a60: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
-00010a70: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00010a80: 662e 5f5f 6c65 5f5f 286f 7468 6572 290d  f.__le__(other).
-00010a90: 0a0d 0a20 2020 2064 6566 2067 7428 7365  ...    def gt(se
-00010aa0: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
-00010ab0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00010ac0: 2e5f 5f67 745f 5f28 6f74 6865 7229 0d0a  .__gt__(other)..
-00010ad0: 0d0a 2020 2020 6465 6620 6c74 2873 656c  ..    def lt(sel
-00010ae0: 662c 206f 7468 6572 293a 0d0a 2020 2020  f, other):..    
-00010af0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00010b00: 5f5f 6c74 5f5f 286f 7468 6572 290d 0a0d  __lt__(other)...
-00010b10: 0a20 2020 2061 6464 203d 206e 702e 6e64  .    add = np.nd
-00010b20: 6172 7261 792e 5f5f 6164 645f 5f0d 0a20  array.__add__.. 
-00010b30: 2020 2073 7562 203d 206e 702e 6e64 6172     sub = np.ndar
-00010b40: 7261 792e 5f5f 7375 625f 5f0d 0a20 2020  ray.__sub__..   
-00010b50: 206d 756c 203d 206e 702e 6e64 6172 7261   mul = np.ndarra
-00010b60: 792e 5f5f 6d75 6c5f 5f0d 0a20 2020 2064  y.__mul__..    d
-00010b70: 6976 203d 206e 702e 6e64 6172 7261 792e  iv = np.ndarray.
-00010b80: 5f5f 7472 7565 6469 765f 5f0d 0a20 2020  __truediv__..   
-00010b90: 2066 6c6f 6f72 6469 7620 3d20 6e70 2e6e   floordiv = np.n
-00010ba0: 6461 7272 6179 2e5f 5f66 6c6f 6f72 6469  darray.__floordi
-00010bb0: 765f 5f0d 0a20 2020 2070 6f77 203d 206e  v__..    pow = n
-00010bc0: 702e 6e64 6172 7261 792e 5f5f 706f 775f  p.ndarray.__pow_
-00010bd0: 5f0d 0a20 2020 206d 6f64 203d 206e 702e  _..    mod = np.
-00010be0: 6e64 6172 7261 792e 5f5f 6d6f 645f 5f0d  ndarray.__mod__.
-00010bf0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00010c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c40: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7374  ----..    def st
-00010c50: 725f 6170 7065 6e64 2873 656c 662c 206f  r_append(self, o
-00010c60: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
-00010c70: 6966 2073 656c 662e 6474 7970 652e 6e75  if self.dtype.nu
-00010c80: 6d20 3d3d 206f 7468 6572 2e64 7479 7065  m == other.dtype
-00010c90: 2e6e 756d 3a0d 0a20 2020 2020 2020 2020  .num:..         
-00010ca0: 2020 2066 756e 6320 3d20 5479 7065 5265     func = TypeRe
-00010cb0: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
-00010cc0: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
-00010cd0: 5f49 4e50 5554 530d 0a20 2020 2020 2020  _INPUTS..       
-00010ce0: 2020 2020 2072 6574 7572 6e20 6675 6e63       return func
-00010cf0: 2828 7365 6c66 2c20 6f74 6865 7229 2c20  ((self, other), 
-00010d00: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e41  MATH_OPERATION.A
-00010d10: 4444 2c20 7365 6c66 2e64 7479 7065 2e6e  DD, self.dtype.n
-00010d20: 756d 290d 0a20 2020 2020 2020 2072 6169  um)..        rai
-00010d30: 7365 2054 7970 6545 7272 6f72 2822 6361  se TypeError("ca
-00010d40: 6e6e 6f74 2063 6f6e 6361 7422 290d 0a0d  nnot concat")...
-00010d50: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-00010d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010da0: 2d2d 0d0a 2020 2020 6465 6620 7371 7565  --..    def sque
-00010db0: 657a 6528 7365 6c66 2c20 2a61 7267 732c  eze(self, *args,
-00010dc0: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
-00010dd0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00010de0: 2e5f 6e70 2e73 7175 6565 7a65 282a 6172  ._np.squeeze(*ar
-00010df0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-00010e00: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-00010e10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000caa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cac0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2066  -----..    def f
+0000cad0: 696c 6c5f 696e 7661 6c69 6428 7365 6c66  ill_invalid(self
+0000cae0: 2c20 7368 6170 653d 4e6f 6e65 2c20 6474  , shape=None, dt
+0000caf0: 7970 653d 4e6f 6e65 2c20 696e 706c 6163  ype=None, inplac
+0000cb00: 653d 5472 7565 2920 2d3e 2046 6173 7441  e=True) -> FastA
+0000cb10: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+0000cb20: 2222 0d0a 2020 2020 2020 2020 4669 6c6c  ""..        Fill
+0000cb30: 7320 6172 7261 7920 6f72 2072 6574 7572  s array or retur
+0000cb40: 6e73 2063 6f70 7920 6f66 2061 7272 6179  ns copy of array
+0000cb50: 2077 6974 6820 696e 7661 6c69 6420 7661   with invalid va
+0000cb60: 6c75 6520 6f66 2061 7272 6179 2773 2064  lue of array's d
+0000cb70: 7479 7065 206f 7220 6120 7370 6563 6966  type or a specif
+0000cb80: 6965 6420 6f6e 652e 0d0a 2020 2020 2020  ied one...      
+0000cb90: 2020 5761 726e 696e 673a 2062 7920 6465    Warning: by de
+0000cba0: 6661 756c 7420 7468 6973 206f 7065 7261  fault this opera
+0000cbb0: 7469 6f6e 2069 7320 696e 706c 6163 652e  tion is inplace.
+0000cbc0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0000cbd0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+0000cbe0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000cbf0: 3e3e 3e20 613d 7274 2e61 7261 6e67 6528  >>> a=rt.arange(
+0000cc00: 3529 2e66 696c 6c5f 696e 7661 6c69 6428  5).fill_invalid(
+0000cc10: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0000cc20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000cc30: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
+0000cc40: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
+0000cc50: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
+0000cc60: 3734 3833 3634 382c 202d 3231 3437 3438  7483648, -214748
+0000cc70: 3336 3438 5d29 0d0a 0d0a 2020 2020 2020  3648])....      
+0000cc80: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
+0000cc90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+0000cca0: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
+0000ccb0: 696e 760d 0a20 2020 2020 2020 2046 6173  inv..        Fas
+0000ccc0: 7441 7272 6179 2e66 696c 6c5f 696e 7661  tArray.fill_inva
+0000ccd0: 6c69 640d 0a20 2020 2020 2020 2022 2222  lid..        """
+0000cce0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0000ccf0: 2073 656c 662e 5f66 696c 6c5f 696e 7661   self._fill_inva
+0000cd00: 6c69 645f 696e 7465 726e 616c 2873 6861  lid_internal(sha
+0000cd10: 7065 3d73 6861 7065 2c20 6474 7970 653d  pe=shape, dtype=
+0000cd20: 6474 7970 652c 2069 6e70 6c61 6365 3d69  dtype, inplace=i
+0000cd30: 6e70 6c61 6365 290d 0a0d 0a20 2020 2064  nplace)....    d
+0000cd40: 6566 205f 6669 6c6c 5f69 6e76 616c 6964  ef _fill_invalid
+0000cd50: 5f69 6e74 6572 6e61 6c28 7365 6c66 2c20  _internal(self, 
+0000cd60: 7368 6170 653d 4e6f 6e65 2c20 6474 7970  shape=None, dtyp
+0000cd70: 653d 4e6f 6e65 2c20 696e 706c 6163 653d  e=None, inplace=
+0000cd80: 5472 7565 2c20 6669 6c6c 5f76 616c 3d4e  True, fill_val=N
+0000cd90: 6f6e 6529 3a0d 0a20 2020 2020 2020 2069  one):..        i
+0000cda0: 6620 6474 7970 6520 6973 204e 6f6e 653a  f dtype is None:
+0000cdb0: 0d0a 2020 2020 2020 2020 2020 2020 6474  ..            dt
+0000cdc0: 7970 6520 3d20 7365 6c66 2e64 7479 7065  ype = self.dtype
+0000cdd0: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
+0000cde0: 6e73 7461 6e63 6528 6474 7970 652c 2073  nstance(dtype, s
+0000cdf0: 7472 293a 0d0a 2020 2020 2020 2020 2020  tr):..          
+0000ce00: 2020 6474 7970 6520 3d20 6e70 2e64 7479    dtype = np.dty
+0000ce10: 7065 2864 7479 7065 290d 0a20 2020 2020  pe(dtype)..     
+0000ce20: 2020 2069 6620 7368 6170 6520 6973 204e     if shape is N
+0000ce30: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+0000ce40: 2020 7368 6170 6520 3d20 7365 6c66 2e73    shape = self.s
+0000ce50: 6861 7065 0d0a 2020 2020 2020 2020 656c  hape..        el
+0000ce60: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+0000ce70: 6528 7368 6170 652c 2074 7570 6c65 293a  e(shape, tuple):
+0000ce80: 0d0a 2020 2020 2020 2020 2020 2020 7368  ..            sh
+0000ce90: 6170 6520 3d20 2873 6861 7065 2c29 0d0a  ape = (shape,)..
+0000cea0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
+0000ceb0: 6c5f 7661 6c20 6973 204e 6f6e 653a 0d0a  l_val is None:..
+0000cec0: 2020 2020 2020 2020 2020 2020 696e 7620              inv 
+0000ced0: 3d20 494e 5641 4c49 445f 4449 4354 5b64  = INVALID_DICT[d
+0000cee0: 7479 7065 2e6e 756d 5d0d 0a20 2020 2020  type.num]..     
+0000cef0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000cf00: 2020 2020 2020 696e 7620 3d20 6669 6c6c        inv = fill
+0000cf10: 5f76 616c 0d0a 0d0a 2020 2020 2020 2020  _val....        
+0000cf20: 6966 2069 6e70 6c61 6365 2069 7320 5472  if inplace is Tr
+0000cf30: 7565 3a0d 0a20 2020 2020 2020 2020 2020  ue:..           
+0000cf40: 2069 6620 7368 6170 6520 213d 2073 656c   if shape != sel
+0000cf50: 662e 7368 6170 653a 0d0a 2020 2020 2020  f.shape:..      
+0000cf60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000cf70: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
+0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf90: 2066 2249 6e70 6c61 6365 2066 696c 6c20   f"Inplace fill 
+0000cfa0: 696e 7661 6c69 6420 6361 6e6e 6f74 2062  invalid cannot b
+0000cfb0: 6520 6469 6666 6572 656e 7420 6e75 6d62  e different numb
+0000cfc0: 6572 206f 6620 726f 7773 2074 6861 6e20  er of rows than 
+0000cfd0: 6578 6973 7469 6e67 2061 7272 6179 2e20  existing array. 
+0000cfe0: 476f 7420 7b73 6861 7065 7d20 7673 2e20  Got {shape} vs. 
+0000cff0: 6c65 6e67 7468 207b 6c65 6e28 7365 6c66  length {len(self
+0000d000: 297d 220d 0a20 2020 2020 2020 2020 2020  )}"..           
+0000d010: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000d020: 2020 2020 6966 2064 7479 7065 2021 3d20      if dtype != 
+0000d030: 7365 6c66 2e64 7479 7065 3a0d 0a20 2020  self.dtype:..   
+0000d040: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0000d050: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
+0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d070: 2020 2020 6622 496e 706c 6163 6520 6669      f"Inplace fi
+0000d080: 6c6c 2069 6e76 616c 6964 2063 616e 6e6f  ll invalid canno
+0000d090: 7420 6265 2064 6966 6665 7265 6e74 2064  t be different d
+0000d0a0: 7479 7065 2074 6861 6e20 6578 6973 7469  type than existi
+0000d0b0: 6e67 2061 7272 6179 2e20 476f 7420 7b64  ng array. Got {d
+0000d0c0: 7479 7065 7d20 7673 2e20 7b6c 656e 2873  type} vs. {len(s
+0000d0d0: 656c 662e 6474 7970 6529 7d22 0d0a 2020  elf.dtype)}"..  
+0000d0e0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+0000d0f0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+0000d100: 656c 662e 6669 6c6c 2869 6e76 290d 0a20  elf.fill(inv).. 
+0000d110: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000d120: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
+0000d130: 6675 6c6c 2873 6861 7065 2c20 696e 762c  full(shape, inv,
+0000d140: 2064 7479 7065 3d64 7479 7065 290d 0a20   dtype=dtype).. 
+0000d150: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000d160: 6e20 6172 720d 0a0d 0a20 2020 2023 202d  n arr....    # -
+0000d170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d1b0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+0000d1c0: 6620 6973 696e 2873 656c 662c 2074 6573  f isin(self, tes
+0000d1d0: 745f 656c 656d 656e 7473 2c20 6173 7375  t_elements, assu
+0000d1e0: 6d65 5f75 6e69 7175 653d 4661 6c73 652c  me_unique=False,
+0000d1f0: 2069 6e76 6572 743d 4661 6c73 6529 202d   invert=False) -
+0000d200: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+0000d210: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000d220: 2020 2043 616c 6375 6c61 7465 7320 6073     Calculates `s
+0000d230: 656c 6620 696e 2074 6573 745f 656c 656d  elf in test_elem
+0000d240: 656e 7473 602c 2062 726f 6164 6361 7374  ents`, broadcast
+0000d250: 696e 6720 6f76 6572 2060 7365 6c66 6020  ing over `self` 
+0000d260: 6f6e 6c79 2e0d 0a20 2020 2020 2020 2052  only...        R
+0000d270: 6574 7572 6e73 2061 2062 6f6f 6c65 616e  eturns a boolean
+0000d280: 2061 7272 6179 206f 6620 7468 6520 7361   array of the sa
+0000d290: 6d65 2073 6861 7065 2061 7320 6073 656c  me shape as `sel
+0000d2a0: 6660 2074 6861 7420 6973 2054 7275 650d  f` that is True.
+0000d2b0: 0a20 2020 2020 2020 2077 6865 7265 2061  .        where a
+0000d2c0: 6e20 656c 656d 656e 7420 6f66 2060 7365  n element of `se
+0000d2d0: 6c66 6020 6973 2069 6e20 6074 6573 745f  lf` is in `test_
+0000d2e0: 656c 656d 656e 7473 6020 616e 6420 4661  elements` and Fa
+0000d2f0: 6c73 6520 6f74 6865 7277 6973 652e 0d0a  lse otherwise...
+0000d300: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0000d310: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+0000d320: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0000d330: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000d340: 3a20 6172 7261 795f 6c69 6b65 0d0a 2020  : array_like..  
+0000d350: 2020 2020 2020 2020 2020 5468 6520 7661            The va
+0000d360: 6c75 6573 2061 6761 696e 7374 2077 6869  lues against whi
+0000d370: 6368 2074 6f20 7465 7374 2065 6163 6820  ch to test each 
+0000d380: 7661 6c75 6520 6f66 2060 656c 656d 656e  value of `elemen
+0000d390: 7460 2e0d 0a20 2020 2020 2020 2020 2020  t`...           
+0000d3a0: 2054 6869 7320 6172 6775 6d65 6e74 2069   This argument i
+0000d3b0: 7320 666c 6174 7465 6e65 6420 6966 2069  s flattened if i
+0000d3c0: 7420 6973 2061 6e20 6172 7261 7920 6f72  t is an array or
+0000d3d0: 2061 7272 6179 5f6c 696b 652e 0d0a 2020   array_like...  
+0000d3e0: 2020 2020 2020 2020 2020 5365 6520 6e6f            See no
+0000d3f0: 7465 7320 666f 7220 6265 6861 7669 6f72  tes for behavior
+0000d400: 2077 6974 6820 6e6f 6e2d 6172 7261 792d   with non-array-
+0000d410: 6c69 6b65 2070 6172 616d 6574 6572 732e  like parameters.
+0000d420: 0d0a 2020 2020 2020 2020 6173 7375 6d65  ..        assume
+0000d430: 5f75 6e69 7175 6520 3a20 626f 6f6c 2c20  _unique : bool, 
+0000d440: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+0000d450: 2020 2020 2020 4966 2054 7275 652c 2074        If True, t
+0000d460: 6865 2069 6e70 7574 2061 7272 6179 7320  he input arrays 
+0000d470: 6172 6520 626f 7468 2061 7373 756d 6564  are both assumed
+0000d480: 2074 6f20 6265 2075 6e69 7175 652c 2077   to be unique, w
+0000d490: 6869 6368 0d0a 2020 2020 2020 2020 2020  hich..          
+0000d4a0: 2020 6361 6e20 7370 6565 6420 7570 2074    can speed up t
+0000d4b0: 6865 2063 616c 6375 6c61 7469 6f6e 2e20  he calculation. 
+0000d4c0: 2044 6566 6175 6c74 2069 7320 4661 6c73   Default is Fals
+0000d4d0: 652e 0d0a 2020 2020 2020 2020 696e 7665  e...        inve
+0000d4e0: 7274 203a 2062 6f6f 6c2c 206f 7074 696f  rt : bool, optio
+0000d4f0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+0000d500: 2049 6620 5472 7565 2c20 7468 6520 7661   If True, the va
+0000d510: 6c75 6573 2069 6e20 7468 6520 7265 7475  lues in the retu
+0000d520: 726e 6564 2061 7272 6179 2061 7265 2069  rned array are i
+0000d530: 6e76 6572 7465 642c 2061 7320 6966 0d0a  nverted, as if..
+0000d540: 2020 2020 2020 2020 2020 2020 6361 6c63              calc
+0000d550: 756c 6174 696e 6720 6065 6c65 6d65 6e74  ulating `element
+0000d560: 206e 6f74 2069 6e20 7465 7374 5f65 6c65   not in test_ele
+0000d570: 6d65 6e74 7360 2e20 4465 6661 756c 7420  ments`. Default 
+0000d580: 6973 2046 616c 7365 2e0d 0a20 2020 2020  is False...     
+0000d590: 2020 2020 2020 2060 606e 702e 6973 696e         ``np.isin
+0000d5a0: 2861 2c20 622c 2069 6e76 6572 743d 5472  (a, b, invert=Tr
+0000d5b0: 7565 2960 6020 6973 2065 7175 6976 616c  ue)`` is equival
+0000d5c0: 656e 7420 746f 2028 6275 7420 6661 7374  ent to (but fast
+0000d5d0: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+0000d5e0: 7468 616e 2920 6060 6e70 2e69 6e76 6572  than) ``np.inver
+0000d5f0: 7428 6e70 2e69 7369 6e28 612c 2062 2929  t(np.isin(a, b))
+0000d600: 6060 2e0d 0a0d 0a20 2020 2020 2020 2052  ``.....        R
+0000d610: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0000d620: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000d630: 2069 7369 6e20 3a20 6e64 6172 7261 792c   isin : ndarray,
+0000d640: 2062 6f6f 6c0d 0a20 2020 2020 2020 2020   bool..         
+0000d650: 2020 2048 6173 2074 6865 2073 616d 6520     Has the same 
+0000d660: 7368 6170 6520 6173 2060 656c 656d 656e  shape as `elemen
+0000d670: 7460 2e20 5468 6520 7661 6c75 6573 2060  t`. The values `
+0000d680: 656c 656d 656e 745b 6973 696e 5d60 0d0a  element[isin]`..
+0000d690: 2020 2020 2020 2020 2020 2020 6172 6520              are 
+0000d6a0: 696e 2060 7465 7374 5f65 6c65 6d65 6e74  in `test_element
+0000d6b0: 7360 2e0d 0a0d 0a20 2020 2020 2020 204e  s`.....        N
+0000d6c0: 6f74 653a 2062 6568 6176 696f 7220 6469  ote: behavior di
+0000d6d0: 6666 6572 7320 6672 6f6d 2070 616e 6461  ffers from panda
+0000d6e0: 730d 0a20 2020 2020 2020 202d 2052 6970  s..        - Rip
+0000d6f0: 7461 626c 6520 6661 766f 7273 2062 7974  table favors byt
+0000d700: 6573 7472 696e 6773 2c20 616e 6420 7769  estrings, and wi
+0000d710: 6c6c 206d 616b 6520 636f 6e76 6572 7369  ll make conversi
+0000d720: 6f6e 7320 6672 6f6d 2075 6e69 636f 6465  ons from unicode
+0000d730: 2f62 7974 6573 2074 6f20 6d61 7463 6820  /bytes to match 
+0000d740: 666f 7220 6f70 6572 6174 696f 6e73 2061  for operations a
+0000d750: 7320 6e65 6365 7373 6172 792e 0d0a 2020  s necessary...  
+0000d760: 2020 2020 2020 2d20 5765 2077 696c 6c20        - We will 
+0000d770: 616c 736f 2061 6363 6570 7420 7369 6e67  also accept sing
+0000d780: 6c65 2073 6361 6c61 7273 2066 6f72 2076  le scalars for v
+0000d790: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
+0000d7a0: 2d20 5061 6e64 6173 2073 6572 6965 7320  - Pandas series 
+0000d7b0: 7769 6c6c 2072 6574 7572 6e20 616e 6f74  will return anot
+0000d7c0: 6865 7220 7365 7269 6573 202d 2077 6520  her series - we 
+0000d7d0: 6861 7665 206e 6f20 7365 7269 6573 2c20  have no series, 
+0000d7e0: 616e 6420 7769 6c6c 2072 6574 7572 6e20  and will return 
+0000d7f0: 6120 4661 7374 4172 7261 790d 0a0d 0a20  a FastArray.... 
+0000d800: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+0000d810: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000d820: 2d0d 0a20 2020 2020 2020 203e 3e3e 2066  -..        >>> f
+0000d830: 726f 6d20 7269 7074 6162 6c65 2069 6d70  rom riptable imp
+0000d840: 6f72 7420 2a0d 0a20 2020 2020 2020 203e  ort *..        >
+0000d850: 3e3e 2061 203d 2046 4128 5b27 6127 2c27  >> a = FA(['a','
+0000d860: 6227 2c27 6327 2c27 6427 2c27 6527 5d2c  b','c','d','e'],
+0000d870: 2075 6e69 636f 6465 3d46 616c 7365 290d   unicode=False).
+0000d880: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+0000d890: 7369 6e28 5b27 6127 2c27 6227 5d29 0d0a  sin(['a','b'])..
+0000d8a0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000d8b0: 7928 5b20 5472 7565 2c20 2054 7275 652c  y([ True,  True,
+0000d8c0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
+0000d8d0: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
+0000d8e0: 3e3e 3e20 612e 6973 696e 2827 6127 290d  >>> a.isin('a').
+0000d8f0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0000d900: 6179 285b 2054 7275 652c 2020 4661 6c73  ay([ True,  Fals
+0000d910: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+0000d920: 2046 616c 7365 5d29 0d0a 2020 2020 2020   False])..      
+0000d930: 2020 3e3e 3e20 612e 6973 696e 287b 2762    >>> a.isin({'b
+0000d940: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
+0000d950: 7441 7272 6179 285b 2046 616c 7365 2c20  tArray([ False, 
+0000d960: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+0000d970: 7365 2c20 4661 6c73 655d 290d 0a20 2020  se, False])..   
+0000d980: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000d990: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000d9a0: 7465 7374 5f65 6c65 6d65 6e74 732c 2073  test_elements, s
+0000d9b0: 6574 293a 0d0a 2020 2020 2020 2020 2020  et):..          
+0000d9c0: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000d9d0: 3d20 6c69 7374 2874 6573 745f 656c 656d  = list(test_elem
+0000d9e0: 656e 7473 290d 0a0d 0a20 2020 2020 2020  ents)....       
+0000d9f0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+0000da00: 6365 2874 6573 745f 656c 656d 656e 7473  ce(test_elements
+0000da10: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+0000da20: 2020 2020 2020 2020 2020 2020 2320 616c              # al
+0000da30: 6967 6e20 6279 7465 2073 7472 696e 6720  ign byte string 
+0000da40: 7673 2075 6e69 636f 6465 0d0a 2020 2020  vs unicode..    
+0000da50: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000da60: 6474 7970 652e 6368 6172 2069 6e20 2253  dtype.char in "S
+0000da70: 5522 3a0d 0a20 2020 2020 2020 2020 2020  U":..           
+0000da80: 2020 2020 2069 6620 6e70 2e69 7373 6361       if np.issca
+0000da90: 6c61 7228 7465 7374 5f65 6c65 6d65 6e74  lar(test_element
+0000daa0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+0000dab0: 2020 2020 2020 2020 2074 6573 745f 656c           test_el
+0000dac0: 656d 656e 7473 203d 206e 702e 6173 6172  ements = np.asar
+0000dad0: 7261 7928 5b74 6573 745f 656c 656d 656e  ray([test_elemen
+0000dae0: 7473 5d2c 2064 7479 7065 3d73 656c 662e  ts], dtype=self.
+0000daf0: 6474 7970 652e 6368 6172 290d 0a20 2020  dtype.char)..   
+0000db00: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000db10: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000db20: 2020 2020 2020 2020 7465 7374 5f65 6c65          test_ele
+0000db30: 6d65 6e74 7320 3d20 6e70 2e61 7361 7272  ments = np.asarr
+0000db40: 6179 2874 6573 745f 656c 656d 656e 7473  ay(test_elements
+0000db50: 2c20 6474 7970 653d 7365 6c66 2e64 7479  , dtype=self.dty
+0000db60: 7065 2e63 6861 7229 0d0a 2020 2020 2020  pe.char)..      
+0000db70: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0000db80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000db90: 6973 696e 7374 616e 6365 2874 6573 745f  isinstance(test_
+0000dba0: 656c 656d 656e 7473 2c20 7475 706c 6529  elements, tuple)
+0000dbb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000dbc0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0000dbd0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+0000dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dbf0: 2020 2269 7369 6e20 646f 6573 206e 6f74    "isin does not
+0000dc00: 2063 7572 7265 6e74 6c79 2073 7570 706f   currently suppo
+0000dc10: 7274 2074 7570 6c65 732e 2020 496e 2074  rt tuples.  In t
+0000dc20: 6865 2066 7574 7572 6520 6120 7475 706c  he future a tupl
+0000dc30: 6520 7769 6c6c 2062 6520 7573 6564 2074  e will be used t
+0000dc40: 6f20 7265 7072 6573 656e 7420 6120 6d75  o represent a mu
+0000dc50: 6c74 692d 6b65 792e 220d 0a20 2020 2020  lti-key."..     
+0000dc60: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000dc70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000dc80: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000dc90: 3d20 7263 2e41 7346 6173 7441 7272 6179  = rc.AsFastArray
+0000dca0: 2874 6573 745f 656c 656d 656e 7473 290d  (test_elements).
+0000dcb0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000dcc0: 0a20 2020 2020 2020 2020 2020 2023 206f  .            # o
+0000dcd0: 7074 696d 697a 6174 696f 6e3a 2069 6620  ptimization: if 
+0000dce0: 7765 2068 6176 6520 6a75 7374 206f 6e65  we have just one
+0000dcf0: 2065 6c65 6d65 6e74 2c20 7765 2063 616e   element, we can
+0000dd00: 206a 7573 7420 7061 7261 6c6c 656c 2063   just parallel c
+0000dd10: 6f6d 7061 7265 2074 6861 7420 6f6e 6520  ompare that one 
+0000dd20: 656c 656d 656e 740d 0a20 2020 2020 2020  element..       
+0000dd30: 2020 2020 2069 6620 6c65 6e28 7465 7374       if len(test
+0000dd40: 5f65 6c65 6d65 6e74 7329 203d 3d20 313a  _elements) == 1:
+0000dd50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000dd60: 2020 2320 7374 7269 6e67 2063 6f6d 7061    # string compa
+0000dd70: 7269 736f 6e20 746f 2069 6e74 2077 696c  rison to int wil
+0000dd80: 6c20 6661 696c 0d0a 2020 2020 2020 2020  l fail..        
+0000dd90: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000dda0: 2073 656c 6620 3d3d 2074 6573 745f 656c   self == test_el
+0000ddb0: 656d 656e 7473 5b30 5d0d 0a20 2020 2020  ements[0]..     
+0000ddc0: 2020 2020 2020 2020 2020 2023 2063 6865             # che
+0000ddd0: 636b 2066 6f72 2066 6169 6c65 6420 7265  ck for failed re
+0000dde0: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
+0000ddf0: 2020 2020 2020 6966 206e 702e 6973 7363        if np.issc
+0000de00: 616c 6172 2872 6573 756c 7429 3a0d 0a20  alar(result):.. 
+0000de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de20: 2020 2072 6573 756c 7420 3d20 6973 6d65     result = isme
+0000de30: 6d62 6572 2873 656c 662c 2074 6573 745f  mber(self, test_
+0000de40: 656c 656d 656e 7473 295b 305d 0d0a 2020  elements)[0]..  
+0000de50: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0000de60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000de70: 2072 6573 756c 7420 3d20 6973 6d65 6d62   result = ismemb
+0000de80: 6572 2873 656c 662c 2074 6573 745f 656c  er(self, test_el
+0000de90: 656d 656e 7473 295b 305d 0d0a 2020 2020  ements)[0]..    
+0000dea0: 2020 2020 2020 2020 6966 2069 6e76 6572          if inver
+0000deb0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0000dec0: 2020 2020 6e70 2e6c 6f67 6963 616c 5f6e      np.logical_n
+0000ded0: 6f74 2872 6573 756c 742c 206f 7574 3d72  ot(result, out=r
+0000dee0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+0000def0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+0000df00: 740d 0a20 2020 2020 2020 2065 7863 6570  t..        excep
+0000df10: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+0000df20: 2020 2020 2020 2020 2020 2320 7075 6e74            # punt
+0000df30: 206e 6f6e 2d73 7570 706f 7274 6564 2074   non-supported t
+0000df40: 7970 6573 2074 6f20 6e75 6d70 790d 0a20  ypes to numpy.. 
+0000df50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000df60: 6e20 6e70 2e69 7369 6e28 7365 6c66 2e5f  n np.isin(self._
+0000df70: 6e70 2c20 7465 7374 5f65 6c65 6d65 6e74  np, test_element
+0000df80: 732c 2061 7373 756d 655f 756e 6971 7565  s, assume_unique
+0000df90: 3d61 7373 756d 655f 756e 6971 7565 2c20  =assume_unique, 
+0000dfa0: 696e 7665 7274 3d69 6e76 6572 7429 0d0a  invert=invert)..
+0000dfb0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0000dfc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000dfd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000dfe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000dff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e000: 2d0d 0a20 2020 2064 6566 2062 6574 7765  -..    def betwe
+0000e010: 656e 2873 656c 662c 206c 6f77 2c20 6869  en(self, low, hi
+0000e020: 6768 2c20 696e 636c 7564 655f 6c6f 773a  gh, include_low:
+0000e030: 2062 6f6f 6c20 3d20 5472 7565 2c20 696e   bool = True, in
+0000e040: 636c 7564 655f 6869 6768 3a20 626f 6f6c  clude_high: bool
+0000e050: 203d 2046 616c 7365 2920 2d3e 2046 6173   = False) -> Fas
+0000e060: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+0000e070: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+0000e080: 7475 726e 2061 2062 6f6f 6c65 616e 2060  turn a boolean `
+0000e090: 4661 7374 4172 7261 7960 2069 6e64 6963  FastArray` indic
+0000e0a0: 6174 696e 6720 7768 6963 6820 696e 7075  ating which inpu
+0000e0b0: 7420 7661 6c75 6573 2061 7265 2069 6e20  t values are in 
+0000e0c0: 6120 7370 6563 6966 6965 6420 696e 7465  a specified inte
+0000e0d0: 7276 616c 2e0d 0a0d 0a20 2020 2020 2020  rval.....       
+0000e0e0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+0000e0f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+0000e100: 0a20 2020 2020 2020 206c 6f77 3a20 7363  .        low: sc
+0000e110: 616c 6172 2c20 6172 7261 790d 0a20 2020  alar, array..   
+0000e120: 2020 2020 2020 2020 204c 6f77 6572 2062           Lower b
+0000e130: 6f75 6e64 2066 6f72 2074 6865 2069 6e74  ound for the int
+0000e140: 6572 7661 6c2e 2049 6620 616e 2061 7272  erval. If an arr
+0000e150: 6179 2c20 6d75 7374 2062 6520 7468 6520  ay, must be the 
+0000e160: 7361 6d65 2073 697a 6520 6173 2060 7365  same size as `se
+0000e170: 6c66 602c 2061 6e64 2063 6f6d 7061 7269  lf`, and compari
+0000e180: 736f 6e73 2061 7265 2064 6f6e 6520 656c  sons are done el
+0000e190: 656d 656e 7477 6973 652e 0d0a 2020 2020  ementwise...    
+0000e1a0: 2020 2020 6869 6768 3a20 7363 616c 6172      high: scalar
+0000e1b0: 2c20 6172 7261 790d 0a20 2020 2020 2020  , array..       
+0000e1c0: 2020 2020 2055 7070 6572 2062 6f75 6e64       Upper bound
+0000e1d0: 2066 6f72 2074 6865 2069 6e74 6572 7661   for the interva
+0000e1e0: 6c2e 2049 6620 616e 2061 7272 6179 2c20  l. If an array, 
+0000e1f0: 6d75 7374 2062 6520 7468 6520 7361 6d65  must be the same
+0000e200: 2073 697a 6520 6173 2060 7365 6c66 602c   size as `self`,
+0000e210: 2061 6e64 2063 6f6d 7061 7269 736f 6e73   and comparisons
+0000e220: 2061 7265 2064 6f6e 6520 656c 656d 656e   are done elemen
+0000e230: 7477 6973 652e 0d0a 2020 2020 2020 2020  twise...        
+0000e240: 696e 636c 7564 655f 6c6f 773a 2062 6f6f  include_low: boo
+0000e250: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
+0000e260: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+0000e270: 6369 6669 6573 2077 6865 7468 6572 2060  cifies whether `
+0000e280: 6c6f 7760 2069 7320 696e 636c 7564 6564  low` is included
+0000e290: 2077 6865 6e20 7065 7266 6f72 6d69 6e67   when performing
+0000e2a0: 2063 6f6d 7061 7269 736f 6e73 2e0d 0a20   comparisons... 
+0000e2b0: 2020 2020 2020 2069 6e63 6c75 6465 5f68         include_h
+0000e2c0: 6967 683a 2062 6f6f 6c2c 2064 6566 6175  igh: bool, defau
+0000e2d0: 6c74 2046 616c 7365 0d0a 2020 2020 2020  lt False..      
+0000e2e0: 2020 2020 2020 5370 6563 6966 6965 7320        Specifies 
+0000e2f0: 7768 6574 6865 7220 6068 6967 6860 2069  whether `high` i
+0000e300: 7320 696e 636c 7564 6564 2077 6865 6e20  s included when 
+0000e310: 7065 7266 6f72 6d69 6e67 2063 6f6d 7061  performing compa
+0000e320: 7269 736f 6e73 2e0d 0a0d 0a20 2020 2020  risons.....     
+0000e330: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+0000e340: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+0000e350: 2020 2020 2046 6173 7441 7272 6179 0d0a       FastArray..
+0000e360: 2020 2020 2020 2020 2020 2020 4120 626f              A bo
+0000e370: 6f6c 6561 6e20 6046 6173 7441 7272 6179  olean `FastArray
+0000e380: 6020 696e 6469 6361 7469 6e67 2077 6869  ` indicating whi
+0000e390: 6368 2069 6e70 7574 2076 616c 7565 7320  ch input values 
+0000e3a0: 6172 6520 696e 2061 2073 7065 6369 6669  are in a specifi
+0000e3b0: 6564 2069 6e74 6572 7661 6c2e 0d0a 0d0a  ed interval.....
+0000e3c0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0000e3d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000e3e0: 2d2d 0d0a 2020 2020 2020 2020 5370 6563  --..        Spec
+0000e3f0: 6966 7920 616e 2069 6e74 6572 7661 6c20  ify an interval 
+0000e400: 7573 696e 6720 7363 616c 6172 733a 0d0a  using scalars:..
+0000e410: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0000e420: 3d20 7274 2e46 4128 5b39 2c20 322c 2033  = rt.FA([9, 2, 3
+0000e430: 2c20 352c 2038 2c20 392c 2031 2c20 342c  , 5, 8, 9, 1, 4,
+0000e440: 2036 5d29 0d0a 2020 2020 2020 2020 3e3e   6])..        >>
+0000e450: 3e20 612e 6265 7477 6565 6e28 352c 2039  > a.between(5, 9
+0000e460: 2c20 696e 636c 7564 655f 6c6f 773d 4661  , include_low=Fa
+0000e470: 6c73 6529 2020 2320 4578 636c 7564 6520  lse)  # Exclude 
+0000e480: 6035 6020 286c 6566 7420 656e 6470 6f69  `5` (left endpoi
+0000e490: 6e74 290d 0a20 2020 2020 2020 2046 6173  nt)..        Fas
+0000e4a0: 7441 7272 6179 285b 4661 6c73 652c 2046  tArray([False, F
+0000e4b0: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
+0000e4c0: 7365 2c20 2054 7275 652c 2046 616c 7365  se,  True, False
+0000e4d0: 2c20 4661 6c73 652c 2046 616c 7365 2c20  , False, False, 
+0000e4e0: 2054 7275 655d 290d 0a0d 0a20 2020 2020   True])....     
+0000e4f0: 2020 2053 7065 6369 6679 2061 6e20 696e     Specify an in
+0000e500: 7465 7276 616c 2075 7369 6e67 2061 7272  terval using arr
+0000e510: 6179 733a 0d0a 0d0a 2020 2020 2020 2020  ays:....        
+0000e520: 3e3e 3e20 6132 203d 2072 742e 4641 285b  >>> a2 = rt.FA([
+0000e530: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+0000e540: 0a20 2020 2020 2020 203e 3e3e 2061 322e  .        >>> a2.
+0000e550: 6265 7477 6565 6e28 5b31 2c20 332c 2035  between([1, 3, 5
+0000e560: 2c20 352c 2035 5d2c 205b 322c 2034 2c20  , 5, 5], [2, 4, 
+0000e570: 362c 2036 2c20 365d 290d 0a20 2020 2020  6, 6, 6])..     
+0000e580: 2020 2046 6173 7441 7272 6179 285b 2054     FastArray([ T
+0000e590: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
+0000e5a0: 652c 2046 616c 7365 2c20 2054 7275 655d  e, False,  True]
+0000e5b0: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
+0000e5c0: 6369 6679 2061 6e20 696e 7465 7276 616c  cify an interval
+0000e5d0: 206d 6978 696e 6720 7363 616c 6172 2061   mixing scalar a
+0000e5e0: 6e64 2061 7272 6179 2062 6f75 6e64 733a  nd array bounds:
+0000e5f0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0000e600: 6133 203d 2072 742e 4641 285b 312c 2032  a3 = rt.FA([1, 2
+0000e610: 2c20 332c 2034 2c20 355d 290d 0a20 2020  , 3, 4, 5])..   
+0000e620: 2020 2020 203e 3e3e 2061 332e 6265 7477       >>> a3.betw
+0000e630: 6565 6e28 322c 205b 322c 2034 2c20 362c  een(2, [2, 4, 6,
+0000e640: 2036 2c20 365d 290d 0a20 2020 2020 2020   6, 6])..       
+0000e650: 2046 6173 7441 7272 6179 285b 4661 6c73   FastArray([Fals
+0000e660: 652c 2020 5472 7565 2c20 2054 7275 652c  e,  True,  True,
+0000e670: 2020 5472 7565 2c20 2054 7275 655d 290d    True,  True]).
+0000e680: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0000e690: 2020 2020 2020 6c6f 7720 3d20 6173 616e        low = asan
+0000e6a0: 7961 7272 6179 286c 6f77 290d 0a20 2020  yarray(low)..   
+0000e6b0: 2020 2020 2068 6967 6820 3d20 6173 616e       high = asan
+0000e6c0: 7961 7272 6179 2868 6967 6829 0d0a 0d0a  yarray(high)....
+0000e6d0: 2020 2020 2020 2020 6966 2069 6e63 6c75          if inclu
+0000e6e0: 6465 5f6c 6f77 3a0d 0a20 2020 2020 2020  de_low:..       
+0000e6f0: 2020 2020 2072 6574 203d 2073 656c 6620       ret = self 
+0000e700: 3e3d 206c 6f77 0d0a 2020 2020 2020 2020  >= low..        
+0000e710: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000e720: 2020 2072 6574 203d 2073 656c 6620 3e20     ret = self > 
+0000e730: 6c6f 770d 0a20 2020 2020 2020 2069 6620  low..        if 
+0000e740: 696e 636c 7564 655f 6869 6768 3a0d 0a20  include_high:.. 
+0000e750: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
+0000e760: 3d20 7365 6c66 203c 3d20 6869 6768 0d0a  = self <= high..
+0000e770: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0000e780: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
+0000e790: 3d20 7365 6c66 203c 2068 6967 680d 0a20  = self < high.. 
+0000e7a0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0000e7b0: 740d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  t....    # -----
+0000e7c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e7d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e7e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e7f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e800: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2073  -----..    def s
+0000e810: 616d 706c 6528 0d0a 2020 2020 2020 2020  ample(..        
+0000e820: 7365 6c66 2c0d 0a20 2020 2020 2020 204e  self,..        N
+0000e830: 3a20 696e 7420 3d20 3130 2c0d 0a20 2020  : int = 10,..   
+0000e840: 2020 2020 2066 696c 7465 723a 204f 7074       filter: Opt
+0000e850: 696f 6e61 6c5b 6e70 2e6e 6461 7272 6179  ional[np.ndarray
+0000e860: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2020  ] = None,..     
+0000e870: 2020 2073 6565 643a 204f 7074 696f 6e61     seed: Optiona
+0000e880: 6c5b 556e 696f 6e5b 696e 742c 2053 6571  l[Union[int, Seq
+0000e890: 7565 6e63 655b 696e 745d 2c20 6e70 2e72  uence[int], np.r
+0000e8a0: 616e 646f 6d2e 5365 6564 5365 7175 656e  andom.SeedSequen
+0000e8b0: 6365 2c20 6e70 2e72 616e 646f 6d2e 4765  ce, np.random.Ge
+0000e8c0: 6e65 7261 746f 725d 5d20 3d20 4e6f 6e65  nerator]] = None
+0000e8d0: 2c0d 0a20 2020 2029 202d 3e20 4661 7374  ,..    ) -> Fast
+0000e8e0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+0000e8f0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+0000e900: 7572 6e20 6120 6769 7665 6e20 6e75 6d62  urn a given numb
+0000e910: 6572 206f 6620 7261 6e64 6f6d 6c79 2073  er of randomly s
+0000e920: 656c 6563 7465 6420 7661 6c75 6573 2066  elected values f
+0000e930: 726f 6d20 6120 6046 6173 7441 7272 6179  rom a `FastArray
+0000e940: 602e 0d0a 0d0a 2020 2020 2020 2020 5061  `.....        Pa
+0000e950: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0000e960: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0000e970: 2020 2020 2020 4e20 3a20 696e 742c 2064        N : int, d
+0000e980: 6566 6175 6c74 2031 300d 0a20 2020 2020  efault 10..     
+0000e990: 2020 2020 2020 204e 756d 6265 7220 6f66         Number of
+0000e9a0: 2076 616c 7565 7320 746f 2073 656c 6563   values to selec
+0000e9b0: 742e 2054 6865 2065 6e74 6972 6520 6172  t. The entire ar
+0000e9c0: 7261 7920 6973 2072 6574 7572 6e65 6420  ray is returned 
+0000e9d0: 6966 2060 4e60 2069 7320 6772 6561 7465  if `N` is greate
+0000e9e0: 7220 7468 616e 2074 6865 2073 697a 6520  r than the size 
+0000e9f0: 6f66 2074 6865 2061 7272 6179 2e0d 0a20  of the array... 
+0000ea00: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
+0000ea10: 6172 7261 7920 2862 6f6f 6c20 6f72 2069  array (bool or i
+0000ea20: 6e74 292c 206f 7074 696f 6e61 6c0d 0a20  nt), optional.. 
+0000ea30: 2020 2020 2020 2020 2020 2041 2062 6f6f             A boo
+0000ea40: 6c65 616e 206d 6173 6b20 6f72 2069 6e64  lean mask or ind
+0000ea50: 6578 2061 7272 6179 2074 6f20 6669 6c74  ex array to filt
+0000ea60: 6572 2076 616c 7565 7320 6265 666f 7265  er values before
+0000ea70: 2073 656c 6563 7469 6f6e 2e20 4e6f 7465   selection. Note
+0000ea80: 2074 6861 7420 756e 7469 6c20 6120 7265   that until a re
+0000ea90: 706f 7274 6564 2062 7567 2069 7320 6669  ported bug is fi
+0000eaa0: 7865 642c 206e 6f20 6572 726f 7220 6973  xed, no error is
+0000eab0: 2072 6169 7365 6420 616e 6420 756e 6578   raised and unex
+0000eac0: 7065 6374 6564 2072 6573 756c 7473 206d  pected results m
+0000ead0: 6179 206f 6363 7572 2077 6865 6e20 6120  ay occur when a 
+0000eae0: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
+0000eaf0: 6179 2077 6974 6820 6120 6c65 6e67 7468  ay with a length
+0000eb00: 2064 6966 6665 7265 6e74 2066 726f 6d20   different from 
+0000eb10: 7468 6174 206f 6620 7468 6520 6172 7261  that of the arra
+0000eb20: 7920 6974 2773 206d 6173 6b69 6e67 2069  y it's masking i
+0000eb30: 7320 7061 7373 6564 2061 7320 6120 6669  s passed as a fi
+0000eb40: 6c74 6572 2e0d 0a20 2020 2020 2020 2073  lter...        s
+0000eb50: 6565 6420 3a20 696e 7420 6f72 206f 7468  eed : int or oth
+0000eb60: 6572 2074 7970 6573 2c20 6f70 7469 6f6e  er types, option
+0000eb70: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+0000eb80: 4120 7365 6564 2074 6f20 696e 6974 6961  A seed to initia
+0000eb90: 6c69 7a65 2074 6865 2072 616e 646f 6d20  lize the random 
+0000eba0: 6e75 6d62 6572 2067 656e 6572 6174 6f72  number generator
+0000ebb0: 2e20 4966 206f 6e65 2069 7320 6e6f 7420  . If one is not 
+0000ebc0: 7072 6f76 6964 6564 2c20 7468 6520 6765  provided, the ge
+0000ebd0: 6e65 7261 746f 7220 6973 2069 6e69 7469  nerator is initi
+0000ebe0: 616c 697a 6564 2075 7369 6e67 2072 616e  alized using ran
+0000ebf0: 646f 6d20 6461 7461 2066 726f 6d20 7468  dom data from th
+0000ec00: 6520 4f53 2e20 466f 7220 6465 7461 696c  e OS. For detail
+0000ec10: 7320 616e 6420 6f74 6865 7220 6163 6365  s and other acce
+0000ec20: 7074 6564 2074 7970 6573 2c20 7365 6520  pted types, see 
+0000ec30: 7468 6520 6073 6565 6460 2070 6172 616d  the `seed` param
+0000ec40: 6574 6572 2066 6f72 2060 6e75 6d70 792e  eter for `numpy.
+0000ec50: 7261 6e64 6f6d 2e64 6566 6175 6c74 5f72  random.default_r
+0000ec60: 6e67 602e 0d0a 0d0a 2020 2020 2020 2020  ng`.....        
+0000ec70: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+0000ec80: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0000ec90: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
+0000eca0: 2020 2020 2020 2020 2041 206e 6577 2060           A new `
+0000ecb0: 4661 7374 4172 7261 7960 2063 6f6e 7461  FastArray` conta
+0000ecc0: 696e 696e 6720 7468 6520 7261 6e64 6f6d  ining the random
+0000ecd0: 6c79 2073 656c 6563 7465 6420 7661 6c75  ly selected valu
+0000ece0: 6573 2e0d 0a0d 0a20 2020 2020 2020 2053  es.....        S
+0000ecf0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+0000ed00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0000ed10: 2020 202e 4461 7461 7365 742e 7361 6d70     .Dataset.samp
+0000ed20: 6c65 203a 2052 6574 7572 6e20 6120 7370  le : Return a sp
+0000ed30: 6563 6966 6965 6420 6e75 6d62 6572 206f  ecified number o
+0000ed40: 6620 7261 6e64 6f6d 6c79 2073 656c 6563  f randomly selec
+0000ed50: 7465 6420 726f 7773 2066 726f 6d20 6120  ted rows from a 
+0000ed60: 602e 4461 7461 7365 7460 2e0d 0a0d 0a20  `.Dataset`..... 
+0000ed70: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+0000ed80: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000ed90: 2d0d 0a20 2020 2020 2020 204e 6f20 7361  -..        No sa
+0000eda0: 6d70 6c65 2073 697a 6520 7370 6563 6966  mple size specif
+0000edb0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
+0000edc0: 3e3e 3e20 6120 3d20 7274 2e46 4128 5b31  >>> a = rt.FA([1
+0000edd0: 2c20 322c 2033 2c20 342c 2035 2c20 362c  , 2, 3, 4, 5, 6,
+0000ede0: 2037 2c20 382c 2039 2c20 3130 2c20 3131   7, 8, 9, 10, 11
+0000edf0: 2c20 3132 5d29 0d0a 2020 2020 2020 2020  , 12])..        
+0000ee00: 3e3e 3e20 612e 7361 6d70 6c65 2829 2020  >>> a.sample()  
+0000ee10: 2320 3130 2072 616e 646f 6d6c 7920 7365  # 10 randomly se
+0000ee20: 6c65 6374 6564 2076 616c 7565 7320 7265  lected values re
+0000ee30: 7475 726e 6564 2e0d 0a20 2020 2020 2020  turned...       
+0000ee40: 2046 6173 7441 7272 6179 285b 2031 2c20   FastArray([ 1, 
+0000ee50: 2032 2c20 2033 2c20 2034 2c20 2035 2c20   2,  3,  4,  5, 
+0000ee60: 2036 2c20 2037 2c20 2039 2c20 3130 2c20   6,  7,  9, 10, 
+0000ee70: 3131 5d29 2020 2320 5261 6e64 6f6d 0d0a  11])  # Random..
+0000ee80: 0d0a 2020 2020 2020 2020 5361 6d70 6c65  ..        Sample
+0000ee90: 2033 2076 616c 7565 733a 0d0a 0d0a 2020   3 values:....  
+0000eea0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0000eeb0: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
+0000eec0: 2035 2c20 362c 2037 2c20 382c 2039 2c20   5, 6, 7, 8, 9, 
+0000eed0: 3130 2c20 3131 2c20 3132 5d29 0d0a 2020  10, 11, 12])..  
+0000eee0: 2020 2020 2020 3e3e 3e20 612e 7361 6d70        >>> a.samp
+0000eef0: 6c65 2833 290d 0a20 2020 2020 2020 2046  le(3)..        F
+0000ef00: 6173 7441 7272 6179 285b 312c 2034 2c20  astArray([1, 4, 
+0000ef10: 395d 2920 2023 2052 616e 646f 6d0d 0a0d  9])  # Random...
+0000ef20: 0a20 2020 2020 2020 2053 7065 6369 6679  .        Specify
+0000ef30: 2061 2073 616d 706c 6520 7369 7a65 206c   a sample size l
+0000ef40: 6172 6765 7220 7468 616e 2074 6865 2061  arger than the a
+0000ef50: 7272 6179 3a0d 0a0d 0a20 2020 2020 2020  rray:....       
+0000ef60: 203e 3e3e 2061 3220 3d20 7274 2e46 4128   >>> a2 = rt.FA(
+0000ef70: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
+0000ef80: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
+0000ef90: 2e73 616d 706c 6528 3130 3029 2020 2320  .sample(100)  # 
+0000efa0: 5468 6520 656e 7469 7265 2061 7272 6179  The entire array
+0000efb0: 2069 7320 7265 7475 726e 6564 2e0d 0a20   is returned... 
+0000efc0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000efd0: 285b 312c 2032 2c20 332c 2034 2c20 355d  ([1, 2, 3, 4, 5]
+0000efe0: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
+0000eff0: 6369 6679 2061 6e20 696e 6465 7820 6172  cify an index ar
+0000f000: 7261 7920 666f 7220 6669 6c74 6572 696e  ray for filterin
+0000f010: 673a 0d0a 0d0a 2020 2020 2020 2020 3e3e  g:....        >>
+0000f020: 3e20 6133 203d 2072 742e 4641 285b 2754  > a3 = rt.FA(['T
+0000f030: 534c 4127 2c27 414d 5a4e 272c 2749 424d  SLA','AMZN','IBM
+0000f040: 272c 2027 5350 5927 2c20 2747 4d45 272c  ', 'SPY', 'GME',
+0000f050: 2027 4141 504c 272c 2027 4642 272c 2027   'AAPL', 'FB', '
+0000f060: 474f 4f47 272c 2027 4d53 4654 272c 2027  GOOG', 'MSFT', '
+0000f070: 5542 4552 275d 2920 2023 2043 7265 6174  UBER'])  # Creat
+0000f080: 6520 7361 6d70 6c65 2064 6174 612e 0d0a  e sample data...
+0000f090: 2020 2020 2020 2020 3e3e 3e20 6669 6c74          >>> filt
+0000f0a0: 6572 203d 2072 742e 4641 285b 302c 2031  er = rt.FA([0, 1
+0000f0b0: 2c20 332c 2037 5d29 2020 2320 5370 6563  , 3, 7])  # Spec
+0000f0c0: 6966 7920 696e 6469 6365 7320 6f66 2061  ify indices of a
+0000f0d0: 3320 746f 2074 616b 6520 7468 6520 7361  3 to take the sa
+0000f0e0: 6d70 6c65 2066 726f 6d2e 0d0a 2020 2020  mple from...    
+0000f0f0: 2020 2020 3e3e 3e20 6133 2e73 616d 706c      >>> a3.sampl
+0000f100: 6528 322c 2066 696c 7465 7229 0d0a 2020  e(2, filter)..  
+0000f110: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+0000f120: 5b62 2754 534c 4127 2c20 6227 474f 4f47  [b'TSLA', b'GOOG
+0000f130: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
+0000f140: 2020 2320 5261 6e64 6f6d 0d0a 0d0a 2020    # Random....  
+0000f150: 2020 2020 2020 5370 6563 6966 7920 6120        Specify a 
+0000f160: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
+0000f170: 6179 2066 6f72 2066 696c 7465 7269 6e67  ay for filtering
+0000f180: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+0000f190: 2061 332e 7361 6d70 6c65 2838 2c20 6669   a3.sample(8, fi
+0000f1a0: 6c74 6572 3d72 742e 4641 2861 3320 213d  lter=rt.FA(a3 !=
+0000f1b0: 2027 5350 5927 2929 0d0a 2020 2020 2020   'SPY'))..      
+0000f1c0: 2020 4661 7374 4172 7261 7928 5b62 2754    FastArray([b'T
+0000f1d0: 534c 4127 2c20 6227 4942 4d27 2c20 6227  SLA', b'IBM', b'
+0000f1e0: 474d 4527 2c20 6227 4141 504c 272c 2062  GME', b'AAPL', b
+0000f1f0: 2746 4227 2c20 6227 474f 4f47 272c 2062  'FB', b'GOOG', b
+0000f200: 274d 5346 5427 2c0d 0a20 2020 2020 2020  'MSFT',..       
+0000f210: 2020 2020 2020 2020 2020 2020 6227 5542              b'UB
+0000f220: 4552 275d 2c20 6474 7970 653d 277c 5334  ER'], dtype='|S4
+0000f230: 2729 2020 2320 5261 6e64 6f6d 0d0a 2020  ')  # Random..  
+0000f240: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000f250: 2020 2072 6574 7572 6e20 7361 6d70 6c65     return sample
+0000f260: 2873 656c 662c 204e 3d4e 2c20 6669 6c74  (self, N=N, filt
+0000f270: 6572 3d66 696c 7465 722c 2073 6565 643d  er=filter, seed=
+0000f280: 7365 6564 290d 0a0d 0a20 2020 2023 202d  seed)....    # -
+0000f290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+0000f2e0: 6566 2064 7570 6c69 6361 7465 6428 7365  ef duplicated(se
+0000f2f0: 6c66 2c20 6b65 6570 3d22 6669 7273 7422  lf, keep="first"
+0000f300: 2c20 6869 6768 5f75 6e69 7175 653d 4661  , high_unique=Fa
+0000f310: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
+0000f320: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
+0000f330: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+0000f340: 6120 626f 6f6c 6561 6e20 6046 6173 7441  a boolean `FastA
+0000f350: 7272 6179 6020 696e 6469 6361 7469 6e67  rray` indicating
+0000f360: 2060 5472 7565 6020 666f 7220 6475 706c   `True` for dupl
+0000f370: 6963 6174 6520 6974 656d 7320 696e 2074  icate items in t
+0000f380: 6865 2069 6e70 7574 2061 7272 6179 2e0d  he input array..
+0000f390: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+0000f3a0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+0000f3b0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+0000f3c0: 2020 206b 6565 7020 3a20 7b27 6669 7273     keep : {'firs
+0000f3d0: 7427 2c20 276c 6173 7427 2c20 2746 616c  t', 'last', 'Fal
+0000f3e0: 7365 277d 2c20 6465 6661 756c 7420 2766  se'}, default 'f
+0000f3f0: 6972 7374 270d 0a20 2020 2020 2020 2020  irst'..         
+0000f400: 2020 202d 2027 6669 7273 7427 203a 204d     - 'first' : M
+0000f410: 6172 6b20 6561 6368 2064 7570 6c69 6361  ark each duplica
+0000f420: 7465 2061 7320 6054 7275 6560 2065 7863  te as `True` exc
+0000f430: 6570 7420 666f 7220 7468 6520 6669 7273  ept for the firs
+0000f440: 7420 6f63 6375 7272 656e 6365 2e0d 0a20  t occurrence... 
+0000f450: 2020 2020 2020 2020 2020 202d 2027 6c61             - 'la
+0000f460: 7374 2720 3a20 4d61 726b 2065 6163 6820  st' : Mark each 
+0000f470: 6475 706c 6963 6174 6520 6173 2060 5472  duplicate as `Tr
+0000f480: 7565 6020 6578 6365 7074 2066 6f72 2074  ue` except for t
+0000f490: 6865 206c 6173 7420 6f63 6375 7272 656e  he last occurren
+0000f4a0: 6365 2e0d 0a20 2020 2020 2020 2020 2020  ce...           
+0000f4b0: 202d 2027 4661 6c73 6527 203a 204d 6172   - 'False' : Mar
+0000f4c0: 6b20 616c 6c20 6475 706c 6963 6174 6573  k all duplicates
+0000f4d0: 2061 7320 6054 7275 6560 2e0d 0a20 2020   as `True`...   
+0000f4e0: 2020 2020 2068 6967 685f 756e 6971 7565       high_unique
+0000f4f0: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
+0000f500: 2060 4661 6c73 6560 2028 6861 7368 696e   `False` (hashin
+0000f510: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
+0000f520: 436f 6e74 726f 6c73 2077 6865 7468 6572  Controls whether
+0000f530: 2074 6865 2066 756e 6374 696f 6e20 7573   the function us
+0000f540: 6573 2068 6173 6869 6e67 2d20 6f72 2073  es hashing- or s
+0000f550: 6f72 7469 6e67 2d62 6173 6564 206c 6f67  orting-based log
+0000f560: 6963 2074 6f20 6669 6e64 2075 6e69 7175  ic to find uniqu
+0000f570: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
+0000f580: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
+0000f590: 2020 2020 2020 2020 2020 4966 2079 6f75            If you
+0000f5a0: 7220 6461 7461 2068 6173 2061 2068 6967  r data has a hig
+0000f5b0: 6820 7072 6f70 6f72 7469 6f6e 206f 6620  h proportion of 
+0000f5c0: 756e 6971 7565 2076 616c 7565 732c 2073  unique values, s
+0000f5d0: 6574 2074 6f20 6054 7275 6560 2066 6f72  et to `True` for
+0000f5e0: 2066 6173 7465 7220 7065 7266 6f72 6d61   faster performa
+0000f5f0: 6e63 652e 0d0a 0d0a 2020 2020 2020 2020  nce.....        
+0000f600: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+0000f610: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0000f620: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
+0000f630: 2020 2020 2020 2020 2041 2062 6f6f 6c65           A boole
+0000f640: 616e 2060 4661 7374 4172 7261 7960 2069  an `FastArray` i
+0000f650: 6e64 6963 6174 696e 6720 6054 7275 6560  ndicating `True`
+0000f660: 2066 6f72 2064 7570 6c69 6361 7465 2069   for duplicate i
+0000f670: 7465 6d73 2069 6e20 7468 6520 696e 7075  tems in the inpu
+0000f680: 7420 6172 7261 792e 0d0a 0d0a 2020 2020  t array.....    
+0000f690: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+0000f6a0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0000f6b0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000f6c0: 792e 6e75 6e69 7175 6520 3a20 5265 7475  y.nunique : Retu
+0000f6d0: 726e 7320 7468 6520 6e75 6d62 6572 206f  rns the number o
+0000f6e0: 6620 756e 6971 7565 2076 616c 7565 7320  f unique values 
+0000f6f0: 696e 2061 6e20 6172 7261 792e 0d0a 2020  in an array...  
+0000f700: 2020 2020 2020 2e44 6174 6173 6574 2e64        .Dataset.d
+0000f710: 7570 6c69 6361 7465 6420 3a20 5265 7475  uplicated : Retu
+0000f720: 726e 7320 6120 626f 6f6c 6561 6e20 6046  rns a boolean `F
+0000f730: 6173 7441 7272 6179 6020 696e 6469 6361  astArray` indica
+0000f740: 7469 6e67 2060 5472 7565 6020 666f 7220  ting `True` for 
+0000f750: 6475 706c 6963 6174 6520 726f 7773 2e0d  duplicate rows..
+0000f760: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+0000f770: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+0000f780: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2045  -----..        E
+0000f790: 7863 6c75 6465 2074 6865 2066 6972 7374  xclude the first
+0000f7a0: 206f 6363 7572 7265 6e63 6520 6f66 2065   occurrence of e
+0000f7b0: 6163 6820 6475 706c 6963 6174 6520 2875  ach duplicate (u
+0000f7c0: 7365 2074 6865 2064 6566 6175 6c74 2060  se the default `
+0000f7d0: 6b65 6570 6020 7661 6c75 6529 3a0d 0a0d  keep` value):...
+0000f7e0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+0000f7f0: 2072 742e 4641 285b 312c 2032 2c20 332c   rt.FA([1, 2, 3,
+0000f800: 2034 2c20 322c 2037 2c20 382c 2038 2c20   4, 2, 7, 8, 8, 
+0000f810: 335d 290d 0a20 2020 2020 2020 203e 3e3e  3])..        >>>
+0000f820: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
+0000f830: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0000f840: 342c 2032 2c20 372c 2038 2c20 382c 2033  4, 2, 7, 8, 8, 3
+0000f850: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0000f860: 612e 6475 706c 6963 6174 6564 2829 0d0a  a.duplicated()..
+0000f870: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000f880: 7928 5b46 616c 7365 2c20 4661 6c73 652c  y([False, False,
+0000f890: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
+0000f8a0: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+0000f8b0: 7365 2c20 2054 7275 652c 2020 5472 7565  se,  True,  True
+0000f8c0: 5d29 0d0a 0d0a 2020 2020 2020 2020 4d61  ])....        Ma
+0000f8d0: 726b 2061 6c6c 2064 7570 6c69 6361 7465  rk all duplicate
+0000f8e0: 733a 0d0a 0d0a 2020 2020 2020 2020 3e3e  s:....        >>
+0000f8f0: 3e20 612e 6475 706c 6963 6174 6564 286b  > a.duplicated(k
+0000f900: 6565 703d 4661 6c73 6529 0d0a 2020 2020  eep=False)..    
+0000f910: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
+0000f920: 616c 7365 2c20 2054 7275 652c 2020 5472  alse,  True,  Tr
+0000f930: 7565 2c20 4661 6c73 652c 2020 5472 7565  ue, False,  True
+0000f940: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
+0000f950: 2054 7275 652c 2020 5472 7565 5d29 0d0a   True,  True])..
+0000f960: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000f970: 2020 2020 2061 7272 203d 2073 656c 660d       arr = self.
+0000f980: 0a0d 0a20 2020 2020 2020 2069 6620 6b65  ...        if ke
+0000f990: 6570 203d 3d20 226c 6173 7422 3a0d 0a20  ep == "last":.. 
+0000f9a0: 2020 2020 2020 2020 2020 2061 7272 203d             arr =
+0000f9b0: 2061 7272 5b3a 3a2d 315d 2e63 6f70 7928   arr[::-1].copy(
+0000f9c0: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
+0000f9d0: 6620 6b65 6570 2069 7320 6e6f 7420 4661  f keep is not Fa
+0000f9e0: 6c73 6520 616e 6420 6b65 6570 2021 3d20  lse and keep != 
+0000f9f0: 2266 6972 7374 223a 0d0a 2020 2020 2020  "first":..      
+0000fa00: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+0000fa10: 6545 7272 6f72 2866 276b 6565 7020 6d75  eError(f'keep mu
+0000fa20: 7374 2062 6520 6569 7468 6572 2022 6669  st be either "fi
+0000fa30: 7273 7422 2c20 226c 6173 7422 206f 7220  rst", "last" or 
+0000fa40: 4661 6c73 6527 290d 0a0d 0a20 2020 2020  False')....     
+0000fa50: 2020 2023 2063 7265 6174 6520 616e 2072     # create an r
+0000fa60: 6574 7572 6e20 6172 7261 7920 616c 6c20  eturn array all 
+0000fa70: 7365 7420 746f 2054 7275 650d 0a20 2020  set to True..   
+0000fa80: 2020 2020 2072 6573 756c 7420 3d20 6f6e       result = on
+0000fa90: 6573 286c 656e 2861 7272 292c 2064 7479  es(len(arr), dty
+0000faa0: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
+0000fab0: 2020 2020 2020 2020 6720 3d20 4772 6f75          g = Grou
+0000fac0: 7069 6e67 2861 7272 2e5f 6661 2069 6620  ping(arr._fa if 
+0000fad0: 6861 7361 7474 7228 6172 722c 2022 5f66  hasattr(arr, "_f
+0000fae0: 6122 2920 656c 7365 2061 7272 2c20 6c65  a") else arr, le
+0000faf0: 783d 6869 6768 5f75 6e69 7175 6529 0d0a  x=high_unique)..
+0000fb00: 0d0a 2020 2020 2020 2020 6966 206b 6565  ..        if kee
+0000fb10: 7020 6973 2046 616c 7365 3a0d 0a20 2020  p is False:..   
+0000fb20: 2020 2020 2020 2020 2023 2073 6561 7263           # searc
+0000fb30: 6820 666f 7220 6772 6f75 7073 2077 6974  h for groups wit
+0000fb40: 6820 6120 636f 756e 7420 6f66 2031 0d0a  h a count of 1..
+0000fb50: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000fb60: 6c74 5b67 2e69 6669 7273 746b 6579 5b67  lt[g.ifirstkey[g
+0000fb70: 2e6e 636f 756e 7467 726f 7570 5b31 3a5d  .ncountgroup[1:]
+0000fb80: 203d 3d20 315d 5d20 3d20 4661 6c73 650d   == 1]] = False.
+0000fb90: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+0000fba0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000fbb0: 6c74 5b67 2e69 6669 7273 746b 6579 5d20  lt[g.ifirstkey] 
+0000fbc0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
+0000fbd0: 2020 2020 2020 2069 6620 6b65 6570 203d         if keep =
+0000fbe0: 3d20 226c 6173 7422 3a0d 0a20 2020 2020  = "last":..     
+0000fbf0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0000fc00: 7420 3d20 7265 7375 6c74 5b3a 3a2d 315d  t = result[::-1]
+0000fc10: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
+0000fc20: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+0000fc30: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0000fc40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc80: 2d2d 0d0a 2020 2020 6465 6620 7361 7665  --..    def save
+0000fc90: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
+0000fca0: 0d0a 2020 2020 2020 2020 6669 6c65 7061  ..        filepa
+0000fcb0: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+0000fcc0: 732e 5061 7468 4c69 6b65 5d2c 0d0a 2020  s.PathLike],..  
+0000fcd0: 2020 2020 2020 7368 6172 653a 204f 7074        share: Opt
+0000fce0: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+0000fcf0: 652c 0d0a 2020 2020 2020 2020 636f 6d70  e,..        comp
+0000fd00: 7265 7373 3a20 626f 6f6c 203d 2054 7275  ress: bool = Tru
+0000fd10: 652c 0d0a 2020 2020 2020 2020 6f76 6572  e,..        over
+0000fd20: 7772 6974 653a 2062 6f6f 6c20 3d20 5472  write: bool = Tr
+0000fd30: 7565 2c0d 0a20 2020 2020 2020 206e 616d  ue,..        nam
+0000fd40: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
+0000fd50: 203d 204e 6f6e 652c 0d0a 2020 2020 2920   = None,..    ) 
+0000fd60: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
+0000fd70: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
+0000fd80: 6176 6520 6120 7369 6e67 6c65 2061 7272  ave a single arr
+0000fd90: 6179 2069 6e20 616e 202e 7364 7320 6669  ay in an .sds fi
+0000fda0: 6c65 2e0d 0a0d 0a20 2020 2020 2020 2050  le.....        P
+0000fdb0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0000fdc0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0000fdd0: 2020 2020 2020 2066 696c 6570 6174 683a         filepath:
+0000fde0: 2073 7472 206f 7220 6f73 2e50 6174 684c   str or os.PathL
+0000fdf0: 696b 650d 0a20 2020 2020 2020 2073 6861  ike..        sha
+0000fe00: 7265 203a 2073 7472 2c20 6f70 7469 6f6e  re : str, option
+0000fe10: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
+0000fe20: 0d0a 2020 2020 2020 2020 636f 6d70 7265  ..        compre
+0000fe30: 7373 203a 2062 6f6f 6c2c 2064 6566 6175  ss : bool, defau
+0000fe40: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
+0000fe50: 206f 7665 7277 7269 7465 203a 2062 6f6f   overwrite : boo
+0000fe60: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
+0000fe70: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
+0000fe80: 7374 722c 206f 7074 696f 6e61 6c2c 2064  str, optional, d
+0000fe90: 6566 6175 6c74 204e 6f6e 650d 0a0d 0a20  efault None.... 
+0000fea0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+0000feb0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000fec0: 2d0d 0a20 2020 2020 2020 2072 745f 7364  -..        rt_sd
+0000fed0: 732e 7361 7665 5f73 6473 0d0a 2020 2020  s.save_sds..    
+0000fee0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000fef0: 2073 6176 655f 7364 7328 6669 6c65 7061   save_sds(filepa
+0000ff00: 7468 2c20 7365 6c66 2c20 7368 6172 653d  th, self, share=
+0000ff10: 7368 6172 652c 2063 6f6d 7072 6573 733d  share, compress=
+0000ff20: 636f 6d70 7265 7373 2c20 6f76 6572 7772  compress, overwr
+0000ff30: 6974 653d 6f76 6572 7772 6974 652c 206e  ite=overwrite, n
+0000ff40: 616d 653d 6e61 6d65 290d 0a0d 0a20 2020  ame=name)....   
+0000ff50: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0000ff60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ff70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ff80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ff90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+0000ffa0: 2020 2064 6566 2066 696c 7465 7228 7365     def filter(se
+0000ffb0: 6c66 2c20 6669 6c74 6572 3a20 6e70 742e  lf, filter: npt.
+0000ffc0: 4172 7261 794c 696b 6529 202d 3e20 2246  ArrayLike) -> "F
+0000ffd0: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
+0000ffe0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000fff0: 2052 6574 7572 6e20 6120 636f 7079 206f   Return a copy o
+00010000: 6620 7468 6520 6046 6173 7441 7272 6179  f the `FastArray
+00010010: 6020 636f 6e74 6169 6e69 6e67 206f 6e6c  ` containing onl
+00010020: 7920 7468 6520 656c 656d 656e 7473 2074  y the elements t
+00010030: 6861 7420 6d65 6574 2074 6865 2073 7065  hat meet the spe
+00010040: 6369 6669 6564 0d0a 2020 2020 2020 2020  cified..        
+00010050: 636f 6e64 6974 696f 6e2e 0d0a 0d0a 2020  condition.....  
+00010060: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00010070: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00010080: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6669  ----..        fi
+00010090: 6c74 6572 203a 2061 7272 6179 3a20 6661  lter : array: fa
+000100a0: 6e63 7920 696e 6465 7820 6f72 2042 6f6f  ncy index or Boo
+000100b0: 6c65 616e 206d 6173 6b0d 0a20 2020 2020  lean mask..     
+000100c0: 2020 2020 2020 2041 2066 616e 6379 2069         A fancy i
+000100d0: 6e64 6578 2073 7065 6369 6669 6573 2062  ndex specifies b
+000100e0: 6f74 6820 7468 6520 6465 7369 7265 6420  oth the desired 
+000100f0: 656c 656d 656e 7473 2061 6e64 2074 6865  elements and the
+00010100: 6972 206f 7264 6572 2069 6e20 7468 650d  ir order in the.
+00010110: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00010120: 7572 6e65 6420 6046 6173 7441 7272 6179  urned `FastArray
+00010130: 602e 2057 6865 6e20 6120 426f 6f6c 6561  `. When a Boolea
+00010140: 6e20 6d61 736b 2069 7320 7061 7373 6564  n mask is passed
+00010150: 2c20 6f6e 6c79 2072 6f77 7320 7468 6174  , only rows that
+00010160: 206d 6565 7420 7468 650d 0a20 2020 2020   meet the..     
+00010170: 2020 2020 2020 2073 7065 6369 6669 6564         specified
+00010180: 2063 6f6e 6469 7469 6f6e 2061 7265 2069   condition are i
+00010190: 6e20 7468 6520 7265 7475 726e 6564 2060  n the returned `
+000101a0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
+000101b0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+000101c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+000101d0: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+000101e0: 7261 7960 0d0a 0d0a 2020 2020 2020 2020  ray`....        
+000101f0: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
+00010200: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4966  ----..        If
+00010210: 2079 6f75 2077 616e 7420 746f 2070 6572   you want to per
+00010220: 666f 726d 2061 6e20 6f70 6572 6174 696f  form an operatio
+00010230: 6e20 6f6e 2061 2066 696c 7465 7265 6420  n on a filtered 
+00010240: 4661 7374 4172 7261 792c 2069 7427 7320  FastArray, it's 
+00010250: 6d6f 7265 2065 6666 6963 6965 6e74 2074  more efficient t
+00010260: 6f0d 0a20 2020 2020 2020 2070 6572 666f  o..        perfo
+00010270: 726d 2074 6865 206f 7065 7261 7469 6f6e  rm the operation
+00010280: 2075 7369 6e67 2074 6865 2060 6066 696c   using the ``fil
+00010290: 7465 7260 6020 6b65 7977 6f72 6420 6172  ter`` keyword ar
+000102a0: 6775 6d65 6e74 2e20 466f 7220 6578 616d  gument. For exam
+000102b0: 706c 652c 0d0a 2020 2020 2020 2020 6060  ple,..        ``
+000102c0: 6d79 5f66 612e 7375 6d28 6669 6c74 6572  my_fa.sum(filter
+000102d0: 203d 2062 6f6f 6c65 616e 5f6d 6173 6b29   = boolean_mask)
+000102e0: 6060 2e0d 0a0d 0a20 2020 2020 2020 2045  ``.....        E
+000102f0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00010300: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00010310: 2020 2043 7265 6174 6520 6120 6046 6173     Create a `Fas
+00010320: 7441 7272 6179 603a 0d0a 0d0a 2020 2020  tArray`:....    
+00010330: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
+00010340: 4661 7374 4172 7261 7928 6e70 2e6c 696e  FastArray(np.lin
+00010350: 7370 6163 6528 302c 2031 2c20 3131 2929  space(0, 1, 11))
+00010360: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
+00010370: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00010380: 7261 7928 5b30 2e20 2c20 302e 312c 2030  ray([0. , 0.1, 0
+00010390: 2e32 2c20 302e 332c 2030 2e34 2c20 302e  .2, 0.3, 0.4, 0.
+000103a0: 352c 2030 2e36 2c20 302e 372c 2030 2e38  5, 0.6, 0.7, 0.8
+000103b0: 2c20 302e 392c 2031 2e20 5d29 0d0a 0d0a  , 0.9, 1. ])....
+000103c0: 2020 2020 2020 2020 4669 6c74 6572 2075          Filter u
+000103d0: 7369 6e67 2061 2066 616e 6379 2069 6e64  sing a fancy ind
+000103e0: 6578 3a0d 0a0d 0a20 2020 2020 2020 203e  ex:....        >
+000103f0: 3e3e 2066 612e 6669 6c74 6572 285b 352c  >> fa.filter([5,
+00010400: 2030 2c20 315d 290d 0a20 2020 2020 2020   0, 1])..       
+00010410: 2046 6173 7441 7272 6179 285b 302e 352c   FastArray([0.5,
+00010420: 2030 2e20 2c20 302e 315d 290d 0a0d 0a20   0. , 0.1]).... 
+00010430: 2020 2020 2020 2046 696c 7465 7220 7573         Filter us
+00010440: 696e 6720 6120 636f 6e64 6974 696f 6e20  ing a condition 
+00010450: 7468 6174 2063 7265 6174 6573 2061 2042  that creates a B
+00010460: 6f6f 6c65 616e 206d 6173 6b20 6172 7261  oolean mask arra
+00010470: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
+00010480: 3e20 6661 2e66 696c 7465 7228 6661 203e  > fa.filter(fa >
+00010490: 2030 2e37 3529 0d0a 2020 2020 2020 2020   0.75)..        
+000104a0: 4661 7374 4172 7261 7928 5b30 2e38 2c20  FastArray([0.8, 
+000104b0: 302e 392c 2031 2e20 5d29 0d0a 0d0a 2020  0.9, 1. ])....  
+000104c0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+000104d0: 2020 2020 2023 206e 6f72 6d61 6c69 7a65       # normalize
+000104e0: 2072 6f77 6669 6c74 6572 0d0a 2020 2020   rowfilter..    
+000104f0: 2020 2020 6966 206e 702e 6973 7363 616c      if np.isscal
+00010500: 6172 2866 696c 7465 7229 3a0d 0a20 2020  ar(filter):..   
+00010510: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
+00010520: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
+00010530: 5b66 696c 7465 725d 290d 0a20 2020 2020  [filter])..     
+00010540: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
+00010550: 7374 616e 6365 2866 696c 7465 722c 206e  stance(filter, n
+00010560: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
+00010570: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
+00010580: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
+00010590: 6669 6c74 6572 290d 0a0d 0a20 2020 2020  filter)....     
+000105a0: 2020 2023 2045 6e73 7572 6520 6669 6c74     # Ensure filt
+000105b0: 6572 2069 7320 626f 6f6c 6561 6e20 6f72  er is boolean or
+000105c0: 2069 6e74 6567 6572 730d 0a20 2020 2020   integers..     
+000105d0: 2020 2069 6620 6e6f 7420 286e 702e 6973     if not (np.is
+000105e0: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
+000105f0: 6474 7970 652c 206e 702e 696e 7465 6765  dtype, np.intege
+00010600: 7229 206f 7220 6e70 2e69 7373 7562 6474  r) or np.issubdt
+00010610: 7970 6528 6669 6c74 6572 2e64 7479 7065  ype(filter.dtype
+00010620: 2c20 626f 6f6c 2929 3a0d 0a20 2020 2020  , bool)):..     
+00010630: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00010640: 6545 7272 6f72 2866 2254 6865 2066 696c  eError(f"The fil
+00010650: 7465 7220 6d75 7374 2062 6520 6120 626f  ter must be a bo
+00010660: 6f6c 6561 6e20 6d61 736b 206f 7220 696e  olean mask or in
+00010670: 7465 6765 7220 6661 6e63 7920 696e 6465  teger fancy inde
+00010680: 782e 2229 0d0a 0d0a 2020 2020 2020 2020  x.")....        
+00010690: 2320 456e 7375 7265 2060 6669 6c74 6572  # Ensure `filter
+000106a0: 6020 6973 2074 6865 2072 6967 6874 2073  ` is the right s
+000106b0: 6861 7065 2e0d 0a20 2020 2020 2020 2023  hape...        #
+000106c0: 2055 6e6c 696b 6520 6044 6174 6173 6574   Unlike `Dataset
+000106d0: 2e66 696c 7465 7260 2077 6520 646f 6e27  .filter` we don'
+000106e0: 7420 636f 6e76 6572 7420 626f 6f6c 2074  t convert bool t
+000106f0: 6f20 6661 6e63 792c 2020 6265 6361 7573  o fancy,  becaus
+00010700: 6520 7765 2772 6520 6e6f 7420 7265 7573  e we're not reus
+00010710: 696e 6720 7468 6520 6661 6e63 7920 696e  ing the fancy in
+00010720: 6469 6365 732e 0d0a 2020 2020 2020 2020  dices...        
+00010730: 6966 2066 696c 7465 722e 6e64 696d 2021  if filter.ndim !
+00010740: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
+00010750: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00010760: 6f72 2822 6046 6173 7441 7272 6179 2e66  or("`FastArray.f
+00010770: 696c 7465 7260 206f 6e6c 7920 6163 6365  ilter` only acce
+00010780: 7074 7320 3144 2061 7272 6179 7320 666f  pts 1D arrays fo
+00010790: 7220 7468 6520 656c 656d 656e 7420 7365  r the element se
+000107a0: 6c65 6374 6f72 2f6d 6173 6b2e 2229 0d0a  lector/mask.")..
+000107b0: 2020 2020 2020 2020 2320 426f 6f6c 6561          # Boolea
+000107c0: 6e20 6172 7261 7920 6e65 6564 7320 746f  n array needs to
+000107d0: 2062 6520 7468 6520 7269 6768 7420 6c65   be the right le
+000107e0: 6e67 7468 2061 7320 7765 6c6c 2e0d 0a20  ngth as well... 
+000107f0: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
+00010800: 7562 6474 7970 6528 6669 6c74 6572 2e64  ubdtype(filter.d
+00010810: 7479 7065 2c20 626f 6f6c 2920 616e 6420  type, bool) and 
+00010820: 286c 656e 2866 696c 7465 7229 2021 3d20  (len(filter) != 
+00010830: 7365 6c66 2e73 6861 7065 5b30 5d29 3a0d  self.shape[0]):.
+00010840: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00010850: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
+00010860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010870: 6622 5468 6520 6c65 6e67 7468 206f 6620  f"The length of 
+00010880: 7468 6520 7072 6f76 6964 6564 2073 656c  the provided sel
+00010890: 6563 7469 6f6e 206d 6173 6b20 287b 6c65  ection mask ({le
+000108a0: 6e28 6669 6c74 6572 297d 2920 646f 6573  n(filter)}) does
+000108b0: 206e 6f74 206d 6174 6368 2074 6865 206c   not match the l
+000108c0: 656e 6774 6820 6f66 2074 6865 2046 6173  ength of the Fas
+000108d0: 7441 7272 6179 287b 7365 6c66 2e73 6861  tArray({self.sha
+000108e0: 7065 5b30 5d7d 292e 220d 0a20 2020 2020  pe[0]})."..     
+000108f0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00010900: 2020 2020 2320 5065 7266 6f72 6d20 6669      # Perform fi
+00010910: 6c74 6572 2061 6e64 2072 6574 7572 6e0d  lter and return.
+00010920: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00010930: 7365 6c66 5b66 696c 7465 725d 0d0a 0d0a  self[filter]....
+00010940: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00010950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010990: 0d0a 2020 2020 6465 6620 7265 7368 6170  ..    def reshap
+000109a0: 6528 7365 6c66 2c20 2a61 7267 732c 202a  e(self, *args, *
+000109b0: 2a6b 7761 7267 7329 202d 3e20 4661 7374  *kwargs) -> Fast
+000109c0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+000109d0: 7265 7375 6c74 203d 2073 7570 6572 2846  result = super(F
+000109e0: 6173 7441 7272 6179 2c20 7365 6c66 292e  astArray, self).
+000109f0: 7265 7368 6170 6528 2a61 7267 732c 202a  reshape(*args, *
+00010a00: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
+00010a10: 2020 2320 7468 6973 2077 6172 6e69 6e67    # this warning
+00010a20: 2068 6170 7065 6e73 2074 6f6f 206d 7563   happens too muc
+00010a30: 6820 6e6f 770d 0a20 2020 2020 2020 2023  h now..        #
+00010a40: 2069 6620 4661 7374 4172 7261 792e 5f63   if FastArray._c
+00010a50: 6865 636b 5f6e 6469 6d28 7265 7375 6c74  heck_ndim(result
+00010a60: 2920 213d 2031 3a0d 0a20 2020 2020 2020  ) != 1:..       
+00010a70: 2023 2020 2020 7761 726e 696e 6773 2e77   #    warnings.w
+00010a80: 6172 6e28 4661 7374 4172 7261 792e 5761  arn(FastArray.Wa
+00010a90: 726e 696e 6744 6963 745b 226d 756c 7469  rningDict["multi
+00010aa0: 706c 655f 6469 6d65 6e73 696f 6e73 225d  ple_dimensions"]
+00010ab0: 2e66 6f72 6d61 7428 7265 7375 6c74 2e73  .format(result.s
+00010ac0: 6861 7065 2929 0d0a 0d0a 2020 2020 2020  hape))....      
+00010ad0: 2020 6966 206e 6f74 2028 7265 7375 6c74    if not (result
+00010ae0: 2e66 6c61 6773 2e63 5f63 6f6e 7469 6775  .flags.c_contigu
+00010af0: 6f75 7320 6f72 2072 6573 756c 742e 666c  ous or result.fl
+00010b00: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
+00010b10: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00010b20: 2320 6669 7820 7374 7269 6465 7320 7072  # fix strides pr
+00010b30: 6f62 6c65 6d0d 0a20 2020 2020 2020 2020  oblem..         
+00010b40: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00010b50: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
+00010b60: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+00010b70: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00010b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010bc0: 2d2d 0d0a 2020 2020 6465 6620 7265 7065  --..    def repe
+00010bd0: 6174 2873 656c 662c 2072 6570 6561 7473  at(self, repeats
+00010be0: 2c20 6178 6973 3d4e 6f6e 6529 202d 3e20  , axis=None) -> 
+00010bf0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00010c00: 2020 2020 2222 2253 6565 2060 7269 7074      """See `ript
+00010c10: 6162 6c65 2e72 6570 6561 7460 2e22 2222  able.repeat`."""
+00010c20: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00010c30: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
+00010c40: 7065 6174 732c 2061 7869 733d 6178 6973  peats, axis=axis
+00010c50: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+00010c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010ca0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
+00010cb0: 696c 6528 7365 6c66 2c20 7265 7073 2920  ile(self, reps) 
+00010cc0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+00010cd0: 2020 2020 2020 2022 2222 5365 6520 6072         """See `r
+00010ce0: 6970 7461 626c 652e 7469 6c65 602e 2222  iptable.tile`.""
+00010cf0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00010d00: 6e20 7469 6c65 2873 656c 662c 2072 6570  n tile(self, rep
+00010d10: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+00010d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010d60: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00010d70: 5f6b 7761 7267 5f63 6865 636b 2873 656c  _kwarg_check(sel
+00010d80: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00010d90: 6773 293a 0d0a 2020 2020 2020 2020 2320  gs):..        # 
+00010da0: 7765 2068 616e 646c 6520 6474 7970 650d  we handle dtype.
+00010db0: 0a20 2020 2020 2020 2069 6620 2822 6464  .        if ("dd
+00010dc0: 6f66 2220 696e 206b 7761 7267 7320 616e  of" in kwargs an
+00010dd0: 6420 6b77 6172 6773 5b22 6464 6f66 225d  d kwargs["ddof"]
+00010de0: 2021 3d20 3129 206f 7220 2261 7869 7322   != 1) or "axis"
+00010df0: 2069 6e20 6b77 6172 6773 206f 7220 226b   in kwargs or "k
+00010e00: 6565 7064 696d 7322 2069 6e20 6b77 6172  eepdims" in kwar
+00010e10: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00010e20: 2072 6574 7572 6e20 5472 7565 0d0a 0d0a   return True....
+00010e30: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
 00010e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e50: 2d2d 0d0a 2020 2020 6465 6620 6973 636f  --..    def isco
-00010e60: 6d70 7574 6162 6c65 2873 656c 6629 202d  mputable(self) -
-00010e70: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
-00010e80: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-00010e90: 7374 6572 2e69 735f 636f 6d70 7574 6162  ster.is_computab
-00010ea0: 6c65 2873 656c 6629 0d0a 0d0a 2020 2020  le(self)....    
-00010eb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00010ec0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00010ed0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
-00010ee0: 2020 2023 206e 6570 2d31 3820 6172 7261     # nep-18 arra
-00010ef0: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
-00010f00: 636f 6c20 696d 706c 656d 656e 7461 7469  col implementati
-00010f10: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
-00010f20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00010f30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00010f40: 2323 2323 230d 0a20 2020 2040 636c 6173  #####..    @clas
-00010f50: 736d 6574 686f 640d 0a20 2020 2064 6566  smethod..    def
-00010f60: 205f 7079 5f6e 756d 6265 725f 746f 5f6e   _py_number_to_n
-00010f70: 705f 6474 7970 6528 0d0a 2020 2020 2020  p_dtype(..      
-00010f80: 2020 636c 732c 2076 616c 3a20 556e 696f    cls, val: Unio
-00010f90: 6e5b 696e 742c 206e 702e 696e 7465 6765  n[int, np.intege
-00010fa0: 722c 204e 6f6e 655d 2c20 6474 7970 653a  r, None], dtype:
-00010fb0: 206e 702e 6474 7970 650d 0a20 2020 2029   np.dtype..    )
-00010fc0: 202d 3e20 556e 696f 6e5b 6e70 2e75 696e   -> Union[np.uin
-00010fd0: 742c 206e 702e 696e 7436 342c 206e 702e  t, np.int64, np.
-00010fe0: 666c 6f61 7436 342c 204e 6f6e 655d 3a0d  float64, None]:.
-00010ff0: 0a20 2020 2020 2020 2022 2222 436f 6e76  .        """Conv
-00011000: 6572 7420 6120 7079 7468 6f6e 2074 7970  ert a python typ
-00011010: 6520 746f 206e 756d 7079 2064 7479 7065  e to numpy dtype
-00011020: 2e0d 0a20 2020 2020 2020 204f 6e6c 7920  ...        Only 
-00011030: 6861 6e64 6c65 7320 696e 7465 6765 7273  handles integers
-00011040: 2e22 2222 0d0a 2020 2020 2020 2020 6966  ."""..        if
-00011050: 2076 616c 2069 7320 6e6f 7420 4e6f 6e65   val is not None
-00011060: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00011070: 2069 6e74 6572 6e61 6c6c 7920 6e75 6d70   internally nump
-00011080: 7920 6578 7065 6374 7320 6120 6474 7970  y expects a dtyp
-00011090: 6520 7265 7475 726e 6564 2066 6f72 206e  e returned for n
-000110a0: 616e 7374 6420 616e 6420 6f74 6865 7220  anstd and other 
-000110b0: 6361 6c63 756c 6174 696f 6e73 0d0a 2020  calculations..  
-000110c0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-000110d0: 6e73 7461 6e63 6528 7661 6c2c 2028 696e  nstance(val, (in
-000110e0: 742c 206e 702e 696e 7465 6765 7229 293a  t, np.integer)):
-000110f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011100: 2020 2320 666f 7220 7569 6e74 3634 2c20    # for uint64, 
-00011110: 7468 6520 6869 6768 2062 6974 206d 7573  the high bit mus
-00011120: 7420 6265 2070 7265 7365 7276 6564 0d0a  t be preserved..
-00011130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011140: 6966 2064 7479 7065 2e63 6861 7220 696e  if dtype.char in
-00011150: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
-00011160: 556e 7369 676e 6564 496e 7465 6765 7236  UnsignedInteger6
-00011170: 343a 0d0a 2020 2020 2020 2020 2020 2020  4:..            
-00011180: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00011190: 702e 7569 6e74 3634 2876 616c 290d 0a20  p.uint64(val).. 
-000111a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000111b0: 6574 7572 6e20 6e70 2e69 6e74 3634 2876  eturn np.int64(v
-000111c0: 616c 290d 0a20 2020 2020 2020 2020 2020  al)..           
-000111d0: 2072 6574 7572 6e20 6e70 2e66 6c6f 6174   return np.float
-000111e0: 3634 2876 616c 290d 0a20 2020 2020 2020  64(val)..       
-000111f0: 2072 6574 7572 6e20 7661 6c0d 0a0d 0a20   return val.... 
-00011200: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00011210: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00011220: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00011230: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00011240: 696f 6e28 6e70 2e61 7267 6d61 7829 0d0a  ion(np.argmax)..
-00011250: 2020 2020 6465 6620 5f61 7267 6d61 7828      def _argmax(
-00011260: 612c 2061 7869 733d 4e6f 6e65 2c20 6f75  a, axis=None, ou
-00011270: 743d 4e6f 6e65 293a 0d0a 2020 2020 2020  t=None):..      
-00011280: 2020 7265 7375 6c74 203d 2072 632e 5265    result = rc.Re
-00011290: 6475 6365 2861 2c20 5245 4455 4345 5f46  duce(a, REDUCE_F
-000112a0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-000112b0: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
-000112c0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-000112d0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-000112e0: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-000112f0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-00011300: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00011310: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-00011320: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-00011330: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-00011340: 7469 6f6e 286e 702e 6e61 6e61 7267 6d61  tion(np.nanargma
-00011350: 7829 0d0a 2020 2020 6465 6620 5f6e 616e  x)..    def _nan
-00011360: 6172 676d 6178 2861 2c20 6178 6973 3d4e  argmax(a, axis=N
-00011370: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
-00011380: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
-00011390: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
-000113a0: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
-000113b0: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
-000113c0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-000113d0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-000113e0: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-000113f0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-00011400: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00011410: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-00011420: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-00011430: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-00011440: 7469 6f6e 286e 702e 6172 676d 696e 290d  tion(np.argmin).
-00011450: 0a20 2020 2064 6566 205f 6172 676d 696e  .    def _argmin
-00011460: 2861 2c20 6178 6973 3d4e 6f6e 652c 206f  (a, axis=None, o
-00011470: 7574 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ut=None):..     
-00011480: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00011490: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-000114a0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-000114b0: 5f41 5247 4d49 4e2c 2030 290d 0a20 2020  _ARGMIN, 0)..   
-000114c0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-000114d0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-000114e0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-000114f0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00011500: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00011510: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00011520: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00011530: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00011540: 6374 696f 6e28 6e70 2e6e 616e 6172 676d  ction(np.nanargm
-00011550: 696e 290d 0a20 2020 2064 6566 205f 6e61  in)..    def _na
-00011560: 6e61 7267 6d69 6e28 612c 2061 7869 733d  nargmin(a, axis=
-00011570: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00011580: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-00011590: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-000115a0: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-000115b0: 4e41 5247 4d49 4e2c 2030 290d 0a20 2020  NARGMIN, 0)..   
-000115c0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-000115d0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-000115e0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-000115f0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00011600: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00011610: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00011620: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00011630: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00011640: 6374 696f 6e28 6e70 2e65 6d70 7479 5f6c  ction(np.empty_l
-00011650: 696b 6529 0d0a 2020 2020 6465 6620 5f65  ike)..    def _e
-00011660: 6d70 7479 5f6c 696b 6528 0d0a 2020 2020  mpty_like(..    
-00011670: 2020 2020 6172 7261 793a 2022 4661 7374      array: "Fast
-00011680: 4172 7261 7922 2c0d 0a20 2020 2020 2020  Array",..       
-00011690: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
-000116a0: 5b55 6e69 6f6e 5b73 7472 2c20 6e70 2e64  [Union[str, np.d
-000116b0: 7479 7065 5d5d 203d 204e 6f6e 652c 0d0a  type]] = None,..
-000116c0: 2020 2020 2020 2020 6f72 6465 723a 2073          order: s
-000116d0: 7472 203d 2022 4b22 2c0d 0a20 2020 2020  tr = "K",..     
-000116e0: 2020 2073 7562 6f6b 3a20 626f 6f6c 203d     subok: bool =
-000116f0: 2054 7275 652c 0d0a 2020 2020 2020 2020   True,..        
-00011700: 7368 6170 653a 204f 7074 696f 6e61 6c5b  shape: Optional[
-00011710: 556e 696f 6e5b 696e 742c 2053 6571 7565  Union[int, Seque
-00011720: 6e63 655b 696e 745d 5d5d 203d 204e 6f6e  nce[int]]] = Non
-00011730: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
-00011740: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
-00011750: 2020 2061 7272 6179 203d 2061 7272 6179     array = array
-00011760: 2e5f 6e70 0d0a 2020 2020 2020 2020 7265  ._np..        re
-00011770: 7375 6c74 203d 2072 632e 4c65 6467 6572  sult = rc.Ledger
-00011780: 4675 6e63 7469 6f6e 286e 702e 656d 7074  Function(np.empt
-00011790: 795f 6c69 6b65 2c20 6172 7261 792c 2064  y_like, array, d
-000117a0: 7479 7065 3d64 7479 7065 2c20 6f72 6465  type=dtype, orde
-000117b0: 723d 6f72 6465 722c 2073 7562 6f6b 3d73  r=order, subok=s
-000117c0: 7562 6f6b 2c20 7368 6170 653d 7368 6170  ubok, shape=shap
-000117d0: 6529 0d0a 2020 2020 2020 2020 7265 7475  e)..        retu
-000117e0: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
-000117f0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
-00011800: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
-00011810: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
-00011820: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
-00011830: 6e28 6e70 2e6d 6178 290d 0a20 2020 2064  n(np.max)..    d
-00011840: 6566 205f 6d61 7828 612c 2061 7869 733d  ef _max(a, axis=
-00011850: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00011860: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2069  keepdims=None, i
-00011870: 6e69 7469 616c 3d4e 6f6e 652c 2077 6865  nitial=None, whe
-00011880: 7265 3d4e 6f6e 6529 3a0d 0a20 2020 2020  re=None):..     
-00011890: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-000118a0: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-000118b0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-000118c0: 5f4d 4158 2c20 3029 0d0a 2020 2020 2020  _MAX, 0)..      
-000118d0: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
-000118e0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-000118f0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
-00011900: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
-00011910: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00011920: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-00011930: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00011940: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-00011950: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-00011960: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00011970: 286e 702e 6e61 6e6d 6178 290d 0a20 2020  (np.nanmax)..   
-00011980: 2064 6566 205f 6e61 6e6d 6178 2861 2c20   def _nanmax(a, 
-00011990: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
-000119a0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-000119b0: 6e65 293a 0d0a 2020 2020 2020 2020 7265  ne):..        re
-000119c0: 7375 6c74 203d 2072 632e 5265 6475 6365  sult = rc.Reduce
-000119d0: 2861 2c20 5245 4455 4345 5f46 554e 4354  (a, REDUCE_FUNCT
-000119e0: 494f 4e53 2e52 4544 5543 455f 4e41 4e4d  IONS.REDUCE_NANM
-000119f0: 4158 2c20 3029 0d0a 2020 2020 2020 2020  AX, 0)..        
-00011a00: 6966 2072 6573 756c 7420 6973 206e 6f74  if result is not
-00011a10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00011a20: 2020 2020 7265 7475 726e 2061 2e64 7479      return a.dty
-00011a30: 7065 2e74 7970 6528 7265 7375 6c74 290d  pe.type(result).
-00011a40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00011a50: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
-00011a60: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00011a70: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
-00011a80: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
-00011a90: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
-00011aa0: 702e 6d65 616e 290d 0a20 2020 2064 6566  p.mean)..    def
-00011ab0: 205f 6d65 616e 2861 2c20 6178 6973 3d4e   _mean(a, axis=N
-00011ac0: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
-00011ad0: 206f 7574 3d4e 6f6e 652c 206b 6565 7064   out=None, keepd
-00011ae0: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
-00011af0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00011b00: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-00011b10: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00011b20: 455f 4d45 414e 2c20 3029 0d0a 2020 2020  E_MEAN, 0)..    
-00011b30: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-00011b40: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
-00011b50: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
-00011b60: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
-00011b70: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00011b80: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
-00011b90: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
-00011ba0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
-00011bb0: 7469 6f6e 286e 702e 6e61 6e6d 6561 6e29  tion(np.nanmean)
-00011bc0: 0d0a 2020 2020 6465 6620 5f6e 616e 6d65  ..    def _nanme
-00011bd0: 616e 2861 2c20 6178 6973 3d4e 6f6e 652c  an(a, axis=None,
-00011be0: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
-00011bf0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00011c00: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00011c10: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-00011c20: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-00011c30: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-00011c40: 4e4d 4541 4e2c 2030 290d 0a20 2020 2020  NMEAN, 0)..     
-00011c50: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
-00011c60: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
-00011c70: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
-00011c80: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
-00011c90: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00011ca0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00011cb0: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00011cc0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00011cd0: 696f 6e28 6e70 2e6d 696e 290d 0a20 2020  ion(np.min)..   
-00011ce0: 2064 6566 205f 6d69 6e28 612c 2061 7869   def _min(a, axi
-00011cf0: 733d 4e6f 6e65 2c20 6f75 743d 4e6f 6e65  s=None, out=None
-00011d00: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
-00011d10: 2069 6e69 7469 616c 3d4e 6f6e 652c 2077   initial=None, w
-00011d20: 6865 7265 3d4e 6f6e 6529 3a0d 0a20 2020  here=None):..   
-00011d30: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
-00011d40: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
-00011d50: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00011d60: 4345 5f4d 494e 2c20 3029 0d0a 2020 2020  CE_MIN, 0)..    
-00011d70: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
-00011d80: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00011d90: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-00011da0: 2e64 7479 7065 2e74 7970 6528 7265 7375  .dtype.type(resu
-00011db0: 6c74 290d 0a20 2020 2020 2020 2072 6574  lt)..        ret
-00011dc0: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
-00011dd0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00011de0: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
-00011df0: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
-00011e00: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-00011e10: 6f6e 286e 702e 6e61 6e6d 696e 290d 0a20  on(np.nanmin).. 
-00011e20: 2020 2064 6566 205f 6e61 6e6d 696e 2861     def _nanmin(a
-00011e30: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
-00011e40: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00011e50: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00011e60: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
-00011e70: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
-00011e80: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-00011e90: 4e4d 494e 2c20 3029 0d0a 2020 2020 2020  NMIN, 0)..      
-00011ea0: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
-00011eb0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00011ec0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
-00011ed0: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
-00011ee0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00011ef0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-00011f00: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00011f10: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-00011f20: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-00011f30: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00011f40: 286e 702e 7374 6429 0d0a 2020 2020 6465  (np.std)..    de
-00011f50: 6620 5f73 7464 2861 2c20 6178 6973 3d4e  f _std(a, axis=N
-00011f60: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
-00011f70: 206f 7574 3d4e 6f6e 652c 2064 646f 663d   out=None, ddof=
-00011f80: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
-00011f90: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
-00011fa0: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
-00011fb0: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
-00011fc0: 5449 4f4e 532e 5245 4455 4345 5f53 5444  TIONS.REDUCE_STD
-00011fd0: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
-00011fe0: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
-00011ff0: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
-00012000: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
-00012010: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
-00012020: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00012030: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
-00012040: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
-00012050: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
-00012060: 702e 6e61 6e73 7464 290d 0a20 2020 2064  p.nanstd)..    d
-00012070: 6566 205f 6e61 6e73 7464 2861 2c20 6178  ef _nanstd(a, ax
-00012080: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
-00012090: 6f6e 652c 206f 7574 3d4e 6f6e 652c 2064  one, out=None, d
-000120a0: 646f 663d 4e6f 6e65 2c20 6b65 6570 6469  dof=None, keepdi
-000120b0: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
-000120c0: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-000120d0: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-000120e0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-000120f0: 5f4e 414e 5354 442c 2030 290d 0a20 2020  _NANSTD, 0)..   
-00012100: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-00012110: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-00012120: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-00012130: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00012140: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00012150: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00012160: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00012170: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00012180: 6374 696f 6e28 6e70 2e72 6f75 6e64 290d  ction(np.round).
-00012190: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
-000121a0: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
-000121b0: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-000121c0: 6f6e 286e 702e 6172 6f75 6e64 290d 0a20  on(np.around).. 
-000121d0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
-000121e0: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
-000121f0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00012200: 286e 702e 726f 756e 645f 2920 2023 204e  (np.round_)  # N
-00012210: 2e42 2c20 726f 756e 645f 2069 7320 616e  .B, round_ is an
-00012220: 2061 6c69 6173 2066 6f72 2061 726f 756e   alias for aroun
-00012230: 640d 0a20 2020 2064 6566 205f 726f 756e  d..    def _roun
-00012240: 645f 2861 2c20 6465 6369 6d61 6c73 3d4e  d_(a, decimals=N
-00012250: 6f6e 652c 206f 7574 3d4e 6f6e 6529 3a0d  one, out=None):.
-00012260: 0a20 2020 2020 2020 2023 2054 4f44 4f20  .        # TODO 
-00012270: 6861 6e64 6c65 2060 6465 6369 6d61 6c60  handle `decimal`
-00012280: 2061 6e64 2060 6f75 7460 2061 7267 756d   and `out` argum
-00012290: 656e 7473 0d0a 2020 2020 2020 2020 2320  ents..        # 
-000122a0: 4966 2063 616c 6c65 7273 2064 6563 6964  If callers decid
-000122b0: 6520 746f 2075 7365 2074 6869 7320 4661  e to use this Fa
-000122c0: 7374 4172 7261 7920 7374 6174 6963 6d65  stArray staticme
-000122d0: 7468 6f64 206f 7574 7369 6465 2074 6865  thod outside the
-000122e0: 2073 636f 7065 206f 6620 6172 7261 7920   scope of array 
-000122f0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-00012300: 6c0d 0a20 2020 2020 2020 2023 2070 726f  l..        # pro
-00012310: 7669 6465 2061 7267 756d 656e 7420 6368  vide argument ch
-00012320: 6563 6b73 2073 696e 6365 2069 7420 6d61  ecks since it ma
-00012330: 7920 6265 636f 6d65 2075 6e63 6c65 6172  y become unclear
-00012340: 2077 6865 6e20 7468 696e 6773 2066 6169   when things fai
-00012350: 6c20 6174 2074 6865 2043 2065 7874 656e  l at the C exten
-00012360: 7369 6f6e 206c 6179 6572 2e0d 0a20 2020  sion layer...   
-00012370: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00012380: 7374 616e 6365 2861 2c20 4661 7374 4172  stance(a, FastAr
-00012390: 7261 7929 3a0d 0a20 2020 2020 2020 2020  ray):..         
-000123a0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-000123b0: 726f 7228 6622 7b46 6173 7441 7272 6179  ror(f"{FastArray
-000123c0: 2e5f 5f6e 616d 655f 5f7d 2e5f 726f 756e  .__name__}._roun
-000123d0: 645f 2065 7870 6563 7465 6420 4661 7374  d_ expected Fast
-000123e0: 4172 7261 7920 7375 6274 7970 652c 2067  Array subtype, g
-000123f0: 6f74 207b 7479 7065 2861 297d 2229 0d0a  ot {type(a)}")..
-00012400: 0d0a 2020 2020 2020 2020 6f72 6967 696e  ..        origin
-00012410: 616c 5f64 7479 7065 203d 2061 2e64 7479  al_dtype = a.dty
-00012420: 7065 0d0a 2020 2020 2020 2020 6120 3d20  pe..        a = 
-00012430: 612e 6173 7479 7065 286e 702e 666c 6f61  a.astype(np.floa
-00012440: 7436 3429 0d0a 2020 2020 2020 2020 6661  t64)..        fa
-00012450: 7374 5f66 756e 6374 696f 6e20 3d20 6755  st_function = gU
-00012460: 6e61 7279 5546 756e 6373 2e67 6574 286e  naryUFuncs.get(n
-00012470: 702e 726f 756e 642c 204e 6f6e 6529 0d0a  p.round, None)..
-00012480: 2020 2020 2020 2020 6966 2066 6173 745f          if fast_
-00012490: 6675 6e63 7469 6f6e 2069 7320 4e6f 6e65  function is None
-000124a0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-000124b0: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-000124c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000124d0: 2020 6622 7b46 6173 7441 7272 6179 2e5f    f"{FastArray._
-000124e0: 5f6e 616d 655f 5f7d 2e5f 726f 756e 645f  _name__}._round_
-000124f0: 2075 6e68 616e 646c 6564 2061 7272 6179   unhandled array
-00012500: 2066 756e 6374 696f 6e20 7b6e 702e 726f   function {np.ro
-00012510: 756e 647d 5c6e 4b6e 6f77 6e20 6e75 6d70  und}\nKnown nump
-00012520: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
-00012530: 2074 6f20 7269 7074 6162 6c65 2066 756e   to riptable fun
-00012540: 6374 696f 6e73 3a20 7b72 6570 7228 6755  ctions: {repr(gU
-00012550: 6e61 7279 5546 756e 6373 297d 220d 0a20  naryUFuncs)}".. 
-00012560: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-00012570: 2020 2020 2020 2020 2320 466f 7220 4d41          # For MA
-00012580: 5448 5f4f 5045 5241 5449 4f4e 2e52 4f55  TH_OPERATION.ROU
-00012590: 4e44 2c20 5f42 4153 4943 4d41 5448 5f4f  ND, _BASICMATH_O
-000125a0: 4e45 5f49 4e50 5554 2072 6574 7572 6e73  NE_INPUT returns
-000125b0: 2061 6e20 6172 7261 7920 6061 7272 6179   an array `array
-000125c0: 284e 6f6e 652c 2064 7479 7065 3d6f 626a  (None, dtype=obj
-000125d0: 6563 7429 600d 0a20 2020 2020 2020 2023  ect)`..        #
-000125e0: 2069 6620 7468 6520 696e 7075 7420 6474   if the input dt
-000125f0: 7970 6520 6973 206e 6f74 2061 2066 6c6f  ype is not a flo
-00012600: 6174 3634 2e20 4173 2061 2077 6f72 6b61  at64. As a worka
-00012610: 726f 756e 6420 6361 7374 2074 6f20 666c  round cast to fl
-00012620: 6f61 7436 3420 6474 7970 652c 2070 6572  oat64 dtype, per
-00012630: 666f 726d 2074 6865 206f 7065 7261 7469  form the operati
-00012640: 6f6e 2c0d 0a20 2020 2020 2020 2023 2074  on,..        # t
-00012650: 6865 6e20 6361 7374 2062 6163 6b20 746f  hen cast back to
-00012660: 2074 6865 206f 7269 6769 6e61 6c20 6474   the original dt
-00012670: 7970 652e 0d0a 2020 2020 2020 2020 7265  ype...        re
-00012680: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
-00012690: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-000126a0: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
-000126b0: 5055 5428 612c 2066 6173 745f 6675 6e63  PUT(a, fast_func
-000126c0: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
-000126d0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-000126e0: 7461 6e63 6528 7265 7375 6c74 2c20 4661  tance(result, Fa
-000126f0: 7374 4172 7261 7929 2061 6e64 2069 7369  stArray) and isi
-00012700: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
-00012710: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
-00012720: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00012730: 203d 2072 6573 756c 742e 7669 6577 2846   = result.view(F
-00012740: 6173 7441 7272 6179 290d 0a0d 0a20 2020  astArray)....   
-00012750: 2020 2020 2069 6620 7265 7375 6c74 2e64       if result.d
-00012760: 7479 7065 2021 3d20 6f72 6967 696e 616c  type != original
-00012770: 5f64 7479 7065 3a0d 0a20 2020 2020 2020  _dtype:..       
-00012780: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
-00012790: 7375 6c74 2e61 7374 7970 6528 6f72 6967  sult.astype(orig
-000127a0: 696e 616c 5f64 7479 7065 290d 0a0d 0a20  inal_dtype).... 
-000127b0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000127c0: 7375 6c74 0d0a 0d0a 2020 2020 4073 7461  sult....    @sta
-000127d0: 7469 636d 6574 686f 640d 0a20 2020 2040  ticmethod..    @
-000127e0: 5f41 7272 6179 4675 6e63 7469 6f6e 4865  _ArrayFunctionHe
-000127f0: 6c70 6572 2e72 6567 6973 7465 725f 6172  lper.register_ar
-00012800: 7261 795f 6675 6e63 7469 6f6e 286e 702e  ray_function(np.
-00012810: 7375 6d29 0d0a 2020 2020 6465 6620 5f73  sum)..    def _s
-00012820: 756d 2861 2c20 6178 6973 3d4e 6f6e 652c  um(a, axis=None,
-00012830: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
-00012840: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00012850: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
-00012860: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
-00012870: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00012880: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
-00012890: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-000128a0: 2e52 4544 5543 455f 5355 4d2c 2030 290d  .REDUCE_SUM, 0).
-000128b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000128c0: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
-000128d0: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
-000128e0: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
-000128f0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00012900: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
-00012910: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
-00012920: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
-00012930: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
-00012940: 7375 6d29 0d0a 2020 2020 6465 6620 5f6e  sum)..    def _n
-00012950: 616e 7375 6d28 612c 2061 7869 733d 4e6f  ansum(a, axis=No
-00012960: 6e65 2c20 6474 7970 653d 4e6f 6e65 2c20  ne, dtype=None, 
-00012970: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
-00012980: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
-00012990: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-000129a0: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-000129b0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-000129c0: 5f4e 414e 5355 4d2c 2030 290d 0a20 2020  _NANSUM, 0)..   
-000129d0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-000129e0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
-000129f0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
-00012a00: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
-00012a10: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00012a20: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00012a30: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00012a40: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00012a50: 6374 696f 6e28 6e70 2e76 6172 290d 0a20  ction(np.var).. 
-00012a60: 2020 2064 6566 205f 7661 7228 612c 2061     def _var(a, a
-00012a70: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
-00012a80: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00012a90: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
-00012aa0: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
-00012ab0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00012ac0: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-00012ad0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00012ae0: 455f 5641 522c 2030 290d 0a20 2020 2020  E_VAR, 0)..     
-00012af0: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
-00012b00: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
-00012b10: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
-00012b20: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
-00012b30: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00012b40: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00012b50: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00012b60: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00012b70: 696f 6e28 6e70 2e6e 616e 7661 7229 0d0a  ion(np.nanvar)..
-00012b80: 2020 2020 6465 6620 5f6e 616e 7661 7228      def _nanvar(
-00012b90: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
-00012ba0: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
-00012bb0: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
-00012bc0: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
-00012bd0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00012be0: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-00012bf0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00012c00: 4544 5543 455f 4e41 4e56 4152 2c20 3029  EDUCE_NANVAR, 0)
-00012c10: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00012c20: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-00012c30: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-00012c40: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-00012c50: 6529 0d0a 0d0a 2020 2020 2323 2323 2323  e)....    ######
-00012c60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012c70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012c80: 2323 2323 2323 230d 0a20 2020 2023 2048  #######..    # H
-00012c90: 656c 7065 7220 7365 6374 696f 6e0d 0a20  elper section.. 
-00012ca0: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00012cb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012cc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00012cd0: 0d0a 2020 2020 6465 6620 6162 7328 7365  ..    def abs(se
-00012ce0: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-00012cf0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-00012d00: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
-00012d10: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
-00012d20: 7329 0d0a 0d0a 2020 2020 6465 6620 6d65  s)....    def me
-00012d30: 6469 616e 2873 656c 662c 202a 2a6b 7761  dian(self, **kwa
-00012d40: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
-00012d50: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
-00012d60: 726e 206e 702e 6d65 6469 616e 2873 656c  rn np.median(sel
-00012d70: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
-00012d80: 2020 2020 6465 6620 6e61 6e6d 6564 6961      def nanmedia
-00012d90: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
-00012da0: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
-00012db0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012dc0: 6e70 2e6e 616e 6d65 6469 616e 2873 656c  np.nanmedian(sel
-00012dd0: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
-00012de0: 2020 2020 6465 6620 7175 616e 7469 6c65      def quantile
-00012df0: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-00012e00: 202d 3e20 6e70 2e6e 756d 6265 7220 7c20   -> np.number | 
-00012e10: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00012e20: 2020 2020 7265 7475 726e 206e 702e 7175      return np.qu
-00012e30: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
-00012e40: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00012e50: 6620 6e61 6e71 7561 6e74 696c 6528 7365  f nanquantile(se
-00012e60: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-00012e70: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
-00012e80: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00012e90: 2072 6574 7572 6e20 6e70 2e6e 616e 7175   return np.nanqu
-00012ea0: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
-00012eb0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00012ec0: 6620 7065 7263 656e 7469 6c65 2873 656c  f percentile(sel
-00012ed0: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00012ee0: 6e70 2e6e 756d 6265 7220 7c20 4661 7374  np.number | Fast
-00012ef0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00012f00: 7265 7475 726e 206e 702e 7065 7263 656e  return np.percen
-00012f10: 7469 6c65 2873 656c 662c 202a 2a6b 7761  tile(self, **kwa
-00012f20: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-00012f30: 6e61 6e70 6572 6365 6e74 696c 6528 7365  nanpercentile(se
-00012f40: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
-00012f50: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
-00012f60: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00012f70: 2072 6574 7572 6e20 6e70 2e6e 616e 7065   return np.nanpe
-00012f80: 7263 656e 7469 6c65 2873 656c 662c 202a  rcentile(self, *
-00012f90: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
-00012fa0: 6465 6620 636c 6970 5f6c 6f77 6572 2873  def clip_lower(s
-00012fb0: 656c 662c 2061 5f6d 696e 2c20 2a2a 6b77  elf, a_min, **kw
-00012fc0: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
-00012fd0: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
-00012fe0: 7572 6e20 7365 6c66 2e63 6c69 7028 615f  urn self.clip(a_
-00012ff0: 6d69 6e2c 204e 6f6e 652c 202a 2a6b 7761  min, None, **kwa
-00013000: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-00013010: 636c 6970 5f75 7070 6572 2873 656c 662c  clip_upper(self,
-00013020: 2061 5f6d 6178 2c20 2a2a 6b77 6172 6773   a_max, **kwargs
-00013030: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-00013040: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013050: 7365 6c66 2e63 6c69 7028 4e6f 6e65 2c20  self.clip(None, 
-00013060: 615f 6d61 782c 202a 2a6b 7761 7267 7329  a_max, **kwargs)
-00013070: 0d0a 0d0a 2020 2020 6465 6620 7369 676e  ....    def sign
-00013080: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-00013090: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-000130a0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000130b0: 702e 7369 676e 2873 656c 662c 202a 2a6b  p.sign(self, **k
-000130c0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-000130d0: 6620 7472 756e 6328 7365 6c66 2c20 2a2a  f trunc(self, **
-000130e0: 6b77 6172 6773 2920 2d3e 2046 6173 7441  kwargs) -> FastA
-000130f0: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
-00013100: 6574 7572 6e20 6e70 2e74 7275 6e63 2873  eturn np.trunc(s
-00013110: 656c 662c 202a 2a6b 7761 7267 7329 0d0a  elf, **kwargs)..
-00013120: 0d0a 2020 2020 6465 6620 7768 6572 6528  ..    def where(
-00013130: 7365 6c66 2c20 636f 6e64 6974 696f 6e2c  self, condition,
-00013140: 2079 3d6e 702e 6e61 6e29 202d 3e20 4661   y=np.nan) -> Fa
-00013150: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
-00013160: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00013170: 6574 7572 6e20 6120 6e65 7720 6046 6173  eturn a new `Fas
-00013180: 7441 7272 6179 6020 696e 2077 6869 6368  tArray` in which
-00013190: 2076 616c 7565 7320 6172 6520 7265 706c   values are repl
-000131a0: 6163 6564 2077 6865 7265 2061 2067 6976  aced where a giv
-000131b0: 656e 0d0a 2020 2020 2020 2020 636f 6e64  en..        cond
-000131c0: 6974 696f 6e20 6973 2046 616c 7365 2e0d  ition is False..
-000131d0: 0a0d 0a20 2020 2020 2020 2054 6f20 616c  ...        To al
-000131e0: 736f 2070 726f 7669 6465 2061 2076 616c  so provide a val
-000131f0: 7565 2066 6f72 2077 6865 7265 2074 6865  ue for where the
-00013200: 2063 6f6e 6469 7469 6f6e 2069 7320 5472   condition is Tr
-00013210: 7565 2c20 7573 650d 0a20 2020 2020 2020  ue, use..       
-00013220: 203a 6d65 7468 3a60 7269 7074 6162 6c65   :meth:`riptable
-00013230: 2e77 6865 7265 602e 0d0a 0d0a 2020 2020  .where`.....    
-00013240: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-00013250: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00013260: 2d2d 0d0a 2020 2020 2020 2020 636f 6e64  --..        cond
-00013270: 6974 696f 6e20 3a20 626f 6f6c 206f 7220  ition : bool or 
-00013280: 6172 7261 7920 6f66 2062 6f6f 6c0d 0a20  array of bool.. 
-00013290: 2020 2020 2020 2020 2020 2057 6865 7265             Where
-000132a0: 2074 6865 2063 6f6e 6469 7469 6f6e 2069   the condition i
-000132b0: 7320 5472 7565 2c20 6b65 6570 2074 6865  s True, keep the
-000132c0: 206f 7269 6769 6e61 6c20 7661 6c75 652e   original value.
-000132d0: 2057 6865 7265 2046 616c 7365 2c0d 0a20   Where False,.. 
-000132e0: 2020 2020 2020 2020 2020 2072 6570 6c61             repla
-000132f0: 6365 2077 6974 6820 6079 6020 2869 6620  ce with `y` (if 
-00013300: 6079 6020 6973 2061 2073 6361 6c61 7229  `y` is a scalar)
-00013310: 206f 7220 7468 6520 636f 7272 6573 706f   or the correspo
-00013320: 6e64 696e 6720 7661 6c75 650d 0a20 2020  nding value..   
-00013330: 2020 2020 2020 2020 2066 726f 6d20 6079           from `y
-00013340: 6020 2869 6620 6079 6020 6973 2061 6e20  ` (if `y` is an 
-00013350: 6172 7261 7929 2e20 4966 2060 636f 6e64  array). If `cond
-00013360: 6974 696f 6e60 2069 7320 616e 2061 7272  ition` is an arr
-00013370: 6179 206f 7220 610d 0a20 2020 2020 2020  ay or a..       
-00013380: 2020 2020 2061 2063 6f6d 7061 7269 736f       a compariso
-00013390: 6e20 7468 6174 2072 6574 7572 6e73 2061  n that returns a
-000133a0: 6e20 6172 7261 792c 2074 6865 2061 7272  n array, the arr
-000133b0: 6179 206d 7573 7420 6265 2074 6865 2073  ay must be the s
-000133c0: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
-000133d0: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
-000133e0: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
-000133f0: 7960 2e0d 0a20 2020 2020 2020 2079 203a  y`...        y :
-00013400: 2073 6361 6c61 722c 2061 7272 6179 2c20   scalar, array, 
-00013410: 6f72 2063 616c 6c61 626c 652c 2064 6566  or callable, def
-00013420: 6175 6c74 206e 702e 6e61 6e0d 0a20 2020  ault np.nan..   
-00013430: 2020 2020 2020 2020 2054 6865 2076 616c           The val
-00013440: 7565 2074 6f20 7573 6520 7768 6572 6520  ue to use where 
-00013450: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
-00013460: 616c 7365 2e20 4966 2060 7960 2069 7320  alse. If `y` is 
-00013470: 616e 0d0a 2020 2020 2020 2020 2020 2020  an..            
-00013480: 6172 7261 7920 6f72 2061 2063 616c 6c61  array or a calla
-00013490: 626c 6520 7468 6174 2072 6574 7572 6e73  ble that returns
-000134a0: 2061 6e20 6172 7261 792c 2069 7420 6d75   an array, it mu
-000134b0: 7374 2062 6520 7468 6520 7361 6d65 0d0a  st be the same..
-000134c0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-000134d0: 7468 2061 7320 7468 6520 6361 6c6c 696e  th as the callin
-000134e0: 6720 6046 6173 7441 7272 6179 602e 2054  g `FastArray`. T
-000134f0: 6865 2076 616c 7565 206f 6620 6079 6020  he value of `y` 
-00013500: 7468 6174 2063 6f72 7265 7370 6f6e 6473  that corresponds
-00013510: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-00013520: 2074 6865 2046 616c 7365 2076 616c 7565   the False value
-00013530: 2069 7320 7573 6564 2e0d 0a0d 0a20 2020   is used.....   
-00013540: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00013550: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00013560: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00013570: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
-00013580: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
-00013590: 7769 7468 2076 616c 7565 7320 7265 706c  with values repl
-000135a0: 6163 6564 2077 6865 7265 2060 636f 6e64  aced where `cond
-000135b0: 6974 696f 6e60 2069 7320 4661 6c73 652e  ition` is False.
-000135c0: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-000135d0: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
-000135e0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000135f0: 2e72 6970 7461 626c 652e 7768 6572 6520  .riptable.where 
-00013600: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
-00013610: 6570 6c61 6365 2076 616c 7565 7320 6465  eplace values de
-00013620: 7065 6e64 696e 6720 6f6e 2077 6865 7468  pending on wheth
-00013630: 6572 2061 2067 6976 656e 2063 6f6e 6469  er a given condi
-00013640: 7469 6f6e 2069 7320 5472 7565 206f 720d  tion is True or.
-00013650: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
-00013660: 7365 2e0d 0a0d 0a20 2020 2020 2020 2045  se.....        E
-00013670: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00013680: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00013690: 2020 2060 636f 6e64 6974 696f 6e60 2069     `condition` i
-000136a0: 7320 6120 636f 6d70 6172 6973 6f6e 2074  s a comparison t
-000136b0: 6861 7420 6372 6561 7465 7320 616e 2061  hat creates an a
-000136c0: 7272 6179 206f 6620 626f 6f6c 6561 6e73  rray of booleans
-000136d0: 2c20 616e 640d 0a20 2020 2020 2020 2060  , and..        `
-000136e0: 7960 2069 7320 6120 7363 616c 6172 3a0d  y` is a scalar:.
-000136f0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00013700: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00013710: 7274 2e61 7261 6e67 6528 3529 290d 0a20  rt.arange(5)).. 
-00013720: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
-00013730: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00013740: 5b30 2c20 312c 2032 2c20 332c 2034 5d29  [0, 1, 2, 3, 4])
-00013750: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00013760: 7768 6572 6528 6120 3e20 322c 2031 3030  where(a > 2, 100
-00013770: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00013780: 7272 6179 285b 3130 302c 2031 3030 2c20  rray([100, 100, 
-00013790: 3130 302c 2020 2033 2c20 2020 345d 290d  100,   3,   4]).
-000137a0: 0a0d 0a20 2020 2020 2020 2060 636f 6e64  ...        `cond
-000137b0: 6974 696f 6e60 2061 6e64 2060 7960 2061  ition` and `y` a
-000137c0: 7265 2073 616d 652d 6c65 6e67 7468 2061  re same-length a
-000137d0: 7272 6179 733a 0d0a 0d0a 2020 2020 2020  rrays:....      
-000137e0: 2020 3e3e 3e20 636f 6e64 6974 696f 6e20    >>> condition 
-000137f0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00013800: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
-00013810: 652c 2046 616c 7365 2c20 4661 6c73 655d  e, False, False]
-00013820: 290d 0a20 2020 2020 2020 203e 3e3e 2079  )..        >>> y
-00013830: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00013840: 5b31 3030 2c20 3230 302c 2033 3030 2c20  [100, 200, 300, 
-00013850: 3430 302c 2035 3030 5d29 0d0a 2020 2020  400, 500])..    
-00013860: 2020 2020 3e3e 3e20 612e 7768 6572 6528      >>> a.where(
-00013870: 636f 6e64 6974 696f 6e2c 2079 290d 0a20  condition, y).. 
-00013880: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00013890: 285b 2020 302c 2020 2031 2c20 3330 302c  ([  0,   1, 300,
-000138a0: 2034 3030 2c20 3530 305d 290d 0a20 2020   400, 500])..   
-000138b0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000138c0: 2020 7265 7475 726e 2077 6865 7265 2863    return where(c
-000138d0: 6f6e 6469 7469 6f6e 2c20 7365 6c66 2c20  ondition, self, 
-000138e0: 7929 0d0a 0d0a 2020 2020 6465 6620 636f  y)....    def co
-000138f0: 756e 7428 7365 6c66 2c20 736f 7274 6564  unt(self, sorted
-00013900: 3d54 7275 652c 2066 696c 7465 723d 4e6f  =True, filter=No
-00013910: 6e65 2920 2d3e 2044 6174 6173 6574 3a0d  ne) -> Dataset:.
-00013920: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00013930: 2020 2020 2020 5468 6520 636f 756e 7420        The count 
-00013940: 6f66 2065 6163 6820 756e 6971 7565 2076  of each unique v
-00013950: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
-00013960: 2054 6869 7320 7265 7475 726e 7320 7468   This returns th
-00013970: 6520 7361 6d65 2069 6e66 6f72 6d61 7469  e same informati
-00013980: 6f6e 2074 6861 7420 6060 2e75 6e69 7175  on that ``.uniqu
-00013990: 6528 7265 7475 726e 5f63 6f75 6e74 7320  e(return_counts 
-000139a0: 3d20 5472 7565 2960 600d 0a20 2020 2020  = True)``..     
-000139b0: 2020 2064 6f65 732c 2065 7863 6570 7420     does, except 
-000139c0: 696e 2061 2060 4461 7461 7365 7460 2069  in a `Dataset` i
-000139d0: 6e73 7465 6164 206f 6620 6120 7475 706c  nstead of a tupl
-000139e0: 652e 0d0a 0d0a 2020 2020 2020 2020 5061  e.....        Pa
-000139f0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-00013a00: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-00013a10: 2020 2020 2020 736f 7274 6564 203a 2062        sorted : b
-00013a20: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-00013a30: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
-00013a40: 6865 6e20 5472 7565 2028 7468 6520 6465  hen True (the de
-00013a50: 6661 756c 7429 2c20 756e 6971 7565 2076  fault), unique v
-00013a60: 616c 7565 7320 6172 6520 7265 7475 726e  alues are return
-00013a70: 6564 2069 6e20 736f 7274 6564 206f 7264  ed in sorted ord
-00013a80: 6572 2e20 5365 7420 746f 0d0a 2020 2020  er. Set to..    
-00013a90: 2020 2020 2020 2020 4661 6c73 6520 746f          False to
-00013aa0: 2072 6574 7572 6e20 7468 656d 2069 6e20   return them in 
-00013ab0: 6f72 6465 7220 6f66 2066 6972 7374 2061  order of first a
-00013ac0: 7070 6561 7261 6e63 652e 0d0a 2020 2020  ppearance...    
-00013ad0: 2020 2020 6669 6c74 6572 3a20 6e64 6172      filter: ndar
-00013ae0: 7261 7920 6f66 2062 6f6f 6c2c 2064 6566  ray of bool, def
-00013af0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
-00013b00: 2020 2020 2020 2049 6620 7072 6f76 6964         If provid
-00013b10: 6564 2c20 616e 7920 4661 6c73 6520 7661  ed, any False va
-00013b20: 6c75 6573 2077 696c 6c20 6265 2069 676e  lues will be ign
-00013b30: 6f72 6564 2069 6e20 7468 6520 6361 6c63  ored in the calc
-00013b40: 756c 6174 696f 6e2e 0d0a 0d0a 2020 2020  ulation.....    
-00013b50: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-00013b60: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-00013b70: 2020 2020 2020 4461 7461 7365 740d 0a20        Dataset.. 
-00013b80: 2020 2020 2020 2020 2020 2041 2060 4461             A `Da
-00013b90: 7461 7365 7460 2063 6f6e 7461 696e 696e  taset` containin
-00013ba0: 6720 7468 6520 756e 6971 7565 2076 616c  g the unique val
-00013bb0: 7565 7320 616e 6420 7468 6569 7220 636f  ues and their co
-00013bc0: 756e 7473 2e0d 0a0d 0a20 2020 2020 2020  unts.....       
-00013bd0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00013be0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00013bf0: 2020 2020 2046 6173 7441 7272 6179 2e75       FastArray.u
-00013c00: 6e69 7175 650d 0a0d 0a20 2020 2020 2020  nique....       
-00013c10: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00013c20: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00013c30: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-00013c40: 4661 7374 4172 7261 7928 5b30 2c20 322c  FastArray([0, 2,
-00013c50: 2031 2c20 332c 2033 2c20 322c 2032 5d29   1, 3, 3, 2, 2])
-00013c60: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00013c70: 636f 756e 7428 290d 0a20 2020 2020 2020  count()..       
-00013c80: 202a 556e 6971 7565 2020 2043 6f75 6e74   *Unique   Count
-00013c90: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00013ca0: 2d20 2020 2d2d 2d2d 2d0d 0a20 2020 2020  -   -----..     
-00013cb0: 2020 2020 2020 2020 2030 2020 2020 2020           0      
-00013cc0: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-00013cd0: 2020 3120 2020 2020 2020 310d 0a20 2020    1       1..   
-00013ce0: 2020 2020 2020 2020 2020 2032 2020 2020             2    
-00013cf0: 2020 2033 0d0a 2020 2020 2020 2020 2020     3..          
-00013d00: 2020 2020 3320 2020 2020 2020 320d 0a0d      3       2...
-00013d10: 0a20 2020 2020 2020 2057 6974 6820 6060  .        With ``
-00013d20: 736f 7274 6564 203d 2046 616c 7365 6060  sorted = False``
-00013d30: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-00013d40: 2061 2e63 6f75 6e74 2873 6f72 7465 6420   a.count(sorted 
-00013d50: 3d20 4661 6c73 6529 0d0a 2020 2020 2020  = False)..      
-00013d60: 2020 2a55 6e69 7175 6520 2020 436f 756e    *Unique   Coun
-00013d70: 740d 0a20 2020 2020 2020 202d 2d2d 2d2d  t..        -----
-00013d80: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
-00013d90: 2020 2020 2020 2020 2020 3020 2020 2020            0     
-00013da0: 2020 310d 0a20 2020 2020 2020 2020 2020    1..           
-00013db0: 2020 2032 2020 2020 2020 2033 0d0a 2020     2       3..  
-00013dc0: 2020 2020 2020 2020 2020 2020 3120 2020              1   
-00013dd0: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
-00013de0: 2020 2020 2033 2020 2020 2020 2032 0d0a       3       2..
-00013df0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00013e00: 2020 2020 2075 6e69 7175 655f 636f 756e       unique_coun
-00013e10: 7473 203d 2075 6e69 7175 6528 7365 6c66  ts = unique(self
-00013e20: 2c20 736f 7274 6564 3d73 6f72 7465 642c  , sorted=sorted,
-00013e30: 2072 6574 7572 6e5f 636f 756e 7473 3d54   return_counts=T
-00013e40: 7275 652c 2066 696c 7465 723d 6669 6c74  rue, filter=filt
-00013e50: 6572 290d 0a20 2020 2020 2020 206e 616d  er)..        nam
-00013e60: 6520 3d20 7365 6c66 2e67 6574 5f6e 616d  e = self.get_nam
-00013e70: 6528 290d 0a20 2020 2020 2020 2069 6620  e()..        if 
-00013e80: 6e61 6d65 2069 7320 4e6f 6e65 3a0d 0a20  name is None:.. 
-00013e90: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-00013ea0: 3d20 2255 6e69 7175 6522 0d0a 2020 2020  = "Unique"..    
-00013eb0: 2020 2020 6473 203d 2054 7970 6552 6567      ds = TypeReg
-00013ec0: 6973 7465 722e 4461 7461 7365 7428 7b6e  ister.Dataset({n
-00013ed0: 616d 653a 2075 6e69 7175 655f 636f 756e  ame: unique_coun
-00013ee0: 7473 5b30 5d2c 2022 436f 756e 7422 3a20  ts[0], "Count": 
-00013ef0: 756e 6971 7565 5f63 6f75 6e74 735b 315d  unique_counts[1]
-00013f00: 7d29 0d0a 2020 2020 2020 2020 6473 2e6c  })..        ds.l
-00013f10: 6162 656c 5f73 6574 5f6e 616d 6573 285b  abel_set_names([
-00013f20: 6e61 6d65 5d29 0d0a 2020 2020 2020 2020  name])..        
-00013f30: 7265 7475 726e 2064 730d 0a0d 0a20 2020  return ds....   
-00013f40: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-00013f50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013f60: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
-00013f70: 2020 2020 2320 526f 6c6c 696e 6720 7365      # Rolling se
-00013f80: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
-00013f90: 6e64 6c65 2073 7472 6964 6573 290d 0a20  ndle strides).. 
-00013fa0: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00013fb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013fc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013fd0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-00013fe0: 675f 7375 6d28 7365 6c66 2c20 7769 6e64  g_sum(self, wind
-00013ff0: 6f77 3a20 696e 7420 3d20 3329 202d 3e20  ow: int = 3) -> 
-00014000: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00014010: 2020 2020 7265 7475 726e 2072 632e 526f      return rc.Ro
-00014020: 6c6c 696e 6728 7365 6c66 2c20 524f 4c4c  lling(self, ROLL
-00014030: 494e 475f 4655 4e43 5449 4f4e 532e 524f  ING_FUNCTIONS.RO
-00014040: 4c4c 494e 475f 5355 4d2c 2077 696e 646f  LLING_SUM, windo
-00014050: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
-00014060: 6c6c 696e 675f 6e61 6e73 756d 2873 656c  lling_nansum(sel
-00014070: 662c 2077 696e 646f 773a 2069 6e74 203d  f, window: int =
-00014080: 2033 2920 2d3e 2046 6173 7441 7272 6179   3) -> FastArray
-00014090: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-000140a0: 6e20 7263 2e52 6f6c 6c69 6e67 2873 656c  n rc.Rolling(sel
-000140b0: 662c 2052 4f4c 4c49 4e47 5f46 554e 4354  f, ROLLING_FUNCT
-000140c0: 494f 4e53 2e52 4f4c 4c49 4e47 5f4e 414e  IONS.ROLLING_NAN
-000140d0: 5355 4d2c 2077 696e 646f 7729 0d0a 0d0a  SUM, window)....
-000140e0: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
-000140f0: 6d65 616e 2873 656c 662c 2077 696e 646f  mean(self, windo
-00014100: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
-00014110: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
-00014120: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
-00014130: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
-00014140: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
-00014150: 4c49 4e47 5f4d 4541 4e2c 2077 696e 646f  LING_MEAN, windo
-00014160: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
-00014170: 6c6c 696e 675f 6e61 6e6d 6561 6e28 7365  lling_nanmean(se
-00014180: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
-00014190: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
-000141a0: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
-000141b0: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
-000141c0: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
-000141d0: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
-000141e0: 4e4d 4541 4e2c 2077 696e 646f 7729 0d0a  NMEAN, window)..
-000141f0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-00014200: 675f 7175 616e 7469 6c65 2873 656c 662c  g_quantile(self,
-00014210: 2071 2c20 7769 6e64 6f77 3a20 696e 7420   q, window: int 
-00014220: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
-00014230: 793a 0d0a 2020 2020 2020 2020 7769 6e64  y:..        wind
-00014240: 6f77 203d 206d 696e 2877 696e 646f 772c  ow = min(window,
-00014250: 206c 656e 2873 656c 6629 290d 0a20 2020   len(self))..   
-00014260: 2020 2020 2077 696e 646f 7750 6172 616d       windowParam
-00014270: 203d 2072 6f6c 6c69 6e67 5f71 7561 6e74   = rolling_quant
-00014280: 696c 655f 6675 6e63 5061 7261 6d28 712c  ile_funcParam(q,
-00014290: 2077 696e 646f 7729 0d0a 2020 2020 2020   window)..      
-000142a0: 2020 7265 7475 726e 2072 632e 526f 6c6c    return rc.Roll
-000142b0: 696e 6728 7365 6c66 2c20 524f 4c4c 494e  ing(self, ROLLIN
-000142c0: 475f 4655 4e43 5449 4f4e 532e 524f 4c4c  G_FUNCTIONS.ROLL
-000142d0: 494e 475f 5155 414e 5449 4c45 2c20 7769  ING_QUANTILE, wi
-000142e0: 6e64 6f77 5061 7261 6d29 0d0a 0d0a 2020  ndowParam)....  
-000142f0: 2020 6465 6620 726f 6c6c 696e 675f 7661    def rolling_va
-00014300: 7228 7365 6c66 2c20 7769 6e64 6f77 3a20  r(self, window: 
-00014310: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
-00014320: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00014330: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
-00014340: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
-00014350: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
-00014360: 475f 5641 522c 2077 696e 646f 7729 0d0a  G_VAR, window)..
-00014370: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
-00014380: 675f 6e61 6e76 6172 2873 656c 662c 2077  g_nanvar(self, w
-00014390: 696e 646f 773a 2069 6e74 203d 2033 2920  indow: int = 3) 
-000143a0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
-000143b0: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
-000143c0: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
-000143d0: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
-000143e0: 2e52 4f4c 4c49 4e47 5f4e 414e 5641 522c  .ROLLING_NANVAR,
-000143f0: 2077 696e 646f 7729 0d0a 0d0a 2020 2020   window)....    
-00014400: 6465 6620 726f 6c6c 696e 675f 7374 6428  def rolling_std(
-00014410: 7365 6c66 2c20 7769 6e64 6f77 3a20 696e  self, window: in
-00014420: 7420 3d20 3329 202d 3e20 4661 7374 4172  t = 3) -> FastAr
-00014430: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
-00014440: 7475 726e 2072 632e 526f 6c6c 696e 6728  turn rc.Rolling(
-00014450: 7365 6c66 2c20 524f 4c4c 494e 475f 4655  self, ROLLING_FU
-00014460: 4e43 5449 4f4e 532e 524f 4c4c 494e 475f  NCTIONS.ROLLING_
-00014470: 5354 442c 2077 696e 646f 7729 0d0a 0d0a  STD, window)....
-00014480: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
-00014490: 6e61 6e73 7464 2873 656c 662c 2077 696e  nanstd(self, win
-000144a0: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
-000144b0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-000144c0: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
-000144d0: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
-000144e0: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
-000144f0: 4f4c 4c49 4e47 5f4e 414e 5354 442c 2077  OLLING_NANSTD, w
-00014500: 696e 646f 7729 0d0a 0d0a 2020 2020 2323  indow)....    ##
-00014510: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014520: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014530: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
-00014540: 2023 2054 696d 6557 696e 646f 7720 7365   # TimeWindow se
-00014550: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
-00014560: 6e64 6c65 2073 7472 6964 6573 292c 2074  ndle strides), t
-00014570: 696d 655f 6172 7261 7920 6d75 7374 2062  ime_array must b
-00014580: 6520 494e 5436 340d 0a20 2020 2023 2323  e INT64..    ###
-00014590: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000145a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000145b0: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-000145c0: 6465 6620 7469 6d65 7769 6e64 6f77 5f73  def timewindow_s
-000145d0: 756d 2873 656c 662c 2074 696d 655f 6172  um(self, time_ar
-000145e0: 7261 792c 2074 696d 655f 6469 7374 293a  ray, time_dist):
-000145f0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00014600: 2020 2020 2020 2054 6865 2069 6e70 7574         The input
-00014610: 2061 7272 6179 206d 7573 7420 6265 2069   array must be i
-00014620: 6e74 3634 2061 6e64 2073 6f72 7465 6420  nt64 and sorted 
-00014630: 7769 7468 2065 7665 7220 696e 6372 6561  with ever increa
-00014640: 7369 6e67 2076 616c 7565 732e 0d0a 2020  sing values...  
-00014650: 2020 2020 2020 5375 6d73 2075 7020 7468        Sums up th
-00014660: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
-00014670: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
-00014680: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00014690: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-000146a0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-000146b0: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
-000146c0: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
-000146d0: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
-000146e0: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
-000146f0: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
-00014700: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
-00014710: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
-00014720: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00014730: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00014740: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-00014750: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
-00014760: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
-00014770: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00014780: 7469 6d65 7769 6e64 6f77 5f73 756d 2861  timewindow_sum(a
-00014790: 2c35 290d 0a20 2020 2020 2020 2046 6173  ,5)..        Fas
-000147a0: 7441 7272 6179 285b 2030 2c20 2031 2c20  tArray([ 0,  1, 
-000147b0: 2033 2c20 2036 2c20 3130 2c20 3135 2c20   3,  6, 10, 15, 
-000147c0: 3231 2c20 3237 2c20 3333 2c20 3339 5d2c  21, 27, 33, 39],
-000147d0: 2064 7479 7065 3d69 6e74 3634 290d 0a0d   dtype=int64)...
-000147e0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000147f0: 2020 2020 2020 7265 7475 726e 2072 632e        return rc.
-00014800: 5469 6d65 5769 6e64 6f77 2873 656c 662c  TimeWindow(self,
-00014810: 2074 696d 655f 6172 7261 792c 2054 494d   time_array, TIM
-00014820: 4557 494e 444f 575f 4655 4e43 5449 4f4e  EWINDOW_FUNCTION
-00014830: 532e 5449 4d45 5749 4e44 4f57 5f53 554d  S.TIMEWINDOW_SUM
-00014840: 2c20 7469 6d65 5f64 6973 7429 0d0a 0d0a  , time_dist)....
-00014850: 2020 2020 6465 6620 7469 6d65 7769 6e64      def timewind
-00014860: 6f77 5f70 726f 6428 7365 6c66 2c20 7469  ow_prod(self, ti
-00014870: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
-00014880: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
-00014890: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
-000148a0: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
-000148b0: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
-000148c0: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
-000148d0: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
-000148e0: 2e0d 0a20 2020 2020 2020 204d 756c 7469  ...        Multi
-000148f0: 706c 6965 7320 7570 2074 6865 2076 616c  plies up the val
-00014900: 7565 7320 666f 7220 6120 6769 7665 6e20  ues for a given 
-00014910: 7469 6d65 2077 696e 646f 772e 0d0a 0d0a  time window.....
-00014920: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00014930: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00014940: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00014950: 7469 6d65 5f61 7272 6179 3a20 736f 7274  time_array: sort
-00014960: 6564 2069 6e74 6567 6572 2061 7272 6179  ed integer array
-00014970: 206f 6620 7469 6d65 7374 616d 7073 0d0a   of timestamps..
-00014980: 2020 2020 2020 2020 7469 6d65 5f64 6973          time_dis
-00014990: 743a 2069 6e74 6567 6572 2076 616c 7565  t: integer value
-000149a0: 206f 6620 7468 6520 7469 6d65 2077 696e   of the time win
-000149b0: 646f 7720 7369 7a65 0d0a 0d0a 2020 2020  dow size....    
-000149c0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-000149d0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-000149e0: 2020 2020 2020 2020 3e3e 3e20 613d 7274          >>> a=rt
-000149f0: 2e61 7261 6e67 6528 3130 2c20 6474 7970  .arange(10, dtyp
-00014a00: 653d 7274 2e69 6e74 3634 290d 0a20 2020  e=rt.int64)..   
-00014a10: 2020 2020 203e 3e3e 2061 2e74 696d 6577       >>> a.timew
-00014a20: 696e 646f 775f 7072 6f64 2861 2c35 290d  indow_prod(a,5).
-00014a30: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00014a40: 6179 285b 2020 2020 302c 2020 2020 2030  ay([    0,     0
-00014a50: 2c20 2020 2020 302c 2020 2020 2030 2c20  ,     0,     0, 
-00014a60: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
-00014a70: 3732 302c 2020 3530 3430 2c20 3230 3136  720,  5040, 2016
-00014a80: 302c 2036 3034 3830 5d2c 2064 7479 7065  0, 60480], dtype
-00014a90: 3d69 6e74 3634 290d 0a20 2020 2020 2020  =int64)..       
-00014aa0: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
-00014ab0: 7475 726e 2072 632e 5469 6d65 5769 6e64  turn rc.TimeWind
-00014ac0: 6f77 2873 656c 662c 2074 696d 655f 6172  ow(self, time_ar
-00014ad0: 7261 792c 2054 494d 4557 494e 444f 575f  ray, TIMEWINDOW_
-00014ae0: 4655 4e43 5449 4f4e 532e 5449 4d45 5749  FUNCTIONS.TIMEWI
-00014af0: 4e44 4f57 5f50 524f 442c 2074 696d 655f  NDOW_PROD, time_
-00014b00: 6469 7374 290d 0a0d 0a20 2020 2023 2323  dist)....    ###
-00014b10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014b20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014b30: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-00014b40: 2320 426f 7474 6c65 6e65 636b 2073 6563  # Bottleneck sec
-00014b50: 7469 6f6e 2028 6f6e 6c79 2068 616e 646c  tion (only handl
-00014b60: 6573 2069 6e74 3332 2f69 6e74 3634 2f66  es int32/int64/f
-00014b70: 6c6f 6174 3332 2f66 6c6f 6174 3634 290d  loat32/float64).
-00014b80: 0a20 2020 2023 2062 6f74 746c 656e 6563  .    # bottlenec
-00014b90: 6b20 6973 206f 7074 696f 6e61 6c0d 0a20  k is optional.. 
-00014ba0: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-00014bb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014bc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00014bd0: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
-00014be0: 756d 2873 656c 662c 202a 6172 6773 2c20  um(self, *args, 
-00014bf0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00014c00: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-00014c10: 7665 5f73 756d 2873 656c 662c 202a 6172  ve_sum(self, *ar
-00014c20: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-00014c30: 0a20 2020 2064 6566 206d 6f76 655f 6d65  .    def move_me
-00014c40: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
-00014c50: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00014c60: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-00014c70: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
-00014c80: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
-00014c90: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
-00014ca0: 7464 2873 656c 662c 202a 6172 6773 2c20  td(self, *args, 
-00014cb0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00014cc0: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
-00014cd0: 7665 5f73 7464 2873 656c 662c 202a 6172  ve_std(self, *ar
-00014ce0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
-00014cf0: 0a20 2020 2064 6566 206d 6f76 655f 7661  .    def move_va
-00014d00: 7228 7365 6c66 2c20 2a61 7267 732c 202a  r(self, *args, *
-00014d10: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-00014d20: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
-00014d30: 655f 7661 7228 7365 6c66 2c20 2a61 7267  e_var(self, *arg
-00014d40: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
-00014d50: 2020 2020 6465 6620 6d6f 7665 5f6d 696e      def move_min
-00014d60: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
-00014d70: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-00014d80: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
-00014d90: 5f6d 696e 2873 656c 662c 202a 6172 6773  _min(self, *args
-00014da0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-00014db0: 2020 2064 6566 206d 6f76 655f 6d61 7828     def move_max(
-00014dc0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-00014dd0: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
-00014de0: 2072 6574 7572 6e20 626e 2e6d 6f76 655f   return bn.move_
-00014df0: 6d61 7828 7365 6c66 2c20 2a61 7267 732c  max(self, *args,
-00014e00: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00014e10: 2020 6465 6620 6d6f 7665 5f61 7267 6d69    def move_argmi
-00014e20: 6e28 7365 6c66 2c20 2a61 7267 732c 202a  n(self, *args, *
-00014e30: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-00014e40: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
-00014e50: 655f 6172 676d 696e 2873 656c 662c 202a  e_argmin(self, *
-00014e60: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00014e70: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
-00014e80: 6172 676d 6178 2873 656c 662c 202a 6172  argmax(self, *ar
-00014e90: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
-00014ea0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-00014eb0: 6e2e 6d6f 7665 5f61 7267 6d61 7828 7365  n.move_argmax(se
-00014ec0: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
-00014ed0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-00014ee0: 6d6f 7665 5f6d 6564 6961 6e28 7365 6c66  move_median(self
-00014ef0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
-00014f00: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
-00014f10: 7572 6e20 626e 2e6d 6f76 655f 6d65 6469  urn bn.move_medi
-00014f20: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
-00014f30: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-00014f40: 2064 6566 206d 6f76 655f 7261 6e6b 2873   def move_rank(s
-00014f50: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-00014f60: 6172 6773 293a 0d0a 2020 2020 2020 2020  args):..        
-00014f70: 7265 7475 726e 2062 6e2e 6d6f 7665 5f72  return bn.move_r
-00014f80: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
-00014f90: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00014fa0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00014fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00014ff0: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
-00015000: 2873 656c 662c 206f 6c64 2c20 6e65 7729  (self, old, new)
-00015010: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00015020: 6e20 626e 2e72 6570 6c61 6365 2873 656c  n bn.replace(sel
-00015030: 662c 206f 6c64 2c20 6e65 7729 0d0a 0d0a  f, old, new)....
-00015040: 2020 2020 6465 6620 7061 7274 6974 696f      def partitio
-00015050: 6e32 2873 656c 662c 202a 6172 6773 2c20  n2(self, *args, 
-00015060: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00015070: 2020 2020 7265 7475 726e 2062 6e2e 7061      return bn.pa
-00015080: 7274 6974 696f 6e28 7365 6c66 2c20 2a61  rtition(self, *a
-00015090: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
-000150a0: 0d0a 2020 2020 6465 6620 6172 6770 6172  ..    def argpar
-000150b0: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
-000150c0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-000150d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000150e0: 626e 2e61 7267 7061 7274 6974 696f 6e28  bn.argpartition(
-000150f0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-00015100: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
-00015110: 6620 7261 6e6b 6461 7461 2873 656c 662c  f rankdata(self,
-00015120: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-00015130: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00015140: 726e 2062 6e2e 7261 6e6b 6461 7461 2873  rn bn.rankdata(s
-00015150: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-00015160: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
-00015170: 206e 616e 7261 6e6b 6461 7461 2873 656c   nanrankdata(sel
-00015180: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00015190: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
-000151a0: 7475 726e 2062 6e2e 6e61 6e72 616e 6b64  turn bn.nanrankd
-000151b0: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
-000151c0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-000151d0: 2020 6465 6620 7075 7368 2873 656c 662c    def push(self,
-000151e0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-000151f0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00015200: 726e 2062 6e2e 7075 7368 2873 656c 662c  rn bn.push(self,
-00015210: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-00015220: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-00015230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015270: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00015280: 6973 736f 7274 6564 2873 656c 6629 202d  issorted(self) -
-00015290: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
-000152a0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-000152b0: 7475 726e 2054 7275 6520 6966 2074 6865  turn True if the
-000152c0: 2061 7272 6179 2069 7320 736f 7274 6564   array is sorted
-000152d0: 2c20 4661 6c73 6520 6f74 6865 7277 6973  , False otherwis
-000152e0: 652e 0d0a 0d0a 2020 2020 2020 2020 4e61  e.....        Na
-000152f0: 4e73 2061 7420 7468 6520 656e 6420 6f66  Ns at the end of
-00015300: 2061 6e20 6172 7261 7920 6172 6520 636f   an array are co
-00015310: 6e73 6964 6572 6564 2073 6f72 7465 642e  nsidered sorted.
-00015320: 0d0a 0d0a 2020 2020 2020 2020 4361 6c6c  ....        Call
-00015330: 7320 3a6d 6574 683a 6072 6970 7461 626c  s :meth:`riptabl
-00015340: 652e 6973 736f 7274 6564 602e 0d0a 0d0a  e.issorted`.....
-00015350: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00015360: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00015370: 0d0a 2020 2020 2020 2020 626f 6f6c 0d0a  ..        bool..
-00015380: 2020 2020 2020 2020 2020 2020 5472 7565              True
-00015390: 2069 6620 7468 6520 6172 7261 7920 6973   if the array is
-000153a0: 2073 6f72 7465 642c 2046 616c 7365 206f   sorted, False o
-000153b0: 7468 6572 7769 7365 2e0d 0a0d 0a20 2020  therwise.....   
-000153c0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-000153d0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000153e0: 0a20 2020 2020 2020 2072 6970 7461 626c  .        riptabl
-000153f0: 652e 6973 736f 7274 6564 0d0a 0d0a 2020  e.issorted....  
-00015400: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-00015410: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00015420: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-00015430: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00015440: 2761 272c 2027 6227 2c20 2763 275d 290d  'a', 'b', 'c']).
-00015450: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00015460: 7373 6f72 7465 6428 290d 0a20 2020 2020  ssorted()..     
-00015470: 2020 2054 7275 650d 0a0d 0a20 2020 2020     True....     
-00015480: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-00015490: 7374 4172 7261 7928 5b31 2e30 2c20 322e  stArray([1.0, 2.
-000154a0: 302c 2033 2e30 2c20 7274 2e6e 616e 5d29  0, 3.0, rt.nan])
-000154b0: 0d0a 2020 2020 2020 2020 3e3e 3e20 7274  ..        >>> rt
-000154c0: 2e69 7373 6f72 7465 6428 6129 0d0a 2020  .issorted(a)..  
-000154d0: 2020 2020 2020 5472 7565 0d0a 0d0a 2020        True....  
-000154e0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-000154f0: 2e46 6173 7441 7272 6179 285b 2761 272c  .FastArray(['a',
-00015500: 2027 6327 2c20 2762 275d 290d 0a20 2020   'c', 'b'])..   
-00015510: 2020 2020 203e 3e3e 2061 2e69 7373 6f72       >>> a.issor
-00015520: 7465 6428 290d 0a20 2020 2020 2020 2046  ted()..        F
-00015530: 616c 7365 0d0a 2020 2020 2020 2020 2222  alse..        ""
-00015540: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00015550: 6e20 6973 736f 7274 6564 2873 656c 6629  n issorted(self)
-00015560: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00015570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000155a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000155b0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-000155c0: 756e 6172 795f 6f70 2873 656c 662c 2066  unary_op(self, f
-000155d0: 756e 636e 756d 2c20 6661 6e63 793d 4661  uncnum, fancy=Fa
-000155e0: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
-000155f0: 793a 0d0a 2020 2020 2020 2020 6966 2073  y:..        if s
-00015600: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
-00015610: 6f72 7465 6428 7365 6c66 293a 0d0a 2020  orted(self):..  
-00015620: 2020 2020 2020 2020 2020 2320 6d61 6b65            # make
-00015630: 2069 7420 636f 6e74 6967 756f 7573 0d0a   it contiguous..
-00015640: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
-00015650: 3d20 7365 6c66 2e63 6f70 7928 290d 0a20  = self.copy().. 
-00015660: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00015670: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
-00015680: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
-00015690: 6675 6e63 203d 2054 7970 6552 6567 6973  func = TypeRegis
-000156a0: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
-000156b0: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
-000156c0: 5055 540d 0a20 2020 2020 2020 2072 6573  PUT..        res
-000156d0: 756c 7420 3d20 6675 6e63 2861 7272 2c20  ult = func(arr, 
-000156e0: 6675 6e63 6e75 6d2c 2030 290d 0a0d 0a20  funcnum, 0).... 
-000156f0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00015700: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-00015710: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00015720: 6545 7272 6f72 2866 2243 6f75 6c64 206e  eError(f"Could n
-00015730: 6f74 2070 6572 666f 726d 206f 7065 7261  ot perform opera
-00015740: 7469 6f6e 207b 6675 6e63 6e75 6d7d 206f  tion {funcnum} o
-00015750: 6e20 4661 7374 4172 7261 7920 6f66 2064  n FastArray of d
-00015760: 7479 7065 207b 6172 722e 6474 7970 657d  type {arr.dtype}
-00015770: 2229 0d0a 2020 2020 2020 2020 6966 2066  ")..        if f
-00015780: 616e 6379 3a0d 0a20 2020 2020 2020 2020  ancy:..         
-00015790: 2020 2072 6573 756c 7420 3d20 626f 6f6c     result = bool
-000157a0: 5f74 6f5f 6661 6e63 7928 7265 7375 6c74  _to_fancy(result
-000157b0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-000157c0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-000157d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000157e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000157f0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
-00015800: 2020 2023 2042 6f6f 6c65 616e 2073 6563     # Boolean sec
-00015810: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
-00015820: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015830: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015840: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
-00015850: 2069 736e 6f72 6d61 6c28 7365 6c66 2c20   isnormal(self, 
-00015860: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00015870: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00015880: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00015890: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
-000158a0: 524d 414c 2c20 6661 6e63 793d 6661 6e63  RMAL, fancy=fanc
-000158b0: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
-000158c0: 6e6f 746e 6f72 6d61 6c28 7365 6c66 2c20  notnormal(self, 
-000158d0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-000158e0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000158f0: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00015900: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
-00015910: 544e 4f52 4d41 4c2c 2066 616e 6379 3d66  TNORMAL, fancy=f
-00015920: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
-00015930: 2069 736e 616e 2873 656c 662c 2066 616e   isnan(self, fan
-00015940: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
-00015950: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00015960: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00015970: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00015980: 7275 6520 666f 7220 6561 6368 2065 6c65  rue for each ele
-00015990: 6d65 6e74 2074 6861 7427 7320 6120 4e61  ment that's a Na
-000159a0: 4e20 284e 6f74 2061 204e 756d 6265 7229  N (Not a Number)
-000159b0: 2c0d 0a20 2020 2020 2020 2046 616c 7365  ,..        False
-000159c0: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
-000159d0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-000159e0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000159f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-00015a00: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
-00015a10: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00015a20: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
-00015a30: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
-00015a40: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
-00015a50: 7320 6f66 2074 6865 2054 7275 6520 284e  s of the True (N
-00015a60: 614e 2920 7661 6c75 6573 2e0d 0a0d 0a20  aN) values..... 
-00015a70: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00015a80: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00015a90: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00015aa0: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00015ab0: 2020 4120 6046 6173 7441 7272 6179 6020    A `FastArray` 
-00015ac0: 6f66 2062 6f6f 6c65 616e 7320 6f72 2069  of booleans or i
-00015ad0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
-00015ae0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00015af0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00015b00: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00015b10: 2e69 736e 6f74 6e61 6e2c 2046 6173 7441  .isnotnan, FastA
-00015b20: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
-00015b30: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
-00015b40: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
-00015b50: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
-00015b60: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
-00015b70: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
-00015b80: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
-00015b90: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
-00015ba0: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
-00015bb0: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
-00015bc0: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
-00015bd0: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
-00015be0: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
-00015bf0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
-00015c00: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
-00015c10: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
-00015c20: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
-00015c30: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
-00015c40: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00015c50: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00015c60: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00015c70: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-00015c80: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
-00015c90: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
-00015ca0: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
-00015cb0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-00015cc0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
-00015cd0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-00015ce0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-00015cf0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-00015d00: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
-00015d10: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
-00015d20: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00015d30: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00015d40: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00015d50: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-00015d60: 6179 285b 7274 2e6e 616e 2c20 7274 2e6e  ay([rt.nan, rt.n
-00015d70: 616e 2c20 6e70 2e69 6e66 2c20 335d 290d  an, np.inf, 3]).
-00015d80: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00015d90: 736e 616e 2829 0d0a 2020 2020 2020 2020  snan()..        
-00015da0: 4661 7374 4172 7261 7928 5b20 5472 7565  FastArray([ True
-00015db0: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
-00015dc0: 4661 6c73 655d 290d 0a0d 0a20 2020 2020  False])....     
-00015dd0: 2020 2057 6974 6820 6060 6661 6e63 7920     With ``fancy 
-00015de0: 3d20 5472 7565 6060 3a0d 0a0d 0a20 2020  = True``:....   
-00015df0: 2020 2020 203e 3e3e 2061 2e69 736e 616e       >>> a.isnan
-00015e00: 2866 616e 6379 203d 2054 7275 6529 0d0a  (fancy = True)..
-00015e10: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00015e20: 7928 5b30 2c20 315d 290d 0a20 2020 2020  y([0, 1])..     
-00015e30: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00015e40: 7265 7475 726e 2073 656c 662e 5f75 6e61  return self._una
-00015e50: 7279 5f6f 7028 4d41 5448 5f4f 5045 5241  ry_op(MATH_OPERA
-00015e60: 5449 4f4e 2e49 534e 414e 2c20 6661 6e63  TION.ISNAN, fanc
-00015e70: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
-00015e80: 6465 6620 6973 6e6f 746e 616e 2873 656c  def isnotnan(sel
-00015e90: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
-00015ea0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00015eb0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00015ec0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00015ed0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00015ee0: 6368 2065 6c65 6d65 6e74 2074 6861 7427  ch element that'
-00015ef0: 7320 6e6f 7420 6120 4e61 4e20 284e 6f74  s not a NaN (Not
-00015f00: 2061 0d0a 2020 2020 2020 2020 4e75 6d62   a..        Numb
-00015f10: 6572 292c 2046 616c 7365 206f 7468 6572  er), False other
-00015f20: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
-00015f30: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-00015f40: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00015f50: 0a20 2020 2020 2020 2066 616e 6379 203a  .        fancy :
-00015f60: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
-00015f70: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00015f80: 2020 5365 7420 746f 2054 7275 6520 746f    Set to True to
-00015f90: 2069 6e73 7465 6164 2072 6574 7572 6e20   instead return 
-00015fa0: 7468 6520 696e 6469 6365 7320 6f66 2074  the indices of t
-00015fb0: 6865 2054 7275 6520 286e 6f6e 2d4e 614e  he True (non-NaN
-00015fc0: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
-00015fd0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00015fe0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00015ff0: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
-00016000: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
-00016010: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
-00016020: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
-00016030: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
-00016040: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00016050: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00016060: 2020 2020 2046 6173 7441 7272 6179 2e69       FastArray.i
-00016070: 736e 616e 2c20 4661 7374 4172 7261 792e  snan, FastArray.
-00016080: 6e6f 746e 612c 2046 6173 7441 7272 6179  notna, FastArray
-00016090: 2e69 736e 616e 6f72 7a65 726f 2c20 7269  .isnanorzero, ri
-000160a0: 7074 6162 6c65 2e69 736e 616e 2c0d 0a20  ptable.isnan,.. 
-000160b0: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
-000160c0: 6973 6e6f 746e 616e 2c20 7269 7074 6162  isnotnan, riptab
-000160d0: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
-000160e0: 4361 7465 676f 7269 6361 6c2e 6973 6e61  Categorical.isna
-000160f0: 6e2c 0d0a 2020 2020 2020 2020 4361 7465  n,..        Cate
-00016100: 676f 7269 6361 6c2e 6973 6e6f 746e 616e  gorical.isnotnan
-00016110: 2c20 4361 7465 676f 7269 6361 6c2e 6e6f  , Categorical.no
-00016120: 746e 612c 2044 6174 652e 6973 6e61 6e2c  tna, Date.isnan,
-00016130: 2044 6174 652e 6973 6e6f 746e 616e 2c0d   Date.isnotnan,.
-00016140: 0a20 2020 2020 2020 2044 6174 6554 696d  .        DateTim
-00016150: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
-00016160: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
-00016170: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
-00016180: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
-00016190: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
-000161a0: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-000161b0: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-000161c0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-000161d0: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-000161e0: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
-000161f0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
-00016200: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
-00016210: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-00016220: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
-00016230: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00016240: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00016250: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00016260: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
-00016270: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
-00016280: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00016290: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000162a0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-000162b0: 2072 742e 4661 7374 4172 7261 7928 5b72   rt.FastArray([r
-000162c0: 742e 6e61 6e2c 206e 702e 696e 662c 2032  t.nan, np.inf, 2
-000162d0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-000162e0: 612e 6973 6e6f 746e 616e 2829 0d0a 2020  a.isnotnan()..  
-000162f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00016300: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
-00016310: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-00016320: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
-00016330: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
-00016340: 2020 2020 3e3e 3e20 612e 6973 6e6f 746e      >>> a.isnotn
-00016350: 616e 2866 616e 6379 203d 2054 7275 6529  an(fancy = True)
-00016360: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00016370: 7261 7928 5b31 2c20 325d 290d 0a20 2020  ray([1, 2])..   
-00016380: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00016390: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-000163a0: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-000163b0: 5241 5449 4f4e 2e49 534e 4f54 4e41 4e2c  RATION.ISNOTNAN,
-000163c0: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
-000163d0: 0a20 2020 2064 6566 2069 736e 616e 6f72  .    def isnanor
-000163e0: 7a65 726f 2873 656c 662c 2066 616e 6379  zero(self, fancy
-000163f0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-00016400: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00016410: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-00016420: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
-00016430: 6520 666f 7220 6561 6368 2065 6c65 6d65  e for each eleme
-00016440: 6e74 2074 6861 7427 7320 6120 4e61 4e20  nt that's a NaN 
-00016450: 284e 6f74 2061 204e 756d 6265 7229 0d0a  (Not a Number)..
-00016460: 2020 2020 2020 2020 6f72 207a 6572 6f2c          or zero,
-00016470: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
-00016480: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00016490: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-000164a0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-000164b0: 2020 2020 2066 616e 6379 203a 2062 6f6f       fancy : boo
-000164c0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-000164d0: 0d0a 2020 2020 2020 2020 2020 2020 5365  ..            Se
-000164e0: 7420 746f 2054 7275 6520 746f 2069 6e73  t to True to ins
-000164f0: 7465 6164 2072 6574 7572 6e20 7468 6520  tead return the 
-00016500: 696e 6469 6365 7320 6f66 2074 6865 2054  indices of the T
-00016510: 7275 6520 284e 614e 206f 7220 7a65 726f  rue (NaN or zero
-00016520: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
-00016530: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00016540: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00016550: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
-00016560: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
-00016570: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
-00016580: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
-00016590: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
-000165a0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-000165b0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-000165c0: 2020 2020 2072 6970 7461 626c 652e 6973       riptable.is
-000165d0: 6e61 6e6f 727a 6572 6f2c 2072 6970 7461  nanorzero, ripta
-000165e0: 626c 652e 6973 6e61 6e2c 2072 6970 7461  ble.isnan, ripta
-000165f0: 626c 652e 6973 6e6f 746e 616e 2c20 4661  ble.isnotnan, Fa
-00016600: 7374 4172 7261 792e 6973 6e61 6e2c 0d0a  stArray.isnan,..
-00016610: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00016620: 792e 6973 6e6f 746e 616e 2c20 4361 7465  y.isnotnan, Cate
-00016630: 676f 7269 6361 6c2e 6973 6e61 6e2c 2043  gorical.isnan, C
-00016640: 6174 6567 6f72 6963 616c 2e69 736e 6f74  ategorical.isnot
-00016650: 6e61 6e2c 2044 6174 652e 6973 6e61 6e2c  nan, Date.isnan,
-00016660: 0d0a 2020 2020 2020 2020 4461 7465 2e69  ..        Date.i
-00016670: 736e 6f74 6e61 6e2c 2044 6174 6554 696d  snotnan, DateTim
-00016680: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
-00016690: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
-000166a0: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
-000166b0: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
-000166c0: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
-000166d0: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-000166e0: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-000166f0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-00016700: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-00016710: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
-00016720: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
-00016730: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
-00016740: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-00016750: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
-00016760: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00016770: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00016780: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00016790: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
-000167a0: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
-000167b0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-000167c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000167d0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-000167e0: 2072 742e 4661 7374 4172 7261 7928 5b30   rt.FastArray([0
-000167f0: 2c20 7274 2e6e 616e 2c20 6e70 2e69 6e66  , rt.nan, np.inf
-00016800: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
-00016810: 3e3e 2061 2e69 736e 616e 6f72 7a65 726f  >> a.isnanorzero
-00016820: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
-00016830: 4172 7261 7928 5b20 5472 7565 2c20 2054  Array([ True,  T
-00016840: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
-00016850: 655d 290d 0a0d 0a20 2020 2020 2020 2057  e])....        W
-00016860: 6974 6820 6060 6661 6e63 7920 3d20 5472  ith ``fancy = Tr
-00016870: 7565 6060 3a0d 0a0d 0a20 2020 2020 2020  ue``:....       
-00016880: 203e 3e3e 2061 2e69 736e 616e 6f72 7a65   >>> a.isnanorze
-00016890: 726f 2866 616e 6379 203d 2054 7275 6529  ro(fancy = True)
-000168a0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-000168b0: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
-000168c0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000168d0: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-000168e0: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-000168f0: 5241 5449 4f4e 2e49 534e 414e 4f52 5a45  RATION.ISNANORZE
-00016900: 524f 2c20 6661 6e63 793d 6661 6e63 7929  RO, fancy=fancy)
-00016910: 0d0a 0d0a 2020 2020 6465 6620 6973 6669  ....    def isfi
-00016920: 6e69 7465 2873 656c 662c 2066 616e 6379  nite(self, fancy
-00016930: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-00016940: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00016950: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-00016960: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
-00016970: 6520 666f 7220 6561 6368 2066 696e 6974  e for each finit
-00016980: 6520 6046 6173 7441 7272 6179 6020 656c  e `FastArray` el
-00016990: 656d 656e 742c 2046 616c 7365 0d0a 2020  ement, False..  
-000169a0: 2020 2020 2020 6f74 6865 7277 6973 652e        otherwise.
-000169b0: 0d0a 0d0a 2020 2020 2020 2020 4120 7661  ....        A va
-000169c0: 6c75 6520 6973 2063 6f6e 7369 6465 7265  lue is considere
-000169d0: 6420 746f 2062 6520 6669 6e69 7465 2069  d to be finite i
-000169e0: 6620 6974 2773 206e 6f74 2070 6f73 6974  f it's not posit
-000169f0: 6976 6520 6f72 206e 6567 6174 6976 6520  ive or negative 
-00016a00: 696e 6669 6e69 7479 0d0a 2020 2020 2020  infinity..      
-00016a10: 2020 6f72 2061 204e 614e 2028 4e6f 7420    or a NaN (Not 
-00016a20: 6120 4e75 6d62 6572 292e 0d0a 0d0a 2020  a Number).....  
-00016a30: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00016a40: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00016a50: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
-00016a60: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
-00016a70: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
-00016a80: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
-00016a90: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
-00016aa0: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
-00016ab0: 206f 6620 7468 6520 5472 7565 2028 6669   of the True (fi
-00016ac0: 6e69 7465 2920 7661 6c75 6573 2e0d 0a0d  nite) values....
-00016ad0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00016ae0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00016af0: 2d0d 0a20 2020 2020 2020 2060 4661 7374  -..        `Fast
-00016b00: 4172 7261 7960 0d0a 2020 2020 2020 2020  Array`..        
-00016b10: 2020 2020 416e 2061 7272 6179 206f 7220      An array or 
-00016b20: 626f 6f6c 6561 6e73 206f 7220 696e 6469  booleans or indi
-00016b30: 6365 732e 0d0a 0d0a 2020 2020 2020 2020  ces.....        
-00016b40: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-00016b50: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00016b60: 2020 2020 4661 7374 4172 7261 792e 6973      FastArray.is
-00016b70: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
-00016b80: 626c 652e 6973 6669 6e69 7465 2c20 7269  ble.isfinite, ri
-00016b90: 7074 6162 6c65 2e69 736e 6f74 6669 6e69  ptable.isnotfini
-00016ba0: 7465 2c20 7269 7074 6162 6c65 2e69 7369  te, riptable.isi
-00016bb0: 6e66 2c0d 0a20 2020 2020 2020 2072 6970  nf,..        rip
-00016bc0: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
-00016bd0: 4661 7374 4172 7261 792e 6973 696e 662c  FastArray.isinf,
-00016be0: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
-00016bf0: 696e 660d 0a20 2020 2020 2020 2044 6174  inf..        Dat
-00016c00: 6173 6574 2e6d 6173 6b5f 6f72 5f69 7366  aset.mask_or_isf
-00016c10: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
-00016c20: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-00016c30: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
-00016c40: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
-00016c50: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
-00016c60: 6861 7420 6861 7320 6174 206c 6561 7374  hat has at least
-00016c70: 0d0a 2020 2020 2020 2020 2020 2020 6f6e  ..            on
-00016c80: 6520 6669 6e69 7465 2076 616c 7565 2e0d  e finite value..
-00016c90: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
-00016ca0: 2e6d 6173 6b5f 616e 645f 6973 6669 6e69  .mask_and_isfini
-00016cb0: 7465 203a 0d0a 2020 2020 2020 2020 2020  te :..          
-00016cc0: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
-00016cd0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
-00016ce0: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
-00016cf0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
-00016d00: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
-00016d10: 2020 2020 2020 2020 2020 2066 696e 6974             finit
-00016d20: 6520 7661 6c75 6573 2e0d 0a20 2020 2020  e values...     
-00016d30: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
-00016d40: 6f72 5f69 7369 6e66 203a 0d0a 2020 2020  or_isinf :..    
-00016d50: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-00016d60: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-00016d70: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-00016d80: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-00016d90: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
-00016da0: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
-00016db0: 206f 6e65 2076 616c 7565 2074 6861 7427   one value that'
-00016dc0: 7320 706f 7369 7469 7665 206f 7220 6e65  s positive or ne
-00016dd0: 6761 7469 7665 2069 6e66 696e 6974 792e  gative infinity.
-00016de0: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-00016df0: 742e 6d61 736b 5f61 6e64 5f69 7369 6e66  t.mask_and_isinf
-00016e00: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
-00016e10: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
-00016e20: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
-00016e30: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
-00016e40: 6173 6574 6020 726f 7720 7468 6174 2063  aset` row that c
-00016e50: 6f6e 7461 696e 7320 616c 6c0d 0a20 2020  ontains all..   
-00016e60: 2020 2020 2020 2020 2069 6e66 696e 6974           infinit
-00016e70: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
-00016e80: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00016e90: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00016ea0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-00016eb0: 2072 742e 4661 7374 4172 7261 7928 5b6e   rt.FastArray([n
-00016ec0: 702e 696e 662c 206e 702e 4e49 4e46 2c20  p.inf, np.NINF, 
-00016ed0: 7274 2e6e 616e 2c20 305d 290d 0a20 2020  rt.nan, 0])..   
-00016ee0: 2020 2020 203e 3e3e 2061 2e69 7366 696e       >>> a.isfin
-00016ef0: 6974 6528 290d 0a20 2020 2020 2020 2046  ite()..        F
-00016f00: 6173 7441 7272 6179 285b 4661 6c73 652c  astArray([False,
-00016f10: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
-00016f20: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-00016f30: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
-00016f40: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
-00016f50: 2020 2020 3e3e 3e20 612e 6973 6669 6e69      >>> a.isfini
-00016f60: 7465 2866 616e 6379 203d 2054 7275 6529  te(fancy = True)
-00016f70: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00016f80: 7261 7928 5b33 5d29 0d0a 2020 2020 2020  ray([3])..      
-00016f90: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
-00016fa0: 6574 7572 6e20 7365 6c66 2e5f 756e 6172  eturn self._unar
-00016fb0: 795f 6f70 284d 4154 485f 4f50 4552 4154  y_op(MATH_OPERAT
-00016fc0: 494f 4e2e 4953 4649 4e49 5445 2c20 6661  ION.ISFINITE, fa
-00016fd0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
-00016fe0: 2020 6465 6620 6973 6e6f 7466 696e 6974    def isnotfinit
-00016ff0: 6528 7365 6c66 2c20 6661 6e63 793d 4661  e(self, fancy=Fa
-00017000: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
-00017010: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
-00017020: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-00017030: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-00017040: 6f72 2065 6163 6820 6e6f 6e2d 6669 6e69  or each non-fini
-00017050: 7465 2060 4661 7374 4172 7261 7960 2065  te `FastArray` e
-00017060: 6c65 6d65 6e74 2c0d 0a20 2020 2020 2020  lement,..       
-00017070: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
-00017080: 2e0d 0a0d 0a20 2020 2020 2020 2041 2076  .....        A v
-00017090: 616c 7565 2069 7320 636f 6e73 6964 6572  alue is consider
-000170a0: 6564 2074 6f20 6265 2066 696e 6974 6520  ed to be finite 
-000170b0: 6966 2069 7427 7320 6e6f 7420 706f 7369  if it's not posi
-000170c0: 7469 7665 206f 7220 6e65 6761 7469 7665  tive or negative
-000170d0: 2069 6e66 696e 6974 790d 0a20 2020 2020   infinity..     
-000170e0: 2020 206f 7220 6120 4e61 4e20 284e 6f74     or a NaN (Not
-000170f0: 2061 204e 756d 6265 7229 2e0d 0a0d 0a20   a Number)..... 
-00017100: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00017110: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00017120: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-00017130: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
-00017140: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00017150: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
-00017160: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
-00017170: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
-00017180: 7320 6f66 2074 6865 2054 7275 6520 286e  s of the True (n
-00017190: 6f6e 2d66 696e 6974 6529 2076 616c 7565  on-finite) value
-000171a0: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
-000171b0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-000171c0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000171d0: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
-000171e0: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
-000171f0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
-00017200: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
-00017210: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00017220: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00017230: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00017240: 6179 2e69 7366 696e 6974 652c 2072 6970  ay.isfinite, rip
-00017250: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
-00017260: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
-00017270: 6e69 7465 2c20 7269 7074 6162 6c65 2e69  nite, riptable.i
-00017280: 7369 6e66 2c0d 0a20 2020 2020 2020 2072  sinf,..        r
-00017290: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
-000172a0: 2c20 4661 7374 4172 7261 792e 6973 696e  , FastArray.isin
-000172b0: 662c 2046 6173 7441 7272 6179 2e69 736e  f, FastArray.isn
-000172c0: 6f74 696e 660d 0a20 2020 2020 2020 2044  otinf..        D
-000172d0: 6174 6173 6574 2e6d 6173 6b5f 6f72 5f69  ataset.mask_or_i
-000172e0: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
-000172f0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00017300: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00017310: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00017320: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
-00017330: 2074 6861 7420 6861 7320 6174 206c 6561   that has at lea
-00017340: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
-00017350: 6f6e 6520 6669 6e69 7465 2076 616c 7565  one finite value
-00017360: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-00017370: 6574 2e6d 6173 6b5f 616e 645f 6973 6669  et.mask_and_isfi
-00017380: 6e69 7465 203a 0d0a 2020 2020 2020 2020  nite :..        
-00017390: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-000173a0: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-000173b0: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-000173c0: 6044 6174 6173 6574 6020 726f 7720 7468  `Dataset` row th
-000173d0: 6174 2063 6f6e 7461 696e 7320 616c 6c0d  at contains all.
-000173e0: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
-000173f0: 6974 6520 7661 6c75 6573 2e0d 0a20 2020  ite values...   
-00017400: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
-00017410: 6b5f 6f72 5f69 7369 6e66 203a 0d0a 2020  k_or_isinf :..  
-00017420: 2020 2020 2020 2020 2020 5265 7475 726e            Return
-00017430: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-00017440: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
-00017450: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
-00017460: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
-00017470: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
-00017480: 2020 206f 6e65 2076 616c 7565 2074 6861     one value tha
-00017490: 7427 7320 706f 7369 7469 7665 206f 7220  t's positive or 
-000174a0: 6e65 6761 7469 7665 2069 6e66 696e 6974  negative infinit
-000174b0: 792e 0d0a 2020 2020 2020 2020 4461 7461  y...        Data
-000174c0: 7365 742e 6d61 736b 5f61 6e64 5f69 7369  set.mask_and_isi
-000174d0: 6e66 203a 0d0a 2020 2020 2020 2020 2020  nf :..          
-000174e0: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
-000174f0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
-00017500: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
-00017510: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
-00017520: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
-00017530: 2020 2020 2020 2020 2020 2069 6e66 696e             infin
-00017540: 6974 6520 7661 6c75 6573 2e0d 0a0d 0a20  ite values..... 
-00017550: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-00017560: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00017570: 2d0d 0a20 2020 2020 2020 203e 3e3e 2061  -..        >>> a
-00017580: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00017590: 5b6e 702e 696e 662c 206e 702e 4e49 4e46  [np.inf, np.NINF
-000175a0: 2c20 7274 2e6e 616e 2c20 305d 290d 0a20  , rt.nan, 0]).. 
-000175b0: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
-000175c0: 6f74 6669 6e69 7465 2829 0d0a 2020 2020  otfinite()..    
-000175d0: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
-000175e0: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
-000175f0: 7565 2c20 4661 6c73 655d 290d 0a0d 0a20  ue, False]).... 
-00017600: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
-00017610: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
-00017620: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-00017630: 736e 6f74 6669 6e69 7465 2866 616e 6379  snotfinite(fancy
-00017640: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
-00017650: 2020 4661 7374 4172 7261 7928 5b30 2c20    FastArray([0, 
-00017660: 312c 2032 5d29 0d0a 2020 2020 2020 2020  1, 2])..        
-00017670: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-00017680: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
-00017690: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
-000176a0: 4e2e 4953 4e4f 5446 494e 4954 452c 2066  N.ISNOTFINITE, f
-000176b0: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
-000176c0: 2020 2064 6566 2069 7369 6e66 2873 656c     def isinf(sel
-000176d0: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
-000176e0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000176f0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00017700: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00017710: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00017720: 6368 2060 4661 7374 4172 7261 7960 2065  ch `FastArray` e
-00017730: 6c65 6d65 6e74 2074 6861 7427 7320 706f  lement that's po
-00017740: 7369 7469 7665 0d0a 2020 2020 2020 2020  sitive..        
-00017750: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
-00017760: 6e69 7479 2c20 4661 6c73 6520 6f74 6865  nity, False othe
-00017770: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
-00017780: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00017790: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-000177a0: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
-000177b0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-000177c0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-000177d0: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
-000177e0: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
-000177f0: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
-00017800: 7468 6520 5472 7565 2028 696e 6669 6e69  the True (infini
-00017810: 7465 2920 7661 6c75 6573 2e0d 0a0d 0a20  te) values..... 
-00017820: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00017830: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00017840: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00017850: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00017860: 2020 416e 2061 7272 6179 206f 7220 626f    An array or bo
-00017870: 6f6c 6561 6e73 206f 7220 696e 6469 6365  oleans or indice
-00017880: 732e 0d0a 0d0a 2020 2020 2020 2020 5365  s.....        Se
-00017890: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
-000178a0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-000178b0: 2020 4661 7374 4172 7261 792e 6973 6e6f    FastArray.isno
-000178c0: 7469 6e66 2c20 4661 7374 4172 7261 792e  tinf, FastArray.
-000178d0: 6973 6669 6e69 7465 2c20 4661 7374 4172  isfinite, FastAr
-000178e0: 7261 792e 6973 6e6f 7466 696e 6974 652c  ray.isnotfinite,
-000178f0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
-00017900: 6c65 2e69 7369 6e66 2c20 7269 7074 6162  le.isinf, riptab
-00017910: 6c65 2e69 736e 6f74 696e 662c 2072 6970  le.isnotinf, rip
-00017920: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
-00017930: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
-00017940: 6e69 7465 0d0a 2020 2020 2020 2020 4461  nite..        Da
-00017950: 7461 7365 742e 6d61 736b 5f6f 725f 6973  taset.mask_or_is
-00017960: 6669 6e69 7465 203a 0d0a 2020 2020 2020  finite :..      
-00017970: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00017980: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00017990: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-000179a0: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-000179b0: 7468 6174 2068 6173 2061 7420 6c65 6173  that has at leas
-000179c0: 740d 0a20 2020 2020 2020 2020 2020 206f  t..            o
-000179d0: 6e65 2066 696e 6974 6520 7661 6c75 652e  ne finite value.
-000179e0: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-000179f0: 742e 6d61 736b 5f61 6e64 5f69 7366 696e  t.mask_and_isfin
-00017a00: 6974 6520 3a0d 0a20 2020 2020 2020 2020  ite :..         
-00017a10: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-00017a20: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
-00017a30: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
-00017a40: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
-00017a50: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
-00017a60: 2020 2020 2020 2020 2020 2020 6669 6e69              fini
-00017a70: 7465 2076 616c 7565 732e 0d0a 2020 2020  te values...    
-00017a80: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
-00017a90: 5f6f 725f 6973 696e 6620 3a0d 0a20 2020  _or_isinf :..   
-00017aa0: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
-00017ab0: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
-00017ac0: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
-00017ad0: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
-00017ae0: 6f77 2074 6861 7420 6861 7320 6174 206c  ow that has at l
-00017af0: 6561 7374 0d0a 2020 2020 2020 2020 2020  east..          
-00017b00: 2020 6f6e 6520 7661 6c75 6520 7468 6174    one value that
-00017b10: 2773 2070 6f73 6974 6976 6520 6f72 206e  's positive or n
-00017b20: 6567 6174 6976 6520 696e 6669 6e69 7479  egative infinity
-00017b30: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-00017b40: 6574 2e6d 6173 6b5f 616e 645f 6973 696e  et.mask_and_isin
-00017b50: 6620 3a0d 0a20 2020 2020 2020 2020 2020  f :..           
-00017b60: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00017b70: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00017b80: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
-00017b90: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
-00017ba0: 636f 6e74 6169 6e73 2061 6c6c 0d0a 2020  contains all..  
-00017bb0: 2020 2020 2020 2020 2020 696e 6669 6e69            infini
-00017bc0: 7465 2076 616c 7565 732e 0d0a 0d0a 2020  te values.....  
-00017bd0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-00017be0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00017bf0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-00017c00: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00017c10: 6e70 2e69 6e66 2c20 6e70 2e4e 494e 462c  np.inf, np.NINF,
-00017c20: 2072 742e 6e61 6e2c 2030 5d29 0d0a 2020   rt.nan, 0])..  
-00017c30: 2020 2020 2020 3e3e 3e20 612e 6973 696e        >>> a.isin
-00017c40: 6628 290d 0a20 2020 2020 2020 2046 6173  f()..        Fas
-00017c50: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
-00017c60: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
-00017c70: 7365 5d29 0d0a 0d0a 2020 2020 2020 2020  se])....        
-00017c80: 5769 7468 2060 6066 616e 6379 203d 2054  With ``fancy = T
-00017c90: 7275 6560 603a 0d0a 0d0a 2020 2020 2020  rue``:....      
-00017ca0: 2020 3e3e 3e20 612e 6973 696e 6628 6661    >>> a.isinf(fa
-00017cb0: 6e63 7920 3d20 5472 7565 290d 0a20 2020  ncy = True)..   
-00017cc0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00017cd0: 302c 2031 5d29 0d0a 2020 2020 2020 2020  0, 1])..        
-00017ce0: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-00017cf0: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
-00017d00: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
-00017d10: 4e2e 4953 494e 462c 2066 616e 6379 3d66  N.ISINF, fancy=f
-00017d20: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
-00017d30: 2069 736e 6f74 696e 6628 7365 6c66 2c20   isnotinf(self, 
-00017d40: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00017d50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00017d60: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-00017d70: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-00017d80: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-00017d90: 6046 6173 7441 7272 6179 6020 656c 656d  `FastArray` elem
-00017da0: 656e 7420 7468 6174 2773 206e 6f74 2070  ent that's not p
-00017db0: 6f73 6974 6976 650d 0a20 2020 2020 2020  ositive..       
-00017dc0: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
-00017dd0: 696e 6974 792c 2046 616c 7365 206f 7468  inity, False oth
-00017de0: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
-00017df0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00017e00: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00017e10: 2d0d 0a20 2020 2020 2020 2066 616e 6379  -..        fancy
-00017e20: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
-00017e30: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00017e40: 2020 2020 5365 7420 746f 2054 7275 6520      Set to True 
-00017e50: 746f 2069 6e73 7465 6164 2072 6574 7572  to instead retur
-00017e60: 6e20 7468 6520 696e 6469 6365 7320 6f66  n the indices of
-00017e70: 2074 6865 2054 7275 6520 286e 6f6e 2d69   the True (non-i
-00017e80: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
-00017e90: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00017ea0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00017eb0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-00017ec0: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
-00017ed0: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
-00017ee0: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
-00017ef0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
-00017f00: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00017f10: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00017f20: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00017f30: 2e69 7369 6e66 2c20 7269 7074 6162 6c65  .isinf, riptable
-00017f40: 2e69 736e 6f74 696e 662c 2072 6970 7461  .isnotinf, ripta
-00017f50: 626c 652e 6973 696e 662c 2072 6970 7461  ble.isinf, ripta
-00017f60: 626c 652e 6973 6669 6e69 7465 2c0d 0a20  ble.isfinite,.. 
-00017f70: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
-00017f80: 6973 6e6f 7466 696e 6974 652c 2046 6173  isnotfinite, Fas
-00017f90: 7441 7272 6179 2e69 7366 696e 6974 652c  tArray.isfinite,
-00017fa0: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
-00017fb0: 6669 6e69 7465 0d0a 2020 2020 2020 2020  finite..        
-00017fc0: 4461 7461 7365 742e 6d61 736b 5f6f 725f  Dataset.mask_or_
-00017fd0: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
-00017fe0: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-00017ff0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-00018000: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-00018010: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-00018020: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
-00018030: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
-00018040: 206f 6e65 2066 696e 6974 6520 7661 6c75   one finite valu
-00018050: 652e 0d0a 2020 2020 2020 2020 4461 7461  e...        Data
-00018060: 7365 742e 6d61 736b 5f61 6e64 5f69 7366  set.mask_and_isf
-00018070: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
-00018080: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-00018090: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
-000180a0: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
-000180b0: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
-000180c0: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
-000180d0: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-000180e0: 6e69 7465 2076 616c 7565 732e 0d0a 2020  nite values...  
-000180f0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-00018100: 736b 5f6f 725f 6973 696e 6620 3a0d 0a20  sk_or_isinf :.. 
-00018110: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
-00018120: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
-00018130: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
-00018140: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
-00018150: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
-00018160: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
-00018170: 2020 2020 6f6e 6520 7661 6c75 6520 7468      one value th
-00018180: 6174 2773 2070 6f73 6974 6976 6520 6f72  at's positive or
-00018190: 206e 6567 6174 6976 6520 696e 6669 6e69   negative infini
-000181a0: 7479 2e0d 0a20 2020 2020 2020 2044 6174  ty...        Dat
-000181b0: 6173 6574 2e6d 6173 6b5f 616e 645f 6973  aset.mask_and_is
-000181c0: 696e 6620 3a0d 0a20 2020 2020 2020 2020  inf :..         
-000181d0: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-000181e0: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
-000181f0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
-00018200: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
-00018210: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
-00018220: 2020 2020 2020 2020 2020 2020 696e 6669              infi
-00018230: 6e69 7465 2076 616c 7565 732e 0d0a 0d0a  nite values.....
-00018240: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-00018250: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00018260: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-00018270: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-00018280: 285b 6e70 2e69 6e66 2c20 6e70 2e4e 494e  ([np.inf, np.NIN
-00018290: 462c 2072 742e 6e61 6e2c 2030 5d29 0d0a  F, rt.nan, 0])..
-000182a0: 2020 2020 2020 2020 3e3e 3e20 612e 6973          >>> a.is
-000182b0: 6e6f 7469 6e66 2829 0d0a 2020 2020 2020  notinf()..      
-000182c0: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
-000182d0: 7365 2c20 4661 6c73 652c 2020 5472 7565  se, False,  True
-000182e0: 2c20 2054 7275 655d 290d 0a0d 0a20 2020  ,  True])....   
-000182f0: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
-00018300: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
-00018310: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
-00018320: 6f74 696e 6628 6661 6e63 7920 3d20 5472  otinf(fancy = Tr
-00018330: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
-00018340: 7441 7272 6179 285b 322c 2033 5d29 0d0a  tArray([2, 3])..
-00018350: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00018360: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00018370: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
-00018380: 4f50 4552 4154 494f 4e2e 4953 4e4f 5449  OPERATION.ISNOTI
-00018390: 4e46 2c20 6661 6e63 793d 6661 6e63 7929  NF, fancy=fancy)
-000183a0: 0d0a 0d0a 2020 2020 2323 2323 2323 2323  ....    ########
-000183b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000183c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000183d0: 2323 2323 230d 0a20 2020 2023 2052 6564  #####..    # Red
-000183e0: 7563 6520 7365 6374 696f 6e0d 0a20 2020  uce section..   
-000183f0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-00018400: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00018410: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
-00018420: 0d0a 2020 2020 6465 6620 5f66 615f 6669  ..    def _fa_fi
-00018430: 6c74 6572 5f77 7261 7070 6572 2873 656c  lter_wrapper(sel
-00018440: 662c 206d 7946 756e 632c 2066 696c 7465  f, myFunc, filte
-00018450: 723d 4e6f 6e65 2c20 6474 7970 653d 4e6f  r=None, dtype=No
-00018460: 6e65 293a 0d0a 0d0a 2020 2020 2020 2020  ne):....        
-00018470: 6966 2066 696c 7465 7220 6973 2054 7275  if filter is Tru
-00018480: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00018490: 6669 6c74 6572 203d 206f 6e65 7328 6c65  filter = ones(le
-000184a0: 6e28 7365 6c66 292c 2064 7479 7065 3d62  n(self), dtype=b
-000184b0: 6f6f 6c29 0d0a 2020 2020 2020 2020 6966  ool)..        if
-000184c0: 2066 696c 7465 7220 6973 2046 616c 7365   filter is False
-000184d0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-000184e0: 696c 7465 7220 3d20 7a65 726f 7328 6c65  ilter = zeros(le
-000184f0: 6e28 7365 6c66 292c 2064 7479 7065 3d62  n(self), dtype=b
-00018500: 6f6f 6c29 0d0a 2020 2020 2020 2020 6966  ool)..        if
-00018510: 206c 656e 2866 696c 7465 7229 2021 3d20   len(filter) != 
-00018520: 6c65 6e28 7365 6c66 293a 0d0a 2020 2020  len(self):..    
-00018530: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00018540: 6c75 6545 7272 6f72 2822 4669 6c74 6572  lueError("Filter
-00018550: 2061 6e64 2069 6e70 7574 206e 6f74 2074   and input not t
-00018560: 6865 2073 616d 6520 6c65 6e67 7468 2e22  he same length."
-00018570: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-00018580: 6e6f 7420 7365 6c66 2e69 7363 6f6d 7075  not self.iscompu
-00018590: 7461 626c 6528 293a 0d0a 2020 2020 2020  table():..      
-000185a0: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-000185b0: 4e61 4e0d 0a0d 0a20 2020 2020 2020 2069  NaN....        i
-000185c0: 6620 6474 7970 6520 6973 206e 6f74 204e  f dtype is not N
-000185d0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-000185e0: 2020 7265 7475 726e 2064 7479 7065 286d    return dtype(m
-000185f0: 7946 756e 6328 7365 6c66 2c20 6669 6c74  yFunc(self, filt
-00018600: 6572 2929 0d0a 0d0a 2020 2020 2020 2020  er))....        
-00018610: 7265 7475 726e 206d 7946 756e 6328 7365  return myFunc(se
-00018620: 6c66 2c20 6669 6c74 6572 290d 0a0d 0a20  lf, filter).... 
-00018630: 2020 2064 6566 205f 6661 5f6b 6579 776f     def _fa_keywo
-00018640: 7264 5f77 7261 7070 6572 2873 656c 662c  rd_wrapper(self,
-00018650: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
-00018660: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
-00018670: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-00018680: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 202a  ne, ddof=None, *
-00018690: 2a6b 7761 7267 7329 3a0d 0a0d 0a20 2020  *kwargs):....   
-000186a0: 2020 2020 2069 6620 7365 6c66 2e64 7479       if self.dty
-000186b0: 7065 2e63 6861 7220 696e 2022 4f53 5522  pe.char in "OSU"
-000186c0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-000186d0: 6169 7365 2054 7970 6545 7272 6f72 2822  aise TypeError("
-000186e0: 4661 7374 4172 7261 7920 6f70 6572 6174  FastArray operat
-000186f0: 696f 6e20 6170 706c 6965 6420 746f 2073  ion applied to s
-00018700: 7472 696e 6720 6f72 206f 626a 6563 7420  tring or object 
-00018710: 6172 7261 792e 2229 0d0a 0d0a 2020 2020  array.")....    
-00018720: 2020 2020 6966 2022 6f75 7422 2069 6e20      if "out" in 
-00018730: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
-00018740: 2020 2020 2069 6620 6b77 6172 6773 5b22       if kwargs["
-00018750: 6f75 7422 5d20 6973 204e 6f6e 653a 0d0a  out"] is None:..
-00018760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018770: 6b77 6172 6773 2e70 6f70 2822 6f75 7422  kwargs.pop("out"
-00018780: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-00018790: 616e 7928 6b77 6172 6773 293a 0d0a 2020  any(kwargs):..  
-000187a0: 2020 2020 2020 2020 2020 6c6f 6767 696e            loggin
-000187b0: 672e 7761 726e 696e 6728 0d0a 2020 2020  g.warning(..    
-000187c0: 2020 2020 2020 2020 2020 2020 2255 6e65              "Une
-000187d0: 7870 6563 7465 6420 4661 7374 4172 7261  xpected FastArra
-000187e0: 7920 6f70 6572 6174 696f 6e20 6b65 7977  y operation keyw
-000187f0: 6f72 6428 7329 3a20 2220 2b20 222c 2022  ord(s): " + ", "
-00018800: 2e6a 6f69 6e28 5b6b 6579 2066 6f72 206b  .join([key for k
-00018810: 6579 2c20 7661 6c75 6520 696e 206b 7761  ey, value in kwa
-00018820: 7267 732e 6974 656d 7328 295d 290d 0a20  rgs.items()]).. 
-00018830: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-00018840: 2020 2020 2020 2020 6966 2064 7479 7065          if dtype
-00018850: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00018860: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00018870: 735b 2264 7479 7065 225d 203d 2064 7479  s["dtype"] = dty
-00018880: 7065 0d0a 2020 2020 2020 2020 6966 2061  pe..        if a
-00018890: 7869 733a 0d0a 2020 2020 2020 2020 2020  xis:..          
-000188a0: 2020 6b77 6172 6773 5b22 6178 6973 225d    kwargs["axis"]
-000188b0: 203d 2061 7869 730d 0a20 2020 2020 2020   = axis..       
-000188c0: 2069 6620 6b65 6570 6469 6d73 3a0d 0a20   if keepdims:.. 
-000188d0: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-000188e0: 735b 226b 6565 7064 696d 7322 5d20 3d20  s["keepdims"] = 
-000188f0: 6b65 6570 6469 6d73 0d0a 2020 2020 2020  keepdims..      
-00018900: 2020 6966 2064 646f 6620 6973 206e 6f74    if ddof is not
-00018910: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00018920: 2020 2020 6b77 6172 6773 5b22 6464 6f66      kwargs["ddof
-00018930: 225d 203d 2064 646f 660d 0a20 2020 2020  "] = ddof..     
-00018940: 2020 2069 6620 6669 6c74 6572 2069 7320     if filter is 
-00018950: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-00018960: 2020 2020 2020 206b 7761 7267 735b 2266         kwargs["f
-00018970: 696c 7465 7222 5d20 3d20 6669 6c74 6572  ilter"] = filter
-00018980: 0d0a 0d0a 2020 2020 2020 2020 6966 2028  ....        if (
-00018990: 6669 6c74 6572 2069 7320 6e6f 7420 4e6f  filter is not No
-000189a0: 6e65 2920 616e 6420 2828 6178 6973 2069  ne) and ((axis i
-000189b0: 7320 6e6f 7420 4e6f 6e65 2920 6f72 2028  s not None) or (
-000189c0: 6b65 6570 6469 6d73 2069 7320 6e6f 7420  keepdims is not 
-000189d0: 4e6f 6e65 2920 6f72 2028 6464 6f66 2069  None) or (ddof i
-000189e0: 7320 6e6f 7420 4e6f 6e65 2929 3a0d 0a20  s not None)):.. 
-000189f0: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
-00018a00: 6e67 2e77 6172 6e69 6e67 2822 5369 6e63  ng.warning("Sinc
-00018a10: 6520 4669 6c74 6572 206b 6579 776f 7264  e Filter keyword
-00018a20: 2069 7320 7072 6573 656e 742c 2046 6173   is present, Fas
-00018a30: 7441 7272 6179 206f 7065 7261 7469 6f6e  tArray operation
-00018a40: 7320 6967 6e6f 7265 2061 7869 732c 206b  s ignore axis, k
-00018a50: 6565 7064 696d 7320 616e 6420 6464 6f66  eepdims and ddof
-00018a60: 2229 0d0a 0d0a 2020 2020 2020 2020 7265  ")....        re
-00018a70: 7475 726e 206b 7761 7267 730d 0a0d 0a20  turn kwargs.... 
-00018a80: 2020 2064 6566 206e 616e 7375 6d28 7365     def nansum(se
-00018a90: 6c66 2c20 6669 6c74 6572 3d4e 6f6e 652c  lf, filter=None,
-00018aa0: 2064 7479 7065 3d4e 6f6e 652c 2061 7869   dtype=None, axi
-00018ab0: 733d 4e6f 6e65 2c20 6b65 6570 6469 6d73  s=None, keepdims
-00018ac0: 3d4e 6f6e 652c 202a 2a6b 7761 7267 7329  =None, **kwargs)
-00018ad0: 202d 3e20 6e70 2e6e 756d 6265 723a 0d0a   -> np.number:..
-00018ae0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00018af0: 2020 2020 2043 6f6d 7075 7465 2074 6865       Compute the
-00018b00: 2073 756d 206f 6620 7468 6520 7661 6c75   sum of the valu
-00018b10: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
-00018b20: 6172 6775 6d65 6e74 2c20 6967 6e6f 7269  argument, ignori
-00018b30: 6e67 204e 614e 732e 0d0a 0d0a 2020 2020  ng NaNs.....    
-00018b40: 2020 2020 4966 2061 6c6c 2076 616c 7565      If all value
-00018b50: 7320 696e 2074 6865 2066 6972 7374 2061  s in the first a
-00018b60: 7267 756d 656e 7420 6172 6520 4e61 4e73  rgument are NaNs
-00018b70: 2c20 6060 302e 3060 6020 6973 2072 6574  , ``0.0`` is ret
-00018b80: 7572 6e65 642e 0d0a 0d0a 2020 2020 2020  urned.....      
-00018b90: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00018ba0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00018bb0: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
-00018bc0: 203a 2061 7272 6179 206f 6620 626f 6f6c   : array of bool
-00018bd0: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-00018be0: 2020 2020 2020 2020 2020 2020 5370 6563              Spec
-00018bf0: 6966 6965 7320 7768 6963 6820 656c 656d  ifies which elem
-00018c00: 656e 7473 2074 6f20 696e 636c 7564 6520  ents to include 
-00018c10: 696e 2074 6865 2073 756d 2063 616c 6375  in the sum calcu
-00018c20: 6c61 7469 6f6e 2e20 4966 2074 6865 2066  lation. If the f
-00018c30: 696c 7465 7220 6973 0d0a 2020 2020 2020  ilter is..      
-00018c40: 2020 2020 2020 756e 6966 6f72 6d6c 7920        uniformly 
-00018c50: 6060 4661 6c73 6560 602c 2060 6e61 6e73  ``False``, `nans
-00018c60: 756d 6020 7265 7475 726e 7320 6060 302e  um` returns ``0.
-00018c70: 3060 602e 0d0a 2020 2020 2020 2020 6474  0``...        dt
-00018c80: 7970 6520 3a20 7274 2e64 7479 7065 206f  ype : rt.dtype o
-00018c90: 7220 6e75 6d70 792e 6474 7970 652c 2064  r numpy.dtype, d
-00018ca0: 6566 6175 6c74 2066 6c6f 6174 3634 0d0a  efault float64..
-00018cb0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00018cc0: 6461 7461 2074 7970 6520 6f66 2074 6865  data type of the
-00018cd0: 2072 6573 756c 742e 2046 6f72 2061 2060   result. For a `
-00018ce0: 4661 7374 4172 7261 7960 2060 6078 6060  FastArray` ``x``
-00018cf0: 2c0d 0a20 2020 2020 2020 2020 2020 2060  ,..            `
-00018d00: 6078 2e6e 616e 7375 6d28 6474 7970 6520  `x.nansum(dtype 
-00018d10: 3d20 6d79 5f74 7970 6529 6060 2069 7320  = my_type)`` is 
-00018d20: 6571 7569 7661 6c65 6e74 2074 6f20 6060  equivalent to ``
-00018d30: 6d79 5f74 7970 6528 782e 6e61 6e73 756d  my_type(x.nansum
-00018d40: 2829 2960 602e 0d0a 0d0a 2020 2020 2020  ())``.....      
-00018d50: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00018d60: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00018d70: 2020 2020 7363 616c 6172 0d0a 2020 2020      scalar..    
-00018d80: 2020 2020 2020 2020 5468 6520 7375 6d20          The sum 
-00018d90: 6f66 2074 6865 2076 616c 7565 732e 0d0a  of the values...
-00018da0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-00018db0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-00018dc0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e75  ----..        nu
-00018dd0: 6d70 792e 6e61 6e73 756d 0d0a 2020 2020  mpy.nansum..    
-00018de0: 2020 2020 4461 7461 7365 742e 6e61 6e73      Dataset.nans
-00018df0: 756d 203a 2053 756d 7320 7468 6520 7661  um : Sums the va
-00018e00: 6c75 6573 206f 6620 6e75 6d65 7269 6361  lues of numerica
-00018e10: 6c20 6044 6174 6173 6574 6020 636f 6c75  l `Dataset` colu
-00018e20: 6d6e 732c 2069 676e 6f72 696e 6720 4e61  mns, ignoring Na
-00018e30: 4e73 2e0d 0a20 2020 2020 2020 2047 726f  Ns...        Gro
-00018e40: 7570 4279 4f70 732e 6e61 6e73 756d 203a  upByOps.nansum :
-00018e50: 2053 756d 7320 7468 6520 7661 6c75 6573   Sums the values
-00018e60: 206f 6620 6561 6368 2067 726f 7570 2c20   of each group, 
-00018e70: 6967 6e6f 7269 6e67 204e 614e 732e 2055  ignoring NaNs. U
-00018e80: 7365 6420 6279 0d0a 2020 2020 2020 2020  sed by..        
-00018e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ea0: 2020 2020 6043 6174 6567 6f72 6963 616c      `Categorical
-00018eb0: 6020 6f62 6a65 6374 732e 0d0a 0d0a 2020  ` objects.....  
-00018ec0: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
-00018ed0: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
-00018ee0: 2020 2020 5468 6520 6064 7479 7065 6020      The `dtype` 
-00018ef0: 6b65 7977 6f72 6420 666f 7220 6046 6173  keyword for `Fas
-00018f00: 7441 7272 6179 2e6e 616e 7375 6d60 2073  tArray.nansum` s
-00018f10: 7065 6369 6669 6573 2074 6865 2064 6174  pecifies the dat
-00018f20: 6120 7479 7065 206f 6620 7468 650d 0a20  a type of the.. 
-00018f30: 2020 2020 2020 2072 6573 756c 742e 2054         result. T
-00018f40: 6869 7320 6469 6666 6572 7320 6672 6f6d  his differs from
-00018f50: 2060 6e75 6d70 792e 6e61 6e73 756d 602c   `numpy.nansum`,
-00018f60: 2077 6865 7265 2069 7420 7370 6563 6966   where it specif
-00018f70: 6965 7320 7468 6520 6461 7461 2074 7970  ies the data typ
-00018f80: 6520 7573 6564 0d0a 2020 2020 2020 2020  e used..        
-00018f90: 746f 2063 6f6d 7075 7465 2074 6865 2073  to compute the s
-00018fa0: 756d 2e0d 0a0d 0a20 2020 2020 2020 202a  um.....        *
-00018fb0: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
-00018fc0: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
-00018fd0: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
-00018fe0: 696e 6720 6569 7468 6572 206f 6620 7468  ing either of th
-00018ff0: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-00019000: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
-00019010: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
-00019020: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
-00019030: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
-00019040: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-00019050: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
-00019060: 606e 756d 7079 2e6e 616e 7375 6d60 292e  `numpy.nansum`).
-00019070: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
-00019080: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
-00019090: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
-000190a0: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
-000190b0: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
-000190c0: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
-000190d0: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
-000190e0: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
-000190f0: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
-00019100: 746f 2063 6f6d 7075 7465 2074 6865 2073  to compute the s
-00019110: 756d 2061 7320 6974 2069 7320 696e 2060  um as it is in `
-00019120: 6e75 6d70 792e 6e61 6e73 756d 602e 0d0a  numpy.nansum`...
-00019130: 0d0a 2020 2020 2020 2020 416c 736f 206e  ..        Also n
-00019140: 6f74 6520 7468 6174 2069 6620 796f 7520  ote that if you 
-00019150: 7573 6520 6569 7468 6572 206f 6620 7468  use either of th
-00019160: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-00019170: 7920 7061 7261 6d65 7465 7273 2061 6e64  y parameters and
-00019180: 2061 6c73 6f0d 0a20 2020 2020 2020 2069   also..        i
-00019190: 6e63 6c75 6465 2061 2060 6669 6c74 6572  nclude a `filter
-000191a0: 6020 6b65 7977 6f72 6420 6172 6775 6d65  ` keyword argume
-000191b0: 6e74 2028 7768 6963 6820 606e 756d 7079  nt (which `numpy
-000191c0: 2e6e 616e 7375 6d60 2064 6f65 7320 6e6f  .nansum` does no
-000191d0: 7420 6163 6365 7074 292c 0d0a 2020 2020  t accept),..    
-000191e0: 2020 2020 5269 7074 6162 6c65 2773 2069      Riptable's i
-000191f0: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-00019200: 2060 6e61 6e73 756d 6020 7769 6c6c 2062   `nansum` will b
-00019210: 6520 7573 6564 2077 6974 6820 7468 6520  e used with the 
-00019220: 6669 6c74 6572 2061 7267 756d 656e 7420  filter argument 
-00019230: 616e 640d 0a20 2020 2020 2020 2074 6865  and..        the
-00019240: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
-00019250: 7320 7769 6c6c 2062 6520 6967 6e6f 7265  s will be ignore
-00019260: 642e 0d0a 0d0a 2020 2020 2020 2020 6178  d.....        ax
-00019270: 6973 203a 207b 696e 742c 2074 7570 6c65  is : {int, tuple
-00019280: 206f 6620 696e 742c 204e 6f6e 657d 2c20   of int, None}, 
-00019290: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-000192a0: 2020 2020 2020 4178 6973 206f 7220 6178        Axis or ax
-000192b0: 6573 2061 6c6f 6e67 2077 6869 6368 2074  es along which t
-000192c0: 6865 2073 756d 2069 7320 636f 6d70 7574  he sum is comput
-000192d0: 6564 2e20 5468 6520 6465 6661 756c 7420  ed. The default 
-000192e0: 6973 2074 6f20 636f 6d70 7574 6520 7468  is to compute th
-000192f0: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
-00019300: 756d 206f 6620 7468 6520 666c 6174 7465  um of the flatte
-00019310: 6e65 6420 6172 7261 792e 0d0a 0d0a 2020  ned array.....  
-00019320: 2020 2020 2020 6b65 6570 6469 6d73 203a        keepdims :
-00019330: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c0d   bool, optional.
-00019340: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
-00019350: 7468 6973 2069 7320 7365 7420 746f 2054  this is set to T
-00019360: 7275 652c 2074 6865 2061 7865 7320 7768  rue, the axes wh
-00019370: 6963 6820 6172 6520 7265 6475 6365 6420  ich are reduced 
-00019380: 6172 6520 6c65 6674 2069 6e20 7468 6520  are left in the 
-00019390: 7265 7375 6c74 2061 730d 0a20 2020 2020  result as..     
-000193a0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-000193b0: 7320 7769 7468 2073 697a 6520 6f6e 652e  s with size one.
-000193c0: 2057 6974 6820 7468 6973 206f 7074 696f   With this optio
-000193d0: 6e2c 2074 6865 2072 6573 756c 7420 7769  n, the result wi
-000193e0: 6c6c 2062 726f 6164 6361 7374 0d0a 2020  ll broadcast..  
-000193f0: 2020 2020 2020 2020 2020 636f 7272 6563            correc
-00019400: 746c 7920 6167 6169 6e73 7420 7468 6520  tly against the 
-00019410: 6f72 6967 696e 616c 2069 6e70 7574 2061  original input a
-00019420: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
-00019430: 2020 2020 2049 6620 7468 6520 7661 6c75       If the valu
-00019440: 6520 6973 2061 6e79 7468 696e 6720 6275  e is anything bu
-00019450: 7420 7468 6520 6465 6661 756c 742c 2074  t the default, t
-00019460: 6865 6e20 606b 6565 7064 696d 7360 2077  hen `keepdims` w
-00019470: 696c 6c20 6265 2070 6173 7365 640d 0a20  ill be passed.. 
-00019480: 2020 2020 2020 2020 2020 2074 6872 6f75             throu
-00019490: 6768 2074 6f20 7468 6520 606d 6561 6e60  gh to the `mean`
-000194a0: 206f 7220 6073 756d 6020 6d65 7468 6f64   or `sum` method
-000194b0: 7320 6f66 2073 7562 2d63 6c61 7373 6573  s of sub-classes
-000194c0: 206f 6620 606e 6461 7272 6179 602e 2049   of `ndarray`. I
-000194d0: 6620 7468 650d 0a20 2020 2020 2020 2020  f the..         
-000194e0: 2020 2073 7562 2d63 6c61 7373 6573 2720     sub-classes' 
-000194f0: 6d65 7468 6f64 7320 646f 206e 6f74 2069  methods do not i
-00019500: 6d70 6c65 6d65 6e74 2060 6b65 6570 6469  mplement `keepdi
-00019510: 6d73 602c 2061 6e79 2065 7863 6570 7469  ms`, any excepti
-00019520: 6f6e 7320 7769 6c6c 2062 650d 0a20 2020  ons will be..   
-00019530: 2020 2020 2020 2020 2072 6169 7365 642e           raised.
-00019540: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-00019550: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-00019560: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00019570: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-00019580: 7272 6179 285b 312c 2033 2c20 352c 2037  rray([1, 3, 5, 7
-00019590: 2c20 7274 2e6e 616e 5d29 0d0a 2020 2020  , rt.nan])..    
-000195a0: 2020 2020 3e3e 3e20 612e 6e61 6e73 756d      >>> a.nansum
-000195b0: 2829 0d0a 2020 2020 2020 2020 3136 2e30  ()..        16.0
-000195c0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-000195d0: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
-000195e0: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
-000195f0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-00019600: 4172 7261 7928 5b31 2e30 2c20 332e 302c  Array([1.0, 3.0,
-00019610: 2035 2e30 2c20 372e 302c 2072 742e 6e61   5.0, 7.0, rt.na
-00019620: 6e5d 290d 0a20 2020 2020 2020 203e 3e3e  n])..        >>>
-00019630: 2061 2e6e 616e 7375 6d28 6474 7970 6520   a.nansum(dtype 
-00019640: 3d20 7274 2e69 6e74 3332 290d 0a20 2020  = rt.int32)..   
-00019650: 2020 2020 2031 360d 0a0d 0a20 2020 2020       16....     
-00019660: 2020 2057 6974 6820 6120 6669 6c74 6572     With a filter
-00019670: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-00019680: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
-00019690: 7928 5b31 2c20 332c 2035 2c20 372c 2072  y([1, 3, 5, 7, r
-000196a0: 742e 6e61 6e5d 290d 0a20 2020 2020 2020  t.nan])..       
-000196b0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-000196c0: 4172 7261 7928 5b46 616c 7365 2c20 5472  Array([False, Tr
-000196d0: 7565 2c20 4661 6c73 652c 2054 7275 652c  ue, False, True,
-000196e0: 2054 7275 655d 290d 0a20 2020 2020 2020   True])..       
-000196f0: 203e 3e3e 2061 2e6e 616e 7375 6d28 6669   >>> a.nansum(fi
-00019700: 6c74 6572 203d 2062 290d 0a20 2020 2020  lter = b)..     
-00019710: 2020 2031 302e 300d 0a20 2020 2020 2020     10.0..       
-00019720: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-00019730: 6b77 6172 6773 203d 2073 656c 662e 5f66  kwargs = self._f
-00019740: 615f 6b65 7977 6f72 645f 7772 6170 7065  a_keyword_wrappe
-00019750: 7228 6669 6c74 6572 3d66 696c 7465 722c  r(filter=filter,
-00019760: 2064 7479 7065 3d64 7479 7065 2c20 6178   dtype=dtype, ax
-00019770: 6973 3d61 7869 732c 206b 6565 7064 696d  is=axis, keepdim
-00019780: 733d 6b65 6570 6469 6d73 2c20 6464 6f66  s=keepdims, ddof
-00019790: 3d4e 6f6e 652c 202a 2a6b 7761 7267 7329  =None, **kwargs)
-000197a0: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
-000197b0: 696c 7465 7220 6973 206e 6f74 204e 6f6e  ilter is not Non
-000197c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000197d0: 7265 7475 726e 2073 656c 662e 5f66 615f  return self._fa_
-000197e0: 6669 6c74 6572 5f77 7261 7070 6572 285f  filter_wrapper(_
-000197f0: 666e 616e 7375 6d2c 2066 696c 7465 723d  fnansum, filter=
-00019800: 6669 6c74 6572 2c20 6474 7970 653d 6474  filter, dtype=dt
-00019810: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
-00019820: 7265 7475 726e 2073 656c 662e 5f72 6564  return self._red
-00019830: 7563 655f 6368 6563 6b28 5245 4455 4345  uce_check(REDUCE
-00019840: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00019850: 455f 4e41 4e53 554d 2c20 6e70 2e6e 616e  E_NANSUM, np.nan
-00019860: 7375 6d2c 202a 2a6b 7761 7267 7329 0d0a  sum, **kwargs)..
-00019870: 0d0a 2020 2020 6465 6620 6d65 616e 2873  ..    def mean(s
-00019880: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
-00019890: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
-000198a0: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
-000198b0: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
-000198c0: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
-000198d0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000198e0: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
-000198f0: 6520 6172 6974 686d 6574 6963 206d 6561  e arithmetic mea
-00019900: 6e20 6f66 2074 6865 2076 616c 7565 7320  n of the values 
-00019910: 696e 2074 6865 2066 6972 7374 2061 7267  in the first arg
-00019920: 756d 656e 742e 0d0a 0d0a 2020 2020 2020  ument.....      
-00019930: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00019940: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00019950: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
-00019960: 203a 2061 7272 6179 206f 6620 626f 6f6c   : array of bool
-00019970: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-00019980: 2020 2020 2020 2020 2020 2020 5370 6563              Spec
-00019990: 6966 6965 7320 7768 6963 6820 656c 656d  ifies which elem
-000199a0: 656e 7473 2074 6f20 696e 636c 7564 6520  ents to include 
-000199b0: 696e 2074 6865 206d 6561 6e20 6361 6c63  in the mean calc
-000199c0: 756c 6174 696f 6e2e 2049 6620 7468 6520  ulation. If the 
-000199d0: 6669 6c74 6572 0d0a 2020 2020 2020 2020  filter..        
-000199e0: 2020 2020 6973 2075 6e69 666f 726d 6c79      is uniformly
-000199f0: 2060 6046 616c 7365 6060 2c20 606d 6561   ``False``, `mea
-00019a00: 6e60 2072 6574 7572 6e73 2061 2060 5a65  n` returns a `Ze
-00019a10: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
-00019a20: 2e0d 0a20 2020 2020 2020 2064 7479 7065  ...        dtype
-00019a30: 203a 2072 742e 6474 7970 6520 6f72 206e   : rt.dtype or n
-00019a40: 756d 7079 2e64 7479 7065 2c20 6465 6661  umpy.dtype, defa
-00019a50: 756c 7420 666c 6f61 7436 340d 0a20 2020  ult float64..   
-00019a60: 2020 2020 2020 2020 2054 6865 2064 6174           The dat
-00019a70: 6120 7479 7065 206f 6620 7468 6520 7265  a type of the re
-00019a80: 7375 6c74 2e20 466f 7220 6120 6046 6173  sult. For a `Fas
-00019a90: 7441 7272 6179 6020 6060 7860 602c 0d0a  tArray` ``x``,..
-00019aa0: 2020 2020 2020 2020 2020 2020 6060 782e              ``x.
-00019ab0: 6d65 616e 2864 7479 7065 203d 206d 795f  mean(dtype = my_
-00019ac0: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
-00019ad0: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
-00019ae0: 7065 2878 2e6d 6561 6e28 2929 6060 2e0d  pe(x.mean())``..
-00019af0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00019b00: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00019b10: 2d2d 2d0d 0a20 2020 2020 2020 2073 6361  ---..        sca
-00019b20: 6c61 720d 0a20 2020 2020 2020 2020 2020  lar..           
-00019b30: 2054 6865 206d 6561 6e20 6f66 2074 6865   The mean of the
-00019b40: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
-00019b50: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-00019b60: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00019b70: 2020 2020 2020 2020 6e75 6d70 792e 6d65          numpy.me
-00019b80: 616e 0d0a 2020 2020 2020 2020 4661 7374  an..        Fast
-00019b90: 4172 7261 792e 6e61 6e6d 6561 6e20 3a20  Array.nanmean : 
-00019ba0: 436f 6d70 7574 6573 2074 6865 206d 6561  Computes the mea
-00019bb0: 6e20 6f66 2060 4661 7374 4172 7261 7960  n of `FastArray`
-00019bc0: 2076 616c 7565 732c 2069 676e 6f72 696e   values, ignorin
-00019bd0: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
-00019be0: 2044 6174 6173 6574 2e6d 6561 6e20 3a20   Dataset.mean : 
-00019bf0: 436f 6d70 7574 6573 2074 6865 206d 6561  Computes the mea
-00019c00: 6e20 6f66 206e 756d 6572 6963 616c 2060  n of numerical `
-00019c10: 4461 7461 7365 7460 2063 6f6c 756d 6e73  Dataset` columns
-00019c20: 2e0d 0a20 2020 2020 2020 2047 726f 7570  ...        Group
-00019c30: 4279 4f70 732e 6d65 616e 203a 2043 6f6d  ByOps.mean : Com
-00019c40: 7075 7465 7320 7468 6520 6d65 616e 206f  putes the mean o
-00019c50: 6620 6561 6368 2067 726f 7570 2e20 5573  f each group. Us
-00019c60: 6564 2062 7920 6043 6174 6567 6f72 6963  ed by `Categoric
-00019c70: 616c 6020 6f62 6a65 6374 732e 0d0a 0d0a  al` objects.....
-00019c80: 2020 2020 2020 2020 4e6f 7465 730d 0a20          Notes.. 
-00019c90: 2020 2020 2020 202d 2d2d 2d2d 0d0a 2020         -----..  
-00019ca0: 2020 2020 2020 5468 6520 6064 7479 7065        The `dtype
-00019cb0: 6020 6b65 7977 6f72 6420 666f 7220 6046  ` keyword for `F
-00019cc0: 6173 7441 7272 6179 2e6d 6561 6e60 2073  astArray.mean` s
-00019cd0: 7065 6369 6669 6573 2074 6865 2064 6174  pecifies the dat
-00019ce0: 6120 7479 7065 206f 6620 7468 6520 7265  a type of the re
-00019cf0: 7375 6c74 2e0d 0a20 2020 2020 2020 2054  sult...        T
-00019d00: 6869 7320 6469 6666 6572 7320 6672 6f6d  his differs from
-00019d10: 2060 6e75 6d70 792e 6d65 616e 602c 2077   `numpy.mean`, w
-00019d20: 6865 7265 2069 7420 7370 6563 6966 6965  here it specifie
-00019d30: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
-00019d40: 7573 6564 2074 6f20 636f 6d70 7574 650d  used to compute.
-00019d50: 0a20 2020 2020 2020 2074 6865 206d 6561  .        the mea
-00019d60: 6e2e 0d0a 0d0a 2020 2020 2020 2020 2a2a  n.....        **
-00019d70: 4e6f 7465 7320 6f6e 2055 7369 6e67 204e  Notes on Using N
-00019d80: 756d 5079 2050 6172 616d 6574 6572 732a  umPy Parameters*
-00019d90: 2a0d 0a0d 0a20 2020 2020 2020 2055 7369  *....        Usi
-00019da0: 6e67 2065 6974 6865 7220 6f66 2074 6865  ng either of the
-00019db0: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
-00019dc0: 2070 6172 616d 6574 6572 7320 7769 6c6c   parameters will
-00019dd0: 2063 6175 7365 2052 6970 7461 626c 6520   cause Riptable 
-00019de0: 746f 2073 7769 7463 6820 746f 0d0a 2020  to switch to..  
-00019df0: 2020 2020 2020 7468 6520 4e75 6d50 7920        the NumPy 
-00019e00: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-00019e10: 6620 7468 6973 206d 6574 686f 6420 2860  f this method (`
-00019e20: 6e75 6d70 792e 6d65 616e 6029 2e20 486f  numpy.mean`). Ho
-00019e30: 7765 7665 722c 2075 6e74 696c 2061 0d0a  wever, until a..
-00019e40: 2020 2020 2020 2020 7265 706f 7274 6564          reported
-00019e50: 2062 7567 2069 7320 6669 7865 642c 2069   bug is fixed, i
-00019e60: 6620 796f 7520 616c 736f 2069 6e63 6c75  f you also inclu
-00019e70: 6465 2074 6865 2060 6474 7970 6560 2070  de the `dtype` p
-00019e80: 6172 616d 6574 6572 2069 7420 7769 6c6c  arameter it will
-00019e90: 2062 650d 0a20 2020 2020 2020 2061 7070   be..        app
-00019ea0: 6c69 6564 2074 6f20 7468 6520 7265 7375  lied to the resu
-00019eb0: 6c74 2c20 6e6f 7420 7573 6564 2074 6f20  lt, not used to 
-00019ec0: 636f 6d70 7574 6520 7468 6520 6d65 616e  compute the mean
-00019ed0: 2061 7320 6974 2069 7320 696e 2060 6e75   as it is in `nu
-00019ee0: 6d70 792e 6d65 616e 602e 0d0a 0d0a 2020  mpy.mean`.....  
-00019ef0: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
-00019f00: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
-00019f10: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
-00019f20: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
-00019f30: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
-00019f40: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
-00019f50: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
-00019f60: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
-00019f70: 7768 6963 6820 606e 756d 7079 2e6d 6561  which `numpy.mea
-00019f80: 6e60 2064 6f65 7320 6e6f 7420 6163 6365  n` does not acce
-00019f90: 7074 292c 0d0a 2020 2020 2020 2020 5269  pt),..        Ri
-00019fa0: 7074 6162 6c65 2773 2069 6d70 6c65 6d65  ptable's impleme
-00019fb0: 6e74 6174 696f 6e20 6f66 2060 6d65 616e  ntation of `mean
-00019fc0: 6020 7769 6c6c 2062 6520 7573 6564 2077  ` will be used w
-00019fd0: 6974 6820 7468 6520 6669 6c74 6572 2061  ith the filter a
-00019fe0: 7267 756d 656e 7420 616e 640d 0a20 2020  rgument and..   
-00019ff0: 2020 2020 2074 6865 204e 756d 5079 2070       the NumPy p
-0001a000: 6172 616d 6574 6572 7320 7769 6c6c 2062  arameters will b
-0001a010: 6520 6967 6e6f 7265 642e 0d0a 0d0a 2020  e ignored.....  
-0001a020: 2020 2020 2020 6178 6973 203a 204e 6f6e        axis : Non
-0001a030: 6520 6f72 2069 6e74 206f 7220 7475 706c  e or int or tupl
-0001a040: 6520 6f66 2069 6e74 732c 206f 7074 696f  e of ints, optio
-0001a050: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-0001a060: 2041 7869 7320 6f72 2061 7865 7320 616c   Axis or axes al
-0001a070: 6f6e 6720 7768 6963 6820 7468 6520 6d65  ong which the me
-0001a080: 616e 7320 6172 6520 636f 6d70 7574 6564  ans are computed
-0001a090: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-0001a0a0: 2074 6f20 636f 6d70 7574 650d 0a20 2020   to compute..   
-0001a0b0: 2020 2020 2020 2020 2074 6865 206d 6561           the mea
-0001a0c0: 6e20 6f66 2074 6865 2066 6c61 7474 656e  n of the flatten
-0001a0d0: 6564 2061 7272 6179 2e0d 0a0d 0a20 2020  ed array.....   
-0001a0e0: 2020 2020 206b 6565 7064 696d 7320 3a20       keepdims : 
-0001a0f0: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0d0a  bool, optional..
-0001a100: 2020 2020 2020 2020 2020 2020 4966 2074              If t
-0001a110: 6869 7320 6973 2073 6574 2074 6f20 5472  his is set to Tr
-0001a120: 7565 2c20 7468 6520 6178 6573 2077 6869  ue, the axes whi
-0001a130: 6368 2061 7265 2072 6564 7563 6564 2061  ch are reduced a
-0001a140: 7265 206c 6566 7420 696e 2074 6865 2072  re left in the r
-0001a150: 6573 756c 7420 6173 0d0a 2020 2020 2020  esult as..      
-0001a160: 2020 2020 2020 6469 6d65 6e73 696f 6e73        dimensions
-0001a170: 2077 6974 6820 7369 7a65 206f 6e65 2e20   with size one. 
-0001a180: 5769 7468 2074 6869 7320 6f70 7469 6f6e  With this option
-0001a190: 2c20 7468 6520 7265 7375 6c74 2077 696c  , the result wil
-0001a1a0: 6c20 6272 6f61 6463 6173 740d 0a20 2020  l broadcast..   
-0001a1b0: 2020 2020 2020 2020 2063 6f72 7265 6374           correct
-0001a1c0: 6c79 2061 6761 696e 7374 2074 6865 206f  ly against the o
-0001a1d0: 7269 6769 6e61 6c20 696e 7075 7420 6172  riginal input ar
-0001a1e0: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
-0001a1f0: 2020 2020 4966 2074 6865 2064 6566 6175      If the defau
-0001a200: 6c74 2076 616c 7565 2069 7320 7061 7373  lt value is pass
-0001a210: 6564 2c20 7468 656e 2060 6b65 6570 6469  ed, then `keepdi
-0001a220: 6d73 6020 7769 6c6c 206e 6f74 2062 6520  ms` will not be 
-0001a230: 7061 7373 6564 2074 6872 6f75 6768 0d0a  passed through..
-0001a240: 2020 2020 2020 2020 2020 2020 746f 2074              to t
-0001a250: 6865 2060 6d65 616e 6020 6d65 7468 6f64  he `mean` method
-0001a260: 206f 6620 7375 622d 636c 6173 7365 7320   of sub-classes 
-0001a270: 6f66 2060 6e64 6172 7261 7960 2c20 686f  of `ndarray`, ho
-0001a280: 7765 7665 7220 616e 7920 6e6f 6e2d 6465  wever any non-de
-0001a290: 6661 756c 740d 0a20 2020 2020 2020 2020  fault..         
-0001a2a0: 2020 2076 616c 7565 2077 696c 6c20 6265     value will be
-0001a2b0: 2e20 4966 2074 6865 2073 7562 2d63 6c61  . If the sub-cla
-0001a2c0: 7373 2773 206d 6574 686f 6420 646f 6573  ss's method does
-0001a2d0: 206e 6f74 2069 6d70 6c65 6d65 6e74 2060   not implement `
-0001a2e0: 6b65 6570 6469 6d73 602c 2061 6e79 0d0a  keepdims`, any..
-0001a2f0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001a300: 7074 696f 6e73 2077 696c 6c20 6265 2072  ptions will be r
-0001a310: 6169 7365 642e 0d0a 0d0a 2020 2020 2020  aised.....      
-0001a320: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-0001a330: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0001a340: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001a350: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
-0001a360: 2c20 352c 2037 5d29 0d0a 2020 2020 2020  , 5, 7])..      
-0001a370: 2020 3e3e 3e20 612e 6d65 616e 2829 0d0a    >>> a.mean()..
-0001a380: 2020 2020 2020 2020 342e 300d 0a0d 0a20          4.0.... 
-0001a390: 2020 2020 2020 2057 6974 6820 6120 6064         With a `d
-0001a3a0: 7479 7065 6020 7370 6563 6966 6965 643a  type` specified:
-0001a3b0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-0001a3c0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-0001a3d0: 285b 312c 2033 2c20 352c 2037 5d29 0d0a  ([1, 3, 5, 7])..
-0001a3e0: 2020 2020 2020 2020 3e3e 3e20 612e 6d65          >>> a.me
-0001a3f0: 616e 2864 7479 7065 203d 2072 742e 696e  an(dtype = rt.in
-0001a400: 7433 3229 0d0a 2020 2020 2020 2020 340d  t32)..        4.
-0001a410: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001a420: 6120 6669 6c74 6572 3a0d 0a0d 0a20 2020  a filter:....   
-0001a430: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001a440: 4661 7374 4172 7261 7928 5b31 2c20 332c  FastArray([1, 3,
-0001a450: 2035 2c20 375d 290d 0a20 2020 2020 2020   5, 7])..       
-0001a460: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-0001a470: 4172 7261 7928 5b46 616c 7365 2c20 5472  Array([False, Tr
-0001a480: 7565 2c20 4661 6c73 652c 2054 7275 655d  ue, False, True]
-0001a490: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0001a4a0: 2e6d 6561 6e28 6669 6c74 6572 203d 2062  .mean(filter = b
-0001a4b0: 290d 0a20 2020 2020 2020 2035 2e30 0d0a  )..        5.0..
-0001a4c0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-0001a4d0: 2020 2020 2020 206b 7761 7267 7320 3d20         kwargs = 
-0001a4e0: 7365 6c66 2e5f 6661 5f6b 6579 776f 7264  self._fa_keyword
-0001a4f0: 5f77 7261 7070 6572 2866 696c 7465 723d  _wrapper(filter=
-0001a500: 6669 6c74 6572 2c20 6474 7970 653d 6474  filter, dtype=dt
-0001a510: 7970 652c 2061 7869 733d 6178 6973 2c20  ype, axis=axis, 
-0001a520: 6b65 6570 6469 6d73 3d6b 6565 7064 696d  keepdims=keepdim
-0001a530: 732c 2064 646f 663d 4e6f 6e65 2c20 2a2a  s, ddof=None, **
-0001a540: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
-0001a550: 2020 2069 6620 6669 6c74 6572 2069 7320     if filter is 
-0001a560: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-0001a570: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001a580: 6c66 2e5f 6661 5f66 696c 7465 725f 7772  lf._fa_filter_wr
-0001a590: 6170 7065 7228 5f66 6d65 616e 2c20 6669  apper(_fmean, fi
-0001a5a0: 6c74 6572 3d66 696c 7465 722c 2064 7479  lter=filter, dty
-0001a5b0: 7065 3d64 7479 7065 290d 0a0d 0a20 2020  pe=dtype)....   
-0001a5c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0001a5d0: 2e5f 7265 6475 6365 5f63 6865 636b 2852  ._reduce_check(R
-0001a5e0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-0001a5f0: 5245 4455 4345 5f4d 4541 4e2c 206e 702e  REDUCE_MEAN, np.
-0001a600: 6d65 616e 2c20 2a2a 6b77 6172 6773 290d  mean, **kwargs).
-0001a610: 0a0d 0a20 2020 2064 6566 206e 616e 6d65  ...    def nanme
-0001a620: 616e 2873 656c 662c 2066 696c 7465 723d  an(self, filter=
-0001a630: 4e6f 6e65 2c20 6474 7970 653d 4e6f 6e65  None, dtype=None
-0001a640: 2c20 6178 6973 3d4e 6f6e 652c 206b 6565  , axis=None, kee
-0001a650: 7064 696d 733d 4e6f 6e65 2c20 2a2a 6b77  pdims=None, **kw
-0001a660: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
-0001a670: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
-0001a680: 0d0a 2020 2020 2020 2020 436f 6d70 7574  ..        Comput
-0001a690: 6520 7468 6520 6172 6974 686d 6574 6963  e the arithmetic
-0001a6a0: 206d 6561 6e20 6f66 2074 6865 2076 616c   mean of the val
-0001a6b0: 7565 7320 696e 2074 6865 2066 6972 7374  ues in the first
-0001a6c0: 2061 7267 756d 656e 742c 2069 676e 6f72   argument, ignor
-0001a6d0: 696e 6720 4e61 4e73 2e0d 0a0d 0a20 2020  ing NaNs.....   
-0001a6e0: 2020 2020 2049 6620 616c 6c20 7661 6c75       If all valu
-0001a6f0: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
-0001a700: 6172 6775 6d65 6e74 2061 7265 204e 614e  argument are NaN
-0001a710: 732c 2060 6030 2e30 6060 2069 7320 7265  s, ``0.0`` is re
-0001a720: 7475 726e 6564 2e0d 0a0d 0a20 2020 2020  turned.....     
-0001a730: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-0001a740: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-0001a750: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
-0001a760: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
-0001a770: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-0001a780: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-0001a790: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
-0001a7a0: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
-0001a7b0: 2069 6e20 7468 6520 6d65 616e 2063 616c   in the mean cal
-0001a7c0: 6375 6c61 7469 6f6e 2e20 4966 2074 6865  culation. If the
-0001a7d0: 2066 696c 7465 720d 0a20 2020 2020 2020   filter..       
-0001a7e0: 2020 2020 2069 7320 756e 6966 6f72 6d6c       is uniforml
-0001a7f0: 7920 6060 4661 6c73 6560 602c 2060 6e61  y ``False``, `na
-0001a800: 6e6d 6561 6e60 2072 6574 7572 6e73 2061  nmean` returns a
-0001a810: 2060 5a65 726f 4469 7669 7369 6f6e 4572   `ZeroDivisionEr
-0001a820: 726f 7260 2e0d 0a20 2020 2020 2020 2064  ror`...        d
-0001a830: 7479 7065 203a 2072 742e 6474 7970 6520  type : rt.dtype 
-0001a840: 6f72 206e 756d 7079 2e64 7479 7065 2c20  or numpy.dtype, 
-0001a850: 6465 6661 756c 7420 666c 6f61 7436 340d  default float64.
-0001a860: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0001a870: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
-0001a880: 6520 7265 7375 6c74 2e20 466f 7220 6120  e result. For a 
-0001a890: 6046 6173 7441 7272 6179 6020 6060 7860  `FastArray` ``x`
-0001a8a0: 602c 0d0a 2020 2020 2020 2020 2020 2020  `,..            
-0001a8b0: 6060 782e 6e61 6e6d 6561 6e28 6474 7970  ``x.nanmean(dtyp
-0001a8c0: 6520 3d20 6d79 5f74 7970 6529 6060 2069  e = my_type)`` i
-0001a8d0: 7320 6571 7569 7661 6c65 6e74 2074 6f20  s equivalent to 
-0001a8e0: 6060 6d79 5f74 7970 6528 782e 6e61 6e6d  ``my_type(x.nanm
-0001a8f0: 6561 6e28 2929 6060 2e0d 0a0d 0a20 2020  ean())``.....   
-0001a900: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-0001a910: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-0001a920: 2020 2020 2020 2073 6361 6c61 720d 0a20         scalar.. 
-0001a930: 2020 2020 2020 2020 2020 2054 6865 206d             The m
-0001a940: 6561 6e20 6f66 2074 6865 2076 616c 7565  ean of the value
-0001a950: 732e 0d0a 0d0a 2020 2020 2020 2020 5365  s.....        Se
-0001a960: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
-0001a970: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001a980: 2020 6e75 6d70 792e 6e61 6e6d 6561 6e0d    numpy.nanmean.
-0001a990: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0001a9a0: 6179 2e6d 6561 6e20 3a20 436f 6d70 7574  ay.mean : Comput
-0001a9b0: 6573 2074 6865 206d 6561 6e20 6f66 2060  es the mean of `
-0001a9c0: 4661 7374 4172 7261 7960 2076 616c 7565  FastArray` value
-0001a9d0: 732e 0d0a 2020 2020 2020 2020 4461 7461  s...        Data
-0001a9e0: 7365 742e 6e61 6e6d 6561 6e20 3a20 436f  set.nanmean : Co
-0001a9f0: 6d70 7574 6573 2074 6865 206d 6561 6e20  mputes the mean 
-0001aa00: 6f66 206e 756d 6572 6963 616c 2060 4461  of numerical `Da
-0001aa10: 7461 7365 7460 2063 6f6c 756d 6e73 2c20  taset` columns, 
-0001aa20: 6967 6e6f 7269 6e67 0d0a 2020 2020 2020  ignoring..      
-0001aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa40: 2020 2020 4e61 4e73 2e0d 0a20 2020 2020      NaNs...     
-0001aa50: 2020 2047 726f 7570 4279 4f70 732e 6e61     GroupByOps.na
-0001aa60: 6e6d 6561 6e20 3a20 436f 6d70 7574 6573  nmean : Computes
-0001aa70: 2074 6865 206d 6561 6e20 6f66 2065 6163   the mean of eac
-0001aa80: 6820 6772 6f75 702c 2069 676e 6f72 696e  h group, ignorin
-0001aa90: 6720 4e61 4e73 2e20 5573 6564 2062 790d  g NaNs. Used by.
-0001aaa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001aab0: 2020 2020 2020 2020 2020 2020 2020 6043                `C
-0001aac0: 6174 6567 6f72 6963 616c 6020 6f62 6a65  ategorical` obje
-0001aad0: 6374 732e 0d0a 0d0a 2020 2020 2020 2020  cts.....        
-0001aae0: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
-0001aaf0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5468  ----..        Th
-0001ab00: 6520 6064 7479 7065 6020 6b65 7977 6f72  e `dtype` keywor
-0001ab10: 6420 666f 7220 6046 6173 7441 7272 6179  d for `FastArray
-0001ab20: 2e6e 616e 6d65 616e 6020 7370 6563 6966  .nanmean` specif
-0001ab30: 6965 7320 7468 6520 6461 7461 2074 7970  ies the data typ
-0001ab40: 6520 6f66 2074 6865 0d0a 2020 2020 2020  e of the..      
-0001ab50: 2020 7265 7375 6c74 2e20 5468 6973 2064    result. This d
-0001ab60: 6966 6665 7273 2066 726f 6d20 606e 756d  iffers from `num
-0001ab70: 7079 2e6e 616e 6d65 616e 602c 2077 6865  py.nanmean`, whe
-0001ab80: 7265 2069 7420 7370 6563 6966 6965 7320  re it specifies 
-0001ab90: 7468 6520 6461 7461 2074 7970 6520 7573  the data type us
-0001aba0: 6564 0d0a 2020 2020 2020 2020 746f 2063  ed..        to c
-0001abb0: 6f6d 7075 7465 2074 6865 206d 6561 6e2e  ompute the mean.
-0001abc0: 0d0a 0d0a 2020 2020 2020 2020 2a2a 4e6f  ....        **No
-0001abd0: 7465 7320 6f6e 2055 7369 6e67 204e 756d  tes on Using Num
-0001abe0: 5079 2050 6172 616d 6574 6572 732a 2a0d  Py Parameters**.
-0001abf0: 0a0d 0a20 2020 2020 2020 2055 7369 6e67  ...        Using
-0001ac00: 2065 6974 6865 7220 6f66 2074 6865 2066   either of the f
-0001ac10: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
-0001ac20: 6172 616d 6574 6572 7320 7769 6c6c 2063  arameters will c
-0001ac30: 6175 7365 2052 6970 7461 626c 6520 746f  ause Riptable to
-0001ac40: 2073 7769 7463 6820 746f 0d0a 2020 2020   switch to..    
-0001ac50: 2020 2020 7468 6520 4e75 6d50 7920 696d      the NumPy im
-0001ac60: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-0001ac70: 7468 6973 206d 6574 686f 6420 2860 6e75  this method (`nu
-0001ac80: 6d70 792e 6e61 6e6d 6561 6e60 292e 2048  mpy.nanmean`). H
-0001ac90: 6f77 6576 6572 2c20 756e 7469 6c20 610d  owever, until a.
-0001aca0: 0a20 2020 2020 2020 2072 6570 6f72 7465  .        reporte
-0001acb0: 6420 6275 6720 6973 2066 6978 6564 2c20  d bug is fixed, 
-0001acc0: 6966 2079 6f75 2061 6c73 6f20 696e 636c  if you also incl
-0001acd0: 7564 6520 7468 6520 6064 7479 7065 6020  ude the `dtype` 
-0001ace0: 7061 7261 6d65 7465 7220 6974 2077 696c  parameter it wil
-0001acf0: 6c20 6265 0d0a 2020 2020 2020 2020 6170  l be..        ap
-0001ad00: 706c 6965 6420 746f 2074 6865 2072 6573  plied to the res
-0001ad10: 756c 742c 206e 6f74 2075 7365 6420 746f  ult, not used to
-0001ad20: 2063 6f6d 7075 7465 2074 6865 206d 6561   compute the mea
-0001ad30: 6e20 6173 2069 7420 6973 2069 6e20 606e  n as it is in `n
-0001ad40: 756d 7079 2e6e 616e 6d65 616e 602e 0d0a  umpy.nanmean`...
-0001ad50: 0d0a 2020 2020 2020 2020 416c 736f 206e  ..        Also n
-0001ad60: 6f74 6520 7468 6174 2069 6620 796f 7520  ote that if you 
-0001ad70: 7573 6520 6569 7468 6572 206f 6620 7468  use either of th
-0001ad80: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-0001ad90: 7920 7061 7261 6d65 7465 7273 2061 6e64  y parameters and
-0001ada0: 2061 6c73 6f0d 0a20 2020 2020 2020 2069   also..        i
-0001adb0: 6e63 6c75 6465 2061 2060 6669 6c74 6572  nclude a `filter
-0001adc0: 6020 6b65 7977 6f72 6420 6172 6775 6d65  ` keyword argume
-0001add0: 6e74 2028 7768 6963 6820 606e 756d 7079  nt (which `numpy
-0001ade0: 2e6e 616e 6d65 616e 6020 646f 6573 206e  .nanmean` does n
-0001adf0: 6f74 2061 6363 6570 7429 2c0d 0a20 2020  ot accept),..   
-0001ae00: 2020 2020 2052 6970 7461 626c 6527 7320       Riptable's 
-0001ae10: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-0001ae20: 6620 606e 616e 6d65 616e 6020 7769 6c6c  f `nanmean` will
-0001ae30: 2062 6520 7573 6564 2077 6974 6820 7468   be used with th
-0001ae40: 6520 6669 6c74 6572 2061 7267 756d 656e  e filter argumen
-0001ae50: 740d 0a20 2020 2020 2020 2061 6e64 2074  t..        and t
-0001ae60: 6865 204e 756d 5079 2070 6172 616d 6574  he NumPy paramet
-0001ae70: 6572 7320 7769 6c6c 2062 6520 6967 6e6f  ers will be igno
-0001ae80: 7265 642e 0d0a 0d0a 2020 2020 2020 2020  red.....        
-0001ae90: 6178 6973 203a 207b 696e 742c 2074 7570  axis : {int, tup
-0001aea0: 6c65 206f 6620 696e 742c 204e 6f6e 657d  le of int, None}
-0001aeb0: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
-0001aec0: 2020 2020 2020 2020 4178 6973 206f 7220          Axis or 
-0001aed0: 6178 6573 2061 6c6f 6e67 2077 6869 6368  axes along which
-0001aee0: 2074 6865 206d 6561 6e73 2061 7265 2063   the means are c
-0001aef0: 6f6d 7075 7465 642e 2054 6865 2064 6566  omputed. The def
-0001af00: 6175 6c74 2069 7320 746f 2063 6f6d 7075  ault is to compu
-0001af10: 7465 0d0a 2020 2020 2020 2020 2020 2020  te..            
-0001af20: 7468 6520 6d65 616e 206f 6620 7468 6520  the mean of the 
-0001af30: 666c 6174 7465 6e65 6420 6172 7261 792e  flattened array.
-0001af40: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
-0001af50: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
-0001af60: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-0001af70: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
-0001af80: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
-0001af90: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
-0001afa0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
-0001afb0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
-0001afc0: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
-0001afd0: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
-0001afe0: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
-0001aff0: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
-0001b000: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
-0001b010: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
-0001b020: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
-0001b030: 7420 7468 6520 6f72 6967 696e 616c 2069  t the original i
-0001b040: 6e70 7574 2061 7272 6179 2e0d 0a0d 0a20  nput array..... 
-0001b050: 2020 2020 2020 2020 2020 2049 6620 7468             If th
-0001b060: 6520 7661 6c75 6520 6973 2061 6e79 7468  e value is anyth
-0001b070: 696e 6720 6275 7420 7468 6520 6465 6661  ing but the defa
-0001b080: 756c 742c 2074 6865 6e20 606b 6565 7064  ult, then `keepd
-0001b090: 696d 7360 2077 696c 6c20 6265 2070 6173  ims` will be pas
-0001b0a0: 7365 640d 0a20 2020 2020 2020 2020 2020  sed..           
-0001b0b0: 2074 6872 6f75 6768 2074 6f20 7468 6520   through to the 
-0001b0c0: 606d 6561 6e60 206f 7220 6073 756d 6020  `mean` or `sum` 
-0001b0d0: 6d65 7468 6f64 7320 6f66 2073 7562 2d63  methods of sub-c
-0001b0e0: 6c61 7373 6573 206f 6620 606e 6461 7272  lasses of `ndarr
-0001b0f0: 6179 602e 2049 6620 7468 650d 0a20 2020  ay`. If the..   
-0001b100: 2020 2020 2020 2020 2073 7562 2d63 6c61           sub-cla
-0001b110: 7373 6573 2720 6d65 7468 6f64 7320 646f  sses' methods do
-0001b120: 206e 6f74 2069 6d70 6c65 6d65 6e74 2060   not implement `
-0001b130: 6b65 6570 6469 6d73 602c 2061 6e79 2065  keepdims`, any e
-0001b140: 7863 6570 7469 6f6e 7320 7769 6c6c 2062  xceptions will b
-0001b150: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-0001b160: 6169 7365 642e 0d0a 0d0a 2020 2020 2020  aised.....      
-0001b170: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-0001b180: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0001b190: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001b1a0: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
-0001b1b0: 2c20 352c 2072 742e 6e61 6e5d 290d 0a20  , 5, rt.nan]).. 
-0001b1c0: 2020 2020 2020 203e 3e3e 2061 2e6e 616e         >>> a.nan
-0001b1d0: 6d65 616e 2829 0d0a 2020 2020 2020 2020  mean()..        
-0001b1e0: 332e 300d 0a0d 0a20 2020 2020 2020 2057  3.0....        W
-0001b1f0: 6974 6820 6120 6064 7479 7065 6020 7370  ith a `dtype` sp
-0001b200: 6563 6966 6965 643a 0d0a 0d0a 2020 2020  ecified:....    
-0001b210: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
-0001b220: 6173 7441 7272 6179 285b 312c 2033 2c20  astArray([1, 3, 
-0001b230: 352c 2072 742e 6e61 6e5d 290d 0a20 2020  5, rt.nan])..   
-0001b240: 2020 2020 203e 3e3e 2061 2e6e 616e 6d65       >>> a.nanme
-0001b250: 616e 2864 7479 7065 203d 2072 742e 696e  an(dtype = rt.in
-0001b260: 7433 3229 0d0a 2020 2020 2020 2020 330d  t32)..        3.
-0001b270: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001b280: 6120 6669 6c74 6572 3a0d 0a0d 0a20 2020  a filter:....   
-0001b290: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001b2a0: 4661 7374 4172 7261 7928 5b31 2c20 332c  FastArray([1, 3,
-0001b2b0: 2035 2c20 7274 2e6e 616e 5d29 0d0a 2020   5, rt.nan])..  
-0001b2c0: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
-0001b2d0: 2e46 6173 7441 7272 6179 285b 4661 6c73  .FastArray([Fals
-0001b2e0: 652c 2054 7275 652c 2054 7275 652c 2054  e, True, True, T
-0001b2f0: 7275 655d 290d 0a20 2020 2020 2020 203e  rue])..        >
-0001b300: 3e3e 2061 2e6e 616e 6d65 616e 2866 696c  >> a.nanmean(fil
-0001b310: 7465 7220 3d20 6229 0d0a 2020 2020 2020  ter = b)..      
-0001b320: 2020 342e 300d 0a20 2020 2020 2020 2022    4.0..        "
-0001b330: 2222 0d0a 0d0a 2020 2020 2020 2020 6b77  ""....        kw
-0001b340: 6172 6773 203d 2073 656c 662e 5f66 615f  args = self._fa_
-0001b350: 6b65 7977 6f72 645f 7772 6170 7065 7228  keyword_wrapper(
-0001b360: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
-0001b370: 7479 7065 3d64 7479 7065 2c20 6178 6973  type=dtype, axis
-0001b380: 3d61 7869 732c 206b 6565 7064 696d 733d  =axis, keepdims=
-0001b390: 6b65 6570 6469 6d73 2c20 6464 6f66 3d4e  keepdims, ddof=N
-0001b3a0: 6f6e 652c 202a 2a6b 7761 7267 7329 0d0a  one, **kwargs)..
-0001b3b0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
-0001b3c0: 7465 7220 6973 206e 6f74 204e 6f6e 653a  ter is not None:
-0001b3d0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001b3e0: 7475 726e 2073 656c 662e 5f66 615f 6669  turn self._fa_fi
-0001b3f0: 6c74 6572 5f77 7261 7070 6572 285f 666e  lter_wrapper(_fn
-0001b400: 616e 6d65 616e 2c20 6669 6c74 6572 3d66  anmean, filter=f
-0001b410: 696c 7465 722c 2064 7479 7065 3d64 7479  ilter, dtype=dty
-0001b420: 7065 290d 0a0d 0a20 2020 2020 2020 2072  pe)....        r
-0001b430: 6574 7572 6e20 7365 6c66 2e5f 7265 6475  eturn self._redu
-0001b440: 6365 5f63 6865 636b 2852 4544 5543 455f  ce_check(REDUCE_
-0001b450: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-0001b460: 5f4e 414e 4d45 414e 2c20 6e70 2e6e 616e  _NANMEAN, np.nan
-0001b470: 6d65 616e 2c20 2a2a 6b77 6172 6773 290d  mean, **kwargs).
-0001b480: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-0001b490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b4d0: 2d2d 2d2d 0d0a 2020 2020 2320 7468 6573  ----..    # thes
-0001b4e0: 6520 6675 6e63 7469 6f6e 2074 616b 6520  e function take 
-0001b4f0: 6120 6464 6f66 206b 7761 7267 0d0a 2020  a ddof kwarg..  
-0001b500: 2020 6465 6620 7661 7228 7365 6c66 2c20    def var(self, 
-0001b510: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
-0001b520: 7065 3d4e 6f6e 652c 2061 7869 733d 4e6f  pe=None, axis=No
-0001b530: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
-0001b540: 652c 2064 646f 663d 4e6f 6e65 2c20 2a2a  e, ddof=None, **
-0001b550: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-0001b560: 2020 2222 220d 0a20 2020 2020 2020 2043    """..        C
-0001b570: 6f6d 7075 7465 2074 6865 2076 6172 6961  ompute the varia
-0001b580: 6e63 6520 6f66 2074 6865 2076 616c 7565  nce of the value
-0001b590: 7320 696e 2074 6865 2066 6972 7374 2061  s in the first a
-0001b5a0: 7267 756d 656e 742e 0d0a 0d0a 2020 2020  rgument.....    
-0001b5b0: 2020 2020 5269 7074 6162 6c65 2075 7365      Riptable use
-0001b5c0: 7320 7468 6520 636f 6e76 656e 7469 6f6e  s the convention
-0001b5d0: 2074 6861 7420 6060 6464 6f66 203d 2031   that ``ddof = 1
-0001b5e0: 6060 2c20 6d65 616e 696e 6720 7468 6520  ``, meaning the 
-0001b5f0: 7661 7269 616e 6365 206f 660d 0a20 2020  variance of..   
-0001b600: 2020 2020 2060 605b 785f 312c 202e 2e2e       ``[x_1, ...
-0001b610: 2c20 785f 6e5d 6060 2069 7320 6465 6669  , x_n]`` is defi
-0001b620: 6e65 6420 6279 2060 6076 6172 203d 2031  ned by ``var = 1
-0001b630: 2f28 6e20 2d20 3129 202a 2073 756d 2878  /(n - 1) * sum(x
-0001b640: 5f69 202d 206d 6561 6e20 292a 2a32 6060  _i - mean )**2``
-0001b650: 0d0a 2020 2020 2020 2020 286e 6f74 6520  ..        (note 
-0001b660: 7468 6520 6060 6e20 2d20 3160 6020 696e  the ``n - 1`` in
-0001b670: 7374 6561 6420 6f66 2060 606e 6060 292e  stead of ``n``).
-0001b680: 2054 6869 7320 6469 6666 6572 7320 6672   This differs fr
-0001b690: 6f6d 204e 756d 5079 2c20 7768 6963 6820  om NumPy, which 
-0001b6a0: 7573 6573 0d0a 2020 2020 2020 2020 6060  uses..        ``
-0001b6b0: 6464 6f66 203d 2030 6060 2062 7920 6465  ddof = 0`` by de
-0001b6c0: 6661 756c 742e 0d0a 0d0a 2020 2020 2020  fault.....      
-0001b6d0: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-0001b6e0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0001b6f0: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
-0001b700: 203a 2061 7272 6179 206f 6620 626f 6f6c   : array of bool
-0001b710: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-0001b720: 2020 2020 2020 2020 2020 2020 5370 6563              Spec
-0001b730: 6966 6965 7320 7768 6963 6820 656c 656d  ifies which elem
-0001b740: 656e 7473 2074 6f20 696e 636c 7564 6520  ents to include 
-0001b750: 696e 2074 6865 2076 6172 6961 6e63 6520  in the variance 
-0001b760: 6361 6c63 756c 6174 696f 6e2e 2049 6620  calculation. If 
-0001b770: 7468 650d 0a20 2020 2020 2020 2020 2020  the..           
-0001b780: 2066 696c 7465 7220 6973 2075 6e69 666f   filter is unifo
-0001b790: 726d 6c79 2060 6046 616c 7365 6060 2c20  rmly ``False``, 
-0001b7a0: 6076 6172 6020 7265 7475 726e 7320 6120  `var` returns a 
-0001b7b0: 605a 6572 6f44 6976 6973 696f 6e45 7272  `ZeroDivisionErr
-0001b7c0: 6f72 602e 0d0a 0d0a 2020 2020 2020 2020  or`.....        
-0001b7d0: 6474 7970 6520 3a20 7274 2e64 7479 7065  dtype : rt.dtype
-0001b7e0: 206f 7220 6e75 6d70 792e 6474 7970 652c   or numpy.dtype,
-0001b7f0: 2064 6566 6175 6c74 2066 6c6f 6174 3634   default float64
-0001b800: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
-0001b810: 6520 6461 7461 2074 7970 6520 6f66 2074  e data type of t
-0001b820: 6865 2072 6573 756c 742e 2046 6f72 2061  he result. For a
-0001b830: 2060 4661 7374 4172 7261 7960 2060 6078   `FastArray` ``x
-0001b840: 6060 2c0d 0a20 2020 2020 2020 2020 2020  ``,..           
-0001b850: 2060 6078 2e76 6172 2864 7479 7065 203d   ``x.var(dtype =
-0001b860: 206d 795f 7479 7065 2960 6020 6973 2065   my_type)`` is e
-0001b870: 7175 6976 616c 656e 7420 746f 2060 606d  quivalent to ``m
-0001b880: 795f 7479 7065 2878 2e76 6172 2829 2960  y_type(x.var())`
-0001b890: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
-0001b8a0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0001b8b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001b8c0: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
-0001b8d0: 2020 2020 5468 6520 7661 7269 616e 6365      The variance
-0001b8e0: 206f 6620 7468 6520 7661 6c75 6573 2e0d   of the values..
-0001b8f0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
-0001b900: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
-0001b910: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206e  -----..        n
-0001b920: 756d 7079 2e76 6172 0d0a 2020 2020 2020  umpy.var..      
-0001b930: 2020 4661 7374 4172 7261 792e 6e61 6e76    FastArray.nanv
-0001b940: 6172 203a 2043 6f6d 7075 7465 7320 7468  ar : Computes th
-0001b950: 6520 7661 7269 616e 6365 206f 6620 6046  e variance of `F
-0001b960: 6173 7441 7272 6179 6020 7661 6c75 6573  astArray` values
-0001b970: 2c20 6967 6e6f 7269 6e67 204e 614e 732e  , ignoring NaNs.
-0001b980: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-0001b990: 742e 7661 7220 3a20 436f 6d70 7574 6573  t.var : Computes
-0001b9a0: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
-0001b9b0: 206e 756d 6572 6963 616c 2060 4461 7461   numerical `Data
-0001b9c0: 7365 7460 2063 6f6c 756d 6e73 2e0d 0a20  set` columns... 
-0001b9d0: 2020 2020 2020 2047 726f 7570 4279 4f70         GroupByOp
-0001b9e0: 732e 7661 7220 3a20 436f 6d70 7574 6573  s.var : Computes
-0001b9f0: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
-0001ba00: 2065 6163 6820 6772 6f75 702e 2055 7365   each group. Use
-0001ba10: 6420 6279 2060 4361 7465 676f 7269 6361  d by `Categorica
-0001ba20: 6c60 0d0a 2020 2020 2020 2020 2020 2020  l`..            
-0001ba30: 2020 2020 2020 2020 2020 2020 206f 626a               obj
-0001ba40: 6563 7473 2e0d 0a0d 0a20 2020 2020 2020  ects.....       
-0001ba50: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
-0001ba60: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
-0001ba70: 6865 2060 6474 7970 6560 206b 6579 776f  he `dtype` keywo
-0001ba80: 7264 2066 6f72 2060 4661 7374 4172 7261  rd for `FastArra
-0001ba90: 792e 7661 7260 2073 7065 6369 6669 6573  y.var` specifies
-0001baa0: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
-0001bab0: 6620 7468 6520 7265 7375 6c74 2e0d 0a20  f the result... 
-0001bac0: 2020 2020 2020 2054 6869 7320 6469 6666         This diff
-0001bad0: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
-0001bae0: 7661 7260 2c20 7768 6572 6520 6974 2073  var`, where it s
-0001baf0: 7065 6369 6669 6573 2074 6865 2064 6174  pecifies the dat
-0001bb00: 6120 7479 7065 2075 7365 6420 746f 2063  a type used to c
-0001bb10: 6f6d 7075 7465 0d0a 2020 2020 2020 2020  ompute..        
-0001bb20: 7468 6520 7661 7269 616e 6365 2e0d 0a0d  the variance....
-0001bb30: 0a20 2020 2020 2020 202a 2a4e 6f74 6573  .        **Notes
-0001bb40: 206f 6e20 5573 696e 6720 4e75 6d50 7920   on Using NumPy 
-0001bb50: 5061 7261 6d65 7465 7273 2a2a 0d0a 0d0a  Parameters**....
-0001bb60: 2020 2020 2020 2020 5573 696e 6720 616e          Using an
-0001bb70: 7920 6f66 2074 6865 2066 6f6c 6c6f 7769  y of the followi
-0001bb80: 6e67 204e 756d 5079 2070 6172 616d 6574  ng NumPy paramet
-0001bb90: 6572 7320 7769 6c6c 2063 6175 7365 2052  ers will cause R
-0001bba0: 6970 7461 626c 6520 746f 2073 7769 7463  iptable to switc
-0001bbb0: 6820 746f 0d0a 2020 2020 2020 2020 7468  h to..        th
-0001bbc0: 6520 4e75 6d50 7920 696d 706c 656d 656e  e NumPy implemen
-0001bbd0: 7461 7469 6f6e 206f 6620 7468 6973 206d  tation of this m
-0001bbe0: 6574 686f 6420 2860 6e75 6d70 792e 7661  ethod (`numpy.va
-0001bbf0: 7260 292e 2048 6f77 6576 6572 2c20 756e  r`). However, un
-0001bc00: 7469 6c20 610d 0a20 2020 2020 2020 2072  til a..        r
-0001bc10: 6570 6f72 7465 6420 6275 6720 6973 2066  eported bug is f
-0001bc20: 6978 6564 2c20 6966 2079 6f75 2061 6c73  ixed, if you als
-0001bc30: 6f20 696e 636c 7564 6520 7468 6520 6064  o include the `d
-0001bc40: 7479 7065 6020 7061 7261 6d65 7465 7220  type` parameter 
-0001bc50: 6974 2077 696c 6c20 6265 0d0a 2020 2020  it will be..    
-0001bc60: 2020 2020 6170 706c 6965 6420 746f 2074      applied to t
-0001bc70: 6865 2072 6573 756c 742c 206e 6f74 2075  he result, not u
-0001bc80: 7365 6420 746f 2063 6f6d 7075 7465 2074  sed to compute t
-0001bc90: 6865 2076 6172 6961 6e63 6520 6173 2069  he variance as i
-0001bca0: 7420 6973 2069 6e20 606e 756d 7079 2e76  t is in `numpy.v
-0001bcb0: 6172 602e 0d0a 0d0a 2020 2020 2020 2020  ar`.....        
-0001bcc0: 416c 736f 206e 6f74 6520 7468 6174 2069  Also note that i
-0001bcd0: 6620 796f 7520 7573 6520 616e 7920 6f66  f you use any of
-0001bce0: 2074 6865 2066 6f6c 6c6f 7769 6e67 204e   the following N
-0001bcf0: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
-0001bd00: 616e 6420 616c 736f 0d0a 2020 2020 2020  and also..      
-0001bd10: 2020 696e 636c 7564 6520 6120 6066 696c    include a `fil
-0001bd20: 7465 7260 206b 6579 776f 7264 2061 7267  ter` keyword arg
-0001bd30: 756d 656e 7420 2877 6869 6368 2060 6e75  ument (which `nu
-0001bd40: 6d70 792e 7661 7260 2064 6f65 7320 6e6f  mpy.var` does no
-0001bd50: 7420 6163 6365 7074 292c 0d0a 2020 2020  t accept),..    
-0001bd60: 2020 2020 5269 7074 6162 6c65 2773 2069      Riptable's i
-0001bd70: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-0001bd80: 2060 7661 7260 2077 696c 6c20 6265 2075   `var` will be u
-0001bd90: 7365 6420 7769 7468 2074 6865 2066 696c  sed with the fil
-0001bda0: 7465 7220 6172 6775 6d65 6e74 0d0a 2020  ter argument..  
-0001bdb0: 2020 2020 2020 616e 6420 7468 6520 4e75        and the Nu
-0001bdc0: 6d50 7920 7061 7261 6d65 7465 7273 2077  mPy parameters w
-0001bdd0: 696c 6c20 6265 2069 676e 6f72 6564 2e0d  ill be ignored..
-0001bde0: 0a0d 0a20 2020 2020 2020 2061 7869 7320  ...        axis 
-0001bdf0: 3a20 4e6f 6e65 206f 7220 696e 7420 6f72  : None or int or
-0001be00: 2074 7570 6c65 206f 6620 696e 7473 2c20   tuple of ints, 
-0001be10: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-0001be20: 2020 2020 2020 4178 6973 206f 7220 6178        Axis or ax
-0001be30: 6573 2061 6c6f 6e67 2077 6869 6368 2074  es along which t
-0001be40: 6865 2076 6172 6961 6e63 6520 6973 2063  he variance is c
-0001be50: 6f6d 7075 7465 642e 2054 6865 2064 6566  omputed. The def
-0001be60: 6175 6c74 2069 7320 746f 0d0a 2020 2020  ault is to..    
-0001be70: 2020 2020 2020 2020 636f 6d70 7574 6520          compute 
-0001be80: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
-0001be90: 7468 6520 666c 6174 7465 6e65 6420 6172  the flattened ar
-0001bea0: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
-0001beb0: 6b65 6570 6469 6d73 203a 2062 6f6f 6c2c  keepdims : bool,
-0001bec0: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001bed0: 2020 2020 2020 2049 6620 7468 6973 2069         If this i
-0001bee0: 7320 7365 7420 746f 2054 7275 652c 2074  s set to True, t
-0001bef0: 6865 2061 7865 7320 7768 6963 6820 6172  he axes which ar
-0001bf00: 6520 7265 6475 6365 6420 6172 6520 6c65  e reduced are le
-0001bf10: 6674 2069 6e20 7468 6520 7265 7375 6c74  ft in the result
-0001bf20: 2061 730d 0a20 2020 2020 2020 2020 2020   as..           
-0001bf30: 2064 696d 656e 7369 6f6e 7320 7769 7468   dimensions with
-0001bf40: 2073 697a 6520 6f6e 652e 2057 6974 6820   size one. With 
-0001bf50: 7468 6973 206f 7074 696f 6e2c 2074 6865  this option, the
-0001bf60: 2072 6573 756c 7420 7769 6c6c 2062 726f   result will bro
-0001bf70: 6164 6361 7374 0d0a 2020 2020 2020 2020  adcast..        
-0001bf80: 2020 2020 636f 7272 6563 746c 7920 6167      correctly ag
-0001bf90: 6169 6e73 7420 7468 6520 696e 7075 7420  ainst the input 
-0001bfa0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
-0001bfb0: 2020 2020 2020 4966 2074 6865 2064 6566        If the def
-0001bfc0: 6175 6c74 2076 616c 7565 2069 7320 7061  ault value is pa
-0001bfd0: 7373 6564 2c20 7468 656e 2060 6b65 6570  ssed, then `keep
-0001bfe0: 6469 6d73 6020 7769 6c6c 206e 6f74 2062  dims` will not b
-0001bff0: 6520 7061 7373 6564 2074 6872 6f75 6768  e passed through
-0001c000: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-0001c010: 2074 6865 2060 7661 7260 206d 6574 686f   the `var` metho
-0001c020: 6420 6f66 2073 7562 2d63 6c61 7373 6573  d of sub-classes
-0001c030: 206f 6620 606e 6461 7272 6179 602c 2068   of `ndarray`, h
-0001c040: 6f77 6576 6572 2061 6e79 206e 6f6e 2d64  owever any non-d
-0001c050: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
-0001c060: 2020 2020 7661 6c75 6520 7769 6c6c 2062      value will b
-0001c070: 652e 2049 6620 7468 6520 7375 622d 636c  e. If the sub-cl
-0001c080: 6173 7365 7327 206d 6574 686f 6420 646f  asses' method do
-0001c090: 6573 206e 6f74 2069 6d70 6c65 6d65 6e74  es not implement
-0001c0a0: 2060 6b65 6570 6469 6d73 602c 2061 6e79   `keepdims`, any
-0001c0b0: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
-0001c0c0: 6365 7074 696f 6e73 2077 696c 6c20 6265  ceptions will be
-0001c0d0: 2072 6169 7365 642e 0d0a 0d0a 2020 2020   raised.....    
-0001c0e0: 2020 2020 6464 6f66 203a 2069 6e74 2c20      ddof : int, 
-0001c0f0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-0001c100: 2020 2020 2020 2244 656c 7461 2044 6567        "Delta Deg
-0001c110: 7265 6573 206f 6620 4672 6565 646f 6d22  rees of Freedom"
-0001c120: 3a20 7468 6520 6469 7669 736f 7220 7573  : the divisor us
-0001c130: 6564 2069 6e20 7468 6520 6361 6c63 756c  ed in the calcul
-0001c140: 6174 696f 6e20 6973 0d0a 2020 2020 2020  ation is..      
-0001c150: 2020 2020 2020 6060 4e20 2d20 6464 6f66        ``N - ddof
-0001c160: 6060 2c20 7768 6572 6520 6060 4e60 6020  ``, where ``N`` 
-0001c170: 7265 7072 6573 656e 7473 2074 6865 206e  represents the n
-0001c180: 756d 6265 7220 6f66 2065 6c65 6d65 6e74  umber of element
-0001c190: 732e 2042 7920 6465 6661 756c 740d 0a20  s. By default.. 
-0001c1a0: 2020 2020 2020 2020 2020 2060 6464 6f66             `ddof
-0001c1b0: 6020 6973 207a 6572 6f20 666f 7220 7468  ` is zero for th
-0001c1c0: 6520 4e75 6d50 7920 696d 706c 656d 656e  e NumPy implemen
-0001c1d0: 7461 7469 6f6e 2c20 7665 7273 7573 206f  tation, versus o
-0001c1e0: 6e65 2066 6f72 2074 6865 2052 6970 7461  ne for the Ripta
-0001c1f0: 626c 650d 0a20 2020 2020 2020 2020 2020  ble..           
-0001c200: 2069 6d70 6c65 6d65 6e74 6174 696f 6e2e   implementation.
-0001c210: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0001c220: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0001c230: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001c240: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-0001c250: 7272 6179 285b 312c 2032 2c20 335d 290d  rray([1, 2, 3]).
-0001c260: 0a20 2020 2020 2020 203e 3e3e 2061 2e76  .        >>> a.v
-0001c270: 6172 2829 0d0a 2020 2020 2020 2020 312e  ar()..        1.
-0001c280: 300d 0a0d 0a20 2020 2020 2020 2057 6974  0....        Wit
-0001c290: 6820 6120 6064 7479 7065 6020 7370 6563  h a `dtype` spec
-0001c2a0: 6966 6965 643a 0d0a 0d0a 2020 2020 2020  ified:....      
-0001c2b0: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
-0001c2c0: 7441 7272 6179 285b 312c 2032 2c20 335d  tArray([1, 2, 3]
-0001c2d0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0001c2e0: 2e76 6172 2864 7479 7065 203d 2072 742e  .var(dtype = rt.
-0001c2f0: 696e 7433 3229 0d0a 2020 2020 2020 2020  int32)..        
-0001c300: 310d 0a0d 0a20 2020 2020 2020 2057 6974  1....        Wit
-0001c310: 6820 6120 6669 6c74 6572 3a0d 0a0d 0a20  h a filter:.... 
-0001c320: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-0001c330: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
-0001c340: 322c 2033 5d29 0d0a 2020 2020 2020 2020  2, 3])..        
-0001c350: 3e3e 3e20 6220 3d20 7274 2e46 6173 7441  >>> b = rt.FastA
-0001c360: 7272 6179 285b 4661 6c73 652c 2054 7275  rray([False, Tru
-0001c370: 652c 2054 7275 655d 290d 0a20 2020 2020  e, True])..     
-0001c380: 2020 203e 3e3e 2061 2e76 6172 2866 696c     >>> a.var(fil
-0001c390: 7465 7220 3d20 6229 0d0a 2020 2020 2020  ter = b)..      
-0001c3a0: 2020 302e 350d 0a20 2020 2020 2020 2022    0.5..        "
-0001c3b0: 2222 0d0a 0d0a 2020 2020 2020 2020 6b77  ""....        kw
-0001c3c0: 6172 6773 203d 2073 656c 662e 5f66 615f  args = self._fa_
-0001c3d0: 6b65 7977 6f72 645f 7772 6170 7065 7228  keyword_wrapper(
-0001c3e0: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
-0001c3f0: 7479 7065 3d64 7479 7065 2c20 6178 6973  type=dtype, axis
-0001c400: 3d61 7869 732c 206b 6565 7064 696d 733d  =axis, keepdims=
-0001c410: 6b65 6570 6469 6d73 2c20 6464 6f66 3d64  keepdims, ddof=d
-0001c420: 646f 662c 202a 2a6b 7761 7267 7329 0d0a  dof, **kwargs)..
-0001c430: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
-0001c440: 7465 7220 6973 206e 6f74 204e 6f6e 653a  ter is not None:
-0001c450: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001c460: 7475 726e 2073 656c 662e 5f66 615f 6669  turn self._fa_fi
-0001c470: 6c74 6572 5f77 7261 7070 6572 285f 6676  lter_wrapper(_fv
-0001c480: 6172 2c20 6669 6c74 6572 3d66 696c 7465  ar, filter=filte
-0001c490: 722c 2064 7479 7065 3d64 7479 7065 290d  r, dtype=dtype).
-0001c4a0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-0001c4b0: 6e20 7365 6c66 2e5f 7265 6475 6365 5f63  n self._reduce_c
-0001c4c0: 6865 636b 2852 4544 5543 455f 4655 4e43  heck(REDUCE_FUNC
-0001c4d0: 5449 4f4e 532e 5245 4455 4345 5f56 4152  TIONS.REDUCE_VAR
-0001c4e0: 2c20 6e70 2e76 6172 2c20 2a2a 6b77 6172  , np.var, **kwar
-0001c4f0: 6773 290d 0a0d 0a20 2020 2064 6566 206e  gs)....    def n
-0001c500: 616e 7661 7228 7365 6c66 2c20 6669 6c74  anvar(self, filt
-0001c510: 6572 3d4e 6f6e 652c 2064 7479 7065 3d4e  er=None, dtype=N
-0001c520: 6f6e 652c 2061 7869 733d 4e6f 6e65 2c20  one, axis=None, 
-0001c530: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2064  keepdims=None, d
-0001c540: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
-0001c550: 6773 2920 2d3e 206e 702e 6e75 6d62 6572  gs) -> np.number
-0001c560: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0001c570: 2020 2020 2020 2020 436f 6d70 7574 6520          Compute 
-0001c580: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
-0001c590: 7468 6520 7661 6c75 6573 2069 6e20 7468  the values in th
-0001c5a0: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
-0001c5b0: 2c20 6967 6e6f 7269 6e67 204e 614e 732e  , ignoring NaNs.
-0001c5c0: 0d0a 0d0a 2020 2020 2020 2020 4966 2061  ....        If a
-0001c5d0: 6c6c 2076 616c 7565 7320 696e 2074 6865  ll values in the
-0001c5e0: 2066 6972 7374 2061 7267 756d 656e 7420   first argument 
-0001c5f0: 6172 6520 4e61 4e73 2c20 6060 4e61 4e60  are NaNs, ``NaN`
-0001c600: 6020 6973 2072 6574 7572 6e65 642e 0d0a  ` is returned...
-0001c610: 0d0a 2020 2020 2020 2020 5269 7074 6162  ..        Riptab
-0001c620: 6c65 2075 7365 7320 7468 6520 636f 6e76  le uses the conv
-0001c630: 656e 7469 6f6e 2074 6861 7420 6060 6464  ention that ``dd
-0001c640: 6f66 203d 2031 6060 2c20 6d65 616e 696e  of = 1``, meanin
-0001c650: 6720 7468 6520 7661 7269 616e 6365 206f  g the variance o
-0001c660: 660d 0a20 2020 2020 2020 2060 605b 785f  f..        ``[x_
-0001c670: 312c 202e 2e2e 2c20 785f 6e5d 6060 2069  1, ..., x_n]`` i
-0001c680: 7320 6465 6669 6e65 6420 6279 2060 6076  s defined by ``v
-0001c690: 6172 203d 2031 2f28 6e20 2d20 3129 202a  ar = 1/(n - 1) *
-0001c6a0: 2073 756d 2878 5f69 202d 206d 6561 6e20   sum(x_i - mean 
-0001c6b0: 292a 2a32 6060 2028 6e6f 7465 0d0a 2020  )**2`` (note..  
-0001c6c0: 2020 2020 2020 7468 6520 6060 6e20 2d20        the ``n - 
-0001c6d0: 3160 6020 696e 7374 6561 6420 6f66 2060  1`` instead of `
-0001c6e0: 606e 6060 292e 2054 6869 7320 6469 6666  `n``). This diff
-0001c6f0: 6572 7320 6672 6f6d 204e 756d 5079 2c20  ers from NumPy, 
-0001c700: 7768 6963 6820 7573 6573 2060 6064 646f  which uses ``ddo
-0001c710: 6620 3d20 3060 6020 6279 0d0a 2020 2020  f = 0`` by..    
-0001c720: 2020 2020 6465 6661 756c 742e 0d0a 0d0a      default.....
-0001c730: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-0001c740: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-0001c750: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001c760: 6669 6c74 6572 203a 2061 7272 6179 206f  filter : array o
-0001c770: 6620 626f 6f6c 2c20 6465 6661 756c 7420  f bool, default 
-0001c780: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-0001c790: 2020 5370 6563 6966 6965 7320 7768 6963    Specifies whic
-0001c7a0: 6820 656c 656d 656e 7473 2074 6f20 696e  h elements to in
-0001c7b0: 636c 7564 6520 696e 2074 6865 2076 6172  clude in the var
-0001c7c0: 6961 6e63 6520 6361 6c63 756c 6174 696f  iance calculatio
-0001c7d0: 6e2e 2049 6620 7468 6520 6669 6c74 6572  n. If the filter
-0001c7e0: 0d0a 2020 2020 2020 2020 2020 2020 6973  ..            is
-0001c7f0: 2075 6e69 666f 726d 6c79 2060 6046 616c   uniformly ``Fal
-0001c800: 7365 6060 2c20 606e 616e 7661 7260 2072  se``, `nanvar` r
-0001c810: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
-0001c820: 7669 7369 6f6e 4572 726f 7260 2e0d 0a0d  visionError`....
-0001c830: 0a20 2020 2020 2020 2064 7479 7065 203a  .        dtype :
-0001c840: 2072 742e 6474 7970 6520 6f72 206e 756d   rt.dtype or num
-0001c850: 7079 2e64 7479 7065 2c20 6465 6661 756c  py.dtype, defaul
-0001c860: 7420 666c 6f61 7436 340d 0a20 2020 2020  t float64..     
-0001c870: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
-0001c880: 7479 7065 206f 6620 7468 6520 7265 7375  type of the resu
-0001c890: 6c74 2e20 466f 7220 6120 6046 6173 7441  lt. For a `FastA
-0001c8a0: 7272 6179 6020 6060 7860 602c 0d0a 2020  rray` ``x``,..  
-0001c8b0: 2020 2020 2020 2020 2020 6060 782e 6e61            ``x.na
-0001c8c0: 6e76 6172 2864 7479 7065 203d 206d 795f  nvar(dtype = my_
-0001c8d0: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
-0001c8e0: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
-0001c8f0: 7065 2878 2e6e 616e 7661 7228 2929 6060  pe(x.nanvar())``
-0001c900: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-0001c910: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-0001c920: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2073  -----..        s
-0001c930: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
-0001c940: 2020 2054 6865 2076 6172 6961 6e63 6520     The variance 
-0001c950: 6f66 2074 6865 2076 616c 7565 732e 0d0a  of the values...
-0001c960: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-0001c970: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-0001c980: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e75  ----..        nu
-0001c990: 6d70 792e 6e61 6e76 6172 0d0a 2020 2020  mpy.nanvar..    
-0001c9a0: 2020 2020 4661 7374 4172 7261 792e 7661      FastArray.va
-0001c9b0: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
-0001c9c0: 2076 6172 6961 6e63 6520 6f66 2060 4661   variance of `Fa
-0001c9d0: 7374 4172 7261 7960 2076 616c 7565 732e  stArray` values.
-0001c9e0: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-0001c9f0: 742e 6e61 6e76 6172 203a 2043 6f6d 7075  t.nanvar : Compu
-0001ca00: 7465 7320 7468 6520 7661 7269 616e 6365  tes the variance
-0001ca10: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
-0001ca20: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
-0001ca30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001ca40: 2020 2020 2020 2020 2020 2069 676e 6f72             ignor
-0001ca50: 696e 6720 4e61 4e73 2e0d 0a20 2020 2020  ing NaNs...     
-0001ca60: 2020 2047 726f 7570 4279 4f70 732e 6e61     GroupByOps.na
-0001ca70: 6e76 6172 203a 2043 6f6d 7075 7465 7320  nvar : Computes 
-0001ca80: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
-0001ca90: 6561 6368 2067 726f 7570 2c20 6967 6e6f  each group, igno
-0001caa0: 7269 6e67 204e 614e 732e 2055 7365 6420  ring NaNs. Used 
-0001cab0: 6279 0d0a 2020 2020 2020 2020 2020 2020  by..            
-0001cac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cad0: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
-0001cae0: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
-0001caf0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-0001cb00: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-0001cb10: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
-0001cb20: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
-0001cb30: 6179 2e6e 616e 7661 7260 2073 7065 6369  ay.nanvar` speci
-0001cb40: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001cb50: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
-0001cb60: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
-0001cb70: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
-0001cb80: 6d70 792e 6e61 6e76 6172 602c 2077 6865  mpy.nanvar`, whe
-0001cb90: 7265 2069 7420 7370 6563 6966 6965 7320  re it specifies 
-0001cba0: 7468 6520 6461 7461 2074 7970 6520 7573  the data type us
-0001cbb0: 6564 0d0a 2020 2020 2020 2020 746f 2063  ed..        to c
-0001cbc0: 6f6d 7075 7465 2074 6865 2076 6172 6961  ompute the varia
-0001cbd0: 6e63 652e 0d0a 0d0a 2020 2020 2020 2020  nce.....        
-0001cbe0: 2a2a 4e6f 7465 7320 6f6e 2055 7369 6e67  **Notes on Using
-0001cbf0: 204e 756d 5079 2050 6172 616d 6574 6572   NumPy Parameter
-0001cc00: 732a 2a0d 0a0d 0a20 2020 2020 2020 2055  s**....        U
-0001cc10: 7369 6e67 2061 6e79 206f 6620 7468 6520  sing any of the 
-0001cc20: 666f 6c6c 6f77 696e 6720 4e75 6d50 7920  following NumPy 
-0001cc30: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
-0001cc40: 6361 7573 6520 5269 7074 6162 6c65 2074  cause Riptable t
-0001cc50: 6f20 7377 6974 6368 2074 6f0d 0a20 2020  o switch to..   
-0001cc60: 2020 2020 2074 6865 204e 756d 5079 2069       the NumPy i
-0001cc70: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-0001cc80: 2074 6869 7320 6d65 7468 6f64 2028 606e   this method (`n
-0001cc90: 756d 7079 2e6e 616e 7661 7260 292e 2048  umpy.nanvar`). H
-0001cca0: 6f77 6576 6572 2c20 756e 7469 6c20 610d  owever, until a.
-0001ccb0: 0a20 2020 2020 2020 2072 6570 6f72 7465  .        reporte
-0001ccc0: 6420 6275 6720 6973 2066 6978 6564 2c20  d bug is fixed, 
-0001ccd0: 6966 2079 6f75 2061 6c73 6f20 696e 636c  if you also incl
-0001cce0: 7564 6520 7468 6520 6064 7479 7065 6020  ude the `dtype` 
-0001ccf0: 7061 7261 6d65 7465 7220 6974 2077 696c  parameter it wil
-0001cd00: 6c20 6265 0d0a 2020 2020 2020 2020 6170  l be..        ap
-0001cd10: 706c 6965 6420 746f 2074 6865 2072 6573  plied to the res
-0001cd20: 756c 742c 206e 6f74 2075 7365 6420 746f  ult, not used to
-0001cd30: 2063 6f6d 7075 7465 2074 6865 2076 6172   compute the var
-0001cd40: 6961 6e63 6520 6173 2069 7420 6973 2069  iance as it is i
-0001cd50: 6e0d 0a20 2020 2020 2020 2060 6e75 6d70  n..        `nump
-0001cd60: 792e 6e61 6e76 6172 602e 0d0a 0d0a 2020  y.nanvar`.....  
-0001cd70: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
-0001cd80: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
-0001cd90: 616e 7920 6f66 2074 6865 2066 6f6c 6c6f  any of the follo
-0001cda0: 7769 6e67 204e 756d 5079 2070 6172 616d  wing NumPy param
-0001cdb0: 6574 6572 7320 616e 6420 616c 736f 0d0a  eters and also..
-0001cdc0: 2020 2020 2020 2020 696e 636c 7564 6520          include 
-0001cdd0: 6120 6066 696c 7465 7260 206b 6579 776f  a `filter` keywo
-0001cde0: 7264 2061 7267 756d 656e 7420 2877 6869  rd argument (whi
-0001cdf0: 6368 2060 6e75 6d70 792e 6e61 6e76 6172  ch `numpy.nanvar
-0001ce00: 6020 646f 6573 206e 6f74 2061 6363 6570  ` does not accep
-0001ce10: 7429 2c0d 0a20 2020 2020 2020 2052 6970  t),..        Rip
-0001ce20: 7461 626c 6527 7320 696d 706c 656d 656e  table's implemen
-0001ce30: 7461 7469 6f6e 206f 6620 606e 616e 7661  tation of `nanva
-0001ce40: 7260 2077 696c 6c20 6265 2075 7365 6420  r` will be used 
-0001ce50: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
-0001ce60: 6172 6775 6d65 6e74 0d0a 2020 2020 2020  argument..      
-0001ce70: 2020 616e 6420 7468 6520 4e75 6d50 7920    and the NumPy 
-0001ce80: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
-0001ce90: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
-0001cea0: 2020 2020 2020 2061 7869 7320 3a20 7b69         axis : {i
-0001ceb0: 6e74 2c20 7475 706c 6520 6f66 2069 6e74  nt, tuple of int
-0001cec0: 2c20 4e6f 6e65 7d2c 206f 7074 696f 6e61  , None}, optiona
-0001ced0: 6c0d 0a20 2020 2020 2020 2020 2020 2041  l..            A
-0001cee0: 7869 7320 6f72 2061 7865 7320 616c 6f6e  xis or axes alon
-0001cef0: 6720 7768 6963 6820 7468 6520 7661 7269  g which the vari
-0001cf00: 616e 6365 2069 7320 636f 6d70 7574 6564  ance is computed
-0001cf10: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-0001cf20: 2074 6f0d 0a20 2020 2020 2020 2020 2020   to..           
-0001cf30: 2063 6f6d 7075 7465 2074 6865 2076 6172   compute the var
-0001cf40: 6961 6e63 6520 6f66 2074 6865 2066 6c61  iance of the fla
-0001cf50: 7474 656e 6564 2061 7272 6179 2e0d 0a0d  ttened array....
-0001cf60: 0a20 2020 2020 2020 206b 6565 7064 696d  .        keepdim
-0001cf70: 7320 3a20 626f 6f6c 2c20 6f70 7469 6f6e  s : bool, option
-0001cf80: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-0001cf90: 4966 2074 6869 7320 6973 2073 6574 2074  If this is set t
-0001cfa0: 6f20 5472 7565 2c20 7468 6520 6178 6573  o True, the axes
-0001cfb0: 2077 6869 6368 2061 7265 2072 6564 7563   which are reduc
-0001cfc0: 6564 2061 7265 206c 6566 7420 696e 2074  ed are left in t
-0001cfd0: 6865 2072 6573 756c 7420 6173 0d0a 2020  he result as..  
-0001cfe0: 2020 2020 2020 2020 2020 6469 6d65 6e73            dimens
-0001cff0: 696f 6e73 2077 6974 6820 7369 7a65 206f  ions with size o
-0001d000: 6e65 2e20 5769 7468 2074 6869 7320 6f70  ne. With this op
-0001d010: 7469 6f6e 2c20 7468 6520 7265 7375 6c74  tion, the result
-0001d020: 2077 696c 6c20 6272 6f61 6463 6173 740d   will broadcast.
-0001d030: 0a20 2020 2020 2020 2020 2020 2063 6f72  .            cor
-0001d040: 7265 6374 6c79 2061 6761 696e 7374 2074  rectly against t
-0001d050: 6865 206f 7269 6769 6e61 6c20 696e 7075  he original inpu
-0001d060: 7420 6172 7261 792e 0d0a 0d0a 2020 2020  t array.....    
-0001d070: 2020 2020 6464 6f66 203a 2069 6e74 2c20      ddof : int, 
-0001d080: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-0001d090: 2020 2020 2020 2244 656c 7461 2044 6567        "Delta Deg
-0001d0a0: 7265 6573 206f 6620 4672 6565 646f 6d22  rees of Freedom"
-0001d0b0: 3a20 7468 6520 6469 7669 736f 7220 7573  : the divisor us
-0001d0c0: 6564 2069 6e20 7468 6520 6361 6c63 756c  ed in the calcul
-0001d0d0: 6174 696f 6e20 6973 0d0a 2020 2020 2020  ation is..      
-0001d0e0: 2020 2020 2020 6060 4e20 2d20 6464 6f66        ``N - ddof
-0001d0f0: 6060 2c20 7768 6572 6520 6060 4e60 6020  ``, where ``N`` 
-0001d100: 7265 7072 6573 656e 7473 2074 6865 206e  represents the n
-0001d110: 756d 6265 7220 6f66 206e 6f6e 2d4e 614e  umber of non-NaN
-0001d120: 2065 6c65 6d65 6e74 732e 2042 790d 0a20   elements. By.. 
-0001d130: 2020 2020 2020 2020 2020 2064 6566 6175             defau
-0001d140: 6c74 2060 6464 6f66 6020 6973 207a 6572  lt `ddof` is zer
-0001d150: 6f20 666f 7220 7468 6520 4e75 6d50 7920  o for the NumPy 
-0001d160: 696d 706c 656d 656e 7461 7469 6f6e 2c20  implementation, 
-0001d170: 7665 7273 7573 206f 6e65 2066 6f72 2074  versus one for t
-0001d180: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
-0001d190: 5269 7074 6162 6c65 2069 6d70 6c65 6d65  Riptable impleme
-0001d1a0: 6e74 6174 696f 6e2e 0d0a 0d0a 2020 2020  ntation.....    
-0001d1b0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-0001d1c0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0001d1d0: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
-0001d1e0: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
-0001d1f0: 2032 2c20 332c 2072 742e 6e61 6e5d 290d   2, 3, rt.nan]).
-0001d200: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
-0001d210: 616e 7661 7228 290d 0a20 2020 2020 2020  anvar()..       
-0001d220: 2031 2e30 0d0a 0d0a 2020 2020 2020 2020   1.0....        
-0001d230: 5769 7468 2061 2060 6474 7970 6560 2073  With a `dtype` s
-0001d240: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
-0001d250: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001d260: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-0001d270: 2033 2c20 7274 2e6e 616e 5d29 0d0a 2020   3, rt.nan])..  
-0001d280: 2020 2020 2020 3e3e 3e20 612e 6e61 6e76        >>> a.nanv
-0001d290: 6172 2864 7479 7065 203d 2072 742e 696e  ar(dtype = rt.in
-0001d2a0: 7433 3229 0d0a 2020 2020 2020 2020 310d  t32)..        1.
-0001d2b0: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001d2c0: 6120 6669 6c74 6572 3a0d 0a0d 0a20 2020  a filter:....   
-0001d2d0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001d2e0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-0001d2f0: 2033 2c20 7274 2e6e 616e 5d29 0d0a 2020   3, rt.nan])..  
-0001d300: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
-0001d310: 2e46 6173 7441 7272 6179 285b 4661 6c73  .FastArray([Fals
-0001d320: 652c 2054 7275 652c 2054 7275 652c 2054  e, True, True, T
-0001d330: 7275 655d 290d 0a20 2020 2020 2020 203e  rue])..        >
-0001d340: 3e3e 2061 2e6e 616e 7661 7228 6669 6c74  >> a.nanvar(filt
-0001d350: 6572 203d 2062 290d 0a20 2020 2020 2020  er = b)..       
-0001d360: 2030 2e35 0d0a 2020 2020 2020 2020 2222   0.5..        ""
-0001d370: 220d 0a0d 0a20 2020 2020 2020 206b 7761  "....        kwa
-0001d380: 7267 7320 3d20 7365 6c66 2e5f 6661 5f6b  rgs = self._fa_k
-0001d390: 6579 776f 7264 5f77 7261 7070 6572 2866  eyword_wrapper(f
-0001d3a0: 696c 7465 723d 6669 6c74 6572 2c20 6474  ilter=filter, dt
-0001d3b0: 7970 653d 6474 7970 652c 2061 7869 733d  ype=dtype, axis=
-0001d3c0: 6178 6973 2c20 6b65 6570 6469 6d73 3d6b  axis, keepdims=k
-0001d3d0: 6565 7064 696d 732c 2064 646f 663d 6464  eepdims, ddof=dd
-0001d3e0: 6f66 2c20 2a2a 6b77 6172 6773 290d 0a0d  of, **kwargs)...
-0001d3f0: 0a20 2020 2020 2020 2069 6620 6669 6c74  .        if filt
-0001d400: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
-0001d410: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001d420: 7572 6e20 7365 6c66 2e5f 6661 5f66 696c  urn self._fa_fil
-0001d430: 7465 725f 7772 6170 7065 7228 5f66 6e61  ter_wrapper(_fna
-0001d440: 6e76 6172 2c20 6669 6c74 6572 3d66 696c  nvar, filter=fil
-0001d450: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
-0001d460: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
-0001d470: 7572 6e20 7365 6c66 2e5f 7265 6475 6365  urn self._reduce
-0001d480: 5f63 6865 636b 2852 4544 5543 455f 4655  _check(REDUCE_FU
-0001d490: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
-0001d4a0: 414e 5641 522c 206e 702e 6e61 6e76 6172  ANVAR, np.nanvar
-0001d4b0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0001d4c0: 2020 2064 6566 2073 7464 2873 656c 662c     def std(self,
-0001d4d0: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
-0001d4e0: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
-0001d4f0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-0001d500: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 202a  ne, ddof=None, *
-0001d510: 2a6b 7761 7267 7329 202d 3e20 6e70 2e6e  *kwargs) -> np.n
-0001d520: 756d 6265 723a 0d0a 2020 2020 2020 2020  umber:..        
-0001d530: 2222 220d 0a20 2020 2020 2020 2043 6f6d  """..        Com
-0001d540: 7075 7465 2074 6865 2073 7461 6e64 6172  pute the standar
-0001d550: 6420 6465 7669 6174 696f 6e20 6f66 2074  d deviation of t
-0001d560: 6865 2076 616c 7565 7320 696e 2074 6865  he values in the
-0001d570: 2066 6972 7374 2061 7267 756d 656e 742e   first argument.
-0001d580: 0d0a 0d0a 2020 2020 2020 2020 5269 7074  ....        Ript
-0001d590: 6162 6c65 2075 7365 7320 7468 6520 636f  able uses the co
-0001d5a0: 6e76 656e 7469 6f6e 2074 6861 7420 6060  nvention that ``
-0001d5b0: 6464 6f66 203d 2031 6060 2c20 6d65 616e  ddof = 1``, mean
-0001d5c0: 696e 6720 7468 6520 7374 616e 6461 7264  ing the standard
-0001d5d0: 2064 6576 6961 7469 6f6e 206f 660d 0a20   deviation of.. 
-0001d5e0: 2020 2020 2020 2060 605b 785f 312c 202e         ``[x_1, .
-0001d5f0: 2e2e 2c20 785f 6e5d 6060 2069 7320 6465  .., x_n]`` is de
-0001d600: 6669 6e65 6420 6279 2060 6073 7464 203d  fined by ``std =
-0001d610: 2031 2f28 6e20 2d20 3129 202a 2073 756d   1/(n - 1) * sum
-0001d620: 2878 5f69 202d 206d 6561 6e20 292a 2a32  (x_i - mean )**2
-0001d630: 6060 2028 6e6f 7465 0d0a 2020 2020 2020  `` (note..      
-0001d640: 2020 7468 6520 6060 6e20 2d20 3160 6020    the ``n - 1`` 
-0001d650: 696e 7374 6561 6420 6f66 2060 606e 6060  instead of ``n``
-0001d660: 292e 2054 6869 7320 6469 6666 6572 7320  ). This differs 
-0001d670: 6672 6f6d 204e 756d 5079 2c20 7768 6963  from NumPy, whic
-0001d680: 6820 7573 6573 2060 6064 646f 6620 3d20  h uses ``ddof = 
-0001d690: 3060 6020 6279 0d0a 2020 2020 2020 2020  0`` by..        
-0001d6a0: 6465 6661 756c 742e 0d0a 0d0a 2020 2020  default.....    
-0001d6b0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-0001d6c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001d6d0: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
-0001d6e0: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
-0001d6f0: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
-0001d700: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
-0001d710: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
-0001d720: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
-0001d730: 6520 696e 2074 6865 2073 7461 6e64 6172  e in the standar
-0001d740: 6420 6465 7669 6174 696f 6e20 6361 6c63  d deviation calc
-0001d750: 756c 6174 696f 6e2e 2049 660d 0a20 2020  ulation. If..   
-0001d760: 2020 2020 2020 2020 2074 6865 2066 696c           the fil
-0001d770: 7465 7220 6973 2075 6e69 666f 726d 6c79  ter is uniformly
-0001d780: 2060 6046 616c 7365 6060 2c20 6073 7464   ``False``, `std
-0001d790: 6020 7265 7475 726e 7320 6120 605a 6572  ` returns a `Zer
-0001d7a0: 6f44 6976 6973 696f 6e45 7272 6f72 602e  oDivisionError`.
-0001d7b0: 0d0a 0d0a 2020 2020 2020 2020 6474 7970  ....        dtyp
-0001d7c0: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
-0001d7d0: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
-0001d7e0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
-0001d7f0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
-0001d800: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
-0001d810: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
-0001d820: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
-0001d830: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
-0001d840: 2e73 7464 2864 7479 7065 203d 206d 795f  .std(dtype = my_
-0001d850: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
-0001d860: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
-0001d870: 7065 2878 2e73 7464 2829 2960 602e 0d0a  pe(x.std())``...
-0001d880: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001d890: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001d8a0: 2d2d 0d0a 2020 2020 2020 2020 7363 616c  --..        scal
-0001d8b0: 6172 0d0a 2020 2020 2020 2020 2020 2020  ar..            
-0001d8c0: 5468 6520 7374 616e 6461 7264 2064 6576  The standard dev
-0001d8d0: 6961 7469 6f6e 206f 6620 7468 6520 7661  iation of the va
-0001d8e0: 6c75 6573 2e0d 0a0d 0a20 2020 2020 2020  lues.....       
-0001d8f0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-0001d900: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-0001d910: 2020 2020 206e 756d 7079 2e73 7464 0d0a       numpy.std..
-0001d920: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0001d930: 792e 6e61 6e73 7464 203a 2043 6f6d 7075  y.nanstd : Compu
-0001d940: 7465 7320 7468 6520 7374 616e 6461 7264  tes the standard
-0001d950: 2064 6576 6961 7469 6f6e 206f 6620 6046   deviation of `F
-0001d960: 6173 7441 7272 6179 6020 7661 6c75 6573  astArray` values
-0001d970: 2c20 6967 6e6f 7269 6e67 0d0a 2020 2020  , ignoring..    
-0001d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d990: 2020 2020 2020 204e 614e 732e 0d0a 2020         NaNs...  
-0001d9a0: 2020 2020 2020 4461 7461 7365 742e 7374        Dataset.st
-0001d9b0: 6420 3a20 436f 6d70 7574 6573 2074 6865  d : Computes the
-0001d9c0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
-0001d9d0: 696f 6e20 6f66 206e 756d 6572 6963 616c  ion of numerical
-0001d9e0: 2060 4461 7461 7365 7460 2063 6f6c 756d   `Dataset` colum
-0001d9f0: 6e73 2e0d 0a20 2020 2020 2020 2047 726f  ns...        Gro
-0001da00: 7570 4279 4f70 732e 7374 6420 3a20 436f  upByOps.std : Co
-0001da10: 6d70 7574 6573 2074 6865 2073 7461 6e64  mputes the stand
-0001da20: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
-0001da30: 2065 6163 6820 6772 6f75 702e 2055 7365   each group. Use
-0001da40: 6420 6279 0d0a 2020 2020 2020 2020 2020  d by..          
-0001da50: 2020 2020 2020 2020 2020 2020 2020 2060                 `
-0001da60: 4361 7465 676f 7269 6361 6c60 206f 626a  Categorical` obj
-0001da70: 6563 7473 2e0d 0a0d 0a20 2020 2020 2020  ects.....       
-0001da80: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
-0001da90: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
-0001daa0: 6865 2060 6474 7970 6560 206b 6579 776f  he `dtype` keywo
-0001dab0: 7264 2066 6f72 2060 4661 7374 4172 7261  rd for `FastArra
-0001dac0: 792e 7374 6460 2073 7065 6369 6669 6573  y.std` specifies
-0001dad0: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
-0001dae0: 6620 7468 6520 7265 7375 6c74 2e0d 0a20  f the result... 
-0001daf0: 2020 2020 2020 2054 6869 7320 6469 6666         This diff
-0001db00: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
-0001db10: 7374 6460 2c20 7768 6572 6520 6974 2073  std`, where it s
-0001db20: 7065 6369 6669 6573 2074 6865 2064 6174  pecifies the dat
-0001db30: 6120 7479 7065 2075 7365 6420 746f 2063  a type used to c
-0001db40: 6f6d 7075 7465 0d0a 2020 2020 2020 2020  ompute..        
-0001db50: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
-0001db60: 6961 7469 6f6e 2e0d 0a0d 0a20 2020 2020  iation.....     
-0001db70: 2020 202a 2a4e 6f74 6573 206f 6e20 5573     **Notes on Us
-0001db80: 696e 6720 4e75 6d50 7920 5061 7261 6d65  ing NumPy Parame
-0001db90: 7465 7273 2a2a 0d0a 0d0a 2020 2020 2020  ters**....      
-0001dba0: 2020 5573 696e 6720 616e 7920 6f66 2074    Using any of t
-0001dbb0: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
-0001dbc0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
-0001dbd0: 6c6c 2063 6175 7365 2052 6970 7461 626c  ll cause Riptabl
-0001dbe0: 6520 746f 2073 7769 7463 6820 746f 0d0a  e to switch to..
-0001dbf0: 2020 2020 2020 2020 7468 6520 4e75 6d50          the NumP
-0001dc00: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
-0001dc10: 206f 6620 7468 6973 206d 6574 686f 6420   of this method 
-0001dc20: 2860 6e75 6d70 792e 7374 6460 292e 2048  (`numpy.std`). H
-0001dc30: 6f77 6576 6572 2c20 756e 7469 6c20 610d  owever, until a.
-0001dc40: 0a20 2020 2020 2020 2072 6570 6f72 7465  .        reporte
-0001dc50: 6420 6275 6720 6973 2066 6978 6564 2c20  d bug is fixed, 
-0001dc60: 6966 2079 6f75 2061 6c73 6f20 696e 636c  if you also incl
-0001dc70: 7564 6520 7468 6520 6064 7479 7065 6020  ude the `dtype` 
-0001dc80: 7061 7261 6d65 7465 7220 6974 2077 696c  parameter it wil
-0001dc90: 6c20 6265 0d0a 2020 2020 2020 2020 6170  l be..        ap
-0001dca0: 706c 6965 6420 746f 2074 6865 2072 6573  plied to the res
-0001dcb0: 756c 742c 206e 6f74 2075 7365 6420 746f  ult, not used to
-0001dcc0: 2063 6f6d 7075 7465 2074 6865 2076 6172   compute the var
-0001dcd0: 6961 6e63 6520 6173 2069 7420 6973 2069  iance as it is i
-0001dce0: 6e0d 0a20 2020 2020 2020 2060 6e75 6d70  n..        `nump
-0001dcf0: 792e 7374 6460 2e0d 0a0d 0a20 2020 2020  y.std`.....     
-0001dd00: 2020 2041 6c73 6f20 6e6f 7465 2074 6861     Also note tha
-0001dd10: 7420 6966 2079 6f75 2075 7365 2061 6e79  t if you use any
-0001dd20: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
-0001dd30: 6720 4e75 6d50 7920 7061 7261 6d65 7465  g NumPy paramete
-0001dd40: 7273 2061 6e64 2061 6c73 6f0d 0a20 2020  rs and also..   
-0001dd50: 2020 2020 2069 6e63 6c75 6465 2061 2060       include a `
-0001dd60: 6669 6c74 6572 6020 6b65 7977 6f72 6420  filter` keyword 
-0001dd70: 6172 6775 6d65 6e74 2028 7768 6963 6820  argument (which 
-0001dd80: 606e 756d 7079 2e73 7464 6020 646f 6573  `numpy.std` does
-0001dd90: 206e 6f74 2061 6363 6570 7429 2c0d 0a20   not accept),.. 
-0001dda0: 2020 2020 2020 2052 6970 7461 626c 6527         Riptable'
-0001ddb0: 7320 696d 706c 656d 656e 7461 7469 6f6e  s implementation
-0001ddc0: 206f 6620 6073 7464 6020 7769 6c6c 2062   of `std` will b
-0001ddd0: 6520 7573 6564 2077 6974 6820 7468 6520  e used with the 
-0001dde0: 6669 6c74 6572 2061 7267 756d 656e 740d  filter argument.
-0001ddf0: 0a20 2020 2020 2020 2061 6e64 2074 6865  .        and the
-0001de00: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
-0001de10: 7320 7769 6c6c 2062 6520 6967 6e6f 7265  s will be ignore
-0001de20: 642e 0d0a 0d0a 2020 2020 2020 2020 6178  d.....        ax
-0001de30: 6973 203a 204e 6f6e 6520 6f72 2069 6e74  is : None or int
-0001de40: 206f 7220 7475 706c 6520 6f66 2069 6e74   or tuple of int
-0001de50: 732c 206f 7074 696f 6e61 6c0d 0a20 2020  s, optional..   
-0001de60: 2020 2020 2020 2020 2041 7869 7320 6f72           Axis or
-0001de70: 2061 7865 7320 616c 6f6e 6720 7768 6963   axes along whic
-0001de80: 6820 7468 6520 7374 616e 6461 7264 2064  h the standard d
-0001de90: 6576 6961 7469 6f6e 2069 7320 636f 6d70  eviation is comp
-0001dea0: 7574 6564 2e20 5468 650d 0a20 2020 2020  uted. The..     
-0001deb0: 2020 2020 2020 2064 6566 6175 6c74 2069         default i
-0001dec0: 7320 746f 2063 6f6d 7075 7465 2074 6865  s to compute the
-0001ded0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
-0001dee0: 696f 6e20 6f66 2074 6865 2066 6c61 7474  ion of the flatt
-0001def0: 656e 6564 2061 7272 6179 2e0d 0a0d 0a20  ened array..... 
-0001df00: 2020 2020 2020 2020 2020 202e 2e20 7665             .. ve
-0001df10: 7273 696f 6e61 6464 6564 3a3a 2031 2e37  rsionadded:: 1.7
-0001df20: 2e30 0d0a 0d0a 2020 2020 2020 2020 2020  .0....          
-0001df30: 2020 4966 2074 6869 7320 6973 2061 2074    If this is a t
-0001df40: 7570 6c65 206f 6620 696e 7473 2c20 6120  uple of ints, a 
-0001df50: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
-0001df60: 6f6e 2069 7320 7065 7266 6f72 6d65 6420  on is performed 
-0001df70: 6f76 6572 206d 756c 7469 706c 650d 0a20  over multiple.. 
-0001df80: 2020 2020 2020 2020 2020 2061 7865 732c             axes,
-0001df90: 2069 6e73 7465 6164 206f 6620 6120 7369   instead of a si
-0001dfa0: 6e67 6c65 2061 7869 7320 6f72 2061 6c6c  ngle axis or all
-0001dfb0: 2074 6865 2061 7865 7320 6173 2062 6566   the axes as bef
-0001dfc0: 6f72 652e 0d0a 0d0a 2020 2020 2020 2020  ore.....        
-0001dfd0: 6b65 6570 6469 6d73 203a 2062 6f6f 6c2c  keepdims : bool,
-0001dfe0: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001dff0: 2020 2020 2020 2049 6620 7468 6973 2069         If this i
-0001e000: 7320 7365 7420 746f 2054 7275 652c 2074  s set to True, t
-0001e010: 6865 2061 7865 7320 7768 6963 6820 6172  he axes which ar
-0001e020: 6520 7265 6475 6365 6420 6172 6520 6c65  e reduced are le
-0001e030: 6674 2069 6e20 7468 6520 7265 7375 6c74  ft in the result
-0001e040: 2061 730d 0a20 2020 2020 2020 2020 2020   as..           
-0001e050: 2064 696d 656e 7369 6f6e 7320 7769 7468   dimensions with
-0001e060: 2073 697a 6520 6f6e 652e 2057 6974 6820   size one. With 
-0001e070: 7468 6973 206f 7074 696f 6e2c 2074 6865  this option, the
-0001e080: 2072 6573 756c 7420 7769 6c6c 2062 726f   result will bro
-0001e090: 6164 6361 7374 0d0a 2020 2020 2020 2020  adcast..        
-0001e0a0: 2020 2020 636f 7272 6563 746c 7920 6167      correctly ag
-0001e0b0: 6169 6e73 7420 7468 6520 696e 7075 7420  ainst the input 
-0001e0c0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
-0001e0d0: 2020 2020 2020 4966 2074 6865 2064 6566        If the def
-0001e0e0: 6175 6c74 2076 616c 7565 2069 7320 7061  ault value is pa
-0001e0f0: 7373 6564 2c20 7468 656e 2060 6b65 6570  ssed, then `keep
-0001e100: 6469 6d73 6020 7769 6c6c 206e 6f74 2062  dims` will not b
-0001e110: 6520 7061 7373 6564 2074 6872 6f75 6768  e passed through
-0001e120: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-0001e130: 2074 6865 2060 7374 6460 206d 6574 686f   the `std` metho
-0001e140: 6420 6f66 2073 7562 2d63 6c61 7373 6573  d of sub-classes
-0001e150: 206f 6620 606e 6461 7272 6179 602c 2068   of `ndarray`, h
-0001e160: 6f77 6576 6572 2061 6e79 206e 6f6e 2d64  owever any non-d
-0001e170: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
-0001e180: 2020 2020 7661 6c75 6520 7769 6c6c 2062      value will b
-0001e190: 652e 2049 6620 7468 6520 7375 622d 636c  e. If the sub-cl
-0001e1a0: 6173 7327 206d 6574 686f 6420 646f 6573  ass' method does
-0001e1b0: 206e 6f74 2069 6d70 6c65 6d65 6e74 2060   not implement `
-0001e1c0: 6b65 6570 6469 6d73 602c 0d0a 2020 2020  keepdims`,..    
-0001e1d0: 2020 2020 2020 2020 616e 7920 6578 6365          any exce
-0001e1e0: 7074 696f 6e73 2077 696c 6c20 6265 2072  ptions will be r
-0001e1f0: 6169 7365 642e 0d0a 0d0a 2020 2020 2020  aised.....      
-0001e200: 2020 6464 6f66 203a 2069 6e74 2c20 6f70    ddof : int, op
-0001e210: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-0001e220: 2020 2020 2244 656c 7461 2044 6567 7265      "Delta Degre
-0001e230: 6573 206f 6620 4672 6565 646f 6d22 3a20  es of Freedom": 
-0001e240: 7468 6520 6469 7669 736f 7220 7573 6564  the divisor used
-0001e250: 2069 6e20 7468 6520 6361 6c63 756c 6174   in the calculat
-0001e260: 696f 6e20 6973 0d0a 2020 2020 2020 2020  ion is..        
-0001e270: 2020 2020 6060 4e20 2d20 6464 6f66 6060      ``N - ddof``
-0001e280: 2c20 7768 6572 6520 6060 4e60 6020 7265  , where ``N`` re
-0001e290: 7072 6573 656e 7473 2074 6865 206e 756d  presents the num
-0001e2a0: 6265 7220 6f66 2065 6c65 6d65 6e74 732e  ber of elements.
-0001e2b0: 2042 7920 6465 6661 756c 740d 0a20 2020   By default..   
-0001e2c0: 2020 2020 2020 2020 2060 6464 6f66 6020           `ddof` 
-0001e2d0: 6973 207a 6572 6f20 666f 7220 7468 6520  is zero for the 
-0001e2e0: 4e75 6d50 7920 696d 706c 656d 656e 7461  NumPy implementa
-0001e2f0: 7469 6f6e 2c20 7665 7273 7573 206f 6e65  tion, versus one
-0001e300: 2066 6f72 2074 6865 0d0a 2020 2020 2020   for the..      
-0001e310: 2020 2020 2020 5269 7074 6162 6c65 2069        Riptable i
-0001e320: 6d70 6c65 6d65 6e74 6174 696f 6e2e 0d0a  mplementation...
-0001e330: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-0001e340: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-0001e350: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-0001e360: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-0001e370: 6179 285b 312c 2032 2c20 335d 290d 0a20  ay([1, 2, 3]).. 
-0001e380: 2020 2020 2020 203e 3e3e 2061 2e73 7464         >>> a.std
-0001e390: 2829 0d0a 2020 2020 2020 2020 312e 300d  ()..        1.0.
-0001e3a0: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001e3b0: 6120 6064 7479 7065 6020 7370 6563 6966  a `dtype` specif
-0001e3c0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
-0001e3d0: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-0001e3e0: 7272 6179 285b 312c 2032 2c20 335d 290d  rray([1, 2, 3]).
-0001e3f0: 0a20 2020 2020 2020 203e 3e3e 2061 2e73  .        >>> a.s
-0001e400: 7464 2864 7479 7065 203d 2072 742e 696e  td(dtype = rt.in
-0001e410: 7433 3229 0d0a 2020 2020 2020 2020 310d  t32)..        1.
-0001e420: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001e430: 6120 6669 6c74 6572 3a0d 0a0d 0a20 2020  a filter:....   
-0001e440: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001e450: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-0001e460: 2033 5d29 0d0a 2020 2020 2020 2020 3e3e   3])..        >>
-0001e470: 3e20 6220 3d20 7274 2e46 4128 5b46 616c  > b = rt.FA([Fal
-0001e480: 7365 2c20 5472 7565 2c20 5472 7565 5d29  se, True, True])
-0001e490: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-0001e4a0: 7374 6428 6669 6c74 6572 203d 2062 290d  std(filter = b).
-0001e4b0: 0a20 2020 2020 2020 2030 2e37 3037 3130  .        0.70710
-0001e4c0: 3637 3831 3138 3635 3437 360d 0a20 2020  67811865476..   
-0001e4d0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
-0001e4e0: 2020 2020 6b77 6172 6773 203d 2073 656c      kwargs = sel
-0001e4f0: 662e 5f66 615f 6b65 7977 6f72 645f 7772  f._fa_keyword_wr
-0001e500: 6170 7065 7228 6669 6c74 6572 3d66 696c  apper(filter=fil
-0001e510: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
-0001e520: 2c20 6178 6973 3d61 7869 732c 206b 6565  , axis=axis, kee
-0001e530: 7064 696d 733d 6b65 6570 6469 6d73 2c20  pdims=keepdims, 
-0001e540: 6464 6f66 3d64 646f 662c 202a 2a6b 7761  ddof=ddof, **kwa
-0001e550: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
-0001e560: 6966 2066 696c 7465 7220 6973 206e 6f74  if filter is not
-0001e570: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001e580: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0001e590: 5f66 615f 6669 6c74 6572 5f77 7261 7070  _fa_filter_wrapp
-0001e5a0: 6572 285f 6673 7464 2c20 6669 6c74 6572  er(_fstd, filter
-0001e5b0: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
-0001e5c0: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
-0001e5d0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
-0001e5e0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
-0001e5f0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-0001e600: 4345 5f53 5444 2c20 6e70 2e73 7464 2c20  CE_STD, np.std, 
-0001e610: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-0001e620: 2064 6566 206e 616e 7374 6428 7365 6c66   def nanstd(self
-0001e630: 2c20 6669 6c74 6572 3d4e 6f6e 652c 2064  , filter=None, d
-0001e640: 7479 7065 3d4e 6f6e 652c 2061 7869 733d  type=None, axis=
-0001e650: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
-0001e660: 6f6e 652c 2064 646f 663d 4e6f 6e65 2c20  one, ddof=None, 
-0001e670: 2a2a 6b77 6172 6773 2920 2d3e 206e 702e  **kwargs) -> np.
-0001e680: 6e75 6d62 6572 3a0d 0a20 2020 2020 2020  number:..       
-0001e690: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
-0001e6a0: 6d70 7574 6520 7468 6520 7374 616e 6461  mpute the standa
-0001e6b0: 7264 2064 6576 6961 7469 6f6e 206f 6620  rd deviation of 
-0001e6c0: 7468 6520 7661 6c75 6573 2069 6e20 7468  the values in th
-0001e6d0: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
-0001e6e0: 2c20 6967 6e6f 7269 6e67 204e 614e 732e  , ignoring NaNs.
-0001e6f0: 0d0a 0d0a 2020 2020 2020 2020 4966 2061  ....        If a
-0001e700: 6c6c 2076 616c 7565 7320 696e 2074 6865  ll values in the
-0001e710: 2066 6972 7374 2061 7267 756d 656e 7420   first argument 
-0001e720: 6172 6520 4e61 4e73 2c20 6060 4e61 4e60  are NaNs, ``NaN`
-0001e730: 6020 6973 2072 6574 7572 6e65 642e 0d0a  ` is returned...
-0001e740: 0d0a 2020 2020 2020 2020 5269 7074 6162  ..        Riptab
-0001e750: 6c65 2075 7365 7320 7468 6520 636f 6e76  le uses the conv
-0001e760: 656e 7469 6f6e 2074 6861 7420 6060 6464  ention that ``dd
-0001e770: 6f66 203d 2031 6060 2c20 6d65 616e 696e  of = 1``, meanin
-0001e780: 6720 7468 6520 7374 616e 6461 7264 2064  g the standard d
-0001e790: 6576 6961 7469 6f6e 206f 660d 0a20 2020  eviation of..   
-0001e7a0: 2020 2020 2060 605b 785f 312c 202e 2e2e       ``[x_1, ...
-0001e7b0: 2c20 785f 6e5d 6060 2069 7320 6465 6669  , x_n]`` is defi
-0001e7c0: 6e65 6420 6279 2060 6073 7464 203d 2031  ned by ``std = 1
-0001e7d0: 2f28 6e20 2d20 3129 202a 2073 756d 2878  /(n - 1) * sum(x
-0001e7e0: 5f69 202d 206d 6561 6e20 292a 2a32 6060  _i - mean )**2``
-0001e7f0: 2028 6e6f 7465 0d0a 2020 2020 2020 2020   (note..        
-0001e800: 7468 6520 6060 6e20 2d20 3160 6020 696e  the ``n - 1`` in
-0001e810: 7374 6561 6420 6f66 2060 606e 6060 292e  stead of ``n``).
-0001e820: 2054 6869 7320 6469 6666 6572 7320 6672   This differs fr
-0001e830: 6f6d 204e 756d 5079 2c20 7768 6963 6820  om NumPy, which 
-0001e840: 7573 6573 2060 6064 646f 6620 3d20 3060  uses ``ddof = 0`
-0001e850: 6020 6279 0d0a 2020 2020 2020 2020 6465  ` by..        de
-0001e860: 6661 756c 742e 0d0a 0d0a 2020 2020 2020  fault.....      
-0001e870: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-0001e880: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0001e890: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
-0001e8a0: 203a 2061 7272 6179 206f 6620 626f 6f6c   : array of bool
-0001e8b0: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-0001e8c0: 2020 2020 2020 2020 2020 2020 5370 6563              Spec
-0001e8d0: 6966 6965 7320 7768 6963 6820 656c 656d  ifies which elem
-0001e8e0: 656e 7473 2074 6f20 696e 636c 7564 6520  ents to include 
-0001e8f0: 696e 2074 6865 2073 7461 6e64 6172 6420  in the standard 
-0001e900: 6465 7669 6174 696f 6e20 6361 6c63 756c  deviation calcul
-0001e910: 6174 696f 6e2e 2049 660d 0a20 2020 2020  ation. If..     
-0001e920: 2020 2020 2020 2074 6865 2066 696c 7465         the filte
-0001e930: 7220 6973 2075 6e69 666f 726d 6c79 2060  r is uniformly `
-0001e940: 6046 616c 7365 6060 2c20 606e 616e 7374  `False``, `nanst
-0001e950: 6460 2072 6574 7572 6e73 2061 2060 5a65  d` returns a `Ze
-0001e960: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
-0001e970: 2e0d 0a0d 0a20 2020 2020 2020 2064 7479  .....        dty
-0001e980: 7065 203a 2072 742e 6474 7970 6520 6f72  pe : rt.dtype or
-0001e990: 206e 756d 7079 2e64 7479 7065 2c20 6465   numpy.dtype, de
-0001e9a0: 6661 756c 7420 666c 6f61 7436 340d 0a20  fault float64.. 
-0001e9b0: 2020 2020 2020 2020 2020 2054 6865 2064             The d
-0001e9c0: 6174 6120 7479 7065 206f 6620 7468 6520  ata type of the 
-0001e9d0: 7265 7375 6c74 2e20 466f 7220 6120 6046  result. For a `F
-0001e9e0: 6173 7441 7272 6179 6020 6060 7860 602c  astArray` ``x``,
-0001e9f0: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
-0001ea00: 782e 6e61 6e73 7464 2864 7479 7065 203d  x.nanstd(dtype =
-0001ea10: 206d 795f 7479 7065 2960 6020 6973 2065   my_type)`` is e
-0001ea20: 7175 6976 616c 656e 7420 746f 2060 606d  quivalent to ``m
-0001ea30: 795f 7479 7065 2878 2e6e 616e 7374 6428  y_type(x.nanstd(
-0001ea40: 2929 6060 2e0d 0a0d 0a20 2020 2020 2020  ))``.....       
-0001ea50: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-0001ea60: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-0001ea70: 2020 2073 6361 6c61 720d 0a20 2020 2020     scalar..     
-0001ea80: 2020 2020 2020 2054 6865 2073 7461 6e64         The stand
-0001ea90: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
-0001eaa0: 2074 6865 2076 616c 7565 732e 0d0a 0d0a   the values.....
-0001eab0: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-0001eac0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001ead0: 2d2d 0d0a 2020 2020 2020 2020 6e75 6d70  --..        nump
-0001eae0: 792e 6e61 6e73 7464 0d0a 2020 2020 2020  y.nanstd..      
-0001eaf0: 2020 4661 7374 4172 7261 792e 7374 6420    FastArray.std 
-0001eb00: 3a20 436f 6d70 7574 6573 2074 6865 2073  : Computes the s
-0001eb10: 7461 6e64 6172 6420 6465 7669 6174 696f  tandard deviatio
-0001eb20: 6e20 6f66 2060 4661 7374 4172 7261 7960  n of `FastArray`
-0001eb30: 2076 616c 7565 732e 0d0a 2020 2020 2020   values...      
-0001eb40: 2020 4461 7461 7365 742e 6e61 6e73 7464    Dataset.nanstd
-0001eb50: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
-0001eb60: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
-0001eb70: 6f6e 206f 6620 6e75 6d65 7269 6361 6c20  on of numerical 
-0001eb80: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
-0001eb90: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0001eba0: 2020 2020 2020 2020 2020 2020 2069 676e               ign
-0001ebb0: 6f72 696e 6720 4e61 4e73 2e0d 0a20 2020  oring NaNs...   
-0001ebc0: 2020 2020 2047 726f 7570 4279 4f70 732e       GroupByOps.
-0001ebd0: 6e61 6e73 7464 203a 2043 6f6d 7075 7465  nanstd : Compute
-0001ebe0: 7320 7468 6520 7374 616e 6461 7264 2064  s the standard d
-0001ebf0: 6576 6961 7469 6f6e 206f 6620 6561 6368  eviation of each
-0001ec00: 2067 726f 7570 2c20 6967 6e6f 7269 6e67   group, ignoring
-0001ec10: 204e 614e 732e 0d0a 2020 2020 2020 2020   NaNs...        
-0001ec20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ec30: 2020 2020 5573 6564 2062 7920 6043 6174      Used by `Cat
-0001ec40: 6567 6f72 6963 616c 6020 6f62 6a65 6374  egorical` object
-0001ec50: 732e 0d0a 0d0a 2020 2020 2020 2020 4e6f  s.....        No
-0001ec60: 7465 730d 0a20 2020 2020 2020 202d 2d2d  tes..        ---
-0001ec70: 2d2d 0d0a 2020 2020 2020 2020 5468 6520  --..        The 
-0001ec80: 6064 7479 7065 6020 6b65 7977 6f72 6420  `dtype` keyword 
-0001ec90: 666f 7220 6046 6173 7441 7272 6179 2e6e  for `FastArray.n
-0001eca0: 616e 7374 6460 2073 7065 6369 6669 6573  anstd` specifies
-0001ecb0: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
-0001ecc0: 6620 7468 650d 0a20 2020 2020 2020 2072  f the..        r
-0001ecd0: 6573 756c 742e 2054 6869 7320 6469 6666  esult. This diff
-0001ece0: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
-0001ecf0: 6e61 6e73 7464 602c 2077 6865 7265 2069  nanstd`, where i
-0001ed00: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
-0001ed10: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
-0001ed20: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
-0001ed30: 7465 2074 6865 2073 7461 6e64 6172 6420  te the standard 
-0001ed40: 6465 7669 6174 696f 6e2e 0d0a 0d0a 2020  deviation.....  
-0001ed50: 2020 2020 2020 2a2a 4e6f 7465 7320 6f6e        **Notes on
-0001ed60: 2055 7369 6e67 204e 756d 5079 2050 6172   Using NumPy Par
-0001ed70: 616d 6574 6572 732a 2a0d 0a0d 0a20 2020  ameters**....   
-0001ed80: 2020 2020 2055 7369 6e67 2061 6e79 206f       Using any o
-0001ed90: 6620 7468 6520 666f 6c6c 6f77 696e 6720  f the following 
-0001eda0: 4e75 6d50 7920 7061 7261 6d65 7465 7273  NumPy parameters
-0001edb0: 2077 696c 6c20 6361 7573 6520 5269 7074   will cause Ript
-0001edc0: 6162 6c65 2074 6f20 7377 6974 6368 2074  able to switch t
-0001edd0: 6f0d 0a20 2020 2020 2020 2074 6865 204e  o..        the N
-0001ede0: 756d 5079 2069 6d70 6c65 6d65 6e74 6174  umPy implementat
-0001edf0: 696f 6e20 6f66 2074 6869 7320 6d65 7468  ion of this meth
-0001ee00: 6f64 2028 606e 756d 7079 2e6e 616e 7374  od (`numpy.nanst
-0001ee10: 6460 292e 2048 6f77 6576 6572 2c20 756e  d`). However, un
-0001ee20: 7469 6c20 610d 0a20 2020 2020 2020 2072  til a..        r
-0001ee30: 6570 6f72 7465 6420 6275 6720 6973 2066  eported bug is f
-0001ee40: 6978 6564 2c20 6966 2079 6f75 2061 6c73  ixed, if you als
-0001ee50: 6f20 696e 636c 7564 6520 7468 6520 6064  o include the `d
-0001ee60: 7479 7065 6020 7061 7261 6d65 7465 7220  type` parameter 
-0001ee70: 6974 2077 696c 6c20 6265 0d0a 2020 2020  it will be..    
-0001ee80: 2020 2020 6170 706c 6965 6420 746f 2074      applied to t
-0001ee90: 6865 2072 6573 756c 742c 206e 6f74 2075  he result, not u
-0001eea0: 7365 6420 746f 2063 6f6d 7075 7465 2074  sed to compute t
-0001eeb0: 6865 2076 6172 6961 6e63 6520 6173 2069  he variance as i
-0001eec0: 7420 6973 2069 6e0d 0a20 2020 2020 2020  t is in..       
-0001eed0: 2060 6e75 6d70 792e 6e61 6e73 7464 602e   `numpy.nanstd`.
-0001eee0: 0d0a 0d0a 2020 2020 2020 2020 416c 736f  ....        Also
-0001eef0: 206e 6f74 6520 7468 6174 2069 6620 796f   note that if yo
-0001ef00: 7520 7573 6520 616e 7920 6f66 2074 6865  u use any of the
-0001ef10: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
-0001ef20: 2070 6172 616d 6574 6572 7320 616e 6420   parameters and 
-0001ef30: 616c 736f 0d0a 2020 2020 2020 2020 696e  also..        in
-0001ef40: 636c 7564 6520 6120 6066 696c 7465 7260  clude a `filter`
-0001ef50: 206b 6579 776f 7264 2061 7267 756d 656e   keyword argumen
-0001ef60: 7420 2877 6869 6368 2060 6e75 6d70 792e  t (which `numpy.
-0001ef70: 6e61 6e73 7464 6020 646f 6573 206e 6f74  nanstd` does not
-0001ef80: 2061 6363 6570 7429 2c0d 0a20 2020 2020   accept),..     
-0001ef90: 2020 2052 6970 7461 626c 6527 7320 696d     Riptable's im
-0001efa0: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-0001efb0: 606e 616e 7374 6460 2077 696c 6c20 6265  `nanstd` will be
-0001efc0: 2075 7365 6420 7769 7468 2074 6865 2066   used with the f
-0001efd0: 696c 7465 7220 6172 6775 6d65 6e74 0d0a  ilter argument..
-0001efe0: 2020 2020 2020 2020 616e 6420 7468 6520          and the 
-0001eff0: 4e75 6d50 7920 7061 7261 6d65 7465 7273  NumPy parameters
-0001f000: 2077 696c 6c20 6265 2069 676e 6f72 6564   will be ignored
-0001f010: 2e0d 0a0d 0a20 2020 2020 2020 2061 7869  .....        axi
-0001f020: 7320 3a20 7b69 6e74 2c20 7475 706c 6520  s : {int, tuple 
-0001f030: 6f66 2069 6e74 2c20 4e6f 6e65 7d2c 206f  of int, None}, o
-0001f040: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-0001f050: 2020 2020 2041 7869 7320 6f72 2061 7865       Axis or axe
-0001f060: 7320 616c 6f6e 6720 7768 6963 6820 7468  s along which th
-0001f070: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-0001f080: 7469 6f6e 2069 7320 636f 6d70 7574 6564  tion is computed
-0001f090: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-0001f0a0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-0001f0b0: 2063 6f6d 7075 7465 2074 6865 2073 7461   compute the sta
-0001f0c0: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
-0001f0d0: 6f66 2074 6865 2066 6c61 7474 656e 6564  of the flattened
-0001f0e0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-0001f0f0: 2020 206b 6565 7064 696d 7320 3a20 626f     keepdims : bo
-0001f100: 6f6c 2c20 6f70 7469 6f6e 616c 0d0a 2020  ol, optional..  
-0001f110: 2020 2020 2020 2020 2020 4966 2074 6869            If thi
-0001f120: 7320 6973 2073 6574 2074 6f20 5472 7565  s is set to True
-0001f130: 2c20 7468 6520 6178 6573 2077 6869 6368  , the axes which
-0001f140: 2061 7265 2072 6564 7563 6564 2061 7265   are reduced are
-0001f150: 206c 6566 7420 696e 2074 6865 2072 6573   left in the res
-0001f160: 756c 7420 6173 0d0a 2020 2020 2020 2020  ult as..        
-0001f170: 2020 2020 6469 6d65 6e73 696f 6e73 2077      dimensions w
-0001f180: 6974 6820 7369 7a65 206f 6e65 2e20 5769  ith size one. Wi
-0001f190: 7468 2074 6869 7320 6f70 7469 6f6e 2c20  th this option, 
-0001f1a0: 7468 6520 7265 7375 6c74 2077 696c 6c20  the result will 
-0001f1b0: 6272 6f61 6463 6173 740d 0a20 2020 2020  broadcast..     
-0001f1c0: 2020 2020 2020 2063 6f72 7265 6374 6c79         correctly
-0001f1d0: 2061 6761 696e 7374 2074 6865 206f 7269   against the ori
-0001f1e0: 6769 6e61 6c20 696e 7075 7420 6172 7261  ginal input arra
-0001f1f0: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
-0001f200: 2020 4966 2074 6869 7320 7661 6c75 6520    If this value 
-0001f210: 6973 2061 6e79 7468 696e 6720 6275 7420  is anything but 
-0001f220: 7468 6520 6465 6661 756c 7420 6974 2069  the default it i
-0001f230: 7320 7061 7373 6564 2074 6872 6f75 6768  s passed through
-0001f240: 2061 732d 6973 2074 6f20 7468 650d 0a20   as-is to the.. 
-0001f250: 2020 2020 2020 2020 2020 2072 656c 6576             relev
-0001f260: 616e 7420 6675 6e63 7469 6f6e 7320 6f66  ant functions of
-0001f270: 2074 6865 2073 7562 2d63 6c61 7373 6573   the sub-classes
-0001f280: 2e20 4966 2074 6865 7365 2066 756e 6374  . If these funct
-0001f290: 696f 6e73 2064 6f20 6e6f 7420 6861 7665  ions do not have
-0001f2a0: 2061 0d0a 2020 2020 2020 2020 2020 2020   a..            
-0001f2b0: 606b 6565 7064 696d 7360 206b 7761 7267  `keepdims` kwarg
-0001f2c0: 2c20 6120 5275 6e74 696d 6545 7272 6f72  , a RuntimeError
-0001f2d0: 2077 696c 6c20 6265 2072 6169 7365 642e   will be raised.
-0001f2e0: 0d0a 0d0a 2020 2020 2020 2020 6464 6f66  ....        ddof
-0001f2f0: 203a 2069 6e74 2c20 6f70 7469 6f6e 616c   : int, optional
-0001f300: 0d0a 2020 2020 2020 2020 2020 2020 2244  ..            "D
-0001f310: 656c 7461 2044 6567 7265 6573 206f 6620  elta Degrees of 
-0001f320: 4672 6565 646f 6d22 3a20 7468 6520 6469  Freedom": the di
-0001f330: 7669 736f 7220 7573 6564 2069 6e20 7468  visor used in th
-0001f340: 6520 6361 6c63 756c 6174 696f 6e20 6973  e calculation is
-0001f350: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
-0001f360: 4e20 2d20 6464 6f66 6060 2c20 7768 6572  N - ddof``, wher
-0001f370: 6520 6060 4e60 6020 7265 7072 6573 656e  e ``N`` represen
-0001f380: 7473 2074 6865 206e 756d 6265 7220 6f66  ts the number of
-0001f390: 2065 6c65 6d65 6e74 732e 2042 7920 6465   elements. By de
-0001f3a0: 6661 756c 740d 0a20 2020 2020 2020 2020  fault..         
-0001f3b0: 2020 2060 6464 6f66 6020 6973 207a 6572     `ddof` is zer
-0001f3c0: 6f20 666f 7220 7468 6520 4e75 6d50 7920  o for the NumPy 
-0001f3d0: 696d 706c 656d 656e 7461 7469 6f6e 2c20  implementation, 
-0001f3e0: 7665 7273 7573 206f 6e65 2066 6f72 2074  versus one for t
-0001f3f0: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
-0001f400: 5269 7074 6162 6c65 2069 6d70 6c65 6d65  Riptable impleme
-0001f410: 6e74 6174 696f 6e2e 0d0a 0d0a 2020 2020  ntation.....    
-0001f420: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-0001f430: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0001f440: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
-0001f450: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
-0001f460: 2032 2c20 332c 2072 742e 6e61 6e5d 290d   2, 3, rt.nan]).
-0001f470: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
-0001f480: 616e 7374 6428 290d 0a20 2020 2020 2020  anstd()..       
-0001f490: 2031 2e30 0d0a 0d0a 2020 2020 2020 2020   1.0....        
-0001f4a0: 5769 7468 2061 2060 6474 7970 6560 2073  With a `dtype` s
-0001f4b0: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
-0001f4c0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001f4d0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-0001f4e0: 2033 2c20 7274 2e6e 616e 5d29 0d0a 2020   3, rt.nan])..  
-0001f4f0: 2020 2020 2020 3e3e 3e20 612e 6e61 6e73        >>> a.nans
-0001f500: 7464 2864 7479 7065 203d 2072 742e 696e  td(dtype = rt.in
-0001f510: 7433 3229 0d0a 2020 2020 2020 2020 310d  t32)..        1.
-0001f520: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
-0001f530: 6669 6c74 6572 3a0d 0a0d 0a20 2020 2020  filter:....     
-0001f540: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-0001f550: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
-0001f560: 2c20 7274 2e6e 616e 5d29 0d0a 2020 2020  , rt.nan])..    
-0001f570: 2020 2020 3e3e 3e20 6220 3d20 7274 2e46      >>> b = rt.F
-0001f580: 6173 7441 7272 6179 285b 4661 6c73 652c  astArray([False,
-0001f590: 2054 7275 652c 2054 7275 652c 2054 7275   True, True, Tru
-0001f5a0: 655d 290d 0a20 2020 2020 2020 203e 3e3e  e])..        >>>
-0001f5b0: 2061 2e6e 616e 7374 6428 6669 6c74 6572   a.nanstd(filter
-0001f5c0: 203d 2062 290d 0a20 2020 2020 2020 2030   = b)..        0
-0001f5d0: 2e37 3037 3130 3637 3831 3138 3635 3437  .707106781186547
-0001f5e0: 360d 0a20 2020 2020 2020 2022 2222 0d0a  6..        """..
-0001f5f0: 2020 2020 2020 2020 6b77 6172 6773 203d          kwargs =
-0001f600: 2073 656c 662e 5f66 615f 6b65 7977 6f72   self._fa_keywor
-0001f610: 645f 7772 6170 7065 7228 6669 6c74 6572  d_wrapper(filter
-0001f620: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
-0001f630: 7479 7065 2c20 6178 6973 3d61 7869 732c  type, axis=axis,
-0001f640: 206b 6565 7064 696d 733d 6b65 6570 6469   keepdims=keepdi
-0001f650: 6d73 2c20 6464 6f66 3d64 646f 662c 202a  ms, ddof=ddof, *
-0001f660: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
-0001f670: 2020 2020 6966 2066 696c 7465 7220 6973      if filter is
-0001f680: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0001f690: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001f6a0: 656c 662e 5f66 615f 6669 6c74 6572 5f77  elf._fa_filter_w
-0001f6b0: 7261 7070 6572 285f 666e 616e 7374 642c  rapper(_fnanstd,
-0001f6c0: 2066 696c 7465 723d 6669 6c74 6572 2c20   filter=filter, 
-0001f6d0: 6474 7970 653d 6474 7970 6529 0d0a 0d0a  dtype=dtype)....
-0001f6e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001f6f0: 656c 662e 5f72 6564 7563 655f 6368 6563  elf._reduce_chec
-0001f700: 6b28 5245 4455 4345 5f46 554e 4354 494f  k(REDUCE_FUNCTIO
-0001f710: 4e53 2e52 4544 5543 455f 4e41 4e53 5444  NS.REDUCE_NANSTD
-0001f720: 2c20 6e70 2e6e 616e 7374 642c 202a 2a6b  , np.nanstd, **k
-0001f730: 7761 7267 7329 0d0a 0d0a 2020 2020 2320  wargs)....    # 
-0001f740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0001f790: 2064 6566 206e 616e 6d69 6e28 7365 6c66   def nanmin(self
-0001f7a0: 2c20 2a2a 6b77 6172 6773 2920 2d3e 206e  , **kwargs) -> n
-0001f7b0: 702e 6e75 6d62 6572 3a0d 0a20 2020 2020  p.number:..     
-0001f7c0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0001f7d0: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
-0001f7e0: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-0001f7f0: 4455 4345 5f4e 414e 4d49 4e2c 206e 702e  DUCE_NANMIN, np.
-0001f800: 6e61 6e6d 696e 2c20 2a2a 6b77 6172 6773  nanmin, **kwargs
-0001f810: 290d 0a0d 0a20 2020 2064 6566 206e 616e  )....    def nan
-0001f820: 6d61 7828 7365 6c66 2c20 2a2a 6b77 6172  max(self, **kwar
-0001f830: 6773 2920 2d3e 206e 702e 6e75 6d62 6572  gs) -> np.number
-0001f840: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-0001f850: 6e20 7365 6c66 2e5f 7265 6475 6365 5f63  n self._reduce_c
-0001f860: 6865 636b 2852 4544 5543 455f 4655 4e43  heck(REDUCE_FUNC
-0001f870: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
-0001f880: 4d41 582c 206e 702e 6e61 6e6d 6178 2c20  MAX, np.nanmax, 
-0001f890: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-0001f8a0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-0001f8b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f8c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f8d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f8e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0001f8f0: 2020 2020 6465 6620 6172 676d 696e 2873      def argmin(s
-0001f900: 656c 662c 202a 2a6b 7761 7267 7329 202d  elf, **kwargs) -
-0001f910: 3e20 696e 743a 0d0a 2020 2020 2020 2020  > int:..        
-0001f920: 7265 7475 726e 2073 656c 662e 5f72 6564  return self._red
-0001f930: 7563 655f 6368 6563 6b28 5245 4455 4345  uce_check(REDUCE
-0001f940: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-0001f950: 455f 4152 474d 494e 2c20 6e70 2e61 7267  E_ARGMIN, np.arg
-0001f960: 6d69 6e2c 202a 2a6b 7761 7267 7329 0d0a  min, **kwargs)..
-0001f970: 0d0a 2020 2020 6465 6620 6172 676d 6178  ..    def argmax
-0001f980: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-0001f990: 202d 3e20 696e 743a 0d0a 2020 2020 2020   -> int:..      
-0001f9a0: 2020 7265 7475 726e 2073 656c 662e 5f72    return self._r
-0001f9b0: 6564 7563 655f 6368 6563 6b28 5245 4455  educe_check(REDU
-0001f9c0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-0001f9d0: 5543 455f 4152 474d 4158 2c20 6e70 2e61  UCE_ARGMAX, np.a
-0001f9e0: 7267 6d61 782c 202a 2a6b 7761 7267 7329  rgmax, **kwargs)
-0001f9f0: 0d0a 0d0a 2020 2020 6465 6620 6e61 6e61  ....    def nana
-0001fa00: 7267 6d69 6e28 7365 6c66 2c20 2a2a 6b77  rgmin(self, **kw
-0001fa10: 6172 6773 2920 2d3e 2069 6e74 3a0d 0a20  args) -> int:.. 
-0001fa20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001fa30: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
-0001fa40: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
-0001fa50: 532e 5245 4455 4345 5f4e 414e 4152 474d  S.REDUCE_NANARGM
-0001fa60: 494e 2c20 6e70 2e6e 616e 6172 676d 696e  IN, np.nanargmin
-0001fa70: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-0001fa80: 2020 2064 6566 206e 616e 6172 676d 6178     def nanargmax
-0001fa90: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
-0001faa0: 202d 3e20 696e 743a 0d0a 2020 2020 2020   -> int:..      
-0001fab0: 2020 7265 7475 726e 2073 656c 662e 5f72    return self._r
-0001fac0: 6564 7563 655f 6368 6563 6b28 5245 4455  educe_check(REDU
-0001fad0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-0001fae0: 5543 455f 4e41 4e41 5247 4d41 582c 206e  UCE_NANARGMAX, n
-0001faf0: 702e 6e61 6e61 7267 6d61 782c 202a 2a6b  p.nanargmax, **k
-0001fb00: 7761 7267 7329 0d0a 0d0a 2020 2020 2323  wargs)....    ##
-0001fb10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fb20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fb30: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
-0001fb40: 2023 2053 7461 7473 2f4d 4c20 7365 6374   # Stats/ML sect
-0001fb50: 696f 6e0d 0a20 2020 2023 2323 2323 2323  ion..    #######
-0001fb60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fb70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fb80: 2323 2323 2323 0d0a 2020 2020 6465 6620  ######..    def 
-0001fb90: 6e6f 726d 616c 697a 655f 7a73 636f 7265  normalize_zscore
-0001fba0: 2873 656c 6629 202d 3e20 4661 7374 4172  (self) -> FastAr
-0001fbb0: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
-0001fbc0: 7475 726e 206e 6f72 6d61 6c69 7a65 5f7a  turn normalize_z
-0001fbd0: 7363 6f72 6528 7365 6c66 290d 0a0d 0a20  score(self).... 
-0001fbe0: 2020 2064 6566 206e 6f72 6d61 6c69 7a65     def normalize
-0001fbf0: 5f6d 696e 6d61 7828 7365 6c66 2920 2d3e  _minmax(self) ->
-0001fc00: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-0001fc10: 2020 2020 2072 6574 7572 6e20 6e6f 726d       return norm
-0001fc20: 616c 697a 655f 6d69 6e6d 6178 2873 656c  alize_minmax(sel
-0001fc30: 6629 0d0a 0d0a 2020 2020 2323 2323 2323  f)....    ######
-0001fc40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fc50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fc60: 2323 2323 2323 230d 0a20 2020 2023 2042  #######..    # B
-0001fc70: 6173 6963 4d61 7468 2073 6563 7469 6f6e  asicMath section
-0001fc80: 2028 746f 2062 6520 686f 6f6b 6564 2061   (to be hooked a
-0001fc90: 7420 4320 6c65 7665 6c20 6e6f 7729 0d0a  t C level now)..
-0001fca0: 2020 2020 2323 2323 2323 2323 2323 2323      ############
-0001fcb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fcc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001fcd0: 230d 0a20 2020 2023 2064 6566 205f 5f61  #..    # def __a
-0001fce0: 6464 5f5f 2873 656c 662c 2076 616c 7565  dd__(self, value
-0001fcf0: 293a 2020 2072 6573 756c 743d 7263 2e42  ):   result=rc.B
-0001fd00: 6173 6963 4d61 7468 5477 6f49 6e70 7574  asicMathTwoInput
-0001fd10: 7328 2873 656c 662c 2076 616c 7565 292c  s((self, value),
-0001fd20: 2031 2c20 3029 3b20 7265 7375 6c74 3d20   1, 0); result= 
-0001fd30: 7265 7375 6c74 2069 6620 7265 7375 6c74  result if result
-0001fd40: 2069 7320 6e6f 7420 4e6f 6e65 2065 6c73   is not None els
-0001fd50: 6520 6e70 2e61 6464 2873 656c 662c 7661  e np.add(self,va
-0001fd60: 6c75 6529 3b20 7265 7475 726e 2072 6573  lue); return res
-0001fd70: 756c 740d 0a20 2020 2023 2064 6566 205f  ult..    # def _
-0001fd80: 5f61 6464 5f5f 2873 656c 662c 2076 616c  _add__(self, val
-0001fd90: 7565 293a 2020 2072 6574 7572 6e20 7263  ue):   return rc
-0001fda0: 2e42 6173 6963 4d61 7468 5477 6f49 6e70  .BasicMathTwoInp
-0001fdb0: 7574 7328 2873 656c 662c 2076 616c 7565  uts((self, value
-0001fdc0: 292c 2031 2c20 3029 0d0a 0d0a 2020 2020  ), 1, 0)....    
-0001fdd0: 4070 726f 7065 7274 790d 0a20 2020 2040  @property..    @
-0001fde0: 5f75 7365 5f61 7574 6f63 6f6d 706c 6574  _use_autocomplet
-0001fdf0: 655f 706c 6163 6568 6f6c 6465 7228 3029  e_placeholder(0)
-0001fe00: 0d0a 2020 2020 6465 6620 6372 6328 7365  ..    def crc(se
-0001fe10: 6c66 2920 2d3e 2069 6e74 3a0d 0a20 2020  lf) -> int:..   
-0001fe20: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0001fe30: 2020 4361 6c63 756c 6174 6520 7468 6520    Calculate the 
-0001fe40: 3332 2d62 6974 2043 5243 206f 6620 7468  32-bit CRC of th
-0001fe50: 6520 6461 7461 2069 6e20 7468 6973 2061  e data in this a
-0001fe60: 7272 6179 2075 7369 6e67 2074 6865 2043  rray using the C
-0001fe70: 6173 7461 676e 6f6c 6920 706f 6c79 6e6f  astagnoli polyno
-0001fe80: 6d69 616c 2028 4352 4333 3243 292e 0d0a  mial (CRC32C)...
-0001fe90: 0d0a 2020 2020 2020 2020 5468 6973 2066  ..        This f
-0001fea0: 756e 6374 696f 6e20 646f 6573 206e 6f74  unction does not
-0001feb0: 2063 6f6e 7369 6465 7220 7468 6520 6172   consider the ar
-0001fec0: 7261 7927 7320 7368 6170 6520 6f72 2073  ray's shape or s
-0001fed0: 7472 6964 6573 2077 6865 6e20 6361 6c63  trides when calc
-0001fee0: 756c 6174 696e 6720 7468 6520 4352 432c  ulating the CRC,
-0001fef0: 0d0a 2020 2020 2020 2020 6974 2073 696d  ..        it sim
-0001ff00: 706c 7920 6361 6c63 756c 6174 6573 2074  ply calculates t
-0001ff10: 6865 2043 5243 2076 616c 7565 206f 7665  he CRC value ove
-0001ff20: 7220 7468 6520 656e 7469 7265 2062 7566  r the entire buf
-0001ff30: 6665 7220 6465 7363 7269 6265 6420 6279  fer described by
-0001ff40: 2074 6865 2061 7272 6179 2e0d 0a0d 0a20   the array..... 
-0001ff50: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-0001ff60: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0001ff70: 2d0d 0a20 2020 2020 2020 2063 616e 2062  -..        can b
-0001ff80: 6520 7573 6564 2074 6f20 636f 6d70 6172  e used to compar
-0001ff90: 6520 7477 6f20 6172 7261 7973 2066 6f72  e two arrays for
-0001ffa0: 2073 7472 7563 7475 7261 6c20 6571 7561   structural equa
-0001ffb0: 6c69 7479 0d0a 2020 2020 2020 2020 3e3e  lity..        >>
-0001ffc0: 3e20 6120 3d20 6172 616e 6765 2831 3030  > a = arange(100
-0001ffd0: 290d 0a20 2020 2020 2020 203e 3e3e 2062  )..        >>> b
-0001ffe0: 203d 2061 7261 6e67 6528 3130 302e 3029   = arange(100.0)
-0001fff0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00020000: 6372 6320 3d3d 2062 2e63 7263 0d0a 2020  crc == b.crc..  
-00020010: 2020 2020 2020 4661 6c73 650d 0a20 2020        False..   
-00020020: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00020030: 2020 7265 7475 726e 2063 7263 3332 6328    return crc32c(
-00020040: 7365 6c66 290d 0a0d 0a20 2020 2023 2074  self)....    # t
-00020050: 6f64 6f3a 2072 616e 6765 2f6e 616e 7261  odo: range/nanra
-00020060: 6e67 650d 0a20 2020 2023 2074 6f64 6f3a  nge..    # todo:
-00020070: 2073 7461 7473 2f6e 616e 7374 6174 730d   stats/nanstats.
-00020080: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00020090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000200a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000200b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000200c0: 0d0a 2020 2020 6465 6620 756e 6971 7565  ..    def unique
-000200d0: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-000200e0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000200f0: 5f69 6e64 6578 3a20 626f 6f6c 203d 2046  _index: bool = F
-00020100: 616c 7365 2c0d 0a20 2020 2020 2020 2072  alse,..        r
-00020110: 6574 7572 6e5f 696e 7665 7273 653a 2062  eturn_inverse: b
-00020120: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
-00020130: 2020 2020 2020 7265 7475 726e 5f63 6f75        return_cou
-00020140: 6e74 733a 2062 6f6f 6c20 3d20 4661 6c73  nts: bool = Fals
-00020150: 652c 0d0a 2020 2020 2020 2020 736f 7274  e,..        sort
-00020160: 6564 3a20 626f 6f6c 203d 2054 7275 652c  ed: bool = True,
-00020170: 0d0a 2020 2020 2020 2020 6c65 783a 2062  ..        lex: b
-00020180: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
-00020190: 2020 2020 2020 6474 7970 653a 204f 7074        dtype: Opt
-000201a0: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
-000201b0: 206e 702e 6474 7970 655d 5d20 3d20 4e6f   np.dtype]] = No
-000201c0: 6e65 2c0d 0a20 2020 2020 2020 2066 696c  ne,..        fil
-000201d0: 7465 723a 204f 7074 696f 6e61 6c5b 6e70  ter: Optional[np
-000201e0: 2e6e 6461 7272 6179 5d20 3d20 4e6f 6e65  .ndarray] = None
-000201f0: 2c0d 0a20 2020 2020 2020 202a 2a6b 7761  ,..        **kwa
-00020200: 7267 732c 0d0a 2020 2020 2920 2d3e 2055  rgs,..    ) -> U
-00020210: 6e69 6f6e 5b22 4661 7374 4172 7261 7922  nion["FastArray"
-00020220: 2c20 5475 706c 655b 2246 6173 7441 7272  , Tuple["FastArr
-00020230: 6179 222c 202e 2e2e 5d2c 204c 6973 745b  ay", ...], List[
-00020240: 2246 6173 7441 7272 6179 225d 2c20 7475  "FastArray"], tu
-00020250: 706c 655d 3a0d 0a20 2020 2020 2020 2022  ple]:..        "
-00020260: 2222 0d0a 2020 2020 2020 2020 4669 6e64  ""..        Find
-00020270: 2074 6865 2075 6e69 7175 6520 656c 656d   the unique elem
-00020280: 656e 7473 206f 6620 616e 2061 7272 6179  ents of an array
-00020290: 206f 7220 7468 6520 756e 6971 7565 2063   or the unique c
-000202a0: 6f6d 6269 6e61 7469 6f6e 7320 6f66 2065  ombinations of e
-000202b0: 6c65 6d65 6e74 7320 7769 7468 0d0a 2020  lements with..  
-000202c0: 2020 2020 2020 636f 7272 6573 706f 6e64        correspond
-000202d0: 696e 6720 696e 6469 6365 7320 696e 206d  ing indices in m
-000202e0: 756c 7469 706c 6520 6172 7261 7973 2e0d  ultiple arrays..
-000202f0: 0a0d 0a20 2020 2020 2020 2053 6565 203a  ...        See :
-00020300: 6d65 7468 3a60 7269 7074 6162 6c65 2e75  meth:`riptable.u
-00020310: 6e69 7175 6560 2066 6f72 2066 756c 6c20  nique` for full 
-00020320: 646f 6375 6d65 6e74 6174 696f 6e2e 0d0a  documentation...
-00020330: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00020340: 2020 2020 2072 6574 7572 6e20 756e 6971       return uniq
-00020350: 7565 280d 0a20 2020 2020 2020 2020 2020  ue(..           
-00020360: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-00020370: 2020 2020 7265 7475 726e 5f69 6e64 6578      return_index
-00020380: 3d72 6574 7572 6e5f 696e 6465 782c 0d0a  =return_index,..
-00020390: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000203a0: 726e 5f69 6e76 6572 7365 3d72 6574 7572  rn_inverse=retur
-000203b0: 6e5f 696e 7665 7273 652c 0d0a 2020 2020  n_inverse,..    
-000203c0: 2020 2020 2020 2020 7265 7475 726e 5f63          return_c
-000203d0: 6f75 6e74 733d 7265 7475 726e 5f63 6f75  ounts=return_cou
-000203e0: 6e74 732c 0d0a 2020 2020 2020 2020 2020  nts,..          
-000203f0: 2020 736f 7274 6564 3d73 6f72 7465 642c    sorted=sorted,
-00020400: 0d0a 2020 2020 2020 2020 2020 2020 6c65  ..            le
-00020410: 783d 6c65 782c 0d0a 2020 2020 2020 2020  x=lex,..        
-00020420: 2020 2020 6474 7970 653d 6474 7970 652c      dtype=dtype,
-00020430: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00020440: 6c74 6572 3d66 696c 7465 722c 0d0a 2020  lter=filter,..  
-00020450: 2020 2020 2020 2020 2020 2a2a 6b77 6172            **kwar
-00020460: 6773 2c0d 0a20 2020 2020 2020 2029 0d0a  gs,..        )..
-00020470: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00020480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000204a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-000204b0: 0a20 2020 2064 6566 206e 756e 6971 7565  .    def nunique
-000204c0: 2873 656c 6629 202d 3e20 696e 743a 0d0a  (self) -> int:..
-000204d0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000204e0: 2020 2020 2052 6574 7572 6e73 206e 756d       Returns num
-000204f0: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
-00020500: 6c75 6573 2069 6e20 6172 7261 792e 2044  lues in array. D
-00020510: 6f65 7320 6e6f 7420 696e 636c 7564 6520  oes not include 
-00020520: 6e61 6e20 6f72 2073 656e 7469 6e65 6c20  nan or sentinel 
-00020530: 7661 6c75 6573 2069 6e20 7468 6520 636f  values in the co
-00020540: 756e 742e 0d0a 0d0a 2020 2020 2020 2020  unt.....        
-00020550: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-00020560: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00020570: 2020 2020 466c 6f61 7420 7769 7468 206e      Float with n
-00020580: 616e 3a0d 0a0d 0a20 2020 2020 2020 203e  an:....        >
-00020590: 3e3e 2061 203d 2046 6173 7441 7272 6179  >> a = FastArray
-000205a0: 285b 312e 2c32 2e2c 332e 2c6e 702e 6e61  ([1.,2.,3.,np.na
-000205b0: 6e5d 290d 0a20 2020 2020 2020 203e 3e3e  n])..        >>>
-000205c0: 2061 2e6e 756e 6971 7565 2829 0d0a 2020   a.nunique()..  
-000205d0: 2020 2020 2020 330d 0a0d 0a20 2020 2020        3....     
-000205e0: 2020 2053 6967 6e65 6420 696e 7465 6765     Signed intege
-000205f0: 7220 7769 7468 2073 656e 7469 6e65 6c3a  r with sentinel:
-00020600: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00020610: 6120 3d20 4661 7374 4172 7261 7928 5b2d  a = FastArray([-
-00020620: 3132 382c 2032 2c20 335d 2c20 6474 7970  128, 2, 3], dtyp
-00020630: 653d 6e70 2e69 6e74 3829 0d0a 2020 2020  e=np.int8)..    
-00020640: 2020 2020 3e3e 3e20 612e 6e75 6e69 7175      >>> a.nuniqu
-00020650: 6528 290d 0a20 2020 2020 2020 2032 0d0a  e()..        2..
-00020660: 0d0a 2020 2020 2020 2020 556e 7369 676e  ..        Unsign
-00020670: 6564 2069 6e74 6567 6572 2077 6974 6820  ed integer with 
-00020680: 7365 6e74 696e 656c 3a0d 0a0d 0a20 2020  sentinel:....   
-00020690: 2020 2020 203e 3e3e 2061 203d 2046 6173       >>> a = Fas
-000206a0: 7441 7272 6179 285b 3235 352c 2032 2c20  tArray([255, 2, 
-000206b0: 335d 2c20 6474 7970 653d 6e70 2e75 696e  3], dtype=np.uin
-000206c0: 7438 290d 0a20 2020 2020 2020 203e 3e3e  t8)..        >>>
-000206d0: 2061 2e6e 756e 6971 7565 2829 0d0a 2020   a.nunique()..  
-000206e0: 2020 2020 2020 320d 0a0d 0a20 2020 2020        2....     
-000206f0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00020700: 756e 203d 2075 6e69 7175 6528 7365 6c66  un = unique(self
-00020710: 290d 0a20 2020 2020 2020 2063 6f75 6e74  )..        count
-00020720: 203d 206c 656e 2875 6e29 0d0a 2020 2020   = len(un)..    
-00020730: 2020 2020 6966 2063 6f75 6e74 203e 2030      if count > 0
-00020740: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00020750: 2075 6e69 7175 6520 6973 2073 6f72 7465   unique is sorte
-00020760: 642c 2073 6f20 6368 6563 6b20 666f 7220  d, so check for 
-00020770: 7365 6e74 696e 656c 2062 6173 6564 206f  sentinel based o
-00020780: 6e20 6474 7970 650d 0a20 2020 2020 2020  n dtype..       
-00020790: 2020 2020 2069 6e76 203d 2049 4e56 414c       inv = INVAL
-000207a0: 4944 5f44 4943 545b 7365 6c66 2e64 7479  ID_DICT[self.dty
-000207b0: 7065 2e6e 756d 5d0d 0a20 2020 2020 2020  pe.num]..       
-000207c0: 2020 2020 2069 6620 7365 6c66 2e64 7479       if self.dty
-000207d0: 7065 2e63 6861 7220 696e 204e 756d 7079  pe.char in Numpy
-000207e0: 4368 6172 5479 7065 732e 416c 6c46 6c6f  CharTypes.AllFlo
-000207f0: 6174 3a0d 0a20 2020 2020 2020 2020 2020  at:..           
-00020800: 2020 2020 2023 2063 6865 636b 2069 6620       # check if 
-00020810: 6c61 7374 2069 7465 6d20 6973 206e 616e  last item is nan
-00020820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020830: 2020 6966 2075 6e5b 636f 756e 7420 2d20    if un[count - 
-00020840: 315d 2021 3d20 756e 5b63 6f75 6e74 202d  1] != un[count -
-00020850: 2031 5d3a 0d0a 2020 2020 2020 2020 2020   1]:..          
-00020860: 2020 2020 2020 2020 2020 636f 756e 7420            count 
-00020870: 2d3d 2031 0d0a 2020 2020 2020 2020 2020  -= 1..          
-00020880: 2020 2320 756e 7369 676e 6564 2069 6e74    # unsigned int
-00020890: 2075 7365 7320 6869 6768 206e 756d 6265   uses high numbe
-000208a0: 7220 6173 2073 656e 7469 6e65 6c0d 0a20  r as sentinel.. 
-000208b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000208c0: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-000208d0: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
-000208e0: 732e 556e 7369 676e 6564 496e 7465 6765  s.UnsignedIntege
-000208f0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00020900: 2020 2020 6966 2075 6e5b 636f 756e 7420      if un[count 
-00020910: 2d20 315d 203d 3d20 696e 763a 0d0a 2020  - 1] == inv:..  
-00020920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020930: 2020 636f 756e 7420 2d3d 2031 0d0a 2020    count -= 1..  
-00020940: 2020 2020 2020 2020 2020 2320 616c 6c20            # all 
-00020950: 6f74 6865 7220 7365 6e74 696e 656c 7320  other sentinels 
-00020960: 6172 6520 6c6f 7765 7374 206e 756d 6265  are lowest numbe
-00020970: 720d 0a20 2020 2020 2020 2020 2020 2065  r..            e
-00020980: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00020990: 2020 2020 2020 6966 2075 6e5b 305d 203d        if un[0] =
-000209a0: 3d20 696e 763a 0d0a 2020 2020 2020 2020  = inv:..        
-000209b0: 2020 2020 2020 2020 2020 2020 636f 756e              coun
-000209c0: 7420 2d3d 2031 0d0a 2020 2020 2020 2020  t -= 1..        
-000209d0: 7265 7475 726e 2063 6f75 6e74 0d0a 0d0a  return count....
-000209e0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-000209f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00020a20: 2020 2064 6566 2073 6561 7263 6873 6f72     def searchsor
-00020a30: 7465 6428 7365 6c66 2c20 762c 2073 6964  ted(self, v, sid
-00020a40: 653d 226c 6566 7422 2c20 736f 7274 6572  e="left", sorter
-00020a50: 3d4e 6f6e 6529 202d 3e20 6e70 2e6e 756d  =None) -> np.num
-00020a60: 6265 723a 0d0a 2020 2020 2020 2020 7265  ber:..        re
-00020a70: 7475 726e 205f 7365 6172 6368 736f 7274  turn _searchsort
-00020a80: 6564 2873 656c 662c 2076 2c20 7369 6465  ed(self, v, side
-00020a90: 3d73 6964 652c 2073 6f72 7465 723d 736f  =side, sorter=so
-00020aa0: 7274 6572 290d 0a0d 0a20 2020 2023 202d  rter)....    # -
-00020ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020af0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00020b00: 6465 6620 6d61 705f 6f6c 6428 7365 6c66  def map_old(self
-00020b10: 2c20 6e70 6469 6374 3a20 6469 6374 293a  , npdict: dict):
-00020b20: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00020b30: 2020 2020 2020 2045 7861 6d70 6c65 0d0a         Example..
-00020b40: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00020b50: 0a20 2020 2020 2020 203e 3e3e 2064 203d  .        >>> d =
-00020b60: 207b 313a 3130 2c20 323a 3230 7d0d 0a20   {1:10, 2:20}.. 
-00020b70: 2020 2020 2020 203e 3e3e 2064 6174 5b27         >>> dat['
-00020b80: 6327 5d20 3d20 6461 742e 612e 6d61 7028  c'] = dat.a.map(
-00020b90: 6429 0d0a 2020 2020 2020 2020 3e3e 3e20  d)..        >>> 
-00020ba0: 7072 696e 7428 6461 7429 0d0a 2020 2020  print(dat)..    
-00020bb0: 2020 2020 2020 2061 2020 6220 2020 6362         a  b   cb
-00020bc0: 2020 2063 0d0a 2020 2020 2020 2020 3020     c..        0 
-00020bd0: 2031 2020 3020 2030 2e30 2020 3130 0d0a   1  0  0.0  10..
-00020be0: 2020 2020 2020 2020 3120 2031 2020 3120          1  1  1 
-00020bf0: 2031 2e30 2020 3130 0d0a 2020 2020 2020   1.0  10..      
-00020c00: 2020 3220 2031 2020 3220 2033 2e30 2020    2  1  2  3.0  
-00020c10: 3130 0d0a 2020 2020 2020 2020 3320 2032  10..        3  2
-00020c20: 2020 3320 2035 2e30 2020 3230 0d0a 2020    3  5.0  20..  
-00020c30: 2020 2020 2020 3420 2032 2020 3420 2037        4  2  4  7
-00020c40: 2e30 2020 3230 0d0a 2020 2020 2020 2020  .0  20..        
-00020c50: 3520 2032 2020 3520 2039 2e30 2020 3230  5  2  5  9.0  20
-00020c60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00020c70: 2020 2020 2020 206f 7574 4172 7261 7920         outArray 
-00020c80: 3d20 7365 6c66 2e63 6f70 7928 290d 0a20  = self.copy().. 
-00020c90: 2020 2020 2020 2066 6f72 206b 2c20 7620         for k, v 
-00020ca0: 696e 206e 7064 6963 742e 6974 656d 7328  in npdict.items(
-00020cb0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00020cc0: 6f75 7441 7272 6179 5b73 656c 6620 3d3d  outArray[self ==
-00020cd0: 206b 5d20 3d20 760d 0a20 2020 2020 2020   k] = v..       
-00020ce0: 2072 6574 7572 6e20 6f75 7441 7272 6179   return outArray
-00020cf0: 0d0a 0d0a 2020 2020 6465 6620 6d61 7028  ....    def map(
-00020d00: 7365 6c66 2c20 6e70 6469 6374 3a20 6469  self, npdict: di
-00020d10: 6374 2920 2d3e 2046 6173 7441 7272 6179  ct) -> FastArray
-00020d20: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00020d30: 2020 2020 2020 2020 4e6f 7465 730d 0a20          Notes.. 
-00020d40: 2020 2020 2020 202d 2d2d 2d2d 0d0a 2020         -----..  
-00020d50: 2020 2020 2020 5573 6573 2069 736d 656d        Uses ismem
-00020d60: 6265 7220 616e 6420 6361 6e20 6861 6e64  ber and can hand
-00020d70: 6c65 206c 6172 6765 2064 6963 7469 6f6e  le large diction
-00020d80: 6172 6965 730d 0a0d 0a20 2020 2020 2020  aries....       
-00020d90: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00020da0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00020db0: 2020 2020 203e 3e3e 2061 3d61 7261 6e67       >>> a=arang
-00020dc0: 6528 3329 0d0a 2020 2020 2020 2020 3e3e  e(3)..        >>
-00020dd0: 3e20 612e 6d61 7028 7b31 3a20 2761 272c  > a.map({1: 'a',
-00020de0: 2032 3a27 6227 2c20 333a 2763 277d 290d   2:'b', 3:'c'}).
-00020df0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00020e00: 6179 285b 2727 2c20 2761 272c 2027 6227  ay(['', 'a', 'b'
-00020e10: 5d2c 2064 7479 7065 3d27 3c55 3127 290d  ], dtype='<U1').
-00020e20: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-00020e30: 7261 6e67 6528 3329 2b31 0d0a 2020 2020  range(3)+1..    
-00020e40: 2020 2020 3e3e 3e20 612e 6d61 7028 7b31      >>> a.map({1
-00020e50: 3a20 2761 272c 2032 3a27 6227 2c20 333a  : 'a', 2:'b', 3:
-00020e60: 2763 277d 290d 0a20 2020 2020 2020 2046  'c'})..        F
-00020e70: 6173 7441 7272 6179 285b 2761 272c 2027  astArray(['a', '
-00020e80: 6227 2c20 2763 275d 2c20 6474 7970 653d  b', 'c'], dtype=
-00020e90: 273c 5531 2729 0d0a 2020 2020 2020 2020  '<U1')..        
-00020ea0: 2222 220d 0a20 2020 2020 2020 206f 7269  """..        ori
-00020eb0: 6720 3d20 4661 7374 4172 7261 7928 5b2a  g = FastArray([*
-00020ec0: 6e70 6469 6374 5d2c 2075 6e69 636f 6465  npdict], unicode
-00020ed0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-00020ee0: 7265 706c 6163 6520 3d20 4661 7374 4172  replace = FastAr
-00020ef0: 7261 7928 5b2a 6e70 6469 6374 2e76 616c  ray([*npdict.val
-00020f00: 7565 7328 295d 2c20 756e 6963 6f64 653d  ues()], unicode=
-00020f10: 5472 7565 290d 0a20 2020 2020 2020 206f  True)..        o
-00020f20: 7574 4172 7261 7920 3d20 7365 6c66 2e66  utArray = self.f
-00020f30: 696c 6c5f 696e 7661 6c69 6428 7365 6c66  ill_invalid(self
-00020f40: 2e73 6861 7065 2c20 6474 7970 653d 7265  .shape, dtype=re
-00020f50: 706c 6163 652e 6474 7970 652c 2069 6e70  place.dtype, inp
-00020f60: 6c61 6365 3d46 616c 7365 290d 0a20 2020  lace=False)..   
-00020f70: 2020 2020 2066 6f75 6e64 2c20 6964 7820       found, idx 
-00020f80: 3d20 6973 6d65 6d62 6572 2873 656c 662c  = ismember(self,
-00020f90: 206f 7269 6729 0d0a 2020 2020 2020 2020   orig)..        
-00020fa0: 6f75 7441 7272 6179 5b66 6f75 6e64 5d20  outArray[found] 
-00020fb0: 3d20 7265 706c 6163 655b 6964 785b 666f  = replace[idx[fo
-00020fc0: 756e 645d 5d0d 0a20 2020 2020 2020 2072  und]]..        r
-00020fd0: 6574 7572 6e20 6f75 7441 7272 6179 0d0a  eturn outArray..
-00020fe0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00020ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021030: 2d2d 2d0d 0a20 2020 2064 6566 2073 6869  ---..    def shi
-00021040: 6674 2873 656c 662c 2070 6572 696f 6473  ft(self, periods
-00021050: 3d31 2c20 696e 7661 6c69 643d 4e6f 6e65  =1, invalid=None
-00021060: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-00021070: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00021080: 2020 2020 2020 4d6f 6465 6c65 6420 6f6e        Modeled on
-00021090: 2070 616e 6461 732e 7368 6966 742e 0d0a   pandas.shift...
-000210a0: 2020 2020 2020 2020 5661 6c75 6573 2069          Values i
-000210b0: 6e20 7468 6520 6172 7261 7920 7769 6c6c  n the array will
-000210c0: 2062 6520 7368 6966 7465 6420 746f 2074   be shifted to t
-000210d0: 6865 2072 6967 6874 2066 6f72 2070 6f73  he right for pos
-000210e0: 6974 6976 652c 2074 6f20 7468 6520 6c65  itive, to the le
-000210f0: 6674 2066 6f72 206e 6567 6174 6976 652e  ft for negative.
-00021100: 0d0a 2020 2020 2020 2020 5370 6163 6573  ..        Spaces
-00021110: 2061 7420 6569 7468 6572 2065 6e64 2077   at either end w
-00021120: 696c 6c20 6265 2066 696c 6c65 6420 7769  ill be filled wi
-00021130: 7468 2061 6e20 696e 7661 6c69 6420 6261  th an invalid ba
-00021140: 7365 6420 6f6e 2074 6865 2064 6174 6174  sed on the datat
-00021150: 7970 652e 0d0a 2020 2020 2020 2020 4966  ype...        If
-00021160: 2061 6273 2870 6572 696f 6473 2920 3e3d   abs(periods) >=
-00021170: 2074 6865 206c 656e 6774 6820 6f66 2074   the length of t
-00021180: 6865 2046 6173 7441 7272 6179 2c20 6974  he FastArray, it
-00021190: 2077 696c 6c20 7265 7475 726e 2061 2046   will return a F
-000211a0: 6173 7441 7272 6179 2066 756c 6c20 6f66  astArray full of
-000211b0: 2069 6e76 616c 6964 0d0a 2020 2020 2020   invalid..      
-000211c0: 2020 7769 6c6c 2062 6520 7265 7475 726e    will be return
-000211d0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
-000211e0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-000211f0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-00021200: 2020 2020 2020 2070 6572 696f 6473 3a20         periods: 
-00021210: 696e 742c 2031 0d0a 2020 2020 2020 2020  int, 1..        
-00021220: 2020 2020 206e 756d 6265 7220 6f66 2065       number of e
-00021230: 6c65 6d65 6e74 7320 746f 2073 6869 6674  lements to shift
-00021240: 2072 6967 6874 2028 6966 2070 6f73 6974   right (if posit
-00021250: 6976 6529 206f 7220 6c65 6674 2028 6966  ive) or left (if
-00021260: 206e 6567 6174 6976 6529 2c20 6465 6661   negative), defa
-00021270: 756c 7473 2074 6f20 310d 0a20 2020 2020  ults to 1..     
-00021280: 2020 2069 6e76 616c 6964 3a20 4e6f 6e65     invalid: None
-00021290: 2c20 6465 6661 756c 740d 0a20 2020 2020  , default..     
-000212a0: 2020 2020 2020 2020 6f70 7469 6f6e 616c          optional
-000212b0: 2069 6e76 616c 6964 2076 616c 7565 2074   invalid value t
-000212c0: 6f20 6669 6c6c 0d0a 0d0a 2020 2020 2020  o fill....      
-000212d0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-000212e0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-000212f0: 2020 2020 4661 7374 4172 7261 7920 7368      FastArray sh
-00021300: 6966 7465 6420 7269 6768 7420 6f72 206c  ifted right or l
-00021310: 6566 7420 6279 206e 756d 6265 7220 6f66  eft by number of
-00021320: 2070 6572 696f 6473 0d0a 0d0a 2020 2020   periods....    
-00021330: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-00021340: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00021350: 2020 2020 2020 2020 3e3e 3e20 6172 616e          >>> aran
-00021360: 6765 2835 292e 7368 6966 7428 3229 0d0a  ge(5).shift(2)..
-00021370: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00021380: 7928 5b2d 3231 3437 3438 3336 3438 2c20  y([-2147483648, 
-00021390: 2d32 3134 3734 3833 3634 382c 2020 2020  -2147483648,    
-000213a0: 2020 2020 2020 2030 2c20 2020 2020 2020         0,       
-000213b0: 2020 2020 312c 2020 2020 2020 2020 2020      1,          
-000213c0: 2020 325d 290d 0a20 2020 2020 2020 2022    2])..        "
-000213d0: 2222 0d0a 0d0a 2020 2020 2020 2020 6966  ""....        if
-000213e0: 2070 6572 696f 6473 203d 3d20 303a 0d0a   periods == 0:..
-000213f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00021400: 726e 2073 656c 660d 0a0d 0a20 2020 2020  rn self....     
-00021410: 2020 2069 6620 696e 7661 6c69 6420 6973     if invalid is
-00021420: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00021430: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00021440: 6528 7365 6c66 2c20 5479 7065 5265 6769  e(self, TypeRegi
-00021450: 7374 6572 2e43 6174 6567 6f72 6963 616c  ster.Categorical
-00021460: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00021470: 2020 2020 696e 7661 6c69 6420 3d20 300d      invalid = 0.
-00021480: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00021490: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000214a0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000214b0: 2020 2020 2020 2020 2020 2020 2020 696e                in
-000214c0: 7661 6c69 6420 3d20 494e 5641 4c49 445f  valid = INVALID_
-000214d0: 4449 4354 5b73 656c 662e 6474 7970 652e  DICT[self.dtype.
-000214e0: 6e75 6d5d 0d0a 2020 2020 2020 2020 2020  num]..          
-000214f0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00021500: 6570 7469 6f6e 3a0d 0a20 2020 2020 2020  eption:..       
-00021510: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00021520: 7365 2054 7970 6545 7272 6f72 2866 2273  se TypeError(f"s
-00021530: 6869 6674 2064 6f65 7320 6e6f 7420 7375  hift does not su
-00021540: 7070 6f72 7420 7468 6520 6474 7970 6520  pport the dtype 
-00021550: 7b73 656c 662e 6474 7970 652e 6e61 6d65  {self.dtype.name
-00021560: 2172 7d22 290d 0a0d 0a20 2020 2020 2020  !r}")....       
-00021570: 2023 2077 6520 6b6e 6f77 2074 6861 7420   # we know that 
-00021580: 7468 6973 2069 7320 6120 7369 6d70 6c65  this is a simple
-00021590: 2076 6563 746f 723a 2073 6861 7065 203d   vector: shape =
-000215a0: 3d20 286c 656e 2c20 290d 0a20 2020 2020  = (len, )..     
-000215b0: 2020 2023 2054 4f44 4f3a 2067 6574 2072     # TODO: get r
-000215c0: 6563 7963 6c65 640d 0a20 2020 2020 2020  ecycled..       
-000215d0: 2074 656d 7020 3d20 656d 7074 795f 6c69   temp = empty_li
-000215e0: 6b65 2873 656c 6629 0d0a 2020 2020 2020  ke(self)..      
-000215f0: 2020 6966 2061 6273 2870 6572 696f 6473    if abs(periods
-00021600: 2920 3e3d 206c 656e 2873 656c 6629 3a0d  ) >= len(self):.
-00021610: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
-00021620: 702e 6669 6c6c 2869 6e76 616c 6964 290d  p.fill(invalid).
-00021630: 0a20 2020 2020 2020 2065 6c69 6620 7065  .        elif pe
-00021640: 7269 6f64 7320 3e20 303a 0d0a 2020 2020  riods > 0:..    
-00021650: 2020 2020 2020 2020 7465 6d70 5b3a 7065          temp[:pe
-00021660: 7269 6f64 735d 203d 2069 6e76 616c 6964  riods] = invalid
-00021670: 0d0a 2020 2020 2020 2020 2020 2020 7465  ..            te
-00021680: 6d70 5b70 6572 696f 6473 3a5d 203d 2073  mp[periods:] = s
-00021690: 656c 665b 3a2d 7065 7269 6f64 735d 0d0a  elf[:-periods]..
-000216a0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000216b0: 2020 2020 2020 2020 2020 2074 656d 705b             temp[
-000216c0: 3a70 6572 696f 6473 5d20 3d20 7365 6c66  :periods] = self
-000216d0: 5b2d 7065 7269 6f64 733a 5d0d 0a20 2020  [-periods:]..   
-000216e0: 2020 2020 2020 2020 2074 656d 705b 7065           temp[pe
-000216f0: 7269 6f64 733a 5d20 3d20 696e 7661 6c69  riods:] = invali
-00021700: 640d 0a0d 0a20 2020 2020 2020 2023 2074  d....        # t
-00021710: 6f20 7265 7772 6170 2063 6174 6567 6f72  o rewrap categor
-00021720: 6963 616c 7320 6f72 2064 6174 656c 696b  icals or datelik
-00021730: 650d 0a20 2020 2020 2020 2069 6620 6861  e..        if ha
-00021740: 7361 7474 7228 7365 6c66 2c20 226e 6577  sattr(self, "new
-00021750: 636c 6173 7366 726f 6d69 6e73 7461 6e63  classfrominstanc
-00021760: 6522 293a 0d0a 2020 2020 2020 2020 2020  e"):..          
-00021770: 2020 7465 6d70 203d 2073 656c 662e 6e65    temp = self.ne
-00021780: 7763 6c61 7373 6672 6f6d 696e 7374 616e  wclassfrominstan
-00021790: 6365 2874 656d 702c 2073 656c 6629 0d0a  ce(temp, self)..
-000217a0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000217b0: 2074 656d 700d 0a0d 0a20 2020 2023 202d   temp....    # -
-000217c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000217d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000217e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000217f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00021800: 5f69 6e74 6572 6e61 6c5f 7365 6c66 5f63  _internal_self_c
-00021810: 6f6d 7061 7265 2873 656c 662c 206d 6174  ompare(self, mat
-00021820: 685f 6f70 2c20 7065 7269 6f64 733d 312c  h_op, periods=1,
-00021830: 2066 616e 6379 3d46 616c 7365 293a 0d0a   fancy=False):..
-00021840: 2020 2020 2020 2020 2222 2269 6e74 6572          """inter
-00021850: 6e61 6c20 726f 7574 696e 6520 7573 6564  nal routine used
-00021860: 2066 6f72 2064 6966 6665 7273 2061 6e64   for differs and
-00021870: 2074 7261 6e73 6974 696f 6e73 2222 220d   transitions""".
-00021880: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00021890: 3d20 656d 7074 795f 6c69 6b65 2873 656c  = empty_like(sel
-000218a0: 662c 2064 7479 7065 3d6e 702e 626f 6f6c  f, dtype=np.bool
-000218b0: 5f29 0d0a 0d0a 2020 2020 2020 2020 6966  _)....        if
-000218c0: 2070 6572 696f 6473 203d 3d20 303a 0d0a   periods == 0:..
-000218d0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000218e0: 6520 5661 6c75 6545 7272 6f72 2822 7065  e ValueError("pe
-000218f0: 7269 6f64 7320 6f66 2030 2069 7320 696e  riods of 0 is in
-00021900: 7661 6c69 6420 666f 7220 7472 616e 7369  valid for transi
-00021910: 7469 6f6e 7322 290d 0a0d 0a20 2020 2020  tions")....     
-00021920: 2020 2069 6620 7065 7269 6f64 7320 3e20     if periods > 
-00021930: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-00021940: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-00021950: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
-00021960: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
-00021970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021980: 2873 656c 665b 7065 7269 6f64 733a 5d2c  (self[periods:],
-00021990: 2073 656c 665b 3a2d 7065 7269 6f64 735d   self[:-periods]
-000219a0: 2c20 7265 7375 6c74 5b70 6572 696f 6473  , result[periods
-000219b0: 3a5d 292c 206d 6174 685f 6f70 2c20 300d  :]), math_op, 0.
-000219c0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-000219d0: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
-000219e0: 6c6c 2075 7066 726f 6e74 2077 6974 6820  ll upfront with 
-000219f0: 696e 7661 6c69 6473 0d0a 2020 2020 2020  invalids..      
-00021a00: 2020 2020 2020 7265 7375 6c74 5b3a 7065        result[:pe
-00021a10: 7269 6f64 735d 203d 2046 616c 7365 0d0a  riods] = False..
-00021a20: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00021a30: 2020 2020 2020 2020 2020 2054 7970 6552             TypeR
-00021a40: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
-00021a50: 6572 2e5f 4241 5349 434d 4154 485f 5457  er._BASICMATH_TW
-00021a60: 4f5f 494e 5055 5453 280d 0a20 2020 2020  O_INPUTS(..     
-00021a70: 2020 2020 2020 2020 2020 2028 7365 6c66             (self
-00021a80: 5b3a 7065 7269 6f64 735d 2c20 7365 6c66  [:periods], self
-00021a90: 5b2d 7065 7269 6f64 733a 5d2c 2072 6573  [-periods:], res
-00021aa0: 756c 745b 3a70 6572 696f 6473 5d29 2c20  ult[:periods]), 
-00021ab0: 6d61 7468 5f6f 702c 2030 0d0a 2020 2020  math_op, 0..    
-00021ac0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00021ad0: 2020 2020 2020 2023 2066 696c 6c20 6261         # fill ba
-00021ae0: 636b 2077 6974 6820 696e 7661 6c69 6473  ck with invalids
-00021af0: 2028 7065 7269 6f64 7320 6973 206e 6567   (periods is neg
-00021b00: 6174 6976 6529 0d0a 2020 2020 2020 2020  ative)..        
-00021b10: 2020 2020 7265 7375 6c74 5b70 6572 696f      result[perio
-00021b20: 6473 3a5d 203d 2046 616c 7365 0d0a 0d0a  ds:] = False....
-00021b30: 2020 2020 2020 2020 6966 2066 616e 6379          if fancy
-00021b40: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00021b50: 6574 7572 6e20 626f 6f6c 5f74 6f5f 6661  eturn bool_to_fa
-00021b60: 6e63 7928 7265 7375 6c74 290d 0a20 2020  ncy(result)..   
-00021b70: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00021b80: 6c74 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  lt....    # ----
-00021b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021bc0: 2d2d 2d0d 0a20 2020 2064 6566 2064 6966  ---..    def dif
-00021bd0: 6665 7273 2873 656c 662c 2070 6572 696f  fers(self, perio
-00021be0: 6473 3d31 2c20 6661 6e63 793d 4661 6c73  ds=1, fancy=Fals
-00021bf0: 6529 202d 3e20 4661 7374 4172 7261 793a  e) -> FastArray:
-00021c00: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00021c10: 2020 2020 2020 2052 6574 7572 6e73 2061         Returns a
-00021c20: 2062 6f6f 6c65 616e 2061 7272 6179 2e0d   boolean array..
-00021c30: 0a20 2020 2020 2020 2054 6865 2062 6f6f  .        The boo
-00021c40: 6c65 616e 2061 7272 6179 2069 7320 7365  lean array is se
-00021c50: 7420 746f 2054 7275 6520 7768 656e 2074  t to True when t
-00021c60: 6865 2070 7265 7669 6f75 7320 6974 656d  he previous item
-00021c70: 2069 6e20 7468 6520 6172 7261 7920 6571   in the array eq
-00021c80: 7561 6c73 2074 6865 2063 7572 7265 6e74  uals the current
-00021c90: 2e0d 0a20 2020 2020 2020 2055 7365 202d  ...        Use -
-00021ca0: 3120 696e 7374 6561 6420 6f66 2031 2069  1 instead of 1 i
-00021cb0: 6620 796f 7520 7761 6e74 2054 7275 6520  f you want True 
-00021cc0: 7365 7420 7768 656e 2074 6865 206e 6578  set when the nex
-00021cd0: 7420 6974 656d 2069 6e20 7468 6520 6172  t item in the ar
-00021ce0: 7261 7920 6571 7561 6c73 2074 6865 2070  ray equals the p
-00021cf0: 7265 7669 6f75 732e 0d0a 2020 2020 2020  revious...      
-00021d00: 2020 5365 6520 616c 736f 3a20 6060 7472    See also: ``tr
-00021d10: 616e 7369 7469 6f6e 7360 600d 0a0d 0a20  ansitions``.... 
-00021d20: 2020 2020 2020 203a 3a70 6172 616d 2070         ::param p
-00021d30: 6572 696f 6473 3a20 5468 6520 6e75 6d62  eriods: The numb
-00021d40: 6572 206f 6620 656c 656d 656e 7473 2074  er of elements t
-00021d50: 6f20 6c6f 6f6b 2061 6865 6164 2028 6f72  o look ahead (or
-00021d60: 2062 6568 696e 6429 2c20 6465 6661 756c   behind), defaul
-00021d70: 7473 2074 6f20 310d 0a20 2020 2020 2020  ts to 1..       
-00021d80: 203a 7479 7065 2070 6572 696f 6473 3a20   :type periods: 
-00021d90: 696e 740d 0a20 2020 2020 2020 203a 7061  int..        :pa
-00021da0: 7261 6d20 6661 6e63 793a 2049 6e64 6963  ram fancy: Indic
-00021db0: 6174 6573 2077 6865 7468 6572 2074 6f20  ates whether to 
-00021dc0: 7265 7475 726e 2061 2066 616e 6379 5f69  return a fancy_i
-00021dd0: 6e64 6578 2069 6e73 7465 6164 206f 6620  ndex instead of 
-00021de0: 6120 626f 6f6c 6561 6e20 6172 7261 792c  a boolean array,
-00021df0: 2064 6566 6175 6c74 7320 746f 2046 616c   defaults to Fal
-00021e00: 7365 2e0d 0a20 2020 2020 2020 203a 7479  se...        :ty
-00021e10: 7065 2066 616e 6379 3a20 626f 6f6c 0d0a  pe fancy: bool..
-00021e20: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
-00021e30: 2062 6f6f 6c65 616e 2060 6046 6173 7441   boolean ``FastA
-00021e40: 7272 6179 6060 2c20 6f72 2066 616e 6379  rray``, or fancy
-00021e50: 496e 6465 7820 2873 6565 3a20 6066 616e  Index (see: `fan
-00021e60: 6379 6020 6b77 6172 6729 0d0a 2020 2020  cy` kwarg)..    
-00021e70: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00021e80: 2069 6620 7365 6c66 2e64 7479 7065 2e6e   if self.dtype.n
-00021e90: 756d 203e 2031 333a 0d0a 2020 2020 2020  um > 13:..      
-00021ea0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-00021eb0: 656c 6620 213d 2073 656c 662e 7368 6966  elf != self.shif
-00021ec0: 7428 7065 7269 6f64 7329 0d0a 2020 2020  t(periods)..    
-00021ed0: 2020 2020 2020 2020 6966 2066 616e 6379          if fancy
-00021ee0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00021ef0: 2020 2072 6574 7572 6e20 626f 6f6c 5f74     return bool_t
-00021f00: 6f5f 6661 6e63 7928 7265 7375 6c74 290d  o_fancy(result).
-00021f10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00021f20: 7572 6e20 7265 7375 6c74 0d0a 2020 2020  urn result..    
-00021f30: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00021f40: 5f69 6e74 6572 6e61 6c5f 7365 6c66 5f63  _internal_self_c
-00021f50: 6f6d 7061 7265 284d 4154 485f 4f50 4552  ompare(MATH_OPER
-00021f60: 4154 494f 4e2e 434d 505f 4551 2c20 7065  ATION.CMP_EQ, pe
-00021f70: 7269 6f64 733d 7065 7269 6f64 732c 2066  riods=periods, f
-00021f80: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
-00021f90: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-00021fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021fe0: 0d0a 2020 2020 6465 6620 7472 616e 7369  ..    def transi
-00021ff0: 7469 6f6e 7328 7365 6c66 2c20 7065 7269  tions(self, peri
-00022000: 6f64 733d 312c 2066 616e 6379 3d46 616c  ods=1, fancy=Fal
-00022010: 7365 2920 2d3e 2046 6173 7441 7272 6179  se) -> FastArray
-00022020: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00022030: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-00022040: 6120 626f 6f6c 6561 6e20 6172 7261 792e  a boolean array.
-00022050: 0d0a 2020 2020 2020 2020 5468 6520 626f  ..        The bo
-00022060: 6f6c 6561 6e20 6172 7261 7920 6973 2073  olean array is s
-00022070: 6574 2074 6f20 5472 7565 2077 6865 6e20  et to True when 
-00022080: 7468 6520 7072 6576 696f 7573 2069 7465  the previous ite
-00022090: 6d20 696e 2074 6865 2061 7272 6179 2064  m in the array d
-000220a0: 6f65 7320 6e6f 7420 6571 7561 6c20 7468  oes not equal th
-000220b0: 6520 6375 7272 656e 742e 0d0a 2020 2020  e current...    
-000220c0: 2020 2020 5573 6520 2d31 2069 6e73 7465      Use -1 inste
-000220d0: 6164 206f 6620 3120 6966 2079 6f75 2077  ad of 1 if you w
-000220e0: 616e 7420 5472 7565 2073 6574 2077 6865  ant True set whe
-000220f0: 6e20 7468 6520 6e65 7874 2069 7465 6d20  n the next item 
-00022100: 696e 2074 6865 2061 7272 6179 2064 6f65  in the array doe
-00022110: 7320 6e6f 7420 6571 7561 6c20 7468 6520  s not equal the 
-00022120: 7072 6576 696f 7573 2e0d 0a20 2020 2020  previous...     
-00022130: 2020 2053 6565 2061 6c73 6f3a 2060 6064     See also: ``d
-00022140: 6966 6665 7273 6060 0d0a 0d0a 2020 2020  iffers``....    
-00022150: 2020 2020 3a70 6172 616d 2070 6572 696f      :param perio
-00022160: 6473 3a20 5468 6520 6e75 6d62 6572 206f  ds: The number o
-00022170: 6620 656c 656d 656e 7473 2074 6f20 6c6f  f elements to lo
-00022180: 6f6b 2061 6865 6164 2028 6f72 2062 6568  ok ahead (or beh
-00022190: 696e 6429 2c20 6465 6661 756c 7473 2074  ind), defaults t
-000221a0: 6f20 310d 0a20 2020 2020 2020 203a 7479  o 1..        :ty
-000221b0: 7065 2070 6572 696f 6473 3a20 696e 740d  pe periods: int.
-000221c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000221d0: 6661 6e63 793a 2049 6e64 6963 6174 6573  fancy: Indicates
-000221e0: 2077 6865 7468 6572 2074 6f20 7265 7475   whether to retu
-000221f0: 726e 2061 2066 616e 6379 5f69 6e64 6578  rn a fancy_index
-00022200: 2069 6e73 7465 6164 206f 6620 6120 626f   instead of a bo
-00022210: 6f6c 6561 6e20 6172 7261 792c 2064 6566  olean array, def
-00022220: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
-00022230: 0a20 2020 2020 2020 203a 7479 7065 2066  .        :type f
-00022240: 616e 6379 3a20 626f 6f6c 0d0a 2020 2020  ancy: bool..    
-00022250: 2020 2020 3a72 6574 7572 6e3a 2062 6f6f      :return: boo
-00022260: 6c65 616e 2060 6046 6173 7441 7272 6179  lean ``FastArray
-00022270: 6060 2c20 6f72 2066 616e 6379 496e 6465  ``, or fancyInde
-00022280: 7820 2873 6565 3a20 6066 616e 6379 6020  x (see: `fancy` 
-00022290: 6b77 6172 6729 0d0a 0d0a 2020 2020 2020  kwarg)....      
-000222a0: 2020 3e3e 3e20 6120 3d20 4661 7374 4172    >>> a = FastAr
-000222b0: 7261 7928 5b30 2c31 2c32 2c33 2c33 2c33  ray([0,1,2,3,3,3
-000222c0: 2c34 5d29 0d0a 2020 2020 2020 2020 3e3e  ,4])..        >>
-000222d0: 3e20 612e 7472 616e 7369 7469 6f6e 7328  > a.transitions(
-000222e0: 7065 7269 6f64 733d 3129 0d0a 2020 2020  periods=1)..    
-000222f0: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
-00022300: 616c 7365 2c20 5472 7565 2c20 5472 7565  alse, True, True
-00022310: 2c20 5472 7565 2c20 4661 6c73 652c 2046  , True, False, F
-00022320: 616c 7365 2c20 5472 7565 5d29 0d0a 0d0a  alse, True])....
-00022330: 2020 2020 2020 2020 3e3e 3e20 612e 7472          >>> a.tr
-00022340: 616e 7369 7469 6f6e 7328 7065 7269 6f64  ansitions(period
-00022350: 733d 3229 0d0a 2020 2020 2020 2020 4661  s=2)..        Fa
-00022360: 7374 4172 7261 7928 5b46 616c 7365 2c20  stArray([False, 
-00022370: 4661 6c73 652c 2054 7275 652c 2054 7275  False, True, Tru
-00022380: 652c 2054 7275 652c 2046 616c 7365 2c20  e, True, False, 
-00022390: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-000223a0: 2020 3e3e 3e20 612e 7472 616e 7369 7469    >>> a.transiti
-000223b0: 6f6e 7328 7065 7269 6f64 733d 2d31 290d  ons(periods=-1).
-000223c0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-000223d0: 6179 285b 2054 7275 652c 2054 7275 652c  ay([ True, True,
-000223e0: 2054 7275 652c 2046 616c 7365 2c20 4661   True, False, Fa
-000223f0: 6c73 652c 2054 7275 652c 2046 616c 7365  lse, True, False
-00022400: 5d29 0d0a 2020 2020 2020 2020 2222 220d  ])..        """.
-00022410: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00022420: 2e64 7479 7065 2e6e 756d 203e 2031 333a  .dtype.num > 13:
-00022430: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00022440: 7375 6c74 203d 2073 656c 6620 213d 2073  sult = self != s
-00022450: 656c 662e 7368 6966 7428 7065 7269 6f64  elf.shift(period
-00022460: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00022470: 6966 2066 616e 6379 3a0d 0a20 2020 2020  if fancy:..     
-00022480: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00022490: 6e20 626f 6f6c 5f74 6f5f 6661 6e63 7928  n bool_to_fancy(
-000224a0: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
-000224b0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-000224c0: 6c74 0d0a 2020 2020 2020 2020 7265 7475  lt..        retu
-000224d0: 726e 2073 656c 662e 5f69 6e74 6572 6e61  rn self._interna
-000224e0: 6c5f 7365 6c66 5f63 6f6d 7061 7265 284d  l_self_compare(M
-000224f0: 4154 485f 4f50 4552 4154 494f 4e2e 434d  ATH_OPERATION.CM
-00022500: 505f 4e45 2c20 7065 7269 6f64 733d 7065  P_NE, periods=pe
-00022510: 7269 6f64 732c 2066 616e 6379 3d66 616e  riods, fancy=fan
-00022520: 6379 290d 0a0d 0a20 2020 2023 202d 2d2d  cy)....    # ---
-00022530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022560: 2d2d 2d2d 0d0a 2020 2020 6465 6620 6469  ----..    def di
-00022570: 6666 2873 656c 662c 2070 6572 696f 6473  ff(self, periods
-00022580: 3d31 2920 2d3e 2046 6173 7441 7272 6179  =1) -> FastArray
-00022590: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-000225a0: 2020 2020 2020 2020 4f6e 6c79 2077 6f72          Only wor
-000225b0: 6b73 2066 6f72 2069 6e74 6567 6572 7320  ks for integers 
-000225c0: 616e 6420 666c 6f61 7473 2e0d 0a0d 0a20  and floats..... 
-000225d0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-000225e0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000225f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2070  -----..        p
-00022600: 6572 696f 6473 3a20 696e 742c 2064 6566  eriods: int, def
-00022610: 6175 6c74 7320 746f 2031 2e20 2048 6f77  aults to 1.  How
-00022620: 206d 616e 7920 656c 656d 656e 7473 2074   many elements t
-00022630: 6f20 7368 6966 7420 7468 6520 6461 7461  o shift the data
-00022640: 2062 6566 6f72 6520 7375 6274 7261 6374   before subtract
-00022650: 696e 672e 0d0a 0d0a 2020 2020 2020 2020  ing.....        
-00022660: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-00022670: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-00022680: 2020 4661 7374 4172 7261 7920 7361 6d65    FastArray same
-00022690: 206c 656e 6774 6820 6173 2063 7572 7265   length as curre
-000226a0: 6e74 2061 7272 6179 2e20 2049 6e76 616c  nt array.  Inval
-000226b0: 6964 7320 7769 6c6c 2066 696c 6c20 7468  ids will fill th
-000226c0: 6520 6265 6769 6e6e 696e 6720 6261 7365  e beginning base
-000226d0: 6420 6f6e 2074 6865 2070 6572 696f 6473  d on the periods
-000226e0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-000226f0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-00022700: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00022710: 203e 3e3e 2061 3d72 742e 6172 616e 6765   >>> a=rt.arange
-00022720: 2833 2c20 6474 7970 653d 7274 2e69 6e74  (3, dtype=rt.int
-00022730: 3332 293b 2061 2e64 6966 6628 290d 0a20  32); a.diff().. 
-00022740: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00022750: 285b 2d32 3134 3734 3833 3634 382c 2020  ([-2147483648,  
-00022760: 2020 2020 2020 2020 2031 2c20 2020 2020           1,     
-00022770: 2020 2020 2020 315d 290d 0a0d 0a20 2020        1])....   
-00022780: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00022790: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-000227a0: 2020 2020 696e 7661 6c69 6420 3d20 494e      invalid = IN
-000227b0: 5641 4c49 445f 4449 4354 5b73 656c 662e  VALID_DICT[self.
-000227c0: 6474 7970 652e 6e75 6d5d 0d0a 2020 2020  dtype.num]..    
-000227d0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-000227e0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-000227f0: 7970 6545 7272 6f72 2866 2273 6869 6674  ypeError(f"shift
-00022800: 2064 6f65 7320 6e6f 7420 7375 7070 6f72   does not suppor
-00022810: 7420 7468 6520 6474 7970 6520 7b73 656c  t the dtype {sel
-00022820: 662e 6474 7970 652e 6e61 6d65 2172 7d22  f.dtype.name!r}"
-00022830: 290d 0a0d 0a20 2020 2020 2020 2074 656d  )....        tem
-00022840: 7020 3d20 656d 7074 7928 7365 6c66 2e73  p = empty(self.s
-00022850: 6861 7065 2c20 6474 7970 653d 7365 6c66  hape, dtype=self
-00022860: 2e64 7479 7065 290d 0a20 2020 2020 2020  .dtype)..       
-00022870: 2069 6620 6162 7328 7065 7269 6f64 7329   if abs(periods)
-00022880: 203e 3d20 6c65 6e28 7365 6c66 293a 0d0a   >= len(self):..
-00022890: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-000228a0: 2e66 696c 6c28 696e 7661 6c69 6429 0d0a  .fill(invalid)..
-000228b0: 2020 2020 2020 2020 656c 6966 2070 6572          elif per
-000228c0: 696f 6473 203e 2030 3a0d 0a20 2020 2020  iods > 0:..     
-000228d0: 2020 2020 2020 2074 656d 705b 3a70 6572         temp[:per
-000228e0: 696f 6473 5d20 3d20 696e 7661 6c69 640d  iods] = invalid.
-000228f0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00022900: 206f 7574 7075 7420 696e 746f 2074 6865   output into the
-00022910: 2065 6d70 7479 2061 7272 6179 2077 6520   empty array we 
-00022920: 6372 6561 7465 642c 206e 702e 7375 6274  created, np.subt
-00022930: 7261 6374 2077 696c 6c20 6361 6c6c 2046  ract will call F
-00022940: 6173 7441 7272 6179 2773 2073 7562 7472  astArray's subtr
-00022950: 6163 740d 0a20 2020 2020 2020 2020 2020  act..           
-00022960: 206e 702e 7375 6274 7261 6374 2873 656c   np.subtract(sel
-00022970: 665b 7065 7269 6f64 733a 5d2c 2073 656c  f[periods:], sel
-00022980: 665b 3a2d 7065 7269 6f64 735d 2c20 6f75  f[:-periods], ou
-00022990: 743d 7465 6d70 5b70 6572 696f 6473 3a5d  t=temp[periods:]
-000229a0: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-000229b0: 0d0a 2020 2020 2020 2020 2020 2020 7465  ..            te
-000229c0: 6d70 5b70 6572 696f 6473 3a5d 203d 2069  mp[periods:] = i
-000229d0: 6e76 616c 6964 0d0a 2020 2020 2020 2020  nvalid..        
-000229e0: 2020 2020 6e70 2e73 7562 7472 6163 7428      np.subtract(
-000229f0: 7365 6c66 5b3a 7065 7269 6f64 735d 2c20  self[:periods], 
-00022a00: 7365 6c66 5b2d 7065 7269 6f64 733a 5d2c  self[-periods:],
-00022a10: 206f 7574 3d74 656d 705b 3a70 6572 696f   out=temp[:perio
-00022a20: 6473 5d29 0d0a 2020 2020 2020 2020 7265  ds])..        re
-00022a30: 7475 726e 2074 656d 700d 0a0d 0a20 2020  turn temp....   
-00022a40: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-00022a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022a70: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00022a80: 6465 6620 6973 6e61 2873 656c 6629 202d  def isna(self) -
-00022a90: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-00022aa0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00022ab0: 2020 2069 736e 616e 2069 7320 6d61 7070     isnan is mapp
-00022ac0: 6564 2064 6972 6563 746c 7920 746f 2069  ed directly to i
-00022ad0: 736e 616e 2829 0d0a 2020 2020 2020 2020  snan()..        
-00022ae0: 4361 7465 676f 7269 6361 6c73 2061 6e64  Categoricals and
-00022af0: 2044 6174 6554 696d 6520 7461 6b65 206f   DateTime take o
-00022b00: 7665 7220 6973 6e61 6e2e 0d0a 2020 2020  ver isnan...    
-00022b10: 2020 2020 4661 7374 4172 7261 7920 6861      FastArray ha
-00022b20: 6e64 6c65 7320 7365 6e74 696e 656c 732e  ndles sentinels.
-00022b30: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00022b40: 613d 6172 616e 6765 2831 3030 2e30 290d  a=arange(100.0).
-00022b50: 0a20 2020 2020 2020 203e 3e3e 2061 5b35  .        >>> a[5
-00022b60: 5d3d 6e70 2e6e 616e 0d0a 2020 2020 2020  ]=np.nan..      
-00022b70: 2020 3e3e 3e20 615b 3837 5d3d 6e70 2e6e    >>> a[87]=np.n
-00022b80: 616e 0d0a 2020 2020 2020 2020 3e3e 3e20  an..        >>> 
-00022b90: 7375 6d28 612e 6973 6e61 2829 290d 0a20  sum(a.isna()).. 
-00022ba0: 2020 2020 2020 2032 0d0a 2020 2020 2020         2..      
-00022bb0: 2020 3e3e 3e20 7375 6d28 612e 6173 7479    >>> sum(a.asty
-00022bc0: 7065 286e 702e 696e 7433 3229 2e69 736e  pe(np.int32).isn
-00022bd0: 6128 2929 0d0a 2020 2020 2020 2020 320d  a())..        2.
-00022be0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00022bf0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00022c00: 662e 6973 6e61 6e28 290d 0a0d 0a20 2020  f.isnan()....   
-00022c10: 2064 6566 206e 6f74 6e61 2873 656c 6629   def notna(self)
-00022c20: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-00022c30: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00022c40: 2020 2020 206e 6f74 6e61 2069 7320 6d61       notna is ma
-00022c50: 7070 6564 2064 6972 6563 746c 7920 746f  pped directly to
-00022c60: 2069 736e 6f74 6e61 6e28 290d 0a20 2020   isnotnan()..   
-00022c70: 2020 2020 2043 6174 6567 6f72 6963 616c       Categorical
-00022c80: 7320 616e 6420 4461 7465 5469 6d65 2074  s and DateTime t
-00022c90: 616b 6520 6f76 6572 2069 736e 6f74 6e61  ake over isnotna
-00022ca0: 6e2e 0d0a 2020 2020 2020 2020 4661 7374  n...        Fast
-00022cb0: 4172 7261 7920 6861 6e64 6c65 7320 7365  Array handles se
-00022cc0: 6e74 696e 656c 732e 0d0a 0d0a 2020 2020  ntinels.....    
-00022cd0: 2020 2020 3e3e 3e20 613d 6172 616e 6765      >>> a=arange
-00022ce0: 2831 3030 2e30 290d 0a20 2020 2020 2020  (100.0)..       
-00022cf0: 203e 3e3e 2061 5b35 5d3d 6e70 2e6e 616e   >>> a[5]=np.nan
-00022d00: 0d0a 2020 2020 2020 2020 3e3e 3e20 615b  ..        >>> a[
-00022d10: 3837 5d3d 6e70 2e6e 616e 0d0a 2020 2020  87]=np.nan..    
-00022d20: 2020 2020 3e3e 3e20 7375 6d28 612e 6e6f      >>> sum(a.no
-00022d30: 746e 6128 2929 0d0a 2020 2020 2020 2020  tna())..        
-00022d40: 3938 0d0a 2020 2020 2020 2020 3e3e 3e20  98..        >>> 
-00022d50: 7375 6d28 612e 6173 7479 7065 286e 702e  sum(a.astype(np.
-00022d60: 696e 7433 3229 2e6e 6f74 6e61 2829 290d  int32).notna()).
-00022d70: 0a20 2020 2020 2020 2039 380d 0a20 2020  .        98..   
-00022d80: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00022d90: 2020 7265 7475 726e 2073 656c 662e 6973    return self.is
-00022da0: 6e6f 746e 616e 2829 0d0a 0d0a 2020 2020  notnan()....    
-00022db0: 6465 6620 7265 706c 6163 656e 6128 7365  def replacena(se
-00022dc0: 6c66 2c20 7661 6c75 652c 2069 6e70 6c61  lf, value, inpla
-00022dd0: 6365 3d46 616c 7365 2920 2d3e 2046 6173  ce=False) -> Fas
-00022de0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00022df0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-00022e00: 7475 726e 2061 2060 4661 7374 4172 7261  turn a `FastArra
-00022e10: 7960 2077 6974 6820 616c 6c20 4e61 4e20  y` with all NaN 
-00022e20: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00022e30: 6573 2073 6574 2074 6f20 7468 6520 7370  es set to the sp
-00022e40: 6563 6966 6965 6420 7661 6c75 652e 0d0a  ecified value...
-00022e50: 0d0a 2020 2020 2020 2020 4f70 7469 6f6e  ..        Option
-00022e60: 616c 6c79 2c20 796f 7520 6361 6e20 6d6f  ally, you can mo
-00022e70: 6469 6679 2074 6865 206f 7269 6769 6e61  dify the origina
-00022e80: 6c20 6046 6173 7441 7272 6179 6020 6966  l `FastArray` if
-00022e90: 2069 7427 7320 6e6f 7420 6c6f 636b 6564   it's not locked
-00022ea0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00022eb0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00022ec0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00022ed0: 2020 2020 2076 616c 7565 203a 2073 6361       value : sca
-00022ee0: 6c61 7220 6f72 2061 7272 6179 0d0a 2020  lar or array..  
-00022ef0: 2020 2020 2020 2020 2020 4120 7661 6c75            A valu
-00022f00: 6520 6f72 2061 6e20 6172 7261 7920 6f66  e or an array of
-00022f10: 2076 616c 7565 7320 746f 2072 6570 6c61   values to repla
-00022f20: 6365 2061 6c6c 204e 614e 2061 6e64 2069  ce all NaN and i
-00022f30: 6e76 616c 6964 2076 616c 7565 732e 2049  nvalid values. I
-00022f40: 6620 616e 0d0a 2020 2020 2020 2020 2020  f an..          
-00022f50: 2020 6172 7261 792c 2074 6865 206e 756d    array, the num
-00022f60: 6265 7220 6f66 2076 616c 7565 7320 6d75  ber of values mu
-00022f70: 7374 2065 7175 616c 2074 6865 206e 756d  st equal the num
-00022f80: 6265 7220 6f66 204e 614e 2061 6e64 2069  ber of NaN and i
-00022f90: 6e76 616c 6964 2076 616c 7565 732e 0d0a  nvalid values...
-00022fa0: 2020 2020 2020 2020 696e 706c 6163 6520          inplace 
-00022fb0: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00022fc0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00022fd0: 2020 2049 6620 4661 6c73 652c 2072 6574     If False, ret
-00022fe0: 7572 6e20 6120 636f 7079 206f 6620 7468  urn a copy of th
-00022ff0: 6520 6046 6173 7441 7272 6179 602e 2049  e `FastArray`. I
-00023000: 6620 5472 7565 2c20 6d6f 6469 6679 2074  f True, modify t
-00023010: 6865 206f 7269 6769 6e61 6c2e 0d0a 2020  he original...  
-00023020: 2020 2020 2020 2020 2020 5468 6973 2077            This w
-00023030: 696c 6c20 6d6f 6469 6679 2061 6e79 206f  ill modify any o
-00023040: 7468 6572 2076 6965 7773 206f 6e20 7468  ther views on th
-00023050: 6973 206f 626a 6563 742e 2054 6869 7320  is object. This 
-00023060: 6661 696c 7320 6966 2074 6865 0d0a 2020  fails if the..  
-00023070: 2020 2020 2020 2020 2020 6046 6173 7441            `FastA
-00023080: 7272 6179 6020 6973 206c 6f63 6b65 642e  rray` is locked.
-00023090: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-000230a0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-000230b0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-000230c0: 6173 7441 7272 6179 6020 6f72 204e 6f6e  astArray` or Non
-000230d0: 650d 0a20 2020 2020 2020 2020 2020 2054  e..            T
-000230e0: 6865 2060 4661 7374 4172 7261 7960 2077  he `FastArray` w
-000230f0: 696c 6c20 6265 2074 6865 2073 616d 6520  ill be the same 
-00023100: 7369 7a65 2061 6e64 2064 7479 7065 2061  size and dtype a
-00023110: 7320 7468 6520 6f72 6967 696e 616c 2061  s the original a
-00023120: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
-00023130: 2020 2052 6574 7572 6e73 204e 6f6e 6520     Returns None 
-00023140: 6966 2060 6069 6e70 6c61 6365 203d 2054  if ``inplace = T
-00023150: 7275 6560 602e 0d0a 0d0a 2020 2020 2020  rue``.....      
-00023160: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-00023170: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00023180: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
-00023190: 6669 6c6c 6e61 203a 2052 6570 6c61 6365  fillna : Replace
-000231a0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-000231b0: 2076 616c 7565 7320 7769 7468 2061 2073   values with a s
-000231c0: 7065 6369 6669 6564 2076 616c 7565 206f  pecified value o
-000231d0: 7220 6e65 6172 6279 2064 6174 612e 0d0a  r nearby data...
-000231e0: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
-000231f0: 6669 6c6c 6e61 203a 2052 6570 6c61 6365  fillna : Replace
-00023200: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-00023210: 2076 616c 7565 7320 7769 7468 2061 2073   values with a s
-00023220: 7065 6369 6669 6564 2076 616c 7565 206f  pecified value o
-00023230: 7220 6e65 6172 6279 2064 6174 612e 0d0a  r nearby data...
-00023240: 2020 2020 2020 2020 4361 7465 676f 7269          Categori
-00023250: 6361 6c2e 6669 6c6c 5f66 6f72 7761 7264  cal.fill_forward
-00023260: 203a 2052 6570 6c61 6365 204e 614e 2061   : Replace NaN a
-00023270: 6e64 2069 6e76 616c 6964 2076 616c 7565  nd invalid value
-00023280: 7320 7769 7468 2074 6865 206c 6173 7420  s with the last 
-00023290: 7661 6c69 6420 6772 6f75 7020 7661 6c75  valid group valu
-000232a0: 652e 0d0a 2020 2020 2020 2020 4361 7465  e...        Cate
-000232b0: 676f 7269 6361 6c2e 6669 6c6c 5f62 6163  gorical.fill_bac
-000232c0: 6b77 6172 6420 3a20 5265 706c 6163 6520  kward : Replace 
-000232d0: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
-000232e0: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
-000232f0: 6e65 7874 2076 616c 6964 2067 726f 7570  next valid group
-00023300: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00023310: 2047 726f 7570 4279 2e66 696c 6c5f 666f   GroupBy.fill_fo
-00023320: 7277 6172 6420 3a20 5265 706c 6163 6520  rward : Replace 
-00023330: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
-00023340: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
-00023350: 6c61 7374 2076 616c 6964 2067 726f 7570  last valid group
-00023360: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00023370: 2047 726f 7570 4279 2e66 696c 6c5f 6261   GroupBy.fill_ba
-00023380: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
-00023390: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-000233a0: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
-000233b0: 206e 6578 7420 7661 6c69 6420 6772 6f75   next valid grou
-000233c0: 7020 7661 6c75 652e 0d0a 0d0a 2020 2020  p value.....    
-000233d0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-000233e0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-000233f0: 2020 2020 2020 2020 5265 706c 6163 6520          Replace 
-00023400: 616c 6c20 696e 7374 616e 6365 7320 6f66  all instances of
-00023410: 204e 614e 2077 6974 6820 6120 7369 6e67   NaN with a sing
-00023420: 6c65 2076 616c 7565 3a0d 0a0d 0a20 2020  le value:....   
-00023430: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-00023440: 4661 7374 4172 7261 7928 5b72 742e 6e61  FastArray([rt.na
-00023450: 6e2c 2031 2e30 2c20 7274 2e6e 616e 2c20  n, 1.0, rt.nan, 
-00023460: 332e 305d 290d 0a20 2020 2020 2020 203e  3.0])..        >
-00023470: 3e3e 2061 2e72 6570 6c61 6365 6e61 2830  >> a.replacena(0
-00023480: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00023490: 7272 6179 285b 302e 2c20 312e 2c20 302e  rray([0., 1., 0.
-000234a0: 2c20 332e 5d29 0d0a 0d0a 2020 2020 2020  , 3.])....      
-000234b0: 2020 5265 706c 6163 6520 616c 6c20 696e    Replace all in
-000234c0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-000234d0: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
-000234e0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-000234f0: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
-00023500: 332c 2034 2c20 355d 290d 0a20 2020 2020  3, 4, 5])..     
-00023510: 2020 203e 3e3e 2062 5b30 3a33 5d20 3d20     >>> b[0:3] = 
-00023520: 622e 696e 760d 0a20 2020 2020 2020 203e  b.inv..        >
-00023530: 3e3e 2062 2e72 6570 6c61 6365 6e61 2830  >> b.replacena(0
-00023540: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00023550: 7272 6179 285b 302c 2030 2c20 302c 2033  rray([0, 0, 0, 3
-00023560: 2c20 342c 2035 5d29 0d0a 0d0a 2020 2020  , 4, 5])....    
-00023570: 2020 2020 5265 706c 6163 6520 6561 6368      Replace each
-00023580: 2069 6e73 7461 6e63 6520 6f66 204e 614e   instance of NaN
-00023590: 2077 6974 6820 6120 6469 6666 6572 656e   with a differen
-000235a0: 7420 7661 6c75 653a 0d0a 0d0a 2020 2020  t value:....    
-000235b0: 2020 2020 3e3e 3e20 612e 7265 706c 6163      >>> a.replac
-000235c0: 656e 6128 5b30 2c20 325d 290d 0a20 2020  ena([0, 2])..   
-000235d0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-000235e0: 302e 2c20 312e 2c20 322e 2c20 332e 5d29  0., 1., 2., 3.])
-000235f0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00023600: 2020 2020 2020 2069 6e73 7420 3d20 7365         inst = se
-00023610: 6c66 2069 6620 696e 706c 6163 6520 656c  lf if inplace el
-00023620: 7365 2073 656c 662e 636f 7079 2829 0d0a  se self.copy()..
-00023630: 2020 2020 2020 2020 6973 6e61 203d 2069          isna = i
-00023640: 6e73 742e 6973 6e61 2829 0d0a 2020 2020  nst.isna()..    
-00023650: 2020 2020 6966 2069 736e 612e 616e 7928      if isna.any(
-00023660: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00023670: 696e 7374 5b69 736e 615d 203d 2076 616c  inst[isna] = val
-00023680: 7565 0d0a 2020 2020 2020 2020 6966 2069  ue..        if i
-00023690: 6e70 6c61 6365 3a0d 0a20 2020 2020 2020  nplace:..       
-000236a0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-000236b0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000236c0: 2069 6e73 740d 0a0d 0a20 2020 2064 6566   inst....    def
-000236d0: 2066 696c 6c6e 6128 7365 6c66 2c20 7661   fillna(self, va
-000236e0: 6c75 653d 4e6f 6e65 2c20 6d65 7468 6f64  lue=None, method
-000236f0: 3d4e 6f6e 652c 2069 6e70 6c61 6365 3d46  =None, inplace=F
-00023700: 616c 7365 2c20 6c69 6d69 743d 4e6f 6e65  alse, limit=None
-00023710: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-00023720: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00023730: 2020 2020 2020 5265 706c 6163 6520 4e61        Replace Na
-00023740: 4e20 616e 6420 696e 7661 6c69 6420 7661  N and invalid va
-00023750: 6c75 6573 2077 6974 6820 6120 7370 6563  lues with a spec
-00023760: 6966 6965 6420 7661 6c75 6520 6f72 206e  ified value or n
-00023770: 6561 7262 7920 6461 7461 2e0d 0a0d 0a20  earby data..... 
-00023780: 2020 2020 2020 204f 7074 696f 6e61 6c6c         Optionall
-00023790: 792c 2079 6f75 2063 616e 206d 6f64 6966  y, you can modif
-000237a0: 7920 7468 6520 6f72 6967 696e 616c 2060  y the original `
-000237b0: 4661 7374 4172 7261 7960 2069 6620 6974  FastArray` if it
-000237c0: 2773 206e 6f74 206c 6f63 6b65 642e 0d0a  's not locked...
-000237d0: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-000237e0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-000237f0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00023800: 2020 7661 6c75 6520 3a20 7363 616c 6172    value : scalar
-00023810: 206f 7220 6172 7261 792c 2064 6566 6175   or array, defau
-00023820: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-00023830: 2020 2020 2041 2076 616c 7565 206f 7220       A value or 
-00023840: 616e 2061 7272 6179 206f 6620 7661 6c75  an array of valu
-00023850: 6573 2074 6f20 7265 706c 6163 6520 616c  es to replace al
-00023860: 6c20 4e61 4e20 616e 6420 696e 7661 6c69  l NaN and invali
-00023870: 6420 7661 6c75 6573 2e0d 0a20 2020 2020  d values...     
-00023880: 2020 2020 2020 2041 2060 7661 6c75 6560         A `value`
-00023890: 2069 7320 7265 7175 6972 6564 2069 6620   is required if 
-000238a0: 6060 6d65 7468 6f64 203d 204e 6f6e 6560  ``method = None`
-000238b0: 602e 2041 6e20 6172 7261 7920 6361 6e20  `. An array can 
-000238c0: 6265 2075 7365 6420 6f6e 6c79 2077 6865  be used only whe
-000238d0: 6e0d 0a20 2020 2020 2020 2020 2020 2060  n..            `
-000238e0: 606d 6574 686f 6420 3d20 4e6f 6e65 6060  `method = None``
-000238f0: 2e20 4966 2061 6e20 6172 7261 7920 6973  . If an array is
-00023900: 2075 7365 642c 2074 6865 206e 756d 6265   used, the numbe
-00023910: 7220 6f66 2076 616c 7565 7320 696e 2074  r of values in t
-00023920: 6865 2061 7272 6179 0d0a 2020 2020 2020  he array..      
-00023930: 2020 2020 2020 6d75 7374 2065 7175 616c        must equal
-00023940: 2074 6865 206e 756d 6265 7220 6f66 204e   the number of N
-00023950: 614e 2061 6e64 2069 6e76 616c 6964 2076  aN and invalid v
-00023960: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
-00023970: 6d65 7468 6f64 203a 207b 4e6f 6e65 2c20  method : {None, 
-00023980: 2762 6163 6b66 696c 6c27 2c20 2762 6669  'backfill', 'bfi
-00023990: 6c6c 272c 2027 7061 6427 2c20 2766 6669  ll', 'pad', 'ffi
-000239a0: 6c6c 277d 2c20 6465 6661 756c 7420 4e6f  ll'}, default No
-000239b0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-000239c0: 4d65 7468 6f64 2074 6f20 7573 6520 746f  Method to use to
-000239d0: 2070 726f 7061 6761 7465 2076 616c 6964   propagate valid
-000239e0: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
-000239f0: 2020 2020 2020 2020 2a20 6261 636b 6669          * backfi
-00023a00: 6c6c 2f62 6669 6c6c 3a20 5072 6f70 6167  ll/bfill: Propag
-00023a10: 6174 6573 2074 6865 206e 6578 7420 656e  ates the next en
-00023a20: 636f 756e 7465 7265 6420 7661 6c69 6420  countered valid 
-00023a30: 7661 6c75 6520 6261 636b 7761 7264 2e0d  value backward..
-00023a40: 0a20 2020 2020 2020 2020 2020 2020 2043  .              C
-00023a50: 616c 6c73 203a 6d65 7468 3a60 4661 7374  alls :meth:`Fast
-00023a60: 4172 7261 792e 6669 6c6c 5f62 6163 6b77  Array.fill_backw
-00023a70: 6172 6460 2e0d 0a20 2020 2020 2020 2020  ard`...         
-00023a80: 2020 202a 2070 6164 2f66 6669 6c6c 3a20     * pad/ffill: 
-00023a90: 5072 6f70 6167 6174 6573 2074 6865 206c  Propagates the l
-00023aa0: 6173 7420 656e 636f 756e 7465 7265 6420  ast encountered 
-00023ab0: 7661 6c69 6420 7661 6c75 6520 666f 7277  valid value forw
-00023ac0: 6172 642e 2043 616c 6c73 0d0a 2020 2020  ard. Calls..    
-00023ad0: 2020 2020 2020 2020 2020 3a6d 6574 683a            :meth:
-00023ae0: 6046 6173 7441 7272 6179 2e66 696c 6c5f  `FastArray.fill_
-00023af0: 666f 7277 6172 6460 2e0d 0a20 2020 2020  forward`...     
-00023b00: 2020 2020 2020 202a 204e 6f6e 653a 2041         * None: A
-00023b10: 2072 6570 6c61 6365 6d65 6e74 2076 616c   replacement val
-00023b20: 7565 2069 7320 7265 7175 6972 6564 2069  ue is required i
-00023b30: 6620 6060 6d65 7468 6f64 203d 204e 6f6e  f ``method = Non
-00023b40: 6560 602e 2043 616c 6c73 0d0a 2020 2020  e``. Calls..    
-00023b50: 2020 2020 2020 2020 2020 3a6d 6574 683a            :meth:
-00023b60: 6046 6173 7441 7272 6179 2e72 6570 6c61  `FastArray.repla
-00023b70: 6365 6e61 602e 0d0a 2020 2020 2020 2020  cena`...        
-00023b80: 2020 2020 4966 2074 6865 7265 2773 206e      If there's n
-00023b90: 6f74 2061 2076 616c 6964 2076 616c 7565  ot a valid value
-00023ba0: 2074 6f20 7072 6f70 6167 6174 6520 666f   to propagate fo
-00023bb0: 7277 6172 6420 6f72 2062 6163 6b77 6172  rward or backwar
-00023bc0: 642c 2074 6865 204e 614e 206f 720d 0a20  d, the NaN or.. 
-00023bd0: 2020 2020 2020 2020 2020 2069 6e76 616c             inval
-00023be0: 6964 2076 616c 7565 2069 7320 6e6f 7420  id value is not 
-00023bf0: 7265 706c 6163 6564 2075 6e6c 6573 7320  replaced unless 
-00023c00: 796f 7520 616c 736f 2073 7065 6369 6679  you also specify
-00023c10: 2061 2060 7661 6c75 6560 2e0d 0a20 2020   a `value`...   
-00023c20: 2020 2020 2069 6e70 6c61 6365 203a 2062       inplace : b
-00023c30: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-00023c40: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-00023c50: 4966 2046 616c 7365 2c20 7265 7475 726e  If False, return
-00023c60: 2061 2063 6f70 7920 6f66 2074 6865 2060   a copy of the `
-00023c70: 4661 7374 4172 7261 7960 2e20 4966 2054  FastArray`. If T
-00023c80: 7275 652c 206d 6f64 6966 7920 6f72 6967  rue, modify orig
-00023c90: 696e 616c 2064 6174 612e 0d0a 2020 2020  inal data...    
-00023ca0: 2020 2020 2020 2020 5468 6973 2077 696c          This wil
-00023cb0: 6c20 6d6f 6469 6679 2061 6e79 206f 7468  l modify any oth
-00023cc0: 6572 2076 6965 7773 206f 6e20 7468 6973  er views on this
-00023cd0: 206f 626a 6563 742e 2054 6869 7320 6661   object. This fa
-00023ce0: 696c 7320 6966 2074 6865 0d0a 2020 2020  ils if the..    
-00023cf0: 2020 2020 2020 2020 6046 6173 7441 7272          `FastArr
-00023d00: 6179 6020 6973 206c 6f63 6b65 642e 0d0a  ay` is locked...
-00023d10: 2020 2020 2020 2020 6c69 6d69 7420 3a20          limit : 
-00023d20: 696e 742c 2064 6566 6175 6c74 204e 6f6e  int, default Non
-00023d30: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
-00023d40: 6620 606d 6574 686f 6460 2069 7320 7370  f `method` is sp
-00023d50: 6563 6966 6965 642c 2074 6869 7320 6973  ecified, this is
-00023d60: 2074 6865 206d 6178 696d 6975 6d20 6e75   the maximium nu
-00023d70: 6d62 6572 206f 6620 636f 6e73 6563 7574  mber of consecut
-00023d80: 6976 6520 4e61 4e20 6f72 0d0a 2020 2020  ive NaN or..    
-00023d90: 2020 2020 2020 2020 696e 7661 6c69 6420          invalid 
-00023da0: 7661 6c75 6573 2074 6f20 6669 6c6c 2e20  values to fill. 
-00023db0: 4966 2074 6865 7265 2069 7320 6120 6761  If there is a ga
-00023dc0: 7020 7769 7468 206d 6f72 6520 7468 616e  p with more than
-00023dd0: 2074 6869 7320 6e75 6d62 6572 206f 660d   this number of.
-00023de0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-00023df0: 7365 6375 7469 7665 204e 614e 206f 7220  secutive NaN or 
-00023e00: 696e 7661 6c69 6420 7661 6c75 6573 2c20  invalid values, 
-00023e10: 7468 6520 6761 7020 7769 6c6c 2062 6520  the gap will be 
-00023e20: 6f6e 6c79 2070 6172 7469 616c 6c79 2066  only partially f
-00023e30: 696c 6c65 642e 0d0a 0d0a 2020 2020 2020  illed.....      
-00023e40: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00023e50: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00023e60: 2020 2020 6046 6173 7441 7272 6179 600d      `FastArray`.
-00023e70: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-00023e80: 2060 4661 7374 4172 7261 7960 2077 696c   `FastArray` wil
-00023e90: 6c20 6265 2074 6865 2073 616d 6520 7369  l be the same si
-00023ea0: 7a65 2061 6e64 2064 7479 7065 2061 7320  ze and dtype as 
-00023eb0: 7468 6520 6f72 6967 696e 616c 2061 7272  the original arr
-00023ec0: 6179 2e0d 0a0d 0a20 2020 2020 2020 2053  ay.....        S
-00023ed0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-00023ee0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00023ef0: 2020 2072 6970 7461 626c 652e 7274 5f66     riptable.rt_f
-00023f00: 6173 7461 7272 6179 6e75 6d62 612e 6669  astarraynumba.fi
-00023f10: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
-00023f20: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00023f30: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00023f40: 0d0a 2020 2020 2020 2020 2020 2020 7468  ..            th
-00023f50: 6520 6c61 7374 2076 616c 6964 2076 616c  e last valid val
-00023f60: 7565 2e0d 0a20 2020 2020 2020 2072 6970  ue...        rip
-00023f70: 7461 626c 652e 7274 5f66 6173 7461 7272  table.rt_fastarr
-00023f80: 6179 6e75 6d62 612e 6669 6c6c 5f62 6163  aynumba.fill_bac
-00023f90: 6b77 6172 6420 3a20 5265 706c 6163 6520  kward : Replace 
-00023fa0: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
-00023fb0: 7661 6c75 6573 2077 6974 680d 0a20 2020  values with..   
-00023fc0: 2020 2020 2020 2020 2074 6865 206e 6578           the nex
-00023fd0: 7420 7661 6c69 6420 7661 6c75 652e 0d0a  t valid value...
-00023fe0: 2020 2020 2020 2020 7269 7074 6162 6c65          riptable
-00023ff0: 2e66 696c 6c5f 666f 7277 6172 6420 3a20  .fill_forward : 
-00024000: 5265 706c 6163 6520 4e61 4e20 616e 6420  Replace NaN and 
-00024010: 696e 7661 6c69 6420 7661 6c75 6573 2077  invalid values w
-00024020: 6974 6820 7468 6520 6c61 7374 2076 616c  ith the last val
-00024030: 6964 0d0a 2020 2020 2020 2020 2020 2020  id..            
-00024040: 7661 6c75 652e 0d0a 2020 2020 2020 2020  value...        
-00024050: 7269 7074 6162 6c65 2e66 696c 6c5f 6261  riptable.fill_ba
-00024060: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
-00024070: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-00024080: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
-00024090: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
-000240a0: 2020 2020 2020 2020 2076 616c 7565 2e0d           value..
-000240b0: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
-000240c0: 2e66 696c 6c6e 6120 3a20 5265 706c 6163  .fillna : Replac
-000240d0: 6520 4e61 4e20 616e 6420 696e 7661 6c69  e NaN and invali
-000240e0: 6420 7661 6c75 6573 2077 6974 6820 6120  d values with a 
-000240f0: 7370 6563 6966 6965 6420 7661 6c75 6520  specified value 
-00024100: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-00024110: 6e65 6172 6279 2064 6174 612e 0d0a 2020  nearby data...  
-00024120: 2020 2020 2020 4661 7374 4172 7261 792e        FastArray.
-00024130: 7265 706c 6163 656e 6120 3a20 5265 706c  replacena : Repl
-00024140: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
-00024150: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
-00024160: 6120 7370 6563 6966 6965 6420 7661 6c75  a specified valu
-00024170: 652e 0d0a 2020 2020 2020 2020 4361 7465  e...        Cate
-00024180: 676f 7269 6361 6c2e 6669 6c6c 5f66 6f72  gorical.fill_for
-00024190: 7761 7264 203a 2052 6570 6c61 6365 204e  ward : Replace N
-000241a0: 614e 2061 6e64 2069 6e76 616c 6964 2076  aN and invalid v
-000241b0: 616c 7565 7320 7769 7468 2074 6865 206c  alues with the l
-000241c0: 6173 7420 7661 6c69 640d 0a20 2020 2020  ast valid..     
-000241d0: 2020 2020 2020 2067 726f 7570 2076 616c         group val
-000241e0: 7565 2e0d 0a20 2020 2020 2020 2043 6174  ue...        Cat
-000241f0: 6567 6f72 6963 616c 2e66 696c 6c5f 6261  egorical.fill_ba
-00024200: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
-00024210: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-00024220: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
-00024230: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
-00024240: 2020 2020 2020 2020 2067 726f 7570 2076           group v
-00024250: 616c 7565 2e0d 0a20 2020 2020 2020 2047  alue...        G
-00024260: 726f 7570 4279 2e66 696c 6c5f 666f 7277  roupBy.fill_forw
-00024270: 6172 6420 3a20 5265 706c 6163 6520 4e61  ard : Replace Na
-00024280: 4e20 616e 6420 696e 7661 6c69 6420 7661  N and invalid va
-00024290: 6c75 6573 2077 6974 6820 7468 6520 6c61  lues with the la
-000242a0: 7374 2076 616c 6964 0d0a 2020 2020 2020  st valid..      
-000242b0: 2020 2020 2020 6772 6f75 7020 7661 6c75        group valu
-000242c0: 652e 0d0a 2020 2020 2020 2020 4772 6f75  e...        Grou
-000242d0: 7042 792e 6669 6c6c 5f62 6163 6b77 6172  pBy.fill_backwar
-000242e0: 6420 3a20 5265 706c 6163 6520 4e61 4e20  d : Replace NaN 
-000242f0: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00024300: 6573 2077 6974 6820 7468 6520 6e65 7874  es with the next
-00024310: 2076 616c 6964 0d0a 2020 2020 2020 2020   valid..        
-00024320: 2020 2020 6772 6f75 7020 7661 6c75 652e      group value.
-00024330: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-00024340: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-00024350: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00024360: 5265 706c 6163 6520 616c 6c20 4e61 4e20  Replace all NaN 
-00024370: 7661 6c75 6573 2077 6974 6820 3073 3a0d  values with 0s:.
-00024380: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00024390: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-000243a0: 5b72 742e 6e61 6e2c 2031 2e30 2c20 7274  [rt.nan, 1.0, rt
-000243b0: 2e6e 616e 2c20 7274 2e6e 616e 2c20 7274  .nan, rt.nan, rt
-000243c0: 2e6e 616e 2c20 352e 305d 290d 0a20 2020  .nan, 5.0])..   
-000243d0: 2020 2020 203e 3e3e 2061 2e66 696c 6c6e       >>> a.filln
-000243e0: 6128 3029 0d0a 2020 2020 2020 2020 4661  a(0)..        Fa
-000243f0: 7374 4172 7261 7928 5b30 2e2c 2031 2e2c  stArray([0., 1.,
-00024400: 2030 2e2c 2030 2e2c 2030 2e2c 2035 2e5d   0., 0., 0., 5.]
-00024410: 290d 0a0d 0a20 2020 2020 2020 2052 6570  )....        Rep
-00024420: 6c61 6365 2061 6c6c 2069 6e76 616c 6964  lace all invalid
-00024430: 2076 616c 7565 7320 7769 7468 2030 733a   values with 0s:
-00024440: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00024450: 6220 3d20 7274 2e46 6173 7441 7272 6179  b = rt.FastArray
-00024460: 285b 302c 2031 2c20 322c 2033 2c20 342c  ([0, 1, 2, 3, 4,
-00024470: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
-00024480: 3e20 625b 303a 335d 203d 2062 2e69 6e76  > b[0:3] = b.inv
-00024490: 0d0a 2020 2020 2020 2020 3e3e 3e20 622e  ..        >>> b.
-000244a0: 6669 6c6c 6e61 2830 290d 0a20 2020 2020  fillna(0)..     
-000244b0: 2020 2046 6173 7441 7272 6179 285b 302c     FastArray([0,
-000244c0: 2030 2c20 302c 2033 2c20 342c 2035 5d29   0, 0, 3, 4, 5])
-000244d0: 0d0a 0d0a 2020 2020 2020 2020 5265 706c  ....        Repl
-000244e0: 6163 6520 6561 6368 2069 6e73 7461 6e63  ace each instanc
-000244f0: 6520 6f66 204e 614e 2077 6974 6820 6120  e of NaN with a 
-00024500: 6469 6666 6572 656e 7420 7661 6c75 653a  different value:
-00024510: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00024520: 612e 6669 6c6c 6e61 285b 302c 2032 2c20  a.fillna([0, 2, 
-00024530: 332c 2034 5d29 0d0a 2020 2020 2020 2020  3, 4])..        
-00024540: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
-00024550: 2e2c 2032 2e2c 2033 2e2c 2034 2e2c 2035  ., 2., 3., 4., 5
-00024560: 2e5d 290d 0a0d 0a20 2020 2020 2020 2050  .])....        P
-00024570: 726f 7061 6761 7465 2074 6865 206c 6173  ropagate the las
-00024580: 7420 656e 636f 756e 7465 7265 6420 7661  t encountered va
-00024590: 6c69 6420 7661 6c75 6520 666f 7277 6172  lid value forwar
-000245a0: 642e 204e 6f74 6520 7468 6174 2077 6865  d. Note that whe
-000245b0: 7265 2074 6865 7265 2773 206e 6f0d 0a20  re there's no.. 
-000245c0: 2020 2020 2020 2076 616c 6964 2076 616c         valid val
-000245d0: 7565 2074 6f20 7072 6f70 6167 6174 652c  ue to propagate,
-000245e0: 2074 6865 204e 614e 206f 7220 696e 7661   the NaN or inva
-000245f0: 6c69 6420 7661 6c75 6520 6973 6e27 7420  lid value isn't 
-00024600: 7265 706c 6163 6564 2e0d 0a0d 0a20 2020  replaced.....   
-00024610: 2020 2020 203e 3e3e 2061 2e66 696c 6c6e       >>> a.filln
-00024620: 6128 6d65 7468 6f64 203d 2027 6666 696c  a(method = 'ffil
-00024630: 6c27 290d 0a20 2020 2020 2020 2046 6173  l')..        Fas
-00024640: 7441 7272 6179 285b 6e61 6e2c 2020 312e  tArray([nan,  1.
-00024650: 2c20 2031 2e2c 2020 312e 2c20 2031 2e2c  ,  1.,  1.,  1.,
-00024660: 2020 352e 5d29 0d0a 0d0a 2020 2020 2020    5.])....      
-00024670: 2020 596f 7520 6361 6e20 7573 6520 7468    You can use th
-00024680: 6520 6076 616c 7565 6020 7061 7261 6d65  e `value` parame
-00024690: 7465 7220 746f 2073 7065 6369 6679 2061  ter to specify a
-000246a0: 2076 616c 7565 2074 6f20 7573 6520 7768   value to use wh
-000246b0: 6572 6520 7468 6572 6527 7320 6e6f 0d0a  ere there's no..
-000246c0: 2020 2020 2020 2020 7661 6c69 6420 7661          valid va
-000246d0: 6c75 6520 746f 2070 726f 7061 6761 7465  lue to propagate
-000246e0: 2e0d 0a0d 0a20 2020 2020 2020 203e 3e3e  .....        >>>
-000246f0: 2061 2e66 696c 6c6e 6128 7661 6c75 6520   a.fillna(value 
-00024700: 3d20 302c 206d 6574 686f 6420 3d20 2766  = 0, method = 'f
-00024710: 6669 6c6c 2729 0d0a 2020 2020 2020 2020  fill')..        
-00024720: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
-00024730: 2e2c 2031 2e2c 2031 2e2c 2031 2e2c 2035  ., 1., 1., 1., 5
-00024740: 2e5d 290d 0a0d 0a20 2020 2020 2020 2052  .])....        R
-00024750: 6570 6c61 6365 206f 6e6c 7920 7468 6520  eplace only the 
-00024760: 6669 7273 7420 4e61 4e20 6f72 2069 6e76  first NaN or inv
-00024770: 616c 6964 2076 616c 7565 2069 6e20 616e  alid value in an
-00024780: 7920 636f 6e73 6563 7574 6976 6520 7365  y consecutive se
-00024790: 7269 6573 206f 6620 4e61 4e20 6f72 0d0a  ries of NaN or..
-000247a0: 2020 2020 2020 2020 696e 7661 6c69 6420          invalid 
-000247b0: 7661 6c75 6573 2e0d 0a0d 0a20 2020 2020  values.....     
-000247c0: 2020 203e 3e3e 2061 2e66 696c 6c6e 6128     >>> a.fillna(
-000247d0: 6d65 7468 6f64 203d 2027 6266 696c 6c27  method = 'bfill'
-000247e0: 2c20 6c69 6d69 7420 3d20 3129 0d0a 2020  , limit = 1)..  
-000247f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00024800: 5b20 312e 2c20 2031 2e2c 206e 616e 2c20  [ 1.,  1., nan, 
-00024810: 6e61 6e2c 2020 352e 2c20 2035 2e5d 290d  nan,  5.,  5.]).
-00024820: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00024830: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
-00024840: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00024850: 2020 2020 2020 2020 2020 6966 206d 6574            if met
-00024860: 686f 6420 696e 205b 2262 6163 6b66 696c  hod in ["backfil
-00024870: 6c22 2c20 2262 6669 6c6c 225d 3a0d 0a20  l", "bfill"]:.. 
-00024880: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00024890: 6574 7572 6e20 7365 6c66 2e66 696c 6c5f  eturn self.fill_
-000248a0: 6261 636b 7761 7264 2876 616c 7565 2c20  backward(value, 
-000248b0: 696e 706c 6163 653d 696e 706c 6163 652c  inplace=inplace,
-000248c0: 206c 696d 6974 3d6c 696d 6974 290d 0a20   limit=limit).. 
-000248d0: 2020 2020 2020 2020 2020 2069 6620 6d65             if me
-000248e0: 7468 6f64 2069 6e20 5b22 7061 6422 2c20  thod in ["pad", 
-000248f0: 2266 6669 6c6c 225d 3a0d 0a20 2020 2020  "ffill"]:..     
-00024900: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00024910: 6e20 7365 6c66 2e66 696c 6c5f 666f 7277  n self.fill_forw
-00024920: 6172 6428 7661 6c75 652c 2069 6e70 6c61  ard(value, inpla
-00024930: 6365 3d69 6e70 6c61 6365 2c20 6c69 6d69  ce=inplace, limi
-00024940: 743d 6c69 6d69 7429 0d0a 2020 2020 2020  t=limit)..      
-00024950: 2020 2020 2020 7261 6973 6520 4b65 7945        raise KeyE
-00024960: 7272 6f72 2866 2266 696c 6c6e 613a 2054  rror(f"fillna: T
-00024970: 6865 206d 6574 686f 6420 7b6d 6574 686f  he method {metho
-00024980: 6421 727d 206d 7573 7420 6265 2027 6261  d!r} must be 'ba
-00024990: 636b 6669 6c6c 272c 2027 6266 696c 6c27  ckfill', 'bfill'
-000249a0: 2c20 2770 6164 272c 2027 6666 696c 6c27  , 'pad', 'ffill'
-000249b0: 2229 0d0a 0d0a 2020 2020 2020 2020 6966  ")....        if
-000249c0: 2076 616c 7565 2069 7320 4e6f 6e65 3a0d   value is None:.
-000249d0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000249e0: 7365 2056 616c 7565 4572 726f 7228 6622  se ValueError(f"
-000249f0: 6669 6c6c 6e61 3a20 4d75 7374 2073 7065  fillna: Must spe
-00024a00: 6369 6679 2065 6974 6865 7220 6120 2776  cify either a 'v
-00024a10: 616c 7565 2720 7468 6174 2069 7320 6e6f  alue' that is no
-00024a20: 7420 4e6f 6e65 206f 7220 6120 276d 6574  t None or a 'met
-00024a30: 686f 6427 2074 6861 7420 6973 206e 6f74  hod' that is not
-00024a40: 204e 6f6e 652e 2229 0d0a 0d0a 2020 2020   None.")....    
-00024a50: 2020 2020 6966 206c 696d 6974 2069 7320      if limit is 
-00024a60: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-00024a70: 2020 2020 2020 2072 6169 7365 204b 6579         raise Key
-00024a80: 4572 726f 7228 6622 6669 6c6c 6e61 3a20  Error(f"fillna: 
-00024a90: 5468 6572 6520 6973 206e 6f20 6c69 6d69  There is no limi
-00024aa0: 7420 7768 656e 206d 6574 686f 6420 6973  t when method is
-00024ab0: 204e 6f6e 6522 290d 0a0d 0a20 2020 2020   None")....     
-00024ac0: 2020 2072 6574 7572 6e20 7365 6c66 2e72     return self.r
-00024ad0: 6570 6c61 6365 6e61 2876 616c 7565 2c20  eplacena(value, 
-00024ae0: 696e 706c 6163 653d 696e 706c 6163 6529  inplace=inplace)
-00024af0: 0d0a 0d0a 2020 2020 6465 6620 7374 6174  ....    def stat
-00024b00: 7828 7365 6c66 2920 2d3e 2044 6174 6173  x(self) -> Datas
-00024b10: 6574 3a0d 0a20 2020 2020 2020 2072 6574  et:..        ret
-00024b20: 7572 6e20 7374 6174 7828 7365 6c66 290d  urn statx(self).
-00024b30: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00024b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b80: 2d2d 2d2d 0d0a 2020 2020 6465 6620 5f69  ----..    def _i
-00024b90: 735f 6e6f 745f 7375 7070 6f72 7465 6428  s_not_supported(
-00024ba0: 7365 6c66 2c20 6172 7229 3a0d 0a20 2020  self, arr):..   
-00024bb0: 2020 2020 2022 2222 7265 7475 726e 7320       """returns 
-00024bc0: 5472 7565 2069 6620 6120 6e75 6d70 7920  True if a numpy 
-00024bd0: 6172 7261 7920 6973 206e 6f74 2046 6173  array is not Fas
-00024be0: 7441 7272 6179 2069 6e74 6572 6e61 6c6c  tArray internall
-00024bf0: 7920 7375 7070 6f72 7465 6422 2222 0d0a  y supported"""..
-00024c00: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
-00024c10: 6172 722e 666c 6167 732e 635f 636f 6e74  arr.flags.c_cont
-00024c20: 6967 756f 7573 206f 7220 6172 722e 666c  iguous or arr.fl
-00024c30: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
-00024c40: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00024c50: 2320 544f 444f 2065 6e61 626c 6520 7468  # TODO enable th
-00024c60: 6973 2077 6172 6e69 6e67 2069 6e20 6120  is warning in a 
-00024c70: 6675 7475 7265 206d 696e 6f72 2072 656c  future minor rel
-00024c80: 6561 7365 0d0a 2020 2020 2020 2020 2020  ease..          
-00024c90: 2020 2320 4661 7374 4172 7261 792e 5f70    # FastArray._p
-00024ca0: 6f73 7369 626c 795f 7761 726e 2866 275f  ossibly_warn(f'_
-00024cb0: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
-00024cc0: 3a20 756e 7375 7070 6f72 7465 6420 6172  : unsupported ar
-00024cd0: 7261 7920 666c 6167 7320 7b61 7272 2e66  ray flags {arr.f
-00024ce0: 6c61 6773 7d27 290d 0a20 2020 2020 2020  lags}')..       
-00024cf0: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00024d00: 0d0a 2020 2020 2020 2020 6966 2061 7272  ..        if arr
-00024d10: 2e64 7479 7065 2e63 6861 7220 6e6f 7420  .dtype.char not 
-00024d20: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
-00024d30: 732e 5375 7070 6f72 7465 643a 0d0a 2020  s.Supported:..  
-00024d40: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
-00024d50: 2065 6e61 626c 6520 7468 6973 2077 6172   enable this war
-00024d60: 6e69 6e67 2069 6e20 6120 6675 7475 7265  ning in a future
-00024d70: 206d 696e 6f72 2072 656c 6561 7365 0d0a   minor release..
-00024d80: 2020 2020 2020 2020 2020 2020 2320 4661              # Fa
-00024d90: 7374 4172 7261 792e 5f70 6f73 7369 626c  stArray._possibl
-00024da0: 795f 7761 726e 2866 275f 6973 5f6e 6f74  y_warn(f'_is_not
-00024db0: 5f73 7570 706f 7274 6564 3a20 756e 7375  _supported: unsu
-00024dc0: 7070 6f72 7465 6420 6172 7261 7920 6474  pported array dt
-00024dd0: 7970 6520 7b61 7272 2e64 7479 7065 7d5c  ype {arr.dtype}\
-00024de0: 6e53 7570 706f 7274 6564 2064 7479 7065  nSupported dtype
-00024df0: 7320 7b4e 756d 7079 4368 6172 5479 7065  s {NumpyCharType
-00024e00: 732e 5375 7070 6f72 7465 647d 2729 0d0a  s.Supported}')..
-00024e10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00024e20: 726e 2054 7275 650d 0a20 2020 2020 2020  rn True..       
-00024e30: 2069 6620 6c65 6e28 6172 722e 7374 7269   if len(arr.stri
-00024e40: 6465 7329 203d 3d20 303a 0d0a 2020 2020  des) == 0:..    
-00024e50: 2020 2020 2020 2020 2320 544f 444f 2065          # TODO e
-00024e60: 6e61 626c 6520 7468 6973 2077 6172 6e69  nable this warni
-00024e70: 6e67 2069 6e20 6120 6675 7475 7265 206d  ng in a future m
-00024e80: 696e 6f72 2072 656c 6561 7365 0d0a 2020  inor release..  
-00024e90: 2020 2020 2020 2020 2020 2320 4661 7374            # Fast
-00024ea0: 4172 7261 792e 5f70 6f73 7369 626c 795f  Array._possibly_
-00024eb0: 7761 726e 2866 275f 6973 5f6e 6f74 5f73  warn(f'_is_not_s
-00024ec0: 7570 706f 7274 6564 3a20 756e 7375 7070  upported: unsupp
-00024ed0: 6f72 7465 6420 6172 7261 7920 7374 7269  orted array stri
-00024ee0: 6465 7320 7b61 7272 2e73 7472 6964 6573  des {arr.strides
-00024ef0: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
-00024f00: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
-00024f10: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-00024f20: 7365 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  se....    # ----
-00024f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f70: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00024f80: 205f 5f61 7272 6179 5f66 756e 6374 696f   __array_functio
-00024f90: 6e5f 5f28 7365 6c66 2c20 6675 6e63 2c20  n__(self, func, 
-00024fa0: 7479 7065 732c 2061 7267 732c 206b 7761  types, args, kwa
-00024fb0: 7267 7329 3a0d 0a20 2020 2020 2020 2069  rgs):..        i
-00024fc0: 6620 7365 6c66 2e4e 4557 5f41 5252 4159  f self.NEW_ARRAY
-00024fd0: 5f46 554e 4354 494f 4e5f 454e 4142 4c45  _FUNCTION_ENABLE
-00024fe0: 443a 0d0a 2020 2020 2020 2020 2020 2020  D:..            
-00024ff0: 7265 7475 726e 2073 656c 662e 5f6e 6577  return self._new
-00025000: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
-00025010: 6675 6e63 2c20 7479 7065 732c 2061 7267  func, types, arg
-00025020: 732c 206b 7761 7267 7329 0d0a 2020 2020  s, kwargs)..    
-00025030: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00025040: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00025050: 6c66 2e5f 6c65 6761 6379 5f61 7272 6179  lf._legacy_array
-00025060: 5f66 756e 6374 696f 6e28 6675 6e63 2c20  _function(func, 
-00025070: 7479 7065 732c 2061 7267 732c 206b 7761  types, args, kwa
-00025080: 7267 7329 0d0a 0d0a 2020 2020 2320 2d2d  rgs)....    # --
-00025090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000250a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000250b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000250c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000250d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-000250e0: 6566 205f 6c65 6761 6379 5f61 7272 6179  ef _legacy_array
-000250f0: 5f66 756e 6374 696f 6e28 7365 6c66 2c20  _function(self, 
-00025100: 6675 6e63 2c20 7479 7065 732c 2061 7267  func, types, arg
-00025110: 732c 206b 7761 7267 7329 3a0d 0a20 2020  s, kwargs):..   
-00025120: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00025130: 2020 4361 6c6c 6564 2062 6566 6f72 6520    Called before 
-00025140: 6172 7261 795f 7566 756e 632e 0d0a 2020  array_ufunc...  
-00025150: 2020 2020 2020 446f 6573 206e 6f74 2067        Does not g
-00025160: 6574 2063 616c 6c65 6420 666f 7220 6576  et called for ev
-00025170: 6572 7920 6675 6e63 7469 6f6e 206e 702e  ery function np.
-00025180: 6973 6e61 6e2f 7472 756e 632f 7472 7565  isnan/trunc/true
-00025190: 5f64 6976 6964 6520 666f 7220 696e 7374  _divide for inst
-000251a0: 616e 6365 2e0d 0a20 2020 2020 2020 2022  ance...        "
-000251b0: 2222 0d0a 2020 2020 2020 2020 7265 6475  ""..        redu
-000251c0: 6365 4675 6e63 203d 204e 554d 5059 5f43  ceFunc = NUMPY_C
-000251d0: 4f4e 5645 5253 494f 4e5f 5441 424c 452e  ONVERSION_TABLE.
-000251e0: 6765 7428 6675 6e63 2c20 4e6f 6e65 290d  get(func, None).
-000251f0: 0a0d 0a20 2020 2020 2020 2023 2054 4f44  ...        # TOD
-00025200: 4f3a 0d0a 2020 2020 2020 2020 2320 6b77  O:..        # kw
-00025210: 6172 6773 206f 6620 2761 7869 7327 3a20  args of 'axis': 
-00025220: 4e6f 6e65 2020 276f 7574 273a 204e 6f6e  None  'out': Non
-00025230: 6520 7368 6f75 6c64 2062 6520 6163 6365  e should be acce
-00025240: 7074 6564 0d0a 0d0a 2020 2020 2020 2020  pted....        
-00025250: 6966 2072 6564 7563 6546 756e 6320 6973  if reduceFunc is
-00025260: 206e 6f74 204e 6f6e 6520 616e 6420 6c65   not None and le
-00025270: 6e28 6b77 6172 6773 2920 3d3d 2030 3a0d  n(kwargs) == 0:.
-00025280: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
-00025290: 7065 6564 2070 6174 6820 2874 6f64 6f20  peed path (todo 
-000252a0: 6164 6420 6361 6c6c 2074 6f20 6c65 6467  add call to ledg
-000252b0: 6572 290d 0a20 2020 2020 2020 2020 2020  er)..           
-000252c0: 2023 2064 6566 6175 6c74 2074 6f20 6464   # default to dd
-000252d0: 6f66 3d30 2077 6865 6e20 6e6f 206b 7761  of=0 when no kwa
-000252e0: 7267 7320 7061 7373 6564 0d0a 2020 2020  rgs passed..    
-000252f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00025300: 2072 632e 5265 6475 6365 2861 7267 735b   rc.Reduce(args[
-00025310: 305d 2c20 7265 6475 6365 4675 6e63 2c20  0], reduceFunc, 
-00025320: 3029 0d0a 0d0a 2020 2020 2020 2020 2020  0)....          
-00025330: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
-00025340: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00025350: 2020 2020 2020 2020 2020 2320 5479 7065            # Type
-00025360: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-00025370: 6765 722e 5f52 4544 5543 4528 6172 6773  ger._REDUCE(args
-00025380: 5b30 5d2c 206e 6577 6675 6e63 290d 0a0d  [0], newfunc)...
-00025390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000253a0: 2064 7479 7065 203d 206b 7761 7267 732e   dtype = kwargs.
-000253b0: 6765 7428 2264 7479 7065 222c 204e 6f6e  get("dtype", Non
-000253c0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-000253d0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
-000253e0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-000253f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00025400: 2075 7365 7220 666f 7263 6564 2064 7479   user forced dty
-00025410: 7065 2072 6574 7572 6e20 7661 6c75 650d  pe return value.
-00025420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025430: 2020 2020 2072 6574 7572 6e20 6474 7970       return dtyp
-00025440: 6528 7265 7375 6c74 290d 0a0d 0a20 2020  e(result)....   
-00025450: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-00025460: 7265 7365 7276 6520 7479 7065 2066 6f72  reserve type for
-00025470: 206d 696e 2f6d 6178 2f6e 616e 6d69 6e2f   min/max/nanmin/
-00025480: 6e61 6e6d 6178 0d0a 2020 2020 2020 2020  nanmax..        
-00025490: 2020 2020 2020 2020 6966 2072 6564 7563          if reduc
-000254a0: 6546 756e 6320 696e 205b 0d0a 2020 2020  eFunc in [..    
-000254b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000254c0: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-000254d0: 2e52 4544 5543 455f 4d49 4e2c 0d0a 2020  .REDUCE_MIN,..  
-000254e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000254f0: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
-00025500: 4e53 2e52 4544 5543 455f 4e41 4e4d 494e  NS.REDUCE_NANMIN
-00025510: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00025520: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
-00025530: 4e43 5449 4f4e 532e 5245 4455 4345 5f4d  NCTIONS.REDUCE_M
-00025540: 4158 2c0d 0a20 2020 2020 2020 2020 2020  AX,..           
-00025550: 2020 2020 2020 2020 2052 4544 5543 455f           REDUCE_
-00025560: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00025570: 5f4e 414e 4d41 582c 0d0a 2020 2020 2020  _NANMAX,..      
-00025580: 2020 2020 2020 2020 2020 5d3a 0d0a 2020            ]:..  
-00025590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000255a0: 2020 7265 7475 726e 2073 656c 662e 6474    return self.dt
-000255b0: 7970 652e 7479 7065 2872 6573 756c 7429  ype.type(result)
-000255c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000255d0: 2020 2020 2320 696e 7465 726e 616c 6c79      # internally
-000255e0: 206e 756d 7079 2065 7870 6563 7473 2061   numpy expects a
-000255f0: 2064 7479 7065 2072 6574 7572 6e65 6420   dtype returned 
-00025600: 666f 7220 6e61 6e73 7464 2061 6e64 206f  for nanstd and o
-00025610: 7468 6572 2063 616c 6375 6c61 7469 6f6e  ther calculation
-00025620: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-00025630: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00025640: 2872 6573 756c 742c 2028 696e 742c 206e  (result, (int, n
-00025650: 702e 696e 7465 6765 7229 293a 0d0a 2020  p.integer)):..  
-00025660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025670: 2020 2320 666f 7220 7569 6e74 3634 2c20    # for uint64, 
-00025680: 7468 6520 6869 6768 2062 6974 206d 7573  the high bit mus
-00025690: 7420 6265 2070 7265 7365 7276 6564 0d0a  t be preserved..
-000256a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000256b0: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
-000256c0: 652e 6368 6172 2069 6e20 4e75 6d70 7943  e.char in NumpyC
-000256d0: 6861 7254 7970 6573 2e55 6e73 6967 6e65  harTypes.Unsigne
-000256e0: 6449 6e74 6567 6572 3634 3a0d 0a20 2020  dInteger64:..   
-000256f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025700: 2020 2020 2072 6574 7572 6e20 6e70 2e75       return np.u
-00025710: 696e 7436 3428 7265 7375 6c74 290d 0a20  int64(result).. 
-00025720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025730: 2020 2072 6574 7572 6e20 6e70 2e69 6e74     return np.int
-00025740: 3634 2872 6573 756c 7429 0d0a 0d0a 2020  64(result)....  
-00025750: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00025760: 7475 726e 206e 702e 666c 6f61 7436 3428  turn np.float64(
-00025770: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
-00025780: 2023 2063 616c 6c20 7468 6520 7665 7273   # call the vers
-00025790: 696f 6e20 6e75 6d70 7920 7761 6e74 6564  ion numpy wanted
-000257a0: 2075 7365 2074 6f0d 0a20 2020 2020 2020   use to..       
-000257b0: 2072 6574 7572 6e20 7375 7065 7228 4661   return super(Fa
-000257c0: 7374 4172 7261 792c 2073 656c 6629 2e5f  stArray, self)._
-000257d0: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-000257e0: 5f28 6675 6e63 2c20 7479 7065 732c 2061  _(func, types, a
-000257f0: 7267 732c 206b 7761 7267 7329 0d0a 0d0a  rgs, kwargs)....
-00025800: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00025810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025850: 2d0d 0a20 2020 2064 6566 205f 6e65 775f  -..    def _new_
-00025860: 6172 7261 795f 6675 6e63 7469 6f6e 2873  array_function(s
-00025870: 656c 662c 2066 756e 633a 2043 616c 6c61  elf, func: Calla
-00025880: 626c 652c 2074 7970 6573 3a20 7475 706c  ble, types: tupl
-00025890: 652c 2061 7267 733a 2074 7570 6c65 2c20  e, args: tuple, 
-000258a0: 6b77 6172 6773 3a20 6469 6374 293a 0d0a  kwargs: dict):..
-000258b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000258c0: 2020 2020 2046 6173 7441 7272 6179 2069       FastArray i
-000258d0: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-000258e0: 2074 6865 2061 7272 6179 2066 756e 6374   the array funct
-000258f0: 696f 6e20 7072 6f74 6f63 6f6c 2e0d 0a0d  ion protocol....
-00025900: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-00025910: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-00025920: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00025930: 2066 756e 633a 2063 616c 6c61 626c 650d   func: callable.
-00025940: 0a20 2020 2020 2020 2020 2020 2041 6e20  .            An 
-00025950: 6361 6c6c 6162 6c65 2065 7870 6f73 6564  callable exposed
-00025960: 2062 7920 4e75 6d50 79e2 8099 7320 7075   by NumPy...s pu
-00025970: 626c 6963 2041 5049 2c20 7768 6963 6820  blic API, which 
-00025980: 7761 7320 6361 6c6c 6564 2069 6e20 7468  was called in th
-00025990: 6520 666f 726d 2060 6066 756e 6328 2a61  e form ``func(*a
-000259a0: 7267 732c 202a 2a6b 7761 7267 7329 6060  rgs, **kwargs)``
-000259b0: 2e0d 0a20 2020 2020 2020 2074 7970 6573  ...        types
-000259c0: 3a20 7475 706c 650d 0a20 2020 2020 2020  : tuple..       
-000259d0: 2020 2020 2041 2074 7570 6c65 206f 6620       A tuple of 
-000259e0: 756e 6971 7565 2061 7267 756d 656e 7420  unique argument 
-000259f0: 7479 7065 7320 6672 6f6d 2074 6865 206f  types from the o
-00025a00: 7269 6769 6e61 6c20 4e75 6d50 7920 6675  riginal NumPy fu
-00025a10: 6e63 7469 6f6e 2063 616c 6c20 7468 6174  nction call that
-00025a20: 2069 6d70 6c65 6d65 6e74 2060 605f 5f61   implement ``__a
-00025a30: 7272 6179 5f66 756e 6374 696f 6e5f 5f60  rray_function__`
-00025a40: 602e 0d0a 2020 2020 2020 2020 6172 6773  `...        args
-00025a50: 3a20 7475 706c 650d 0a20 2020 2020 2020  : tuple..       
-00025a60: 2020 2020 2054 6865 2074 7570 6c65 206f       The tuple o
-00025a70: 6620 6172 6775 6d65 6e74 7320 7468 6174  f arguments that
-00025a80: 2077 696c 6c20 6265 2070 6173 7365 6420   will be passed 
-00025a90: 746f 2060 6675 6e63 602e 0d0a 2020 2020  to `func`...    
-00025aa0: 2020 2020 6b77 6172 6773 3a20 6469 6374      kwargs: dict
-00025ab0: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
-00025ac0: 6520 6469 6374 696f 6e61 7279 206f 6620  e dictionary of 
-00025ad0: 6b65 7977 6f72 6420 6172 6775 6d65 6e74  keyword argument
-00025ae0: 7320 7468 6174 2077 696c 6c20 6265 2070  s that will be p
-00025af0: 6173 7365 6420 746f 2060 6675 6e63 602e  assed to `func`.
-00025b00: 0d0a 0d0a 2020 2020 2020 2020 5261 6973  ....        Rais
-00025b10: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00025b20: 2d2d 0d0a 2020 2020 2020 2020 5479 7065  --..        Type
-00025b30: 4572 726f 720d 0a20 2020 2020 2020 2020  Error..         
-00025b40: 2020 2049 6620 6066 756e 6360 2069 7320     If `func` is 
-00025b50: 6e6f 7420 6f76 6572 7269 6464 656e 2062  not overridden b
-00025b60: 7920 6120 636f 7272 6573 706f 6e64 696e  y a correspondin
-00025b70: 6720 7269 7074 6162 6c65 2061 7272 6179  g riptable array
-00025b80: 2066 756e 6374 696f 6e20 7468 656e 2061   function then a
-00025b90: 2054 7970 6545 7272 6f72 2069 7320 7261   TypeError is ra
-00025ba0: 6973 6564 2e0d 0a0d 0a20 2020 2020 2020  ised.....       
-00025bb0: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
-00025bc0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
-00025bd0: 6869 7320 6172 7261 7920 6675 6e63 7469  his array functi
-00025be0: 6f6e 2069 6d70 6c65 6d65 6e74 6174 696f  on implementatio
-00025bf0: 6e20 7265 7175 6972 6573 2065 6163 6820  n requires each 
-00025c00: 636c 6173 732c 2073 7563 6820 6173 2046  class, such as F
-00025c10: 6173 7441 7272 6179 2061 6e64 2061 6e79  astArray and any
-00025c20: 206f 7468 6572 2064 6572 6976 6564 2063   other derived c
-00025c30: 6c61 7373 2c0d 0a20 2020 2020 2020 2074  lass,..        t
-00025c40: 6f20 696d 706c 656d 656e 7420 7468 6569  o implement thei
-00025c50: 7220 6f77 6e20 7665 7273 696f 6e20 6f66  r own version of
-00025c60: 2074 6865 204e 756d 7079 2061 7272 6179   the Numpy array
-00025c70: 2066 756e 6374 696f 6e20 4150 492e 2049   function API. I
-00025c80: 6e20 7468 6520 6576 656e 7420 7468 6573  n the event thes
-00025c90: 6520 6172 7261 7920 6675 6e63 7469 6f6e  e array function
-00025ca0: 7320 6465 6665 7220 746f 2074 6865 0d0a  s defer to the..
-00025cb0: 2020 2020 2020 2020 696e 6865 7269 7469          inheriti
-00025cc0: 6e67 2063 6c61 7373 2074 6865 7920 7769  ng class they wi
-00025cd0: 6c6c 206e 6565 6420 746f 2065 6974 6865  ll need to eithe
-00025ce0: 7220 7265 2d77 7261 7020 7468 6520 7265  r re-wrap the re
-00025cf0: 7375 6c74 7320 696e 2074 6865 2063 6f72  sults in the cor
-00025d00: 7265 6374 2074 7970 6520 6f72 2072 6169  rect type or rai
-00025d10: 7365 2065 7863 6570 7469 6f6e 2069 6620  se exception if 
-00025d20: 610d 0a20 2020 2020 2020 2070 6172 7469  a..        parti
-00025d30: 6375 6c61 7220 6f70 6572 6174 696f 6e20  cular operation 
-00025d40: 6973 206e 6f74 2077 656c 6c2d 6465 6669  is not well-defi
-00025d50: 6e65 6420 6e6f 7220 6d65 616e 696e 6766  ned nor meaningf
-00025d60: 756c 2066 6f72 2074 6865 2064 6572 6976  ul for the deriv
-00025d70: 6564 2063 6c61 7373 2e0d 0a20 2020 2020  ed class...     
-00025d80: 2020 2049 6620 616e 2061 7272 6179 2066     If an array f
-00025d90: 756e 6374 696f 6e2c 2077 6869 6368 2069  unction, which i
-00025da0: 7320 616c 736f 2061 2075 6e69 7665 7273  s also a univers
-00025db0: 616c 2066 756e 6374 696f 6e2c 2069 7320  al function, is 
-00025dc0: 6e6f 7420 6f76 6572 7269 6464 656e 2061  not overridden a
-00025dd0: 7320 616e 2061 7272 6179 2066 756e 6374  s an array funct
-00025de0: 696f 6e2c 2062 7574 2064 6566 696e 6564  ion, but defined
-00025df0: 0d0a 2020 2020 2020 2020 6173 2061 2075  ..        as a u
-00025e00: 6675 6e63 2074 6865 6e20 6974 2077 696c  func then it wil
-00025e10: 6c20 6e6f 7420 6265 2063 616c 6c65 6420  l not be called 
-00025e20: 756e 6c65 7373 2069 7420 6973 2072 6567  unless it is reg
-00025e30: 6973 7465 7265 6420 7769 7468 2074 6865  istered with the
-00025e40: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
-00025e50: 6865 6c70 6572 2073 696e 6365 2061 7272  helper since arr
-00025e60: 6179 2066 756e 6374 696f 6e0d 0a20 2020  ay function..   
-00025e70: 2020 2020 2070 726f 746f 636f 6c20 7461       protocol ta
-00025e80: 6b65 7320 7072 696f 7269 7479 206f 7665  kes priority ove
-00025e90: 7220 7468 6520 756e 6976 6572 7361 6c20  r the universal 
-00025ea0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-00025eb0: 6c2e 0d0a 0d0a 2020 2020 2020 2020 5265  l.....        Re
-00025ec0: 6665 7265 6e63 653a 2060 4e45 5020 3138  ference: `NEP 18
-00025ed0: 2041 7272 6179 2046 756e 6374 696f 6e20   Array Function 
-00025ee0: 5072 6f74 6f63 6f6c 203c 6874 7470 733a  Protocol <https:
-00025ef0: 2f2f 6e75 6d70 792e 6f72 672f 6e65 7073  //numpy.org/neps
-00025f00: 2f6e 6570 2d30 3031 382d 6172 7261 792d  /nep-0018-array-
-00025f10: 6675 6e63 7469 6f6e 2d70 726f 746f 636f  function-protoco
-00025f20: 6c2e 6874 6d6c 3e60 5f0d 0a20 2020 2020  l.html>`_..     
-00025f30: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00025f40: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
-00025f50: 6c65 6446 6f72 286c 6f67 6769 6e67 2e44  ledFor(logging.D
-00025f60: 4542 5547 293a 0d0a 2020 2020 2020 2020  EBUG):..        
-00025f70: 2020 2020 6c6f 6767 6572 2e64 6562 7567      logger.debug
-00025f80: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00025f90: 2020 2066 227b 4661 7374 4172 7261 792e     f"{FastArray.
-00025fa0: 5f5f 6e61 6d65 5f5f 7d2e 5f6e 6577 5f61  __name__}._new_a
-00025fb0: 7272 6179 5f66 756e 6374 696f 6e28 6675  rray_function(fu
-00025fc0: 6e3d 7b66 756e 637d 2c20 7479 7065 733d  n={func}, types=
-00025fd0: 7b74 7970 6573 7d2c 2061 7267 733d 7b61  {types}, args={a
-00025fe0: 7267 737d 2c20 6b77 6172 6773 3d7b 6b77  rgs}, kwargs={kw
-00025ff0: 6172 6773 7d29 220d 0a20 2020 2020 2020  args})"..       
-00026000: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00026010: 2320 6861 6e64 6c65 2060 6675 6e63 6020  # handle `func` 
-00026020: 6172 6775 6d65 6e74 0d0a 2020 2020 2020  argument..      
-00026030: 2020 6172 7261 795f 6675 6e63 3a20 4361    array_func: Ca
-00026040: 6c6c 6162 6c65 203d 2046 6173 7441 7272  llable = FastArr
-00026050: 6179 2e5f 4172 7261 7946 756e 6374 696f  ay._ArrayFunctio
-00026060: 6e48 656c 7065 722e 6765 745f 6172 7261  nHelper.get_arra
-00026070: 795f 6675 6e63 7469 6f6e 2866 756e 6329  y_function(func)
-00026080: 0d0a 2020 2020 2020 2020 6966 2061 7272  ..        if arr
-00026090: 6179 5f66 756e 6320 6973 204e 6f6e 653a  ay_func is None:
-000260a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000260b0: 6661 6c6c 6261 636b 2074 6f20 6e75 6d70  fallback to nump
-000260c0: 7920 666f 7220 756e 6861 6e64 6c65 6420  y for unhandled 
-000260d0: 6172 7261 7920 6675 6e63 7469 6f6e 7320  array functions 
-000260e0: 616e 6420 6174 7465 6d70 7420 746f 2063  and attempt to c
-000260f0: 6173 7420 6261 636b 2074 6f20 4661 7374  ast back to Fast
-00026100: 4172 7261 790d 0a20 2020 2020 2020 2020  Array..         
-00026110: 2020 2072 6573 756c 7420 3d20 7375 7065     result = supe
-00026120: 7228 292e 5f5f 6172 7261 795f 6675 6e63  r().__array_func
-00026130: 7469 6f6e 5f5f 2866 756e 632c 2074 7970  tion__(func, typ
-00026140: 6573 2c20 6172 6773 2c20 6b77 6172 6773  es, args, kwargs
-00026150: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00026160: 6620 7265 7375 6c74 2069 7320 4e6f 7449  f result is NotI
-00026170: 6d70 6c65 6d65 6e74 6564 3a0d 0a20 2020  mplemented:..   
-00026180: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00026190: 7572 6e20 4e6f 7449 6d70 6c65 6d65 6e74  urn NotImplement
-000261a0: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-000261b0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-000261c0: 7265 7375 6c74 2c20 6e70 2e6e 6461 7272  result, np.ndarr
-000261d0: 6179 293a 0d0a 2020 2020 2020 2020 2020  ay):..          
-000261e0: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-000261f0: 756c 742e 7669 6577 2846 6173 7441 7272  ult.view(FastArr
-00026200: 6179 290d 0a20 2020 2020 2020 2020 2020  ay)..           
-00026210: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00026220: 2872 6573 756c 742c 206c 6973 7429 3a0d  (result, list):.
-00026230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026240: 2072 6574 7572 6e20 5b28 782e 7669 6577   return [(x.view
-00026250: 2846 6173 7441 7272 6179 2920 6966 2069  (FastArray) if i
-00026260: 7369 6e73 7461 6e63 6528 782c 206e 702e  sinstance(x, np.
-00026270: 6e64 6172 7261 7929 2065 6c73 6520 7829  ndarray) else x)
-00026280: 2066 6f72 2078 2069 6e20 7265 7375 6c74   for x in result
-00026290: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
-000262a0: 6c69 6620 6973 696e 7374 616e 6365 2872  lif isinstance(r
-000262b0: 6573 756c 742c 2074 7570 6c65 293a 0d0a  esult, tuple):..
-000262c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000262d0: 7265 7475 726e 2074 7570 6c65 285b 2878  return tuple([(x
-000262e0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
-000262f0: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
-00026300: 2c20 6e70 2e6e 6461 7272 6179 2920 656c  , np.ndarray) el
-00026310: 7365 2078 2920 666f 7220 7820 696e 2072  se x) for x in r
-00026320: 6573 756c 745d 290d 0a20 2020 2020 2020  esult])..       
-00026330: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00026340: 2020 2020 2020 2020 2020 2020 2320 556e              # Un
-00026350: 6b6e 6f77 6e20 7265 7375 6c74 2074 7970  known result typ
-00026360: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00026370: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-00026380: 726f 7228 6622 556e 6b6e 6f77 6e20 7265  ror(f"Unknown re
-00026390: 7375 6c74 2074 7970 6520 277b 7479 7065  sult type '{type
-000263a0: 2872 6573 756c 7429 7d27 2072 6574 7572  (result)}' retur
-000263b0: 6e65 6420 6279 206e 6461 7272 6179 2e7b  ned by ndarray.{
-000263c0: 6675 6e63 7d2e 2229 0d0a 0d0a 2020 2020  func}.")....    
-000263d0: 2020 2020 2320 6861 6e64 6c65 2060 7479      # handle `ty
-000263e0: 7065 7360 2061 7267 756d 656e 740d 0a20  pes` argument.. 
-000263f0: 2020 2020 2020 2061 7272 6179 5f66 756e         array_fun
-00026400: 635f 7479 7065 5f63 6865 636b 3a20 4361  c_type_check: Ca
-00026410: 6c6c 6162 6c65 203d 2046 6173 7441 7272  llable = FastArr
-00026420: 6179 2e5f 4172 7261 7946 756e 6374 696f  ay._ArrayFunctio
-00026430: 6e48 656c 7065 722e 6765 745f 6172 7261  nHelper.get_arra
-00026440: 795f 6675 6e63 7469 6f6e 5f74 7970 655f  y_function_type_
-00026450: 636f 6d70 6174 6962 696c 6974 795f 6368  compatibility_ch
-00026460: 6563 6b28 0d0a 2020 2020 2020 2020 2020  eck(..          
-00026470: 2020 6675 6e63 0d0a 2020 2020 2020 2020    func..        
-00026480: 290d 0a20 2020 2020 2020 2069 6620 6172  )..        if ar
-00026490: 7261 795f 6675 6e63 5f74 7970 655f 6368  ray_func_type_ch
-000264a0: 6563 6b20 6973 204e 6f6e 653a 0d0a 2020  eck is None:..  
-000264b0: 2020 2020 2020 2020 2020 2320 6e6f 2063            # no c
-000264c0: 7573 746f 6d20 7479 7065 2063 6f6d 7061  ustom type compa
-000264d0: 7469 6269 6c69 7479 2063 6865 636b 3b20  tibility check; 
-000264e0: 6465 6661 756c 7420 7479 7065 2063 6f6d  default type com
-000264f0: 7061 7469 6269 6c69 7479 2063 6865 636b  patibility check
-00026500: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00026510: 7468 6973 2061 6c6c 6f77 7320 7375 6263  this allows subc
-00026520: 6c61 7373 6573 2074 6861 7420 646f 6e27  lasses that don'
-00026530: 7420 6f76 6572 7269 6465 205f 5f61 7272  t override __arr
-00026540: 6179 5f66 756e 6374 696f 6e5f 5f20 746f  ay_function__ to
-00026550: 2068 616e 646c 6520 4661 7374 4172 7261   handle FastArra
-00026560: 7920 6f62 6a65 6374 730d 0a20 2020 2020  y objects..     
-00026570: 2020 2020 2020 2066 6f72 2074 7970 2069         for typ i
-00026580: 6e20 7479 7065 733a 0d0a 2020 2020 2020  n types:..      
-00026590: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000265a0: 2069 7373 7562 636c 6173 7328 7479 702c   issubclass(typ,
-000265b0: 2046 6173 7441 7272 6179 293a 0d0a 2020   FastArray):..  
-000265c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000265d0: 2020 6966 206c 6f67 6765 722e 6973 456e    if logger.isEn
-000265e0: 6162 6c65 6446 6f72 286c 6f67 6769 6e67  abledFor(logging
-000265f0: 2e44 4542 5547 293a 0d0a 2020 2020 2020  .DEBUG):..      
-00026600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026610: 2020 6c6f 6767 6572 2e64 6562 7567 2866    logger.debug(f
-00026620: 227b 4661 7374 4172 7261 792e 5f5f 6e61  "{FastArray.__na
-00026630: 6d65 5f5f 7d2e 5f5f 6172 7261 795f 6675  me__}.__array_fu
-00026640: 6e63 7469 6f6e 5f5f 3a20 756e 7375 7070  nction__: unsupp
-00026650: 6f72 7465 6420 7479 7065 207b 7265 7072  orted type {repr
-00026660: 2874 7970 297d 2229 0d0a 2020 2020 2020  (typ)}")..      
-00026670: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00026680: 7475 726e 204e 6f74 496d 706c 656d 656e  turn NotImplemen
-00026690: 7465 640d 0a20 2020 2020 2020 2065 6c73  ted..        els
-000266a0: 653a 2020 2320 6375 7374 6f6d 2074 7970  e:  # custom typ
-000266b0: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-000266c0: 6368 6563 6b0d 0a20 2020 2020 2020 2020  check..         
-000266d0: 2020 2076 616c 6964 3a20 626f 6f6c 203d     valid: bool =
-000266e0: 2061 7272 6179 5f66 756e 635f 7479 7065   array_func_type
-000266f0: 5f63 6865 636b 2874 7970 6573 290d 0a20  _check(types).. 
-00026700: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00026710: 7420 7661 6c69 643a 0d0a 2020 2020 2020  t valid:..      
-00026720: 2020 2020 2020 2020 2020 6966 206c 6f67            if log
-00026730: 6765 722e 6973 456e 6162 6c65 6446 6f72  ger.isEnabledFor
-00026740: 286c 6f67 6769 6e67 2e44 4542 5547 293a  (logging.DEBUG):
-00026750: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026760: 2020 2020 2020 6c6f 6767 6572 2e64 6562        logger.deb
-00026770: 7567 2866 227b 4661 7374 4172 7261 792e  ug(f"{FastArray.
-00026780: 5f5f 6e61 6d65 5f5f 7d2e 5f5f 6172 7261  __name__}.__arra
-00026790: 795f 6675 6e63 7469 6f6e 5f5f 3a20 756e  y_function__: un
-000267a0: 7375 7070 6f72 7465 6420 7479 7065 2069  supported type i
-000267b0: 6e20 7b72 6570 7228 7479 7065 7329 7d22  n {repr(types)}"
-000267c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000267d0: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
-000267e0: 6c65 6d65 6e74 6564 0d0a 0d0a 2020 2020  lemented....    
-000267f0: 2020 2020 7265 7475 726e 2061 7272 6179      return array
-00026800: 5f66 756e 6328 2a61 7267 732c 202a 2a6b  _func(*args, **k
-00026810: 7761 7267 7329 0d0a 0d0a 2020 2020 2320  wargs)....    # 
-00026820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00026870: 2064 6566 205f 5f61 7272 6179 5f75 6675   def __array_ufu
-00026880: 6e63 5f5f 2873 656c 662c 2075 6675 6e63  nc__(self, ufunc
-00026890: 3a20 4361 6c6c 6162 6c65 2c20 6d65 7468  : Callable, meth
-000268a0: 6f64 3a20 7374 722c 202a 696e 7075 7473  od: str, *inputs
-000268b0: 3a20 416e 792c 202a 2a6b 7761 7267 733a  : Any, **kwargs:
-000268c0: 2041 6e79 293a 0d0a 2020 2020 2020 2020   Any):..        
-000268d0: 2222 220d 0a20 2020 2020 2020 2054 6865  """..        The
-000268e0: 2046 6173 7441 7272 6179 2075 6e69 7665   FastArray unive
-000268f0: 7273 616c 2066 756e 6374 696f 6e20 286f  rsal function (o
-00026900: 7220 7566 756e 6329 206f 7665 7272 6964  r ufunc) overrid
-00026910: 6520 6f66 6665 7273 206d 756c 7469 7468  e offers multith
-00026920: 7265 6164 6564 2043 2f43 2b2b 2069 6d70  readed C/C++ imp
-00026930: 6c65 6d65 6e74 6174 696f 6e20 6174 2074  lementation at t
-00026940: 6865 2052 6970 7469 6465 4350 5020 6c61  he RiptideCPP la
-00026950: 7965 722e 0d0a 0d0a 2020 2020 2020 2020  yer.....        
-00026960: 5768 656e 2046 6173 7441 7272 6179 2072  When FastArray r
-00026970: 6563 6569 7665 7320 6120 6075 6675 6e63  eceives a `ufunc
-00026980: 6020 6361 6c6c 6162 6c65 2069 7420 7769  ` callable it wi
-00026990: 6c6c 2061 7474 656d 7074 2074 6f20 6861  ll attempt to ha
-000269a0: 6e64 6c65 2069 7420 696e 2070 7269 6f72  ndle it in prior
-000269b0: 6974 7920 6f72 6465 723a 0d0a 2020 2020  ity order:..    
-000269c0: 2020 2020 2020 2020 312e 2063 6f6e 7369          1. consi
-000269d0: 6465 7269 6e67 2060 6046 6173 7441 7272  dering ``FastArr
-000269e0: 6179 6060 2060 6046 6173 7446 756e 6374  ay`` ``FastFunct
-000269f0: 696f 6e60 6020 6973 2065 6e61 626c 6564  ion`` is enabled
-00026a00: 2c20 7566 756e 6320 6973 2068 616e 646c  , ufunc is handl
-00026a10: 6564 2062 7920 616e 2065 7870 6c69 6369  ed by an explici
-00026a20: 7420 7566 756e 6320 6f76 6572 7269 6465  t ufunc override
-00026a30: 2c20 6f74 6865 7277 6973 650d 0a20 2020  , otherwise..   
-00026a40: 2020 2020 2020 2020 2032 2e20 7566 756e           2. ufun
-00026a50: 6320 6973 2068 616e 646c 6564 2061 7420  c is handled at 
-00026a60: 7468 6520 5269 7074 6162 6c65 202f 204e  the Riptable / N
-00026a70: 756d 7079 2041 5049 206f 7665 7272 6964  umpy API overrid
-00026a80: 6573 206c 6576 656c 2c20 6f74 6865 7277  es level, otherw
-00026a90: 6973 650d 0a20 2020 2020 2020 2020 2020  ise..           
-00026aa0: 2033 2e20 7566 756e 6320 6973 2068 616e   3. ufunc is han
-00026ab0: 646c 6564 2061 7420 7468 6520 4e75 6d70  dled at the Nump
-00026ac0: 7920 4150 4920 6c65 7665 6c2e 0d0a 0d0a  y API level.....
-00026ad0: 2020 2020 2020 2020 4769 7665 6e20 6120          Given a 
-00026ae0: 636f 6d62 696e 6174 696f 6e20 6f66 2060  combination of `
-00026af0: 7566 756e 6360 2c20 6069 6e70 7574 7360  ufunc`, `inputs`
-00026b00: 2c20 616e 6420 606b 7761 7267 7360 2c20  , and `kwargs`, 
-00026b10: 6966 206e 6569 7468 6572 206f 6620 7468  if neither of th
-00026b20: 6520 6166 6f72 656d 656e 7469 6f6e 6564  e aforementioned
-00026b30: 2063 6173 6573 2073 7570 706f 7274 2074   cases support t
-00026b40: 6869 730d 0a20 2020 2020 2020 2074 6865  his..        the
-00026b50: 6e20 6120 7761 726e 696e 6720 6973 2065  n a warning is e
-00026b60: 6d69 7474 6564 2e0d 0a0d 0a20 2020 2020  mitted.....     
-00026b70: 2020 2054 6865 2066 6f6c 6c6f 7769 6e67     The following
-00026b80: 2072 6566 6572 656e 6365 7320 746f 2073   references to s
-00026b90: 7570 706f 7274 6564 2075 6675 6e63 7320  upported ufuncs 
-00026ba0: 6172 6520 6772 6f75 7065 6420 6279 206d  are grouped by m
-00026bb0: 6574 686f 6420 7479 7065 2e0d 0a20 2020  ethod type...   
-00026bc0: 2020 2020 2020 2020 202d 2046 6f72 2060           - For `
-00026bd0: 6d65 7468 6f64 6020 7479 7065 2060 6072  method` type ``r
-00026be0: 6564 7563 6560 602c 2073 6565 2060 6067  educe``, see ``g
-00026bf0: 5265 6475 6365 5546 756e 6373 6060 2e0d  ReduceUFuncs``..
-00026c00: 0a20 2020 2020 2020 2020 2020 202d 2046  .            - F
-00026c10: 6f72 2060 6d65 7468 6f64 6020 7479 7065  or `method` type
-00026c20: 2060 605f 5f63 616c 6c5f 5f60 602c 2073   ``__call__``, s
-00026c30: 6565 2060 6067 4269 6e61 7279 5546 756e  ee ``gBinaryUFun
-00026c40: 6373 6060 2c20 6060 6742 696e 6172 794c  cs``, ``gBinaryL
-00026c50: 6f67 6963 616c 5546 756e 6373 6060 2c20  ogicalUFuncs``, 
-00026c60: 6060 6742 696e 6172 7942 6974 7769 7365  ``gBinaryBitwise
-00026c70: 5546 756e 6373 6060 2c20 616e 6420 6060  UFuncs``, and ``
-00026c80: 6755 6e61 7279 5546 756e 6373 6060 2e0d  gUnaryUFuncs``..
-00026c90: 0a20 2020 2020 2020 2020 2020 202d 2046  .            - F
-00026ca0: 6f72 2060 6d65 7468 6f64 6020 7479 7065  or `method` type
-00026cb0: 2060 6061 7460 6020 7265 7475 726e 2060   ``at`` return `
-00026cc0: 604e 6f6e 6560 602e 0d0a 0d0a 2020 2020  `None``.....    
-00026cd0: 2020 2020 4966 2060 6f75 7460 2061 7267      If `out` arg
-00026ce0: 756d 656e 7420 6973 2073 7065 6369 6669  ument is specifi
-00026cf0: 6564 2c20 7468 656e 2061 6e20 6578 7472  ed, then an extr
-00026d00: 6120 6172 7261 7920 636f 7079 2069 7320  a array copy is 
-00026d10: 7065 7266 6f72 6d65 6420 6f6e 2074 6865  performed on the
-00026d20: 2072 6573 756c 7420 6f66 2074 6865 2075   result of the u
-00026d30: 6675 6e63 2063 6f6d 7075 7461 7469 6f6e  func computation
-00026d40: 2e0d 0a0d 0a20 2020 2020 2020 2049 6620  .....        If 
-00026d50: 6120 6064 7479 7065 6020 6b65 7977 6f72  a `dtype` keywor
-00026d60: 6420 6973 2073 7065 6369 6669 6564 2c20  d is specified, 
-00026d70: 616c 6c20 6566 666f 7274 7320 6172 6520  all efforts are 
-00026d80: 6d61 6465 2074 6f20 7265 7370 6563 7420  made to respect 
-00026d90: 7468 6520 6064 7479 7065 6020 6f6e 2074  the `dtype` on t
-00026da0: 6865 2072 6573 756c 7420 6f66 2074 6865  he result of the
-00026db0: 2063 6f6d 7075 7461 7469 6f6e 2e0d 0a0d   computation....
-00026dc0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-00026dd0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-00026de0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00026df0: 2075 6675 6e63 203a 2063 616c 6c61 626c   ufunc : callabl
-00026e00: 650d 0a20 2020 2020 2020 2020 2020 2054  e..            T
-00026e10: 6865 2075 6675 6e63 206f 626a 6563 7420  he ufunc object 
-00026e20: 7468 6174 2077 6173 2063 616c 6c65 642e  that was called.
-00026e30: 0d0a 2020 2020 2020 2020 6d65 7468 6f64  ..        method
-00026e40: 203a 2073 7472 0d0a 2020 2020 2020 2020   : str..        
-00026e50: 2020 2020 4120 7374 7269 6e67 2069 6e64      A string ind
-00026e60: 6963 6174 696e 6720 7768 6963 6820 5566  icating which Uf
-00026e70: 756e 6320 6d65 7468 6f64 2077 6173 2063  unc method was c
-00026e80: 616c 6c65 6420 286f 6e65 206f 6620 225f  alled (one of "_
-00026e90: 5f63 616c 6c5f 5f22 2c20 2272 6564 7563  _call__", "reduc
-00026ea0: 6522 2c20 2272 6564 7563 6561 7422 2c20  e", "reduceat", 
-00026eb0: 2261 6363 756d 756c 6174 6522 2c20 226f  "accumulate", "o
-00026ec0: 7574 6572 222c 2022 696e 6e65 7222 292e  uter", "inner").
-00026ed0: 0d0a 2020 2020 2020 2020 696e 7075 7473  ..        inputs
-00026ee0: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
-00026ef0: 7475 706c 6520 6f66 2074 6865 2069 6e70  tuple of the inp
-00026f00: 7574 2061 7267 756d 656e 7473 2074 6f20  ut arguments to 
-00026f10: 7468 6520 7566 756e 632e 0d0a 2020 2020  the ufunc...    
-00026f20: 2020 2020 6b77 6172 6773 0d0a 2020 2020      kwargs..    
-00026f30: 2020 2020 2020 2020 4120 6469 6374 696f          A dictio
-00026f40: 6e61 7279 2063 6f6e 7461 696e 696e 6720  nary containing 
-00026f50: 7468 6520 6f70 7469 6f6e 616c 2069 6e70  the optional inp
-00026f60: 7574 2061 7267 756d 656e 7473 206f 6620  ut arguments of 
-00026f70: 7468 6520 7566 756e 632e 2049 6620 6769  the ufunc. If gi
-00026f80: 7665 6e2c 2061 6e79 206f 7574 2061 7267  ven, any out arg
-00026f90: 756d 656e 7473 2c20 626f 7468 2070 6f73  uments, both pos
-00026fa0: 6974 696f 6e61 6c20 616e 6420 6b65 7977  itional and keyw
-00026fb0: 6f72 642c 2061 7265 2070 6173 7365 6420  ord, are passed 
-00026fc0: 6173 2061 2074 7570 6c65 2069 6e20 6b77  as a tuple in kw
-00026fd0: 6172 6773 2e0d 0a0d 0a20 2020 2020 2020  args.....       
-00026fe0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00026ff0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00027000: 2020 2020 2020 2054 6865 206d 6574 686f         The metho
-00027010: 6420 7368 6f75 6c64 2072 6574 7572 6e20  d should return 
-00027020: 6569 7468 6572 2074 6865 2072 6573 756c  either the resul
-00027030: 7420 6f66 2074 6865 206f 7065 7261 7469  t of the operati
-00027040: 6f6e 2c20 6f72 204e 6f74 496d 706c 656d  on, or NotImplem
-00027050: 656e 7465 6420 6966 2074 6865 206f 7065  ented if the ope
-00027060: 7261 7469 6f6e 2072 6571 7565 7374 6564  ration requested
-00027070: 2069 7320 6e6f 7420 696d 706c 656d 656e   is not implemen
-00027080: 7465 642e 0d0a 0d0a 2020 2020 2020 2020  ted.....        
-00027090: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
-000270a0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5468  ----..        Th
-000270b0: 6520 6375 7272 656e 7420 696d 706c 656d  e current implem
-000270c0: 656e 7461 7469 6f6e 2064 6f65 7320 6e6f  entation does no
-000270d0: 7420 7375 7070 6f72 7420 7468 6520 666f  t support the fo
-000270e0: 6c6c 6f77 696e 6720 6b65 7977 6f72 6420  llowing keyword 
-000270f0: 6172 6775 6d65 6e74 733a 2060 6361 7374  arguments: `cast
-00027100: 696e 6760 2c20 6073 6967 602c 2060 7369  ing`, `sig`, `si
-00027110: 676e 6174 7572 6560 2c20 616e 640d 0a20  gnature`, and.. 
-00027120: 2020 2020 2020 2060 636f 7265 5f73 6967         `core_sig
-00027130: 6e61 7475 7265 602e 0d0a 0d0a 2020 2020  nature`.....    
-00027140: 2020 2020 4974 2068 6173 2070 6172 7469      It has parti
-00027150: 616c 2073 7570 706f 7274 2066 6f72 206b  al support for k
-00027160: 6579 776f 7264 2061 7267 756d 656e 7473  eyword arguments
-00027170: 3a20 6077 6865 7265 602c 2060 6178 6973  : `where`, `axis
-00027180: 602c 2061 6e64 2060 6178 6573 602c 2069  `, and `axes`, i
-00027190: 6620 7468 6579 206d 6174 6368 0d0a 2020  f they match..  
-000271a0: 2020 2020 2020 7468 6520 6465 6661 756c        the defaul
-000271b0: 7420 7661 6c75 6573 2e0d 0a0d 0a20 2020  t values.....   
-000271c0: 2020 2020 2049 6620 4661 7374 4172 7261       If FastArra
-000271d0: 7927 7320 6060 5761 726e 696e 674c 6576  y's ``WarningLev
-000271e0: 656c 6060 2069 7320 656e 6162 6c65 642c  el`` is enabled,
-000271f0: 2074 6865 6e20 7761 726e 696e 6773 2077   then warnings w
-00027200: 696c 6c20 6265 2065 6d69 7474 6564 2069  ill be emitted i
-00027210: 6620 616e 7920 6f66 2075 6e73 7570 706f  f any of unsuppo
-00027220: 7274 6564 206f 7220 7061 7274 6961 6c6c  rted or partiall
-00027230: 790d 0a20 2020 2020 2020 2073 7570 706f  y..        suppo
-00027240: 7274 6564 206b 6579 776f 7264 2061 7267  rted keyword arg
-00027250: 756d 656e 7473 2061 7265 2070 6173 7365  uments are passe
-00027260: 642e 0d0a 0d0a 2020 2020 2020 2020 544f  d.....        TO
-00027270: 444f 2064 6f63 756d 656e 7420 6375 7374  DO document cust
-00027280: 6f6d 2075 7020 6361 7374 696e 6720 7275  om up casting ru
-00027290: 6c65 732e 0d0a 0d0a 2020 2020 2020 2020  les.....        
-000272a0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-000272b0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-000272c0: 2020 2020 466f 7220 6d6f 7265 2069 6e66      For more inf
-000272d0: 6f72 6d61 7469 6f6e 206f 6e20 7566 756e  ormation on ufun
-000272e0: 6320 7365 6520 7468 6520 666f 6c6c 6f77  c see the follow
-000272f0: 696e 6720 6e75 6d70 7920 646f 6375 6d65  ing numpy docume
-00027300: 6e74 733a 0d0a 2020 2020 2020 2020 2020  nts:..          
-00027310: 2020 2d20 6874 7470 733a 2f2f 6e75 6d70    - https://nump
-00027320: 792e 6f72 672f 646f 632f 7374 6162 6c65  y.org/doc/stable
-00027330: 2f72 6566 6572 656e 6365 2f61 7272 6179  /reference/array
-00027340: 732e 636c 6173 7365 732e 6874 6d6c 236e  s.classes.html#n
-00027350: 756d 7079 2e63 6c61 7373 2e5f 5f61 7272  umpy.class.__arr
-00027360: 6179 5f75 6675 6e63 5f5f 0d0a 2020 2020  ay_ufunc__..    
-00027370: 2020 2020 2020 2020 2d20 6874 7470 733a          - https:
-00027380: 2f2f 6e75 6d70 792e 6f72 672f 646f 632f  //numpy.org/doc/
-00027390: 7374 6162 6c65 2f72 6566 6572 656e 6365  stable/reference
-000273a0: 2f75 6675 6e63 732e 6874 6d6c 0d0a 0d0a  /ufuncs.html....
-000273b0: 2020 2020 2020 2020 4e6f 7465 2c20 7468          Note, th
-000273c0: 6520 646f 6373 7472 696e 6720 5061 7261  e docstring Para
-000273d0: 6d65 7465 7273 2061 6e64 2052 6574 7572  meters and Retur
-000273e0: 6e20 7365 6374 696f 6e20 6973 2072 6570  n section is rep
-000273f0: 6561 7465 6420 6672 6f6d 2074 6865 206e  eated from the n
-00027400: 756d 7079 0d0a 2020 2020 2020 2020 605f  umpy..        `_
-00027410: 5f61 7272 6179 5f75 6675 6e63 5f5f 6020  _array_ufunc__` 
-00027420: 646f 6373 7472 696e 6720 7369 6e63 6520  docstring since 
-00027430: 7468 6973 2069 7320 6f76 6572 7269 6469  this is overridi
-00027440: 6e67 2074 6861 7420 6d65 7468 6f64 2e0d  ng that method..
-00027450: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00027460: 2020 2020 2020 2320 544f 444f 2063 6f6e        # TODO con
-00027470: 7369 6465 7220 7573 696e 6720 7479 7065  sider using type
-00027480: 2061 6e6e 6f74 6174 696f 6e20 7479 7069   annotation typi
-00027490: 6e67 2e46 696e 616c 2066 6f72 2074 6865  ng.Final for the
-000274a0: 7365 2072 6561 642d 6f6e 6c79 2076 6172  se read-only var
-000274b0: 6961 626c 6573 2077 6865 6e20 6d6f 7669  iables when movi
-000274c0: 6e67 2074 6f20 5079 7468 6f6e 2033 2e38  ng to Python 3.8
-000274d0: 0d0a 2020 2020 2020 2020 2320 5079 7468  ..        # Pyth
-000274e0: 6f6e 2033 2e38 2061 6464 6564 2073 7570  on 3.8 added sup
-000274f0: 706f 7274 2066 6f72 2074 7970 696e 672e  port for typing.
-00027500: 4669 6e61 6c2e 2046 696e 616c 2077 696c  Final. Final wil
-00027510: 6c20 6361 7463 6820 756e 696e 7465 6e64  l catch unintend
-00027520: 6564 2061 7373 6967 6e6d 656e 7473 2066  ed assignments f
-00027530: 6f72 2063 6f6e 7374 616e 7473 2077 6865  or constants whe
-00027540: 6e20 7275 6e6e 696e 670d 0a20 2020 2020  n running..     
-00027550: 2020 2023 2073 7461 7469 6320 7479 7065     # static type
-00027560: 2063 6865 636b 6572 7320 7375 6368 2061   checkers such a
-00027570: 7320 6d79 7079 2e0d 0a20 2020 2020 2020  s mypy...       
-00027580: 205f 554e 5355 5050 4f52 5445 445f 4b45   _UNSUPPORTED_KE
-00027590: 5957 4f52 4453 3a20 5475 706c 655b 7374  YWORDS: Tuple[st
-000275a0: 722c 2073 7472 2c20 7374 722c 2073 7472  r, str, str, str
-000275b0: 5d20 3d20 2822 6361 7374 696e 6722 2c20  ] = ("casting", 
-000275c0: 2273 6967 222c 2022 7369 676e 6174 7572  "sig", "signatur
-000275d0: 6522 2c20 2263 6f72 655f 7369 676e 6174  e", "core_signat
-000275e0: 7572 6522 290d 0a20 2020 2020 2020 205f  ure")..        _
-000275f0: 5041 5254 4941 4c4c 595f 5355 5050 4f52  PARTIALLY_SUPPOR
-00027600: 5445 445f 4b45 5957 4f52 4453 5f54 4f5f  TED_KEYWORDS_TO_
-00027610: 4445 4641 554c 5453 3a20 4d61 7070 696e  DEFAULTS: Mappin
-00027620: 675b 7374 722c 2055 6e69 6f6e 5b4e 6f6e  g[str, Union[Non
-00027630: 652c 2062 6f6f 6c5d 5d20 3d20 7b0d 0a20  e, bool]] = {.. 
-00027640: 2020 2020 2020 2020 2020 2022 7768 6572             "wher
-00027650: 6522 3a20 5472 7565 2c0d 0a20 2020 2020  e": True,..     
-00027660: 2020 2020 2020 2022 6178 6973 223a 204e         "axis": N
-00027670: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
-00027680: 2020 2261 7865 7322 3a20 4e6f 6e65 2c0d    "axes": None,.
-00027690: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
-000276a0: 2020 2020 746f 706c 6576 656c 5f61 626f      toplevel_abo
-000276b0: 7274 3a20 626f 6f6c 203d 2046 616c 7365  rt: bool = False
-000276c0: 0d0a 0d0a 2020 2020 2020 2020 6966 2046  ....        if F
-000276d0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-000276e0: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
-000276f0: 2020 2070 7269 6e74 2822 2a2a 2a20 746f     print("*** to
-00027700: 7020 6c65 7665 6c20 6172 7261 795f 7566  p level array_uf
-00027710: 756e 6322 2c20 7566 756e 632c 206d 6574  unc", ufunc, met
-00027720: 686f 642c 202a 696e 7075 7473 2c20 6b77  hod, *inputs, kw
-00027730: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-00027740: 2023 2066 6c69 7020 616e 7920 696e 7075   # flip any inpu
-00027750: 7473 2074 6861 7420 6172 6520 6661 7374  ts that are fast
-00027760: 6172 7261 7973 2062 6163 6b20 746f 2061  arrays back to a
-00027770: 6e20 6e64 6172 7261 792e 2e2e 0d0a 2020  n ndarray.....  
-00027780: 2020 2020 2020 6172 6773 3a20 4c69 7374        args: List
-00027790: 5b41 6e79 5d20 3d20 5b5d 0d0a 2020 2020  [Any] = []..    
-000277a0: 2020 2020 666f 7220 696e 7075 7420 696e      for input in
-000277b0: 2069 6e70 7574 733a 0d0a 2020 2020 2020   inputs:..      
-000277c0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000277d0: 6e63 6528 696e 7075 742c 206e 702e 6e64  nce(input, np.nd
-000277e0: 6172 7261 7929 3a0d 0a20 2020 2020 2020  array):..       
-000277f0: 2020 2020 2020 2020 2069 735f 6e6f 745f           is_not_
-00027800: 7375 7070 6f72 7465 6420 3d20 7365 6c66  supported = self
-00027810: 2e5f 6973 5f6e 6f74 5f73 7570 706f 7274  ._is_not_support
-00027820: 6564 2869 6e70 7574 290d 0a20 2020 2020  ed(input)..     
-00027830: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00027840: 5f6e 6f74 5f73 7570 706f 7274 6564 3a0d  _not_supported:.
-00027850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027860: 2020 2020 2023 2054 4f44 4f20 656e 6162       # TODO enab
-00027870: 6c65 2074 6869 7320 7761 726e 696e 6720  le this warning 
-00027880: 696e 2061 2066 7574 7572 6520 6d69 6e6f  in a future mino
-00027890: 7220 7265 6c65 6173 650d 0a20 2020 2020  r release..     
-000278a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000278b0: 2046 6173 7441 7272 6179 2e5f 706f 7373   FastArray._poss
-000278c0: 6962 6c79 5f77 6172 6e28 6627 5f5f 6172  ibly_warn(f'__ar
-000278d0: 7261 795f 7566 756e 635f 5f3a 2075 6e73  ray_ufunc__: uns
-000278e0: 7570 706f 7274 6564 2069 6e70 7574 2022  upported input "
-000278f0: 7b69 6e70 7574 7d22 2729 0d0a 2020 2020  {input}"')..    
-00027900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027910: 746f 706c 6576 656c 5f61 626f 7274 207c  toplevel_abort |
-00027920: 3d20 6973 5f6e 6f74 5f73 7570 706f 7274  = is_not_support
-00027930: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-00027940: 6172 6773 2e61 7070 656e 6428 696e 7075  args.append(inpu
-00027950: 7429 0d0a 0d0a 2020 2020 2020 2020 2320  t)....        # 
-00027960: 4368 6563 6b20 666f 7220 6e75 6d70 7920  Check for numpy 
-00027970: 7275 6c65 7320 7468 6174 2077 6520 6361  rules that we ca
-00027980: 6e6e 6f74 2068 616e 646c 652e 0d0a 2020  nnot handle...  
-00027990: 2020 2020 2020 666f 7220 6b77 2069 6e20        for kw in 
-000279a0: 5f55 4e53 5550 504f 5254 4544 5f4b 4559  _UNSUPPORTED_KEY
-000279b0: 574f 5244 533a 0d0a 2020 2020 2020 2020  WORDS:..        
-000279c0: 2020 2020 6966 206b 7720 696e 206b 7761      if kw in kwa
-000279d0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-000279e0: 2020 2020 2020 2320 544f 444f 2065 6e61        # TODO ena
-000279f0: 626c 6520 7468 6973 2077 6172 6e69 6e67  ble this warning
-00027a00: 2069 6e20 6120 6675 7475 7265 206d 696e   in a future min
-00027a10: 6f72 2072 656c 6561 7365 0d0a 2020 2020  or release..    
-00027a20: 2020 2020 2020 2020 2020 2020 2320 4661              # Fa
-00027a30: 7374 4172 7261 792e 5f70 6f73 7369 626c  stArray._possibl
-00027a40: 795f 7761 726e 2866 275f 5f61 7272 6179  y_warn(f'__array
-00027a50: 5f75 6675 6e63 5f5f 3a20 756e 7375 7070  _ufunc__: unsupp
-00027a60: 6f72 7465 6420 6b65 7977 6f72 6420 6172  orted keyword ar
-00027a70: 6775 6d65 6e74 2022 7b6b 777d 2227 290d  gument "{kw}"').
-00027a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027a90: 2074 6f70 6c65 7665 6c5f 6162 6f72 7420   toplevel_abort 
-00027aa0: 7c3d 2054 7275 650d 0a0d 0a20 2020 2020  |= True....     
-00027ab0: 2020 2023 2043 6865 636b 2066 6f72 206e     # Check for n
-00027ac0: 756d 7079 2072 756c 6573 2074 6861 7420  umpy rules that 
-00027ad0: 7765 2070 6172 7469 616c 6c79 2073 7570  we partially sup
-00027ae0: 706f 7274 3b20 7468 6174 2069 732c 2077  port; that is, w
-00027af0: 6865 7265 2077 6520 6f6e 6c79 2073 7570  here we only sup
-00027b00: 706f 7274 0d0a 2020 2020 2020 2020 2320  port..        # 
-00027b10: 7468 6520 6b65 7977 6f72 6420 6966 2074  the keyword if t
-00027b20: 6865 2076 616c 7565 2069 7320 736f 6d65  he value is some
-00027b30: 2064 6566 6175 6c74 2076 616c 7565 2061   default value a
-00027b40: 6e64 206f 7468 6572 7769 7365 2070 756e  nd otherwise pun
-00027b50: 7420 746f 206e 756d 7079 2e0d 0a20 2020  t to numpy...   
-00027b60: 2020 2020 2023 2054 6865 2076 616c 7565       # The value
-00027b70: 2061 7373 6f63 6961 7465 6420 7769 7468   associated with
-00027b80: 2065 6163 6820 6b65 7977 6f72 6420 696e   each keyword in
-00027b90: 2074 6865 2064 6963 7469 6f6e 6172 7920   the dictionary 
-00027ba0: 6973 2074 6865 206f 6e6c 7920 7661 6c75  is the only valu
-00027bb0: 6520 7765 276c 6c0d 0a20 2020 2020 2020  e we'll..       
-00027bc0: 2023 2073 7570 706f 7274 2066 6f72 2074   # support for t
-00027bd0: 6861 7420 6b65 7977 6f72 642e 0d0a 2020  hat keyword...  
-00027be0: 2020 2020 2020 2320 466f 7220 6578 616d        # For exam
-00027bf0: 706c 652c 2069 6e20 6e75 6d70 7920 312e  ple, in numpy 1.
-00027c00: 3137 2074 6865 2073 756d 2829 2066 756e  17 the sum() fun
-00027c10: 6374 696f 6e20 7061 7373 6573 2077 6865  ction passes whe
-00027c20: 7265 3d54 7275 6520 6279 2064 6566 6175  re=True by defau
-00027c30: 6c74 2e0d 0a20 2020 2020 2020 2066 6f72  lt...        for
-00027c40: 206b 772c 2064 6566 6175 6c74 5f76 616c   kw, default_val
-00027c50: 2069 6e20 5f50 4152 5449 414c 4c59 5f53   in _PARTIALLY_S
-00027c60: 5550 504f 5254 4544 5f4b 4559 574f 5244  UPPORTED_KEYWORD
-00027c70: 535f 544f 5f44 4546 4155 4c54 532e 6974  S_TO_DEFAULTS.it
-00027c80: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
-00027c90: 2020 2020 6966 206b 7720 696e 206b 7761      if kw in kwa
-00027ca0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00027cb0: 2020 2020 2020 2320 5573 6520 6120 7479        # Use a ty
-00027cc0: 7065 2063 6865 636b 2062 6566 6f72 6520  pe check before 
-00027cd0: 6571 7561 6c69 7479 2068 6572 6520 746f  equality here to
-00027ce0: 2061 766f 6964 2065 7272 6f72 7320 6361   avoid errors ca
-00027cf0: 7573 6564 0d0a 2020 2020 2020 2020 2020  used..          
-00027d00: 2020 2020 2020 2320 6279 2063 6865 636b        # by check
-00027d10: 696e 6720 6571 7561 6c69 7479 2062 6574  ing equality bet
-00027d20: 7765 656e 2062 6f6f 6c73 2061 6e64 2061  ween bools and a
-00027d30: 7272 6179 732e 0d0a 2020 2020 2020 2020  rrays...        
-00027d40: 2020 2020 2020 2020 6b77 6172 675f 7661          kwarg_va
-00027d50: 6c20 3d20 6b77 6172 6773 5b6b 775d 0d0a  l = kwargs[kw]..
-00027d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027d70: 6966 2074 7970 6528 6465 6661 756c 745f  if type(default_
-00027d80: 7661 6c29 2021 3d20 7479 7065 286b 7761  val) != type(kwa
-00027d90: 7267 5f76 616c 2920 6f72 206b 7761 7267  rg_val) or kwarg
-00027da0: 5f76 616c 2021 3d20 6465 6661 756c 745f  _val != default_
-00027db0: 7661 6c3a 0d0a 2020 2020 2020 2020 2020  val:..          
-00027dc0: 2020 2020 2020 2020 2020 746f 706c 6576            toplev
-00027dd0: 656c 5f61 626f 7274 207c 3d20 5472 7565  el_abort |= True
-00027de0: 0d0a 0d0a 2020 2020 2020 2020 6474 7970  ....        dtyp
-00027df0: 653a 204f 7074 696f 6e61 6c5b 6e70 2e64  e: Optional[np.d
-00027e00: 7479 7065 5d20 3d20 6b77 6172 6773 2e67  type] = kwargs.g
-00027e10: 6574 2822 6474 7970 6522 2c20 4e6f 6e65  et("dtype", None
-00027e20: 290d 0a0d 0a20 2020 2020 2020 2068 6173  )....        has
-00027e30: 5f6f 7574 7075 7473 3a20 626f 6f6c 203d  _outputs: bool =
-00027e40: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00027e50: 6f75 745f 6172 6773 3a20 4c69 7374 5b41  out_args: List[A
-00027e60: 6e79 5d20 3d20 5b5d 0d0a 0d0a 2020 2020  ny] = []....    
-00027e70: 2020 2020 2320 666c 6970 2061 6e79 206f      # flip any o
-00027e80: 7574 7075 7473 2074 6f20 6e64 6172 7261  utputs to ndarra
-00027e90: 792e 2e2e 0d0a 2020 2020 2020 2020 6f75  y.....        ou
-00027ea0: 7470 7574 7320 3d20 6b77 6172 6773 2e70  tputs = kwargs.p
-00027eb0: 6f70 2822 6f75 7422 2c20 4e6f 6e65 290d  op("out", None).
-00027ec0: 0a20 2020 2020 2020 2069 6620 6f75 7470  .        if outp
-00027ed0: 7574 733a 0d0a 2020 2020 2020 2020 2020  uts:..          
-00027ee0: 2020 6861 735f 6f75 7470 7574 7320 3d20    has_outputs = 
-00027ef0: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
-00027f00: 2020 666f 7220 6f75 7470 7574 2069 6e20    for output in 
-00027f10: 6f75 7470 7574 733a 0d0a 2020 2020 2020  outputs:..      
-00027f20: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00027f30: 6e73 7461 6e63 6528 6f75 7470 7574 2c20  nstance(output, 
-00027f40: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
-00027f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027f60: 2020 6973 5f6e 6f74 5f73 7570 706f 7274    is_not_support
-00027f70: 6564 203d 2073 656c 662e 5f69 735f 6e6f  ed = self._is_no
-00027f80: 745f 7375 7070 6f72 7465 6428 6f75 7470  t_supported(outp
-00027f90: 7574 290d 0a20 2020 2020 2020 2020 2020  ut)..           
-00027fa0: 2020 2020 2020 2020 2069 6620 6973 5f6e           if is_n
-00027fb0: 6f74 5f73 7570 706f 7274 6564 3a0d 0a20  ot_supported:.. 
-00027fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027fd0: 2020 2020 2020 2023 2054 4f44 4f20 656e         # TODO en
-00027fe0: 6162 6c65 2074 6869 7320 7761 726e 696e  able this warnin
-00027ff0: 6720 696e 2061 2066 7574 7572 6520 6d69  g in a future mi
-00028000: 6e6f 7220 7265 6c65 6173 650d 0a20 2020  nor release..   
-00028010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028020: 2020 2020 2023 2046 6173 7441 7272 6179       # FastArray
-00028030: 2e5f 706f 7373 6962 6c79 5f77 6172 6e28  ._possibly_warn(
-00028040: 6627 5f5f 6172 7261 795f 7566 756e 635f  f'__array_ufunc_
-00028050: 5f3a 2075 6e73 7570 706f 7274 6564 206f  _: unsupported o
-00028060: 7574 7075 7420 227b 6f75 7470 7574 7d22  utput "{output}"
-00028070: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
-00028080: 2020 2020 2020 2020 2020 2020 746f 706c              topl
-00028090: 6576 656c 5f61 626f 7274 207c 3d20 6973  evel_abort |= is
-000280a0: 5f6e 6f74 5f73 7570 706f 7274 6564 0d0a  _not_supported..
-000280b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000280c0: 6f75 745f 6172 6773 2e61 7070 656e 6428  out_args.append(
-000280d0: 6f75 7470 7574 290d 0a20 2020 2020 2020  output)..       
-000280e0: 2020 2020 2023 2072 6570 6c61 6365 206f       # replace o
-000280f0: 7574 0d0a 2020 2020 2020 2020 2020 2020  ut..            
-00028100: 6b77 6172 6773 5b22 6f75 7422 5d20 3d20  kwargs["out"] = 
-00028110: 7475 706c 6528 6f75 745f 6172 6773 290d  tuple(out_args).
-00028120: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00028130: 2020 2020 2020 2020 2020 2020 2320 544a              # TJ
-00028140: 4420 2d20 6865 7265 206f 7574 7075 7473  D - here outputs
-00028150: 2077 6173 206e 6f74 2073 7065 6369 6669   was not specifi
-00028160: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-00028170: 2320 6e6f 7720 6966 2055 4675 6e63 2e6e  # now if UFunc.n
-00028180: 6f75 7420 3d3d 312c 2074 6869 7320 6675  out ==1, this fu
-00028190: 6e63 7469 6f6e 2072 6571 7569 7265 7320  nction requires 
-000281a0: 616e 206f 7574 7075 740d 0a20 2020 2020  an output..     
-000281b0: 2020 2020 2020 206f 7574 7075 7473 203d         outputs =
-000281c0: 2028 4e6f 6e65 2c29 202a 2075 6675 6e63   (None,) * ufunc
-000281d0: 2e6e 6f75 740d 0a0d 0a20 2020 2020 2020  .nout....       
-000281e0: 2023 2053 6565 2068 7474 7073 3a2f 2f64   # See https://d
-000281f0: 6f63 732e 7079 7468 6f6e 2e6f 7267 2f33  ocs.python.org/3
-00028200: 2f63 2d61 7069 2f74 7970 656f 626a 2e68  /c-api/typeobj.h
-00028210: 746d 6c0d 0a20 2020 2020 2020 2023 2053  tml..        # S
-00028220: 6565 204e 756d 6265 7220 4f62 6a65 6374  ee Number Object
-00028230: 2053 7472 7563 7475 7265 7320 616e 6420   Structures and 
-00028240: 4d61 7070 696e 6720 4f62 6a65 6374 2053  Mapping Object S
-00028250: 7472 7563 7475 7265 2066 6f72 2069 6e64  tructure for ind
-00028260: 6578 696e 670d 0a0d 0a20 2020 2020 2020  exing....       
-00028270: 2023 2075 6675 6e63 2e6e 696e 0920 2020   # ufunc.nin.   
-00028280: 2054 6865 206e 756d 6265 7220 6f66 2069   The number of i
-00028290: 6e70 7574 732e 0d0a 2020 2020 2020 2020  nputs...        
-000282a0: 2320 7566 756e 632e 6e6f 7574 0920 2020  # ufunc.nout.   
-000282b0: 2054 6865 206e 756d 6265 7220 6f66 206f   The number of o
-000282c0: 7574 7075 7473 2e0d 0a20 2020 2020 2020  utputs...       
-000282d0: 2023 2075 6675 6e63 2e6e 6172 6773 0954   # ufunc.nargs.T
-000282e0: 6865 206e 756d 6265 7220 6f66 2061 7267  he number of arg
-000282f0: 756d 656e 7473 2e0d 0a20 2020 2020 2020  uments...       
-00028300: 2023 2075 6675 6e63 2e6e 7479 7065 7309   # ufunc.ntypes.
-00028310: 5468 6520 6e75 6d62 6572 206f 6620 7479  The number of ty
-00028320: 7065 732e 0d0a 2020 2020 2020 2020 2320  pes...        # 
-00028330: 7566 756e 632e 7479 7065 7309 5265 7475  ufunc.types.Retu
-00028340: 726e 7320 6120 6c69 7374 2077 6974 6820  rns a list with 
-00028350: 7479 7065 7320 6772 6f75 7065 6420 696e  types grouped in
-00028360: 7075 742d 3e6f 7574 7075 742e 0d0a 2020  put->output...  
-00028370: 2020 2020 2020 2320 7566 756e 632e 6964        # ufunc.id
-00028380: 656e 7469 7479 0954 6865 2069 6465 6e74  entity.The ident
-00028390: 6974 7920 7661 6c75 652e 0d0a 0d0a 2020  ity value.....  
-000283a0: 2020 2020 2020 6669 6e61 6c5f 6474 7970        final_dtyp
-000283b0: 653a 204f 7074 696f 6e61 6c5b 6e70 2e64  e: Optional[np.d
-000283c0: 7479 7065 5d20 3d20 4e6f 6e65 0d0a 2020  type] = None..  
-000283d0: 2020 2020 2020 6661 7374 5f66 756e 6374        fast_funct
-000283e0: 696f 6e3a 204f 7074 696f 6e61 6c5b 4d41  ion: Optional[MA
-000283f0: 5448 5f4f 5045 5241 5449 4f4e 5d20 3d20  TH_OPERATION] = 
-00028400: 4e6f 6e65 0d0a 2020 2020 2020 2020 7265  None..        re
-00028410: 6475 6365 5f66 756e 633a 204f 7074 696f  duce_func: Optio
-00028420: 6e61 6c5b 5245 4455 4345 5f46 554e 4354  nal[REDUCE_FUNCT
-00028430: 494f 4e53 5d20 3d20 4e6f 6e65 0d0a 0d0a  IONS] = None....
-00028440: 2020 2020 2020 2020 2320 4861 6e64 6c65          # Handle
-00028450: 2072 6564 7563 6520 7566 756e 6320 6d65   reduce ufunc me
-00028460: 7468 6f64 732e 0d0a 2020 2020 2020 2020  thods...        
-00028470: 2320 6e6f 7465 3a20 7768 656e 206d 6574  # note: when met
-00028480: 686f 6420 6973 2027 6174 2720 7468 6973  hod is 'at' this
-00028490: 2069 7320 616e 2069 6e70 6c61 6365 2075   is an inplace u
-000284a0: 6e62 7566 6665 7265 6420 6f70 6572 6174  nbuffered operat
-000284b0: 696f 6e0d 0a20 2020 2020 2020 2023 2074  ion..        # t
-000284c0: 6869 7320 6361 6e20 7370 6565 6420 7570  his can speed up
-000284d0: 2072 6f75 7469 6e65 7320 7468 6174 2075   routines that u
-000284e0: 7365 2068 6561 7679 206d 6173 6b65 6420  se heavy masked 
-000284f0: 6f70 6572 6174 696f 6e73 0d0a 2020 2020  operations..    
-00028500: 2020 2020 6966 206d 6574 686f 6420 3d3d      if method ==
-00028510: 2022 7265 6475 6365 2220 616e 6420 4661   "reduce" and Fa
-00028520: 7374 4172 7261 792e 4661 7374 6572 5546  stArray.FasterUF
-00028530: 756e 6320 616e 6420 6e6f 7420 746f 706c  unc and not topl
-00028540: 6576 656c 5f61 626f 7274 3a0d 0a0d 0a20  evel_abort:.... 
-00028550: 2020 2020 2020 2020 2020 2023 2061 2e61             # a.a
-00028560: 6e79 2829 2061 6e64 2061 2e61 6c6c 2829  ny() and a.all()
-00028570: 2061 7265 206c 6f67 6963 616c 2072 6564   are logical red
-00028580: 7563 6520 6f70 6572 6174 696f 6e73 0d0a  uce operations..
-00028590: 2020 2020 2020 2020 2020 2020 2320 4578              # Ex
-000285a0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-000285b0: 2020 2020 2320 4c6f 6f6b 2066 6f72 2061      # Look for a
-000285c0: 7869 733a 4e6f 6e65 202d 2d20 6f74 6865  xis:None -- othe
-000285d0: 7277 6973 6520 4142 4f52 540d 0a20 2020  rwise ABORT..   
-000285e0: 2020 2020 2020 2020 2023 2054 6865 6e20           # Then 
-000285f0: 6c6f 6f6b 2066 6f72 204b 6565 7064 696d  look for Keepdim
-00028600: 7320 7769 6863 6820 6d65 616e 7320 746f  s wihch means to
-00028610: 2077 7261 7020 7265 7375 6c74 2069 6e20   wrap result in 
-00028620: 6c69 7374 2f61 7272 6179 3f0d 0a20 2020  list/array?..   
-00028630: 2020 2020 2020 2020 2023 2054 6865 6e20           # Then 
-00028640: 6368 6563 6b20 6474 7970 6520 616c 736f  check dtype also
-00028650: 0d0a 2020 2020 2020 2020 2020 2020 230d  ..            #.
-00028660: 0a20 2020 2020 2020 2020 2020 2023 2049  .            # I
-00028670: 6e20 5b32 325d 3a20 743d 4641 285b 5b33  n [22]: t=FA([[3
-00028680: 2c34 2c35 5d2c 5b36 2c37 2c38 5d5d 290d  ,4,5],[6,7,8]]).
-00028690: 0a20 2020 2020 2020 2020 2020 2023 2049  .            # I
-000286a0: 6e20 5b32 335d 3a20 6e70 2e61 6464 2e72  n [23]: np.add.r
-000286b0: 6564 7563 6528 7429 0d0a 2020 2020 2020  educe(t)..      
-000286c0: 2020 2020 2020 2321 2172 6564 7563 6520        #!!reduce 
-000286d0: 2072 6564 7563 6520 6e69 6e3a 2032 2031   reduce nin: 2 1
-000286e0: 203c 7566 756e 6320 2761 6464 273e 205b   <ufunc 'add'> [
-000286f0: 6172 7261 7928 5b5b 332c 2034 2c20 355d  array([[3, 4, 5]
-00028700: 2c0d 0a20 2020 2020 2020 2020 2020 2023  ,..            #
-00028710: 2020 2020 2020 205b 362c 2037 2c20 385d         [6, 7, 8]
-00028720: 5d29 5d20 6f75 743a 2028 4e6f 6e65 2c29  ])] out: (None,)
-00028730: 206b 7761 7267 733a 207b 7d0d 0a20 2020   kwargs: {}..   
-00028740: 2020 2020 2020 2020 2023 2072 6573 756c           # resul
-00028750: 7473 205b 2039 2031 3120 3133 5d0d 0a20  ts [ 9 11 13].. 
-00028760: 2020 2020 2020 2020 2020 2023 204f 7574             # Out
-00028770: 5b32 335d 3a20 6172 7261 7928 5b20 392c  [23]: array([ 9,
-00028780: 2031 312c 2031 335d 290d 0a20 2020 2020   11, 13])..     
-00028790: 2020 2020 2020 2023 2049 6e20 5b32 345d         # In [24]
-000287a0: 3a20 6e70 2e61 6464 2e72 6564 7563 6528  : np.add.reduce(
-000287b0: 742c 2061 7869 733d 4e6f 6e65 290d 0a20  t, axis=None).. 
-000287c0: 2020 2020 2020 2020 2020 2023 2121 7265             #!!re
-000287d0: 6475 6365 2020 7265 6475 6365 206e 696e  duce  reduce nin
-000287e0: 3a20 3220 3120 3c75 6675 6e63 2027 6164  : 2 1 <ufunc 'ad
-000287f0: 6427 3e20 5b61 7272 6179 285b 5b33 2c20  d'> [array([[3, 
-00028800: 342c 2035 5d2c 0d0a 2020 2020 2020 2020  4, 5],..        
-00028810: 2020 2020 2320 2020 2020 2020 5b36 2c20      #       [6, 
-00028820: 372c 2038 5d5d 295d 206f 7574 3a20 284e  7, 8]])] out: (N
-00028830: 6f6e 652c 2920 6b77 6172 6773 3a20 7b27  one,) kwargs: {'
-00028840: 6178 6973 273a 204e 6f6e 657d 0d0a 2020  axis': None}..  
-00028850: 2020 2020 2020 2020 2020 2320 7265 7375            # resu
-00028860: 6c74 7320 3333 0d0a 2020 2020 2020 2020  lts 33..        
-00028870: 2020 2020 2320 4f75 745b 3234 5d3a 2033      # Out[24]: 3
-00028880: 330d 0a20 2020 2020 2020 2020 2020 2023  3..            #
-00028890: 2049 6e20 5b32 355d 3a20 6e70 2e61 6464   In [25]: np.add
-000288a0: 2e72 6564 7563 6528 742c 2061 7869 733d  .reduce(t, axis=
-000288b0: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d54  None, keepdims=T
-000288c0: 7275 6529 0d0a 2020 2020 2020 2020 2020  rue)..          
-000288d0: 2020 2321 2172 6564 7563 6520 2072 6564    #!!reduce  red
-000288e0: 7563 6520 6e69 6e3a 2032 2031 203c 7566  uce nin: 2 1 <uf
-000288f0: 756e 6320 2761 6464 273e 205b 6172 7261  unc 'add'> [arra
-00028900: 7928 5b5b 332c 2034 2c20 355d 2c0d 0a20  y([[3, 4, 5],.. 
-00028910: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00028920: 2020 205b 362c 2037 2c20 385d 5d29 5d20     [6, 7, 8]])] 
-00028930: 6f75 743a 2028 4e6f 6e65 2c29 206b 7761  out: (None,) kwa
-00028940: 7267 733a 207b 2761 7869 7327 3a20 4e6f  rgs: {'axis': No
-00028950: 6e65 2c20 276b 6565 7064 696d 7327 3a20  ne, 'keepdims': 
-00028960: 5472 7565 7d0d 0a20 2020 2020 2020 2020  True}..         
-00028970: 2020 2023 2072 6573 756c 7473 205b 5b33     # results [[3
-00028980: 335d 5d0d 0a20 2020 2020 2020 2020 2020  3]]..           
-00028990: 2023 204f 7574 5b32 355d 3a20 6172 7261   # Out[25]: arra
-000289a0: 7928 5b5b 3333 5d5d 290d 0a20 2020 2020  y([[33]])..     
-000289b0: 2020 2020 2020 2023 2049 6e20 5b32 365d         # In [26]
-000289c0: 3a20 6e70 2e61 6464 2e72 6564 7563 6528  : np.add.reduce(
-000289d0: 742c 2061 7869 733d 4e6f 6e65 2c20 6b65  t, axis=None, ke
-000289e0: 6570 6469 6d73 3d54 7275 652c 2064 7479  epdims=True, dty
-000289f0: 7065 3d6e 702e 666c 6f61 7433 3229 0d0a  pe=np.float32)..
-00028a00: 2020 2020 2020 2020 2020 2020 2321 2172              #!!r
-00028a10: 6564 7563 6520 2072 6564 7563 6520 6e69  educe  reduce ni
-00028a20: 6e3a 2032 2031 203c 7566 756e 6320 2761  n: 2 1 <ufunc 'a
-00028a30: 6464 273e 205b 6172 7261 7928 5b5b 332c  dd'> [array([[3,
-00028a40: 2034 2c20 355d 2c0d 0a20 2020 2020 2020   4, 5],..       
-00028a50: 2020 2020 2023 2020 2020 2020 205b 362c       #       [6,
-00028a60: 2037 2c20 385d 5d29 5d20 6f75 743a 2028   7, 8]])] out: (
-00028a70: 4e6f 6e65 2c29 206b 7761 7267 733a 207b  None,) kwargs: {
-00028a80: 2761 7869 7327 3a20 4e6f 6e65 2c20 276b  'axis': None, 'k
-00028a90: 6565 7064 696d 7327 3a20 5472 7565 2c20  eepdims': True, 
-00028aa0: 2764 7479 7065 273a 203c 636c 6173 7320  'dtype': <class 
-00028ab0: 276e 756d 7079 2e66 6c6f 6174 3332 273e  'numpy.float32'>
-00028ac0: 7d0d 0a20 2020 2020 2020 2020 2020 2023  }..            #
-00028ad0: 2072 6573 756c 7473 205b 5b33 332e 5d5d   results [[33.]]
-00028ae0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00028af0: 4f75 745b 3236 5d3a 2061 7272 6179 285b  Out[26]: array([
-00028b00: 5b33 332e 5d5d 2c20 6474 7970 653d 666c  [33.]], dtype=fl
-00028b10: 6f61 7433 3229 0d0a 2020 2020 2020 2020  oat32)..        
-00028b20: 2020 2020 2320 7072 696e 7428 2221 2172      # print("!!r
-00028b30: 6564 7563 6520 222c 206d 6574 686f 642c  educe ", method,
-00028b40: 2027 6e69 6e3a 272c 2075 6675 6e63 2e6e   'nin:', ufunc.n
-00028b50: 696e 2c20 7566 756e 632e 6e6f 7574 2c20  in, ufunc.nout, 
-00028b60: 7566 756e 632c 2020 6172 6773 2c20 276f  ufunc,  args, 'o
-00028b70: 7574 3a27 2c20 6f75 7470 7574 732c 2020  ut:', outputs,  
-00028b80: 276b 7761 7267 733a 272c 206b 7761 7267  'kwargs:', kwarg
-00028b90: 732c 276e 6469 6d27 2c20 6172 6773 5b30  s,'ndim', args[0
-00028ba0: 5d2e 6e64 696d 290d 0a20 2020 2020 2020  ].ndim)..       
-00028bb0: 2020 2020 2023 2072 6573 756c 744e 203d       # resultN =
-00028bc0: 2073 7570 6572 2846 6173 7441 7272 6179   super(FastArray
-00028bd0: 2c20 7365 6c66 292e 5f5f 6172 7261 795f  , self).__array_
-00028be0: 7566 756e 635f 5f28 7566 756e 632c 206d  ufunc__(ufunc, m
-00028bf0: 6574 686f 642c 2a2a 6b77 6172 6773 290d  ethod,**kwargs).
-00028c00: 0a20 2020 2020 2020 2020 2020 2023 2070  .            # p
-00028c10: 7269 6e74 2822 2121 7265 7375 6c74 206e  rint("!!result n
-00028c20: 756d 7079 222c 2072 6573 756c 744e 2c20  umpy", resultN, 
-00028c30: 7479 7065 2872 6573 756c 744e 2929 0d0a  type(resultN))..
-00028c40: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
-00028c50: 5445 3a0d 0a20 2020 2020 2020 2020 2020  TE:..           
-00028c60: 2023 206c 6f6f 6b20 666f 7220 7265 6475   # look for redu
-00028c70: 6365 206c 6f67 6963 616c 5f6f 720d 0a20  ce logical_or.. 
-00028c80: 2020 2020 2020 2020 2020 2023 206c 6f6f             # loo
-00028c90: 6b20 666f 7220 7265 6475 6365 5f6c 6f67  k for reduce_log
-00028ca0: 6963 616c 5f61 6e64 2020 2028 7573 6564  ical_and   (used
-00028cb0: 2077 6974 6820 6e70 2e66 6d69 6e20 666f   with np.fmin fo
-00028cc0: 7220 696e 7374 616e 6365 290d 0a0d 0a20  r instance).... 
-00028cd0: 2020 2020 2020 2020 2020 2072 6564 7563             reduc
-00028ce0: 655f 6675 6e63 203d 2067 5265 6475 6365  e_func = gReduce
-00028cf0: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
-00028d00: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2020  , None)....     
-00028d10: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
-00028d20: 2063 616e 2070 726f 6365 6564 2074 6f20   can proceed to 
-00028d30: 6361 6c63 756c 6174 6520 6120 6661 7374  calculate a fast
-00028d40: 6572 2077 6179 0d0a 2020 2020 2020 2020  er way..        
-00028d50: 6966 206d 6574 686f 6420 3d3d 2022 5f5f  if method == "__
-00028d60: 6361 6c6c 5f5f 2220 616e 6420 4661 7374  call__" and Fast
-00028d70: 4172 7261 792e 4661 7374 6572 5546 756e  Array.FasterUFun
-00028d80: 6320 616e 6420 6e6f 7420 746f 706c 6576  c and not toplev
-00028d90: 656c 5f61 626f 7274 3a0d 0a0d 0a20 2020  el_abort:....   
-00028da0: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-00028db0: 2066 6f72 2062 696e 6172 7920 7566 756e   for binary ufun
-00028dc0: 630d 0a20 2020 2020 2020 2020 2020 2069  c..            i
-00028dd0: 6620 6c65 6e28 6172 6773 2920 3d3d 2032  f len(args) == 2
-00028de0: 2061 6e64 2075 6675 6e63 2e6e 6f75 7420   and ufunc.nout 
-00028df0: 3d3d 2031 3a0d 0a0d 0a20 2020 2020 2020  == 1:....       
-00028e00: 2020 2020 2020 2020 2023 2323 2323 2323           #######
-00028e10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028e20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028e30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028e40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028e50: 2323 2323 0d0a 2020 2020 2020 2020 2020  ####..          
-00028e60: 2020 2020 2020 2323 2042 494e 4152 590d        ## BINARY.
-00028e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028e80: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-00028e90: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028ea0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028eb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00028ec0: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
-00028ed0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00028ee0: 7261 795f 7479 7065 733a 204c 6973 745b  ray_types: List[
-00028ef0: 6e70 2e64 7479 7065 5d20 3d20 5b5d 0d0a  np.dtype] = []..
-00028f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028f10: 7363 616c 6172 5f74 7970 6573 3a20 4c69  scalar_types: Li
-00028f20: 7374 5b53 6361 6c61 7254 7970 655d 203d  st[ScalarType] =
-00028f30: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
-00028f40: 2020 2020 2020 2073 6361 6c61 7273 3a20         scalars: 
-00028f50: 696e 7420 3d20 300d 0a20 2020 2020 2020  int = 0..       
-00028f60: 2020 2020 2020 2020 2061 626f 7274 3a20           abort: 
-00028f70: 696e 7420 3d20 300d 0a20 2020 2020 2020  int = 0..       
-00028f80: 2020 2020 2020 2020 2066 6f72 2061 7272           for arr
-00028f90: 2069 6e20 6172 6773 3a0d 0a20 2020 2020   in args:..     
-00028fa0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00028fb0: 7272 5479 7065 203d 2074 7970 6528 6172  rrType = type(ar
-00028fc0: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
-00028fd0: 2020 2020 2020 2020 6966 2061 7272 5479          if arrTy
-00028fe0: 7065 2069 6e20 5363 616c 6172 5479 7065  pe in ScalarType
-00028ff0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00029000: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
-00029010: 7273 202b 3d20 310d 0a20 2020 2020 2020  rs += 1..       
-00029020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029030: 2073 6361 6c61 725f 7479 7065 732e 6170   scalar_types.ap
-00029040: 7065 6e64 2861 7272 5479 7065 290d 0a20  pend(arrType).. 
-00029050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029060: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00029070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029080: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00029090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000290a0: 2020 2020 6172 7261 795f 7479 7065 732e      array_types.
-000290b0: 6170 7065 6e64 2861 7272 2e64 7479 7065  append(arr.dtype
-000290c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000290d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000290e0: 2063 6865 636b 2066 6f72 206e 6f6e 2063   check for non c
-000290f0: 6f6e 7469 6e67 6f75 7320 6172 7261 7973  ontingous arrays
-00029100: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029110: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00029120: 2061 7272 2e69 7465 6d73 697a 6520 213d   arr.itemsize !=
-00029130: 2061 7272 2e73 7472 6964 6573 5b30 5d3a   arr.strides[0]:
-00029140: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029160: 2020 6162 6f72 7420 3d20 310d 0a20 2020    abort = 1..   
-00029170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029180: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-00029190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000291a0: 2020 2020 2020 2020 2020 6162 6f72 7420            abort 
-000291b0: 3d20 310d 0a20 2020 2020 2020 2020 2020  = 1..           
-000291c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000291d0: 2023 2063 616e 2068 6170 7065 6e20 7768   # can happen wh
-000291e0: 656e 204e 6f6e 6520 6f72 2061 2070 7974  en None or a pyt
-000291f0: 686f 6e20 6c69 7374 2069 7320 7061 7373  hon list is pass
-00029200: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-00029210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029220: 6966 2046 6173 7441 7272 6179 2e56 6572  if FastArray.Ver
-00029230: 626f 7365 203e 2031 3a0d 0a20 2020 2020  bose > 1:..     
-00029240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029250: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00029260: 2866 222a 2a64 6f6e 7420 6b6e 6f77 2068  (f"**dont know h
-00029270: 6f77 2074 6f20 6861 6e64 6c65 2061 7272  ow to handle arr
-00029280: 6179 207b 6172 727d 2061 7267 733a 207b  ay {arr} args: {
-00029290: 6172 6773 7d22 290d 0a0d 0a20 2020 2020  args}")....     
-000292a0: 2020 2020 2020 2020 2020 2069 6620 6162             if ab
-000292b0: 6f72 7420 3d3d 2030 3a0d 0a20 2020 2020  ort == 0:..     
-000292c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000292d0: 6620 7363 616c 6172 7320 3c20 323a 0d0a  f scalars < 2:..
-000292e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000292f0: 2020 2020 2020 2020 6973 5f6c 6f67 6963          is_logic
-00029300: 616c 203d 2030 0d0a 2020 2020 2020 2020  al = 0..        
-00029310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029320: 2320 6368 6563 6b20 666f 7220 6164 642c  # check for add,
-00029330: 2073 7562 2c20 6d75 6c2c 2064 6976 6964   sub, mul, divid
-00029340: 652c 2070 6f77 6572 0d0a 2020 2020 2020  e, power..      
-00029350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029360: 2020 6661 7374 5f66 756e 6374 696f 6e20    fast_function 
-00029370: 3d20 6742 696e 6172 7955 4675 6e63 732e  = gBinaryUFuncs.
-00029380: 6765 7428 7566 756e 632c 204e 6f6e 6529  get(ufunc, None)
-00029390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000293a0: 2020 2020 2020 2020 2020 6966 2066 6173            if fas
-000293b0: 745f 6675 6e63 7469 6f6e 2069 7320 4e6f  t_function is No
-000293c0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00010e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010e80: 0d0a 2020 2020 6465 6620 5f72 6564 7563  ..    def _reduc
+00010e90: 655f 6368 6563 6b28 7365 6c66 2c20 7265  e_check(self, re
+00010ea0: 6475 6365 4675 6e63 3a20 5245 4455 4345  duceFunc: REDUCE
+00010eb0: 5f46 554e 4354 494f 4e53 2c20 6e70 4675  _FUNCTIONS, npFu
+00010ec0: 6e63 2c20 2a61 7267 732c 202a 2a6b 7761  nc, *args, **kwa
+00010ed0: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
+00010ee0: 2222 0d0a 2020 2020 2020 2020 4172 6732  ""..        Arg2
+00010ef0: 3a20 6e70 4675 6e63 2070 6173 7320 696e  : npFunc pass in
+00010f00: 204e 6f6e 6520 6966 206e 6f20 6e75 6d70   None if no nump
+00010f10: 7920 6571 7569 7661 6c65 6e74 2066 756e  y equivalent fun
+00010f20: 6374 696f 6e0d 0a20 2020 2020 2020 2022  ction..        "
+00010f30: 2222 0d0a 2020 2020 2020 2020 6966 206e  ""..        if n
+00010f40: 7046 756e 6320 6973 206e 6f74 204e 6f6e  pFunc is not Non
+00010f50: 6520 616e 6420 2873 656c 662e 5f6b 7761  e and (self._kwa
+00010f60: 7267 5f63 6865 636b 282a 6172 6773 2c20  rg_check(*args, 
+00010f70: 2a2a 6b77 6172 6773 2920 6f72 206c 656e  **kwargs) or len
+00010f80: 2873 656c 662e 7368 6170 6529 2021 3d20  (self.shape) != 
+00010f90: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
+00010fa0: 2023 2054 4f44 4f3a 2061 6464 2074 6f20   # TODO: add to 
+00010fb0: 6d61 7468 206c 6564 6765 720d 0a20 2020  math ledger..   
+00010fc0: 2020 2020 2020 2020 2023 2073 6574 2064           # set d
+00010fd0: 646f 663d 3120 6966 204e 4f54 2073 6574  dof=1 if NOT set
+00010fe0: 2077 6869 6368 2069 7320 4661 7374 4172   which is FastAr
+00010ff0: 7261 7920 6465 6661 756c 7420 746f 206d  ray default to m
+00011000: 6174 6368 206d 6174 6c61 622f 7061 6e64  atch matlab/pand
+00011010: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
+00011020: 6966 2022 6464 6f66 2220 6e6f 7420 696e  if "ddof" not in
+00011030: 206b 7761 7267 7320 616e 6420 7265 6475   kwargs and redu
+00011040: 6365 4675 6e63 2069 6e20 5b0d 0a20 2020  ceFunc in [..   
+00011050: 2020 2020 2020 2020 2020 2020 2052 4544               RED
+00011060: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00011070: 4455 4345 5f56 4152 2c0d 0a20 2020 2020  DUCE_VAR,..     
+00011080: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
+00011090: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+000110a0: 4345 5f4e 414e 5641 522c 0d0a 2020 2020  CE_NANVAR,..    
+000110b0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
+000110c0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
+000110d0: 5543 455f 5354 442c 0d0a 2020 2020 2020  UCE_STD,..      
+000110e0: 2020 2020 2020 2020 2020 5245 4455 4345            REDUCE
+000110f0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00011100: 455f 4e41 4e53 5444 2c0d 0a20 2020 2020  E_NANSTD,..     
+00011110: 2020 2020 2020 205d 3a0d 0a20 2020 2020         ]:..     
+00011120: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00011130: 735b 2264 646f 6622 5d20 3d20 310d 0a0d  s["ddof"] = 1...
+00011140: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00011150: 756c 7420 3d20 6e70 4675 6e63 2873 656c  ult = npFunc(sel
+00011160: 662e 5f6e 702c 202a 6172 6773 2c20 2a2a  f._np, *args, **
+00011170: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
+00011180: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00011190: 6c74 0d0a 0d0a 2020 2020 2020 2020 7265  lt....        re
+000111a0: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
+000111b0: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+000111c0: 5245 4455 4345 2873 656c 662c 2072 6564  REDUCE(self, red
+000111d0: 7563 6546 756e 6329 0d0a 0d0a 2020 2020  uceFunc)....    
+000111e0: 2020 2020 2320 4974 2773 2070 6f73 7369      # It's possi
+000111f0: 626c 6520 7468 6572 6520 7761 7320 6e6f  ble there was no
+00011200: 2072 6573 756c 7420 7265 7475 726e 6564   result returned
+00011210: 2066 726f 6d20 7468 6520 7265 6475 6374   from the reduct
+00011220: 696f 6e20 6675 6e63 7469 6f6e 3b0d 0a20  ion function;.. 
+00011230: 2020 2020 2020 2023 2065 2e67 2e20 6966         # e.g. if
+00011240: 2074 6865 2069 6e70 7574 2077 6173 2065   the input was e
+00011250: 6d70 7479 2e20 4966 2074 6865 2066 756e  mpty. If the fun
+00011260: 6374 696f 6e20 6265 696e 6720 6361 6c6c  ction being call
+00011270: 6564 2069 7320 7765 6c6c 2d64 6566 696e  ed is well-defin
+00011280: 6564 0d0a 2020 2020 2020 2020 2320 666f  ed..        # fo
+00011290: 7220 656d 7074 7920 6c69 7374 7320 2d2d  r empty lists --
+000112a0: 2069 2e65 2e20 6974 2069 7320 6120 7265   i.e. it is a re
+000112b0: 6475 6374 696f 6e20 6f70 6572 6174 696f  duction operatio
+000112c0: 6e20 7769 7468 2061 2064 6566 696e 6564  n with a defined
+000112d0: 0d0a 2020 2020 2020 2020 2320 6964 656e  ..        # iden
+000112e0: 7469 7479 2065 6c65 6d65 6e74 202d 2d20  tity element -- 
+000112f0: 7365 7420 7468 6520 7265 7375 6c74 2074  set the result t
+00011300: 6f20 7468 6520 6964 656e 7469 7479 2065  o the identity e
+00011310: 6c65 6d65 6e74 2073 6f20 7468 6520 7265  lement so the re
+00011320: 7374 206f 660d 0a20 2020 2020 2020 2023  st of..        #
+00011330: 2074 6865 206c 6f67 6963 2062 656c 6f77   the logic below
+00011340: 2077 696c 6c20 776f 726b 2063 6f72 7265   will work corre
+00011350: 6374 6c79 2e0d 0a20 2020 2020 2020 2023  ctly...        #
+00011360: 2049 6620 7468 6572 6520 6973 206e 6f20   If there is no 
+00011370: 6964 656e 7469 7479 2065 6c65 6d65 6e74  identity element
+00011380: 2066 6f72 2074 6869 7320 6f70 6572 6174   for this operat
+00011390: 696f 6e2c 2072 6169 7365 2061 6e20 6578  ion, raise an ex
+000113a0: 6365 7074 696f 6e20 746f 0d0a 2020 2020  ception to..    
+000113b0: 2020 2020 2320 6c65 7420 7468 6520 7573      # let the us
+000113c0: 6572 206b 6e6f 773b 2077 6527 6420 7261  er know; we'd ra
+000113d0: 6973 6520 616e 2065 7863 6570 7469 6f6e  ise an exception
+000113e0: 2062 656c 6f77 202a 616e 7977 6179 2a2c   below *anyway*,
+000113f0: 2061 6e64 2074 6869 7320 616c 6c6f 7773   and this allows
+00011400: 0d0a 2020 2020 2020 2020 2320 7573 2074  ..        # us t
+00011410: 6f20 7072 6f76 6964 6520 7468 6520 7573  o provide the us
+00011420: 6572 2077 6974 6820 6120 6d6f 7265 2d64  er with a more-d
+00011430: 6573 6372 6970 7469 7665 2f61 6374 696f  escriptive/actio
+00011440: 6e61 626c 6520 6572 726f 7220 6d65 7373  nable error mess
+00011450: 6167 652e 0d0a 2020 2020 2020 2020 6966  age...        if
+00011460: 2072 6573 756c 7420 6973 204e 6f6e 653a   result is None:
+00011470: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
+00011480: 5f69 6465 6e74 6974 795f 7661 6c20 3d20  _identity_val = 
+00011490: 7479 7065 2873 656c 6629 2e5f 7265 6475  type(self)._redu
+000114a0: 6365 5f6f 705f 6964 656e 7469 7479 5f76  ce_op_identity_v
+000114b0: 616c 7565 2e67 6574 2872 6564 7563 6546  alue.get(reduceF
+000114c0: 756e 632c 204e 6f6e 6529 0d0a 2020 2020  unc, None)..    
+000114d0: 2020 2020 2020 2020 6966 206f 705f 6964          if op_id
+000114e0: 656e 7469 7479 5f76 616c 2069 7320 6e6f  entity_val is no
+000114f0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00011500: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00011510: 3d20 6f70 5f69 6465 6e74 6974 795f 7661  = op_identity_va
+00011520: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
+00011530: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00011540: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00011550: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
+00011560: 2020 2020 2020 2020 2020 2020 2066 2252               f"R
+00011570: 6564 7563 7469 6f6e 2027 7b73 7472 2872  eduction '{str(r
+00011580: 6564 7563 6546 756e 6329 7d27 2064 6f65  educeFunc)}' doe
+00011590: 7320 6e6f 7420 6861 7665 2061 6e20 6964  s not have an id
+000115a0: 656e 7469 7479 2065 6c65 6d65 6e74 2073  entity element s
+000115b0: 6f20 6361 6e6e 6f74 2062 6520 636f 6d70  o cannot be comp
+000115c0: 7574 6564 206f 7665 7220 616e 2065 6d70  uted over an emp
+000115d0: 7479 2061 7272 6179 2e22 0d0a 2020 2020  ty array."..    
+000115e0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+000115f0: 0a20 2020 2020 2020 2023 2057 6173 2061  .        # Was a
+00011600: 6e20 6f75 7470 7574 2064 7479 7065 2077  n output dtype w
+00011610: 6173 2065 7870 6c69 6369 746c 7920 7370  as explicitly sp
+00011620: 6563 6966 6965 643f 0d0a 2020 2020 2020  ecified?..      
+00011630: 2020 6474 7970 6520 3d20 6b77 6172 6773    dtype = kwargs
+00011640: 2e67 6574 2822 6474 7970 6522 2c20 4e6f  .get("dtype", No
+00011650: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
+00011660: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
+00011670: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00011680: 2320 7573 6572 2066 6f72 6365 6420 6474  # user forced dt
+00011690: 7970 6520 7265 7475 726e 2076 616c 7565  ype return value
+000116a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000116b0: 7475 726e 2064 7479 7065 2872 6573 756c  turn dtype(resul
+000116c0: 7429 0d0a 0d0a 2020 2020 2020 2020 2320  t)....        # 
+000116d0: 7072 6573 6572 7665 2074 7970 6520 666f  preserve type fo
+000116e0: 7220 6d69 6e2f 6d61 782f 6e61 6e6d 696e  r min/max/nanmin
+000116f0: 2f6e 616e 6d61 780d 0a20 2020 2020 2020  /nanmax..       
+00011700: 2069 6620 7265 6475 6365 4675 6e63 2069   if reduceFunc i
+00011710: 6e20 5b0d 0a20 2020 2020 2020 2020 2020  n [..           
+00011720: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
+00011730: 532e 5245 4455 4345 5f4d 494e 2c0d 0a20  S.REDUCE_MIN,.. 
+00011740: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
+00011750: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00011760: 4345 5f4e 414e 4d49 4e2c 0d0a 2020 2020  CE_NANMIN,..    
+00011770: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
+00011780: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00011790: 4d41 582c 0d0a 2020 2020 2020 2020 2020  MAX,..          
+000117a0: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
+000117b0: 4e53 2e52 4544 5543 455f 4e41 4e4d 4158  NS.REDUCE_NANMAX
+000117c0: 2c0d 0a20 2020 2020 2020 205d 3a0d 0a20  ,..        ]:.. 
+000117d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000117e0: 6e20 7365 6c66 2e64 7479 7065 2e74 7970  n self.dtype.typ
+000117f0: 6528 7265 7375 6c74 290d 0a0d 0a20 2020  e(result)....   
+00011800: 2020 2020 2023 2069 6e74 6572 6e61 6c6c       # internall
+00011810: 7920 6e75 6d70 7920 6578 7065 6374 7320  y numpy expects 
+00011820: 6120 6474 7970 6520 7265 7475 726e 6564  a dtype returned
+00011830: 2066 6f72 206e 616e 7374 6420 616e 6420   for nanstd and 
+00011840: 6f74 6865 7220 6361 6c63 756c 6174 696f  other calculatio
+00011850: 6e73 0d0a 2020 2020 2020 2020 6966 2069  ns..        if i
+00011860: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
+00011870: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
+00011880: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
+00011890: 2020 2023 2066 6f72 2075 696e 7436 342c     # for uint64,
+000118a0: 2074 6865 2068 6967 6820 6269 7420 6d75   the high bit mu
+000118b0: 7374 2062 6520 7072 6573 6572 7665 640d  st be preserved.
+000118c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000118d0: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
+000118e0: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
+000118f0: 732e 556e 7369 676e 6564 496e 7465 6765  s.UnsignedIntege
+00011900: 7236 343a 0d0a 2020 2020 2020 2020 2020  r64:..          
+00011910: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00011920: 7569 6e74 3634 2872 6573 756c 7429 0d0a  uint64(result)..
+00011930: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011940: 726e 206e 702e 696e 7436 3428 7265 7375  rn np.int64(resu
+00011950: 6c74 290d 0a0d 0a20 2020 2020 2020 2072  lt)....        r
+00011960: 6574 7572 6e20 6e70 2e66 6c6f 6174 3634  eturn np.float64
+00011970: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
+00011980: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00011990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000119a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000119b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000119c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+000119d0: 2020 2064 6566 205f 636f 6d70 6172 655f     def _compare_
+000119e0: 6368 6563 6b28 7365 6c66 2c20 6675 6e63  check(self, func
+000119f0: 2c20 6f74 6865 7229 202d 3e20 4661 7374  , other) -> Fast
+00011a00: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00011a10: 2320 6120 7573 6572 206d 6967 6874 2074  # a user might t
+00011a20: 7970 6520 696e 2061 2073 7472 696e 6720  ype in a string 
+00011a30: 616e 6420 7765 2077 616e 7420 6120 6279  and we want a by
+00011a40: 7465 7320 7374 7269 6e67 0d0a 2020 2020  tes string..    
+00011a50: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
+00011a60: 652e 6368 6172 2069 6e20 2253 5522 3a0d  e.char in "SU":.
+00011a70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00011a80: 6973 696e 7374 616e 6365 286f 7468 6572  isinstance(other
+00011a90: 2c20 7374 7229 3a0d 0a20 2020 2020 2020  , str):..       
+00011aa0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00011ab0: 2e64 7479 7065 2e63 6861 7220 3d3d 2022  .dtype.char == "
+00011ac0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
+00011ad0: 2020 2020 2020 2020 2023 2077 6520 6172           # we ar
+00011ae0: 6520 6279 7465 2073 7472 696e 6773 2062  e byte strings b
+00011af0: 7574 2073 6361 6c61 7220 756e 6963 6f64  ut scalar unicod
+00011b00: 6520 7061 7373 6564 2069 6e0d 0a20 2020  e passed in..   
+00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b20: 206f 7468 6572 203d 2073 7472 2e65 6e63   other = str.enc
+00011b30: 6f64 6528 6f74 6865 7229 0d0a 0d0a 2020  ode(other)....  
+00011b40: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00011b50: 6e73 7461 6e63 6528 6f74 6865 722c 206c  nstance(other, l
+00011b60: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
+00011b70: 2020 2020 2020 2023 2063 6f6e 7665 7274         # convert
+00011b80: 2074 6865 206c 6973 7420 736f 2061 2063   the list so a c
+00011b90: 6f6d 7061 7269 736f 6e20 6361 6e20 6265  omparison can be
+00011ba0: 206d 6164 6520 746f 2074 6865 2062 7974   made to the byt
+00011bb0: 6520 7374 7269 6e67 2061 7272 6179 0d0a  e string array..
+00011bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011bd0: 6f74 6865 7220 3d20 4661 7374 4172 7261  other = FastArra
+00011be0: 7928 6f74 6865 7229 0d0a 0d0a 2020 2020  y(other)....    
+00011bf0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00011c00: 2066 756e 6328 6f74 6865 7229 0d0a 0d0a   func(other)....
+00011c10: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
+00011c20: 5445 3a20 6e75 6d70 7920 646f 6573 2063  TE: numpy does c
+00011c30: 616c 6c20 4641 2075 6675 6e63 2066 6f72  all FA ufunc for
+00011c40: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
+00011c50: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00011c60: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
+00011c70: 4661 7374 4172 7261 7929 2061 6e64 2069  FastArray) and i
+00011c80: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
+00011c90: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+00011ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011cb0: 7265 7375 6c74 203d 2072 6573 756c 742e  result = result.
+00011cc0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
+00011cd0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00011ce0: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+00011cf0: 2020 2020 2020 7265 7375 6c74 203d 2066        result = f
+00011d00: 756e 6328 6f74 6865 7229 0d0a 2020 2020  unc(other)..    
+00011d10: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00011d20: 740d 0a0d 0a20 2020 2064 6566 205f 5f6e  t....    def __n
+00011d30: 655f 5f28 7365 6c66 2c20 6f74 6865 7229  e__(self, other)
+00011d40: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00011d50: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
+00011d60: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
+00011d70: 6e65 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  ne__, other)....
+00011d80: 2020 2020 6465 6620 5f5f 6571 5f5f 2873      def __eq__(s
+00011d90: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
+00011da0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00011db0: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
+00011dc0: 2873 7570 6572 2829 2e5f 5f65 715f 5f2c  (super().__eq__,
+00011dd0: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
+00011de0: 6566 205f 5f67 655f 5f28 7365 6c66 2c20  ef __ge__(self, 
+00011df0: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
+00011e00: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
+00011e10: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
+00011e20: 7228 292e 5f5f 6765 5f5f 2c20 6f74 6865  r().__ge__, othe
+00011e30: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
+00011e40: 6774 5f5f 2873 656c 662c 206f 7468 6572  gt__(self, other
+00011e50: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00011e60: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
+00011e70: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
+00011e80: 5f67 745f 5f2c 206f 7468 6572 290d 0a0d  _gt__, other)...
+00011e90: 0a20 2020 2064 6566 205f 5f6c 655f 5f28  .    def __le__(
+00011ea0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
+00011eb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00011ec0: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
+00011ed0: 6b28 7375 7065 7228 292e 5f5f 6c65 5f5f  k(super().__le__
+00011ee0: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
+00011ef0: 6465 6620 5f5f 6c74 5f5f 2873 656c 662c  def __lt__(self,
+00011f00: 206f 7468 6572 293a 0d0a 2020 2020 2020   other):..      
+00011f10: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
+00011f20: 6f6d 7061 7265 5f63 6865 636b 2873 7570  ompare_check(sup
+00011f30: 6572 2829 2e5f 5f6c 745f 5f2c 206f 7468  er().__lt__, oth
+00011f40: 6572 290d 0a0d 0a20 2020 2064 6566 2065  er)....    def e
+00011f50: 7128 7365 6c66 2c20 6f74 6865 7229 3a0d  q(self, other):.
+00011f60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00011f70: 7365 6c66 2e5f 5f65 715f 5f28 6f74 6865  self.__eq__(othe
+00011f80: 7229 0d0a 0d0a 2020 2020 6465 6620 6e65  r)....    def ne
+00011f90: 2873 656c 662c 206f 7468 6572 293a 0d0a  (self, other):..
+00011fa0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00011fb0: 656c 662e 5f5f 6e65 5f5f 286f 7468 6572  elf.__ne__(other
+00011fc0: 290d 0a0d 0a20 2020 2064 6566 2067 6528  )....    def ge(
+00011fd0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
+00011fe0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00011ff0: 6c66 2e5f 5f67 655f 5f28 6f74 6865 7229  lf.__ge__(other)
+00012000: 0d0a 0d0a 2020 2020 6465 6620 6c65 2873  ....    def le(s
+00012010: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
+00012020: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012030: 662e 5f5f 6c65 5f5f 286f 7468 6572 290d  f.__le__(other).
+00012040: 0a0d 0a20 2020 2064 6566 2067 7428 7365  ...    def gt(se
+00012050: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
+00012060: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00012070: 2e5f 5f67 745f 5f28 6f74 6865 7229 0d0a  .__gt__(other)..
+00012080: 0d0a 2020 2020 6465 6620 6c74 2873 656c  ..    def lt(sel
+00012090: 662c 206f 7468 6572 293a 0d0a 2020 2020  f, other):..    
+000120a0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000120b0: 5f5f 6c74 5f5f 286f 7468 6572 290d 0a0d  __lt__(other)...
+000120c0: 0a20 2020 2061 6464 203d 206e 702e 6e64  .    add = np.nd
+000120d0: 6172 7261 792e 5f5f 6164 645f 5f0d 0a20  array.__add__.. 
+000120e0: 2020 2073 7562 203d 206e 702e 6e64 6172     sub = np.ndar
+000120f0: 7261 792e 5f5f 7375 625f 5f0d 0a20 2020  ray.__sub__..   
+00012100: 206d 756c 203d 206e 702e 6e64 6172 7261   mul = np.ndarra
+00012110: 792e 5f5f 6d75 6c5f 5f0d 0a20 2020 2064  y.__mul__..    d
+00012120: 6976 203d 206e 702e 6e64 6172 7261 792e  iv = np.ndarray.
+00012130: 5f5f 7472 7565 6469 765f 5f0d 0a20 2020  __truediv__..   
+00012140: 2066 6c6f 6f72 6469 7620 3d20 6e70 2e6e   floordiv = np.n
+00012150: 6461 7272 6179 2e5f 5f66 6c6f 6f72 6469  darray.__floordi
+00012160: 765f 5f0d 0a20 2020 2070 6f77 203d 206e  v__..    pow = n
+00012170: 702e 6e64 6172 7261 792e 5f5f 706f 775f  p.ndarray.__pow_
+00012180: 5f0d 0a20 2020 206d 6f64 203d 206e 702e  _..    mod = np.
+00012190: 6e64 6172 7261 792e 5f5f 6d6f 645f 5f0d  ndarray.__mod__.
+000121a0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+000121b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000121c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000121d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000121e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000121f0: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7374  ----..    def st
+00012200: 725f 6170 7065 6e64 2873 656c 662c 206f  r_append(self, o
+00012210: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
+00012220: 6966 2073 656c 662e 6474 7970 652e 6e75  if self.dtype.nu
+00012230: 6d20 3d3d 206f 7468 6572 2e64 7479 7065  m == other.dtype
+00012240: 2e6e 756d 3a0d 0a20 2020 2020 2020 2020  .num:..         
+00012250: 2020 2066 756e 6320 3d20 5479 7065 5265     func = TypeRe
+00012260: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
+00012270: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
+00012280: 5f49 4e50 5554 530d 0a20 2020 2020 2020  _INPUTS..       
+00012290: 2020 2020 2072 6574 7572 6e20 6675 6e63       return func
+000122a0: 2828 7365 6c66 2c20 6f74 6865 7229 2c20  ((self, other), 
+000122b0: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e41  MATH_OPERATION.A
+000122c0: 4444 2c20 7365 6c66 2e64 7479 7065 2e6e  DD, self.dtype.n
+000122d0: 756d 290d 0a20 2020 2020 2020 2072 6169  um)..        rai
+000122e0: 7365 2054 7970 6545 7272 6f72 2822 6361  se TypeError("ca
+000122f0: 6e6e 6f74 2063 6f6e 6361 7422 290d 0a0d  nnot concat")...
+00012300: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00012310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012350: 2d2d 0d0a 2020 2020 6465 6620 7371 7565  --..    def sque
+00012360: 657a 6528 7365 6c66 2c20 2a61 7267 732c  eze(self, *args,
+00012370: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
+00012380: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00012390: 2e5f 6e70 2e73 7175 6565 7a65 282a 6172  ._np.squeeze(*ar
+000123a0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+000123b0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000123c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012400: 2d2d 0d0a 2020 2020 6465 6620 6973 636f  --..    def isco
+00012410: 6d70 7574 6162 6c65 2873 656c 6629 202d  mputable(self) -
+00012420: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
+00012430: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+00012440: 7374 6572 2e69 735f 636f 6d70 7574 6162  ster.is_computab
+00012450: 6c65 2873 656c 6629 0d0a 0d0a 2020 2020  le(self)....    
+00012460: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00012470: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00012480: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+00012490: 2020 2023 206e 6570 2d31 3820 6172 7261     # nep-18 arra
+000124a0: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
+000124b0: 636f 6c20 696d 706c 656d 656e 7461 7469  col implementati
+000124c0: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
+000124d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000124e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000124f0: 2323 2323 230d 0a20 2020 2040 636c 6173  #####..    @clas
+00012500: 736d 6574 686f 640d 0a20 2020 2064 6566  smethod..    def
+00012510: 205f 7079 5f6e 756d 6265 725f 746f 5f6e   _py_number_to_n
+00012520: 705f 6474 7970 6528 0d0a 2020 2020 2020  p_dtype(..      
+00012530: 2020 636c 732c 2076 616c 3a20 556e 696f    cls, val: Unio
+00012540: 6e5b 696e 742c 206e 702e 696e 7465 6765  n[int, np.intege
+00012550: 722c 204e 6f6e 655d 2c20 6474 7970 653a  r, None], dtype:
+00012560: 206e 702e 6474 7970 650d 0a20 2020 2029   np.dtype..    )
+00012570: 202d 3e20 556e 696f 6e5b 6e70 2e75 696e   -> Union[np.uin
+00012580: 742c 206e 702e 696e 7436 342c 206e 702e  t, np.int64, np.
+00012590: 666c 6f61 7436 342c 204e 6f6e 655d 3a0d  float64, None]:.
+000125a0: 0a20 2020 2020 2020 2022 2222 436f 6e76  .        """Conv
+000125b0: 6572 7420 6120 7079 7468 6f6e 2074 7970  ert a python typ
+000125c0: 6520 746f 206e 756d 7079 2064 7479 7065  e to numpy dtype
+000125d0: 2e0d 0a20 2020 2020 2020 204f 6e6c 7920  ...        Only 
+000125e0: 6861 6e64 6c65 7320 696e 7465 6765 7273  handles integers
+000125f0: 2e22 2222 0d0a 2020 2020 2020 2020 6966  ."""..        if
+00012600: 2076 616c 2069 7320 6e6f 7420 4e6f 6e65   val is not None
+00012610: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00012620: 2069 6e74 6572 6e61 6c6c 7920 6e75 6d70   internally nump
+00012630: 7920 6578 7065 6374 7320 6120 6474 7970  y expects a dtyp
+00012640: 6520 7265 7475 726e 6564 2066 6f72 206e  e returned for n
+00012650: 616e 7374 6420 616e 6420 6f74 6865 7220  anstd and other 
+00012660: 6361 6c63 756c 6174 696f 6e73 0d0a 2020  calculations..  
+00012670: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00012680: 6e73 7461 6e63 6528 7661 6c2c 2028 696e  nstance(val, (in
+00012690: 742c 206e 702e 696e 7465 6765 7229 293a  t, np.integer)):
+000126a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000126b0: 2020 2320 666f 7220 7569 6e74 3634 2c20    # for uint64, 
+000126c0: 7468 6520 6869 6768 2062 6974 206d 7573  the high bit mus
+000126d0: 7420 6265 2070 7265 7365 7276 6564 0d0a  t be preserved..
+000126e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126f0: 6966 2064 7479 7065 2e63 6861 7220 696e  if dtype.char in
+00012700: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
+00012710: 556e 7369 676e 6564 496e 7465 6765 7236  UnsignedInteger6
+00012720: 343a 0d0a 2020 2020 2020 2020 2020 2020  4:..            
+00012730: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00012740: 702e 7569 6e74 3634 2876 616c 290d 0a20  p.uint64(val).. 
+00012750: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00012760: 6574 7572 6e20 6e70 2e69 6e74 3634 2876  eturn np.int64(v
+00012770: 616c 290d 0a20 2020 2020 2020 2020 2020  al)..           
+00012780: 2072 6574 7572 6e20 6e70 2e66 6c6f 6174   return np.float
+00012790: 3634 2876 616c 290d 0a20 2020 2020 2020  64(val)..       
+000127a0: 2072 6574 7572 6e20 7661 6c0d 0a0d 0a20   return val.... 
+000127b0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000127c0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+000127d0: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+000127e0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+000127f0: 696f 6e28 6e70 2e61 7267 6d61 7829 0d0a  ion(np.argmax)..
+00012800: 2020 2020 6465 6620 5f61 7267 6d61 7828      def _argmax(
+00012810: 612c 2061 7869 733d 4e6f 6e65 2c20 6f75  a, axis=None, ou
+00012820: 743d 4e6f 6e65 293a 0d0a 2020 2020 2020  t=None):..      
+00012830: 2020 7265 7375 6c74 203d 2072 632e 5265    result = rc.Re
+00012840: 6475 6365 2861 2c20 5245 4455 4345 5f46  duce(a, REDUCE_F
+00012850: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00012860: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
+00012870: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+00012880: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+00012890: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+000128a0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+000128b0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+000128c0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+000128d0: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+000128e0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+000128f0: 7469 6f6e 286e 702e 6e61 6e61 7267 6d61  tion(np.nanargma
+00012900: 7829 0d0a 2020 2020 6465 6620 5f6e 616e  x)..    def _nan
+00012910: 6172 676d 6178 2861 2c20 6178 6973 3d4e  argmax(a, axis=N
+00012920: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
+00012930: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
+00012940: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
+00012950: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
+00012960: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
+00012970: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+00012980: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+00012990: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+000129a0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+000129b0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+000129c0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+000129d0: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+000129e0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+000129f0: 7469 6f6e 286e 702e 6172 676d 696e 290d  tion(np.argmin).
+00012a00: 0a20 2020 2064 6566 205f 6172 676d 696e  .    def _argmin
+00012a10: 2861 2c20 6178 6973 3d4e 6f6e 652c 206f  (a, axis=None, o
+00012a20: 7574 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ut=None):..     
+00012a30: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00012a40: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00012a50: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00012a60: 5f41 5247 4d49 4e2c 2030 290d 0a20 2020  _ARGMIN, 0)..   
+00012a70: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+00012a80: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00012a90: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00012aa0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00012ab0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00012ac0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00012ad0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00012ae0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00012af0: 6374 696f 6e28 6e70 2e6e 616e 6172 676d  ction(np.nanargm
+00012b00: 696e 290d 0a20 2020 2064 6566 205f 6e61  in)..    def _na
+00012b10: 6e61 7267 6d69 6e28 612c 2061 7869 733d  nargmin(a, axis=
+00012b20: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+00012b30: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+00012b40: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+00012b50: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00012b60: 4e41 5247 4d49 4e2c 2030 290d 0a20 2020  NARGMIN, 0)..   
+00012b70: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+00012b80: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00012b90: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00012ba0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00012bb0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00012bc0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00012bd0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00012be0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00012bf0: 6374 696f 6e28 6e70 2e65 6d70 7479 5f6c  ction(np.empty_l
+00012c00: 696b 6529 0d0a 2020 2020 6465 6620 5f65  ike)..    def _e
+00012c10: 6d70 7479 5f6c 696b 6528 0d0a 2020 2020  mpty_like(..    
+00012c20: 2020 2020 6172 7261 793a 2022 4661 7374      array: "Fast
+00012c30: 4172 7261 7922 2c0d 0a20 2020 2020 2020  Array",..       
+00012c40: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
+00012c50: 5b55 6e69 6f6e 5b73 7472 2c20 6e70 2e64  [Union[str, np.d
+00012c60: 7479 7065 5d5d 203d 204e 6f6e 652c 0d0a  type]] = None,..
+00012c70: 2020 2020 2020 2020 6f72 6465 723a 2073          order: s
+00012c80: 7472 203d 2022 4b22 2c0d 0a20 2020 2020  tr = "K",..     
+00012c90: 2020 2073 7562 6f6b 3a20 626f 6f6c 203d     subok: bool =
+00012ca0: 2054 7275 652c 0d0a 2020 2020 2020 2020   True,..        
+00012cb0: 7368 6170 653a 204f 7074 696f 6e61 6c5b  shape: Optional[
+00012cc0: 556e 696f 6e5b 696e 742c 2053 6571 7565  Union[int, Seque
+00012cd0: 6e63 655b 696e 745d 5d5d 203d 204e 6f6e  nce[int]]] = Non
+00012ce0: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
+00012cf0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
+00012d00: 2020 2061 7272 6179 203d 2061 7272 6179     array = array
+00012d10: 2e5f 6e70 0d0a 2020 2020 2020 2020 7265  ._np..        re
+00012d20: 7375 6c74 203d 2072 632e 4c65 6467 6572  sult = rc.Ledger
+00012d30: 4675 6e63 7469 6f6e 286e 702e 656d 7074  Function(np.empt
+00012d40: 795f 6c69 6b65 2c20 6172 7261 792c 2064  y_like, array, d
+00012d50: 7479 7065 3d64 7479 7065 2c20 6f72 6465  type=dtype, orde
+00012d60: 723d 6f72 6465 722c 2073 7562 6f6b 3d73  r=order, subok=s
+00012d70: 7562 6f6b 2c20 7368 6170 653d 7368 6170  ubok, shape=shap
+00012d80: 6529 0d0a 2020 2020 2020 2020 7265 7475  e)..        retu
+00012d90: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
+00012da0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+00012db0: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
+00012dc0: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
+00012dd0: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
+00012de0: 6e28 6e70 2e6d 6178 290d 0a20 2020 2064  n(np.max)..    d
+00012df0: 6566 205f 6d61 7828 612c 2061 7869 733d  ef _max(a, axis=
+00012e00: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00012e10: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2069  keepdims=None, i
+00012e20: 6e69 7469 616c 3d4e 6f6e 652c 2077 6865  nitial=None, whe
+00012e30: 7265 3d4e 6f6e 6529 3a0d 0a20 2020 2020  re=None):..     
+00012e40: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00012e50: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00012e60: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00012e70: 5f4d 4158 2c20 3029 0d0a 2020 2020 2020  _MAX, 0)..      
+00012e80: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
+00012e90: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00012ea0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
+00012eb0: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+00012ec0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00012ed0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
+00012ee0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+00012ef0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+00012f00: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+00012f10: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+00012f20: 286e 702e 6e61 6e6d 6178 290d 0a20 2020  (np.nanmax)..   
+00012f30: 2064 6566 205f 6e61 6e6d 6178 2861 2c20   def _nanmax(a, 
+00012f40: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
+00012f50: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+00012f60: 6e65 293a 0d0a 2020 2020 2020 2020 7265  ne):..        re
+00012f70: 7375 6c74 203d 2072 632e 5265 6475 6365  sult = rc.Reduce
+00012f80: 2861 2c20 5245 4455 4345 5f46 554e 4354  (a, REDUCE_FUNCT
+00012f90: 494f 4e53 2e52 4544 5543 455f 4e41 4e4d  IONS.REDUCE_NANM
+00012fa0: 4158 2c20 3029 0d0a 2020 2020 2020 2020  AX, 0)..        
+00012fb0: 6966 2072 6573 756c 7420 6973 206e 6f74  if result is not
+00012fc0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00012fd0: 2020 2020 7265 7475 726e 2061 2e64 7479      return a.dty
+00012fe0: 7065 2e74 7970 6528 7265 7375 6c74 290d  pe.type(result).
+00012ff0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013000: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
+00013010: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00013020: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
+00013030: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
+00013040: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
+00013050: 702e 6d65 616e 290d 0a20 2020 2064 6566  p.mean)..    def
+00013060: 205f 6d65 616e 2861 2c20 6178 6973 3d4e   _mean(a, axis=N
+00013070: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+00013080: 206f 7574 3d4e 6f6e 652c 206b 6565 7064   out=None, keepd
+00013090: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
+000130a0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+000130b0: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+000130c0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+000130d0: 455f 4d45 414e 2c20 3029 0d0a 2020 2020  E_MEAN, 0)..    
+000130e0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+000130f0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+00013100: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+00013110: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+00013120: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00013130: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+00013140: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+00013150: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00013160: 7469 6f6e 286e 702e 6e61 6e6d 6561 6e29  tion(np.nanmean)
+00013170: 0d0a 2020 2020 6465 6620 5f6e 616e 6d65  ..    def _nanme
+00013180: 616e 2861 2c20 6178 6973 3d4e 6f6e 652c  an(a, axis=None,
+00013190: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
+000131a0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+000131b0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+000131c0: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+000131d0: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+000131e0: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+000131f0: 4e4d 4541 4e2c 2030 290d 0a20 2020 2020  NMEAN, 0)..     
+00013200: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
+00013210: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
+00013220: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
+00013230: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
+00013240: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00013250: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00013260: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+00013270: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00013280: 696f 6e28 6e70 2e6d 696e 290d 0a20 2020  ion(np.min)..   
+00013290: 2064 6566 205f 6d69 6e28 612c 2061 7869   def _min(a, axi
+000132a0: 733d 4e6f 6e65 2c20 6f75 743d 4e6f 6e65  s=None, out=None
+000132b0: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
+000132c0: 2069 6e69 7469 616c 3d4e 6f6e 652c 2077   initial=None, w
+000132d0: 6865 7265 3d4e 6f6e 6529 3a0d 0a20 2020  here=None):..   
+000132e0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
+000132f0: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
+00013300: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00013310: 4345 5f4d 494e 2c20 3029 0d0a 2020 2020  CE_MIN, 0)..    
+00013320: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
+00013330: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00013340: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+00013350: 2e64 7479 7065 2e74 7970 6528 7265 7375  .dtype.type(resu
+00013360: 6c74 290d 0a20 2020 2020 2020 2072 6574  lt)..        ret
+00013370: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+00013380: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00013390: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
+000133a0: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
+000133b0: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
+000133c0: 6f6e 286e 702e 6e61 6e6d 696e 290d 0a20  on(np.nanmin).. 
+000133d0: 2020 2064 6566 205f 6e61 6e6d 696e 2861     def _nanmin(a
+000133e0: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
+000133f0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+00013400: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+00013410: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+00013420: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+00013430: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00013440: 4e4d 494e 2c20 3029 0d0a 2020 2020 2020  NMIN, 0)..      
+00013450: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
+00013460: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00013470: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
+00013480: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+00013490: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+000134a0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
+000134b0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+000134c0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+000134d0: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+000134e0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+000134f0: 286e 702e 7374 6429 0d0a 2020 2020 6465  (np.std)..    de
+00013500: 6620 5f73 7464 2861 2c20 6178 6973 3d4e  f _std(a, axis=N
+00013510: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+00013520: 206f 7574 3d4e 6f6e 652c 2064 646f 663d   out=None, ddof=
+00013530: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
+00013540: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
+00013550: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
+00013560: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
+00013570: 5449 4f4e 532e 5245 4455 4345 5f53 5444  TIONS.REDUCE_STD
+00013580: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
+00013590: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
+000135a0: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
+000135b0: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
+000135c0: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
+000135d0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+000135e0: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
+000135f0: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
+00013600: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
+00013610: 702e 6e61 6e73 7464 290d 0a20 2020 2064  p.nanstd)..    d
+00013620: 6566 205f 6e61 6e73 7464 2861 2c20 6178  ef _nanstd(a, ax
+00013630: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
+00013640: 6f6e 652c 206f 7574 3d4e 6f6e 652c 2064  one, out=None, d
+00013650: 646f 663d 4e6f 6e65 2c20 6b65 6570 6469  dof=None, keepdi
+00013660: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
+00013670: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00013680: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00013690: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+000136a0: 5f4e 414e 5354 442c 2030 290d 0a20 2020  _NANSTD, 0)..   
+000136b0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+000136c0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+000136d0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+000136e0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+000136f0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00013700: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00013710: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00013720: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00013730: 6374 696f 6e28 6e70 2e72 6f75 6e64 290d  ction(np.round).
+00013740: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
+00013750: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
+00013760: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
+00013770: 6f6e 286e 702e 6172 6f75 6e64 290d 0a20  on(np.around).. 
+00013780: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+00013790: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+000137a0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+000137b0: 286e 702e 726f 756e 645f 2920 2023 204e  (np.round_)  # N
+000137c0: 2e42 2c20 726f 756e 645f 2069 7320 616e  .B, round_ is an
+000137d0: 2061 6c69 6173 2066 6f72 2061 726f 756e   alias for aroun
+000137e0: 640d 0a20 2020 2064 6566 205f 726f 756e  d..    def _roun
+000137f0: 645f 2861 2c20 6465 6369 6d61 6c73 3d4e  d_(a, decimals=N
+00013800: 6f6e 652c 206f 7574 3d4e 6f6e 6529 3a0d  one, out=None):.
+00013810: 0a20 2020 2020 2020 2023 2054 4f44 4f20  .        # TODO 
+00013820: 6861 6e64 6c65 2060 6465 6369 6d61 6c60  handle `decimal`
+00013830: 2061 6e64 2060 6f75 7460 2061 7267 756d   and `out` argum
+00013840: 656e 7473 0d0a 2020 2020 2020 2020 2320  ents..        # 
+00013850: 4966 2063 616c 6c65 7273 2064 6563 6964  If callers decid
+00013860: 6520 746f 2075 7365 2074 6869 7320 4661  e to use this Fa
+00013870: 7374 4172 7261 7920 7374 6174 6963 6d65  stArray staticme
+00013880: 7468 6f64 206f 7574 7369 6465 2074 6865  thod outside the
+00013890: 2073 636f 7065 206f 6620 6172 7261 7920   scope of array 
+000138a0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
+000138b0: 6c0d 0a20 2020 2020 2020 2023 2070 726f  l..        # pro
+000138c0: 7669 6465 2061 7267 756d 656e 7420 6368  vide argument ch
+000138d0: 6563 6b73 2073 696e 6365 2069 7420 6d61  ecks since it ma
+000138e0: 7920 6265 636f 6d65 2075 6e63 6c65 6172  y become unclear
+000138f0: 2077 6865 6e20 7468 696e 6773 2066 6169   when things fai
+00013900: 6c20 6174 2074 6865 2043 2065 7874 656e  l at the C exten
+00013910: 7369 6f6e 206c 6179 6572 2e0d 0a20 2020  sion layer...   
+00013920: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00013930: 7374 616e 6365 2861 2c20 4661 7374 4172  stance(a, FastAr
+00013940: 7261 7929 3a0d 0a20 2020 2020 2020 2020  ray):..         
+00013950: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00013960: 726f 7228 6622 7b46 6173 7441 7272 6179  ror(f"{FastArray
+00013970: 2e5f 5f6e 616d 655f 5f7d 2e5f 726f 756e  .__name__}._roun
+00013980: 645f 2065 7870 6563 7465 6420 4661 7374  d_ expected Fast
+00013990: 4172 7261 7920 7375 6274 7970 652c 2067  Array subtype, g
+000139a0: 6f74 207b 7479 7065 2861 297d 2229 0d0a  ot {type(a)}")..
+000139b0: 0d0a 2020 2020 2020 2020 6f72 6967 696e  ..        origin
+000139c0: 616c 5f64 7479 7065 203d 2061 2e64 7479  al_dtype = a.dty
+000139d0: 7065 0d0a 2020 2020 2020 2020 6120 3d20  pe..        a = 
+000139e0: 612e 6173 7479 7065 286e 702e 666c 6f61  a.astype(np.floa
+000139f0: 7436 3429 0d0a 2020 2020 2020 2020 6661  t64)..        fa
+00013a00: 7374 5f66 756e 6374 696f 6e20 3d20 6755  st_function = gU
+00013a10: 6e61 7279 5546 756e 6373 2e67 6574 286e  naryUFuncs.get(n
+00013a20: 702e 726f 756e 642c 204e 6f6e 6529 0d0a  p.round, None)..
+00013a30: 2020 2020 2020 2020 6966 2066 6173 745f          if fast_
+00013a40: 6675 6e63 7469 6f6e 2069 7320 4e6f 6e65  function is None
+00013a50: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00013a60: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+00013a70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013a80: 2020 6622 7b46 6173 7441 7272 6179 2e5f    f"{FastArray._
+00013a90: 5f6e 616d 655f 5f7d 2e5f 726f 756e 645f  _name__}._round_
+00013aa0: 2075 6e68 616e 646c 6564 2061 7272 6179   unhandled array
+00013ab0: 2066 756e 6374 696f 6e20 7b6e 702e 726f   function {np.ro
+00013ac0: 756e 647d 5c6e 4b6e 6f77 6e20 6e75 6d70  und}\nKnown nump
+00013ad0: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
+00013ae0: 2074 6f20 7269 7074 6162 6c65 2066 756e   to riptable fun
+00013af0: 6374 696f 6e73 3a20 7b72 6570 7228 6755  ctions: {repr(gU
+00013b00: 6e61 7279 5546 756e 6373 297d 220d 0a20  naryUFuncs)}".. 
+00013b10: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00013b20: 2020 2020 2020 2020 2320 466f 7220 4d41          # For MA
+00013b30: 5448 5f4f 5045 5241 5449 4f4e 2e52 4f55  TH_OPERATION.ROU
+00013b40: 4e44 2c20 5f42 4153 4943 4d41 5448 5f4f  ND, _BASICMATH_O
+00013b50: 4e45 5f49 4e50 5554 2072 6574 7572 6e73  NE_INPUT returns
+00013b60: 2061 6e20 6172 7261 7920 6061 7272 6179   an array `array
+00013b70: 284e 6f6e 652c 2064 7479 7065 3d6f 626a  (None, dtype=obj
+00013b80: 6563 7429 600d 0a20 2020 2020 2020 2023  ect)`..        #
+00013b90: 2069 6620 7468 6520 696e 7075 7420 6474   if the input dt
+00013ba0: 7970 6520 6973 206e 6f74 2061 2066 6c6f  ype is not a flo
+00013bb0: 6174 3634 2e20 4173 2061 2077 6f72 6b61  at64. As a worka
+00013bc0: 726f 756e 6420 6361 7374 2074 6f20 666c  round cast to fl
+00013bd0: 6f61 7436 3420 6474 7970 652c 2070 6572  oat64 dtype, per
+00013be0: 666f 726d 2074 6865 206f 7065 7261 7469  form the operati
+00013bf0: 6f6e 2c0d 0a20 2020 2020 2020 2023 2074  on,..        # t
+00013c00: 6865 6e20 6361 7374 2062 6163 6b20 746f  hen cast back to
+00013c10: 2074 6865 206f 7269 6769 6e61 6c20 6474   the original dt
+00013c20: 7970 652e 0d0a 2020 2020 2020 2020 7265  ype...        re
+00013c30: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
+00013c40: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+00013c50: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
+00013c60: 5055 5428 612c 2066 6173 745f 6675 6e63  PUT(a, fast_func
+00013c70: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
+00013c80: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00013c90: 7461 6e63 6528 7265 7375 6c74 2c20 4661  tance(result, Fa
+00013ca0: 7374 4172 7261 7929 2061 6e64 2069 7369  stArray) and isi
+00013cb0: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
+00013cc0: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
+00013cd0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00013ce0: 203d 2072 6573 756c 742e 7669 6577 2846   = result.view(F
+00013cf0: 6173 7441 7272 6179 290d 0a0d 0a20 2020  astArray)....   
+00013d00: 2020 2020 2069 6620 7265 7375 6c74 2e64       if result.d
+00013d10: 7479 7065 2021 3d20 6f72 6967 696e 616c  type != original
+00013d20: 5f64 7479 7065 3a0d 0a20 2020 2020 2020  _dtype:..       
+00013d30: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
+00013d40: 7375 6c74 2e61 7374 7970 6528 6f72 6967  sult.astype(orig
+00013d50: 696e 616c 5f64 7479 7065 290d 0a0d 0a20  inal_dtype).... 
+00013d60: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00013d70: 7375 6c74 0d0a 0d0a 2020 2020 4073 7461  sult....    @sta
+00013d80: 7469 636d 6574 686f 640d 0a20 2020 2040  ticmethod..    @
+00013d90: 5f41 7272 6179 4675 6e63 7469 6f6e 4865  _ArrayFunctionHe
+00013da0: 6c70 6572 2e72 6567 6973 7465 725f 6172  lper.register_ar
+00013db0: 7261 795f 6675 6e63 7469 6f6e 286e 702e  ray_function(np.
+00013dc0: 7375 6d29 0d0a 2020 2020 6465 6620 5f73  sum)..    def _s
+00013dd0: 756d 2861 2c20 6178 6973 3d4e 6f6e 652c  um(a, axis=None,
+00013de0: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
+00013df0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+00013e00: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
+00013e10: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
+00013e20: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+00013e30: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
+00013e40: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+00013e50: 2e52 4544 5543 455f 5355 4d2c 2030 290d  .REDUCE_SUM, 0).
+00013e60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013e70: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
+00013e80: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
+00013e90: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
+00013ea0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00013eb0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
+00013ec0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+00013ed0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
+00013ee0: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
+00013ef0: 7375 6d29 0d0a 2020 2020 6465 6620 5f6e  sum)..    def _n
+00013f00: 616e 7375 6d28 612c 2061 7869 733d 4e6f  ansum(a, axis=No
+00013f10: 6e65 2c20 6474 7970 653d 4e6f 6e65 2c20  ne, dtype=None, 
+00013f20: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
+00013f30: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
+00013f40: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00013f50: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00013f60: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00013f70: 5f4e 414e 5355 4d2c 2030 290d 0a20 2020  _NANSUM, 0)..   
+00013f80: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+00013f90: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00013fa0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00013fb0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00013fc0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00013fd0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00013fe0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00013ff0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00014000: 6374 696f 6e28 6e70 2e76 6172 290d 0a20  ction(np.var).. 
+00014010: 2020 2064 6566 205f 7661 7228 612c 2061     def _var(a, a
+00014020: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
+00014030: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00014040: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
+00014050: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
+00014060: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+00014070: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+00014080: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00014090: 455f 5641 522c 2030 290d 0a20 2020 2020  E_VAR, 0)..     
+000140a0: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
+000140b0: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
+000140c0: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
+000140d0: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
+000140e0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000140f0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00014100: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+00014110: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00014120: 696f 6e28 6e70 2e6e 616e 7661 7229 0d0a  ion(np.nanvar)..
+00014130: 2020 2020 6465 6620 5f6e 616e 7661 7228      def _nanvar(
+00014140: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
+00014150: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
+00014160: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
+00014170: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
+00014180: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00014190: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+000141a0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+000141b0: 4544 5543 455f 4e41 4e56 4152 2c20 3029  EDUCE_NANVAR, 0)
+000141c0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000141d0: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+000141e0: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+000141f0: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+00014200: 6529 0d0a 0d0a 2020 2020 2323 2323 2323  e)....    ######
+00014210: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00014220: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00014230: 2323 2323 2323 230d 0a20 2020 2023 2048  #######..    # H
+00014240: 656c 7065 7220 7365 6374 696f 6e0d 0a20  elper section.. 
+00014250: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00014260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00014270: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00014280: 0d0a 2020 2020 6465 6620 6162 7328 7365  ..    def abs(se
+00014290: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+000142a0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000142b0: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
+000142c0: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
+000142d0: 7329 0d0a 0d0a 2020 2020 6465 6620 6d65  s)....    def me
+000142e0: 6469 616e 2873 656c 662c 202a 2a6b 7761  dian(self, **kwa
+000142f0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+00014300: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
+00014310: 726e 206e 702e 6d65 6469 616e 2873 656c  rn np.median(sel
+00014320: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
+00014330: 2020 2020 6465 6620 6e61 6e6d 6564 6961      def nanmedia
+00014340: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00014350: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
+00014360: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014370: 6e70 2e6e 616e 6d65 6469 616e 2873 656c  np.nanmedian(sel
+00014380: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
+00014390: 2020 2020 6465 6620 7175 616e 7469 6c65      def quantile
+000143a0: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
+000143b0: 202d 3e20 6e70 2e6e 756d 6265 7220 7c20   -> np.number | 
+000143c0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+000143d0: 2020 2020 7265 7475 726e 206e 702e 7175      return np.qu
+000143e0: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
+000143f0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+00014400: 6620 6e61 6e71 7561 6e74 696c 6528 7365  f nanquantile(se
+00014410: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+00014420: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
+00014430: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00014440: 2072 6574 7572 6e20 6e70 2e6e 616e 7175   return np.nanqu
+00014450: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
+00014460: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+00014470: 6620 7065 7263 656e 7469 6c65 2873 656c  f percentile(sel
+00014480: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00014490: 6e70 2e6e 756d 6265 7220 7c20 4661 7374  np.number | Fast
+000144a0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+000144b0: 7265 7475 726e 206e 702e 7065 7263 656e  return np.percen
+000144c0: 7469 6c65 2873 656c 662c 202a 2a6b 7761  tile(self, **kwa
+000144d0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+000144e0: 6e61 6e70 6572 6365 6e74 696c 6528 7365  nanpercentile(se
+000144f0: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+00014500: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
+00014510: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00014520: 2072 6574 7572 6e20 6e70 2e6e 616e 7065   return np.nanpe
+00014530: 7263 656e 7469 6c65 2873 656c 662c 202a  rcentile(self, *
+00014540: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
+00014550: 6465 6620 636c 6970 5f6c 6f77 6572 2873  def clip_lower(s
+00014560: 656c 662c 2061 5f6d 696e 2c20 2a2a 6b77  elf, a_min, **kw
+00014570: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
+00014580: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
+00014590: 7572 6e20 7365 6c66 2e63 6c69 7028 615f  urn self.clip(a_
+000145a0: 6d69 6e2c 204e 6f6e 652c 202a 2a6b 7761  min, None, **kwa
+000145b0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+000145c0: 636c 6970 5f75 7070 6572 2873 656c 662c  clip_upper(self,
+000145d0: 2061 5f6d 6178 2c20 2a2a 6b77 6172 6773   a_max, **kwargs
+000145e0: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
+000145f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014600: 7365 6c66 2e63 6c69 7028 4e6f 6e65 2c20  self.clip(None, 
+00014610: 615f 6d61 782c 202a 2a6b 7761 7267 7329  a_max, **kwargs)
+00014620: 0d0a 0d0a 2020 2020 6465 6620 7369 676e  ....    def sign
+00014630: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
+00014640: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+00014650: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00014660: 702e 7369 676e 2873 656c 662c 202a 2a6b  p.sign(self, **k
+00014670: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+00014680: 6620 7472 756e 6328 7365 6c66 2c20 2a2a  f trunc(self, **
+00014690: 6b77 6172 6773 2920 2d3e 2046 6173 7441  kwargs) -> FastA
+000146a0: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
+000146b0: 6574 7572 6e20 6e70 2e74 7275 6e63 2873  eturn np.trunc(s
+000146c0: 656c 662c 202a 2a6b 7761 7267 7329 0d0a  elf, **kwargs)..
+000146d0: 0d0a 2020 2020 6465 6620 7768 6572 6528  ..    def where(
+000146e0: 7365 6c66 2c20 636f 6e64 6974 696f 6e2c  self, condition,
+000146f0: 2079 3d6e 702e 6e61 6e29 202d 3e20 4661   y=np.nan) -> Fa
+00014700: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
+00014710: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00014720: 6574 7572 6e20 6120 6e65 7720 6046 6173  eturn a new `Fas
+00014730: 7441 7272 6179 6020 696e 2077 6869 6368  tArray` in which
+00014740: 2076 616c 7565 7320 6172 6520 7265 706c   values are repl
+00014750: 6163 6564 2077 6865 7265 2061 2067 6976  aced where a giv
+00014760: 656e 0d0a 2020 2020 2020 2020 636f 6e64  en..        cond
+00014770: 6974 696f 6e20 6973 2046 616c 7365 2e0d  ition is False..
+00014780: 0a0d 0a20 2020 2020 2020 2054 6f20 616c  ...        To al
+00014790: 736f 2070 726f 7669 6465 2061 2076 616c  so provide a val
+000147a0: 7565 2066 6f72 2077 6865 7265 2074 6865  ue for where the
+000147b0: 2063 6f6e 6469 7469 6f6e 2069 7320 5472   condition is Tr
+000147c0: 7565 2c20 7573 650d 0a20 2020 2020 2020  ue, use..       
+000147d0: 203a 6d65 7468 3a60 7269 7074 6162 6c65   :meth:`riptable
+000147e0: 2e77 6865 7265 602e 0d0a 0d0a 2020 2020  .where`.....    
+000147f0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00014800: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00014810: 2d2d 0d0a 2020 2020 2020 2020 636f 6e64  --..        cond
+00014820: 6974 696f 6e20 3a20 626f 6f6c 206f 7220  ition : bool or 
+00014830: 6172 7261 7920 6f66 2062 6f6f 6c0d 0a20  array of bool.. 
+00014840: 2020 2020 2020 2020 2020 2057 6865 7265             Where
+00014850: 2074 6865 2063 6f6e 6469 7469 6f6e 2069   the condition i
+00014860: 7320 5472 7565 2c20 6b65 6570 2074 6865  s True, keep the
+00014870: 206f 7269 6769 6e61 6c20 7661 6c75 652e   original value.
+00014880: 2057 6865 7265 2046 616c 7365 2c0d 0a20   Where False,.. 
+00014890: 2020 2020 2020 2020 2020 2072 6570 6c61             repla
+000148a0: 6365 2077 6974 6820 6079 6020 2869 6620  ce with `y` (if 
+000148b0: 6079 6020 6973 2061 2073 6361 6c61 7229  `y` is a scalar)
+000148c0: 206f 7220 7468 6520 636f 7272 6573 706f   or the correspo
+000148d0: 6e64 696e 6720 7661 6c75 650d 0a20 2020  nding value..   
+000148e0: 2020 2020 2020 2020 2066 726f 6d20 6079           from `y
+000148f0: 6020 2869 6620 6079 6020 6973 2061 6e20  ` (if `y` is an 
+00014900: 6172 7261 7929 2e20 4966 2060 636f 6e64  array). If `cond
+00014910: 6974 696f 6e60 2069 7320 616e 2061 7272  ition` is an arr
+00014920: 6179 206f 7220 610d 0a20 2020 2020 2020  ay or a..       
+00014930: 2020 2020 2061 2063 6f6d 7061 7269 736f       a compariso
+00014940: 6e20 7468 6174 2072 6574 7572 6e73 2061  n that returns a
+00014950: 6e20 6172 7261 792c 2074 6865 2061 7272  n array, the arr
+00014960: 6179 206d 7573 7420 6265 2074 6865 2073  ay must be the s
+00014970: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
+00014980: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
+00014990: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
+000149a0: 7960 2e0d 0a20 2020 2020 2020 2079 203a  y`...        y :
+000149b0: 2073 6361 6c61 722c 2061 7272 6179 2c20   scalar, array, 
+000149c0: 6f72 2063 616c 6c61 626c 652c 2064 6566  or callable, def
+000149d0: 6175 6c74 206e 702e 6e61 6e0d 0a20 2020  ault np.nan..   
+000149e0: 2020 2020 2020 2020 2054 6865 2076 616c           The val
+000149f0: 7565 2074 6f20 7573 6520 7768 6572 6520  ue to use where 
+00014a00: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
+00014a10: 616c 7365 2e20 4966 2060 7960 2069 7320  alse. If `y` is 
+00014a20: 616e 0d0a 2020 2020 2020 2020 2020 2020  an..            
+00014a30: 6172 7261 7920 6f72 2061 2063 616c 6c61  array or a calla
+00014a40: 626c 6520 7468 6174 2072 6574 7572 6e73  ble that returns
+00014a50: 2061 6e20 6172 7261 792c 2069 7420 6d75   an array, it mu
+00014a60: 7374 2062 6520 7468 6520 7361 6d65 0d0a  st be the same..
+00014a70: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
+00014a80: 7468 2061 7320 7468 6520 6361 6c6c 696e  th as the callin
+00014a90: 6720 6046 6173 7441 7272 6179 602e 2054  g `FastArray`. T
+00014aa0: 6865 2076 616c 7565 206f 6620 6079 6020  he value of `y` 
+00014ab0: 7468 6174 2063 6f72 7265 7370 6f6e 6473  that corresponds
+00014ac0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
+00014ad0: 2074 6865 2046 616c 7365 2076 616c 7565   the False value
+00014ae0: 2069 7320 7573 6564 2e0d 0a0d 0a20 2020   is used.....   
+00014af0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00014b00: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00014b10: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00014b20: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
+00014b30: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
+00014b40: 7769 7468 2076 616c 7565 7320 7265 706c  with values repl
+00014b50: 6163 6564 2077 6865 7265 2060 636f 6e64  aced where `cond
+00014b60: 6974 696f 6e60 2069 7320 4661 6c73 652e  ition` is False.
+00014b70: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00014b80: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+00014b90: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00014ba0: 2e72 6970 7461 626c 652e 7768 6572 6520  .riptable.where 
+00014bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
+00014bc0: 6570 6c61 6365 2076 616c 7565 7320 6465  eplace values de
+00014bd0: 7065 6e64 696e 6720 6f6e 2077 6865 7468  pending on wheth
+00014be0: 6572 2061 2067 6976 656e 2063 6f6e 6469  er a given condi
+00014bf0: 7469 6f6e 2069 7320 5472 7565 206f 720d  tion is True or.
+00014c00: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
+00014c10: 7365 2e0d 0a0d 0a20 2020 2020 2020 2045  se.....        E
+00014c20: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00014c30: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00014c40: 2020 2060 636f 6e64 6974 696f 6e60 2069     `condition` i
+00014c50: 7320 6120 636f 6d70 6172 6973 6f6e 2074  s a comparison t
+00014c60: 6861 7420 6372 6561 7465 7320 616e 2061  hat creates an a
+00014c70: 7272 6179 206f 6620 626f 6f6c 6561 6e73  rray of booleans
+00014c80: 2c20 616e 640d 0a20 2020 2020 2020 2060  , and..        `
+00014c90: 7960 2069 7320 6120 7363 616c 6172 3a0d  y` is a scalar:.
+00014ca0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00014cb0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00014cc0: 7274 2e61 7261 6e67 6528 3529 290d 0a20  rt.arange(5)).. 
+00014cd0: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+00014ce0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00014cf0: 5b30 2c20 312c 2032 2c20 332c 2034 5d29  [0, 1, 2, 3, 4])
+00014d00: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00014d10: 7768 6572 6528 6120 3e20 322c 2031 3030  where(a > 2, 100
+00014d20: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00014d30: 7272 6179 285b 3130 302c 2031 3030 2c20  rray([100, 100, 
+00014d40: 3130 302c 2020 2033 2c20 2020 345d 290d  100,   3,   4]).
+00014d50: 0a0d 0a20 2020 2020 2020 2060 636f 6e64  ...        `cond
+00014d60: 6974 696f 6e60 2061 6e64 2060 7960 2061  ition` and `y` a
+00014d70: 7265 2073 616d 652d 6c65 6e67 7468 2061  re same-length a
+00014d80: 7272 6179 733a 0d0a 0d0a 2020 2020 2020  rrays:....      
+00014d90: 2020 3e3e 3e20 636f 6e64 6974 696f 6e20    >>> condition 
+00014da0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00014db0: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
+00014dc0: 652c 2046 616c 7365 2c20 4661 6c73 655d  e, False, False]
+00014dd0: 290d 0a20 2020 2020 2020 203e 3e3e 2079  )..        >>> y
+00014de0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00014df0: 5b31 3030 2c20 3230 302c 2033 3030 2c20  [100, 200, 300, 
+00014e00: 3430 302c 2035 3030 5d29 0d0a 2020 2020  400, 500])..    
+00014e10: 2020 2020 3e3e 3e20 612e 7768 6572 6528      >>> a.where(
+00014e20: 636f 6e64 6974 696f 6e2c 2079 290d 0a20  condition, y).. 
+00014e30: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00014e40: 285b 2020 302c 2020 2031 2c20 3330 302c  ([  0,   1, 300,
+00014e50: 2034 3030 2c20 3530 305d 290d 0a20 2020   400, 500])..   
+00014e60: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00014e70: 2020 7265 7475 726e 2077 6865 7265 2863    return where(c
+00014e80: 6f6e 6469 7469 6f6e 2c20 7365 6c66 2c20  ondition, self, 
+00014e90: 7929 0d0a 0d0a 2020 2020 6465 6620 636f  y)....    def co
+00014ea0: 756e 7428 7365 6c66 2c20 736f 7274 6564  unt(self, sorted
+00014eb0: 3d54 7275 652c 2066 696c 7465 723d 4e6f  =True, filter=No
+00014ec0: 6e65 2920 2d3e 2044 6174 6173 6574 3a0d  ne) -> Dataset:.
+00014ed0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00014ee0: 2020 2020 2020 5468 6520 636f 756e 7420        The count 
+00014ef0: 6f66 2065 6163 6820 756e 6971 7565 2076  of each unique v
+00014f00: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
+00014f10: 2054 6869 7320 7265 7475 726e 7320 7468   This returns th
+00014f20: 6520 7361 6d65 2069 6e66 6f72 6d61 7469  e same informati
+00014f30: 6f6e 2074 6861 7420 6060 2e75 6e69 7175  on that ``.uniqu
+00014f40: 6528 7265 7475 726e 5f63 6f75 6e74 7320  e(return_counts 
+00014f50: 3d20 5472 7565 2960 600d 0a20 2020 2020  = True)``..     
+00014f60: 2020 2064 6f65 732c 2065 7863 6570 7420     does, except 
+00014f70: 696e 2061 2060 4461 7461 7365 7460 2069  in a `Dataset` i
+00014f80: 6e73 7465 6164 206f 6620 6120 7475 706c  nstead of a tupl
+00014f90: 652e 0d0a 0d0a 2020 2020 2020 2020 5061  e.....        Pa
+00014fa0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00014fb0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00014fc0: 2020 2020 2020 736f 7274 6564 203a 2062        sorted : b
+00014fd0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00014fe0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
+00014ff0: 6865 6e20 5472 7565 2028 7468 6520 6465  hen True (the de
+00015000: 6661 756c 7429 2c20 756e 6971 7565 2076  fault), unique v
+00015010: 616c 7565 7320 6172 6520 7265 7475 726e  alues are return
+00015020: 6564 2069 6e20 736f 7274 6564 206f 7264  ed in sorted ord
+00015030: 6572 2e20 5365 7420 746f 0d0a 2020 2020  er. Set to..    
+00015040: 2020 2020 2020 2020 4661 6c73 6520 746f          False to
+00015050: 2072 6574 7572 6e20 7468 656d 2069 6e20   return them in 
+00015060: 6f72 6465 7220 6f66 2066 6972 7374 2061  order of first a
+00015070: 7070 6561 7261 6e63 652e 0d0a 2020 2020  ppearance...    
+00015080: 2020 2020 6669 6c74 6572 3a20 6e64 6172      filter: ndar
+00015090: 7261 7920 6f66 2062 6f6f 6c2c 2064 6566  ray of bool, def
+000150a0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
+000150b0: 2020 2020 2020 2049 6620 7072 6f76 6964         If provid
+000150c0: 6564 2c20 616e 7920 4661 6c73 6520 7661  ed, any False va
+000150d0: 6c75 6573 2077 696c 6c20 6265 2069 676e  lues will be ign
+000150e0: 6f72 6564 2069 6e20 7468 6520 6361 6c63  ored in the calc
+000150f0: 756c 6174 696f 6e2e 0d0a 0d0a 2020 2020  ulation.....    
+00015100: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+00015110: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+00015120: 2020 2020 2020 4461 7461 7365 740d 0a20        Dataset.. 
+00015130: 2020 2020 2020 2020 2020 2041 2060 4461             A `Da
+00015140: 7461 7365 7460 2063 6f6e 7461 696e 696e  taset` containin
+00015150: 6720 7468 6520 756e 6971 7565 2076 616c  g the unique val
+00015160: 7565 7320 616e 6420 7468 6569 7220 636f  ues and their co
+00015170: 756e 7473 2e0d 0a0d 0a20 2020 2020 2020  unts.....       
+00015180: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00015190: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+000151a0: 2020 2020 2046 6173 7441 7272 6179 2e75       FastArray.u
+000151b0: 6e69 7175 650d 0a0d 0a20 2020 2020 2020  nique....       
+000151c0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+000151d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+000151e0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
+000151f0: 4661 7374 4172 7261 7928 5b30 2c20 322c  FastArray([0, 2,
+00015200: 2031 2c20 332c 2033 2c20 322c 2032 5d29   1, 3, 3, 2, 2])
+00015210: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00015220: 636f 756e 7428 290d 0a20 2020 2020 2020  count()..       
+00015230: 202a 556e 6971 7565 2020 2043 6f75 6e74   *Unique   Count
+00015240: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00015250: 2d20 2020 2d2d 2d2d 2d0d 0a20 2020 2020  -   -----..     
+00015260: 2020 2020 2020 2020 2030 2020 2020 2020           0      
+00015270: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+00015280: 2020 3120 2020 2020 2020 310d 0a20 2020    1       1..   
+00015290: 2020 2020 2020 2020 2020 2032 2020 2020             2    
+000152a0: 2020 2033 0d0a 2020 2020 2020 2020 2020     3..          
+000152b0: 2020 2020 3320 2020 2020 2020 320d 0a0d      3       2...
+000152c0: 0a20 2020 2020 2020 2057 6974 6820 6060  .        With ``
+000152d0: 736f 7274 6564 203d 2046 616c 7365 6060  sorted = False``
+000152e0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+000152f0: 2061 2e63 6f75 6e74 2873 6f72 7465 6420   a.count(sorted 
+00015300: 3d20 4661 6c73 6529 0d0a 2020 2020 2020  = False)..      
+00015310: 2020 2a55 6e69 7175 6520 2020 436f 756e    *Unique   Coun
+00015320: 740d 0a20 2020 2020 2020 202d 2d2d 2d2d  t..        -----
+00015330: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
+00015340: 2020 2020 2020 2020 2020 3020 2020 2020            0     
+00015350: 2020 310d 0a20 2020 2020 2020 2020 2020    1..           
+00015360: 2020 2032 2020 2020 2020 2033 0d0a 2020     2       3..  
+00015370: 2020 2020 2020 2020 2020 2020 3120 2020              1   
+00015380: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
+00015390: 2020 2020 2033 2020 2020 2020 2032 0d0a       3       2..
+000153a0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000153b0: 2020 2020 2075 6e69 7175 655f 636f 756e       unique_coun
+000153c0: 7473 203d 2075 6e69 7175 6528 7365 6c66  ts = unique(self
+000153d0: 2c20 736f 7274 6564 3d73 6f72 7465 642c  , sorted=sorted,
+000153e0: 2072 6574 7572 6e5f 636f 756e 7473 3d54   return_counts=T
+000153f0: 7275 652c 2066 696c 7465 723d 6669 6c74  rue, filter=filt
+00015400: 6572 290d 0a20 2020 2020 2020 206e 616d  er)..        nam
+00015410: 6520 3d20 7365 6c66 2e67 6574 5f6e 616d  e = self.get_nam
+00015420: 6528 290d 0a20 2020 2020 2020 2069 6620  e()..        if 
+00015430: 6e61 6d65 2069 7320 4e6f 6e65 3a0d 0a20  name is None:.. 
+00015440: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00015450: 3d20 2255 6e69 7175 6522 0d0a 2020 2020  = "Unique"..    
+00015460: 2020 2020 6473 203d 2054 7970 6552 6567      ds = TypeReg
+00015470: 6973 7465 722e 4461 7461 7365 7428 7b6e  ister.Dataset({n
+00015480: 616d 653a 2075 6e69 7175 655f 636f 756e  ame: unique_coun
+00015490: 7473 5b30 5d2c 2022 436f 756e 7422 3a20  ts[0], "Count": 
+000154a0: 756e 6971 7565 5f63 6f75 6e74 735b 315d  unique_counts[1]
+000154b0: 7d29 0d0a 2020 2020 2020 2020 6473 2e6c  })..        ds.l
+000154c0: 6162 656c 5f73 6574 5f6e 616d 6573 285b  abel_set_names([
+000154d0: 6e61 6d65 5d29 0d0a 2020 2020 2020 2020  name])..        
+000154e0: 7265 7475 726e 2064 730d 0a0d 0a20 2020  return ds....   
+000154f0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+00015500: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015510: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
+00015520: 2020 2020 2320 526f 6c6c 696e 6720 7365      # Rolling se
+00015530: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
+00015540: 6e64 6c65 2073 7472 6964 6573 290d 0a20  ndle strides).. 
+00015550: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00015560: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015570: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015580: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+00015590: 675f 7375 6d28 7365 6c66 2c20 7769 6e64  g_sum(self, wind
+000155a0: 6f77 3a20 696e 7420 3d20 3329 202d 3e20  ow: int = 3) -> 
+000155b0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+000155c0: 2020 2020 7265 7475 726e 2072 632e 526f      return rc.Ro
+000155d0: 6c6c 696e 6728 7365 6c66 2c20 524f 4c4c  lling(self, ROLL
+000155e0: 494e 475f 4655 4e43 5449 4f4e 532e 524f  ING_FUNCTIONS.RO
+000155f0: 4c4c 494e 475f 5355 4d2c 2077 696e 646f  LLING_SUM, windo
+00015600: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
+00015610: 6c6c 696e 675f 6e61 6e73 756d 2873 656c  lling_nansum(sel
+00015620: 662c 2077 696e 646f 773a 2069 6e74 203d  f, window: int =
+00015630: 2033 2920 2d3e 2046 6173 7441 7272 6179   3) -> FastArray
+00015640: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00015650: 6e20 7263 2e52 6f6c 6c69 6e67 2873 656c  n rc.Rolling(sel
+00015660: 662c 2052 4f4c 4c49 4e47 5f46 554e 4354  f, ROLLING_FUNCT
+00015670: 494f 4e53 2e52 4f4c 4c49 4e47 5f4e 414e  IONS.ROLLING_NAN
+00015680: 5355 4d2c 2077 696e 646f 7729 0d0a 0d0a  SUM, window)....
+00015690: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
+000156a0: 6d65 616e 2873 656c 662c 2077 696e 646f  mean(self, windo
+000156b0: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
+000156c0: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
+000156d0: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
+000156e0: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
+000156f0: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
+00015700: 4c49 4e47 5f4d 4541 4e2c 2077 696e 646f  LING_MEAN, windo
+00015710: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
+00015720: 6c6c 696e 675f 6e61 6e6d 6561 6e28 7365  lling_nanmean(se
+00015730: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
+00015740: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
+00015750: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
+00015760: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
+00015770: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
+00015780: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
+00015790: 4e4d 4541 4e2c 2077 696e 646f 7729 0d0a  NMEAN, window)..
+000157a0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+000157b0: 675f 7175 616e 7469 6c65 2873 656c 662c  g_quantile(self,
+000157c0: 2071 2c20 7769 6e64 6f77 3a20 696e 7420   q, window: int 
+000157d0: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
+000157e0: 793a 0d0a 2020 2020 2020 2020 7769 6e64  y:..        wind
+000157f0: 6f77 203d 206d 696e 2877 696e 646f 772c  ow = min(window,
+00015800: 206c 656e 2873 656c 6629 290d 0a20 2020   len(self))..   
+00015810: 2020 2020 2077 696e 646f 7750 6172 616d       windowParam
+00015820: 203d 2072 6f6c 6c69 6e67 5f71 7561 6e74   = rolling_quant
+00015830: 696c 655f 6675 6e63 5061 7261 6d28 712c  ile_funcParam(q,
+00015840: 2077 696e 646f 7729 0d0a 2020 2020 2020   window)..      
+00015850: 2020 7265 7475 726e 2072 632e 526f 6c6c    return rc.Roll
+00015860: 696e 6728 7365 6c66 2c20 524f 4c4c 494e  ing(self, ROLLIN
+00015870: 475f 4655 4e43 5449 4f4e 532e 524f 4c4c  G_FUNCTIONS.ROLL
+00015880: 494e 475f 5155 414e 5449 4c45 2c20 7769  ING_QUANTILE, wi
+00015890: 6e64 6f77 5061 7261 6d29 0d0a 0d0a 2020  ndowParam)....  
+000158a0: 2020 6465 6620 726f 6c6c 696e 675f 7661    def rolling_va
+000158b0: 7228 7365 6c66 2c20 7769 6e64 6f77 3a20  r(self, window: 
+000158c0: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
+000158d0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+000158e0: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
+000158f0: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
+00015900: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
+00015910: 475f 5641 522c 2077 696e 646f 7729 0d0a  G_VAR, window)..
+00015920: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+00015930: 675f 6e61 6e76 6172 2873 656c 662c 2077  g_nanvar(self, w
+00015940: 696e 646f 773a 2069 6e74 203d 2033 2920  indow: int = 3) 
+00015950: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+00015960: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
+00015970: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
+00015980: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
+00015990: 2e52 4f4c 4c49 4e47 5f4e 414e 5641 522c  .ROLLING_NANVAR,
+000159a0: 2077 696e 646f 7729 0d0a 0d0a 2020 2020   window)....    
+000159b0: 6465 6620 726f 6c6c 696e 675f 7374 6428  def rolling_std(
+000159c0: 7365 6c66 2c20 7769 6e64 6f77 3a20 696e  self, window: in
+000159d0: 7420 3d20 3329 202d 3e20 4661 7374 4172  t = 3) -> FastAr
+000159e0: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
+000159f0: 7475 726e 2072 632e 526f 6c6c 696e 6728  turn rc.Rolling(
+00015a00: 7365 6c66 2c20 524f 4c4c 494e 475f 4655  self, ROLLING_FU
+00015a10: 4e43 5449 4f4e 532e 524f 4c4c 494e 475f  NCTIONS.ROLLING_
+00015a20: 5354 442c 2077 696e 646f 7729 0d0a 0d0a  STD, window)....
+00015a30: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
+00015a40: 6e61 6e73 7464 2873 656c 662c 2077 696e  nanstd(self, win
+00015a50: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
+00015a60: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+00015a70: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
+00015a80: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
+00015a90: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
+00015aa0: 4f4c 4c49 4e47 5f4e 414e 5354 442c 2077  OLLING_NANSTD, w
+00015ab0: 696e 646f 7729 0d0a 0d0a 2020 2020 2323  indow)....    ##
+00015ac0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015ad0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015ae0: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
+00015af0: 2023 2054 696d 6557 696e 646f 7720 7365   # TimeWindow se
+00015b00: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
+00015b10: 6e64 6c65 2073 7472 6964 6573 292c 2074  ndle strides), t
+00015b20: 696d 655f 6172 7261 7920 6d75 7374 2062  ime_array must b
+00015b30: 6520 494e 5436 340d 0a20 2020 2023 2323  e INT64..    ###
+00015b40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015b50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00015b60: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+00015b70: 6465 6620 7469 6d65 7769 6e64 6f77 5f73  def timewindow_s
+00015b80: 756d 2873 656c 662c 2074 696d 655f 6172  um(self, time_ar
+00015b90: 7261 792c 2074 696d 655f 6469 7374 293a  ray, time_dist):
+00015ba0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00015bb0: 2020 2020 2020 2054 6865 2069 6e70 7574         The input
+00015bc0: 2061 7272 6179 206d 7573 7420 6265 2069   array must be i
+00015bd0: 6e74 3634 2061 6e64 2073 6f72 7465 6420  nt64 and sorted 
+00015be0: 7769 7468 2065 7665 7220 696e 6372 6561  with ever increa
+00015bf0: 7369 6e67 2076 616c 7565 732e 0d0a 2020  sing values...  
+00015c00: 2020 2020 2020 5375 6d73 2075 7020 7468        Sums up th
+00015c10: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
+00015c20: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
+00015c30: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00015c40: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00015c50: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00015c60: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
+00015c70: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
+00015c80: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
+00015c90: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
+00015ca0: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
+00015cb0: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
+00015cc0: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
+00015cd0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00015ce0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00015cf0: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+00015d00: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
+00015d10: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
+00015d20: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00015d30: 7469 6d65 7769 6e64 6f77 5f73 756d 2861  timewindow_sum(a
+00015d40: 2c35 290d 0a20 2020 2020 2020 2046 6173  ,5)..        Fas
+00015d50: 7441 7272 6179 285b 2030 2c20 2031 2c20  tArray([ 0,  1, 
+00015d60: 2033 2c20 2036 2c20 3130 2c20 3135 2c20   3,  6, 10, 15, 
+00015d70: 3231 2c20 3237 2c20 3333 2c20 3339 5d2c  21, 27, 33, 39],
+00015d80: 2064 7479 7065 3d69 6e74 3634 290d 0a0d   dtype=int64)...
+00015d90: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00015da0: 2020 2020 2020 7265 7475 726e 2072 632e        return rc.
+00015db0: 5469 6d65 5769 6e64 6f77 2873 656c 662c  TimeWindow(self,
+00015dc0: 2074 696d 655f 6172 7261 792c 2054 494d   time_array, TIM
+00015dd0: 4557 494e 444f 575f 4655 4e43 5449 4f4e  EWINDOW_FUNCTION
+00015de0: 532e 5449 4d45 5749 4e44 4f57 5f53 554d  S.TIMEWINDOW_SUM
+00015df0: 2c20 7469 6d65 5f64 6973 7429 0d0a 0d0a  , time_dist)....
+00015e00: 2020 2020 6465 6620 7469 6d65 7769 6e64      def timewind
+00015e10: 6f77 5f70 726f 6428 7365 6c66 2c20 7469  ow_prod(self, ti
+00015e20: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
+00015e30: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
+00015e40: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
+00015e50: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
+00015e60: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
+00015e70: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
+00015e80: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
+00015e90: 2e0d 0a20 2020 2020 2020 204d 756c 7469  ...        Multi
+00015ea0: 706c 6965 7320 7570 2074 6865 2076 616c  plies up the val
+00015eb0: 7565 7320 666f 7220 6120 6769 7665 6e20  ues for a given 
+00015ec0: 7469 6d65 2077 696e 646f 772e 0d0a 0d0a  time window.....
+00015ed0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00015ee0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+00015ef0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00015f00: 7469 6d65 5f61 7272 6179 3a20 736f 7274  time_array: sort
+00015f10: 6564 2069 6e74 6567 6572 2061 7272 6179  ed integer array
+00015f20: 206f 6620 7469 6d65 7374 616d 7073 0d0a   of timestamps..
+00015f30: 2020 2020 2020 2020 7469 6d65 5f64 6973          time_dis
+00015f40: 743a 2069 6e74 6567 6572 2076 616c 7565  t: integer value
+00015f50: 206f 6620 7468 6520 7469 6d65 2077 696e   of the time win
+00015f60: 646f 7720 7369 7a65 0d0a 0d0a 2020 2020  dow size....    
+00015f70: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+00015f80: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00015f90: 2020 2020 2020 2020 3e3e 3e20 613d 7274          >>> a=rt
+00015fa0: 2e61 7261 6e67 6528 3130 2c20 6474 7970  .arange(10, dtyp
+00015fb0: 653d 7274 2e69 6e74 3634 290d 0a20 2020  e=rt.int64)..   
+00015fc0: 2020 2020 203e 3e3e 2061 2e74 696d 6577       >>> a.timew
+00015fd0: 696e 646f 775f 7072 6f64 2861 2c35 290d  indow_prod(a,5).
+00015fe0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00015ff0: 6179 285b 2020 2020 302c 2020 2020 2030  ay([    0,     0
+00016000: 2c20 2020 2020 302c 2020 2020 2030 2c20  ,     0,     0, 
+00016010: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
+00016020: 3732 302c 2020 3530 3430 2c20 3230 3136  720,  5040, 2016
+00016030: 302c 2036 3034 3830 5d2c 2064 7479 7065  0, 60480], dtype
+00016040: 3d69 6e74 3634 290d 0a20 2020 2020 2020  =int64)..       
+00016050: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+00016060: 7475 726e 2072 632e 5469 6d65 5769 6e64  turn rc.TimeWind
+00016070: 6f77 2873 656c 662c 2074 696d 655f 6172  ow(self, time_ar
+00016080: 7261 792c 2054 494d 4557 494e 444f 575f  ray, TIMEWINDOW_
+00016090: 4655 4e43 5449 4f4e 532e 5449 4d45 5749  FUNCTIONS.TIMEWI
+000160a0: 4e44 4f57 5f50 524f 442c 2074 696d 655f  NDOW_PROD, time_
+000160b0: 6469 7374 290d 0a0d 0a20 2020 2023 2323  dist)....    ###
+000160c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000160d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000160e0: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+000160f0: 2320 426f 7474 6c65 6e65 636b 2073 6563  # Bottleneck sec
+00016100: 7469 6f6e 2028 6f6e 6c79 2068 616e 646c  tion (only handl
+00016110: 6573 2069 6e74 3332 2f69 6e74 3634 2f66  es int32/int64/f
+00016120: 6c6f 6174 3332 2f66 6c6f 6174 3634 290d  loat32/float64).
+00016130: 0a20 2020 2023 2062 6f74 746c 656e 6563  .    # bottlenec
+00016140: 6b20 6973 206f 7074 696f 6e61 6c0d 0a20  k is optional.. 
+00016150: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00016160: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016170: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016180: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
+00016190: 756d 2873 656c 662c 202a 6172 6773 2c20  um(self, *args, 
+000161a0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+000161b0: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+000161c0: 7665 5f73 756d 2873 656c 662c 202a 6172  ve_sum(self, *ar
+000161d0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+000161e0: 0a20 2020 2064 6566 206d 6f76 655f 6d65  .    def move_me
+000161f0: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
+00016200: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00016210: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+00016220: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
+00016230: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
+00016240: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
+00016250: 7464 2873 656c 662c 202a 6172 6773 2c20  td(self, *args, 
+00016260: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00016270: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+00016280: 7665 5f73 7464 2873 656c 662c 202a 6172  ve_std(self, *ar
+00016290: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+000162a0: 0a20 2020 2064 6566 206d 6f76 655f 7661  .    def move_va
+000162b0: 7228 7365 6c66 2c20 2a61 7267 732c 202a  r(self, *args, *
+000162c0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+000162d0: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
+000162e0: 655f 7661 7228 7365 6c66 2c20 2a61 7267  e_var(self, *arg
+000162f0: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
+00016300: 2020 2020 6465 6620 6d6f 7665 5f6d 696e      def move_min
+00016310: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
+00016320: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+00016330: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
+00016340: 5f6d 696e 2873 656c 662c 202a 6172 6773  _min(self, *args
+00016350: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+00016360: 2020 2064 6566 206d 6f76 655f 6d61 7828     def move_max(
+00016370: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+00016380: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+00016390: 2072 6574 7572 6e20 626e 2e6d 6f76 655f   return bn.move_
+000163a0: 6d61 7828 7365 6c66 2c20 2a61 7267 732c  max(self, *args,
+000163b0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+000163c0: 2020 6465 6620 6d6f 7665 5f61 7267 6d69    def move_argmi
+000163d0: 6e28 7365 6c66 2c20 2a61 7267 732c 202a  n(self, *args, *
+000163e0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+000163f0: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
+00016400: 655f 6172 676d 696e 2873 656c 662c 202a  e_argmin(self, *
+00016410: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
+00016420: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
+00016430: 6172 676d 6178 2873 656c 662c 202a 6172  argmax(self, *ar
+00016440: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
+00016450: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+00016460: 6e2e 6d6f 7665 5f61 7267 6d61 7828 7365  n.move_argmax(se
+00016470: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
+00016480: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+00016490: 6d6f 7665 5f6d 6564 6961 6e28 7365 6c66  move_median(self
+000164a0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+000164b0: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
+000164c0: 7572 6e20 626e 2e6d 6f76 655f 6d65 6469  urn bn.move_medi
+000164d0: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
+000164e0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+000164f0: 2064 6566 206d 6f76 655f 7261 6e6b 2873   def move_rank(s
+00016500: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
+00016510: 6172 6773 293a 0d0a 2020 2020 2020 2020  args):..        
+00016520: 7265 7475 726e 2062 6e2e 6d6f 7665 5f72  return bn.move_r
+00016530: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
+00016540: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00016550: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00016560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+000165a0: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
+000165b0: 2873 656c 662c 206f 6c64 2c20 6e65 7729  (self, old, new)
+000165c0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+000165d0: 6e20 626e 2e72 6570 6c61 6365 2873 656c  n bn.replace(sel
+000165e0: 662c 206f 6c64 2c20 6e65 7729 0d0a 0d0a  f, old, new)....
+000165f0: 2020 2020 6465 6620 7061 7274 6974 696f      def partitio
+00016600: 6e32 2873 656c 662c 202a 6172 6773 2c20  n2(self, *args, 
+00016610: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00016620: 2020 2020 7265 7475 726e 2062 6e2e 7061      return bn.pa
+00016630: 7274 6974 696f 6e28 7365 6c66 2c20 2a61  rtition(self, *a
+00016640: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
+00016650: 0d0a 2020 2020 6465 6620 6172 6770 6172  ..    def argpar
+00016660: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
+00016670: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+00016680: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00016690: 626e 2e61 7267 7061 7274 6974 696f 6e28  bn.argpartition(
+000166a0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+000166b0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+000166c0: 6620 7261 6e6b 6461 7461 2873 656c 662c  f rankdata(self,
+000166d0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+000166e0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+000166f0: 726e 2062 6e2e 7261 6e6b 6461 7461 2873  rn bn.rankdata(s
+00016700: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
+00016710: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+00016720: 206e 616e 7261 6e6b 6461 7461 2873 656c   nanrankdata(sel
+00016730: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00016740: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
+00016750: 7475 726e 2062 6e2e 6e61 6e72 616e 6b64  turn bn.nanrankd
+00016760: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
+00016770: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00016780: 2020 6465 6620 7075 7368 2873 656c 662c    def push(self,
+00016790: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+000167a0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+000167b0: 726e 2062 6e2e 7075 7368 2873 656c 662c  rn bn.push(self,
+000167c0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+000167d0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+000167e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000167f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016820: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00016830: 6973 736f 7274 6564 2873 656c 6629 202d  issorted(self) -
+00016840: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
+00016850: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+00016860: 7475 726e 2054 7275 6520 6966 2074 6865  turn True if the
+00016870: 2061 7272 6179 2069 7320 736f 7274 6564   array is sorted
+00016880: 2c20 4661 6c73 6520 6f74 6865 7277 6973  , False otherwis
+00016890: 652e 0d0a 0d0a 2020 2020 2020 2020 4e61  e.....        Na
+000168a0: 4e73 2061 7420 7468 6520 656e 6420 6f66  Ns at the end of
+000168b0: 2061 6e20 6172 7261 7920 6172 6520 636f   an array are co
+000168c0: 6e73 6964 6572 6564 2073 6f72 7465 642e  nsidered sorted.
+000168d0: 0d0a 0d0a 2020 2020 2020 2020 4361 6c6c  ....        Call
+000168e0: 7320 3a6d 6574 683a 6072 6970 7461 626c  s :meth:`riptabl
+000168f0: 652e 6973 736f 7274 6564 602e 0d0a 0d0a  e.issorted`.....
+00016900: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+00016910: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00016920: 0d0a 2020 2020 2020 2020 626f 6f6c 0d0a  ..        bool..
+00016930: 2020 2020 2020 2020 2020 2020 5472 7565              True
+00016940: 2069 6620 7468 6520 6172 7261 7920 6973   if the array is
+00016950: 2073 6f72 7465 642c 2046 616c 7365 206f   sorted, False o
+00016960: 7468 6572 7769 7365 2e0d 0a0d 0a20 2020  therwise.....   
+00016970: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00016980: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00016990: 0a20 2020 2020 2020 2072 6970 7461 626c  .        riptabl
+000169a0: 652e 6973 736f 7274 6564 0d0a 0d0a 2020  e.issorted....  
+000169b0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+000169c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000169d0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+000169e0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+000169f0: 2761 272c 2027 6227 2c20 2763 275d 290d  'a', 'b', 'c']).
+00016a00: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00016a10: 7373 6f72 7465 6428 290d 0a20 2020 2020  ssorted()..     
+00016a20: 2020 2054 7275 650d 0a0d 0a20 2020 2020     True....     
+00016a30: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+00016a40: 7374 4172 7261 7928 5b31 2e30 2c20 322e  stArray([1.0, 2.
+00016a50: 302c 2033 2e30 2c20 7274 2e6e 616e 5d29  0, 3.0, rt.nan])
+00016a60: 0d0a 2020 2020 2020 2020 3e3e 3e20 7274  ..        >>> rt
+00016a70: 2e69 7373 6f72 7465 6428 6129 0d0a 2020  .issorted(a)..  
+00016a80: 2020 2020 2020 5472 7565 0d0a 0d0a 2020        True....  
+00016a90: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+00016aa0: 2e46 6173 7441 7272 6179 285b 2761 272c  .FastArray(['a',
+00016ab0: 2027 6327 2c20 2762 275d 290d 0a20 2020   'c', 'b'])..   
+00016ac0: 2020 2020 203e 3e3e 2061 2e69 7373 6f72       >>> a.issor
+00016ad0: 7465 6428 290d 0a20 2020 2020 2020 2046  ted()..        F
+00016ae0: 616c 7365 0d0a 2020 2020 2020 2020 2222  alse..        ""
+00016af0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00016b00: 6e20 6973 736f 7274 6564 2873 656c 6629  n issorted(self)
+00016b10: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00016b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016b60: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+00016b70: 756e 6172 795f 6f70 2873 656c 662c 2066  unary_op(self, f
+00016b80: 756e 636e 756d 2c20 6661 6e63 793d 4661  uncnum, fancy=Fa
+00016b90: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
+00016ba0: 793a 0d0a 2020 2020 2020 2020 6966 2073  y:..        if s
+00016bb0: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
+00016bc0: 6f72 7465 6428 7365 6c66 293a 0d0a 2020  orted(self):..  
+00016bd0: 2020 2020 2020 2020 2020 2320 6d61 6b65            # make
+00016be0: 2069 7420 636f 6e74 6967 756f 7573 0d0a   it contiguous..
+00016bf0: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
+00016c00: 3d20 7365 6c66 2e63 6f70 7928 290d 0a20  = self.copy().. 
+00016c10: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00016c20: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
+00016c30: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
+00016c40: 6675 6e63 203d 2054 7970 6552 6567 6973  func = TypeRegis
+00016c50: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+00016c60: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
+00016c70: 5055 540d 0a20 2020 2020 2020 2072 6573  PUT..        res
+00016c80: 756c 7420 3d20 6675 6e63 2861 7272 2c20  ult = func(arr, 
+00016c90: 6675 6e63 6e75 6d2c 2030 290d 0a0d 0a20  funcnum, 0).... 
+00016ca0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00016cb0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00016cc0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00016cd0: 6545 7272 6f72 2866 2243 6f75 6c64 206e  eError(f"Could n
+00016ce0: 6f74 2070 6572 666f 726d 206f 7065 7261  ot perform opera
+00016cf0: 7469 6f6e 207b 6675 6e63 6e75 6d7d 206f  tion {funcnum} o
+00016d00: 6e20 4661 7374 4172 7261 7920 6f66 2064  n FastArray of d
+00016d10: 7479 7065 207b 6172 722e 6474 7970 657d  type {arr.dtype}
+00016d20: 2229 0d0a 2020 2020 2020 2020 6966 2066  ")..        if f
+00016d30: 616e 6379 3a0d 0a20 2020 2020 2020 2020  ancy:..         
+00016d40: 2020 2072 6573 756c 7420 3d20 626f 6f6c     result = bool
+00016d50: 5f74 6f5f 6661 6e63 7928 7265 7375 6c74  _to_fancy(result
+00016d60: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00016d70: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
+00016d80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016d90: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016da0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+00016db0: 2020 2023 2042 6f6f 6c65 616e 2073 6563     # Boolean sec
+00016dc0: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
+00016dd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016de0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016df0: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
+00016e00: 2069 736e 6f72 6d61 6c28 7365 6c66 2c20   isnormal(self, 
+00016e10: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00016e20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00016e30: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00016e40: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
+00016e50: 524d 414c 2c20 6661 6e63 793d 6661 6e63  RMAL, fancy=fanc
+00016e60: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
+00016e70: 6e6f 746e 6f72 6d61 6c28 7365 6c66 2c20  notnormal(self, 
+00016e80: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00016e90: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00016ea0: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00016eb0: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
+00016ec0: 544e 4f52 4d41 4c2c 2066 616e 6379 3d66  TNORMAL, fancy=f
+00016ed0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
+00016ee0: 2069 736e 616e 2873 656c 662c 2066 616e   isnan(self, fan
+00016ef0: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
+00016f00: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00016f10: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00016f20: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00016f30: 7275 6520 666f 7220 6561 6368 2065 6c65  rue for each ele
+00016f40: 6d65 6e74 2074 6861 7427 7320 6120 4e61  ment that's a Na
+00016f50: 4e20 284e 6f74 2061 204e 756d 6265 7229  N (Not a Number)
+00016f60: 2c0d 0a20 2020 2020 2020 2046 616c 7365  ,..        False
+00016f70: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
+00016f80: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00016f90: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00016fa0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+00016fb0: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
+00016fc0: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00016fd0: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
+00016fe0: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
+00016ff0: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
+00017000: 7320 6f66 2074 6865 2054 7275 6520 284e  s of the True (N
+00017010: 614e 2920 7661 6c75 6573 2e0d 0a0d 0a20  aN) values..... 
+00017020: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00017030: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00017040: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00017050: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00017060: 2020 4120 6046 6173 7441 7272 6179 6020    A `FastArray` 
+00017070: 6f66 2062 6f6f 6c65 616e 7320 6f72 2069  of booleans or i
+00017080: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
+00017090: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+000170a0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+000170b0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+000170c0: 2e69 736e 6f74 6e61 6e2c 2046 6173 7441  .isnotnan, FastA
+000170d0: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
+000170e0: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
+000170f0: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
+00017100: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
+00017110: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
+00017120: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
+00017130: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
+00017140: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
+00017150: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
+00017160: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
+00017170: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
+00017180: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
+00017190: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
+000171a0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
+000171b0: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
+000171c0: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
+000171d0: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
+000171e0: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
+000171f0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00017200: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00017210: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00017220: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00017230: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
+00017240: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
+00017250: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
+00017260: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+00017270: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
+00017280: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+00017290: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+000172a0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+000172b0: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
+000172c0: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
+000172d0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+000172e0: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+000172f0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00017300: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00017310: 6179 285b 7274 2e6e 616e 2c20 7274 2e6e  ay([rt.nan, rt.n
+00017320: 616e 2c20 6e70 2e69 6e66 2c20 335d 290d  an, np.inf, 3]).
+00017330: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00017340: 736e 616e 2829 0d0a 2020 2020 2020 2020  snan()..        
+00017350: 4661 7374 4172 7261 7928 5b20 5472 7565  FastArray([ True
+00017360: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
+00017370: 4661 6c73 655d 290d 0a0d 0a20 2020 2020  False])....     
+00017380: 2020 2057 6974 6820 6060 6661 6e63 7920     With ``fancy 
+00017390: 3d20 5472 7565 6060 3a0d 0a0d 0a20 2020  = True``:....   
+000173a0: 2020 2020 203e 3e3e 2061 2e69 736e 616e       >>> a.isnan
+000173b0: 2866 616e 6379 203d 2054 7275 6529 0d0a  (fancy = True)..
+000173c0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+000173d0: 7928 5b30 2c20 315d 290d 0a20 2020 2020  y([0, 1])..     
+000173e0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000173f0: 7265 7475 726e 2073 656c 662e 5f75 6e61  return self._una
+00017400: 7279 5f6f 7028 4d41 5448 5f4f 5045 5241  ry_op(MATH_OPERA
+00017410: 5449 4f4e 2e49 534e 414e 2c20 6661 6e63  TION.ISNAN, fanc
+00017420: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
+00017430: 6465 6620 6973 6e6f 746e 616e 2873 656c  def isnotnan(sel
+00017440: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
+00017450: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00017460: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00017470: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00017480: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00017490: 6368 2065 6c65 6d65 6e74 2074 6861 7427  ch element that'
+000174a0: 7320 6e6f 7420 6120 4e61 4e20 284e 6f74  s not a NaN (Not
+000174b0: 2061 0d0a 2020 2020 2020 2020 4e75 6d62   a..        Numb
+000174c0: 6572 292c 2046 616c 7365 206f 7468 6572  er), False other
+000174d0: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
+000174e0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+000174f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00017500: 0a20 2020 2020 2020 2066 616e 6379 203a  .        fancy :
+00017510: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+00017520: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+00017530: 2020 5365 7420 746f 2054 7275 6520 746f    Set to True to
+00017540: 2069 6e73 7465 6164 2072 6574 7572 6e20   instead return 
+00017550: 7468 6520 696e 6469 6365 7320 6f66 2074  the indices of t
+00017560: 6865 2054 7275 6520 286e 6f6e 2d4e 614e  he True (non-NaN
+00017570: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
+00017580: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00017590: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+000175a0: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
+000175b0: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
+000175c0: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
+000175d0: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
+000175e0: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
+000175f0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00017600: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00017610: 2020 2020 2046 6173 7441 7272 6179 2e69       FastArray.i
+00017620: 736e 616e 2c20 4661 7374 4172 7261 792e  snan, FastArray.
+00017630: 6e6f 746e 612c 2046 6173 7441 7272 6179  notna, FastArray
+00017640: 2e69 736e 616e 6f72 7a65 726f 2c20 7269  .isnanorzero, ri
+00017650: 7074 6162 6c65 2e69 736e 616e 2c0d 0a20  ptable.isnan,.. 
+00017660: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
+00017670: 6973 6e6f 746e 616e 2c20 7269 7074 6162  isnotnan, riptab
+00017680: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
+00017690: 4361 7465 676f 7269 6361 6c2e 6973 6e61  Categorical.isna
+000176a0: 6e2c 0d0a 2020 2020 2020 2020 4361 7465  n,..        Cate
+000176b0: 676f 7269 6361 6c2e 6973 6e6f 746e 616e  gorical.isnotnan
+000176c0: 2c20 4361 7465 676f 7269 6361 6c2e 6e6f  , Categorical.no
+000176d0: 746e 612c 2044 6174 652e 6973 6e61 6e2c  tna, Date.isnan,
+000176e0: 2044 6174 652e 6973 6e6f 746e 616e 2c0d   Date.isnotnan,.
+000176f0: 0a20 2020 2020 2020 2044 6174 6554 696d  .        DateTim
+00017700: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
+00017710: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
+00017720: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
+00017730: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
+00017740: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
+00017750: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00017760: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00017770: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+00017780: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+00017790: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
+000177a0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
+000177b0: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
+000177c0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+000177d0: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
+000177e0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+000177f0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00017800: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00017810: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
+00017820: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
+00017830: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00017840: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00017850: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00017860: 2072 742e 4661 7374 4172 7261 7928 5b72   rt.FastArray([r
+00017870: 742e 6e61 6e2c 206e 702e 696e 662c 2032  t.nan, np.inf, 2
+00017880: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00017890: 612e 6973 6e6f 746e 616e 2829 0d0a 2020  a.isnotnan()..  
+000178a0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+000178b0: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
+000178c0: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+000178d0: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
+000178e0: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
+000178f0: 2020 2020 3e3e 3e20 612e 6973 6e6f 746e      >>> a.isnotn
+00017900: 616e 2866 616e 6379 203d 2054 7275 6529  an(fancy = True)
+00017910: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00017920: 7261 7928 5b31 2c20 325d 290d 0a20 2020  ray([1, 2])..   
+00017930: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00017940: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+00017950: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+00017960: 5241 5449 4f4e 2e49 534e 4f54 4e41 4e2c  RATION.ISNOTNAN,
+00017970: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
+00017980: 0a20 2020 2064 6566 2069 736e 616e 6f72  .    def isnanor
+00017990: 7a65 726f 2873 656c 662c 2066 616e 6379  zero(self, fancy
+000179a0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
+000179b0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+000179c0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+000179d0: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
+000179e0: 6520 666f 7220 6561 6368 2065 6c65 6d65  e for each eleme
+000179f0: 6e74 2074 6861 7427 7320 6120 4e61 4e20  nt that's a NaN 
+00017a00: 284e 6f74 2061 204e 756d 6265 7229 0d0a  (Not a Number)..
+00017a10: 2020 2020 2020 2020 6f72 207a 6572 6f2c          or zero,
+00017a20: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
+00017a30: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00017a40: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00017a50: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00017a60: 2020 2020 2066 616e 6379 203a 2062 6f6f       fancy : boo
+00017a70: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00017a80: 0d0a 2020 2020 2020 2020 2020 2020 5365  ..            Se
+00017a90: 7420 746f 2054 7275 6520 746f 2069 6e73  t to True to ins
+00017aa0: 7465 6164 2072 6574 7572 6e20 7468 6520  tead return the 
+00017ab0: 696e 6469 6365 7320 6f66 2074 6865 2054  indices of the T
+00017ac0: 7275 6520 284e 614e 206f 7220 7a65 726f  rue (NaN or zero
+00017ad0: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
+00017ae0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00017af0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00017b00: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
+00017b10: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
+00017b20: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
+00017b30: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
+00017b40: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
+00017b50: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00017b60: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00017b70: 2020 2020 2072 6970 7461 626c 652e 6973       riptable.is
+00017b80: 6e61 6e6f 727a 6572 6f2c 2072 6970 7461  nanorzero, ripta
+00017b90: 626c 652e 6973 6e61 6e2c 2072 6970 7461  ble.isnan, ripta
+00017ba0: 626c 652e 6973 6e6f 746e 616e 2c20 4661  ble.isnotnan, Fa
+00017bb0: 7374 4172 7261 792e 6973 6e61 6e2c 0d0a  stArray.isnan,..
+00017bc0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00017bd0: 792e 6973 6e6f 746e 616e 2c20 4361 7465  y.isnotnan, Cate
+00017be0: 676f 7269 6361 6c2e 6973 6e61 6e2c 2043  gorical.isnan, C
+00017bf0: 6174 6567 6f72 6963 616c 2e69 736e 6f74  ategorical.isnot
+00017c00: 6e61 6e2c 2044 6174 652e 6973 6e61 6e2c  nan, Date.isnan,
+00017c10: 0d0a 2020 2020 2020 2020 4461 7465 2e69  ..        Date.i
+00017c20: 736e 6f74 6e61 6e2c 2044 6174 6554 696d  snotnan, DateTim
+00017c30: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
+00017c40: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
+00017c50: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
+00017c60: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
+00017c70: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
+00017c80: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00017c90: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00017ca0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+00017cb0: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+00017cc0: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
+00017cd0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
+00017ce0: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
+00017cf0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+00017d00: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
+00017d10: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00017d20: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00017d30: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00017d40: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
+00017d50: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
+00017d60: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00017d70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00017d80: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00017d90: 2072 742e 4661 7374 4172 7261 7928 5b30   rt.FastArray([0
+00017da0: 2c20 7274 2e6e 616e 2c20 6e70 2e69 6e66  , rt.nan, np.inf
+00017db0: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
+00017dc0: 3e3e 2061 2e69 736e 616e 6f72 7a65 726f  >> a.isnanorzero
+00017dd0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
+00017de0: 4172 7261 7928 5b20 5472 7565 2c20 2054  Array([ True,  T
+00017df0: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
+00017e00: 655d 290d 0a0d 0a20 2020 2020 2020 2057  e])....        W
+00017e10: 6974 6820 6060 6661 6e63 7920 3d20 5472  ith ``fancy = Tr
+00017e20: 7565 6060 3a0d 0a0d 0a20 2020 2020 2020  ue``:....       
+00017e30: 203e 3e3e 2061 2e69 736e 616e 6f72 7a65   >>> a.isnanorze
+00017e40: 726f 2866 616e 6379 203d 2054 7275 6529  ro(fancy = True)
+00017e50: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00017e60: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
+00017e70: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00017e80: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+00017e90: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+00017ea0: 5241 5449 4f4e 2e49 534e 414e 4f52 5a45  RATION.ISNANORZE
+00017eb0: 524f 2c20 6661 6e63 793d 6661 6e63 7929  RO, fancy=fancy)
+00017ec0: 0d0a 0d0a 2020 2020 6465 6620 6973 6669  ....    def isfi
+00017ed0: 6e69 7465 2873 656c 662c 2066 616e 6379  nite(self, fancy
+00017ee0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
+00017ef0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00017f00: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+00017f10: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
+00017f20: 6520 666f 7220 6561 6368 2066 696e 6974  e for each finit
+00017f30: 6520 6046 6173 7441 7272 6179 6020 656c  e `FastArray` el
+00017f40: 656d 656e 742c 2046 616c 7365 0d0a 2020  ement, False..  
+00017f50: 2020 2020 2020 6f74 6865 7277 6973 652e        otherwise.
+00017f60: 0d0a 0d0a 2020 2020 2020 2020 4120 7661  ....        A va
+00017f70: 6c75 6520 6973 2063 6f6e 7369 6465 7265  lue is considere
+00017f80: 6420 746f 2062 6520 6669 6e69 7465 2069  d to be finite i
+00017f90: 6620 6974 2773 206e 6f74 2070 6f73 6974  f it's not posit
+00017fa0: 6976 6520 6f72 206e 6567 6174 6976 6520  ive or negative 
+00017fb0: 696e 6669 6e69 7479 0d0a 2020 2020 2020  infinity..      
+00017fc0: 2020 6f72 2061 204e 614e 2028 4e6f 7420    or a NaN (Not 
+00017fd0: 6120 4e75 6d62 6572 292e 0d0a 0d0a 2020  a Number).....  
+00017fe0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00017ff0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00018000: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
+00018010: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
+00018020: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
+00018030: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
+00018040: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
+00018050: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
+00018060: 206f 6620 7468 6520 5472 7565 2028 6669   of the True (fi
+00018070: 6e69 7465 2920 7661 6c75 6573 2e0d 0a0d  nite) values....
+00018080: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00018090: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+000180a0: 2d0d 0a20 2020 2020 2020 2060 4661 7374  -..        `Fast
+000180b0: 4172 7261 7960 0d0a 2020 2020 2020 2020  Array`..        
+000180c0: 2020 2020 416e 2061 7272 6179 206f 7220      An array or 
+000180d0: 626f 6f6c 6561 6e73 206f 7220 696e 6469  booleans or indi
+000180e0: 6365 732e 0d0a 0d0a 2020 2020 2020 2020  ces.....        
+000180f0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+00018100: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00018110: 2020 2020 4661 7374 4172 7261 792e 6973      FastArray.is
+00018120: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
+00018130: 626c 652e 6973 6669 6e69 7465 2c20 7269  ble.isfinite, ri
+00018140: 7074 6162 6c65 2e69 736e 6f74 6669 6e69  ptable.isnotfini
+00018150: 7465 2c20 7269 7074 6162 6c65 2e69 7369  te, riptable.isi
+00018160: 6e66 2c0d 0a20 2020 2020 2020 2072 6970  nf,..        rip
+00018170: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
+00018180: 4661 7374 4172 7261 792e 6973 696e 662c  FastArray.isinf,
+00018190: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
+000181a0: 696e 660d 0a20 2020 2020 2020 2044 6174  inf..        Dat
+000181b0: 6173 6574 2e6d 6173 6b5f 6f72 5f69 7366  aset.mask_or_isf
+000181c0: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
+000181d0: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
+000181e0: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
+000181f0: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
+00018200: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
+00018210: 6861 7420 6861 7320 6174 206c 6561 7374  hat has at least
+00018220: 0d0a 2020 2020 2020 2020 2020 2020 6f6e  ..            on
+00018230: 6520 6669 6e69 7465 2076 616c 7565 2e0d  e finite value..
+00018240: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
+00018250: 2e6d 6173 6b5f 616e 645f 6973 6669 6e69  .mask_and_isfini
+00018260: 7465 203a 0d0a 2020 2020 2020 2020 2020  te :..          
+00018270: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
+00018280: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
+00018290: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
+000182a0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
+000182b0: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
+000182c0: 2020 2020 2020 2020 2020 2066 696e 6974             finit
+000182d0: 6520 7661 6c75 6573 2e0d 0a20 2020 2020  e values...     
+000182e0: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
+000182f0: 6f72 5f69 7369 6e66 203a 0d0a 2020 2020  or_isinf :..    
+00018300: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+00018310: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+00018320: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+00018330: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+00018340: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
+00018350: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+00018360: 206f 6e65 2076 616c 7565 2074 6861 7427   one value that'
+00018370: 7320 706f 7369 7469 7665 206f 7220 6e65  s positive or ne
+00018380: 6761 7469 7665 2069 6e66 696e 6974 792e  gative infinity.
+00018390: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
+000183a0: 742e 6d61 736b 5f61 6e64 5f69 7369 6e66  t.mask_and_isinf
+000183b0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
+000183c0: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
+000183d0: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
+000183e0: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
+000183f0: 6173 6574 6020 726f 7720 7468 6174 2063  aset` row that c
+00018400: 6f6e 7461 696e 7320 616c 6c0d 0a20 2020  ontains all..   
+00018410: 2020 2020 2020 2020 2069 6e66 696e 6974           infinit
+00018420: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
+00018430: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00018440: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00018450: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00018460: 2072 742e 4661 7374 4172 7261 7928 5b6e   rt.FastArray([n
+00018470: 702e 696e 662c 206e 702e 4e49 4e46 2c20  p.inf, np.NINF, 
+00018480: 7274 2e6e 616e 2c20 305d 290d 0a20 2020  rt.nan, 0])..   
+00018490: 2020 2020 203e 3e3e 2061 2e69 7366 696e       >>> a.isfin
+000184a0: 6974 6528 290d 0a20 2020 2020 2020 2046  ite()..        F
+000184b0: 6173 7441 7272 6179 285b 4661 6c73 652c  astArray([False,
+000184c0: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
+000184d0: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+000184e0: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
+000184f0: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
+00018500: 2020 2020 3e3e 3e20 612e 6973 6669 6e69      >>> a.isfini
+00018510: 7465 2866 616e 6379 203d 2054 7275 6529  te(fancy = True)
+00018520: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00018530: 7261 7928 5b33 5d29 0d0a 2020 2020 2020  ray([3])..      
+00018540: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
+00018550: 6574 7572 6e20 7365 6c66 2e5f 756e 6172  eturn self._unar
+00018560: 795f 6f70 284d 4154 485f 4f50 4552 4154  y_op(MATH_OPERAT
+00018570: 494f 4e2e 4953 4649 4e49 5445 2c20 6661  ION.ISFINITE, fa
+00018580: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
+00018590: 2020 6465 6620 6973 6e6f 7466 696e 6974    def isnotfinit
+000185a0: 6528 7365 6c66 2c20 6661 6e63 793d 4661  e(self, fancy=Fa
+000185b0: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
+000185c0: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+000185d0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+000185e0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+000185f0: 6f72 2065 6163 6820 6e6f 6e2d 6669 6e69  or each non-fini
+00018600: 7465 2060 4661 7374 4172 7261 7960 2065  te `FastArray` e
+00018610: 6c65 6d65 6e74 2c0d 0a20 2020 2020 2020  lement,..       
+00018620: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
+00018630: 2e0d 0a0d 0a20 2020 2020 2020 2041 2076  .....        A v
+00018640: 616c 7565 2069 7320 636f 6e73 6964 6572  alue is consider
+00018650: 6564 2074 6f20 6265 2066 696e 6974 6520  ed to be finite 
+00018660: 6966 2069 7427 7320 6e6f 7420 706f 7369  if it's not posi
+00018670: 7469 7665 206f 7220 6e65 6761 7469 7665  tive or negative
+00018680: 2069 6e66 696e 6974 790d 0a20 2020 2020   infinity..     
+00018690: 2020 206f 7220 6120 4e61 4e20 284e 6f74     or a NaN (Not
+000186a0: 2061 204e 756d 6265 7229 2e0d 0a0d 0a20   a Number)..... 
+000186b0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+000186c0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000186d0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+000186e0: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
+000186f0: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00018700: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
+00018710: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
+00018720: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
+00018730: 7320 6f66 2074 6865 2054 7275 6520 286e  s of the True (n
+00018740: 6f6e 2d66 696e 6974 6529 2076 616c 7565  on-finite) value
+00018750: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
+00018760: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+00018770: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00018780: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
+00018790: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
+000187a0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
+000187b0: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
+000187c0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+000187d0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000187e0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+000187f0: 6179 2e69 7366 696e 6974 652c 2072 6970  ay.isfinite, rip
+00018800: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
+00018810: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
+00018820: 6e69 7465 2c20 7269 7074 6162 6c65 2e69  nite, riptable.i
+00018830: 7369 6e66 2c0d 0a20 2020 2020 2020 2072  sinf,..        r
+00018840: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
+00018850: 2c20 4661 7374 4172 7261 792e 6973 696e  , FastArray.isin
+00018860: 662c 2046 6173 7441 7272 6179 2e69 736e  f, FastArray.isn
+00018870: 6f74 696e 660d 0a20 2020 2020 2020 2044  otinf..        D
+00018880: 6174 6173 6574 2e6d 6173 6b5f 6f72 5f69  ataset.mask_or_i
+00018890: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
+000188a0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+000188b0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+000188c0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+000188d0: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
+000188e0: 2074 6861 7420 6861 7320 6174 206c 6561   that has at lea
+000188f0: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+00018900: 6f6e 6520 6669 6e69 7465 2076 616c 7565  one finite value
+00018910: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+00018920: 6574 2e6d 6173 6b5f 616e 645f 6973 6669  et.mask_and_isfi
+00018930: 6e69 7465 203a 0d0a 2020 2020 2020 2020  nite :..        
+00018940: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+00018950: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+00018960: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+00018970: 6044 6174 6173 6574 6020 726f 7720 7468  `Dataset` row th
+00018980: 6174 2063 6f6e 7461 696e 7320 616c 6c0d  at contains all.
+00018990: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
+000189a0: 6974 6520 7661 6c75 6573 2e0d 0a20 2020  ite values...   
+000189b0: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
+000189c0: 6b5f 6f72 5f69 7369 6e66 203a 0d0a 2020  k_or_isinf :..  
+000189d0: 2020 2020 2020 2020 2020 5265 7475 726e            Return
+000189e0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+000189f0: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
+00018a00: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
+00018a10: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
+00018a20: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
+00018a30: 2020 206f 6e65 2076 616c 7565 2074 6861     one value tha
+00018a40: 7427 7320 706f 7369 7469 7665 206f 7220  t's positive or 
+00018a50: 6e65 6761 7469 7665 2069 6e66 696e 6974  negative infinit
+00018a60: 792e 0d0a 2020 2020 2020 2020 4461 7461  y...        Data
+00018a70: 7365 742e 6d61 736b 5f61 6e64 5f69 7369  set.mask_and_isi
+00018a80: 6e66 203a 0d0a 2020 2020 2020 2020 2020  nf :..          
+00018a90: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
+00018aa0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
+00018ab0: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
+00018ac0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
+00018ad0: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
+00018ae0: 2020 2020 2020 2020 2020 2069 6e66 696e             infin
+00018af0: 6974 6520 7661 6c75 6573 2e0d 0a0d 0a20  ite values..... 
+00018b00: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+00018b10: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00018b20: 2d0d 0a20 2020 2020 2020 203e 3e3e 2061  -..        >>> a
+00018b30: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00018b40: 5b6e 702e 696e 662c 206e 702e 4e49 4e46  [np.inf, np.NINF
+00018b50: 2c20 7274 2e6e 616e 2c20 305d 290d 0a20  , rt.nan, 0]).. 
+00018b60: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
+00018b70: 6f74 6669 6e69 7465 2829 0d0a 2020 2020  otfinite()..    
+00018b80: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
+00018b90: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
+00018ba0: 7565 2c20 4661 6c73 655d 290d 0a0d 0a20  ue, False]).... 
+00018bb0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
+00018bc0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
+00018bd0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00018be0: 736e 6f74 6669 6e69 7465 2866 616e 6379  snotfinite(fancy
+00018bf0: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
+00018c00: 2020 4661 7374 4172 7261 7928 5b30 2c20    FastArray([0, 
+00018c10: 312c 2032 5d29 0d0a 2020 2020 2020 2020  1, 2])..        
+00018c20: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+00018c30: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
+00018c40: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
+00018c50: 4e2e 4953 4e4f 5446 494e 4954 452c 2066  N.ISNOTFINITE, f
+00018c60: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
+00018c70: 2020 2064 6566 2069 7369 6e66 2873 656c     def isinf(sel
+00018c80: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
+00018c90: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00018ca0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00018cb0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00018cc0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00018cd0: 6368 2060 4661 7374 4172 7261 7960 2065  ch `FastArray` e
+00018ce0: 6c65 6d65 6e74 2074 6861 7427 7320 706f  lement that's po
+00018cf0: 7369 7469 7665 0d0a 2020 2020 2020 2020  sitive..        
+00018d00: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
+00018d10: 6e69 7479 2c20 4661 6c73 6520 6f74 6865  nity, False othe
+00018d20: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
+00018d30: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00018d40: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00018d50: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
+00018d60: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00018d70: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00018d80: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
+00018d90: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
+00018da0: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
+00018db0: 7468 6520 5472 7565 2028 696e 6669 6e69  the True (infini
+00018dc0: 7465 2920 7661 6c75 6573 2e0d 0a0d 0a20  te) values..... 
+00018dd0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00018de0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00018df0: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00018e00: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00018e10: 2020 416e 2061 7272 6179 206f 7220 626f    An array or bo
+00018e20: 6f6c 6561 6e73 206f 7220 696e 6469 6365  oleans or indice
+00018e30: 732e 0d0a 0d0a 2020 2020 2020 2020 5365  s.....        Se
+00018e40: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
+00018e50: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00018e60: 2020 4661 7374 4172 7261 792e 6973 6e6f    FastArray.isno
+00018e70: 7469 6e66 2c20 4661 7374 4172 7261 792e  tinf, FastArray.
+00018e80: 6973 6669 6e69 7465 2c20 4661 7374 4172  isfinite, FastAr
+00018e90: 7261 792e 6973 6e6f 7466 696e 6974 652c  ray.isnotfinite,
+00018ea0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
+00018eb0: 6c65 2e69 7369 6e66 2c20 7269 7074 6162  le.isinf, riptab
+00018ec0: 6c65 2e69 736e 6f74 696e 662c 2072 6970  le.isnotinf, rip
+00018ed0: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
+00018ee0: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
+00018ef0: 6e69 7465 0d0a 2020 2020 2020 2020 4461  nite..        Da
+00018f00: 7461 7365 742e 6d61 736b 5f6f 725f 6973  taset.mask_or_is
+00018f10: 6669 6e69 7465 203a 0d0a 2020 2020 2020  finite :..      
+00018f20: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00018f30: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00018f40: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00018f50: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00018f60: 7468 6174 2068 6173 2061 7420 6c65 6173  that has at leas
+00018f70: 740d 0a20 2020 2020 2020 2020 2020 206f  t..            o
+00018f80: 6e65 2066 696e 6974 6520 7661 6c75 652e  ne finite value.
+00018f90: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
+00018fa0: 742e 6d61 736b 5f61 6e64 5f69 7366 696e  t.mask_and_isfin
+00018fb0: 6974 6520 3a0d 0a20 2020 2020 2020 2020  ite :..         
+00018fc0: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+00018fd0: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
+00018fe0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
+00018ff0: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
+00019000: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
+00019010: 2020 2020 2020 2020 2020 2020 6669 6e69              fini
+00019020: 7465 2076 616c 7565 732e 0d0a 2020 2020  te values...    
+00019030: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
+00019040: 5f6f 725f 6973 696e 6620 3a0d 0a20 2020  _or_isinf :..   
+00019050: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
+00019060: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
+00019070: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
+00019080: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
+00019090: 6f77 2074 6861 7420 6861 7320 6174 206c  ow that has at l
+000190a0: 6561 7374 0d0a 2020 2020 2020 2020 2020  east..          
+000190b0: 2020 6f6e 6520 7661 6c75 6520 7468 6174    one value that
+000190c0: 2773 2070 6f73 6974 6976 6520 6f72 206e  's positive or n
+000190d0: 6567 6174 6976 6520 696e 6669 6e69 7479  egative infinity
+000190e0: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+000190f0: 6574 2e6d 6173 6b5f 616e 645f 6973 696e  et.mask_and_isin
+00019100: 6620 3a0d 0a20 2020 2020 2020 2020 2020  f :..           
+00019110: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00019120: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00019130: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+00019140: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+00019150: 636f 6e74 6169 6e73 2061 6c6c 0d0a 2020  contains all..  
+00019160: 2020 2020 2020 2020 2020 696e 6669 6e69            infini
+00019170: 7465 2076 616c 7565 732e 0d0a 0d0a 2020  te values.....  
+00019180: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+00019190: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000191a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+000191b0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+000191c0: 6e70 2e69 6e66 2c20 6e70 2e4e 494e 462c  np.inf, np.NINF,
+000191d0: 2072 742e 6e61 6e2c 2030 5d29 0d0a 2020   rt.nan, 0])..  
+000191e0: 2020 2020 2020 3e3e 3e20 612e 6973 696e        >>> a.isin
+000191f0: 6628 290d 0a20 2020 2020 2020 2046 6173  f()..        Fas
+00019200: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
+00019210: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+00019220: 7365 5d29 0d0a 0d0a 2020 2020 2020 2020  se])....        
+00019230: 5769 7468 2060 6066 616e 6379 203d 2054  With ``fancy = T
+00019240: 7275 6560 603a 0d0a 0d0a 2020 2020 2020  rue``:....      
+00019250: 2020 3e3e 3e20 612e 6973 696e 6628 6661    >>> a.isinf(fa
+00019260: 6e63 7920 3d20 5472 7565 290d 0a20 2020  ncy = True)..   
+00019270: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00019280: 302c 2031 5d29 0d0a 2020 2020 2020 2020  0, 1])..        
+00019290: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+000192a0: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
+000192b0: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
+000192c0: 4e2e 4953 494e 462c 2066 616e 6379 3d66  N.ISINF, fancy=f
+000192d0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
+000192e0: 2069 736e 6f74 696e 6628 7365 6c66 2c20   isnotinf(self, 
+000192f0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00019300: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00019310: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+00019320: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+00019330: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+00019340: 6046 6173 7441 7272 6179 6020 656c 656d  `FastArray` elem
+00019350: 656e 7420 7468 6174 2773 206e 6f74 2070  ent that's not p
+00019360: 6f73 6974 6976 650d 0a20 2020 2020 2020  ositive..       
+00019370: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
+00019380: 696e 6974 792c 2046 616c 7365 206f 7468  inity, False oth
+00019390: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
+000193a0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+000193b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+000193c0: 2d0d 0a20 2020 2020 2020 2066 616e 6379  -..        fancy
+000193d0: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
+000193e0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+000193f0: 2020 2020 5365 7420 746f 2054 7275 6520      Set to True 
+00019400: 746f 2069 6e73 7465 6164 2072 6574 7572  to instead retur
+00019410: 6e20 7468 6520 696e 6469 6365 7320 6f66  n the indices of
+00019420: 2074 6865 2054 7275 6520 286e 6f6e 2d69   the True (non-i
+00019430: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
+00019440: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00019450: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00019460: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
+00019470: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
+00019480: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
+00019490: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
+000194a0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
+000194b0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+000194c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+000194d0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+000194e0: 2e69 7369 6e66 2c20 7269 7074 6162 6c65  .isinf, riptable
+000194f0: 2e69 736e 6f74 696e 662c 2072 6970 7461  .isnotinf, ripta
+00019500: 626c 652e 6973 696e 662c 2072 6970 7461  ble.isinf, ripta
+00019510: 626c 652e 6973 6669 6e69 7465 2c0d 0a20  ble.isfinite,.. 
+00019520: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
+00019530: 6973 6e6f 7466 696e 6974 652c 2046 6173  isnotfinite, Fas
+00019540: 7441 7272 6179 2e69 7366 696e 6974 652c  tArray.isfinite,
+00019550: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
+00019560: 6669 6e69 7465 0d0a 2020 2020 2020 2020  finite..        
+00019570: 4461 7461 7365 742e 6d61 736b 5f6f 725f  Dataset.mask_or_
+00019580: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
+00019590: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+000195a0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+000195b0: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+000195c0: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+000195d0: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
+000195e0: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+000195f0: 206f 6e65 2066 696e 6974 6520 7661 6c75   one finite valu
+00019600: 652e 0d0a 2020 2020 2020 2020 4461 7461  e...        Data
+00019610: 7365 742e 6d61 736b 5f61 6e64 5f69 7366  set.mask_and_isf
+00019620: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
+00019630: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
+00019640: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
+00019650: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
+00019660: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
+00019670: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
+00019680: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00019690: 6e69 7465 2076 616c 7565 732e 0d0a 2020  nite values...  
+000196a0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+000196b0: 736b 5f6f 725f 6973 696e 6620 3a0d 0a20  sk_or_isinf :.. 
+000196c0: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
+000196d0: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
+000196e0: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
+000196f0: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
+00019700: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
+00019710: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
+00019720: 2020 2020 6f6e 6520 7661 6c75 6520 7468      one value th
+00019730: 6174 2773 2070 6f73 6974 6976 6520 6f72  at's positive or
+00019740: 206e 6567 6174 6976 6520 696e 6669 6e69   negative infini
+00019750: 7479 2e0d 0a20 2020 2020 2020 2044 6174  ty...        Dat
+00019760: 6173 6574 2e6d 6173 6b5f 616e 645f 6973  aset.mask_and_is
+00019770: 696e 6620 3a0d 0a20 2020 2020 2020 2020  inf :..         
+00019780: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+00019790: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
+000197a0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
+000197b0: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
+000197c0: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
+000197d0: 2020 2020 2020 2020 2020 2020 696e 6669              infi
+000197e0: 6e69 7465 2076 616c 7565 732e 0d0a 0d0a  nite values.....
+000197f0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+00019800: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00019810: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+00019820: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+00019830: 285b 6e70 2e69 6e66 2c20 6e70 2e4e 494e  ([np.inf, np.NIN
+00019840: 462c 2072 742e 6e61 6e2c 2030 5d29 0d0a  F, rt.nan, 0])..
+00019850: 2020 2020 2020 2020 3e3e 3e20 612e 6973          >>> a.is
+00019860: 6e6f 7469 6e66 2829 0d0a 2020 2020 2020  notinf()..      
+00019870: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
+00019880: 7365 2c20 4661 6c73 652c 2020 5472 7565  se, False,  True
+00019890: 2c20 2054 7275 655d 290d 0a0d 0a20 2020  ,  True])....   
+000198a0: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
+000198b0: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
+000198c0: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
+000198d0: 6f74 696e 6628 6661 6e63 7920 3d20 5472  otinf(fancy = Tr
+000198e0: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
+000198f0: 7441 7272 6179 285b 322c 2033 5d29 0d0a  tArray([2, 3])..
+00019900: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00019910: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00019920: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
+00019930: 4f50 4552 4154 494f 4e2e 4953 4e4f 5449  OPERATION.ISNOTI
+00019940: 4e46 2c20 6661 6e63 793d 6661 6e63 7929  NF, fancy=fancy)
+00019950: 0d0a 0d0a 2020 2020 2323 2323 2323 2323  ....    ########
+00019960: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00019970: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00019980: 2323 2323 230d 0a20 2020 2023 2052 6564  #####..    # Red
+00019990: 7563 6520 7365 6374 696f 6e0d 0a20 2020  uce section..   
+000199a0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+000199b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000199c0: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
+000199d0: 0d0a 2020 2020 6465 6620 5f66 615f 6669  ..    def _fa_fi
+000199e0: 6c74 6572 5f77 7261 7070 6572 2873 656c  lter_wrapper(sel
+000199f0: 662c 206d 7946 756e 632c 2066 696c 7465  f, myFunc, filte
+00019a00: 723d 4e6f 6e65 2c20 6474 7970 653d 4e6f  r=None, dtype=No
+00019a10: 6e65 293a 0d0a 2020 2020 2020 2020 6966  ne):..        if
+00019a20: 2066 696c 7465 7220 6973 2054 7275 653a   filter is True:
+00019a30: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00019a40: 6c74 6572 203d 206f 6e65 7328 6c65 6e28  lter = ones(len(
+00019a50: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
+00019a60: 6c29 0d0a 2020 2020 2020 2020 6966 2066  l)..        if f
+00019a70: 696c 7465 7220 6973 2046 616c 7365 3a0d  ilter is False:.
+00019a80: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+00019a90: 7465 7220 3d20 7a65 726f 7328 6c65 6e28  ter = zeros(len(
+00019aa0: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
+00019ab0: 6c29 0d0a 2020 2020 2020 2020 6966 206c  l)..        if l
+00019ac0: 656e 2866 696c 7465 7229 2021 3d20 6c65  en(filter) != le
+00019ad0: 6e28 7365 6c66 293a 0d0a 2020 2020 2020  n(self):..      
+00019ae0: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00019af0: 6545 7272 6f72 2822 4669 6c74 6572 2061  eError("Filter a
+00019b00: 6e64 2069 6e70 7574 206e 6f74 2074 6865  nd input not the
+00019b10: 2073 616d 6520 6c65 6e67 7468 2e22 290d   same length.").
+00019b20: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+00019b30: 7420 7365 6c66 2e69 7363 6f6d 7075 7461  t self.iscomputa
+00019b40: 626c 6528 293a 0d0a 2020 2020 2020 2020  ble():..        
+00019b50: 2020 2020 7265 7475 726e 206e 702e 4e61      return np.Na
+00019b60: 4e0d 0a0d 0a20 2020 2020 2020 2069 6620  N....        if 
+00019b70: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
+00019b80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00019b90: 7265 7475 726e 2064 7479 7065 286d 7946  return dtype(myF
+00019ba0: 756e 6328 7365 6c66 2c20 6669 6c74 6572  unc(self, filter
+00019bb0: 2929 0d0a 0d0a 2020 2020 2020 2020 7265  ))....        re
+00019bc0: 7475 726e 206d 7946 756e 6328 7365 6c66  turn myFunc(self
+00019bd0: 2c20 6669 6c74 6572 290d 0a0d 0a20 2020  , filter)....   
+00019be0: 2064 6566 205f 6661 5f6b 6579 776f 7264   def _fa_keyword
+00019bf0: 5f77 7261 7070 6572 2873 656c 662c 2066  _wrapper(self, f
+00019c00: 696c 7465 723d 4e6f 6e65 2c20 6474 7970  ilter=None, dtyp
+00019c10: 653d 4e6f 6e65 2c20 6178 6973 3d4e 6f6e  e=None, axis=Non
+00019c20: 652c 206b 6565 7064 696d 733d 4e6f 6e65  e, keepdims=None
+00019c30: 2c20 6464 6f66 3d4e 6f6e 652c 202a 2a6b  , ddof=None, **k
+00019c40: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+00019c50: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
+00019c60: 6861 7220 696e 2022 4f53 5522 3a0d 0a20  har in "OSU":.. 
+00019c70: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00019c80: 2054 7970 6545 7272 6f72 2822 4661 7374   TypeError("Fast
+00019c90: 4172 7261 7920 6f70 6572 6174 696f 6e20  Array operation 
+00019ca0: 6170 706c 6965 6420 746f 2073 7472 696e  applied to strin
+00019cb0: 6720 6f72 206f 626a 6563 7420 6172 7261  g or object arra
+00019cc0: 792e 2229 0d0a 0d0a 2020 2020 2020 2020  y.")....        
+00019cd0: 6966 2022 6f75 7422 2069 6e20 6b77 6172  if "out" in kwar
+00019ce0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00019cf0: 2069 6620 6b77 6172 6773 5b22 6f75 7422   if kwargs["out"
+00019d00: 5d20 6973 204e 6f6e 653a 0d0a 2020 2020  ] is None:..    
+00019d10: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+00019d20: 6773 2e70 6f70 2822 6f75 7422 290d 0a0d  gs.pop("out")...
+00019d30: 0a20 2020 2020 2020 2069 6620 616e 7928  .        if any(
+00019d40: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+00019d50: 2020 2020 2020 6c6f 6767 696e 672e 7761        logging.wa
+00019d60: 726e 696e 6728 0d0a 2020 2020 2020 2020  rning(..        
+00019d70: 2020 2020 2020 2020 2255 6e65 7870 6563          "Unexpec
+00019d80: 7465 6420 4661 7374 4172 7261 7920 6f70  ted FastArray op
+00019d90: 6572 6174 696f 6e20 6b65 7977 6f72 6428  eration keyword(
+00019da0: 7329 3a20 2220 2b20 222c 2022 2e6a 6f69  s): " + ", ".joi
+00019db0: 6e28 5b6b 6579 2066 6f72 206b 6579 2c20  n([key for key, 
+00019dc0: 7661 6c75 6520 696e 206b 7761 7267 732e  value in kwargs.
+00019dd0: 6974 656d 7328 295d 290d 0a20 2020 2020  items()])..     
+00019de0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00019df0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
+00019e00: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00019e10: 2020 2020 2020 206b 7761 7267 735b 2264         kwargs["d
+00019e20: 7479 7065 225d 203d 2064 7479 7065 0d0a  type"] = dtype..
+00019e30: 2020 2020 2020 2020 6966 2061 7869 733a          if axis:
+00019e40: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
+00019e50: 6172 6773 5b22 6178 6973 225d 203d 2061  args["axis"] = a
+00019e60: 7869 730d 0a20 2020 2020 2020 2069 6620  xis..        if 
+00019e70: 6b65 6570 6469 6d73 3a0d 0a20 2020 2020  keepdims:..     
+00019e80: 2020 2020 2020 206b 7761 7267 735b 226b         kwargs["k
+00019e90: 6565 7064 696d 7322 5d20 3d20 6b65 6570  eepdims"] = keep
+00019ea0: 6469 6d73 0d0a 2020 2020 2020 2020 6966  dims..        if
+00019eb0: 2064 646f 6620 6973 206e 6f74 204e 6f6e   ddof is not Non
+00019ec0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00019ed0: 6b77 6172 6773 5b22 6464 6f66 225d 203d  kwargs["ddof"] =
+00019ee0: 2064 646f 660d 0a20 2020 2020 2020 2069   ddof..        i
+00019ef0: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
+00019f00: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00019f10: 2020 206b 7761 7267 735b 2266 696c 7465     kwargs["filte
+00019f20: 7222 5d20 3d20 6669 6c74 6572 0d0a 0d0a  r"] = filter....
+00019f30: 2020 2020 2020 2020 6966 2028 6669 6c74          if (filt
+00019f40: 6572 2069 7320 6e6f 7420 4e6f 6e65 2920  er is not None) 
+00019f50: 616e 6420 2828 6178 6973 2069 7320 6e6f  and ((axis is no
+00019f60: 7420 4e6f 6e65 2920 6f72 2028 6b65 6570  t None) or (keep
+00019f70: 6469 6d73 2069 7320 6e6f 7420 4e6f 6e65  dims is not None
+00019f80: 2920 6f72 2028 6464 6f66 2069 7320 6e6f  ) or (ddof is no
+00019f90: 7420 4e6f 6e65 2929 3a0d 0a20 2020 2020  t None)):..     
+00019fa0: 2020 2020 2020 206c 6f67 6769 6e67 2e77         logging.w
+00019fb0: 6172 6e69 6e67 2822 5369 6e63 6520 4669  arning("Since Fi
+00019fc0: 6c74 6572 206b 6579 776f 7264 2069 7320  lter keyword is 
+00019fd0: 7072 6573 656e 742c 2046 6173 7441 7272  present, FastArr
+00019fe0: 6179 206f 7065 7261 7469 6f6e 7320 6967  ay operations ig
+00019ff0: 6e6f 7265 2061 7869 732c 206b 6565 7064  nore axis, keepd
+0001a000: 696d 7320 616e 6420 6464 6f66 2229 0d0a  ims and ddof")..
+0001a010: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001a020: 206b 7761 7267 730d 0a0d 0a20 2020 2064   kwargs....    d
+0001a030: 6566 206e 616e 7375 6d28 7365 6c66 2c20  ef nansum(self, 
+0001a040: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
+0001a050: 7065 3d4e 6f6e 652c 2061 7869 733d 4e6f  pe=None, axis=No
+0001a060: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
+0001a070: 652c 202a 2a6b 7761 7267 7329 202d 3e20  e, **kwargs) -> 
+0001a080: 6e70 2e6e 756d 6265 723a 0d0a 2020 2020  np.number:..    
+0001a090: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0001a0a0: 2043 6f6d 7075 7465 2074 6865 2073 756d   Compute the sum
+0001a0b0: 206f 6620 7468 6520 7661 6c75 6573 2069   of the values i
+0001a0c0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
+0001a0d0: 6d65 6e74 2c20 6967 6e6f 7269 6e67 204e  ment, ignoring N
+0001a0e0: 614e 732e 0d0a 0d0a 2020 2020 2020 2020  aNs.....        
+0001a0f0: 4966 2061 6c6c 2076 616c 7565 7320 696e  If all values in
+0001a100: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
+0001a110: 656e 7420 6172 6520 4e61 4e73 2c20 6060  ent are NaNs, ``
+0001a120: 302e 3060 6020 6973 2072 6574 7572 6e65  0.0`` is returne
+0001a130: 642e 0d0a 0d0a 2020 2020 2020 2020 5061  d.....        Pa
+0001a140: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001a150: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001a160: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001a170: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001a180: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001a190: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001a1a0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001a1b0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001a1c0: 6865 2073 756d 2063 616c 6375 6c61 7469  he sum calculati
+0001a1d0: 6f6e 2e20 4966 2074 6865 2066 696c 7465  on. If the filte
+0001a1e0: 7220 6973 0d0a 2020 2020 2020 2020 2020  r is..          
+0001a1f0: 2020 756e 6966 6f72 6d6c 7920 6060 4661    uniformly ``Fa
+0001a200: 6c73 6560 602c 2060 6e61 6e73 756d 6020  lse``, `nansum` 
+0001a210: 7265 7475 726e 7320 6060 302e 3060 602e  returns ``0.0``.
+0001a220: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
+0001a230: 3a20 7274 2e64 7479 7065 206f 7220 6e75  : rt.dtype or nu
+0001a240: 6d70 792e 6474 7970 652c 2064 6566 6175  mpy.dtype, defau
+0001a250: 6c74 2066 6c6f 6174 3634 0d0a 2020 2020  lt float64..    
+0001a260: 2020 2020 2020 2020 5468 6520 6461 7461          The data
+0001a270: 2074 7970 6520 6f66 2074 6865 2072 6573   type of the res
+0001a280: 756c 742e 2046 6f72 2061 2060 4661 7374  ult. For a `Fast
+0001a290: 4172 7261 7960 2060 6078 6060 2c0d 0a20  Array` ``x``,.. 
+0001a2a0: 2020 2020 2020 2020 2020 2060 6078 2e6e             ``x.n
+0001a2b0: 616e 7375 6d28 6474 7970 6520 3d20 6d79  ansum(dtype = my
+0001a2c0: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
+0001a2d0: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
+0001a2e0: 7970 6528 782e 6e61 6e73 756d 2829 2960  ype(x.nansum())`
+0001a2f0: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
+0001a300: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0001a310: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001a320: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
+0001a330: 2020 2020 5468 6520 7375 6d20 6f66 2074      The sum of t
+0001a340: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
+0001a350: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+0001a360: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001a370: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
+0001a380: 6e61 6e73 756d 0d0a 2020 2020 2020 2020  nansum..        
+0001a390: 4461 7461 7365 742e 6e61 6e73 756d 203a  Dataset.nansum :
+0001a3a0: 2053 756d 7320 7468 6520 7661 6c75 6573   Sums the values
+0001a3b0: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
+0001a3c0: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
+0001a3d0: 2069 676e 6f72 696e 6720 4e61 4e73 2e0d   ignoring NaNs..
+0001a3e0: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
+0001a3f0: 4f70 732e 6e61 6e73 756d 203a 2053 756d  Ops.nansum : Sum
+0001a400: 7320 7468 6520 7661 6c75 6573 206f 6620  s the values of 
+0001a410: 6561 6368 2067 726f 7570 2c20 6967 6e6f  each group, igno
+0001a420: 7269 6e67 204e 614e 732e 2055 7365 6420  ring NaNs. Used 
+0001a430: 6279 0d0a 2020 2020 2020 2020 2020 2020  by..            
+0001a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a450: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
+0001a460: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
+0001a470: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+0001a480: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+0001a490: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
+0001a4a0: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
+0001a4b0: 6179 2e6e 616e 7375 6d60 2073 7065 6369  ay.nansum` speci
+0001a4c0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001a4d0: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
+0001a4e0: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
+0001a4f0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
+0001a500: 6d70 792e 6e61 6e73 756d 602c 2077 6865  mpy.nansum`, whe
+0001a510: 7265 2069 7420 7370 6563 6966 6965 7320  re it specifies 
+0001a520: 7468 6520 6461 7461 2074 7970 6520 7573  the data type us
+0001a530: 6564 0d0a 2020 2020 2020 2020 746f 2063  ed..        to c
+0001a540: 6f6d 7075 7465 2074 6865 2073 756d 2e0d  ompute the sum..
+0001a550: 0a0d 0a20 2020 2020 2020 202a 2a4e 6f74  ...        **Not
+0001a560: 6573 206f 6e20 5573 696e 6720 4e75 6d50  es on Using NumP
+0001a570: 7920 5061 7261 6d65 7465 7273 2a2a 0d0a  y Parameters**..
+0001a580: 0d0a 2020 2020 2020 2020 5573 696e 6720  ..        Using 
+0001a590: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001a5a0: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001a5b0: 7261 6d65 7465 7273 2077 696c 6c20 6361  rameters will ca
+0001a5c0: 7573 6520 5269 7074 6162 6c65 2074 6f20  use Riptable to 
+0001a5d0: 7377 6974 6368 2074 6f0d 0a20 2020 2020  switch to..     
+0001a5e0: 2020 2074 6865 204e 756d 5079 2069 6d70     the NumPy imp
+0001a5f0: 6c65 6d65 6e74 6174 696f 6e20 6f66 2074  lementation of t
+0001a600: 6869 7320 6d65 7468 6f64 2028 606e 756d  his method (`num
+0001a610: 7079 2e6e 616e 7375 6d60 292e 2048 6f77  py.nansum`). How
+0001a620: 6576 6572 2c20 756e 7469 6c20 610d 0a20  ever, until a.. 
+0001a630: 2020 2020 2020 2072 6570 6f72 7465 6420         reported 
+0001a640: 6275 6720 6973 2066 6978 6564 2c20 6966  bug is fixed, if
+0001a650: 2079 6f75 2061 6c73 6f20 696e 636c 7564   you also includ
+0001a660: 6520 7468 6520 6064 7479 7065 6020 7061  e the `dtype` pa
+0001a670: 7261 6d65 7465 7220 6974 2077 696c 6c20  rameter it will 
+0001a680: 6265 0d0a 2020 2020 2020 2020 6170 706c  be..        appl
+0001a690: 6965 6420 746f 2074 6865 2072 6573 756c  ied to the resul
+0001a6a0: 742c 206e 6f74 2075 7365 6420 746f 2063  t, not used to c
+0001a6b0: 6f6d 7075 7465 2074 6865 2073 756d 2061  ompute the sum a
+0001a6c0: 7320 6974 2069 7320 696e 2060 6e75 6d70  s it is in `nump
+0001a6d0: 792e 6e61 6e73 756d 602e 0d0a 0d0a 2020  y.nansum`.....  
+0001a6e0: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
+0001a6f0: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
+0001a700: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001a710: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001a720: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
+0001a730: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
+0001a740: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
+0001a750: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
+0001a760: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
+0001a770: 7375 6d60 2064 6f65 7320 6e6f 7420 6163  sum` does not ac
+0001a780: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
+0001a790: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
+0001a7a0: 6d65 6e74 6174 696f 6e20 6f66 2060 6e61  mentation of `na
+0001a7b0: 6e73 756d 6020 7769 6c6c 2062 6520 7573  nsum` will be us
+0001a7c0: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
+0001a7d0: 6572 2061 7267 756d 656e 7420 616e 640d  er argument and.
+0001a7e0: 0a20 2020 2020 2020 2074 6865 204e 756d  .        the Num
+0001a7f0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
+0001a800: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
+0001a810: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
+0001a820: 207b 696e 742c 2074 7570 6c65 206f 6620   {int, tuple of 
+0001a830: 696e 742c 204e 6f6e 657d 2c20 6f70 7469  int, None}, opti
+0001a840: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001a850: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
+0001a860: 6c6f 6e67 2077 6869 6368 2074 6865 2073  long which the s
+0001a870: 756d 2069 7320 636f 6d70 7574 6564 2e20  um is computed. 
+0001a880: 5468 6520 6465 6661 756c 7420 6973 2074  The default is t
+0001a890: 6f20 636f 6d70 7574 6520 7468 650d 0a20  o compute the.. 
+0001a8a0: 2020 2020 2020 2020 2020 2073 756d 206f             sum o
+0001a8b0: 6620 7468 6520 666c 6174 7465 6e65 6420  f the flattened 
+0001a8c0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
+0001a8d0: 2020 6b65 6570 6469 6d73 203a 2062 6f6f    keepdims : boo
+0001a8e0: 6c2c 206f 7074 696f 6e61 6c0d 0a20 2020  l, optional..   
+0001a8f0: 2020 2020 2020 2020 2049 6620 7468 6973           If this
+0001a900: 2069 7320 7365 7420 746f 2054 7275 652c   is set to True,
+0001a910: 2074 6865 2061 7865 7320 7768 6963 6820   the axes which 
+0001a920: 6172 6520 7265 6475 6365 6420 6172 6520  are reduced are 
+0001a930: 6c65 6674 2069 6e20 7468 6520 7265 7375  left in the resu
+0001a940: 6c74 2061 730d 0a20 2020 2020 2020 2020  lt as..         
+0001a950: 2020 2064 696d 656e 7369 6f6e 7320 7769     dimensions wi
+0001a960: 7468 2073 697a 6520 6f6e 652e 2057 6974  th size one. Wit
+0001a970: 6820 7468 6973 206f 7074 696f 6e2c 2074  h this option, t
+0001a980: 6865 2072 6573 756c 7420 7769 6c6c 2062  he result will b
+0001a990: 726f 6164 6361 7374 0d0a 2020 2020 2020  roadcast..      
+0001a9a0: 2020 2020 2020 636f 7272 6563 746c 7920        correctly 
+0001a9b0: 6167 6169 6e73 7420 7468 6520 6f72 6967  against the orig
+0001a9c0: 696e 616c 2069 6e70 7574 2061 7272 6179  inal input array
+0001a9d0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+0001a9e0: 2049 6620 7468 6520 7661 6c75 6520 6973   If the value is
+0001a9f0: 2061 6e79 7468 696e 6720 6275 7420 7468   anything but th
+0001aa00: 6520 6465 6661 756c 742c 2074 6865 6e20  e default, then 
+0001aa10: 606b 6565 7064 696d 7360 2077 696c 6c20  `keepdims` will 
+0001aa20: 6265 2070 6173 7365 640d 0a20 2020 2020  be passed..     
+0001aa30: 2020 2020 2020 2074 6872 6f75 6768 2074         through t
+0001aa40: 6f20 7468 6520 606d 6561 6e60 206f 7220  o the `mean` or 
+0001aa50: 6073 756d 6020 6d65 7468 6f64 7320 6f66  `sum` methods of
+0001aa60: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+0001aa70: 606e 6461 7272 6179 602e 2049 6620 7468  `ndarray`. If th
+0001aa80: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
+0001aa90: 7562 2d63 6c61 7373 6573 2720 6d65 7468  ub-classes' meth
+0001aaa0: 6f64 7320 646f 206e 6f74 2069 6d70 6c65  ods do not imple
+0001aab0: 6d65 6e74 2060 6b65 6570 6469 6d73 602c  ment `keepdims`,
+0001aac0: 2061 6e79 2065 7863 6570 7469 6f6e 7320   any exceptions 
+0001aad0: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
+0001aae0: 2020 2020 2072 6169 7365 642e 0d0a 0d0a       raised.....
+0001aaf0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001ab00: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001ab10: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001ab20: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001ab30: 285b 312c 2033 2c20 352c 2037 2c20 7274  ([1, 3, 5, 7, rt
+0001ab40: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
+0001ab50: 3e3e 3e20 612e 6e61 6e73 756d 2829 0d0a  >>> a.nansum()..
+0001ab60: 2020 2020 2020 2020 3136 2e30 0d0a 0d0a          16.0....
+0001ab70: 2020 2020 2020 2020 5769 7468 2061 2060          With a `
+0001ab80: 6474 7970 6560 2073 7065 6369 6669 6564  dtype` specified
+0001ab90: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+0001aba0: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
+0001abb0: 7928 5b31 2e30 2c20 332e 302c 2035 2e30  y([1.0, 3.0, 5.0
+0001abc0: 2c20 372e 302c 2072 742e 6e61 6e5d 290d  , 7.0, rt.nan]).
+0001abd0: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
+0001abe0: 616e 7375 6d28 6474 7970 6520 3d20 7274  ansum(dtype = rt
+0001abf0: 2e69 6e74 3332 290d 0a20 2020 2020 2020  .int32)..       
+0001ac00: 2031 360d 0a0d 0a20 2020 2020 2020 2057   16....        W
+0001ac10: 6974 6820 6120 6669 6c74 6572 3a0d 0a0d  ith a filter:...
+0001ac20: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+0001ac30: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
+0001ac40: 2c20 332c 2035 2c20 372c 2072 742e 6e61  , 3, 5, 7, rt.na
+0001ac50: 6e5d 290d 0a20 2020 2020 2020 203e 3e3e  n])..        >>>
+0001ac60: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
+0001ac70: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
+0001ac80: 4661 6c73 652c 2054 7275 652c 2054 7275  False, True, Tru
+0001ac90: 655d 290d 0a20 2020 2020 2020 203e 3e3e  e])..        >>>
+0001aca0: 2061 2e6e 616e 7375 6d28 6669 6c74 6572   a.nansum(filter
+0001acb0: 203d 2062 290d 0a20 2020 2020 2020 2031   = b)..        1
+0001acc0: 302e 300d 0a20 2020 2020 2020 2022 2222  0.0..        """
+0001acd0: 0d0a 0d0a 2020 2020 2020 2020 6b77 6172  ....        kwar
+0001ace0: 6773 203d 2073 656c 662e 5f66 615f 6b65  gs = self._fa_ke
+0001acf0: 7977 6f72 645f 7772 6170 7065 7228 6669  yword_wrapper(fi
+0001ad00: 6c74 6572 3d66 696c 7465 722c 2064 7479  lter=filter, dty
+0001ad10: 7065 3d64 7479 7065 2c20 6178 6973 3d61  pe=dtype, axis=a
+0001ad20: 7869 732c 206b 6565 7064 696d 733d 6b65  xis, keepdims=ke
+0001ad30: 6570 6469 6d73 2c20 6464 6f66 3d4e 6f6e  epdims, ddof=Non
+0001ad40: 652c 202a 2a6b 7761 7267 7329 0d0a 0d0a  e, **kwargs)....
+0001ad50: 2020 2020 2020 2020 6966 2066 696c 7465          if filte
+0001ad60: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+0001ad70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001ad80: 726e 2073 656c 662e 5f66 615f 6669 6c74  rn self._fa_filt
+0001ad90: 6572 5f77 7261 7070 6572 285f 666e 616e  er_wrapper(_fnan
+0001ada0: 7375 6d2c 2066 696c 7465 723d 6669 6c74  sum, filter=filt
+0001adb0: 6572 2c20 6474 7970 653d 6474 7970 6529  er, dtype=dtype)
+0001adc0: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+0001add0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+0001ade0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+0001adf0: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+0001ae00: 4e53 554d 2c20 6e70 2e6e 616e 7375 6d2c  NSUM, np.nansum,
+0001ae10: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001ae20: 2020 6465 6620 6d65 616e 2873 656c 662c    def mean(self,
+0001ae30: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
+0001ae40: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
+0001ae50: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+0001ae60: 6e65 2c20 2a2a 6b77 6172 6773 2920 2d3e  ne, **kwargs) ->
+0001ae70: 206e 702e 6e75 6d62 6572 3a0d 0a20 2020   np.number:..   
+0001ae80: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0001ae90: 2020 436f 6d70 7574 6520 7468 6520 6172    Compute the ar
+0001aea0: 6974 686d 6574 6963 206d 6561 6e20 6f66  ithmetic mean of
+0001aeb0: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
+0001aec0: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
+0001aed0: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+0001aee0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001aef0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001af00: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001af10: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001af20: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001af30: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001af40: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001af50: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001af60: 6865 206d 6561 6e20 6361 6c63 756c 6174  he mean calculat
+0001af70: 696f 6e2e 2049 6620 7468 6520 6669 6c74  ion. If the filt
+0001af80: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+0001af90: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
+0001afa0: 616c 7365 6060 2c20 606d 6561 6e60 2072  alse``, `mean` r
+0001afb0: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
+0001afc0: 7669 7369 6f6e 4572 726f 7260 2e0d 0a20  visionError`... 
+0001afd0: 2020 2020 2020 2064 7479 7065 203a 2072         dtype : r
+0001afe0: 742e 6474 7970 6520 6f72 206e 756d 7079  t.dtype or numpy
+0001aff0: 2e64 7479 7065 2c20 6465 6661 756c 7420  .dtype, default 
+0001b000: 666c 6f61 7436 340d 0a20 2020 2020 2020  float64..       
+0001b010: 2020 2020 2054 6865 2064 6174 6120 7479       The data ty
+0001b020: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
+0001b030: 2e20 466f 7220 6120 6046 6173 7441 7272  . For a `FastArr
+0001b040: 6179 6020 6060 7860 602c 0d0a 2020 2020  ay` ``x``,..    
+0001b050: 2020 2020 2020 2020 6060 782e 6d65 616e          ``x.mean
+0001b060: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001b070: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001b080: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001b090: 2e6d 6561 6e28 2929 6060 2e0d 0a0d 0a20  .mean())``..... 
+0001b0a0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0001b0b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0001b0c0: 0a20 2020 2020 2020 2073 6361 6c61 720d  .        scalar.
+0001b0d0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0001b0e0: 206d 6561 6e20 6f66 2074 6865 2076 616c   mean of the val
+0001b0f0: 7565 732e 0d0a 0d0a 2020 2020 2020 2020  ues.....        
+0001b100: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+0001b110: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001b120: 2020 2020 6e75 6d70 792e 6d65 616e 0d0a      numpy.mean..
+0001b130: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0001b140: 792e 6e61 6e6d 6561 6e20 3a20 436f 6d70  y.nanmean : Comp
+0001b150: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
+0001b160: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
+0001b170: 7565 732c 2069 676e 6f72 696e 6720 4e61  ues, ignoring Na
+0001b180: 4e73 2e0d 0a20 2020 2020 2020 2044 6174  Ns...        Dat
+0001b190: 6173 6574 2e6d 6561 6e20 3a20 436f 6d70  aset.mean : Comp
+0001b1a0: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
+0001b1b0: 206e 756d 6572 6963 616c 2060 4461 7461   numerical `Data
+0001b1c0: 7365 7460 2063 6f6c 756d 6e73 2e0d 0a20  set` columns... 
+0001b1d0: 2020 2020 2020 2047 726f 7570 4279 4f70         GroupByOp
+0001b1e0: 732e 6d65 616e 203a 2043 6f6d 7075 7465  s.mean : Compute
+0001b1f0: 7320 7468 6520 6d65 616e 206f 6620 6561  s the mean of ea
+0001b200: 6368 2067 726f 7570 2e20 5573 6564 2062  ch group. Used b
+0001b210: 7920 6043 6174 6567 6f72 6963 616c 6020  y `Categorical` 
+0001b220: 6f62 6a65 6374 732e 0d0a 0d0a 2020 2020  objects.....    
+0001b230: 2020 2020 4e6f 7465 730d 0a20 2020 2020      Notes..     
+0001b240: 2020 202d 2d2d 2d2d 0d0a 2020 2020 2020     -----..      
+0001b250: 2020 5468 6520 6064 7479 7065 6020 6b65    The `dtype` ke
+0001b260: 7977 6f72 6420 666f 7220 6046 6173 7441  yword for `FastA
+0001b270: 7272 6179 2e6d 6561 6e60 2073 7065 6369  rray.mean` speci
+0001b280: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001b290: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
+0001b2a0: 2e0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+0001b2b0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
+0001b2c0: 6d70 792e 6d65 616e 602c 2077 6865 7265  mpy.mean`, where
+0001b2d0: 2069 7420 7370 6563 6966 6965 7320 7468   it specifies th
+0001b2e0: 6520 6461 7461 2074 7970 6520 7573 6564  e data type used
+0001b2f0: 2074 6f20 636f 6d70 7574 650d 0a20 2020   to compute..   
+0001b300: 2020 2020 2074 6865 206d 6561 6e2e 0d0a       the mean...
+0001b310: 0d0a 2020 2020 2020 2020 2a2a 4e6f 7465  ..        **Note
+0001b320: 7320 6f6e 2055 7369 6e67 204e 756d 5079  s on Using NumPy
+0001b330: 2050 6172 616d 6574 6572 732a 2a0d 0a0d   Parameters**...
+0001b340: 0a20 2020 2020 2020 2055 7369 6e67 2065  .        Using e
+0001b350: 6974 6865 7220 6f66 2074 6865 2066 6f6c  ither of the fol
+0001b360: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
+0001b370: 616d 6574 6572 7320 7769 6c6c 2063 6175  ameters will cau
+0001b380: 7365 2052 6970 7461 626c 6520 746f 2073  se Riptable to s
+0001b390: 7769 7463 6820 746f 0d0a 2020 2020 2020  witch to..      
+0001b3a0: 2020 7468 6520 4e75 6d50 7920 696d 706c    the NumPy impl
+0001b3b0: 656d 656e 7461 7469 6f6e 206f 6620 7468  ementation of th
+0001b3c0: 6973 206d 6574 686f 6420 2860 6e75 6d70  is method (`nump
+0001b3d0: 792e 6d65 616e 6029 2e20 486f 7765 7665  y.mean`). Howeve
+0001b3e0: 722c 2075 6e74 696c 2061 0d0a 2020 2020  r, until a..    
+0001b3f0: 2020 2020 7265 706f 7274 6564 2062 7567      reported bug
+0001b400: 2069 7320 6669 7865 642c 2069 6620 796f   is fixed, if yo
+0001b410: 7520 616c 736f 2069 6e63 6c75 6465 2074  u also include t
+0001b420: 6865 2060 6474 7970 6560 2070 6172 616d  he `dtype` param
+0001b430: 6574 6572 2069 7420 7769 6c6c 2062 650d  eter it will be.
+0001b440: 0a20 2020 2020 2020 2061 7070 6c69 6564  .        applied
+0001b450: 2074 6f20 7468 6520 7265 7375 6c74 2c20   to the result, 
+0001b460: 6e6f 7420 7573 6564 2074 6f20 636f 6d70  not used to comp
+0001b470: 7574 6520 7468 6520 6d65 616e 2061 7320  ute the mean as 
+0001b480: 6974 2069 7320 696e 2060 6e75 6d70 792e  it is in `numpy.
+0001b490: 6d65 616e 602e 0d0a 0d0a 2020 2020 2020  mean`.....      
+0001b4a0: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
+0001b4b0: 2069 6620 796f 7520 7573 6520 6569 7468   if you use eith
+0001b4c0: 6572 206f 6620 7468 6520 666f 6c6c 6f77  er of the follow
+0001b4d0: 696e 6720 4e75 6d50 7920 7061 7261 6d65  ing NumPy parame
+0001b4e0: 7465 7273 2061 6e64 2061 6c73 6f0d 0a20  ters and also.. 
+0001b4f0: 2020 2020 2020 2069 6e63 6c75 6465 2061         include a
+0001b500: 2060 6669 6c74 6572 6020 6b65 7977 6f72   `filter` keywor
+0001b510: 6420 6172 6775 6d65 6e74 2028 7768 6963  d argument (whic
+0001b520: 6820 606e 756d 7079 2e6d 6561 6e60 2064  h `numpy.mean` d
+0001b530: 6f65 7320 6e6f 7420 6163 6365 7074 292c  oes not accept),
+0001b540: 0d0a 2020 2020 2020 2020 5269 7074 6162  ..        Riptab
+0001b550: 6c65 2773 2069 6d70 6c65 6d65 6e74 6174  le's implementat
+0001b560: 696f 6e20 6f66 2060 6d65 616e 6020 7769  ion of `mean` wi
+0001b570: 6c6c 2062 6520 7573 6564 2077 6974 6820  ll be used with 
+0001b580: 7468 6520 6669 6c74 6572 2061 7267 756d  the filter argum
+0001b590: 656e 7420 616e 640d 0a20 2020 2020 2020  ent and..       
+0001b5a0: 2074 6865 204e 756d 5079 2070 6172 616d   the NumPy param
+0001b5b0: 6574 6572 7320 7769 6c6c 2062 6520 6967  eters will be ig
+0001b5c0: 6e6f 7265 642e 0d0a 0d0a 2020 2020 2020  nored.....      
+0001b5d0: 2020 6178 6973 203a 204e 6f6e 6520 6f72    axis : None or
+0001b5e0: 2069 6e74 206f 7220 7475 706c 6520 6f66   int or tuple of
+0001b5f0: 2069 6e74 732c 206f 7074 696f 6e61 6c0d   ints, optional.
+0001b600: 0a20 2020 2020 2020 2020 2020 2041 7869  .            Axi
+0001b610: 7320 6f72 2061 7865 7320 616c 6f6e 6720  s or axes along 
+0001b620: 7768 6963 6820 7468 6520 6d65 616e 7320  which the means 
+0001b630: 6172 6520 636f 6d70 7574 6564 2e20 5468  are computed. Th
+0001b640: 6520 6465 6661 756c 7420 6973 2074 6f20  e default is to 
+0001b650: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
+0001b660: 2020 2020 2074 6865 206d 6561 6e20 6f66       the mean of
+0001b670: 2074 6865 2066 6c61 7474 656e 6564 2061   the flattened a
+0001b680: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
+0001b690: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
+0001b6a0: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+0001b6b0: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
+0001b6c0: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
+0001b6d0: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
+0001b6e0: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
+0001b6f0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
+0001b700: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
+0001b710: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
+0001b720: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
+0001b730: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
+0001b740: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
+0001b750: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
+0001b760: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
+0001b770: 6761 696e 7374 2074 6865 206f 7269 6769  gainst the origi
+0001b780: 6e61 6c20 696e 7075 7420 6172 7261 792e  nal input array.
+0001b790: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001b7a0: 4966 2074 6865 2064 6566 6175 6c74 2076  If the default v
+0001b7b0: 616c 7565 2069 7320 7061 7373 6564 2c20  alue is passed, 
+0001b7c0: 7468 656e 2060 6b65 6570 6469 6d73 6020  then `keepdims` 
+0001b7d0: 7769 6c6c 206e 6f74 2062 6520 7061 7373  will not be pass
+0001b7e0: 6564 2074 6872 6f75 6768 0d0a 2020 2020  ed through..    
+0001b7f0: 2020 2020 2020 2020 746f 2074 6865 2060          to the `
+0001b800: 6d65 616e 6020 6d65 7468 6f64 206f 6620  mean` method of 
+0001b810: 7375 622d 636c 6173 7365 7320 6f66 2060  sub-classes of `
+0001b820: 6e64 6172 7261 7960 2c20 686f 7765 7665  ndarray`, howeve
+0001b830: 7220 616e 7920 6e6f 6e2d 6465 6661 756c  r any non-defaul
+0001b840: 740d 0a20 2020 2020 2020 2020 2020 2076  t..            v
+0001b850: 616c 7565 2077 696c 6c20 6265 2e20 4966  alue will be. If
+0001b860: 2074 6865 2073 7562 2d63 6c61 7373 2773   the sub-class's
+0001b870: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
+0001b880: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+0001b890: 6469 6d73 602c 2061 6e79 0d0a 2020 2020  dims`, any..    
+0001b8a0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
+0001b8b0: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
+0001b8c0: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
+0001b8d0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0001b8e0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0001b8f0: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0001b900: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
+0001b910: 2037 5d29 0d0a 2020 2020 2020 2020 3e3e   7])..        >>
+0001b920: 3e20 612e 6d65 616e 2829 0d0a 2020 2020  > a.mean()..    
+0001b930: 2020 2020 342e 300d 0a0d 0a20 2020 2020      4.0....     
+0001b940: 2020 2057 6974 6820 6120 6064 7479 7065     With a `dtype
+0001b950: 6020 7370 6563 6966 6965 643a 0d0a 0d0a  ` specified:....
+0001b960: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
+0001b970: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
+0001b980: 2033 2c20 352c 2037 5d29 0d0a 2020 2020   3, 5, 7])..    
+0001b990: 2020 2020 3e3e 3e20 612e 6d65 616e 2864      >>> a.mean(d
+0001b9a0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001b9b0: 0d0a 2020 2020 2020 2020 340d 0a0d 0a20  ..        4.... 
+0001b9c0: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001b9d0: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001b9e0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001b9f0: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
+0001ba00: 375d 290d 0a20 2020 2020 2020 203e 3e3e  7])..        >>>
+0001ba10: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
+0001ba20: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
+0001ba30: 4661 6c73 652c 2054 7275 655d 290d 0a20  False, True]).. 
+0001ba40: 2020 2020 2020 203e 3e3e 2061 2e6d 6561         >>> a.mea
+0001ba50: 6e28 6669 6c74 6572 203d 2062 290d 0a20  n(filter = b).. 
+0001ba60: 2020 2020 2020 2035 2e30 0d0a 2020 2020         5.0..    
+0001ba70: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+0001ba80: 2020 206b 7761 7267 7320 3d20 7365 6c66     kwargs = self
+0001ba90: 2e5f 6661 5f6b 6579 776f 7264 5f77 7261  ._fa_keyword_wra
+0001baa0: 7070 6572 2866 696c 7465 723d 6669 6c74  pper(filter=filt
+0001bab0: 6572 2c20 6474 7970 653d 6474 7970 652c  er, dtype=dtype,
+0001bac0: 2061 7869 733d 6178 6973 2c20 6b65 6570   axis=axis, keep
+0001bad0: 6469 6d73 3d6b 6565 7064 696d 732c 2064  dims=keepdims, d
+0001bae0: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
+0001baf0: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
+0001bb00: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
+0001bb10: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0001bb20: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+0001bb30: 6661 5f66 696c 7465 725f 7772 6170 7065  fa_filter_wrappe
+0001bb40: 7228 5f66 6d65 616e 2c20 6669 6c74 6572  r(_fmean, filter
+0001bb50: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
+0001bb60: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
+0001bb70: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
+0001bb80: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
+0001bb90: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+0001bba0: 4345 5f4d 4541 4e2c 206e 702e 6d65 616e  CE_MEAN, np.mean
+0001bbb0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+0001bbc0: 2020 2064 6566 206e 616e 6d65 616e 2873     def nanmean(s
+0001bbd0: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
+0001bbe0: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
+0001bbf0: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
+0001bc00: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
+0001bc10: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
+0001bc20: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001bc30: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
+0001bc40: 6520 6172 6974 686d 6574 6963 206d 6561  e arithmetic mea
+0001bc50: 6e20 6f66 2074 6865 2076 616c 7565 7320  n of the values 
+0001bc60: 696e 2074 6865 2066 6972 7374 2061 7267  in the first arg
+0001bc70: 756d 656e 742c 2069 676e 6f72 696e 6720  ument, ignoring 
+0001bc80: 4e61 4e73 2e0d 0a0d 0a20 2020 2020 2020  NaNs.....       
+0001bc90: 2049 6620 616c 6c20 7661 6c75 6573 2069   If all values i
+0001bca0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
+0001bcb0: 6d65 6e74 2061 7265 204e 614e 732c 2060  ment are NaNs, `
+0001bcc0: 6030 2e30 6060 2069 7320 7265 7475 726e  `0.0`` is return
+0001bcd0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
+0001bce0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0001bcf0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0001bd00: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
+0001bd10: 6172 7261 7920 6f66 2062 6f6f 6c2c 2064  array of bool, d
+0001bd20: 6566 6175 6c74 204e 6f6e 650d 0a20 2020  efault None..   
+0001bd30: 2020 2020 2020 2020 2053 7065 6369 6669           Specifi
+0001bd40: 6573 2077 6869 6368 2065 6c65 6d65 6e74  es which element
+0001bd50: 7320 746f 2069 6e63 6c75 6465 2069 6e20  s to include in 
+0001bd60: 7468 6520 6d65 616e 2063 616c 6375 6c61  the mean calcula
+0001bd70: 7469 6f6e 2e20 4966 2074 6865 2066 696c  tion. If the fil
+0001bd80: 7465 720d 0a20 2020 2020 2020 2020 2020  ter..           
+0001bd90: 2069 7320 756e 6966 6f72 6d6c 7920 6060   is uniformly ``
+0001bda0: 4661 6c73 6560 602c 2060 6e61 6e6d 6561  False``, `nanmea
+0001bdb0: 6e60 2072 6574 7572 6e73 2061 2060 5a65  n` returns a `Ze
+0001bdc0: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
+0001bdd0: 2e0d 0a20 2020 2020 2020 2064 7479 7065  ...        dtype
+0001bde0: 203a 2072 742e 6474 7970 6520 6f72 206e   : rt.dtype or n
+0001bdf0: 756d 7079 2e64 7479 7065 2c20 6465 6661  umpy.dtype, defa
+0001be00: 756c 7420 666c 6f61 7436 340d 0a20 2020  ult float64..   
+0001be10: 2020 2020 2020 2020 2054 6865 2064 6174           The dat
+0001be20: 6120 7479 7065 206f 6620 7468 6520 7265  a type of the re
+0001be30: 7375 6c74 2e20 466f 7220 6120 6046 6173  sult. For a `Fas
+0001be40: 7441 7272 6179 6020 6060 7860 602c 0d0a  tArray` ``x``,..
+0001be50: 2020 2020 2020 2020 2020 2020 6060 782e              ``x.
+0001be60: 6e61 6e6d 6561 6e28 6474 7970 6520 3d20  nanmean(dtype = 
+0001be70: 6d79 5f74 7970 6529 6060 2069 7320 6571  my_type)`` is eq
+0001be80: 7569 7661 6c65 6e74 2074 6f20 6060 6d79  uivalent to ``my
+0001be90: 5f74 7970 6528 782e 6e61 6e6d 6561 6e28  _type(x.nanmean(
+0001bea0: 2929 6060 2e0d 0a0d 0a20 2020 2020 2020  ))``.....       
+0001beb0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0001bec0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0001bed0: 2020 2073 6361 6c61 720d 0a20 2020 2020     scalar..     
+0001bee0: 2020 2020 2020 2054 6865 206d 6561 6e20         The mean 
+0001bef0: 6f66 2074 6865 2076 616c 7565 732e 0d0a  of the values...
+0001bf00: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0001bf10: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+0001bf20: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e75  ----..        nu
+0001bf30: 6d70 792e 6e61 6e6d 6561 6e0d 0a20 2020  mpy.nanmean..   
+0001bf40: 2020 2020 2046 6173 7441 7272 6179 2e6d       FastArray.m
+0001bf50: 6561 6e20 3a20 436f 6d70 7574 6573 2074  ean : Computes t
+0001bf60: 6865 206d 6561 6e20 6f66 2060 4661 7374  he mean of `Fast
+0001bf70: 4172 7261 7960 2076 616c 7565 732e 0d0a  Array` values...
+0001bf80: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
+0001bf90: 6e61 6e6d 6561 6e20 3a20 436f 6d70 7574  nanmean : Comput
+0001bfa0: 6573 2074 6865 206d 6561 6e20 6f66 206e  es the mean of n
+0001bfb0: 756d 6572 6963 616c 2060 4461 7461 7365  umerical `Datase
+0001bfc0: 7460 2063 6f6c 756d 6e73 2c20 6967 6e6f  t` columns, igno
+0001bfd0: 7269 6e67 0d0a 2020 2020 2020 2020 2020  ring..          
+0001bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bff0: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
+0001c000: 726f 7570 4279 4f70 732e 6e61 6e6d 6561  roupByOps.nanmea
+0001c010: 6e20 3a20 436f 6d70 7574 6573 2074 6865  n : Computes the
+0001c020: 206d 6561 6e20 6f66 2065 6163 6820 6772   mean of each gr
+0001c030: 6f75 702c 2069 676e 6f72 696e 6720 4e61  oup, ignoring Na
+0001c040: 4e73 2e20 5573 6564 2062 790d 0a20 2020  Ns. Used by..   
+0001c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c060: 2020 2020 2020 2020 2020 6043 6174 6567            `Categ
+0001c070: 6f72 6963 616c 6020 6f62 6a65 6374 732e  orical` objects.
+0001c080: 0d0a 0d0a 2020 2020 2020 2020 4e6f 7465  ....        Note
+0001c090: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0001c0a0: 0d0a 2020 2020 2020 2020 5468 6520 6064  ..        The `d
+0001c0b0: 7479 7065 6020 6b65 7977 6f72 6420 666f  type` keyword fo
+0001c0c0: 7220 6046 6173 7441 7272 6179 2e6e 616e  r `FastArray.nan
+0001c0d0: 6d65 616e 6020 7370 6563 6966 6965 7320  mean` specifies 
+0001c0e0: 7468 6520 6461 7461 2074 7970 6520 6f66  the data type of
+0001c0f0: 2074 6865 0d0a 2020 2020 2020 2020 7265   the..        re
+0001c100: 7375 6c74 2e20 5468 6973 2064 6966 6665  sult. This diffe
+0001c110: 7273 2066 726f 6d20 606e 756d 7079 2e6e  rs from `numpy.n
+0001c120: 616e 6d65 616e 602c 2077 6865 7265 2069  anmean`, where i
+0001c130: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
+0001c140: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
+0001c150: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
+0001c160: 7465 2074 6865 206d 6561 6e2e 0d0a 0d0a  te the mean.....
+0001c170: 2020 2020 2020 2020 2a2a 4e6f 7465 7320          **Notes 
+0001c180: 6f6e 2055 7369 6e67 204e 756d 5079 2050  on Using NumPy P
+0001c190: 6172 616d 6574 6572 732a 2a0d 0a0d 0a20  arameters**.... 
+0001c1a0: 2020 2020 2020 2055 7369 6e67 2065 6974         Using eit
+0001c1b0: 6865 7220 6f66 2074 6865 2066 6f6c 6c6f  her of the follo
+0001c1c0: 7769 6e67 204e 756d 5079 2070 6172 616d  wing NumPy param
+0001c1d0: 6574 6572 7320 7769 6c6c 2063 6175 7365  eters will cause
+0001c1e0: 2052 6970 7461 626c 6520 746f 2073 7769   Riptable to swi
+0001c1f0: 7463 6820 746f 0d0a 2020 2020 2020 2020  tch to..        
+0001c200: 7468 6520 4e75 6d50 7920 696d 706c 656d  the NumPy implem
+0001c210: 656e 7461 7469 6f6e 206f 6620 7468 6973  entation of this
+0001c220: 206d 6574 686f 6420 2860 6e75 6d70 792e   method (`numpy.
+0001c230: 6e61 6e6d 6561 6e60 292e 2048 6f77 6576  nanmean`). Howev
+0001c240: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+0001c250: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+0001c260: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+0001c270: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+0001c280: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+0001c290: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+0001c2a0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+0001c2b0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+0001c2c0: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+0001c2d0: 7075 7465 2074 6865 206d 6561 6e20 6173  pute the mean as
+0001c2e0: 2069 7420 6973 2069 6e20 606e 756d 7079   it is in `numpy
+0001c2f0: 2e6e 616e 6d65 616e 602e 0d0a 0d0a 2020  .nanmean`.....  
+0001c300: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
+0001c310: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
+0001c320: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001c330: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001c340: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
+0001c350: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
+0001c360: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
+0001c370: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
+0001c380: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
+0001c390: 6d65 616e 6020 646f 6573 206e 6f74 2061  mean` does not a
+0001c3a0: 6363 6570 7429 2c0d 0a20 2020 2020 2020  ccept),..       
+0001c3b0: 2052 6970 7461 626c 6527 7320 696d 706c   Riptable's impl
+0001c3c0: 656d 656e 7461 7469 6f6e 206f 6620 606e  ementation of `n
+0001c3d0: 616e 6d65 616e 6020 7769 6c6c 2062 6520  anmean` will be 
+0001c3e0: 7573 6564 2077 6974 6820 7468 6520 6669  used with the fi
+0001c3f0: 6c74 6572 2061 7267 756d 656e 740d 0a20  lter argument.. 
+0001c400: 2020 2020 2020 2061 6e64 2074 6865 204e         and the N
+0001c410: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
+0001c420: 7769 6c6c 2062 6520 6967 6e6f 7265 642e  will be ignored.
+0001c430: 0d0a 0d0a 2020 2020 2020 2020 6178 6973  ....        axis
+0001c440: 203a 207b 696e 742c 2074 7570 6c65 206f   : {int, tuple o
+0001c450: 6620 696e 742c 204e 6f6e 657d 2c20 6f70  f int, None}, op
+0001c460: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
+0001c470: 2020 2020 4178 6973 206f 7220 6178 6573      Axis or axes
+0001c480: 2061 6c6f 6e67 2077 6869 6368 2074 6865   along which the
+0001c490: 206d 6561 6e73 2061 7265 2063 6f6d 7075   means are compu
+0001c4a0: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
+0001c4b0: 2069 7320 746f 2063 6f6d 7075 7465 0d0a   is to compute..
+0001c4c0: 2020 2020 2020 2020 2020 2020 7468 6520              the 
+0001c4d0: 6d65 616e 206f 6620 7468 6520 666c 6174  mean of the flat
+0001c4e0: 7465 6e65 6420 6172 7261 792e 0d0a 0d0a  tened array.....
+0001c4f0: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
+0001c500: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
+0001c510: 6c0d 0a20 2020 2020 2020 2020 2020 2049  l..            I
+0001c520: 6620 7468 6973 2069 7320 7365 7420 746f  f this is set to
+0001c530: 2054 7275 652c 2074 6865 2061 7865 7320   True, the axes 
+0001c540: 7768 6963 6820 6172 6520 7265 6475 6365  which are reduce
+0001c550: 6420 6172 6520 6c65 6674 2069 6e20 7468  d are left in th
+0001c560: 6520 7265 7375 6c74 2061 730d 0a20 2020  e result as..   
+0001c570: 2020 2020 2020 2020 2064 696d 656e 7369           dimensi
+0001c580: 6f6e 7320 7769 7468 2073 697a 6520 6f6e  ons with size on
+0001c590: 652e 2057 6974 6820 7468 6973 206f 7074  e. With this opt
+0001c5a0: 696f 6e2c 2074 6865 2072 6573 756c 7420  ion, the result 
+0001c5b0: 7769 6c6c 2062 726f 6164 6361 7374 0d0a  will broadcast..
+0001c5c0: 2020 2020 2020 2020 2020 2020 636f 7272              corr
+0001c5d0: 6563 746c 7920 6167 6169 6e73 7420 7468  ectly against th
+0001c5e0: 6520 6f72 6967 696e 616c 2069 6e70 7574  e original input
+0001c5f0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+0001c600: 2020 2020 2020 2049 6620 7468 6520 7661         If the va
+0001c610: 6c75 6520 6973 2061 6e79 7468 696e 6720  lue is anything 
+0001c620: 6275 7420 7468 6520 6465 6661 756c 742c  but the default,
+0001c630: 2074 6865 6e20 606b 6565 7064 696d 7360   then `keepdims`
+0001c640: 2077 696c 6c20 6265 2070 6173 7365 640d   will be passed.
+0001c650: 0a20 2020 2020 2020 2020 2020 2074 6872  .            thr
+0001c660: 6f75 6768 2074 6f20 7468 6520 606d 6561  ough to the `mea
+0001c670: 6e60 206f 7220 6073 756d 6020 6d65 7468  n` or `sum` meth
+0001c680: 6f64 7320 6f66 2073 7562 2d63 6c61 7373  ods of sub-class
+0001c690: 6573 206f 6620 606e 6461 7272 6179 602e  es of `ndarray`.
+0001c6a0: 2049 6620 7468 650d 0a20 2020 2020 2020   If the..       
+0001c6b0: 2020 2020 2073 7562 2d63 6c61 7373 6573       sub-classes
+0001c6c0: 2720 6d65 7468 6f64 7320 646f 206e 6f74  ' methods do not
+0001c6d0: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+0001c6e0: 6469 6d73 602c 2061 6e79 2065 7863 6570  dims`, any excep
+0001c6f0: 7469 6f6e 7320 7769 6c6c 2062 650d 0a20  tions will be.. 
+0001c700: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001c710: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
+0001c720: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0001c730: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0001c740: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0001c750: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
+0001c760: 2072 742e 6e61 6e5d 290d 0a20 2020 2020   rt.nan])..     
+0001c770: 2020 203e 3e3e 2061 2e6e 616e 6d65 616e     >>> a.nanmean
+0001c780: 2829 0d0a 2020 2020 2020 2020 332e 300d  ()..        3.0.
+0001c790: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
+0001c7a0: 6120 6064 7479 7065 6020 7370 6563 6966  a `dtype` specif
+0001c7b0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
+0001c7c0: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+0001c7d0: 7272 6179 285b 312c 2033 2c20 352c 2072  rray([1, 3, 5, r
+0001c7e0: 742e 6e61 6e5d 290d 0a20 2020 2020 2020  t.nan])..       
+0001c7f0: 203e 3e3e 2061 2e6e 616e 6d65 616e 2864   >>> a.nanmean(d
+0001c800: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001c810: 0d0a 2020 2020 2020 2020 330d 0a0d 0a20  ..        3.... 
+0001c820: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001c830: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001c840: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001c850: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
+0001c860: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001c870: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001c880: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001c890: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
+0001c8a0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0001c8b0: 2e6e 616e 6d65 616e 2866 696c 7465 7220  .nanmean(filter 
+0001c8c0: 3d20 6229 0d0a 2020 2020 2020 2020 342e  = b)..        4.
+0001c8d0: 300d 0a20 2020 2020 2020 2022 2222 0d0a  0..        """..
+0001c8e0: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+0001c8f0: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
+0001c900: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
+0001c910: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
+0001c920: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
+0001c930: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
+0001c940: 6469 6d73 2c20 6464 6f66 3d4e 6f6e 652c  dims, ddof=None,
+0001c950: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001c960: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
+0001c970: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0001c980: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001c990: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
+0001c9a0: 5f77 7261 7070 6572 285f 666e 616e 6d65  _wrapper(_fnanme
+0001c9b0: 616e 2c20 6669 6c74 6572 3d66 696c 7465  an, filter=filte
+0001c9c0: 722c 2064 7479 7065 3d64 7479 7065 290d  r, dtype=dtype).
+0001c9d0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
+0001c9e0: 6e20 7365 6c66 2e5f 7265 6475 6365 5f63  n self._reduce_c
+0001c9f0: 6865 636b 2852 4544 5543 455f 4655 4e43  heck(REDUCE_FUNC
+0001ca00: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
+0001ca10: 4d45 414e 2c20 6e70 2e6e 616e 6d65 616e  MEAN, np.nanmean
+0001ca20: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+0001ca30: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0001ca40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001ca50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001ca60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001ca70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001ca80: 0d0a 2020 2020 2320 7468 6573 6520 6675  ..    # these fu
+0001ca90: 6e63 7469 6f6e 2074 616b 6520 6120 6464  nction take a dd
+0001caa0: 6f66 206b 7761 7267 0d0a 2020 2020 6465  of kwarg..    de
+0001cab0: 6620 7661 7228 7365 6c66 2c20 6669 6c74  f var(self, filt
+0001cac0: 6572 3d4e 6f6e 652c 2064 7479 7065 3d4e  er=None, dtype=N
+0001cad0: 6f6e 652c 2061 7869 733d 4e6f 6e65 2c20  one, axis=None, 
+0001cae0: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2064  keepdims=None, d
+0001caf0: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
+0001cb00: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
+0001cb10: 220d 0a20 2020 2020 2020 2043 6f6d 7075  "..        Compu
+0001cb20: 7465 2074 6865 2076 6172 6961 6e63 6520  te the variance 
+0001cb30: 6f66 2074 6865 2076 616c 7565 7320 696e  of the values in
+0001cb40: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
+0001cb50: 656e 742e 0d0a 0d0a 2020 2020 2020 2020  ent.....        
+0001cb60: 5269 7074 6162 6c65 2075 7365 7320 7468  Riptable uses th
+0001cb70: 6520 636f 6e76 656e 7469 6f6e 2074 6861  e convention tha
+0001cb80: 7420 6060 6464 6f66 203d 2031 6060 2c20  t ``ddof = 1``, 
+0001cb90: 6d65 616e 696e 6720 7468 6520 7661 7269  meaning the vari
+0001cba0: 616e 6365 206f 660d 0a20 2020 2020 2020  ance of..       
+0001cbb0: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
+0001cbc0: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
+0001cbd0: 6279 2060 6076 6172 203d 2031 2f28 6e20  by ``var = 1/(n 
+0001cbe0: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
+0001cbf0: 206d 6561 6e20 292a 2a32 6060 0d0a 2020   mean )**2``..  
+0001cc00: 2020 2020 2020 286e 6f74 6520 7468 6520        (note the 
+0001cc10: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
+0001cc20: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
+0001cc30: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
+0001cc40: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
+0001cc50: 0d0a 2020 2020 2020 2020 6060 6464 6f66  ..        ``ddof
+0001cc60: 203d 2030 6060 2062 7920 6465 6661 756c   = 0`` by defaul
+0001cc70: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+0001cc80: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001cc90: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001cca0: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001ccb0: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001ccc0: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001ccd0: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001cce0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001ccf0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001cd00: 6865 2076 6172 6961 6e63 6520 6361 6c63  he variance calc
+0001cd10: 756c 6174 696f 6e2e 2049 6620 7468 650d  ulation. If the.
+0001cd20: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+0001cd30: 7465 7220 6973 2075 6e69 666f 726d 6c79  ter is uniformly
+0001cd40: 2060 6046 616c 7365 6060 2c20 6076 6172   ``False``, `var
+0001cd50: 6020 7265 7475 726e 7320 6120 605a 6572  ` returns a `Zer
+0001cd60: 6f44 6976 6973 696f 6e45 7272 6f72 602e  oDivisionError`.
+0001cd70: 0d0a 0d0a 2020 2020 2020 2020 6474 7970  ....        dtyp
+0001cd80: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
+0001cd90: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
+0001cda0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
+0001cdb0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
+0001cdc0: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
+0001cdd0: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
+0001cde0: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
+0001cdf0: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
+0001ce00: 2e76 6172 2864 7479 7065 203d 206d 795f  .var(dtype = my_
+0001ce10: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
+0001ce20: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
+0001ce30: 7065 2878 2e76 6172 2829 2960 602e 0d0a  pe(x.var())``...
+0001ce40: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0001ce50: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0001ce60: 2d2d 0d0a 2020 2020 2020 2020 7363 616c  --..        scal
+0001ce70: 6172 0d0a 2020 2020 2020 2020 2020 2020  ar..            
+0001ce80: 5468 6520 7661 7269 616e 6365 206f 6620  The variance of 
+0001ce90: 7468 6520 7661 6c75 6573 2e0d 0a0d 0a20  the values..... 
+0001cea0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+0001ceb0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0001cec0: 2d0d 0a20 2020 2020 2020 206e 756d 7079  -..        numpy
+0001ced0: 2e76 6172 0d0a 2020 2020 2020 2020 4661  .var..        Fa
+0001cee0: 7374 4172 7261 792e 6e61 6e76 6172 203a  stArray.nanvar :
+0001cef0: 2043 6f6d 7075 7465 7320 7468 6520 7661   Computes the va
+0001cf00: 7269 616e 6365 206f 6620 6046 6173 7441  riance of `FastA
+0001cf10: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
+0001cf20: 6e6f 7269 6e67 204e 614e 732e 0d0a 2020  noring NaNs...  
+0001cf30: 2020 2020 2020 4461 7461 7365 742e 7661        Dataset.va
+0001cf40: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
+0001cf50: 2076 6172 6961 6e63 6520 6f66 206e 756d   variance of num
+0001cf60: 6572 6963 616c 2060 4461 7461 7365 7460  erical `Dataset`
+0001cf70: 2063 6f6c 756d 6e73 2e0d 0a20 2020 2020   columns...     
+0001cf80: 2020 2047 726f 7570 4279 4f70 732e 7661     GroupByOps.va
+0001cf90: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
+0001cfa0: 2076 6172 6961 6e63 6520 6f66 2065 6163   variance of eac
+0001cfb0: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
+0001cfc0: 2060 4361 7465 676f 7269 6361 6c60 0d0a   `Categorical`..
+0001cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cfe0: 2020 2020 2020 2020 206f 626a 6563 7473           objects
+0001cff0: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
+0001d000: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0001d010: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
+0001d020: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
+0001d030: 6f72 2060 4661 7374 4172 7261 792e 7661  or `FastArray.va
+0001d040: 7260 2073 7065 6369 6669 6573 2074 6865  r` specifies the
+0001d050: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+0001d060: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
+0001d070: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
+0001d080: 6672 6f6d 2060 6e75 6d70 792e 7661 7260  from `numpy.var`
+0001d090: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
+0001d0a0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001d0b0: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
+0001d0c0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+0001d0d0: 7661 7269 616e 6365 2e0d 0a0d 0a20 2020  variance.....   
+0001d0e0: 2020 2020 202a 2a4e 6f74 6573 206f 6e20       **Notes on 
+0001d0f0: 5573 696e 6720 4e75 6d50 7920 5061 7261  Using NumPy Para
+0001d100: 6d65 7465 7273 2a2a 0d0a 0d0a 2020 2020  meters**....    
+0001d110: 2020 2020 5573 696e 6720 616e 7920 6f66      Using any of
+0001d120: 2074 6865 2066 6f6c 6c6f 7769 6e67 204e   the following N
+0001d130: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
+0001d140: 7769 6c6c 2063 6175 7365 2052 6970 7461  will cause Ripta
+0001d150: 626c 6520 746f 2073 7769 7463 6820 746f  ble to switch to
+0001d160: 0d0a 2020 2020 2020 2020 7468 6520 4e75  ..        the Nu
+0001d170: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
+0001d180: 6f6e 206f 6620 7468 6973 206d 6574 686f  on of this metho
+0001d190: 6420 2860 6e75 6d70 792e 7661 7260 292e  d (`numpy.var`).
+0001d1a0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
+0001d1b0: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
+0001d1c0: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
+0001d1d0: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
+0001d1e0: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
+0001d1f0: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
+0001d200: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
+0001d210: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
+0001d220: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
+0001d230: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
+0001d240: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
+0001d250: 2069 6e20 606e 756d 7079 2e76 6172 602e   in `numpy.var`.
+0001d260: 0d0a 0d0a 2020 2020 2020 2020 416c 736f  ....        Also
+0001d270: 206e 6f74 6520 7468 6174 2069 6620 796f   note that if yo
+0001d280: 7520 7573 6520 616e 7920 6f66 2074 6865  u use any of the
+0001d290: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
+0001d2a0: 2070 6172 616d 6574 6572 7320 616e 6420   parameters and 
+0001d2b0: 616c 736f 0d0a 2020 2020 2020 2020 696e  also..        in
+0001d2c0: 636c 7564 6520 6120 6066 696c 7465 7260  clude a `filter`
+0001d2d0: 206b 6579 776f 7264 2061 7267 756d 656e   keyword argumen
+0001d2e0: 7420 2877 6869 6368 2060 6e75 6d70 792e  t (which `numpy.
+0001d2f0: 7661 7260 2064 6f65 7320 6e6f 7420 6163  var` does not ac
+0001d300: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
+0001d310: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
+0001d320: 6d65 6e74 6174 696f 6e20 6f66 2060 7661  mentation of `va
+0001d330: 7260 2077 696c 6c20 6265 2075 7365 6420  r` will be used 
+0001d340: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
+0001d350: 6172 6775 6d65 6e74 0d0a 2020 2020 2020  argument..      
+0001d360: 2020 616e 6420 7468 6520 4e75 6d50 7920    and the NumPy 
+0001d370: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
+0001d380: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
+0001d390: 2020 2020 2020 2061 7869 7320 3a20 4e6f         axis : No
+0001d3a0: 6e65 206f 7220 696e 7420 6f72 2074 7570  ne or int or tup
+0001d3b0: 6c65 206f 6620 696e 7473 2c20 6f70 7469  le of ints, opti
+0001d3c0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001d3d0: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
+0001d3e0: 6c6f 6e67 2077 6869 6368 2074 6865 2076  long which the v
+0001d3f0: 6172 6961 6e63 6520 6973 2063 6f6d 7075  ariance is compu
+0001d400: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
+0001d410: 2069 7320 746f 0d0a 2020 2020 2020 2020   is to..        
+0001d420: 2020 2020 636f 6d70 7574 6520 7468 6520      compute the 
+0001d430: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
+0001d440: 666c 6174 7465 6e65 6420 6172 7261 792e  flattened array.
+0001d450: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
+0001d460: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
+0001d470: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+0001d480: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
+0001d490: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
+0001d4a0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
+0001d4b0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
+0001d4c0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
+0001d4d0: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
+0001d4e0: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
+0001d4f0: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
+0001d500: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
+0001d510: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
+0001d520: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+0001d530: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
+0001d540: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
+0001d550: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
+0001d560: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
+0001d570: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
+0001d580: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
+0001d590: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
+0001d5a0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
+0001d5b0: 2020 2020 2020 2020 2020 746f 2074 6865            to the
+0001d5c0: 2060 7661 7260 206d 6574 686f 6420 6f66   `var` method of
+0001d5d0: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+0001d5e0: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
+0001d5f0: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
+0001d600: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
+0001d610: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
+0001d620: 6620 7468 6520 7375 622d 636c 6173 7365  f the sub-classe
+0001d630: 7327 206d 6574 686f 6420 646f 6573 206e  s' method does n
+0001d640: 6f74 2069 6d70 6c65 6d65 6e74 2060 6b65  ot implement `ke
+0001d650: 6570 6469 6d73 602c 2061 6e79 0d0a 2020  epdims`, any..  
+0001d660: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001d670: 696f 6e73 2077 696c 6c20 6265 2072 6169  ions will be rai
+0001d680: 7365 642e 0d0a 0d0a 2020 2020 2020 2020  sed.....        
+0001d690: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
+0001d6a0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001d6b0: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
+0001d6c0: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
+0001d6d0: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
+0001d6e0: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
+0001d6f0: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
+0001d700: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
+0001d710: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
+0001d720: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
+0001d730: 7220 6f66 2065 6c65 6d65 6e74 732e 2042  r of elements. B
+0001d740: 7920 6465 6661 756c 740d 0a20 2020 2020  y default..     
+0001d750: 2020 2020 2020 2060 6464 6f66 6020 6973         `ddof` is
+0001d760: 207a 6572 6f20 666f 7220 7468 6520 4e75   zero for the Nu
+0001d770: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
+0001d780: 6f6e 2c20 7665 7273 7573 206f 6e65 2066  on, versus one f
+0001d790: 6f72 2074 6865 2052 6970 7461 626c 650d  or the Riptable.
+0001d7a0: 0a20 2020 2020 2020 2020 2020 2069 6d70  .            imp
+0001d7b0: 6c65 6d65 6e74 6174 696f 6e2e 0d0a 0d0a  lementation.....
+0001d7c0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001d7d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001d7e0: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001d7f0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001d800: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
+0001d810: 2020 2020 203e 3e3e 2061 2e76 6172 2829       >>> a.var()
+0001d820: 0d0a 2020 2020 2020 2020 312e 300d 0a0d  ..        1.0...
+0001d830: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
+0001d840: 6064 7479 7065 6020 7370 6563 6966 6965  `dtype` specifie
+0001d850: 643a 0d0a 0d0a 2020 2020 2020 2020 3e3e  d:....        >>
+0001d860: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+0001d870: 6179 285b 312c 2032 2c20 335d 290d 0a20  ay([1, 2, 3]).. 
+0001d880: 2020 2020 2020 203e 3e3e 2061 2e76 6172         >>> a.var
+0001d890: 2864 7479 7065 203d 2072 742e 696e 7433  (dtype = rt.int3
+0001d8a0: 3229 0d0a 2020 2020 2020 2020 310d 0a0d  2)..        1...
+0001d8b0: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
+0001d8c0: 6669 6c74 6572 3a0d 0a0d 0a20 2020 2020  filter:....     
+0001d8d0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+0001d8e0: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
+0001d8f0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0001d900: 6220 3d20 7274 2e46 6173 7441 7272 6179  b = rt.FastArray
+0001d910: 285b 4661 6c73 652c 2054 7275 652c 2054  ([False, True, T
+0001d920: 7275 655d 290d 0a20 2020 2020 2020 203e  rue])..        >
+0001d930: 3e3e 2061 2e76 6172 2866 696c 7465 7220  >> a.var(filter 
+0001d940: 3d20 6229 0d0a 2020 2020 2020 2020 302e  = b)..        0.
+0001d950: 350d 0a20 2020 2020 2020 2022 2222 0d0a  5..        """..
+0001d960: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+0001d970: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
+0001d980: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
+0001d990: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
+0001d9a0: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
+0001d9b0: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
+0001d9c0: 6469 6d73 2c20 6464 6f66 3d64 646f 662c  dims, ddof=ddof,
+0001d9d0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001d9e0: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
+0001d9f0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0001da00: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001da10: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
+0001da20: 5f77 7261 7070 6572 285f 6676 6172 2c20  _wrapper(_fvar, 
+0001da30: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
+0001da40: 7479 7065 3d64 7479 7065 290d 0a0d 0a20  type=dtype).... 
+0001da50: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001da60: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
+0001da70: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
+0001da80: 532e 5245 4455 4345 5f56 4152 2c20 6e70  S.REDUCE_VAR, np
+0001da90: 2e76 6172 2c20 2a2a 6b77 6172 6773 290d  .var, **kwargs).
+0001daa0: 0a0d 0a20 2020 2064 6566 206e 616e 7661  ...    def nanva
+0001dab0: 7228 7365 6c66 2c20 6669 6c74 6572 3d4e  r(self, filter=N
+0001dac0: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+0001dad0: 2061 7869 733d 4e6f 6e65 2c20 6b65 6570   axis=None, keep
+0001dae0: 6469 6d73 3d4e 6f6e 652c 2064 646f 663d  dims=None, ddof=
+0001daf0: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 2920  None, **kwargs) 
+0001db00: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
+0001db10: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001db20: 2020 2020 436f 6d70 7574 6520 7468 6520      Compute the 
+0001db30: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
+0001db40: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
+0001db50: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
+0001db60: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
+0001db70: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
+0001db80: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+0001db90: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
+0001dba0: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
+0001dbb0: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
+0001dbc0: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
+0001dbd0: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
+0001dbe0: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
+0001dbf0: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
+0001dc00: 6520 7661 7269 616e 6365 206f 660d 0a20  e variance of.. 
+0001dc10: 2020 2020 2020 2060 605b 785f 312c 202e         ``[x_1, .
+0001dc20: 2e2e 2c20 785f 6e5d 6060 2069 7320 6465  .., x_n]`` is de
+0001dc30: 6669 6e65 6420 6279 2060 6076 6172 203d  fined by ``var =
+0001dc40: 2031 2f28 6e20 2d20 3129 202a 2073 756d   1/(n - 1) * sum
+0001dc50: 2878 5f69 202d 206d 6561 6e20 292a 2a32  (x_i - mean )**2
+0001dc60: 6060 2028 6e6f 7465 0d0a 2020 2020 2020  `` (note..      
+0001dc70: 2020 7468 6520 6060 6e20 2d20 3160 6020    the ``n - 1`` 
+0001dc80: 696e 7374 6561 6420 6f66 2060 606e 6060  instead of ``n``
+0001dc90: 292e 2054 6869 7320 6469 6666 6572 7320  ). This differs 
+0001dca0: 6672 6f6d 204e 756d 5079 2c20 7768 6963  from NumPy, whic
+0001dcb0: 6820 7573 6573 2060 6064 646f 6620 3d20  h uses ``ddof = 
+0001dcc0: 3060 6020 6279 0d0a 2020 2020 2020 2020  0`` by..        
+0001dcd0: 6465 6661 756c 742e 0d0a 0d0a 2020 2020  default.....    
+0001dce0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+0001dcf0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001dd00: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
+0001dd10: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
+0001dd20: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
+0001dd30: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
+0001dd40: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
+0001dd50: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
+0001dd60: 6520 696e 2074 6865 2076 6172 6961 6e63  e in the varianc
+0001dd70: 6520 6361 6c63 756c 6174 696f 6e2e 2049  e calculation. I
+0001dd80: 6620 7468 6520 6669 6c74 6572 0d0a 2020  f the filter..  
+0001dd90: 2020 2020 2020 2020 2020 6973 2075 6e69            is uni
+0001dda0: 666f 726d 6c79 2060 6046 616c 7365 6060  formly ``False``
+0001ddb0: 2c20 606e 616e 7661 7260 2072 6574 7572  , `nanvar` retur
+0001ddc0: 6e73 2061 2060 5a65 726f 4469 7669 7369  ns a `ZeroDivisi
+0001ddd0: 6f6e 4572 726f 7260 2e0d 0a0d 0a20 2020  onError`.....   
+0001dde0: 2020 2020 2064 7479 7065 203a 2072 742e       dtype : rt.
+0001ddf0: 6474 7970 6520 6f72 206e 756d 7079 2e64  dtype or numpy.d
+0001de00: 7479 7065 2c20 6465 6661 756c 7420 666c  type, default fl
+0001de10: 6f61 7436 340d 0a20 2020 2020 2020 2020  oat64..         
+0001de20: 2020 2054 6865 2064 6174 6120 7479 7065     The data type
+0001de30: 206f 6620 7468 6520 7265 7375 6c74 2e20   of the result. 
+0001de40: 466f 7220 6120 6046 6173 7441 7272 6179  For a `FastArray
+0001de50: 6020 6060 7860 602c 0d0a 2020 2020 2020  ` ``x``,..      
+0001de60: 2020 2020 2020 6060 782e 6e61 6e76 6172        ``x.nanvar
+0001de70: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001de80: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001de90: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001dea0: 2e6e 616e 7661 7228 2929 6060 2e0d 0a0d  .nanvar())``....
+0001deb0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0001dec0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001ded0: 2d0d 0a20 2020 2020 2020 2073 6361 6c61  -..        scala
+0001dee0: 720d 0a20 2020 2020 2020 2020 2020 2054  r..            T
+0001def0: 6865 2076 6172 6961 6e63 6520 6f66 2074  he variance of t
+0001df00: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
+0001df10: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+0001df20: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001df30: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
+0001df40: 6e61 6e76 6172 0d0a 2020 2020 2020 2020  nanvar..        
+0001df50: 4661 7374 4172 7261 792e 7661 7220 3a20  FastArray.var : 
+0001df60: 436f 6d70 7574 6573 2074 6865 2076 6172  Computes the var
+0001df70: 6961 6e63 6520 6f66 2060 4661 7374 4172  iance of `FastAr
+0001df80: 7261 7960 2076 616c 7565 732e 0d0a 2020  ray` values...  
+0001df90: 2020 2020 2020 4461 7461 7365 742e 6e61        Dataset.na
+0001dfa0: 6e76 6172 203a 2043 6f6d 7075 7465 7320  nvar : Computes 
+0001dfb0: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
+0001dfc0: 6e75 6d65 7269 6361 6c20 6044 6174 6173  numerical `Datas
+0001dfd0: 6574 6020 636f 6c75 6d6e 732c 0d0a 2020  et` columns,..  
+0001dfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dff0: 2020 2020 2020 2069 676e 6f72 696e 6720         ignoring 
+0001e000: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
+0001e010: 726f 7570 4279 4f70 732e 6e61 6e76 6172  roupByOps.nanvar
+0001e020: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
+0001e030: 7661 7269 616e 6365 206f 6620 6561 6368  variance of each
+0001e040: 2067 726f 7570 2c20 6967 6e6f 7269 6e67   group, ignoring
+0001e050: 204e 614e 732e 2055 7365 6420 6279 0d0a   NaNs. Used by..
+0001e060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e070: 2020 2020 2020 2020 2020 2020 6043 6174              `Cat
+0001e080: 6567 6f72 6963 616c 6020 6f62 6a65 6374  egorical` object
+0001e090: 732e 0d0a 0d0a 2020 2020 2020 2020 4e6f  s.....        No
+0001e0a0: 7465 730d 0a20 2020 2020 2020 202d 2d2d  tes..        ---
+0001e0b0: 2d2d 0d0a 2020 2020 2020 2020 5468 6520  --..        The 
+0001e0c0: 6064 7479 7065 6020 6b65 7977 6f72 6420  `dtype` keyword 
+0001e0d0: 666f 7220 6046 6173 7441 7272 6179 2e6e  for `FastArray.n
+0001e0e0: 616e 7661 7260 2073 7065 6369 6669 6573  anvar` specifies
+0001e0f0: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
+0001e100: 6620 7468 650d 0a20 2020 2020 2020 2072  f the..        r
+0001e110: 6573 756c 742e 2054 6869 7320 6469 6666  esult. This diff
+0001e120: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
+0001e130: 6e61 6e76 6172 602c 2077 6865 7265 2069  nanvar`, where i
+0001e140: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
+0001e150: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
+0001e160: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
+0001e170: 7465 2074 6865 2076 6172 6961 6e63 652e  te the variance.
+0001e180: 0d0a 0d0a 2020 2020 2020 2020 2a2a 4e6f  ....        **No
+0001e190: 7465 7320 6f6e 2055 7369 6e67 204e 756d  tes on Using Num
+0001e1a0: 5079 2050 6172 616d 6574 6572 732a 2a0d  Py Parameters**.
+0001e1b0: 0a0d 0a20 2020 2020 2020 2055 7369 6e67  ...        Using
+0001e1c0: 2061 6e79 206f 6620 7468 6520 666f 6c6c   any of the foll
+0001e1d0: 6f77 696e 6720 4e75 6d50 7920 7061 7261  owing NumPy para
+0001e1e0: 6d65 7465 7273 2077 696c 6c20 6361 7573  meters will caus
+0001e1f0: 6520 5269 7074 6162 6c65 2074 6f20 7377  e Riptable to sw
+0001e200: 6974 6368 2074 6f0d 0a20 2020 2020 2020  itch to..       
+0001e210: 2074 6865 204e 756d 5079 2069 6d70 6c65   the NumPy imple
+0001e220: 6d65 6e74 6174 696f 6e20 6f66 2074 6869  mentation of thi
+0001e230: 7320 6d65 7468 6f64 2028 606e 756d 7079  s method (`numpy
+0001e240: 2e6e 616e 7661 7260 292e 2048 6f77 6576  .nanvar`). Howev
+0001e250: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+0001e260: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+0001e270: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+0001e280: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+0001e290: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+0001e2a0: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+0001e2b0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+0001e2c0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+0001e2d0: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+0001e2e0: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+0001e2f0: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
+0001e300: 2020 2020 2020 2060 6e75 6d70 792e 6e61         `numpy.na
+0001e310: 6e76 6172 602e 0d0a 0d0a 2020 2020 2020  nvar`.....      
+0001e320: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
+0001e330: 2069 6620 796f 7520 7573 6520 616e 7920   if you use any 
+0001e340: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
+0001e350: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
+0001e360: 7320 616e 6420 616c 736f 0d0a 2020 2020  s and also..    
+0001e370: 2020 2020 696e 636c 7564 6520 6120 6066      include a `f
+0001e380: 696c 7465 7260 206b 6579 776f 7264 2061  ilter` keyword a
+0001e390: 7267 756d 656e 7420 2877 6869 6368 2060  rgument (which `
+0001e3a0: 6e75 6d70 792e 6e61 6e76 6172 6020 646f  numpy.nanvar` do
+0001e3b0: 6573 206e 6f74 2061 6363 6570 7429 2c0d  es not accept),.
+0001e3c0: 0a20 2020 2020 2020 2052 6970 7461 626c  .        Riptabl
+0001e3d0: 6527 7320 696d 706c 656d 656e 7461 7469  e's implementati
+0001e3e0: 6f6e 206f 6620 606e 616e 7661 7260 2077  on of `nanvar` w
+0001e3f0: 696c 6c20 6265 2075 7365 6420 7769 7468  ill be used with
+0001e400: 2074 6865 2066 696c 7465 7220 6172 6775   the filter argu
+0001e410: 6d65 6e74 0d0a 2020 2020 2020 2020 616e  ment..        an
+0001e420: 6420 7468 6520 4e75 6d50 7920 7061 7261  d the NumPy para
+0001e430: 6d65 7465 7273 2077 696c 6c20 6265 2069  meters will be i
+0001e440: 676e 6f72 6564 2e0d 0a0d 0a20 2020 2020  gnored.....     
+0001e450: 2020 2061 7869 7320 3a20 7b69 6e74 2c20     axis : {int, 
+0001e460: 7475 706c 6520 6f66 2069 6e74 2c20 4e6f  tuple of int, No
+0001e470: 6e65 7d2c 206f 7074 696f 6e61 6c0d 0a20  ne}, optional.. 
+0001e480: 2020 2020 2020 2020 2020 2041 7869 7320             Axis 
+0001e490: 6f72 2061 7865 7320 616c 6f6e 6720 7768  or axes along wh
+0001e4a0: 6963 6820 7468 6520 7661 7269 616e 6365  ich the variance
+0001e4b0: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
+0001e4c0: 6520 6465 6661 756c 7420 6973 2074 6f0d  e default is to.
+0001e4d0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0001e4e0: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+0001e4f0: 6520 6f66 2074 6865 2066 6c61 7474 656e  e of the flatten
+0001e500: 6564 2061 7272 6179 2e0d 0a0d 0a20 2020  ed array.....   
+0001e510: 2020 2020 206b 6565 7064 696d 7320 3a20       keepdims : 
+0001e520: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0d0a  bool, optional..
+0001e530: 2020 2020 2020 2020 2020 2020 4966 2074              If t
+0001e540: 6869 7320 6973 2073 6574 2074 6f20 5472  his is set to Tr
+0001e550: 7565 2c20 7468 6520 6178 6573 2077 6869  ue, the axes whi
+0001e560: 6368 2061 7265 2072 6564 7563 6564 2061  ch are reduced a
+0001e570: 7265 206c 6566 7420 696e 2074 6865 2072  re left in the r
+0001e580: 6573 756c 7420 6173 0d0a 2020 2020 2020  esult as..      
+0001e590: 2020 2020 2020 6469 6d65 6e73 696f 6e73        dimensions
+0001e5a0: 2077 6974 6820 7369 7a65 206f 6e65 2e20   with size one. 
+0001e5b0: 5769 7468 2074 6869 7320 6f70 7469 6f6e  With this option
+0001e5c0: 2c20 7468 6520 7265 7375 6c74 2077 696c  , the result wil
+0001e5d0: 6c20 6272 6f61 6463 6173 740d 0a20 2020  l broadcast..   
+0001e5e0: 2020 2020 2020 2020 2063 6f72 7265 6374           correct
+0001e5f0: 6c79 2061 6761 696e 7374 2074 6865 206f  ly against the o
+0001e600: 7269 6769 6e61 6c20 696e 7075 7420 6172  riginal input ar
+0001e610: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
+0001e620: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
+0001e630: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001e640: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
+0001e650: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
+0001e660: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
+0001e670: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
+0001e680: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
+0001e690: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
+0001e6a0: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
+0001e6b0: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
+0001e6c0: 7220 6f66 206e 6f6e 2d4e 614e 2065 6c65  r of non-NaN ele
+0001e6d0: 6d65 6e74 732e 2042 790d 0a20 2020 2020  ments. By..     
+0001e6e0: 2020 2020 2020 2064 6566 6175 6c74 2060         default `
+0001e6f0: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
+0001e700: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
+0001e710: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
+0001e720: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
+0001e730: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
+0001e740: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
+0001e750: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
+0001e760: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0001e770: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001e780: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+0001e790: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+0001e7a0: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
+0001e7b0: 2020 2020 203e 3e3e 2061 2e6e 616e 7661       >>> a.nanva
+0001e7c0: 7228 290d 0a20 2020 2020 2020 2031 2e30  r()..        1.0
+0001e7d0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+0001e7e0: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
+0001e7f0: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
+0001e800: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001e810: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0001e820: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001e830: 2020 3e3e 3e20 612e 6e61 6e76 6172 2864    >>> a.nanvar(d
+0001e840: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001e850: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+0001e860: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001e870: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001e880: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001e890: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0001e8a0: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001e8b0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001e8c0: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001e8d0: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
+0001e8e0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0001e8f0: 2e6e 616e 7661 7228 6669 6c74 6572 203d  .nanvar(filter =
+0001e900: 2062 290d 0a20 2020 2020 2020 2030 2e35   b)..        0.5
+0001e910: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+0001e920: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
+0001e930: 3d20 7365 6c66 2e5f 6661 5f6b 6579 776f  = self._fa_keywo
+0001e940: 7264 5f77 7261 7070 6572 2866 696c 7465  rd_wrapper(filte
+0001e950: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
+0001e960: 6474 7970 652c 2061 7869 733d 6178 6973  dtype, axis=axis
+0001e970: 2c20 6b65 6570 6469 6d73 3d6b 6565 7064  , keepdims=keepd
+0001e980: 696d 732c 2064 646f 663d 6464 6f66 2c20  ims, ddof=ddof, 
+0001e990: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+0001e9a0: 2020 2020 2069 6620 6669 6c74 6572 2069       if filter i
+0001e9b0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0001e9c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001e9d0: 7365 6c66 2e5f 6661 5f66 696c 7465 725f  self._fa_filter_
+0001e9e0: 7772 6170 7065 7228 5f66 6e61 6e76 6172  wrapper(_fnanvar
+0001e9f0: 2c20 6669 6c74 6572 3d66 696c 7465 722c  , filter=filter,
+0001ea00: 2064 7479 7065 3d64 7479 7065 290d 0a0d   dtype=dtype)...
+0001ea10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001ea20: 7365 6c66 2e5f 7265 6475 6365 5f63 6865  self._reduce_che
+0001ea30: 636b 2852 4544 5543 455f 4655 4e43 5449  ck(REDUCE_FUNCTI
+0001ea40: 4f4e 532e 5245 4455 4345 5f4e 414e 5641  ONS.REDUCE_NANVA
+0001ea50: 522c 206e 702e 6e61 6e76 6172 2c20 2a2a  R, np.nanvar, **
+0001ea60: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
+0001ea70: 6566 2073 7464 2873 656c 662c 2066 696c  ef std(self, fil
+0001ea80: 7465 723d 4e6f 6e65 2c20 6474 7970 653d  ter=None, dtype=
+0001ea90: 4e6f 6e65 2c20 6178 6973 3d4e 6f6e 652c  None, axis=None,
+0001eaa0: 206b 6565 7064 696d 733d 4e6f 6e65 2c20   keepdims=None, 
+0001eab0: 6464 6f66 3d4e 6f6e 652c 202a 2a6b 7761  ddof=None, **kwa
+0001eac0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+0001ead0: 723a 0d0a 2020 2020 2020 2020 2222 220d  r:..        """.
+0001eae0: 0a20 2020 2020 2020 2043 6f6d 7075 7465  .        Compute
+0001eaf0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
+0001eb00: 7669 6174 696f 6e20 6f66 2074 6865 2076  viation of the v
+0001eb10: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+0001eb20: 7374 2061 7267 756d 656e 742e 0d0a 0d0a  st argument.....
+0001eb30: 2020 2020 2020 2020 5269 7074 6162 6c65          Riptable
+0001eb40: 2075 7365 7320 7468 6520 636f 6e76 656e   uses the conven
+0001eb50: 7469 6f6e 2074 6861 7420 6060 6464 6f66  tion that ``ddof
+0001eb60: 203d 2031 6060 2c20 6d65 616e 696e 6720   = 1``, meaning 
+0001eb70: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
+0001eb80: 6961 7469 6f6e 206f 660d 0a20 2020 2020  iation of..     
+0001eb90: 2020 2060 605b 785f 312c 202e 2e2e 2c20     ``[x_1, ..., 
+0001eba0: 785f 6e5d 6060 2069 7320 6465 6669 6e65  x_n]`` is define
+0001ebb0: 6420 6279 2060 6073 7464 203d 2031 2f28  d by ``std = 1/(
+0001ebc0: 6e20 2d20 3129 202a 2073 756d 2878 5f69  n - 1) * sum(x_i
+0001ebd0: 202d 206d 6561 6e20 292a 2a32 6060 2028   - mean )**2`` (
+0001ebe0: 6e6f 7465 0d0a 2020 2020 2020 2020 7468  note..        th
+0001ebf0: 6520 6060 6e20 2d20 3160 6020 696e 7374  e ``n - 1`` inst
+0001ec00: 6561 6420 6f66 2060 606e 6060 292e 2054  ead of ``n``). T
+0001ec10: 6869 7320 6469 6666 6572 7320 6672 6f6d  his differs from
+0001ec20: 204e 756d 5079 2c20 7768 6963 6820 7573   NumPy, which us
+0001ec30: 6573 2060 6064 646f 6620 3d20 3060 6020  es ``ddof = 0`` 
+0001ec40: 6279 0d0a 2020 2020 2020 2020 6465 6661  by..        defa
+0001ec50: 756c 742e 0d0a 0d0a 2020 2020 2020 2020  ult.....        
+0001ec60: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+0001ec70: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+0001ec80: 2020 2020 2020 2020 6669 6c74 6572 203a          filter :
+0001ec90: 2061 7272 6179 206f 6620 626f 6f6c 2c20   array of bool, 
+0001eca0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
+0001ecb0: 2020 2020 2020 2020 2020 5370 6563 6966            Specif
+0001ecc0: 6965 7320 7768 6963 6820 656c 656d 656e  ies which elemen
+0001ecd0: 7473 2074 6f20 696e 636c 7564 6520 696e  ts to include in
+0001ece0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
+0001ecf0: 7669 6174 696f 6e20 6361 6c63 756c 6174  viation calculat
+0001ed00: 696f 6e2e 2049 660d 0a20 2020 2020 2020  ion. If..       
+0001ed10: 2020 2020 2074 6865 2066 696c 7465 7220       the filter 
+0001ed20: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
+0001ed30: 616c 7365 6060 2c20 6073 7464 6020 7265  alse``, `std` re
+0001ed40: 7475 726e 7320 6120 605a 6572 6f44 6976  turns a `ZeroDiv
+0001ed50: 6973 696f 6e45 7272 6f72 602e 0d0a 0d0a  isionError`.....
+0001ed60: 2020 2020 2020 2020 6474 7970 6520 3a20          dtype : 
+0001ed70: 7274 2e64 7479 7065 206f 7220 6e75 6d70  rt.dtype or nump
+0001ed80: 792e 6474 7970 652c 2064 6566 6175 6c74  y.dtype, default
+0001ed90: 2066 6c6f 6174 3634 0d0a 2020 2020 2020   float64..      
+0001eda0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
+0001edb0: 7970 6520 6f66 2074 6865 2072 6573 756c  ype of the resul
+0001edc0: 742e 2046 6f72 2061 2060 4661 7374 4172  t. For a `FastAr
+0001edd0: 7261 7960 2060 6078 6060 2c0d 0a20 2020  ray` ``x``,..   
+0001ede0: 2020 2020 2020 2020 2060 6078 2e73 7464           ``x.std
+0001edf0: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001ee00: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001ee10: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001ee20: 2e73 7464 2829 2960 602e 0d0a 0d0a 2020  .std())``.....  
+0001ee30: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0001ee40: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0001ee50: 2020 2020 2020 2020 7363 616c 6172 0d0a          scalar..
+0001ee60: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0001ee70: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
+0001ee80: 6f6e 206f 6620 7468 6520 7661 6c75 6573  on of the values
+0001ee90: 2e0d 0a0d 0a20 2020 2020 2020 2053 6565  .....        See
+0001eea0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
+0001eeb0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001eec0: 206e 756d 7079 2e73 7464 0d0a 2020 2020   numpy.std..    
+0001eed0: 2020 2020 4661 7374 4172 7261 792e 6e61      FastArray.na
+0001eee0: 6e73 7464 203a 2043 6f6d 7075 7465 7320  nstd : Computes 
+0001eef0: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
+0001ef00: 6961 7469 6f6e 206f 6620 6046 6173 7441  iation of `FastA
+0001ef10: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
+0001ef20: 6e6f 7269 6e67 0d0a 2020 2020 2020 2020  noring..        
+0001ef30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ef40: 2020 204e 614e 732e 0d0a 2020 2020 2020     NaNs...      
+0001ef50: 2020 4461 7461 7365 742e 7374 6420 3a20    Dataset.std : 
+0001ef60: 436f 6d70 7574 6573 2074 6865 2073 7461  Computes the sta
+0001ef70: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
+0001ef80: 6f66 206e 756d 6572 6963 616c 2060 4461  of numerical `Da
+0001ef90: 7461 7365 7460 2063 6f6c 756d 6e73 2e0d  taset` columns..
+0001efa0: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
+0001efb0: 4f70 732e 7374 6420 3a20 436f 6d70 7574  Ops.std : Comput
+0001efc0: 6573 2074 6865 2073 7461 6e64 6172 6420  es the standard 
+0001efd0: 6465 7669 6174 696f 6e20 6f66 2065 6163  deviation of eac
+0001efe0: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
+0001eff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f000: 2020 2020 2020 2020 2020 2060 4361 7465             `Cate
+0001f010: 676f 7269 6361 6c60 206f 626a 6563 7473  gorical` objects
+0001f020: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
+0001f030: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0001f040: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
+0001f050: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
+0001f060: 6f72 2060 4661 7374 4172 7261 792e 7374  or `FastArray.st
+0001f070: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
+0001f080: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+0001f090: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
+0001f0a0: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
+0001f0b0: 6672 6f6d 2060 6e75 6d70 792e 7374 6460  from `numpy.std`
+0001f0c0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
+0001f0d0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001f0e0: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
+0001f0f0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+0001f100: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
+0001f110: 6f6e 2e0d 0a0d 0a20 2020 2020 2020 202a  on.....        *
+0001f120: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
+0001f130: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
+0001f140: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
+0001f150: 696e 6720 616e 7920 6f66 2074 6865 2066  ing any of the f
+0001f160: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
+0001f170: 6172 616d 6574 6572 7320 7769 6c6c 2063  arameters will c
+0001f180: 6175 7365 2052 6970 7461 626c 6520 746f  ause Riptable to
+0001f190: 2073 7769 7463 6820 746f 0d0a 2020 2020   switch to..    
+0001f1a0: 2020 2020 7468 6520 4e75 6d50 7920 696d      the NumPy im
+0001f1b0: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
+0001f1c0: 7468 6973 206d 6574 686f 6420 2860 6e75  this method (`nu
+0001f1d0: 6d70 792e 7374 6460 292e 2048 6f77 6576  mpy.std`). Howev
+0001f1e0: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+0001f1f0: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+0001f200: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+0001f210: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+0001f220: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+0001f230: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+0001f240: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+0001f250: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+0001f260: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+0001f270: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+0001f280: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
+0001f290: 2020 2020 2020 2060 6e75 6d70 792e 7374         `numpy.st
+0001f2a0: 6460 2e0d 0a0d 0a20 2020 2020 2020 2041  d`.....        A
+0001f2b0: 6c73 6f20 6e6f 7465 2074 6861 7420 6966  lso note that if
+0001f2c0: 2079 6f75 2075 7365 2061 6e79 206f 6620   you use any of 
+0001f2d0: 7468 6520 666f 6c6c 6f77 696e 6720 4e75  the following Nu
+0001f2e0: 6d50 7920 7061 7261 6d65 7465 7273 2061  mPy parameters a
+0001f2f0: 6e64 2061 6c73 6f0d 0a20 2020 2020 2020  nd also..       
+0001f300: 2069 6e63 6c75 6465 2061 2060 6669 6c74   include a `filt
+0001f310: 6572 6020 6b65 7977 6f72 6420 6172 6775  er` keyword argu
+0001f320: 6d65 6e74 2028 7768 6963 6820 606e 756d  ment (which `num
+0001f330: 7079 2e73 7464 6020 646f 6573 206e 6f74  py.std` does not
+0001f340: 2061 6363 6570 7429 2c0d 0a20 2020 2020   accept),..     
+0001f350: 2020 2052 6970 7461 626c 6527 7320 696d     Riptable's im
+0001f360: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
+0001f370: 6073 7464 6020 7769 6c6c 2062 6520 7573  `std` will be us
+0001f380: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
+0001f390: 6572 2061 7267 756d 656e 740d 0a20 2020  er argument..   
+0001f3a0: 2020 2020 2061 6e64 2074 6865 204e 756d       and the Num
+0001f3b0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
+0001f3c0: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
+0001f3d0: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
+0001f3e0: 204e 6f6e 6520 6f72 2069 6e74 206f 7220   None or int or 
+0001f3f0: 7475 706c 6520 6f66 2069 6e74 732c 206f  tuple of ints, o
+0001f400: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
+0001f410: 2020 2020 2041 7869 7320 6f72 2061 7865       Axis or axe
+0001f420: 7320 616c 6f6e 6720 7768 6963 6820 7468  s along which th
+0001f430: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+0001f440: 7469 6f6e 2069 7320 636f 6d70 7574 6564  tion is computed
+0001f450: 2e20 5468 650d 0a20 2020 2020 2020 2020  . The..         
+0001f460: 2020 2064 6566 6175 6c74 2069 7320 746f     default is to
+0001f470: 2063 6f6d 7075 7465 2074 6865 2073 7461   compute the sta
+0001f480: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
+0001f490: 6f66 2074 6865 2066 6c61 7474 656e 6564  of the flattened
+0001f4a0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+0001f4b0: 2020 2020 2020 202e 2e20 7665 7273 696f         .. versio
+0001f4c0: 6e61 6464 6564 3a3a 2031 2e37 2e30 0d0a  nadded:: 1.7.0..
+0001f4d0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+0001f4e0: 2074 6869 7320 6973 2061 2074 7570 6c65   this is a tuple
+0001f4f0: 206f 6620 696e 7473 2c20 6120 7374 616e   of ints, a stan
+0001f500: 6461 7264 2064 6576 6961 7469 6f6e 2069  dard deviation i
+0001f510: 7320 7065 7266 6f72 6d65 6420 6f76 6572  s performed over
+0001f520: 206d 756c 7469 706c 650d 0a20 2020 2020   multiple..     
+0001f530: 2020 2020 2020 2061 7865 732c 2069 6e73         axes, ins
+0001f540: 7465 6164 206f 6620 6120 7369 6e67 6c65  tead of a single
+0001f550: 2061 7869 7320 6f72 2061 6c6c 2074 6865   axis or all the
+0001f560: 2061 7865 7320 6173 2062 6566 6f72 652e   axes as before.
+0001f570: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
+0001f580: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
+0001f590: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+0001f5a0: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
+0001f5b0: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
+0001f5c0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
+0001f5d0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
+0001f5e0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
+0001f5f0: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
+0001f600: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
+0001f610: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
+0001f620: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
+0001f630: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
+0001f640: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+0001f650: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
+0001f660: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
+0001f670: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
+0001f680: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
+0001f690: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
+0001f6a0: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
+0001f6b0: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
+0001f6c0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
+0001f6d0: 2020 2020 2020 2020 2020 746f 2074 6865            to the
+0001f6e0: 2060 7374 6460 206d 6574 686f 6420 6f66   `std` method of
+0001f6f0: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+0001f700: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
+0001f710: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
+0001f720: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
+0001f730: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
+0001f740: 6620 7468 6520 7375 622d 636c 6173 7327  f the sub-class'
+0001f750: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
+0001f760: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+0001f770: 6469 6d73 602c 0d0a 2020 2020 2020 2020  dims`,..        
+0001f780: 2020 2020 616e 7920 6578 6365 7074 696f      any exceptio
+0001f790: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
+0001f7a0: 642e 0d0a 0d0a 2020 2020 2020 2020 6464  d.....        dd
+0001f7b0: 6f66 203a 2069 6e74 2c20 6f70 7469 6f6e  of : int, option
+0001f7c0: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+0001f7d0: 2244 656c 7461 2044 6567 7265 6573 206f  "Delta Degrees o
+0001f7e0: 6620 4672 6565 646f 6d22 3a20 7468 6520  f Freedom": the 
+0001f7f0: 6469 7669 736f 7220 7573 6564 2069 6e20  divisor used in 
+0001f800: 7468 6520 6361 6c63 756c 6174 696f 6e20  the calculation 
+0001f810: 6973 0d0a 2020 2020 2020 2020 2020 2020  is..            
+0001f820: 6060 4e20 2d20 6464 6f66 6060 2c20 7768  ``N - ddof``, wh
+0001f830: 6572 6520 6060 4e60 6020 7265 7072 6573  ere ``N`` repres
+0001f840: 656e 7473 2074 6865 206e 756d 6265 7220  ents the number 
+0001f850: 6f66 2065 6c65 6d65 6e74 732e 2042 7920  of elements. By 
+0001f860: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
+0001f870: 2020 2020 2060 6464 6f66 6020 6973 207a       `ddof` is z
+0001f880: 6572 6f20 666f 7220 7468 6520 4e75 6d50  ero for the NumP
+0001f890: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
+0001f8a0: 2c20 7665 7273 7573 206f 6e65 2066 6f72  , versus one for
+0001f8b0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
+0001f8c0: 2020 5269 7074 6162 6c65 2069 6d70 6c65    Riptable imple
+0001f8d0: 6d65 6e74 6174 696f 6e2e 0d0a 0d0a 2020  mentation.....  
+0001f8e0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+0001f8f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001f900: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0001f910: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+0001f920: 312c 2032 2c20 335d 290d 0a20 2020 2020  1, 2, 3])..     
+0001f930: 2020 203e 3e3e 2061 2e73 7464 2829 0d0a     >>> a.std()..
+0001f940: 2020 2020 2020 2020 312e 300d 0a0d 0a20          1.0.... 
+0001f950: 2020 2020 2020 2057 6974 6820 6120 6064         With a `d
+0001f960: 7479 7065 6020 7370 6563 6966 6965 643a  type` specified:
+0001f970: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0001f980: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001f990: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
+0001f9a0: 2020 2020 203e 3e3e 2061 2e73 7464 2864       >>> a.std(d
+0001f9b0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001f9c0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+0001f9d0: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001f9e0: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001f9f0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001fa00: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
+0001fa10: 0d0a 2020 2020 2020 2020 3e3e 3e20 6220  ..        >>> b 
+0001fa20: 3d20 7274 2e46 4128 5b46 616c 7365 2c20  = rt.FA([False, 
+0001fa30: 5472 7565 2c20 5472 7565 5d29 0d0a 2020  True, True])..  
+0001fa40: 2020 2020 2020 3e3e 3e20 612e 7374 6428        >>> a.std(
+0001fa50: 6669 6c74 6572 203d 2062 290d 0a20 2020  filter = b)..   
+0001fa60: 2020 2020 2030 2e37 3037 3130 3637 3831       0.707106781
+0001fa70: 3138 3635 3437 360d 0a20 2020 2020 2020  1865476..       
+0001fa80: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+0001fa90: 6b77 6172 6773 203d 2073 656c 662e 5f66  kwargs = self._f
+0001faa0: 615f 6b65 7977 6f72 645f 7772 6170 7065  a_keyword_wrappe
+0001fab0: 7228 6669 6c74 6572 3d66 696c 7465 722c  r(filter=filter,
+0001fac0: 2064 7479 7065 3d64 7479 7065 2c20 6178   dtype=dtype, ax
+0001fad0: 6973 3d61 7869 732c 206b 6565 7064 696d  is=axis, keepdim
+0001fae0: 733d 6b65 6570 6469 6d73 2c20 6464 6f66  s=keepdims, ddof
+0001faf0: 3d64 646f 662c 202a 2a6b 7761 7267 7329  =ddof, **kwargs)
+0001fb00: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
+0001fb10: 696c 7465 7220 6973 206e 6f74 204e 6f6e  ilter is not Non
+0001fb20: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001fb30: 7265 7475 726e 2073 656c 662e 5f66 615f  return self._fa_
+0001fb40: 6669 6c74 6572 5f77 7261 7070 6572 285f  filter_wrapper(_
+0001fb50: 6673 7464 2c20 6669 6c74 6572 3d66 696c  fstd, filter=fil
+0001fb60: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
+0001fb70: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
+0001fb80: 7572 6e20 7365 6c66 2e5f 7265 6475 6365  urn self._reduce
+0001fb90: 5f63 6865 636b 2852 4544 5543 455f 4655  _check(REDUCE_FU
+0001fba0: 4e43 5449 4f4e 532e 5245 4455 4345 5f53  NCTIONS.REDUCE_S
+0001fbb0: 5444 2c20 6e70 2e73 7464 2c20 2a2a 6b77  TD, np.std, **kw
+0001fbc0: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+0001fbd0: 206e 616e 7374 6428 7365 6c66 2c20 6669   nanstd(self, fi
+0001fbe0: 6c74 6572 3d4e 6f6e 652c 2064 7479 7065  lter=None, dtype
+0001fbf0: 3d4e 6f6e 652c 2061 7869 733d 4e6f 6e65  =None, axis=None
+0001fc00: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
+0001fc10: 2064 646f 663d 4e6f 6e65 2c20 2a2a 6b77   ddof=None, **kw
+0001fc20: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
+0001fc30: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
+0001fc40: 0d0a 2020 2020 2020 2020 436f 6d70 7574  ..        Comput
+0001fc50: 6520 7468 6520 7374 616e 6461 7264 2064  e the standard d
+0001fc60: 6576 6961 7469 6f6e 206f 6620 7468 6520  eviation of the 
+0001fc70: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
+0001fc80: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
+0001fc90: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
+0001fca0: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
+0001fcb0: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+0001fcc0: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
+0001fcd0: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
+0001fce0: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
+0001fcf0: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
+0001fd00: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
+0001fd10: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
+0001fd20: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
+0001fd30: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+0001fd40: 7469 6f6e 206f 660d 0a20 2020 2020 2020  tion of..       
+0001fd50: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
+0001fd60: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
+0001fd70: 6279 2060 6073 7464 203d 2031 2f28 6e20  by ``std = 1/(n 
+0001fd80: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
+0001fd90: 206d 6561 6e20 292a 2a32 6060 2028 6e6f   mean )**2`` (no
+0001fda0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+0001fdb0: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
+0001fdc0: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
+0001fdd0: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
+0001fde0: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
+0001fdf0: 2060 6064 646f 6620 3d20 3060 6020 6279   ``ddof = 0`` by
+0001fe00: 0d0a 2020 2020 2020 2020 6465 6661 756c  ..        defaul
+0001fe10: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+0001fe20: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001fe30: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001fe40: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001fe50: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001fe60: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001fe70: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001fe80: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001fe90: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001fea0: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
+0001feb0: 6174 696f 6e20 6361 6c63 756c 6174 696f  ation calculatio
+0001fec0: 6e2e 2049 660d 0a20 2020 2020 2020 2020  n. If..         
+0001fed0: 2020 2074 6865 2066 696c 7465 7220 6973     the filter is
+0001fee0: 2075 6e69 666f 726d 6c79 2060 6046 616c   uniformly ``Fal
+0001fef0: 7365 6060 2c20 606e 616e 7374 6460 2072  se``, `nanstd` r
+0001ff00: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
+0001ff10: 7669 7369 6f6e 4572 726f 7260 2e0d 0a0d  visionError`....
+0001ff20: 0a20 2020 2020 2020 2064 7479 7065 203a  .        dtype :
+0001ff30: 2072 742e 6474 7970 6520 6f72 206e 756d   rt.dtype or num
+0001ff40: 7079 2e64 7479 7065 2c20 6465 6661 756c  py.dtype, defaul
+0001ff50: 7420 666c 6f61 7436 340d 0a20 2020 2020  t float64..     
+0001ff60: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
+0001ff70: 7479 7065 206f 6620 7468 6520 7265 7375  type of the resu
+0001ff80: 6c74 2e20 466f 7220 6120 6046 6173 7441  lt. For a `FastA
+0001ff90: 7272 6179 6020 6060 7860 602c 0d0a 2020  rray` ``x``,..  
+0001ffa0: 2020 2020 2020 2020 2020 6060 782e 6e61            ``x.na
+0001ffb0: 6e73 7464 2864 7479 7065 203d 206d 795f  nstd(dtype = my_
+0001ffc0: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
+0001ffd0: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
+0001ffe0: 7065 2878 2e6e 616e 7374 6428 2929 6060  pe(x.nanstd())``
+0001fff0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+00020000: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00020010: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2073  -----..        s
+00020020: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
+00020030: 2020 2054 6865 2073 7461 6e64 6172 6420     The standard 
+00020040: 6465 7669 6174 696f 6e20 6f66 2074 6865  deviation of the
+00020050: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
+00020060: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+00020070: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00020080: 2020 2020 2020 2020 6e75 6d70 792e 6e61          numpy.na
+00020090: 6e73 7464 0d0a 2020 2020 2020 2020 4661  nstd..        Fa
+000200a0: 7374 4172 7261 792e 7374 6420 3a20 436f  stArray.std : Co
+000200b0: 6d70 7574 6573 2074 6865 2073 7461 6e64  mputes the stand
+000200c0: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
+000200d0: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
+000200e0: 7565 732e 0d0a 2020 2020 2020 2020 4461  ues...        Da
+000200f0: 7461 7365 742e 6e61 6e73 7464 203a 2043  taset.nanstd : C
+00020100: 6f6d 7075 7465 7320 7468 6520 7374 616e  omputes the stan
+00020110: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
+00020120: 6620 6e75 6d65 7269 6361 6c20 6044 6174  f numerical `Dat
+00020130: 6173 6574 6020 636f 6c75 6d6e 732c 0d0a  aset` columns,..
+00020140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020150: 2020 2020 2020 2020 2069 676e 6f72 696e           ignorin
+00020160: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
+00020170: 2047 726f 7570 4279 4f70 732e 6e61 6e73   GroupByOps.nans
+00020180: 7464 203a 2043 6f6d 7075 7465 7320 7468  td : Computes th
+00020190: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+000201a0: 7469 6f6e 206f 6620 6561 6368 2067 726f  tion of each gro
+000201b0: 7570 2c20 6967 6e6f 7269 6e67 204e 614e  up, ignoring NaN
+000201c0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
+000201d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201e0: 5573 6564 2062 7920 6043 6174 6567 6f72  Used by `Categor
+000201f0: 6963 616c 6020 6f62 6a65 6374 732e 0d0a  ical` objects...
+00020200: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
+00020210: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
+00020220: 2020 2020 2020 2020 5468 6520 6064 7479          The `dty
+00020230: 7065 6020 6b65 7977 6f72 6420 666f 7220  pe` keyword for 
+00020240: 6046 6173 7441 7272 6179 2e6e 616e 7374  `FastArray.nanst
+00020250: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
+00020260: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+00020270: 650d 0a20 2020 2020 2020 2072 6573 756c  e..        resul
+00020280: 742e 2054 6869 7320 6469 6666 6572 7320  t. This differs 
+00020290: 6672 6f6d 2060 6e75 6d70 792e 6e61 6e73  from `numpy.nans
+000202a0: 7464 602c 2077 6865 7265 2069 7420 7370  td`, where it sp
+000202b0: 6563 6966 6965 7320 7468 6520 6461 7461  ecifies the data
+000202c0: 2074 7970 6520 7573 6564 0d0a 2020 2020   type used..    
+000202d0: 2020 2020 746f 2063 6f6d 7075 7465 2074      to compute t
+000202e0: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
+000202f0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
+00020300: 2020 2a2a 4e6f 7465 7320 6f6e 2055 7369    **Notes on Usi
+00020310: 6e67 204e 756d 5079 2050 6172 616d 6574  ng NumPy Paramet
+00020320: 6572 732a 2a0d 0a0d 0a20 2020 2020 2020  ers**....       
+00020330: 2055 7369 6e67 2061 6e79 206f 6620 7468   Using any of th
+00020340: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
+00020350: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
+00020360: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
+00020370: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
+00020380: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
+00020390: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+000203a0: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
+000203b0: 606e 756d 7079 2e6e 616e 7374 6460 292e  `numpy.nanstd`).
+000203c0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
+000203d0: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
+000203e0: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
+000203f0: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
+00020400: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
+00020410: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
+00020420: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
+00020430: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
+00020440: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
+00020450: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
+00020460: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
+00020470: 2069 6e0d 0a20 2020 2020 2020 2060 6e75   in..        `nu
+00020480: 6d70 792e 6e61 6e73 7464 602e 0d0a 0d0a  mpy.nanstd`.....
+00020490: 2020 2020 2020 2020 416c 736f 206e 6f74          Also not
+000204a0: 6520 7468 6174 2069 6620 796f 7520 7573  e that if you us
+000204b0: 6520 616e 7920 6f66 2074 6865 2066 6f6c  e any of the fol
+000204c0: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
+000204d0: 616d 6574 6572 7320 616e 6420 616c 736f  ameters and also
+000204e0: 0d0a 2020 2020 2020 2020 696e 636c 7564  ..        includ
+000204f0: 6520 6120 6066 696c 7465 7260 206b 6579  e a `filter` key
+00020500: 776f 7264 2061 7267 756d 656e 7420 2877  word argument (w
+00020510: 6869 6368 2060 6e75 6d70 792e 6e61 6e73  hich `numpy.nans
+00020520: 7464 6020 646f 6573 206e 6f74 2061 6363  td` does not acc
+00020530: 6570 7429 2c0d 0a20 2020 2020 2020 2052  ept),..        R
+00020540: 6970 7461 626c 6527 7320 696d 706c 656d  iptable's implem
+00020550: 656e 7461 7469 6f6e 206f 6620 606e 616e  entation of `nan
+00020560: 7374 6460 2077 696c 6c20 6265 2075 7365  std` will be use
+00020570: 6420 7769 7468 2074 6865 2066 696c 7465  d with the filte
+00020580: 7220 6172 6775 6d65 6e74 0d0a 2020 2020  r argument..    
+00020590: 2020 2020 616e 6420 7468 6520 4e75 6d50      and the NumP
+000205a0: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
+000205b0: 6c20 6265 2069 676e 6f72 6564 2e0d 0a0d  l be ignored....
+000205c0: 0a20 2020 2020 2020 2061 7869 7320 3a20  .        axis : 
+000205d0: 7b69 6e74 2c20 7475 706c 6520 6f66 2069  {int, tuple of i
+000205e0: 6e74 2c20 4e6f 6e65 7d2c 206f 7074 696f  nt, None}, optio
+000205f0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+00020600: 2041 7869 7320 6f72 2061 7865 7320 616c   Axis or axes al
+00020610: 6f6e 6720 7768 6963 6820 7468 6520 7374  ong which the st
+00020620: 616e 6461 7264 2064 6576 6961 7469 6f6e  andard deviation
+00020630: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
+00020640: 6520 6465 6661 756c 7420 6973 0d0a 2020  e default is..  
+00020650: 2020 2020 2020 2020 2020 746f 2063 6f6d            to com
+00020660: 7075 7465 2074 6865 2073 7461 6e64 6172  pute the standar
+00020670: 6420 6465 7669 6174 696f 6e20 6f66 2074  d deviation of t
+00020680: 6865 2066 6c61 7474 656e 6564 2061 7272  he flattened arr
+00020690: 6179 2e0d 0a0d 0a20 2020 2020 2020 206b  ay.....        k
+000206a0: 6565 7064 696d 7320 3a20 626f 6f6c 2c20  eepdims : bool, 
+000206b0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+000206c0: 2020 2020 2020 4966 2074 6869 7320 6973        If this is
+000206d0: 2073 6574 2074 6f20 5472 7565 2c20 7468   set to True, th
+000206e0: 6520 6178 6573 2077 6869 6368 2061 7265  e axes which are
+000206f0: 2072 6564 7563 6564 2061 7265 206c 6566   reduced are lef
+00020700: 7420 696e 2074 6865 2072 6573 756c 7420  t in the result 
+00020710: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
+00020720: 6469 6d65 6e73 696f 6e73 2077 6974 6820  dimensions with 
+00020730: 7369 7a65 206f 6e65 2e20 5769 7468 2074  size one. With t
+00020740: 6869 7320 6f70 7469 6f6e 2c20 7468 6520  his option, the 
+00020750: 7265 7375 6c74 2077 696c 6c20 6272 6f61  result will broa
+00020760: 6463 6173 740d 0a20 2020 2020 2020 2020  dcast..         
+00020770: 2020 2063 6f72 7265 6374 6c79 2061 6761     correctly aga
+00020780: 696e 7374 2074 6865 206f 7269 6769 6e61  inst the origina
+00020790: 6c20 696e 7075 7420 6172 7261 792e 0d0a  l input array...
+000207a0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+000207b0: 2074 6869 7320 7661 6c75 6520 6973 2061   this value is a
+000207c0: 6e79 7468 696e 6720 6275 7420 7468 6520  nything but the 
+000207d0: 6465 6661 756c 7420 6974 2069 7320 7061  default it is pa
+000207e0: 7373 6564 2074 6872 6f75 6768 2061 732d  ssed through as-
+000207f0: 6973 2074 6f20 7468 650d 0a20 2020 2020  is to the..     
+00020800: 2020 2020 2020 2072 656c 6576 616e 7420         relevant 
+00020810: 6675 6e63 7469 6f6e 7320 6f66 2074 6865  functions of the
+00020820: 2073 7562 2d63 6c61 7373 6573 2e20 4966   sub-classes. If
+00020830: 2074 6865 7365 2066 756e 6374 696f 6e73   these functions
+00020840: 2064 6f20 6e6f 7420 6861 7665 2061 0d0a   do not have a..
+00020850: 2020 2020 2020 2020 2020 2020 606b 6565              `kee
+00020860: 7064 696d 7360 206b 7761 7267 2c20 6120  pdims` kwarg, a 
+00020870: 5275 6e74 696d 6545 7272 6f72 2077 696c  RuntimeError wil
+00020880: 6c20 6265 2072 6169 7365 642e 0d0a 0d0a  l be raised.....
+00020890: 2020 2020 2020 2020 6464 6f66 203a 2069          ddof : i
+000208a0: 6e74 2c20 6f70 7469 6f6e 616c 0d0a 2020  nt, optional..  
+000208b0: 2020 2020 2020 2020 2020 2244 656c 7461            "Delta
+000208c0: 2044 6567 7265 6573 206f 6620 4672 6565   Degrees of Free
+000208d0: 646f 6d22 3a20 7468 6520 6469 7669 736f  dom": the diviso
+000208e0: 7220 7573 6564 2069 6e20 7468 6520 6361  r used in the ca
+000208f0: 6c63 756c 6174 696f 6e20 6973 0d0a 2020  lculation is..  
+00020900: 2020 2020 2020 2020 2020 6060 4e20 2d20            ``N - 
+00020910: 6464 6f66 6060 2c20 7768 6572 6520 6060  ddof``, where ``
+00020920: 4e60 6020 7265 7072 6573 656e 7473 2074  N`` represents t
+00020930: 6865 206e 756d 6265 7220 6f66 2065 6c65  he number of ele
+00020940: 6d65 6e74 732e 2042 7920 6465 6661 756c  ments. By defaul
+00020950: 740d 0a20 2020 2020 2020 2020 2020 2060  t..            `
+00020960: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
+00020970: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
+00020980: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
+00020990: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
+000209a0: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
+000209b0: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
+000209c0: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
+000209d0: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+000209e0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+000209f0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+00020a00: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+00020a10: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
+00020a20: 2020 2020 203e 3e3e 2061 2e6e 616e 7374       >>> a.nanst
+00020a30: 6428 290d 0a20 2020 2020 2020 2031 2e30  d()..        1.0
+00020a40: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+00020a50: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
+00020a60: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
+00020a70: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+00020a80: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+00020a90: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+00020aa0: 2020 3e3e 3e20 612e 6e61 6e73 7464 2864    >>> a.nanstd(d
+00020ab0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+00020ac0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+00020ad0: 2020 2020 2020 2057 6974 6820 6669 6c74         With filt
+00020ae0: 6572 3a0d 0a0d 0a20 2020 2020 2020 203e  er:....        >
+00020af0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
+00020b00: 7261 7928 5b31 2c20 322c 2033 2c20 7274  ray([1, 2, 3, rt
+00020b10: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
+00020b20: 3e3e 3e20 6220 3d20 7274 2e46 6173 7441  >>> b = rt.FastA
+00020b30: 7272 6179 285b 4661 6c73 652c 2054 7275  rray([False, Tru
+00020b40: 652c 2054 7275 652c 2054 7275 655d 290d  e, True, True]).
+00020b50: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
+00020b60: 616e 7374 6428 6669 6c74 6572 203d 2062  anstd(filter = b
+00020b70: 290d 0a20 2020 2020 2020 2030 2e37 3037  )..        0.707
+00020b80: 3130 3637 3831 3138 3635 3437 360d 0a20  1067811865476.. 
+00020b90: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00020ba0: 2020 2020 6b77 6172 6773 203d 2073 656c      kwargs = sel
+00020bb0: 662e 5f66 615f 6b65 7977 6f72 645f 7772  f._fa_keyword_wr
+00020bc0: 6170 7065 7228 6669 6c74 6572 3d66 696c  apper(filter=fil
+00020bd0: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
+00020be0: 2c20 6178 6973 3d61 7869 732c 206b 6565  , axis=axis, kee
+00020bf0: 7064 696d 733d 6b65 6570 6469 6d73 2c20  pdims=keepdims, 
+00020c00: 6464 6f66 3d64 646f 662c 202a 2a6b 7761  ddof=ddof, **kwa
+00020c10: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
+00020c20: 6966 2066 696c 7465 7220 6973 206e 6f74  if filter is not
+00020c30: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00020c40: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00020c50: 5f66 615f 6669 6c74 6572 5f77 7261 7070  _fa_filter_wrapp
+00020c60: 6572 285f 666e 616e 7374 642c 2066 696c  er(_fnanstd, fil
+00020c70: 7465 723d 6669 6c74 6572 2c20 6474 7970  ter=filter, dtyp
+00020c80: 653d 6474 7970 6529 0d0a 0d0a 2020 2020  e=dtype)....    
+00020c90: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00020ca0: 5f72 6564 7563 655f 6368 6563 6b28 5245  _reduce_check(RE
+00020cb0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00020cc0: 4544 5543 455f 4e41 4e53 5444 2c20 6e70  EDUCE_NANSTD, np
+00020cd0: 2e6e 616e 7374 642c 202a 2a6b 7761 7267  .nanstd, **kwarg
+00020ce0: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+00020cf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020d30: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00020d40: 206e 616e 6d69 6e28 7365 6c66 2c20 2a2a   nanmin(self, **
+00020d50: 6b77 6172 6773 2920 2d3e 206e 702e 6e75  kwargs) -> np.nu
+00020d60: 6d62 6572 3a0d 0a20 2020 2020 2020 2072  mber:..        r
+00020d70: 6574 7572 6e20 7365 6c66 2e5f 7265 6475  eturn self._redu
+00020d80: 6365 5f63 6865 636b 2852 4544 5543 455f  ce_check(REDUCE_
+00020d90: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00020da0: 5f4e 414e 4d49 4e2c 206e 702e 6e61 6e6d  _NANMIN, np.nanm
+00020db0: 696e 2c20 2a2a 6b77 6172 6773 290d 0a0d  in, **kwargs)...
+00020dc0: 0a20 2020 2064 6566 206e 616e 6d61 7828  .    def nanmax(
+00020dd0: 7365 6c66 2c20 2a2a 6b77 6172 6773 2920  self, **kwargs) 
+00020de0: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
+00020df0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00020e00: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
+00020e10: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
+00020e20: 532e 5245 4455 4345 5f4e 414e 4d41 582c  S.REDUCE_NANMAX,
+00020e30: 206e 702e 6e61 6e6d 6178 2c20 2a2a 6b77   np.nanmax, **kw
+00020e40: 6172 6773 290d 0a0d 0a20 2020 2023 202d  args)....    # -
+00020e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00020e90: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00020ea0: 6465 6620 6172 676d 696e 2873 656c 662c  def argmin(self,
+00020eb0: 202a 2a6b 7761 7267 7329 202d 3e20 696e   **kwargs) -> in
+00020ec0: 743a 0d0a 2020 2020 2020 2020 7265 7475  t:..        retu
+00020ed0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+00020ee0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+00020ef0: 4354 494f 4e53 2e52 4544 5543 455f 4152  CTIONS.REDUCE_AR
+00020f00: 474d 494e 2c20 6e70 2e61 7267 6d69 6e2c  GMIN, np.argmin,
+00020f10: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00020f20: 2020 6465 6620 6172 676d 6178 2873 656c    def argmax(sel
+00020f30: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00020f40: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
+00020f50: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
+00020f60: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
+00020f70: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00020f80: 4152 474d 4158 2c20 6e70 2e61 7267 6d61  ARGMAX, np.argma
+00020f90: 782c 202a 2a6b 7761 7267 7329 0d0a 0d0a  x, **kwargs)....
+00020fa0: 2020 2020 6465 6620 6e61 6e61 7267 6d69      def nanargmi
+00020fb0: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00020fc0: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
+00020fd0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00020fe0: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
+00020ff0: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00021000: 4455 4345 5f4e 414e 4152 474d 494e 2c20  DUCE_NANARGMIN, 
+00021010: 6e70 2e6e 616e 6172 676d 696e 2c20 2a2a  np.nanargmin, **
+00021020: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
+00021030: 6566 206e 616e 6172 676d 6178 2873 656c  ef nanargmax(sel
+00021040: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00021050: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
+00021060: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
+00021070: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
+00021080: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00021090: 4e41 4e41 5247 4d41 582c 206e 702e 6e61  NANARGMAX, np.na
+000210a0: 6e61 7267 6d61 782c 202a 2a6b 7761 7267  nargmax, **kwarg
+000210b0: 7329 0d0a 0d0a 2020 2020 2323 2323 2323  s)....    ######
+000210c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000210d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000210e0: 2323 2323 2323 230d 0a20 2020 2023 2053  #######..    # S
+000210f0: 7461 7473 2f4d 4c20 7365 6374 696f 6e0d  tats/ML section.
+00021100: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
+00021110: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021120: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021130: 2323 0d0a 2020 2020 6465 6620 6e6f 726d  ##..    def norm
+00021140: 616c 697a 655f 7a73 636f 7265 2873 656c  alize_zscore(sel
+00021150: 6629 202d 3e20 4661 7374 4172 7261 793a  f) -> FastArray:
+00021160: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00021170: 206e 6f72 6d61 6c69 7a65 5f7a 7363 6f72   normalize_zscor
+00021180: 6528 7365 6c66 290d 0a0d 0a20 2020 2064  e(self)....    d
+00021190: 6566 206e 6f72 6d61 6c69 7a65 5f6d 696e  ef normalize_min
+000211a0: 6d61 7828 7365 6c66 2920 2d3e 2046 6173  max(self) -> Fas
+000211b0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+000211c0: 2072 6574 7572 6e20 6e6f 726d 616c 697a   return normaliz
+000211d0: 655f 6d69 6e6d 6178 2873 656c 6629 0d0a  e_minmax(self)..
+000211e0: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
+000211f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021200: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021210: 2323 230d 0a20 2020 2023 2042 6173 6963  ###..    # Basic
+00021220: 4d61 7468 2073 6563 7469 6f6e 2028 746f  Math section (to
+00021230: 2062 6520 686f 6f6b 6564 2061 7420 4320   be hooked at C 
+00021240: 6c65 7665 6c20 6e6f 7729 0d0a 2020 2020  level now)..    
+00021250: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00021270: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+00021280: 2020 2023 2064 6566 205f 5f61 6464 5f5f     # def __add__
+00021290: 2873 656c 662c 2076 616c 7565 293a 2020  (self, value):  
+000212a0: 2072 6573 756c 743d 7263 2e42 6173 6963   result=rc.Basic
+000212b0: 4d61 7468 5477 6f49 6e70 7574 7328 2873  MathTwoInputs((s
+000212c0: 656c 662c 2076 616c 7565 292c 2031 2c20  elf, value), 1, 
+000212d0: 3029 3b20 7265 7375 6c74 3d20 7265 7375  0); result= resu
+000212e0: 6c74 2069 6620 7265 7375 6c74 2069 7320  lt if result is 
+000212f0: 6e6f 7420 4e6f 6e65 2065 6c73 6520 6e70  not None else np
+00021300: 2e61 6464 2873 656c 662c 7661 6c75 6529  .add(self,value)
+00021310: 3b20 7265 7475 726e 2072 6573 756c 740d  ; return result.
+00021320: 0a20 2020 2023 2064 6566 205f 5f61 6464  .    # def __add
+00021330: 5f5f 2873 656c 662c 2076 616c 7565 293a  __(self, value):
+00021340: 2020 2072 6574 7572 6e20 7263 2e42 6173     return rc.Bas
+00021350: 6963 4d61 7468 5477 6f49 6e70 7574 7328  icMathTwoInputs(
+00021360: 2873 656c 662c 2076 616c 7565 292c 2031  (self, value), 1
+00021370: 2c20 3029 0d0a 0d0a 2020 2020 4070 726f  , 0)....    @pro
+00021380: 7065 7274 790d 0a20 2020 2040 5f75 7365  perty..    @_use
+00021390: 5f61 7574 6f63 6f6d 706c 6574 655f 706c  _autocomplete_pl
+000213a0: 6163 6568 6f6c 6465 7228 3029 0d0a 2020  aceholder(0)..  
+000213b0: 2020 6465 6620 6372 6328 7365 6c66 2920    def crc(self) 
+000213c0: 2d3e 2069 6e74 3a0d 0a20 2020 2020 2020  -> int:..       
+000213d0: 2022 2222 0d0a 2020 2020 2020 2020 4361   """..        Ca
+000213e0: 6c63 756c 6174 6520 7468 6520 3332 2d62  lculate the 32-b
+000213f0: 6974 2043 5243 206f 6620 7468 6520 6461  it CRC of the da
+00021400: 7461 2069 6e20 7468 6973 2061 7272 6179  ta in this array
+00021410: 2075 7369 6e67 2074 6865 2043 6173 7461   using the Casta
+00021420: 676e 6f6c 6920 706f 6c79 6e6f 6d69 616c  gnoli polynomial
+00021430: 2028 4352 4333 3243 292e 0d0a 0d0a 2020   (CRC32C).....  
+00021440: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
+00021450: 696f 6e20 646f 6573 206e 6f74 2063 6f6e  ion does not con
+00021460: 7369 6465 7220 7468 6520 6172 7261 7927  sider the array'
+00021470: 7320 7368 6170 6520 6f72 2073 7472 6964  s shape or strid
+00021480: 6573 2077 6865 6e20 6361 6c63 756c 6174  es when calculat
+00021490: 696e 6720 7468 6520 4352 432c 0d0a 2020  ing the CRC,..  
+000214a0: 2020 2020 2020 6974 2073 696d 706c 7920        it simply 
+000214b0: 6361 6c63 756c 6174 6573 2074 6865 2043  calculates the C
+000214c0: 5243 2076 616c 7565 206f 7665 7220 7468  RC value over th
+000214d0: 6520 656e 7469 7265 2062 7566 6665 7220  e entire buffer 
+000214e0: 6465 7363 7269 6265 6420 6279 2074 6865  described by the
+000214f0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+00021500: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+00021510: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00021520: 2020 2020 2020 2063 616e 2062 6520 7573         can be us
+00021530: 6564 2074 6f20 636f 6d70 6172 6520 7477  ed to compare tw
+00021540: 6f20 6172 7261 7973 2066 6f72 2073 7472  o arrays for str
+00021550: 7563 7475 7261 6c20 6571 7561 6c69 7479  uctural equality
+00021560: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00021570: 3d20 6172 616e 6765 2831 3030 290d 0a20  = arange(100).. 
+00021580: 2020 2020 2020 203e 3e3e 2062 203d 2061         >>> b = a
+00021590: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
+000215a0: 2020 2020 2020 3e3e 3e20 612e 6372 6320        >>> a.crc 
+000215b0: 3d3d 2062 2e63 7263 0d0a 2020 2020 2020  == b.crc..      
+000215c0: 2020 4661 6c73 650d 0a20 2020 2020 2020    False..       
+000215d0: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+000215e0: 7475 726e 2063 7263 3332 6328 7365 6c66  turn crc32c(self
+000215f0: 290d 0a0d 0a20 2020 2023 2074 6f64 6f3a  )....    # todo:
+00021600: 2072 616e 6765 2f6e 616e 7261 6e67 650d   range/nanrange.
+00021610: 0a20 2020 2023 2074 6f64 6f3a 2073 7461  .    # todo: sta
+00021620: 7473 2f6e 616e 7374 6174 730d 0a0d 0a20  ts/nanstats.... 
+00021630: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00021640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00021670: 2020 6465 6620 756e 6971 7565 280d 0a20    def unique(.. 
+00021680: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+00021690: 2020 2020 2020 7265 7475 726e 5f69 6e64        return_ind
+000216a0: 6578 3a20 626f 6f6c 203d 2046 616c 7365  ex: bool = False
+000216b0: 2c0d 0a20 2020 2020 2020 2072 6574 7572  ,..        retur
+000216c0: 6e5f 696e 7665 7273 653a 2062 6f6f 6c20  n_inverse: bool 
+000216d0: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
+000216e0: 2020 7265 7475 726e 5f63 6f75 6e74 733a    return_counts:
+000216f0: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00021700: 2020 2020 2020 2020 736f 7274 6564 3a20          sorted: 
+00021710: 626f 6f6c 203d 2054 7275 652c 0d0a 2020  bool = True,..  
+00021720: 2020 2020 2020 6c65 783a 2062 6f6f 6c20        lex: bool 
+00021730: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
+00021740: 2020 6474 7970 653a 204f 7074 696f 6e61    dtype: Optiona
+00021750: 6c5b 556e 696f 6e5b 7374 722c 206e 702e  l[Union[str, np.
+00021760: 6474 7970 655d 5d20 3d20 4e6f 6e65 2c0d  dtype]] = None,.
+00021770: 0a20 2020 2020 2020 2066 696c 7465 723a  .        filter:
+00021780: 204f 7074 696f 6e61 6c5b 6e70 2e6e 6461   Optional[np.nda
+00021790: 7272 6179 5d20 3d20 4e6f 6e65 2c0d 0a20  rray] = None,.. 
+000217a0: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
+000217b0: 0d0a 2020 2020 2920 2d3e 2055 6e69 6f6e  ..    ) -> Union
+000217c0: 5b22 4661 7374 4172 7261 7922 2c20 5475  ["FastArray", Tu
+000217d0: 706c 655b 2246 6173 7441 7272 6179 222c  ple["FastArray",
+000217e0: 202e 2e2e 5d2c 204c 6973 745b 2246 6173   ...], List["Fas
+000217f0: 7441 7272 6179 225d 2c20 7475 706c 655d  tArray"], tuple]
+00021800: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00021810: 2020 2020 2020 2020 4669 6e64 2074 6865          Find the
+00021820: 2075 6e69 7175 6520 656c 656d 656e 7473   unique elements
+00021830: 206f 6620 616e 2061 7272 6179 206f 7220   of an array or 
+00021840: 7468 6520 756e 6971 7565 2063 6f6d 6269  the unique combi
+00021850: 6e61 7469 6f6e 7320 6f66 2065 6c65 6d65  nations of eleme
+00021860: 6e74 7320 7769 7468 0d0a 2020 2020 2020  nts with..      
+00021870: 2020 636f 7272 6573 706f 6e64 696e 6720    corresponding 
+00021880: 696e 6469 6365 7320 696e 206d 756c 7469  indices in multi
+00021890: 706c 6520 6172 7261 7973 2e0d 0a0d 0a20  ple arrays..... 
+000218a0: 2020 2020 2020 2053 6565 203a 6d65 7468         See :meth
+000218b0: 3a60 7269 7074 6162 6c65 2e75 6e69 7175  :`riptable.uniqu
+000218c0: 6560 2066 6f72 2066 756c 6c20 646f 6375  e` for full docu
+000218d0: 6d65 6e74 6174 696f 6e2e 0d0a 2020 2020  mentation...    
+000218e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000218f0: 2072 6574 7572 6e20 756e 6971 7565 280d   return unique(.
+00021900: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00021910: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+00021920: 7265 7475 726e 5f69 6e64 6578 3d72 6574  return_index=ret
+00021930: 7572 6e5f 696e 6465 782c 0d0a 2020 2020  urn_index,..    
+00021940: 2020 2020 2020 2020 7265 7475 726e 5f69          return_i
+00021950: 6e76 6572 7365 3d72 6574 7572 6e5f 696e  nverse=return_in
+00021960: 7665 7273 652c 0d0a 2020 2020 2020 2020  verse,..        
+00021970: 2020 2020 7265 7475 726e 5f63 6f75 6e74      return_count
+00021980: 733d 7265 7475 726e 5f63 6f75 6e74 732c  s=return_counts,
+00021990: 0d0a 2020 2020 2020 2020 2020 2020 736f  ..            so
+000219a0: 7274 6564 3d73 6f72 7465 642c 0d0a 2020  rted=sorted,..  
+000219b0: 2020 2020 2020 2020 2020 6c65 783d 6c65            lex=le
+000219c0: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
+000219d0: 6474 7970 653d 6474 7970 652c 0d0a 2020  dtype=dtype,..  
+000219e0: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
+000219f0: 3d66 696c 7465 722c 0d0a 2020 2020 2020  =filter,..      
+00021a00: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
+00021a10: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00021a20: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00021a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00021a60: 2064 6566 206e 756e 6971 7565 2873 656c   def nunique(sel
+00021a70: 6629 202d 3e20 696e 743a 0d0a 2020 2020  f) -> int:..    
+00021a80: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00021a90: 2052 6574 7572 6e20 7468 6520 6e75 6d62   Return the numb
+00021aa0: 6572 206f 6620 756e 6971 7565 2076 616c  er of unique val
+00021ab0: 7565 7320 696e 2074 6865 2069 6e70 7574  ues in the input
+00021ac0: 2060 4661 7374 4172 7261 7960 2e20 446f   `FastArray`. Do
+00021ad0: 6573 206e 6f74 2069 6e63 6c75 6465 204e  es not include N
+00021ae0: 614e 206f 7220 7365 6e74 696e 656c 2076  aN or sentinel v
+00021af0: 616c 7565 732e 0d0a 0d0a 2020 2020 2020  alues.....      
+00021b00: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+00021b10: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+00021b20: 2020 2020 696e 740d 0a20 2020 2020 2020      int..       
+00021b30: 2020 2020 204e 756d 6265 7220 6f66 2075       Number of u
+00021b40: 6e69 7175 6520 7661 6c75 6573 2069 6e20  nique values in 
+00021b50: 7468 6520 696e 7075 7420 6046 6173 7441  the input `FastA
+00021b60: 7272 6179 602e 2044 6f65 7320 6e6f 7420  rray`. Does not 
+00021b70: 696e 636c 7564 6520 4e61 4e20 6f72 2073  include NaN or s
+00021b80: 656e 7469 6e65 6c20 7661 6c75 6573 2e0d  entinel values..
+00021b90: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+00021ba0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+00021bb0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+00021bc0: 6173 7441 7272 6179 2e64 7570 6c69 6361  astArray.duplica
+00021bd0: 7465 6420 3a20 5265 7475 726e 7320 6120  ted : Returns a 
+00021be0: 626f 6f6c 6561 6e20 6046 6173 7441 7272  boolean `FastArr
+00021bf0: 6179 6020 696e 6469 6361 7469 6e67 2064  ay` indicating d
+00021c00: 7570 6c69 6361 7465 2076 616c 7565 732e  uplicate values.
+00021c10: 0d0a 2020 2020 2020 2020 2e43 6174 6567  ..        .Categ
+00021c20: 6f72 6963 616c 2e6e 756e 6971 7565 203a  orical.nunique :
+00021c30: 2052 6574 7572 6e73 2074 6865 206e 756d   Returns the num
+00021c40: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
+00021c50: 6c75 6573 2074 6861 7420 6f63 6375 7220  lues that occur 
+00021c60: 696e 2074 6865 2060 2e43 6174 6567 6f72  in the `.Categor
+00021c70: 6963 616c 602e 0d0a 0d0a 2020 2020 2020  ical`.....      
+00021c80: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+00021c90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00021ca0: 2020 2020 2020 5265 7472 6965 7665 2074        Retrieve t
+00021cb0: 6865 206e 756d 6265 7220 6f66 2075 6e69  he number of uni
+00021cc0: 7175 6520 7661 6c75 6573 2069 6e20 6120  que values in a 
+00021cd0: 666c 6f61 7469 6e67 2070 6f69 6e74 2060  floating point `
+00021ce0: 4661 7374 4172 7261 7960 3a0d 0a0d 0a20  FastArray`:.... 
+00021cf0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+00021d00: 742e 4661 7374 4172 7261 7928 5b31 2e2c  t.FastArray([1.,
+00021d10: 2032 2e2c 2033 2e2c 2031 2e2c 2032 2e2c   2., 3., 1., 2.,
+00021d20: 2033 2e5d 290d 0a20 2020 2020 2020 203e   3.])..        >
+00021d30: 3e3e 2061 0d0a 2020 2020 2020 2020 4661  >> a..        Fa
+00021d40: 7374 4172 7261 7928 5b31 2e2c 2032 2e2c  stArray([1., 2.,
+00021d50: 2033 2e2c 2031 2e2c 2032 2e2c 2033 2e5d   3., 1., 2., 3.]
+00021d60: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00021d70: 2e6e 756e 6971 7565 2829 0d0a 2020 2020  .nunique()..    
+00021d80: 2020 2020 330d 0a0d 0a20 2020 2020 2020      3....       
+00021d90: 2052 6574 7269 6576 6520 7468 6520 6e75   Retrieve the nu
+00021da0: 6d62 6572 206f 6620 756e 6971 7565 2076  mber of unique v
+00021db0: 616c 7565 7320 696e 2061 2066 6c6f 6174  alues in a float
+00021dc0: 696e 6720 706f 696e 7420 6046 6173 7441  ing point `FastA
+00021dd0: 7272 6179 6020 7769 7468 2061 204e 614e  rray` with a NaN
+00021de0: 2076 616c 7565 3a0d 0a0d 0a20 2020 2020   value:....     
+00021df0: 2020 203e 3e3e 2061 3220 3d20 7274 2e46     >>> a2 = rt.F
+00021e00: 6173 7441 7272 6179 285b 312e 2c20 322e  astArray([1., 2.
+00021e10: 2c20 332e 2c20 312e 2c20 322e 2c20 332e  , 3., 1., 2., 3.
+00021e20: 2c20 7274 2e6e 616e 5d29 0d0a 2020 2020  , rt.nan])..    
+00021e30: 2020 2020 3e3e 3e20 6132 0d0a 2020 2020      >>> a2..    
+00021e40: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
+00021e50: 312e 2c20 2032 2e2c 2020 332e 2c20 2031  1.,  2.,  3.,  1
+00021e60: 2e2c 2020 322e 2c20 2033 2e2c 206e 616e  .,  2.,  3., nan
+00021e70: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00021e80: 6132 2e6e 756e 6971 7565 2829 2020 2320  a2.nunique()  # 
+00021e90: 5468 6520 4e61 4e20 7661 6c75 6520 6973  The NaN value is
+00021ea0: 206e 6f74 2069 6e63 6c75 6465 642e 0d0a   not included...
+00021eb0: 2020 2020 2020 2020 330d 0a0d 0a20 2020          3....   
+00021ec0: 2020 2020 2052 6574 7269 6576 6520 7468       Retrieve th
+00021ed0: 6520 6e75 6d62 6572 206f 6620 756e 6971  e number of uniq
+00021ee0: 7565 2076 616c 7565 7320 696e 2061 6e20  ue values in an 
+00021ef0: 756e 7369 676e 6564 2069 6e74 6567 6572  unsigned integer
+00021f00: 2060 4661 7374 4172 7261 7960 2077 6974   `FastArray` wit
+00021f10: 6820 6120 7365 6e74 696e 656c 2076 616c  h a sentinel val
+00021f20: 7565 3a0d 0a0d 0a20 2020 2020 2020 203e  ue:....        >
+00021f30: 3e3e 2061 3320 3d20 7274 2e46 6173 7441  >> a3 = rt.FastA
+00021f40: 7272 6179 285b 3235 352c 2032 2c20 332c  rray([255, 2, 3,
+00021f50: 2032 2c20 335d 2c20 6474 7970 653d 2275   2, 3], dtype="u
+00021f60: 696e 7438 2229 0d0a 2020 2020 2020 2020  int8")..        
+00021f70: 3e3e 3e20 6133 0d0a 2020 2020 2020 2020  >>> a3..        
+00021f80: 4661 7374 4172 7261 7928 5b32 3535 2c20  FastArray([255, 
+00021f90: 2020 322c 2020 2033 2c20 2020 322c 2020    2,   3,   2,  
+00021fa0: 2033 5d2c 2064 7479 7065 3d75 696e 7438   3], dtype=uint8
+00021fb0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00021fc0: 332e 6e75 6e69 7175 6528 2920 2023 2054  3.nunique()  # T
+00021fd0: 6865 2073 656e 7469 6e65 6c20 7661 6c75  he sentinel valu
+00021fe0: 6520 6973 206e 6f74 2069 6e63 6c75 6465  e is not include
+00021ff0: 642e 0d0a 2020 2020 2020 2020 320d 0a20  d...        2.. 
+00022000: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00022010: 2020 2020 756e 203d 2075 6e69 7175 6528      un = unique(
+00022020: 7365 6c66 290d 0a20 2020 2020 2020 2063  self)..        c
+00022030: 6f75 6e74 203d 206c 656e 2875 6e29 0d0a  ount = len(un)..
+00022040: 2020 2020 2020 2020 6966 2063 6f75 6e74          if count
+00022050: 203e 2030 3a0d 0a20 2020 2020 2020 2020   > 0:..         
+00022060: 2020 2023 2075 6e69 7175 6520 6973 2073     # unique is s
+00022070: 6f72 7465 642c 2073 6f20 6368 6563 6b20  orted, so check 
+00022080: 666f 7220 7365 6e74 696e 656c 2062 6173  for sentinel bas
+00022090: 6564 206f 6e20 6474 7970 650d 0a20 2020  ed on dtype..   
+000220a0: 2020 2020 2020 2020 2069 6e76 203d 2049           inv = I
+000220b0: 4e56 414c 4944 5f44 4943 545b 7365 6c66  NVALID_DICT[self
+000220c0: 2e64 7479 7065 2e6e 756d 5d0d 0a20 2020  .dtype.num]..   
+000220d0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000220e0: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
+000220f0: 756d 7079 4368 6172 5479 7065 732e 416c  umpyCharTypes.Al
+00022100: 6c46 6c6f 6174 3a0d 0a20 2020 2020 2020  lFloat:..       
+00022110: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+00022120: 2069 6620 6c61 7374 2069 7465 6d20 6973   if last item is
+00022130: 206e 616e 0d0a 2020 2020 2020 2020 2020   nan..          
+00022140: 2020 2020 2020 6966 2075 6e5b 636f 756e        if un[coun
+00022150: 7420 2d20 315d 2021 3d20 756e 5b63 6f75  t - 1] != un[cou
+00022160: 6e74 202d 2031 5d3a 0d0a 2020 2020 2020  nt - 1]:..      
+00022170: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00022180: 756e 7420 2d3d 2031 0d0a 2020 2020 2020  unt -= 1..      
+00022190: 2020 2020 2020 2320 756e 7369 676e 6564        # unsigned
+000221a0: 2069 6e74 2075 7365 7320 6869 6768 206e   int uses high n
+000221b0: 756d 6265 7220 6173 2073 656e 7469 6e65  umber as sentine
+000221c0: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
+000221d0: 6c69 6620 7365 6c66 2e64 7479 7065 2e63  lif self.dtype.c
+000221e0: 6861 7220 696e 204e 756d 7079 4368 6172  har in NumpyChar
+000221f0: 5479 7065 732e 556e 7369 676e 6564 496e  Types.UnsignedIn
+00022200: 7465 6765 723a 0d0a 2020 2020 2020 2020  teger:..        
+00022210: 2020 2020 2020 2020 6966 2075 6e5b 636f          if un[co
+00022220: 756e 7420 2d20 315d 203d 3d20 696e 763a  unt - 1] == inv:
+00022230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00022240: 2020 2020 2020 636f 756e 7420 2d3d 2031        count -= 1
+00022250: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00022260: 616c 6c20 6f74 6865 7220 7365 6e74 696e  all other sentin
+00022270: 656c 7320 6172 6520 6c6f 7765 7374 206e  els are lowest n
+00022280: 756d 6265 720d 0a20 2020 2020 2020 2020  umber..         
+00022290: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+000222a0: 2020 2020 2020 2020 2020 6966 2075 6e5b            if un[
+000222b0: 305d 203d 3d20 696e 763a 0d0a 2020 2020  0] == inv:..    
+000222c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000222d0: 636f 756e 7420 2d3d 2031 0d0a 2020 2020  count -= 1..    
+000222e0: 2020 2020 7265 7475 726e 2063 6f75 6e74      return count
+000222f0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00022300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022330: 2d0d 0a20 2020 2064 6566 2073 6561 7263  -..    def searc
+00022340: 6873 6f72 7465 6428 7365 6c66 2c20 762c  hsorted(self, v,
+00022350: 2073 6964 653d 226c 6566 7422 2c20 736f   side="left", so
+00022360: 7274 6572 3d4e 6f6e 6529 202d 3e20 6e70  rter=None) -> np
+00022370: 2e6e 756d 6265 723a 0d0a 2020 2020 2020  .number:..      
+00022380: 2020 7265 7475 726e 205f 7365 6172 6368    return _search
+00022390: 736f 7274 6564 2873 656c 662c 2076 2c20  sorted(self, v, 
+000223a0: 7369 6465 3d73 6964 652c 2073 6f72 7465  side=side, sorte
+000223b0: 723d 736f 7274 6572 290d 0a0d 0a20 2020  r=sorter)....   
+000223c0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+000223d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000223e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000223f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00022410: 2020 2020 6465 6620 6d61 705f 6f6c 6428      def map_old(
+00022420: 7365 6c66 2c20 6e70 6469 6374 3a20 6469  self, npdict: di
+00022430: 6374 293a 0d0a 2020 2020 2020 2020 2222  ct):..        ""
+00022440: 220d 0a20 2020 2020 2020 2045 7861 6d70  "..        Examp
+00022450: 6c65 0d0a 2020 2020 2020 2020 2d2d 2d2d  le..        ----
+00022460: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+00022470: 2064 203d 207b 313a 3130 2c20 323a 3230   d = {1:10, 2:20
+00022480: 7d0d 0a20 2020 2020 2020 203e 3e3e 2064  }..        >>> d
+00022490: 6174 5b27 6327 5d20 3d20 6461 742e 612e  at['c'] = dat.a.
+000224a0: 6d61 7028 6429 0d0a 2020 2020 2020 2020  map(d)..        
+000224b0: 3e3e 3e20 7072 696e 7428 6461 7429 0d0a  >>> print(dat)..
+000224c0: 2020 2020 2020 2020 2020 2061 2020 6220             a  b 
+000224d0: 2020 6362 2020 2063 0d0a 2020 2020 2020    cb   c..      
+000224e0: 2020 3020 2031 2020 3020 2030 2e30 2020    0  1  0  0.0  
+000224f0: 3130 0d0a 2020 2020 2020 2020 3120 2031  10..        1  1
+00022500: 2020 3120 2031 2e30 2020 3130 0d0a 2020    1  1.0  10..  
+00022510: 2020 2020 2020 3220 2031 2020 3220 2033        2  1  2  3
+00022520: 2e30 2020 3130 0d0a 2020 2020 2020 2020  .0  10..        
+00022530: 3320 2032 2020 3320 2035 2e30 2020 3230  3  2  3  5.0  20
+00022540: 0d0a 2020 2020 2020 2020 3420 2032 2020  ..        4  2  
+00022550: 3420 2037 2e30 2020 3230 0d0a 2020 2020  4  7.0  20..    
+00022560: 2020 2020 3520 2032 2020 3520 2039 2e30      5  2  5  9.0
+00022570: 2020 3230 0d0a 2020 2020 2020 2020 2222    20..        ""
+00022580: 220d 0a20 2020 2020 2020 206f 7574 4172  "..        outAr
+00022590: 7261 7920 3d20 7365 6c66 2e63 6f70 7928  ray = self.copy(
+000225a0: 290d 0a20 2020 2020 2020 2066 6f72 206b  )..        for k
+000225b0: 2c20 7620 696e 206e 7064 6963 742e 6974  , v in npdict.it
+000225c0: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
+000225d0: 2020 2020 6f75 7441 7272 6179 5b73 656c      outArray[sel
+000225e0: 6620 3d3d 206b 5d20 3d20 760d 0a20 2020  f == k] = v..   
+000225f0: 2020 2020 2072 6574 7572 6e20 6f75 7441       return outA
+00022600: 7272 6179 0d0a 0d0a 2020 2020 6465 6620  rray....    def 
+00022610: 6d61 7028 7365 6c66 2c20 6e70 6469 6374  map(self, npdict
+00022620: 3a20 6469 6374 2920 2d3e 2046 6173 7441  : dict) -> FastA
+00022630: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+00022640: 2222 0d0a 2020 2020 2020 2020 4e6f 7465  ""..        Note
+00022650: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00022660: 0d0a 2020 2020 2020 2020 5573 6573 2069  ..        Uses i
+00022670: 736d 656d 6265 7220 616e 6420 6361 6e20  smember and can 
+00022680: 6861 6e64 6c65 206c 6172 6765 2064 6963  handle large dic
+00022690: 7469 6f6e 6172 6965 730d 0a0d 0a20 2020  tionaries....   
+000226a0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+000226b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000226c0: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+000226d0: 7261 6e67 6528 3329 0d0a 2020 2020 2020  range(3)..      
+000226e0: 2020 3e3e 3e20 612e 6d61 7028 7b31 3a20    >>> a.map({1: 
+000226f0: 2761 272c 2032 3a27 6227 2c20 333a 2763  'a', 2:'b', 3:'c
+00022700: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
+00022710: 7441 7272 6179 285b 2727 2c20 2761 272c  tArray(['', 'a',
+00022720: 2027 6227 5d2c 2064 7479 7065 3d27 3c55   'b'], dtype='<U
+00022730: 3127 290d 0a20 2020 2020 2020 203e 3e3e  1')..        >>>
+00022740: 2061 3d61 7261 6e67 6528 3329 2b31 0d0a   a=arange(3)+1..
+00022750: 2020 2020 2020 2020 3e3e 3e20 612e 6d61          >>> a.ma
+00022760: 7028 7b31 3a20 2761 272c 2032 3a27 6227  p({1: 'a', 2:'b'
+00022770: 2c20 333a 2763 277d 290d 0a20 2020 2020  , 3:'c'})..     
+00022780: 2020 2046 6173 7441 7272 6179 285b 2761     FastArray(['a
+00022790: 272c 2027 6227 2c20 2763 275d 2c20 6474  ', 'b', 'c'], dt
+000227a0: 7970 653d 273c 5531 2729 0d0a 2020 2020  ype='<U1')..    
+000227b0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000227c0: 206f 7269 6720 3d20 4661 7374 4172 7261   orig = FastArra
+000227d0: 7928 5b2a 6e70 6469 6374 5d2c 2075 6e69  y([*npdict], uni
+000227e0: 636f 6465 3d54 7275 6529 0d0a 2020 2020  code=True)..    
+000227f0: 2020 2020 7265 706c 6163 6520 3d20 4661      replace = Fa
+00022800: 7374 4172 7261 7928 5b2a 6e70 6469 6374  stArray([*npdict
+00022810: 2e76 616c 7565 7328 295d 2c20 756e 6963  .values()], unic
+00022820: 6f64 653d 5472 7565 290d 0a20 2020 2020  ode=True)..     
+00022830: 2020 206f 7574 4172 7261 7920 3d20 7365     outArray = se
+00022840: 6c66 2e66 696c 6c5f 696e 7661 6c69 6428  lf.fill_invalid(
+00022850: 7365 6c66 2e73 6861 7065 2c20 6474 7970  self.shape, dtyp
+00022860: 653d 7265 706c 6163 652e 6474 7970 652c  e=replace.dtype,
+00022870: 2069 6e70 6c61 6365 3d46 616c 7365 290d   inplace=False).
+00022880: 0a20 2020 2020 2020 2066 6f75 6e64 2c20  .        found, 
+00022890: 6964 7820 3d20 6973 6d65 6d62 6572 2873  idx = ismember(s
+000228a0: 656c 662c 206f 7269 6729 0d0a 2020 2020  elf, orig)..    
+000228b0: 2020 2020 6f75 7441 7272 6179 5b66 6f75      outArray[fou
+000228c0: 6e64 5d20 3d20 7265 706c 6163 655b 6964  nd] = replace[id
+000228d0: 785b 666f 756e 645d 5d0d 0a20 2020 2020  x[found]]..     
+000228e0: 2020 2072 6574 7572 6e20 6f75 7441 7272     return outArr
+000228f0: 6179 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ay....    # ----
+00022900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022940: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00022950: 2073 6869 6674 2873 656c 662c 2070 6572   shift(self, per
+00022960: 696f 6473 3d31 2c20 696e 7661 6c69 643d  iods=1, invalid=
+00022970: 4e6f 6e65 2920 2d3e 2046 6173 7441 7272  None) -> FastArr
+00022980: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+00022990: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000229a0: 2061 2073 6869 6674 6564 2060 4661 7374   a shifted `Fast
+000229b0: 4172 7261 7960 2e20 5370 6163 6573 2061  Array`. Spaces a
+000229c0: 7420 6569 7468 6572 2065 6e64 2028 6672  t either end (fr
+000229d0: 6f6d 2073 6869 6674 696e 6729 2061 7265  om shifting) are
+000229e0: 2066 696c 6c65 6420 7769 7468 2069 6e76   filled with inv
+000229f0: 616c 6964 2076 616c 7565 7320 6261 7365  alid values base
+00022a00: 6420 6f6e 2074 6865 2069 6e70 7574 2061  d on the input a
+00022a10: 7272 6179 2773 2064 6174 6120 7479 7065  rray's data type
+00022a20: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00022a30: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00022a40: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00022a50: 2020 2020 2070 6572 696f 6473 3a20 696e       periods: in
+00022a60: 742c 2064 6566 6175 6c74 2031 0d0a 2020  t, default 1..  
+00022a70: 2020 2020 2020 2020 2020 4e75 6d62 6572            Number
+00022a80: 206f 6620 656c 656d 656e 7420 706f 7369   of element posi
+00022a90: 7469 6f6e 7320 746f 2073 6869 6674 2072  tions to shift r
+00022aa0: 6967 6874 2028 6966 2070 6f73 6974 6976  ight (if positiv
+00022ab0: 6529 206f 7220 6c65 6674 2028 6966 206e  e) or left (if n
+00022ac0: 6567 6174 6976 6529 2e0d 0a0d 0a20 2020  egative).....   
+00022ad0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00022ae0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00022af0: 2020 2020 2020 2041 2073 6869 6674 6564         A shifted
+00022b00: 2060 4661 7374 4172 7261 7960 2e20 5370   `FastArray`. Sp
+00022b10: 6163 6573 2061 7420 6569 7468 6572 2065  aces at either e
+00022b20: 6e64 2028 6672 6f6d 2073 6869 6674 696e  nd (from shiftin
+00022b30: 6729 2061 7265 2066 696c 6c65 6420 7769  g) are filled wi
+00022b40: 7468 2069 6e76 616c 6964 2076 616c 7565  th invalid value
+00022b50: 7320 6261 7365 6420 6f6e 2074 6865 2069  s based on the i
+00022b60: 6e70 7574 2061 7272 6179 2773 2064 6174  nput array's dat
+00022b70: 6120 7479 7065 2e0d 0a0d 0a20 2020 2020  a type.....     
+00022b80: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00022b90: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00022ba0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00022bb0: 2e64 6966 6620 3a20 5265 7475 726e 7320  .diff : Returns 
+00022bc0: 6120 6046 6173 7441 7272 6179 6020 636f  a `FastArray` co
+00022bd0: 6e74 6169 6e69 6e67 2074 6865 2064 6966  ntaining the dif
+00022be0: 6665 7265 6e63 6573 2062 6574 7765 656e  ferences between
+00022bf0: 2061 646a 6163 656e 7420 696e 7075 7420   adjacent input 
+00022c00: 6172 7261 7920 7661 6c75 6573 2e0d 0a20  array values... 
+00022c10: 2020 2020 2020 202e 4361 7465 676f 7269         .Categori
+00022c20: 6361 6c2e 7368 6966 7420 3a20 5368 6966  cal.shift : Shif
+00022c30: 7473 2076 616c 7565 7320 696e 2074 6865  ts values in the
+00022c40: 2060 2e43 6174 6567 6f72 6963 616c 6020   `.Categorical` 
+00022c50: 6279 2061 2073 7065 6369 6669 6564 206e  by a specified n
+00022c60: 756d 6265 7220 6f66 2070 6572 696f 6473  umber of periods
+00022c70: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+00022c80: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+00022c90: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00022ca0: 2053 6869 6674 2061 7272 6179 2065 6c65   Shift array ele
+00022cb0: 6d65 6e74 7320 6f6e 6520 706f 7369 7469  ments one positi
+00022cc0: 6f6e 2074 6f20 7468 6520 7269 6768 743a  on to the right:
+00022cd0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00022ce0: 613d 7274 2e46 4128 5b30 2c20 322c 2034  a=rt.FA([0, 2, 4
+00022cf0: 2c20 382c 2031 362c 2033 325d 290d 0a20  , 8, 16, 32]).. 
+00022d00: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+00022d10: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00022d20: 5b20 302c 2020 322c 2020 342c 2020 382c  [ 0,  2,  4,  8,
+00022d30: 2031 362c 2033 325d 290d 0a20 2020 2020   16, 32])..     
+00022d40: 2020 203e 3e3e 2061 2e73 6869 6674 2829     >>> a.shift()
+00022d50: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00022d60: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
+00022d70: 2c20 2020 2020 2020 2020 2020 302c 2020  ,           0,  
+00022d80: 2020 2020 2020 2020 2032 2c20 2020 2020           2,     
+00022d90: 2020 2020 2020 342c 0d0a 2020 2020 2020        4,..      
+00022da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022db0: 2020 2020 2020 2038 2c20 2020 2020 2020         8,       
+00022dc0: 2020 2031 365d 290d 0a0d 0a20 2020 2020     16])....     
+00022dd0: 2020 2053 6869 6674 2061 7272 6179 2065     Shift array e
+00022de0: 6c65 6d65 6e74 7320 7477 6f20 706f 7369  lements two posi
+00022df0: 7469 6f6e 7320 746f 2074 6865 206c 6566  tions to the lef
+00022e00: 743a 0d0a 0d0a 2020 2020 2020 2020 3e3e  t:....        >>
+00022e10: 3e20 612e 7368 6966 7428 2d32 290d 0a20  > a.shift(-2).. 
+00022e20: 2020 2020 2020 203e 3e3e 2046 6173 7441         >>> FastA
+00022e30: 7272 6179 285b 2020 2020 2020 2020 2020  rray([          
+00022e40: 342c 2020 2020 2020 2020 2020 2038 2c20  4,           8, 
+00022e50: 2020 2020 2020 2020 2031 362c 2020 2020           16,    
+00022e60: 2020 2020 2020 3332 2c0d 0a20 2020 2020        32,..     
+00022e70: 2020 2020 2020 2020 2020 2020 2020 2d32                -2
+00022e80: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
+00022e90: 3438 3336 3438 5d29 0d0a 0d0a 2020 2020  483648])....    
+00022ea0: 2020 2020 5370 6563 6966 7920 6120 7368      Specify a sh
+00022eb0: 6966 7420 7661 6c75 6520 6772 6561 7465  ift value greate
+00022ec0: 7220 7468 616e 2074 6865 2061 7272 6179  r than the array
+00022ed0: 206c 656e 6774 683a 0d0a 0d0a 2020 2020   length:....    
+00022ee0: 2020 2020 3e3e 3e20 612e 7368 6966 7428      >>> a.shift(
+00022ef0: 3130 290d 0a20 2020 2020 2020 2046 6173  10)..        Fas
+00022f00: 7441 7272 6179 285b 2d32 3134 3734 3833  tArray([-2147483
+00022f10: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
+00022f20: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
+00022f30: 3231 3437 3438 3336 3438 2c0d 0a20 2020  2147483648,..   
+00022f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022f50: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
+00022f60: 3437 3438 3336 3438 5d29 0d0a 2020 2020  47483648])..    
+00022f70: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00022f80: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
+00022f90: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00022fa0: 2072 6574 7572 6e20 7365 6c66 0d0a 0d0a   return self....
+00022fb0: 2020 2020 2020 2020 6966 2069 6e76 616c          if inval
+00022fc0: 6964 2069 7320 4e6f 6e65 3a0d 0a20 2020  id is None:..   
+00022fd0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00022fe0: 7374 616e 6365 2873 656c 662c 2054 7970  stance(self, Typ
+00022ff0: 6552 6567 6973 7465 722e 4361 7465 676f  eRegister.Catego
+00023000: 7269 6361 6c29 3a0d 0a20 2020 2020 2020  rical):..       
+00023010: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
+00023020: 203d 2030 0d0a 2020 2020 2020 2020 2020   = 0..          
+00023030: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00023040: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00023050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023060: 2020 2069 6e76 616c 6964 203d 2049 4e56     invalid = INV
+00023070: 414c 4944 5f44 4943 545b 7365 6c66 2e64  ALID_DICT[self.d
+00023080: 7479 7065 2e6e 756d 5d0d 0a20 2020 2020  type.num]..     
+00023090: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000230a0: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+000230b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000230c0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
+000230d0: 7228 6622 7368 6966 7420 646f 6573 206e  r(f"shift does n
+000230e0: 6f74 2073 7570 706f 7274 2074 6865 2064  ot support the d
+000230f0: 7479 7065 207b 7365 6c66 2e64 7479 7065  type {self.dtype
+00023100: 2e6e 616d 6521 727d 2229 0d0a 0d0a 2020  .name!r}")....  
+00023110: 2020 2020 2020 2320 7765 206b 6e6f 7720        # we know 
+00023120: 7468 6174 2074 6869 7320 6973 2061 2073  that this is a s
+00023130: 696d 706c 6520 7665 6374 6f72 3a20 7368  imple vector: sh
+00023140: 6170 6520 3d3d 2028 6c65 6e2c 2029 0d0a  ape == (len, )..
+00023150: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00023160: 6765 7420 7265 6379 636c 6564 0d0a 2020  get recycled..  
+00023170: 2020 2020 2020 7465 6d70 203d 2065 6d70        temp = emp
+00023180: 7479 5f6c 696b 6528 7365 6c66 290d 0a20  ty_like(self).. 
+00023190: 2020 2020 2020 2069 6620 6162 7328 7065         if abs(pe
+000231a0: 7269 6f64 7329 203e 3d20 6c65 6e28 7365  riods) >= len(se
+000231b0: 6c66 293a 0d0a 2020 2020 2020 2020 2020  lf):..          
+000231c0: 2020 7465 6d70 2e66 696c 6c28 696e 7661    temp.fill(inva
+000231d0: 6c69 6429 0d0a 2020 2020 2020 2020 656c  lid)..        el
+000231e0: 6966 2070 6572 696f 6473 203e 2030 3a0d  if periods > 0:.
+000231f0: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00023200: 705b 3a70 6572 696f 6473 5d20 3d20 696e  p[:periods] = in
+00023210: 7661 6c69 640d 0a20 2020 2020 2020 2020  valid..         
+00023220: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
+00023230: 5d20 3d20 7365 6c66 5b3a 2d70 6572 696f  ] = self[:-perio
+00023240: 6473 5d0d 0a20 2020 2020 2020 2065 6c73  ds]..        els
+00023250: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00023260: 7465 6d70 5b3a 7065 7269 6f64 735d 203d  temp[:periods] =
+00023270: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
+00023280: 0d0a 2020 2020 2020 2020 2020 2020 7465  ..            te
+00023290: 6d70 5b70 6572 696f 6473 3a5d 203d 2069  mp[periods:] = i
+000232a0: 6e76 616c 6964 0d0a 0d0a 2020 2020 2020  nvalid....      
+000232b0: 2020 2320 746f 2072 6577 7261 7020 6361    # to rewrap ca
+000232c0: 7465 676f 7269 6361 6c73 206f 7220 6461  tegoricals or da
+000232d0: 7465 6c69 6b65 0d0a 2020 2020 2020 2020  telike..        
+000232e0: 6966 2068 6173 6174 7472 2873 656c 662c  if hasattr(self,
+000232f0: 2022 6e65 7763 6c61 7373 6672 6f6d 696e   "newclassfromin
+00023300: 7374 616e 6365 2229 3a0d 0a20 2020 2020  stance"):..     
+00023310: 2020 2020 2020 2074 656d 7020 3d20 7365         temp = se
+00023320: 6c66 2e6e 6577 636c 6173 7366 726f 6d69  lf.newclassfromi
+00023330: 6e73 7461 6e63 6528 7465 6d70 2c20 7365  nstance(temp, se
+00023340: 6c66 290d 0a0d 0a20 2020 2020 2020 2072  lf)....        r
+00023350: 6574 7572 6e20 7465 6d70 0d0a 0d0a 2020  eturn temp....  
+00023360: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00023370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+000233a0: 2064 6566 205f 696e 7465 726e 616c 5f73   def _internal_s
+000233b0: 656c 665f 636f 6d70 6172 6528 7365 6c66  elf_compare(self
+000233c0: 2c20 6d61 7468 5f6f 702c 2070 6572 696f  , math_op, perio
+000233d0: 6473 3d31 2c20 6661 6e63 793d 4661 6c73  ds=1, fancy=Fals
+000233e0: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+000233f0: 696e 7465 726e 616c 2072 6f75 7469 6e65  internal routine
+00023400: 2075 7365 6420 666f 7220 6469 6666 6572   used for differ
+00023410: 7320 616e 6420 7472 616e 7369 7469 6f6e  s and transition
+00023420: 7322 2222 0d0a 2020 2020 2020 2020 7265  s"""..        re
+00023430: 7375 6c74 203d 2065 6d70 7479 5f6c 696b  sult = empty_lik
+00023440: 6528 7365 6c66 2c20 6474 7970 653d 6e70  e(self, dtype=np
+00023450: 2e62 6f6f 6c5f 290d 0a0d 0a20 2020 2020  .bool_)....     
+00023460: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
+00023470: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00023480: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00023490: 7228 2270 6572 696f 6473 206f 6620 3020  r("periods of 0 
+000234a0: 6973 2069 6e76 616c 6964 2066 6f72 2074  is invalid for t
+000234b0: 7261 6e73 6974 696f 6e73 2229 0d0a 0d0a  ransitions")....
+000234c0: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
+000234d0: 6473 203e 2030 3a0d 0a20 2020 2020 2020  ds > 0:..       
+000234e0: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
+000234f0: 722e 4d61 7468 4c65 6467 6572 2e5f 4241  r.MathLedger._BA
+00023500: 5349 434d 4154 485f 5457 4f5f 494e 5055  SICMATH_TWO_INPU
+00023510: 5453 280d 0a20 2020 2020 2020 2020 2020  TS(..           
+00023520: 2020 2020 2028 7365 6c66 5b70 6572 696f       (self[perio
+00023530: 6473 3a5d 2c20 7365 6c66 5b3a 2d70 6572  ds:], self[:-per
+00023540: 696f 6473 5d2c 2072 6573 756c 745b 7065  iods], result[pe
+00023550: 7269 6f64 733a 5d29 2c20 6d61 7468 5f6f  riods:]), math_o
+00023560: 702c 2030 0d0a 2020 2020 2020 2020 2020  p, 0..          
+00023570: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00023580: 2023 2066 696c 6c20 7570 6672 6f6e 7420   # fill upfront 
+00023590: 7769 7468 2069 6e76 616c 6964 730d 0a20  with invalids.. 
+000235a0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000235b0: 745b 3a70 6572 696f 6473 5d20 3d20 4661  t[:periods] = Fa
+000235c0: 6c73 650d 0a20 2020 2020 2020 2065 6c73  lse..        els
+000235d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000235e0: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+000235f0: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
+00023600: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
+00023610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023620: 2873 656c 665b 3a70 6572 696f 6473 5d2c  (self[:periods],
+00023630: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
+00023640: 2c20 7265 7375 6c74 5b3a 7065 7269 6f64  , result[:period
+00023650: 735d 292c 206d 6174 685f 6f70 2c20 300d  s]), math_op, 0.
+00023660: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00023670: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
+00023680: 6c6c 2062 6163 6b20 7769 7468 2069 6e76  ll back with inv
+00023690: 616c 6964 7320 2870 6572 696f 6473 2069  alids (periods i
+000236a0: 7320 6e65 6761 7469 7665 290d 0a20 2020  s negative)..   
+000236b0: 2020 2020 2020 2020 2072 6573 756c 745b           result[
+000236c0: 7065 7269 6f64 733a 5d20 3d20 4661 6c73  periods:] = Fals
+000236d0: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+000236e0: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
+000236f0: 2020 2020 7265 7475 726e 2062 6f6f 6c5f      return bool_
+00023700: 746f 5f66 616e 6379 2872 6573 756c 7429  to_fancy(result)
+00023710: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00023720: 2072 6573 756c 740d 0a0d 0a20 2020 2023   result....    #
+00023730: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00023740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023760: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+00023770: 6620 6469 6666 6572 7328 7365 6c66 2c20  f differs(self, 
+00023780: 7065 7269 6f64 733d 312c 2066 616e 6379  periods=1, fancy
+00023790: 3d46 616c 7365 2920 2d3e 2046 6173 7441  =False) -> FastA
+000237a0: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+000237b0: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+000237c0: 726e 7320 6120 626f 6f6c 6561 6e20 6172  rns a boolean ar
+000237d0: 7261 792e 0d0a 2020 2020 2020 2020 5468  ray...        Th
+000237e0: 6520 626f 6f6c 6561 6e20 6172 7261 7920  e boolean array 
+000237f0: 6973 2073 6574 2074 6f20 5472 7565 2077  is set to True w
+00023800: 6865 6e20 7468 6520 7072 6576 696f 7573  hen the previous
+00023810: 2069 7465 6d20 696e 2074 6865 2061 7272   item in the arr
+00023820: 6179 2065 7175 616c 7320 7468 6520 6375  ay equals the cu
+00023830: 7272 656e 742e 0d0a 2020 2020 2020 2020  rrent...        
+00023840: 5573 6520 2d31 2069 6e73 7465 6164 206f  Use -1 instead o
+00023850: 6620 3120 6966 2079 6f75 2077 616e 7420  f 1 if you want 
+00023860: 5472 7565 2073 6574 2077 6865 6e20 7468  True set when th
+00023870: 6520 6e65 7874 2069 7465 6d20 696e 2074  e next item in t
+00023880: 6865 2061 7272 6179 2065 7175 616c 7320  he array equals 
+00023890: 7468 6520 7072 6576 696f 7573 2e0d 0a20  the previous... 
+000238a0: 2020 2020 2020 2053 6565 2061 6c73 6f3a         See also:
+000238b0: 2060 6074 7261 6e73 6974 696f 6e73 6060   ``transitions``
+000238c0: 0d0a 0d0a 2020 2020 2020 2020 3a3a 7061  ....        ::pa
+000238d0: 7261 6d20 7065 7269 6f64 733a 2054 6865  ram periods: The
+000238e0: 206e 756d 6265 7220 6f66 2065 6c65 6d65   number of eleme
+000238f0: 6e74 7320 746f 206c 6f6f 6b20 6168 6561  nts to look ahea
+00023900: 6420 286f 7220 6265 6869 6e64 292c 2064  d (or behind), d
+00023910: 6566 6175 6c74 7320 746f 2031 0d0a 2020  efaults to 1..  
+00023920: 2020 2020 2020 3a74 7970 6520 7065 7269        :type peri
+00023930: 6f64 733a 2069 6e74 0d0a 2020 2020 2020  ods: int..      
+00023940: 2020 3a70 6172 616d 2066 616e 6379 3a20    :param fancy: 
+00023950: 496e 6469 6361 7465 7320 7768 6574 6865  Indicates whethe
+00023960: 7220 746f 2072 6574 7572 6e20 6120 6661  r to return a fa
+00023970: 6e63 795f 696e 6465 7820 696e 7374 6561  ncy_index instea
+00023980: 6420 6f66 2061 2062 6f6f 6c65 616e 2061  d of a boolean a
+00023990: 7272 6179 2c20 6465 6661 756c 7473 2074  rray, defaults t
+000239a0: 6f20 4661 6c73 652e 0d0a 2020 2020 2020  o False...      
+000239b0: 2020 3a74 7970 6520 6661 6e63 793a 2062    :type fancy: b
+000239c0: 6f6f 6c0d 0a20 2020 2020 2020 203a 7265  ool..        :re
+000239d0: 7475 726e 3a20 626f 6f6c 6561 6e20 6060  turn: boolean ``
+000239e0: 4661 7374 4172 7261 7960 602c 206f 7220  FastArray``, or 
+000239f0: 6661 6e63 7949 6e64 6578 2028 7365 653a  fancyIndex (see:
+00023a00: 2060 6661 6e63 7960 206b 7761 7267 290d   `fancy` kwarg).
+00023a10: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00023a20: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
+00023a30: 7970 652e 6e75 6d20 3e20 3133 3a0d 0a20  ype.num > 13:.. 
+00023a40: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00023a50: 7420 3d20 7365 6c66 2021 3d20 7365 6c66  t = self != self
+00023a60: 2e73 6869 6674 2870 6572 696f 6473 290d  .shift(periods).
+00023a70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00023a80: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
+00023a90: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+00023aa0: 6f6f 6c5f 746f 5f66 616e 6379 2872 6573  ool_to_fancy(res
+00023ab0: 756c 7429 0d0a 2020 2020 2020 2020 2020  ult)..          
+00023ac0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
+00023ad0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00023ae0: 7365 6c66 2e5f 696e 7465 726e 616c 5f73  self._internal_s
+00023af0: 656c 665f 636f 6d70 6172 6528 4d41 5448  elf_compare(MATH
+00023b00: 5f4f 5045 5241 5449 4f4e 2e43 4d50 5f45  _OPERATION.CMP_E
+00023b10: 512c 2070 6572 696f 6473 3d70 6572 696f  Q, periods=perio
+00023b20: 6473 2c20 6661 6e63 793d 6661 6e63 7929  ds, fancy=fancy)
+00023b30: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00023b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023b80: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
+00023b90: 7261 6e73 6974 696f 6e73 2873 656c 662c  ransitions(self,
+00023ba0: 2070 6572 696f 6473 3d31 2c20 6661 6e63   periods=1, fanc
+00023bb0: 793d 4661 6c73 6529 202d 3e20 4661 7374  y=False) -> Fast
+00023bc0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00023bd0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+00023be0: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
+00023bf0: 7272 6179 2e0d 0a20 2020 2020 2020 2054  rray...        T
+00023c00: 6865 2062 6f6f 6c65 616e 2061 7272 6179  he boolean array
+00023c10: 2069 7320 7365 7420 746f 2054 7275 6520   is set to True 
+00023c20: 7768 656e 2074 6865 2070 7265 7669 6f75  when the previou
+00023c30: 7320 6974 656d 2069 6e20 7468 6520 6172  s item in the ar
+00023c40: 7261 7920 646f 6573 206e 6f74 2065 7175  ray does not equ
+00023c50: 616c 2074 6865 2063 7572 7265 6e74 2e0d  al the current..
+00023c60: 0a20 2020 2020 2020 2055 7365 202d 3120  .        Use -1 
+00023c70: 696e 7374 6561 6420 6f66 2031 2069 6620  instead of 1 if 
+00023c80: 796f 7520 7761 6e74 2054 7275 6520 7365  you want True se
+00023c90: 7420 7768 656e 2074 6865 206e 6578 7420  t when the next 
+00023ca0: 6974 656d 2069 6e20 7468 6520 6172 7261  item in the arra
+00023cb0: 7920 646f 6573 206e 6f74 2065 7175 616c  y does not equal
+00023cc0: 2074 6865 2070 7265 7669 6f75 732e 0d0a   the previous...
+00023cd0: 2020 2020 2020 2020 5365 6520 616c 736f          See also
+00023ce0: 3a20 6060 6469 6666 6572 7360 600d 0a0d  : ``differs``...
+00023cf0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00023d00: 7065 7269 6f64 733a 2054 6865 206e 756d  periods: The num
+00023d10: 6265 7220 6f66 2065 6c65 6d65 6e74 7320  ber of elements 
+00023d20: 746f 206c 6f6f 6b20 6168 6561 6420 286f  to look ahead (o
+00023d30: 7220 6265 6869 6e64 292c 2064 6566 6175  r behind), defau
+00023d40: 6c74 7320 746f 2031 0d0a 2020 2020 2020  lts to 1..      
+00023d50: 2020 3a74 7970 6520 7065 7269 6f64 733a    :type periods:
+00023d60: 2069 6e74 0d0a 2020 2020 2020 2020 3a70   int..        :p
+00023d70: 6172 616d 2066 616e 6379 3a20 496e 6469  aram fancy: Indi
+00023d80: 6361 7465 7320 7768 6574 6865 7220 746f  cates whether to
+00023d90: 2072 6574 7572 6e20 6120 6661 6e63 795f   return a fancy_
+00023da0: 696e 6465 7820 696e 7374 6561 6420 6f66  index instead of
+00023db0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+00023dc0: 2c20 6465 6661 756c 7473 2074 6f20 4661  , defaults to Fa
+00023dd0: 6c73 652e 0d0a 2020 2020 2020 2020 3a74  lse...        :t
+00023de0: 7970 6520 6661 6e63 793a 2062 6f6f 6c0d  ype fancy: bool.
+00023df0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00023e00: 3a20 626f 6f6c 6561 6e20 6060 4661 7374  : boolean ``Fast
+00023e10: 4172 7261 7960 602c 206f 7220 6661 6e63  Array``, or fanc
+00023e20: 7949 6e64 6578 2028 7365 653a 2060 6661  yIndex (see: `fa
+00023e30: 6e63 7960 206b 7761 7267 290d 0a0d 0a20  ncy` kwarg).... 
+00023e40: 2020 2020 2020 203e 3e3e 2061 203d 2046         >>> a = F
+00023e50: 6173 7441 7272 6179 285b 302c 312c 322c  astArray([0,1,2,
+00023e60: 332c 332c 332c 345d 290d 0a20 2020 2020  3,3,3,4])..     
+00023e70: 2020 203e 3e3e 2061 2e74 7261 6e73 6974     >>> a.transit
+00023e80: 696f 6e73 2870 6572 696f 6473 3d31 290d  ions(periods=1).
+00023e90: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00023ea0: 6179 285b 4661 6c73 652c 2054 7275 652c  ay([False, True,
+00023eb0: 2054 7275 652c 2054 7275 652c 2046 616c   True, True, Fal
+00023ec0: 7365 2c20 4661 6c73 652c 2054 7275 655d  se, False, True]
+00023ed0: 290d 0a0d 0a20 2020 2020 2020 203e 3e3e  )....        >>>
+00023ee0: 2061 2e74 7261 6e73 6974 696f 6e73 2870   a.transitions(p
+00023ef0: 6572 696f 6473 3d32 290d 0a20 2020 2020  eriods=2)..     
+00023f00: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
+00023f10: 6c73 652c 2046 616c 7365 2c20 5472 7565  lse, False, True
+00023f20: 2c20 5472 7565 2c20 5472 7565 2c20 4661  , True, True, Fa
+00023f30: 6c73 652c 2054 7275 655d 290d 0a0d 0a20  lse, True]).... 
+00023f40: 2020 2020 2020 203e 3e3e 2061 2e74 7261         >>> a.tra
+00023f50: 6e73 6974 696f 6e73 2870 6572 696f 6473  nsitions(periods
+00023f60: 3d2d 3129 0d0a 2020 2020 2020 2020 4661  =-1)..        Fa
+00023f70: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
+00023f80: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
+00023f90: 652c 2046 616c 7365 2c20 5472 7565 2c20  e, False, True, 
+00023fa0: 4661 6c73 655d 290d 0a20 2020 2020 2020  False])..       
+00023fb0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
+00023fc0: 2073 656c 662e 6474 7970 652e 6e75 6d20   self.dtype.num 
+00023fd0: 3e20 3133 3a0d 0a20 2020 2020 2020 2020  > 13:..         
+00023fe0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
+00023ff0: 2021 3d20 7365 6c66 2e73 6869 6674 2870   != self.shift(p
+00024000: 6572 696f 6473 290d 0a20 2020 2020 2020  eriods)..       
+00024010: 2020 2020 2069 6620 6661 6e63 793a 0d0a       if fancy:..
+00024020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024030: 7265 7475 726e 2062 6f6f 6c5f 746f 5f66  return bool_to_f
+00024040: 616e 6379 2872 6573 756c 7429 0d0a 2020  ancy(result)..  
+00024050: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00024060: 2072 6573 756c 740d 0a20 2020 2020 2020   result..       
+00024070: 2072 6574 7572 6e20 7365 6c66 2e5f 696e   return self._in
+00024080: 7465 726e 616c 5f73 656c 665f 636f 6d70  ternal_self_comp
+00024090: 6172 6528 4d41 5448 5f4f 5045 5241 5449  are(MATH_OPERATI
+000240a0: 4f4e 2e43 4d50 5f4e 452c 2070 6572 696f  ON.CMP_NE, perio
+000240b0: 6473 3d70 6572 696f 6473 2c20 6661 6e63  ds=periods, fanc
+000240c0: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
+000240d0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+000240e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000240f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024100: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00024110: 6566 2064 6966 6628 7365 6c66 2c20 7065  ef diff(self, pe
+00024120: 7269 6f64 733d 3129 202d 3e20 4661 7374  riods=1) -> Fast
+00024130: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00024140: 2222 220d 0a20 2020 2020 2020 204f 6e6c  """..        Onl
+00024150: 7920 776f 726b 7320 666f 7220 696e 7465  y works for inte
+00024160: 6765 7273 2061 6e64 2066 6c6f 6174 732e  gers and floats.
+00024170: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+00024180: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+00024190: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000241a0: 2020 2020 7065 7269 6f64 733a 2069 6e74      periods: int
+000241b0: 2c20 6465 6661 756c 7473 2074 6f20 312e  , defaults to 1.
+000241c0: 2020 486f 7720 6d61 6e79 2065 6c65 6d65    How many eleme
+000241d0: 6e74 7320 746f 2073 6869 6674 2074 6865  nts to shift the
+000241e0: 2064 6174 6120 6265 666f 7265 2073 7562   data before sub
+000241f0: 7472 6163 7469 6e67 2e0d 0a0d 0a20 2020  tracting.....   
+00024200: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00024210: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00024220: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00024230: 2073 616d 6520 6c65 6e67 7468 2061 7320   same length as 
+00024240: 6375 7272 656e 7420 6172 7261 792e 2020  current array.  
+00024250: 496e 7661 6c69 6473 2077 696c 6c20 6669  Invalids will fi
+00024260: 6c6c 2074 6865 2062 6567 696e 6e69 6e67  ll the beginning
+00024270: 2062 6173 6564 206f 6e20 7468 6520 7065   based on the pe
+00024280: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
+00024290: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+000242a0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000242b0: 2020 2020 2020 3e3e 3e20 613d 7274 2e61        >>> a=rt.a
+000242c0: 7261 6e67 6528 332c 2064 7479 7065 3d72  range(3, dtype=r
+000242d0: 742e 696e 7433 3229 3b20 612e 6469 6666  t.int32); a.diff
+000242e0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
+000242f0: 4172 7261 7928 5b2d 3231 3437 3438 3336  Array([-21474836
+00024300: 3438 2c20 2020 2020 2020 2020 2020 312c  48,           1,
+00024310: 2020 2020 2020 2020 2020 2031 5d29 0d0a             1])..
+00024320: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00024330: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00024340: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
+00024350: 203d 2049 4e56 414c 4944 5f44 4943 545b   = INVALID_DICT[
+00024360: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
+00024370: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00024380: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00024390: 6973 6520 5479 7065 4572 726f 7228 6622  ise TypeError(f"
+000243a0: 7368 6966 7420 646f 6573 206e 6f74 2073  shift does not s
+000243b0: 7570 706f 7274 2074 6865 2064 7479 7065  upport the dtype
+000243c0: 207b 7365 6c66 2e64 7479 7065 2e6e 616d   {self.dtype.nam
+000243d0: 6521 727d 2229 0d0a 0d0a 2020 2020 2020  e!r}")....      
+000243e0: 2020 7465 6d70 203d 2065 6d70 7479 2873    temp = empty(s
+000243f0: 656c 662e 7368 6170 652c 2064 7479 7065  elf.shape, dtype
+00024400: 3d73 656c 662e 6474 7970 6529 0d0a 2020  =self.dtype)..  
+00024410: 2020 2020 2020 6966 2061 6273 2870 6572        if abs(per
+00024420: 696f 6473 2920 3e3d 206c 656e 2873 656c  iods) >= len(sel
+00024430: 6629 3a0d 0a20 2020 2020 2020 2020 2020  f):..           
+00024440: 2074 656d 702e 6669 6c6c 2869 6e76 616c   temp.fill(inval
+00024450: 6964 290d 0a20 2020 2020 2020 2065 6c69  id)..        eli
+00024460: 6620 7065 7269 6f64 7320 3e20 303a 0d0a  f periods > 0:..
+00024470: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
+00024480: 5b3a 7065 7269 6f64 735d 203d 2069 6e76  [:periods] = inv
+00024490: 616c 6964 0d0a 0d0a 2020 2020 2020 2020  alid....        
+000244a0: 2020 2020 2320 6f75 7470 7574 2069 6e74      # output int
+000244b0: 6f20 7468 6520 656d 7074 7920 6172 7261  o the empty arra
+000244c0: 7920 7765 2063 7265 6174 6564 2c20 6e70  y we created, np
+000244d0: 2e73 7562 7472 6163 7420 7769 6c6c 2063  .subtract will c
+000244e0: 616c 6c20 4661 7374 4172 7261 7927 7320  all FastArray's 
+000244f0: 7375 6274 7261 6374 0d0a 2020 2020 2020  subtract..      
+00024500: 2020 2020 2020 6e70 2e73 7562 7472 6163        np.subtrac
+00024510: 7428 7365 6c66 5b70 6572 696f 6473 3a5d  t(self[periods:]
+00024520: 2c20 7365 6c66 5b3a 2d70 6572 696f 6473  , self[:-periods
+00024530: 5d2c 206f 7574 3d74 656d 705b 7065 7269  ], out=temp[peri
+00024540: 6f64 733a 5d29 0d0a 2020 2020 2020 2020  ods:])..        
+00024550: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00024560: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
+00024570: 5d20 3d20 696e 7661 6c69 640d 0a20 2020  ] = invalid..   
+00024580: 2020 2020 2020 2020 206e 702e 7375 6274           np.subt
+00024590: 7261 6374 2873 656c 665b 3a70 6572 696f  ract(self[:perio
+000245a0: 6473 5d2c 2073 656c 665b 2d70 6572 696f  ds], self[-perio
+000245b0: 6473 3a5d 2c20 6f75 743d 7465 6d70 5b3a  ds:], out=temp[:
+000245c0: 7065 7269 6f64 735d 290d 0a20 2020 2020  periods])..     
+000245d0: 2020 2072 6574 7572 6e20 7465 6d70 0d0a     return temp..
+000245e0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+000245f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00024620: 0a20 2020 2064 6566 2069 736e 6128 7365  .    def isna(se
+00024630: 6c66 2920 2d3e 2046 6173 7441 7272 6179  lf) -> FastArray
+00024640: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00024650: 2020 2020 2020 2020 6973 6e61 6e20 6973          isnan is
+00024660: 206d 6170 7065 6420 6469 7265 6374 6c79   mapped directly
+00024670: 2074 6f20 6973 6e61 6e28 290d 0a20 2020   to isnan()..   
+00024680: 2020 2020 2043 6174 6567 6f72 6963 616c       Categorical
+00024690: 7320 616e 6420 4461 7465 5469 6d65 2074  s and DateTime t
+000246a0: 616b 6520 6f76 6572 2069 736e 616e 2e0d  ake over isnan..
+000246b0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+000246c0: 6179 2068 616e 646c 6573 2073 656e 7469  ay handles senti
+000246d0: 6e65 6c73 2e0d 0a0d 0a20 2020 2020 2020  nels.....       
+000246e0: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
+000246f0: 302e 3029 0d0a 2020 2020 2020 2020 3e3e  0.0)..        >>
+00024700: 3e20 615b 355d 3d6e 702e 6e61 6e0d 0a20  > a[5]=np.nan.. 
+00024710: 2020 2020 2020 203e 3e3e 2061 5b38 375d         >>> a[87]
+00024720: 3d6e 702e 6e61 6e0d 0a20 2020 2020 2020  =np.nan..       
+00024730: 203e 3e3e 2073 756d 2861 2e69 736e 6128   >>> sum(a.isna(
+00024740: 2929 0d0a 2020 2020 2020 2020 320d 0a20  ))..        2.. 
+00024750: 2020 2020 2020 203e 3e3e 2073 756d 2861         >>> sum(a
+00024760: 2e61 7374 7970 6528 6e70 2e69 6e74 3332  .astype(np.int32
+00024770: 292e 6973 6e61 2829 290d 0a20 2020 2020  ).isna())..     
+00024780: 2020 2032 0d0a 2020 2020 2020 2020 2222     2..        ""
+00024790: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+000247a0: 6e20 7365 6c66 2e69 736e 616e 2829 0d0a  n self.isnan()..
+000247b0: 0d0a 2020 2020 6465 6620 6e6f 746e 6128  ..    def notna(
+000247c0: 7365 6c66 2920 2d3e 2046 6173 7441 7272  self) -> FastArr
+000247d0: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+000247e0: 0d0a 2020 2020 2020 2020 6e6f 746e 6120  ..        notna 
+000247f0: 6973 206d 6170 7065 6420 6469 7265 6374  is mapped direct
+00024800: 6c79 2074 6f20 6973 6e6f 746e 616e 2829  ly to isnotnan()
+00024810: 0d0a 2020 2020 2020 2020 4361 7465 676f  ..        Catego
+00024820: 7269 6361 6c73 2061 6e64 2044 6174 6554  ricals and DateT
+00024830: 696d 6520 7461 6b65 206f 7665 7220 6973  ime take over is
+00024840: 6e6f 746e 616e 2e0d 0a20 2020 2020 2020  notnan...       
+00024850: 2046 6173 7441 7272 6179 2068 616e 646c   FastArray handl
+00024860: 6573 2073 656e 7469 6e65 6c73 2e0d 0a0d  es sentinels....
+00024870: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+00024880: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
+00024890: 2020 2020 2020 3e3e 3e20 615b 355d 3d6e        >>> a[5]=n
+000248a0: 702e 6e61 6e0d 0a20 2020 2020 2020 203e  p.nan..        >
+000248b0: 3e3e 2061 5b38 375d 3d6e 702e 6e61 6e0d  >> a[87]=np.nan.
+000248c0: 0a20 2020 2020 2020 203e 3e3e 2073 756d  .        >>> sum
+000248d0: 2861 2e6e 6f74 6e61 2829 290d 0a20 2020  (a.notna())..   
+000248e0: 2020 2020 2039 380d 0a20 2020 2020 2020       98..       
+000248f0: 203e 3e3e 2073 756d 2861 2e61 7374 7970   >>> sum(a.astyp
+00024900: 6528 6e70 2e69 6e74 3332 292e 6e6f 746e  e(np.int32).notn
+00024910: 6128 2929 0d0a 2020 2020 2020 2020 3938  a())..        98
+00024920: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00024930: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00024940: 6c66 2e69 736e 6f74 6e61 6e28 290d 0a0d  lf.isnotnan()...
+00024950: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
+00024960: 6e61 2873 656c 662c 2076 616c 7565 2c20  na(self, value, 
+00024970: 696e 706c 6163 653d 4661 6c73 6529 202d  inplace=False) -
+00024980: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+00024990: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000249a0: 2020 2052 6574 7572 6e20 6120 6046 6173     Return a `Fas
+000249b0: 7441 7272 6179 6020 7769 7468 2061 6c6c  tArray` with all
+000249c0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
+000249d0: 2076 616c 7565 7320 7365 7420 746f 2074   values set to t
+000249e0: 6865 2073 7065 6369 6669 6564 2076 616c  he specified val
+000249f0: 7565 2e0d 0a0d 0a20 2020 2020 2020 204f  ue.....        O
+00024a00: 7074 696f 6e61 6c6c 792c 2079 6f75 2063  ptionally, you c
+00024a10: 616e 206d 6f64 6966 7920 7468 6520 6f72  an modify the or
+00024a20: 6967 696e 616c 2060 4661 7374 4172 7261  iginal `FastArra
+00024a30: 7960 2069 6620 6974 2773 206e 6f74 206c  y` if it's not l
+00024a40: 6f63 6b65 642e 0d0a 0d0a 2020 2020 2020  ocked.....      
+00024a50: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00024a60: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00024a70: 0d0a 2020 2020 2020 2020 7661 6c75 6520  ..        value 
+00024a80: 3a20 7363 616c 6172 206f 7220 6172 7261  : scalar or arra
+00024a90: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
+00024aa0: 2076 616c 7565 206f 7220 616e 2061 7272   value or an arr
+00024ab0: 6179 206f 6620 7661 6c75 6573 2074 6f20  ay of values to 
+00024ac0: 7265 706c 6163 6520 616c 6c20 4e61 4e20  replace all NaN 
+00024ad0: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
+00024ae0: 6573 2e20 4966 2061 6e0d 0a20 2020 2020  es. If an..     
+00024af0: 2020 2020 2020 2061 7272 6179 2c20 7468         array, th
+00024b00: 6520 6e75 6d62 6572 206f 6620 7661 6c75  e number of valu
+00024b10: 6573 206d 7573 7420 6571 7561 6c20 7468  es must equal th
+00024b20: 6520 6e75 6d62 6572 206f 6620 4e61 4e20  e number of NaN 
+00024b30: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
+00024b40: 6573 2e0d 0a20 2020 2020 2020 2069 6e70  es...        inp
+00024b50: 6c61 6365 203a 2062 6f6f 6c2c 2064 6566  lace : bool, def
+00024b60: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00024b70: 2020 2020 2020 2020 4966 2046 616c 7365          If False
+00024b80: 2c20 7265 7475 726e 2061 2063 6f70 7920  , return a copy 
+00024b90: 6f66 2074 6865 2060 4661 7374 4172 7261  of the `FastArra
+00024ba0: 7960 2e20 4966 2054 7275 652c 206d 6f64  y`. If True, mod
+00024bb0: 6966 7920 7468 6520 6f72 6967 696e 616c  ify the original
+00024bc0: 2e0d 0a20 2020 2020 2020 2020 2020 2054  ...            T
+00024bd0: 6869 7320 7769 6c6c 206d 6f64 6966 7920  his will modify 
+00024be0: 616e 7920 6f74 6865 7220 7669 6577 7320  any other views 
+00024bf0: 6f6e 2074 6869 7320 6f62 6a65 6374 2e20  on this object. 
+00024c00: 5468 6973 2066 6169 6c73 2069 6620 7468  This fails if th
+00024c10: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
+00024c20: 4661 7374 4172 7261 7960 2069 7320 6c6f  FastArray` is lo
+00024c30: 636b 6564 2e0d 0a0d 0a20 2020 2020 2020  cked.....       
+00024c40: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+00024c50: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+00024c60: 2020 2060 4661 7374 4172 7261 7960 206f     `FastArray` o
+00024c70: 7220 4e6f 6e65 0d0a 2020 2020 2020 2020  r None..        
+00024c80: 2020 2020 5468 6520 6046 6173 7441 7272      The `FastArr
+00024c90: 6179 6020 7769 6c6c 2062 6520 7468 6520  ay` will be the 
+00024ca0: 7361 6d65 2073 697a 6520 616e 6420 6474  same size and dt
+00024cb0: 7970 6520 6173 2074 6865 206f 7269 6769  ype as the origi
+00024cc0: 6e61 6c20 6172 7261 792e 0d0a 2020 2020  nal array...    
+00024cd0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+00024ce0: 4e6f 6e65 2069 6620 6060 696e 706c 6163  None if ``inplac
+00024cf0: 6520 3d20 5472 7565 6060 2e0d 0a0d 0a20  e = True``..... 
+00024d00: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+00024d10: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00024d20: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+00024d30: 7272 6179 2e66 696c 6c6e 6120 3a20 5265  rray.fillna : Re
+00024d40: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00024d50: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00024d60: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
+00024d70: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
+00024d80: 7461 2e0d 0a20 2020 2020 2020 2044 6174  ta...        Dat
+00024d90: 6173 6574 2e66 696c 6c6e 6120 3a20 5265  aset.fillna : Re
+00024da0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00024db0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00024dc0: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
+00024dd0: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
+00024de0: 7461 2e0d 0a20 2020 2020 2020 2043 6174  ta...        Cat
+00024df0: 6567 6f72 6963 616c 2e66 696c 6c5f 666f  egorical.fill_fo
+00024e00: 7277 6172 6420 3a20 5265 706c 6163 6520  rward : Replace 
+00024e10: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
+00024e20: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
+00024e30: 6c61 7374 2076 616c 6964 2067 726f 7570  last valid group
+00024e40: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00024e50: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
+00024e60: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
+00024e70: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00024e80: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00024e90: 2074 6865 206e 6578 7420 7661 6c69 6420   the next valid 
+00024ea0: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
+00024eb0: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
+00024ec0: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
+00024ed0: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00024ee0: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00024ef0: 2074 6865 206c 6173 7420 7661 6c69 6420   the last valid 
+00024f00: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
+00024f10: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
+00024f20: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00024f30: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00024f40: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00024f50: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00024f60: 2067 726f 7570 2076 616c 7565 2e0d 0a0d   group value....
+00024f70: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00024f80: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00024f90: 2d2d 2d0d 0a20 2020 2020 2020 2052 6570  ---..        Rep
+00024fa0: 6c61 6365 2061 6c6c 2069 6e73 7461 6e63  lace all instanc
+00024fb0: 6573 206f 6620 4e61 4e20 7769 7468 2061  es of NaN with a
+00024fc0: 2073 696e 676c 6520 7661 6c75 653a 0d0a   single value:..
+00024fd0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00024fe0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00024ff0: 7274 2e6e 616e 2c20 312e 302c 2072 742e  rt.nan, 1.0, rt.
+00025000: 6e61 6e2c 2033 2e30 5d29 0d0a 2020 2020  nan, 3.0])..    
+00025010: 2020 2020 3e3e 3e20 612e 7265 706c 6163      >>> a.replac
+00025020: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
+00025030: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
+00025040: 2e2c 2030 2e2c 2033 2e5d 290d 0a0d 0a20  ., 0., 3.]).... 
+00025050: 2020 2020 2020 2052 6570 6c61 6365 2061         Replace a
+00025060: 6c6c 2069 6e76 616c 6964 2076 616c 7565  ll invalid value
+00025070: 7320 7769 7468 2030 733a 0d0a 0d0a 2020  s with 0s:....  
+00025080: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
+00025090: 2e46 6173 7441 7272 6179 285b 302c 2031  .FastArray([0, 1
+000250a0: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
+000250b0: 2020 2020 2020 2020 3e3e 3e20 625b 303a          >>> b[0:
+000250c0: 335d 203d 2062 2e69 6e76 0d0a 2020 2020  3] = b.inv..    
+000250d0: 2020 2020 3e3e 3e20 622e 7265 706c 6163      >>> b.replac
+000250e0: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
+000250f0: 4661 7374 4172 7261 7928 5b30 2c20 302c  FastArray([0, 0,
+00025100: 2030 2c20 332c 2034 2c20 355d 290d 0a0d   0, 3, 4, 5])...
+00025110: 0a20 2020 2020 2020 2052 6570 6c61 6365  .        Replace
+00025120: 2065 6163 6820 696e 7374 616e 6365 206f   each instance o
+00025130: 6620 4e61 4e20 7769 7468 2061 2064 6966  f NaN with a dif
+00025140: 6665 7265 6e74 2076 616c 7565 3a0d 0a0d  ferent value:...
+00025150: 0a20 2020 2020 2020 203e 3e3e 2061 2e72  .        >>> a.r
+00025160: 6570 6c61 6365 6e61 285b 302c 2032 5d29  eplacena([0, 2])
+00025170: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00025180: 7261 7928 5b30 2e2c 2031 2e2c 2032 2e2c  ray([0., 1., 2.,
+00025190: 2033 2e5d 290d 0a20 2020 2020 2020 2022   3.])..        "
+000251a0: 2222 0d0a 2020 2020 2020 2020 696e 7374  ""..        inst
+000251b0: 203d 2073 656c 6620 6966 2069 6e70 6c61   = self if inpla
+000251c0: 6365 2065 6c73 6520 7365 6c66 2e63 6f70  ce else self.cop
+000251d0: 7928 290d 0a20 2020 2020 2020 2069 736e  y()..        isn
+000251e0: 6120 3d20 696e 7374 2e69 736e 6128 290d  a = inst.isna().
+000251f0: 0a20 2020 2020 2020 2069 6620 6973 6e61  .        if isna
+00025200: 2e61 6e79 2829 3a0d 0a20 2020 2020 2020  .any():..       
+00025210: 2020 2020 2069 6e73 745b 6973 6e61 5d20       inst[isna] 
+00025220: 3d20 7661 6c75 650d 0a20 2020 2020 2020  = value..       
+00025230: 2069 6620 696e 706c 6163 653a 0d0a 2020   if inplace:..  
+00025240: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00025250: 204e 6f6e 650d 0a20 2020 2020 2020 2072   None..        r
+00025260: 6574 7572 6e20 696e 7374 0d0a 0d0a 2020  eturn inst....  
+00025270: 2020 6465 6620 6669 6c6c 6e61 2873 656c    def fillna(sel
+00025280: 662c 2076 616c 7565 3d4e 6f6e 652c 206d  f, value=None, m
+00025290: 6574 686f 643d 4e6f 6e65 2c20 696e 706c  ethod=None, inpl
+000252a0: 6163 653d 4661 6c73 652c 206c 696d 6974  ace=False, limit
+000252b0: 3d4e 6f6e 6529 202d 3e20 4661 7374 4172  =None) -> FastAr
+000252c0: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
+000252d0: 220d 0a20 2020 2020 2020 2052 6570 6c61  "..        Repla
+000252e0: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
+000252f0: 6964 2076 616c 7565 7320 7769 7468 2061  id values with a
+00025300: 2073 7065 6369 6669 6564 2076 616c 7565   specified value
+00025310: 206f 7220 6e65 6172 6279 2064 6174 612e   or nearby data.
+00025320: 0d0a 0d0a 2020 2020 2020 2020 4f70 7469  ....        Opti
+00025330: 6f6e 616c 6c79 2c20 796f 7520 6361 6e20  onally, you can 
+00025340: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
+00025350: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
+00025360: 6966 2069 7427 7320 6e6f 7420 6c6f 636b  if it's not lock
+00025370: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
+00025380: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+00025390: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+000253a0: 2020 2020 2020 2076 616c 7565 203a 2073         value : s
+000253b0: 6361 6c61 7220 6f72 2061 7272 6179 2c20  calar or array, 
+000253c0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
+000253d0: 2020 2020 2020 2020 2020 4120 7661 6c75            A valu
+000253e0: 6520 6f72 2061 6e20 6172 7261 7920 6f66  e or an array of
+000253f0: 2076 616c 7565 7320 746f 2072 6570 6c61   values to repla
+00025400: 6365 2061 6c6c 204e 614e 2061 6e64 2069  ce all NaN and i
+00025410: 6e76 616c 6964 2076 616c 7565 732e 0d0a  nvalid values...
+00025420: 2020 2020 2020 2020 2020 2020 4120 6076              A `v
+00025430: 616c 7565 6020 6973 2072 6571 7569 7265  alue` is require
+00025440: 6420 6966 2060 606d 6574 686f 6420 3d20  d if ``method = 
+00025450: 4e6f 6e65 6060 2e20 416e 2061 7272 6179  None``. An array
+00025460: 2063 616e 2062 6520 7573 6564 206f 6e6c   can be used onl
+00025470: 7920 7768 656e 0d0a 2020 2020 2020 2020  y when..        
+00025480: 2020 2020 6060 6d65 7468 6f64 203d 204e      ``method = N
+00025490: 6f6e 6560 602e 2049 6620 616e 2061 7272  one``. If an arr
+000254a0: 6179 2069 7320 7573 6564 2c20 7468 6520  ay is used, the 
+000254b0: 6e75 6d62 6572 206f 6620 7661 6c75 6573  number of values
+000254c0: 2069 6e20 7468 6520 6172 7261 790d 0a20   in the array.. 
+000254d0: 2020 2020 2020 2020 2020 206d 7573 7420             must 
+000254e0: 6571 7561 6c20 7468 6520 6e75 6d62 6572  equal the number
+000254f0: 206f 6620 4e61 4e20 616e 6420 696e 7661   of NaN and inva
+00025500: 6c69 6420 7661 6c75 6573 2e0d 0a20 2020  lid values...   
+00025510: 2020 2020 206d 6574 686f 6420 3a20 7b4e       method : {N
+00025520: 6f6e 652c 2027 6261 636b 6669 6c6c 272c  one, 'backfill',
+00025530: 2027 6266 696c 6c27 2c20 2770 6164 272c   'bfill', 'pad',
+00025540: 2027 6666 696c 6c27 7d2c 2064 6566 6175   'ffill'}, defau
+00025550: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+00025560: 2020 2020 204d 6574 686f 6420 746f 2075       Method to u
+00025570: 7365 2074 6f20 7072 6f70 6167 6174 6520  se to propagate 
+00025580: 7661 6c69 6420 7661 6c75 6573 2e0d 0a0d  valid values....
+00025590: 0a20 2020 2020 2020 2020 2020 202a 2062  .            * b
+000255a0: 6163 6b66 696c 6c2f 6266 696c 6c3a 2050  ackfill/bfill: P
+000255b0: 726f 7061 6761 7465 7320 7468 6520 6e65  ropagates the ne
+000255c0: 7874 2065 6e63 6f75 6e74 6572 6564 2076  xt encountered v
+000255d0: 616c 6964 2076 616c 7565 2062 6163 6b77  alid value backw
+000255e0: 6172 642e 0d0a 2020 2020 2020 2020 2020  ard...          
+000255f0: 2020 2020 4361 6c6c 7320 3a6d 6574 683a      Calls :meth:
+00025600: 6046 6173 7441 7272 6179 2e66 696c 6c5f  `FastArray.fill_
+00025610: 6261 636b 7761 7264 602e 0d0a 2020 2020  backward`...    
+00025620: 2020 2020 2020 2020 2a20 7061 642f 6666          * pad/ff
+00025630: 696c 6c3a 2050 726f 7061 6761 7465 7320  ill: Propagates 
+00025640: 7468 6520 6c61 7374 2065 6e63 6f75 6e74  the last encount
+00025650: 6572 6564 2076 616c 6964 2076 616c 7565  ered valid value
+00025660: 2066 6f72 7761 7264 2e20 4361 6c6c 730d   forward. Calls.
+00025670: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
+00025680: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
+00025690: 6669 6c6c 5f66 6f72 7761 7264 602e 0d0a  fill_forward`...
+000256a0: 2020 2020 2020 2020 2020 2020 2a20 4e6f              * No
+000256b0: 6e65 3a20 4120 7265 706c 6163 656d 656e  ne: A replacemen
+000256c0: 7420 7661 6c75 6520 6973 2072 6571 7569  t value is requi
+000256d0: 7265 6420 6966 2060 606d 6574 686f 6420  red if ``method 
+000256e0: 3d20 4e6f 6e65 6060 2e20 4361 6c6c 730d  = None``. Calls.
+000256f0: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
+00025700: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
+00025710: 7265 706c 6163 656e 6160 2e0d 0a20 2020  replacena`...   
+00025720: 2020 2020 2020 2020 2049 6620 7468 6572           If ther
+00025730: 6527 7320 6e6f 7420 6120 7661 6c69 6420  e's not a valid 
+00025740: 7661 6c75 6520 746f 2070 726f 7061 6761  value to propaga
+00025750: 7465 2066 6f72 7761 7264 206f 7220 6261  te forward or ba
+00025760: 636b 7761 7264 2c20 7468 6520 4e61 4e20  ckward, the NaN 
+00025770: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
+00025780: 696e 7661 6c69 6420 7661 6c75 6520 6973  invalid value is
+00025790: 206e 6f74 2072 6570 6c61 6365 6420 756e   not replaced un
+000257a0: 6c65 7373 2079 6f75 2061 6c73 6f20 7370  less you also sp
+000257b0: 6563 6966 7920 6120 6076 616c 7565 602e  ecify a `value`.
+000257c0: 0d0a 2020 2020 2020 2020 696e 706c 6163  ..        inplac
+000257d0: 6520 3a20 626f 6f6c 2c20 6465 6661 756c  e : bool, defaul
+000257e0: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
+000257f0: 2020 2020 2049 6620 4661 6c73 652c 2072       If False, r
+00025800: 6574 7572 6e20 6120 636f 7079 206f 6620  eturn a copy of 
+00025810: 7468 6520 6046 6173 7441 7272 6179 602e  the `FastArray`.
+00025820: 2049 6620 5472 7565 2c20 6d6f 6469 6679   If True, modify
+00025830: 206f 7269 6769 6e61 6c20 6461 7461 2e0d   original data..
+00025840: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
+00025850: 7320 7769 6c6c 206d 6f64 6966 7920 616e  s will modify an
+00025860: 7920 6f74 6865 7220 7669 6577 7320 6f6e  y other views on
+00025870: 2074 6869 7320 6f62 6a65 6374 2e20 5468   this object. Th
+00025880: 6973 2066 6169 6c73 2069 6620 7468 650d  is fails if the.
+00025890: 0a20 2020 2020 2020 2020 2020 2060 4661  .            `Fa
+000258a0: 7374 4172 7261 7960 2069 7320 6c6f 636b  stArray` is lock
+000258b0: 6564 2e0d 0a20 2020 2020 2020 206c 696d  ed...        lim
+000258c0: 6974 203a 2069 6e74 2c20 6465 6661 756c  it : int, defaul
+000258d0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+000258e0: 2020 2020 4966 2060 6d65 7468 6f64 6020      If `method` 
+000258f0: 6973 2073 7065 6369 6669 6564 2c20 7468  is specified, th
+00025900: 6973 2069 7320 7468 6520 6d61 7869 6d69  is is the maximi
+00025910: 756d 206e 756d 6265 7220 6f66 2063 6f6e  um number of con
+00025920: 7365 6375 7469 7665 204e 614e 206f 720d  secutive NaN or.
+00025930: 0a20 2020 2020 2020 2020 2020 2069 6e76  .            inv
+00025940: 616c 6964 2076 616c 7565 7320 746f 2066  alid values to f
+00025950: 696c 6c2e 2049 6620 7468 6572 6520 6973  ill. If there is
+00025960: 2061 2067 6170 2077 6974 6820 6d6f 7265   a gap with more
+00025970: 2074 6861 6e20 7468 6973 206e 756d 6265   than this numbe
+00025980: 7220 6f66 0d0a 2020 2020 2020 2020 2020  r of..          
+00025990: 2020 636f 6e73 6563 7574 6976 6520 4e61    consecutive Na
+000259a0: 4e20 6f72 2069 6e76 616c 6964 2076 616c  N or invalid val
+000259b0: 7565 732c 2074 6865 2067 6170 2077 696c  ues, the gap wil
+000259c0: 6c20 6265 206f 6e6c 7920 7061 7274 6961  l be only partia
+000259d0: 6c6c 7920 6669 6c6c 6564 2e0d 0a0d 0a20  lly filled..... 
+000259e0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+000259f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00025a00: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00025a10: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00025a20: 2020 5468 6520 6046 6173 7441 7272 6179    The `FastArray
+00025a30: 6020 7769 6c6c 2062 6520 7468 6520 7361  ` will be the sa
+00025a40: 6d65 2073 697a 6520 616e 6420 6474 7970  me size and dtyp
+00025a50: 6520 6173 2074 6865 206f 7269 6769 6e61  e as the origina
+00025a60: 6c20 6172 7261 792e 0d0a 0d0a 2020 2020  l array.....    
+00025a70: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+00025a80: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00025a90: 2020 2020 2020 2020 7269 7074 6162 6c65          riptable
+00025aa0: 2e72 745f 6661 7374 6172 7261 796e 756d  .rt_fastarraynum
+00025ab0: 6261 2e66 696c 6c5f 666f 7277 6172 6420  ba.fill_forward 
+00025ac0: 3a20 5265 706c 6163 6520 4e61 4e20 616e  : Replace NaN an
+00025ad0: 6420 696e 7661 6c69 6420 7661 6c75 6573  d invalid values
+00025ae0: 2077 6974 680d 0a20 2020 2020 2020 2020   with..         
+00025af0: 2020 2074 6865 206c 6173 7420 7661 6c69     the last vali
+00025b00: 6420 7661 6c75 652e 0d0a 2020 2020 2020  d value...      
+00025b10: 2020 7269 7074 6162 6c65 2e72 745f 6661    riptable.rt_fa
+00025b20: 7374 6172 7261 796e 756d 6261 2e66 696c  starraynumba.fil
+00025b30: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
+00025b40: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00025b50: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00025b60: 0d0a 2020 2020 2020 2020 2020 2020 7468  ..            th
+00025b70: 6520 6e65 7874 2076 616c 6964 2076 616c  e next valid val
+00025b80: 7565 2e0d 0a20 2020 2020 2020 2072 6970  ue...        rip
+00025b90: 7461 626c 652e 6669 6c6c 5f66 6f72 7761  table.fill_forwa
+00025ba0: 7264 203a 2052 6570 6c61 6365 204e 614e  rd : Replace NaN
+00025bb0: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
+00025bc0: 7565 7320 7769 7468 2074 6865 206c 6173  ues with the las
+00025bd0: 7420 7661 6c69 640d 0a20 2020 2020 2020  t valid..       
+00025be0: 2020 2020 2076 616c 7565 2e0d 0a20 2020       value...   
+00025bf0: 2020 2020 2072 6970 7461 626c 652e 6669       riptable.fi
+00025c00: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00025c10: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00025c20: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00025c30: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00025c40: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
+00025c50: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
+00025c60: 7461 7365 742e 6669 6c6c 6e61 203a 2052  taset.fillna : R
+00025c70: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+00025c80: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+00025c90: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
+00025ca0: 616c 7565 206f 720d 0a20 2020 2020 2020  alue or..       
+00025cb0: 2020 2020 206e 6561 7262 7920 6461 7461       nearby data
+00025cc0: 2e0d 0a20 2020 2020 2020 2046 6173 7441  ...        FastA
+00025cd0: 7272 6179 2e72 6570 6c61 6365 6e61 203a  rray.replacena :
+00025ce0: 2052 6570 6c61 6365 204e 614e 2061 6e64   Replace NaN and
+00025cf0: 2069 6e76 616c 6964 2076 616c 7565 7320   invalid values 
+00025d00: 7769 7468 2061 2073 7065 6369 6669 6564  with a specified
+00025d10: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00025d20: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
+00025d30: 6c5f 666f 7277 6172 6420 3a20 5265 706c  l_forward : Repl
+00025d40: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
+00025d50: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
+00025d60: 7468 6520 6c61 7374 2076 616c 6964 0d0a  the last valid..
+00025d70: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
+00025d80: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
+00025d90: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
+00025da0: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00025db0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00025dc0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00025dd0: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00025de0: 0d0a 2020 2020 2020 2020 2020 2020 6772  ..            gr
+00025df0: 6f75 7020 7661 6c75 652e 0d0a 2020 2020  oup value...    
+00025e00: 2020 2020 4772 6f75 7042 792e 6669 6c6c      GroupBy.fill
+00025e10: 5f66 6f72 7761 7264 203a 2052 6570 6c61  _forward : Repla
+00025e20: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
+00025e30: 6964 2076 616c 7565 7320 7769 7468 2074  id values with t
+00025e40: 6865 206c 6173 7420 7661 6c69 640d 0a20  he last valid.. 
+00025e50: 2020 2020 2020 2020 2020 2067 726f 7570             group
+00025e60: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
+00025e70: 2047 726f 7570 4279 2e66 696c 6c5f 6261   GroupBy.fill_ba
+00025e80: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
+00025e90: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
+00025ea0: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
+00025eb0: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
+00025ec0: 2020 2020 2020 2020 2067 726f 7570 2076           group v
+00025ed0: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
+00025ee0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00025ef0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00025f00: 2020 2020 2052 6570 6c61 6365 2061 6c6c       Replace all
+00025f10: 204e 614e 2076 616c 7565 7320 7769 7468   NaN values with
+00025f20: 2030 733a 0d0a 0d0a 2020 2020 2020 2020   0s:....        
+00025f30: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+00025f40: 7272 6179 285b 7274 2e6e 616e 2c20 312e  rray([rt.nan, 1.
+00025f50: 302c 2072 742e 6e61 6e2c 2072 742e 6e61  0, rt.nan, rt.na
+00025f60: 6e2c 2072 742e 6e61 6e2c 2035 2e30 5d29  n, rt.nan, 5.0])
+00025f70: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00025f80: 6669 6c6c 6e61 2830 290d 0a20 2020 2020  fillna(0)..     
+00025f90: 2020 2046 6173 7441 7272 6179 285b 302e     FastArray([0.
+00025fa0: 2c20 312e 2c20 302e 2c20 302e 2c20 302e  , 1., 0., 0., 0.
+00025fb0: 2c20 352e 5d29 0d0a 0d0a 2020 2020 2020  , 5.])....      
+00025fc0: 2020 5265 706c 6163 6520 616c 6c20 696e    Replace all in
+00025fd0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00025fe0: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
+00025ff0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
+00026000: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
+00026010: 332c 2034 2c20 355d 290d 0a20 2020 2020  3, 4, 5])..     
+00026020: 2020 203e 3e3e 2062 5b30 3a33 5d20 3d20     >>> b[0:3] = 
+00026030: 622e 696e 760d 0a20 2020 2020 2020 203e  b.inv..        >
+00026040: 3e3e 2062 2e66 696c 6c6e 6128 3029 0d0a  >> b.fillna(0)..
+00026050: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00026060: 7928 5b30 2c20 302c 2030 2c20 332c 2034  y([0, 0, 0, 3, 4
+00026070: 2c20 355d 290d 0a0d 0a20 2020 2020 2020  , 5])....       
+00026080: 2052 6570 6c61 6365 2065 6163 6820 696e   Replace each in
+00026090: 7374 616e 6365 206f 6620 4e61 4e20 7769  stance of NaN wi
+000260a0: 7468 2061 2064 6966 6665 7265 6e74 2076  th a different v
+000260b0: 616c 7565 3a0d 0a0d 0a20 2020 2020 2020  alue:....       
+000260c0: 203e 3e3e 2061 2e66 696c 6c6e 6128 5b30   >>> a.fillna([0
+000260d0: 2c20 322c 2033 2c20 345d 290d 0a20 2020  , 2, 3, 4])..   
+000260e0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+000260f0: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
+00026100: 342e 2c20 352e 5d29 0d0a 0d0a 2020 2020  4., 5.])....    
+00026110: 2020 2020 5072 6f70 6167 6174 6520 7468      Propagate th
+00026120: 6520 6c61 7374 2065 6e63 6f75 6e74 6572  e last encounter
+00026130: 6564 2076 616c 6964 2076 616c 7565 2066  ed valid value f
+00026140: 6f72 7761 7264 2e20 4e6f 7465 2074 6861  orward. Note tha
+00026150: 7420 7768 6572 6520 7468 6572 6527 7320  t where there's 
+00026160: 6e6f 0d0a 2020 2020 2020 2020 7661 6c69  no..        vali
+00026170: 6420 7661 6c75 6520 746f 2070 726f 7061  d value to propa
+00026180: 6761 7465 2c20 7468 6520 4e61 4e20 6f72  gate, the NaN or
+00026190: 2069 6e76 616c 6964 2076 616c 7565 2069   invalid value i
+000261a0: 736e 2774 2072 6570 6c61 6365 642e 0d0a  sn't replaced...
+000261b0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+000261c0: 6669 6c6c 6e61 286d 6574 686f 6420 3d20  fillna(method = 
+000261d0: 2766 6669 6c6c 2729 0d0a 2020 2020 2020  'ffill')..      
+000261e0: 2020 4661 7374 4172 7261 7928 5b6e 616e    FastArray([nan
+000261f0: 2c20 2031 2e2c 2020 312e 2c20 2031 2e2c  ,  1.,  1.,  1.,
+00026200: 2020 312e 2c20 2035 2e5d 290d 0a0d 0a20    1.,  5.]).... 
+00026210: 2020 2020 2020 2059 6f75 2063 616e 2075         You can u
+00026220: 7365 2074 6865 2060 7661 6c75 6560 2070  se the `value` p
+00026230: 6172 616d 6574 6572 2074 6f20 7370 6563  arameter to spec
+00026240: 6966 7920 6120 7661 6c75 6520 746f 2075  ify a value to u
+00026250: 7365 2077 6865 7265 2074 6865 7265 2773  se where there's
+00026260: 206e 6f0d 0a20 2020 2020 2020 2076 616c   no..        val
+00026270: 6964 2076 616c 7565 2074 6f20 7072 6f70  id value to prop
+00026280: 6167 6174 652e 0d0a 0d0a 2020 2020 2020  agate.....      
+00026290: 2020 3e3e 3e20 612e 6669 6c6c 6e61 2876    >>> a.fillna(v
+000262a0: 616c 7565 203d 2030 2c20 6d65 7468 6f64  alue = 0, method
+000262b0: 203d 2027 6666 696c 6c27 290d 0a20 2020   = 'ffill')..   
+000262c0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+000262d0: 302e 2c20 312e 2c20 312e 2c20 312e 2c20  0., 1., 1., 1., 
+000262e0: 312e 2c20 352e 5d29 0d0a 0d0a 2020 2020  1., 5.])....    
+000262f0: 2020 2020 5265 706c 6163 6520 6f6e 6c79      Replace only
+00026300: 2074 6865 2066 6972 7374 204e 614e 206f   the first NaN o
+00026310: 7220 696e 7661 6c69 6420 7661 6c75 6520  r invalid value 
+00026320: 696e 2061 6e79 2063 6f6e 7365 6375 7469  in any consecuti
+00026330: 7665 2073 6572 6965 7320 6f66 204e 614e  ve series of NaN
+00026340: 206f 720d 0a20 2020 2020 2020 2069 6e76   or..        inv
+00026350: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
+00026360: 2020 2020 2020 2020 3e3e 3e20 612e 6669          >>> a.fi
+00026370: 6c6c 6e61 286d 6574 686f 6420 3d20 2762  llna(method = 'b
+00026380: 6669 6c6c 272c 206c 696d 6974 203d 2031  fill', limit = 1
+00026390: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+000263a0: 7272 6179 285b 2031 2e2c 2020 312e 2c20  rray([ 1.,  1., 
+000263b0: 6e61 6e2c 206e 616e 2c20 2035 2e2c 2020  nan, nan,  5.,  
+000263c0: 352e 5d29 0d0a 2020 2020 2020 2020 2222  5.])..        ""
+000263d0: 220d 0a20 2020 2020 2020 2069 6620 6d65  "..        if me
+000263e0: 7468 6f64 2069 7320 6e6f 7420 4e6f 6e65  thod is not None
+000263f0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00026400: 6620 6d65 7468 6f64 2069 6e20 5b22 6261  f method in ["ba
+00026410: 636b 6669 6c6c 222c 2022 6266 696c 6c22  ckfill", "bfill"
+00026420: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00026430: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00026440: 6669 6c6c 5f62 6163 6b77 6172 6428 7661  fill_backward(va
+00026450: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
+00026460: 6c61 6365 2c20 6c69 6d69 743d 6c69 6d69  lace, limit=limi
+00026470: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00026480: 6966 206d 6574 686f 6420 696e 205b 2270  if method in ["p
+00026490: 6164 222c 2022 6666 696c 6c22 5d3a 0d0a  ad", "ffill"]:..
+000264a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000264b0: 7265 7475 726e 2073 656c 662e 6669 6c6c  return self.fill
+000264c0: 5f66 6f72 7761 7264 2876 616c 7565 2c20  _forward(value, 
+000264d0: 696e 706c 6163 653d 696e 706c 6163 652c  inplace=inplace,
+000264e0: 206c 696d 6974 3d6c 696d 6974 290d 0a20   limit=limit).. 
+000264f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00026500: 204b 6579 4572 726f 7228 6622 6669 6c6c   KeyError(f"fill
+00026510: 6e61 3a20 5468 6520 6d65 7468 6f64 207b  na: The method {
+00026520: 6d65 7468 6f64 2172 7d20 6d75 7374 2062  method!r} must b
+00026530: 6520 2762 6163 6b66 696c 6c27 2c20 2762  e 'backfill', 'b
+00026540: 6669 6c6c 272c 2027 7061 6427 2c20 2766  fill', 'pad', 'f
+00026550: 6669 6c6c 2722 290d 0a0d 0a20 2020 2020  fill'")....     
+00026560: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
+00026570: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00026580: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00026590: 6f72 2866 2266 696c 6c6e 613a 204d 7573  or(f"fillna: Mus
+000265a0: 7420 7370 6563 6966 7920 6569 7468 6572  t specify either
+000265b0: 2061 2027 7661 6c75 6527 2074 6861 7420   a 'value' that 
+000265c0: 6973 206e 6f74 204e 6f6e 6520 6f72 2061  is not None or a
+000265d0: 2027 6d65 7468 6f64 2720 7468 6174 2069   'method' that i
+000265e0: 7320 6e6f 7420 4e6f 6e65 2e22 290d 0a0d  s not None.")...
+000265f0: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
+00026600: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+00026610: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00026620: 6520 4b65 7945 7272 6f72 2866 2266 696c  e KeyError(f"fil
+00026630: 6c6e 613a 2054 6865 7265 2069 7320 6e6f  lna: There is no
+00026640: 206c 696d 6974 2077 6865 6e20 6d65 7468   limit when meth
+00026650: 6f64 2069 7320 4e6f 6e65 2229 0d0a 0d0a  od is None")....
+00026660: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00026670: 656c 662e 7265 706c 6163 656e 6128 7661  elf.replacena(va
+00026680: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
+00026690: 6c61 6365 290d 0a0d 0a20 2020 2064 6566  lace)....    def
+000266a0: 2073 7461 7478 2873 656c 6629 202d 3e20   statx(self) -> 
+000266b0: 4461 7461 7365 743a 0d0a 2020 2020 2020  Dataset:..      
+000266c0: 2020 7265 7475 726e 2073 7461 7478 2873    return statx(s
+000266d0: 656c 6629 0d0a 0d0a 2020 2020 2320 2d2d  elf)....    # --
+000266e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000266f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026720: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00026730: 6566 205f 6973 5f6e 6f74 5f73 7570 706f  ef _is_not_suppo
+00026740: 7274 6564 2873 656c 662c 2061 7272 293a  rted(self, arr):
+00026750: 0d0a 2020 2020 2020 2020 2222 2272 6574  ..        """ret
+00026760: 7572 6e73 2054 7275 6520 6966 2061 206e  urns True if a n
+00026770: 756d 7079 2061 7272 6179 2069 7320 6e6f  umpy array is no
+00026780: 7420 4661 7374 4172 7261 7920 696e 7465  t FastArray inte
+00026790: 726e 616c 6c79 2073 7570 706f 7274 6564  rnally supported
+000267a0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+000267b0: 6e6f 7420 2861 7272 2e66 6c61 6773 2e63  not (arr.flags.c
+000267c0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2061  _contiguous or a
+000267d0: 7272 2e66 6c61 6773 2e66 5f63 6f6e 7469  rr.flags.f_conti
+000267e0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
+000267f0: 2020 2020 2023 2054 4f44 4f20 656e 6162       # TODO enab
+00026800: 6c65 2074 6869 7320 7761 726e 696e 6720  le this warning 
+00026810: 696e 2061 2066 7574 7572 6520 6d69 6e6f  in a future mino
+00026820: 7220 7265 6c65 6173 650d 0a20 2020 2020  r release..     
+00026830: 2020 2020 2020 2023 2046 6173 7441 7272         # FastArr
+00026840: 6179 2e5f 706f 7373 6962 6c79 5f77 6172  ay._possibly_war
+00026850: 6e28 6627 5f69 735f 6e6f 745f 7375 7070  n(f'_is_not_supp
+00026860: 6f72 7465 643a 2075 6e73 7570 706f 7274  orted: unsupport
+00026870: 6564 2061 7272 6179 2066 6c61 6773 207b  ed array flags {
+00026880: 6172 722e 666c 6167 737d 2729 0d0a 2020  arr.flags}')..  
+00026890: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000268a0: 2054 7275 650d 0a20 2020 2020 2020 2069   True..        i
+000268b0: 6620 6172 722e 6474 7970 652e 6368 6172  f arr.dtype.char
+000268c0: 206e 6f74 2069 6e20 4e75 6d70 7943 6861   not in NumpyCha
+000268d0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
+000268e0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+000268f0: 2054 4f44 4f20 656e 6162 6c65 2074 6869   TODO enable thi
+00026900: 7320 7761 726e 696e 6720 696e 2061 2066  s warning in a f
+00026910: 7574 7572 6520 6d69 6e6f 7220 7265 6c65  uture minor rele
+00026920: 6173 650d 0a20 2020 2020 2020 2020 2020  ase..           
+00026930: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
+00026940: 7373 6962 6c79 5f77 6172 6e28 6627 5f69  ssibly_warn(f'_i
+00026950: 735f 6e6f 745f 7375 7070 6f72 7465 643a  s_not_supported:
+00026960: 2075 6e73 7570 706f 7274 6564 2061 7272   unsupported arr
+00026970: 6179 2064 7479 7065 207b 6172 722e 6474  ay dtype {arr.dt
+00026980: 7970 657d 5c6e 5375 7070 6f72 7465 6420  ype}\nSupported 
+00026990: 6474 7970 6573 207b 4e75 6d70 7943 6861  dtypes {NumpyCha
+000269a0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
+000269b0: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
+000269c0: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
+000269d0: 2020 2020 2020 6966 206c 656e 2861 7272        if len(arr
+000269e0: 2e73 7472 6964 6573 2920 3d3d 2030 3a0d  .strides) == 0:.
+000269f0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00026a00: 4f44 4f20 656e 6162 6c65 2074 6869 7320  ODO enable this 
+00026a10: 7761 726e 696e 6720 696e 2061 2066 7574  warning in a fut
+00026a20: 7572 6520 6d69 6e6f 7220 7265 6c65 6173  ure minor releas
+00026a30: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
+00026a40: 2046 6173 7441 7272 6179 2e5f 706f 7373   FastArray._poss
+00026a50: 6962 6c79 5f77 6172 6e28 6627 5f69 735f  ibly_warn(f'_is_
+00026a60: 6e6f 745f 7375 7070 6f72 7465 643a 2075  not_supported: u
+00026a70: 6e73 7570 706f 7274 6564 2061 7272 6179  nsupported array
+00026a80: 2073 7472 6964 6573 207b 6172 722e 7374   strides {arr.st
+00026a90: 7269 6465 737d 2729 0d0a 2020 2020 2020  rides}')..      
+00026aa0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00026ab0: 650d 0a20 2020 2020 2020 2072 6574 7572  e..        retur
+00026ac0: 6e20 4661 6c73 650d 0a0d 0a20 2020 2023  n False....    #
+00026ad0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00026ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+00026b20: 2020 6465 6620 5f5f 6172 7261 795f 6675    def __array_fu
+00026b30: 6e63 7469 6f6e 5f5f 2873 656c 662c 2066  nction__(self, f
+00026b40: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
+00026b50: 2c20 6b77 6172 6773 293a 0d0a 2020 2020  , kwargs):..    
+00026b60: 2020 2020 6966 2073 656c 662e 4e45 575f      if self.NEW_
+00026b70: 4152 5241 595f 4655 4e43 5449 4f4e 5f45  ARRAY_FUNCTION_E
+00026b80: 4e41 424c 4544 3a0d 0a20 2020 2020 2020  NABLED:..       
+00026b90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00026ba0: 2e5f 6e65 775f 6172 7261 795f 6675 6e63  ._new_array_func
+00026bb0: 7469 6f6e 2866 756e 632c 2074 7970 6573  tion(func, types
+00026bc0: 2c20 6172 6773 2c20 6b77 6172 6773 290d  , args, kwargs).
+00026bd0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00026be0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00026bf0: 726e 2073 656c 662e 5f6c 6567 6163 795f  rn self._legacy_
+00026c00: 6172 7261 795f 6675 6e63 7469 6f6e 2866  array_function(f
+00026c10: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
+00026c20: 2c20 6b77 6172 6773 290d 0a0d 0a20 2020  , kwargs)....   
+00026c30: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00026c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00026c80: 2020 2020 6465 6620 5f6c 6567 6163 795f      def _legacy_
+00026c90: 6172 7261 795f 6675 6e63 7469 6f6e 2873  array_function(s
+00026ca0: 656c 662c 2066 756e 632c 2074 7970 6573  elf, func, types
+00026cb0: 2c20 6172 6773 2c20 6b77 6172 6773 293a  , args, kwargs):
+00026cc0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00026cd0: 2020 2020 2020 2043 616c 6c65 6420 6265         Called be
+00026ce0: 666f 7265 2061 7272 6179 5f75 6675 6e63  fore array_ufunc
+00026cf0: 2e0d 0a20 2020 2020 2020 2044 6f65 7320  ...        Does 
+00026d00: 6e6f 7420 6765 7420 6361 6c6c 6564 2066  not get called f
+00026d10: 6f72 2065 7665 7279 2066 756e 6374 696f  or every functio
+00026d20: 6e20 6e70 2e69 736e 616e 2f74 7275 6e63  n np.isnan/trunc
+00026d30: 2f74 7275 655f 6469 7669 6465 2066 6f72  /true_divide for
+00026d40: 2069 6e73 7461 6e63 652e 0d0a 2020 2020   instance...    
+00026d50: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00026d60: 2072 6564 7563 6546 756e 6320 3d20 4e55   reduceFunc = NU
+00026d70: 4d50 595f 434f 4e56 4552 5349 4f4e 5f54  MPY_CONVERSION_T
+00026d80: 4142 4c45 2e67 6574 2866 756e 632c 204e  ABLE.get(func, N
+00026d90: 6f6e 6529 0d0a 0d0a 2020 2020 2020 2020  one)....        
+00026da0: 2320 544f 444f 3a0d 0a20 2020 2020 2020  # TODO:..       
+00026db0: 2023 206b 7761 7267 7320 6f66 2027 6178   # kwargs of 'ax
+00026dc0: 6973 273a 204e 6f6e 6520 2027 6f75 7427  is': None  'out'
+00026dd0: 3a20 4e6f 6e65 2073 686f 756c 6420 6265  : None should be
+00026de0: 2061 6363 6570 7465 640d 0a0d 0a20 2020   accepted....   
+00026df0: 2020 2020 2069 6620 7265 6475 6365 4675       if reduceFu
+00026e00: 6e63 2069 7320 6e6f 7420 4e6f 6e65 2061  nc is not None a
+00026e10: 6e64 206c 656e 286b 7761 7267 7329 203d  nd len(kwargs) =
+00026e20: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
+00026e30: 2020 2320 7370 6565 6420 7061 7468 2028    # speed path (
+00026e40: 746f 646f 2061 6464 2063 616c 6c20 746f  todo add call to
+00026e50: 206c 6564 6765 7229 0d0a 2020 2020 2020   ledger)..      
+00026e60: 2020 2020 2020 2320 6465 6661 756c 7420        # default 
+00026e70: 746f 2064 646f 663d 3020 7768 656e 206e  to ddof=0 when n
+00026e80: 6f20 6b77 6172 6773 2070 6173 7365 640d  o kwargs passed.
+00026e90: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00026ea0: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
+00026eb0: 6172 6773 5b30 5d2c 2072 6564 7563 6546  args[0], reduceF
+00026ec0: 756e 632c 2030 290d 0a0d 0a20 2020 2020  unc, 0)....     
+00026ed0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00026ee0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00026ef0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00026f00: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+00026f10: 7468 4c65 6467 6572 2e5f 5245 4455 4345  thLedger._REDUCE
+00026f20: 2861 7267 735b 305d 2c20 6e65 7766 756e  (args[0], newfun
+00026f30: 6329 0d0a 0d0a 2020 2020 2020 2020 2020  c)....          
+00026f40: 2020 2020 2020 6474 7970 6520 3d20 6b77        dtype = kw
+00026f50: 6172 6773 2e67 6574 2822 6474 7970 6522  args.get("dtype"
+00026f60: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+00026f70: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
+00026f80: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
+00026f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026fa0: 2020 2020 2320 7573 6572 2066 6f72 6365      # user force
+00026fb0: 6420 6474 7970 6520 7265 7475 726e 2076  d dtype return v
+00026fc0: 616c 7565 0d0a 2020 2020 2020 2020 2020  alue..          
+00026fd0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00026fe0: 2064 7479 7065 2872 6573 756c 7429 0d0a   dtype(result)..
+00026ff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027000: 2020 2320 7072 6573 6572 7665 2074 7970    # preserve typ
+00027010: 6520 666f 7220 6d69 6e2f 6d61 782f 6e61  e for min/max/na
+00027020: 6e6d 696e 2f6e 616e 6d61 780d 0a20 2020  nmin/nanmax..   
+00027030: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00027040: 7265 6475 6365 4675 6e63 2069 6e20 5b0d  reduceFunc in [.
+00027050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027060: 2020 2020 2052 4544 5543 455f 4655 4e43       REDUCE_FUNC
+00027070: 5449 4f4e 532e 5245 4455 4345 5f4d 494e  TIONS.REDUCE_MIN
+00027080: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00027090: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
+000270a0: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
+000270b0: 414e 4d49 4e2c 0d0a 2020 2020 2020 2020  ANMIN,..        
+000270c0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
+000270d0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
+000270e0: 5543 455f 4d41 582c 0d0a 2020 2020 2020  UCE_MAX,..      
+000270f0: 2020 2020 2020 2020 2020 2020 2020 5245                RE
+00027100: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00027110: 4544 5543 455f 4e41 4e4d 4158 2c0d 0a20  EDUCE_NANMAX,.. 
+00027120: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00027130: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00027140: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00027150: 6c66 2e64 7479 7065 2e74 7970 6528 7265  lf.dtype.type(re
+00027160: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
+00027170: 2020 2020 2020 2020 2023 2069 6e74 6572           # inter
+00027180: 6e61 6c6c 7920 6e75 6d70 7920 6578 7065  nally numpy expe
+00027190: 6374 7320 6120 6474 7970 6520 7265 7475  cts a dtype retu
+000271a0: 726e 6564 2066 6f72 206e 616e 7374 6420  rned for nanstd 
+000271b0: 616e 6420 6f74 6865 7220 6361 6c63 756c  and other calcul
+000271c0: 6174 696f 6e73 0d0a 2020 2020 2020 2020  ations..        
+000271d0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000271e0: 7461 6e63 6528 7265 7375 6c74 2c20 2869  tance(result, (i
+000271f0: 6e74 2c20 6e70 2e69 6e74 6567 6572 2929  nt, np.integer))
+00027200: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00027210: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
+00027220: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
+00027230: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
+00027240: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
+00027250: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00027260: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
+00027270: 756d 7079 4368 6172 5479 7065 732e 556e  umpyCharTypes.Un
+00027280: 7369 676e 6564 496e 7465 6765 7236 343a  signedInteger64:
+00027290: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000272a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000272b0: 206e 702e 7569 6e74 3634 2872 6573 756c   np.uint64(resul
+000272c0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+000272d0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+000272e0: 702e 696e 7436 3428 7265 7375 6c74 290d  p.int64(result).
+000272f0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00027300: 2020 2072 6574 7572 6e20 6e70 2e66 6c6f     return np.flo
+00027310: 6174 3634 2872 6573 756c 7429 0d0a 2020  at64(result)..  
+00027320: 2020 2020 2020 2320 6361 6c6c 2074 6865        # call the
+00027330: 2076 6572 7369 6f6e 206e 756d 7079 2077   version numpy w
+00027340: 616e 7465 6420 7573 6520 746f 0d0a 2020  anted use to..  
+00027350: 2020 2020 2020 7265 7475 726e 2073 7570        return sup
+00027360: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
+00027370: 6c66 292e 5f5f 6172 7261 795f 6675 6e63  lf).__array_func
+00027380: 7469 6f6e 5f5f 2866 756e 632c 2074 7970  tion__(func, typ
+00027390: 6573 2c20 6172 6773 2c20 6b77 6172 6773  es, args, kwargs
+000273a0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+000273b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000273c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000273d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000273e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000273f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00027400: 5f6e 6577 5f61 7272 6179 5f66 756e 6374  _new_array_funct
+00027410: 696f 6e28 7365 6c66 2c20 6675 6e63 3a20  ion(self, func: 
+00027420: 4361 6c6c 6162 6c65 2c20 7479 7065 733a  Callable, types:
+00027430: 2074 7570 6c65 2c20 6172 6773 3a20 7475   tuple, args: tu
+00027440: 706c 652c 206b 7761 7267 733a 2064 6963  ple, kwargs: dic
+00027450: 7429 3a0d 0a20 2020 2020 2020 2022 2222  t):..        """
+00027460: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00027470: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
+00027480: 6f6e 206f 6620 7468 6520 6172 7261 7920  on of the array 
+00027490: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
+000274a0: 6c2e 0d0a 0d0a 2020 2020 2020 2020 5061  l.....        Pa
+000274b0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+000274c0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+000274d0: 2020 2020 2020 6675 6e63 3a20 6361 6c6c        func: call
+000274e0: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
+000274f0: 2020 416e 2063 616c 6c61 626c 6520 6578    An callable ex
+00027500: 706f 7365 6420 6279 204e 756d 5079 e280  posed by NumPy..
+00027510: 9973 2070 7562 6c69 6320 4150 492c 2077  .s public API, w
+00027520: 6869 6368 2077 6173 2063 616c 6c65 6420  hich was called 
+00027530: 696e 2074 6865 2066 6f72 6d20 6060 6675  in the form ``fu
+00027540: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
+00027550: 6773 2960 602e 0d0a 2020 2020 2020 2020  gs)``...        
+00027560: 7479 7065 733a 2074 7570 6c65 0d0a 2020  types: tuple..  
+00027570: 2020 2020 2020 2020 2020 4120 7475 706c            A tupl
+00027580: 6520 6f66 2075 6e69 7175 6520 6172 6775  e of unique argu
+00027590: 6d65 6e74 2074 7970 6573 2066 726f 6d20  ment types from 
+000275a0: 7468 6520 6f72 6967 696e 616c 204e 756d  the original Num
+000275b0: 5079 2066 756e 6374 696f 6e20 6361 6c6c  Py function call
+000275c0: 2074 6861 7420 696d 706c 656d 656e 7420   that implement 
+000275d0: 6060 5f5f 6172 7261 795f 6675 6e63 7469  ``__array_functi
+000275e0: 6f6e 5f5f 6060 2e0d 0a20 2020 2020 2020  on__``...       
+000275f0: 2061 7267 733a 2074 7570 6c65 0d0a 2020   args: tuple..  
+00027600: 2020 2020 2020 2020 2020 5468 6520 7475            The tu
+00027610: 706c 6520 6f66 2061 7267 756d 656e 7473  ple of arguments
+00027620: 2074 6861 7420 7769 6c6c 2062 6520 7061   that will be pa
+00027630: 7373 6564 2074 6f20 6066 756e 6360 2e0d  ssed to `func`..
+00027640: 0a20 2020 2020 2020 206b 7761 7267 733a  .        kwargs:
+00027650: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
+00027660: 2020 2054 6865 2064 6963 7469 6f6e 6172     The dictionar
+00027670: 7920 6f66 206b 6579 776f 7264 2061 7267  y of keyword arg
+00027680: 756d 656e 7473 2074 6861 7420 7769 6c6c  uments that will
+00027690: 2062 6520 7061 7373 6564 2074 6f20 6066   be passed to `f
+000276a0: 756e 6360 2e0d 0a0d 0a20 2020 2020 2020  unc`.....       
+000276b0: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
+000276c0: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
+000276d0: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
+000276e0: 2020 2020 2020 2020 4966 2060 6675 6e63          If `func
+000276f0: 6020 6973 206e 6f74 206f 7665 7272 6964  ` is not overrid
+00027700: 6465 6e20 6279 2061 2063 6f72 7265 7370  den by a corresp
+00027710: 6f6e 6469 6e67 2072 6970 7461 626c 6520  onding riptable 
+00027720: 6172 7261 7920 6675 6e63 7469 6f6e 2074  array function t
+00027730: 6865 6e20 6120 5479 7065 4572 726f 7220  hen a TypeError 
+00027740: 6973 2072 6169 7365 642e 0d0a 0d0a 2020  is raised.....  
+00027750: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
+00027760: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
+00027770: 2020 2020 5468 6973 2061 7272 6179 2066      This array f
+00027780: 756e 6374 696f 6e20 696d 706c 656d 656e  unction implemen
+00027790: 7461 7469 6f6e 2072 6571 7569 7265 7320  tation requires 
+000277a0: 6561 6368 2063 6c61 7373 2c20 7375 6368  each class, such
+000277b0: 2061 7320 4661 7374 4172 7261 7920 616e   as FastArray an
+000277c0: 6420 616e 7920 6f74 6865 7220 6465 7269  d any other deri
+000277d0: 7665 6420 636c 6173 732c 0d0a 2020 2020  ved class,..    
+000277e0: 2020 2020 746f 2069 6d70 6c65 6d65 6e74      to implement
+000277f0: 2074 6865 6972 206f 776e 2076 6572 7369   their own versi
+00027800: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
+00027810: 6172 7261 7920 6675 6e63 7469 6f6e 2041  array function A
+00027820: 5049 2e20 496e 2074 6865 2065 7665 6e74  PI. In the event
+00027830: 2074 6865 7365 2061 7272 6179 2066 756e   these array fun
+00027840: 6374 696f 6e73 2064 6566 6572 2074 6f20  ctions defer to 
+00027850: 7468 650d 0a20 2020 2020 2020 2069 6e68  the..        inh
+00027860: 6572 6974 696e 6720 636c 6173 7320 7468  eriting class th
+00027870: 6579 2077 696c 6c20 6e65 6564 2074 6f20  ey will need to 
+00027880: 6569 7468 6572 2072 652d 7772 6170 2074  either re-wrap t
+00027890: 6865 2072 6573 756c 7473 2069 6e20 7468  he results in th
+000278a0: 6520 636f 7272 6563 7420 7479 7065 206f  e correct type o
+000278b0: 7220 7261 6973 6520 6578 6365 7074 696f  r raise exceptio
+000278c0: 6e20 6966 2061 0d0a 2020 2020 2020 2020  n if a..        
+000278d0: 7061 7274 6963 756c 6172 206f 7065 7261  particular opera
+000278e0: 7469 6f6e 2069 7320 6e6f 7420 7765 6c6c  tion is not well
+000278f0: 2d64 6566 696e 6564 206e 6f72 206d 6561  -defined nor mea
+00027900: 6e69 6e67 6675 6c20 666f 7220 7468 6520  ningful for the 
+00027910: 6465 7269 7665 6420 636c 6173 732e 0d0a  derived class...
+00027920: 2020 2020 2020 2020 4966 2061 6e20 6172          If an ar
+00027930: 7261 7920 6675 6e63 7469 6f6e 2c20 7768  ray function, wh
+00027940: 6963 6820 6973 2061 6c73 6f20 6120 756e  ich is also a un
+00027950: 6976 6572 7361 6c20 6675 6e63 7469 6f6e  iversal function
+00027960: 2c20 6973 206e 6f74 206f 7665 7272 6964  , is not overrid
+00027970: 6465 6e20 6173 2061 6e20 6172 7261 7920  den as an array 
+00027980: 6675 6e63 7469 6f6e 2c20 6275 7420 6465  function, but de
+00027990: 6669 6e65 640d 0a20 2020 2020 2020 2061  fined..        a
+000279a0: 7320 6120 7566 756e 6320 7468 656e 2069  s a ufunc then i
+000279b0: 7420 7769 6c6c 206e 6f74 2062 6520 6361  t will not be ca
+000279c0: 6c6c 6564 2075 6e6c 6573 7320 6974 2069  lled unless it i
+000279d0: 7320 7265 6769 7374 6572 6564 2077 6974  s registered wit
+000279e0: 6820 7468 6520 6172 7261 7920 6675 6e63  h the array func
+000279f0: 7469 6f6e 2068 656c 7065 7220 7369 6e63  tion helper sinc
+00027a00: 6520 6172 7261 7920 6675 6e63 7469 6f6e  e array function
+00027a10: 0d0a 2020 2020 2020 2020 7072 6f74 6f63  ..        protoc
+00027a20: 6f6c 2074 616b 6573 2070 7269 6f72 6974  ol takes priorit
+00027a30: 7920 6f76 6572 2074 6865 2075 6e69 7665  y over the unive
+00027a40: 7273 616c 2066 756e 6374 696f 6e20 7072  rsal function pr
+00027a50: 6f74 6f63 6f6c 2e0d 0a0d 0a20 2020 2020  otocol.....     
+00027a60: 2020 2052 6566 6572 656e 6365 3a20 604e     Reference: `N
+00027a70: 4550 2031 3820 4172 7261 7920 4675 6e63  EP 18 Array Func
+00027a80: 7469 6f6e 2050 726f 746f 636f 6c20 3c68  tion Protocol <h
+00027a90: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
+00027aa0: 2f6e 6570 732f 6e65 702d 3030 3138 2d61  /neps/nep-0018-a
+00027ab0: 7272 6179 2d66 756e 6374 696f 6e2d 7072  rray-function-pr
+00027ac0: 6f74 6f63 6f6c 2e68 746d 6c3e 605f 0d0a  otocol.html>`_..
+00027ad0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00027ae0: 2020 2020 2069 6620 6c6f 6767 6572 2e69       if logger.i
+00027af0: 7345 6e61 626c 6564 466f 7228 6c6f 6767  sEnabledFor(logg
+00027b00: 696e 672e 4445 4255 4729 3a0d 0a20 2020  ing.DEBUG):..   
+00027b10: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00027b20: 6465 6275 6728 0d0a 2020 2020 2020 2020  debug(..        
+00027b30: 2020 2020 2020 2020 6622 7b46 6173 7441          f"{FastA
+00027b40: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
+00027b50: 6e65 775f 6172 7261 795f 6675 6e63 7469  new_array_functi
+00027b60: 6f6e 2866 756e 3d7b 6675 6e63 7d2c 2074  on(fun={func}, t
+00027b70: 7970 6573 3d7b 7479 7065 737d 2c20 6172  ypes={types}, ar
+00027b80: 6773 3d7b 6172 6773 7d2c 206b 7761 7267  gs={args}, kwarg
+00027b90: 733d 7b6b 7761 7267 737d 2922 0d0a 2020  s={kwargs})"..  
+00027ba0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00027bb0: 2020 2020 2023 2068 616e 646c 6520 6066       # handle `f
+00027bc0: 756e 6360 2061 7267 756d 656e 740d 0a20  unc` argument.. 
+00027bd0: 2020 2020 2020 2061 7272 6179 5f66 756e         array_fun
+00027be0: 633a 2043 616c 6c61 626c 6520 3d20 4661  c: Callable = Fa
+00027bf0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
+00027c00: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
+00027c10: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
+00027c20: 6675 6e63 290d 0a20 2020 2020 2020 2069  func)..        i
+00027c30: 6620 6172 7261 795f 6675 6e63 2069 7320  f array_func is 
+00027c40: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00027c50: 2020 2023 2066 616c 6c62 6163 6b20 746f     # fallback to
+00027c60: 206e 756d 7079 2066 6f72 2075 6e68 616e   numpy for unhan
+00027c70: 646c 6564 2061 7272 6179 2066 756e 6374  dled array funct
+00027c80: 696f 6e73 2061 6e64 2061 7474 656d 7074  ions and attempt
+00027c90: 2074 6f20 6361 7374 2062 6163 6b20 746f   to cast back to
+00027ca0: 2046 6173 7441 7272 6179 0d0a 2020 2020   FastArray..    
+00027cb0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00027cc0: 2073 7570 6572 2829 2e5f 5f61 7272 6179   super().__array
+00027cd0: 5f66 756e 6374 696f 6e5f 5f28 6675 6e63  _function__(func
+00027ce0: 2c20 7479 7065 732c 2061 7267 732c 206b  , types, args, k
+00027cf0: 7761 7267 7329 0d0a 2020 2020 2020 2020  wargs)..        
+00027d00: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
+00027d10: 204e 6f74 496d 706c 656d 656e 7465 643a   NotImplemented:
+00027d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027d30: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
+00027d40: 656d 656e 7465 640d 0a20 2020 2020 2020  emented..       
+00027d50: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00027d60: 616e 6365 2872 6573 756c 742c 206e 702e  ance(result, np.
+00027d70: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
+00027d80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00027d90: 6e20 7265 7375 6c74 2e76 6965 7728 4661  n result.view(Fa
+00027da0: 7374 4172 7261 7929 0d0a 2020 2020 2020  stArray)..      
+00027db0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00027dc0: 7461 6e63 6528 7265 7375 6c74 2c20 6c69  tance(result, li
+00027dd0: 7374 293a 0d0a 2020 2020 2020 2020 2020  st):..          
+00027de0: 2020 2020 2020 7265 7475 726e 205b 2878        return [(x
+00027df0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+00027e00: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
+00027e10: 2c20 6e70 2e6e 6461 7272 6179 2920 656c  , np.ndarray) el
+00027e20: 7365 2078 2920 666f 7220 7820 696e 2072  se x) for x in r
+00027e30: 6573 756c 745d 0d0a 2020 2020 2020 2020  esult]..        
+00027e40: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00027e50: 6e63 6528 7265 7375 6c74 2c20 7475 706c  nce(result, tupl
+00027e60: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00027e70: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
+00027e80: 6528 5b28 782e 7669 6577 2846 6173 7441  e([(x.view(FastA
+00027e90: 7272 6179 2920 6966 2069 7369 6e73 7461  rray) if isinsta
+00027ea0: 6e63 6528 782c 206e 702e 6e64 6172 7261  nce(x, np.ndarra
+00027eb0: 7929 2065 6c73 6520 7829 2066 6f72 2078  y) else x) for x
+00027ec0: 2069 6e20 7265 7375 6c74 5d29 0d0a 2020   in result])..  
+00027ed0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00027ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027ef0: 2023 2055 6e6b 6e6f 776e 2072 6573 756c   # Unknown resul
+00027f00: 7420 7479 7065 2e0d 0a20 2020 2020 2020  t type...       
+00027f10: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+00027f20: 7970 6545 7272 6f72 2866 2255 6e6b 6e6f  ypeError(f"Unkno
+00027f30: 776e 2072 6573 756c 7420 7479 7065 2027  wn result type '
+00027f40: 7b74 7970 6528 7265 7375 6c74 297d 2720  {type(result)}' 
+00027f50: 7265 7475 726e 6564 2062 7920 6e64 6172  returned by ndar
+00027f60: 7261 792e 7b66 756e 637d 2e22 290d 0a0d  ray.{func}.")...
+00027f70: 0a20 2020 2020 2020 2023 2068 616e 646c  .        # handl
+00027f80: 6520 6074 7970 6573 6020 6172 6775 6d65  e `types` argume
+00027f90: 6e74 0d0a 2020 2020 2020 2020 6172 7261  nt..        arra
+00027fa0: 795f 6675 6e63 5f74 7970 655f 6368 6563  y_func_type_chec
+00027fb0: 6b3a 2043 616c 6c61 626c 6520 3d20 4661  k: Callable = Fa
+00027fc0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
+00027fd0: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
+00027fe0: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
+00027ff0: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
+00028000: 7479 5f63 6865 636b 280d 0a20 2020 2020  ty_check(..     
+00028010: 2020 2020 2020 2066 756e 630d 0a20 2020         func..   
+00028020: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00028030: 6966 2061 7272 6179 5f66 756e 635f 7479  if array_func_ty
+00028040: 7065 5f63 6865 636b 2069 7320 4e6f 6e65  pe_check is None
+00028050: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00028060: 206e 6f20 6375 7374 6f6d 2074 7970 6520   no custom type 
+00028070: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
+00028080: 6563 6b3b 2064 6566 6175 6c74 2074 7970  eck; default typ
+00028090: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
+000280a0: 6368 6563 6b0d 0a20 2020 2020 2020 2020  check..         
+000280b0: 2020 2023 2074 6869 7320 616c 6c6f 7773     # this allows
+000280c0: 2073 7562 636c 6173 7365 7320 7468 6174   subclasses that
+000280d0: 2064 6f6e 2774 206f 7665 7272 6964 6520   don't override 
+000280e0: 5f5f 6172 7261 795f 6675 6e63 7469 6f6e  __array_function
+000280f0: 5f5f 2074 6f20 6861 6e64 6c65 2046 6173  __ to handle Fas
+00028100: 7441 7272 6179 206f 626a 6563 7473 0d0a  tArray objects..
+00028110: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00028120: 7479 7020 696e 2074 7970 6573 3a0d 0a20  typ in types:.. 
+00028130: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00028140: 6620 6e6f 7420 6973 7375 6263 6c61 7373  f not issubclass
+00028150: 2874 7970 2c20 4661 7374 4172 7261 7929  (typ, FastArray)
+00028160: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00028170: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
+00028180: 2e69 7345 6e61 626c 6564 466f 7228 6c6f  .isEnabledFor(lo
+00028190: 6767 696e 672e 4445 4255 4729 3a0d 0a20  gging.DEBUG):.. 
+000281a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000281b0: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
+000281c0: 6275 6728 6622 7b46 6173 7441 7272 6179  bug(f"{FastArray
+000281d0: 2e5f 5f6e 616d 655f 5f7d 2e5f 5f61 7272  .__name__}.__arr
+000281e0: 6179 5f66 756e 6374 696f 6e5f 5f3a 2075  ay_function__: u
+000281f0: 6e73 7570 706f 7274 6564 2074 7970 6520  nsupported type 
+00028200: 7b72 6570 7228 7479 7029 7d22 290d 0a20  {repr(typ)}").. 
+00028210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028220: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
+00028230: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
+00028240: 2020 656c 7365 3a20 2023 2063 7573 746f    else:  # custo
+00028250: 6d20 7479 7065 2063 6f6d 7061 7469 6269  m type compatibi
+00028260: 6c69 7479 2063 6865 636b 0d0a 2020 2020  lity check..    
+00028270: 2020 2020 2020 2020 7661 6c69 643a 2062          valid: b
+00028280: 6f6f 6c20 3d20 6172 7261 795f 6675 6e63  ool = array_func
+00028290: 5f74 7970 655f 6368 6563 6b28 7479 7065  _type_check(type
+000282a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+000282b0: 6966 206e 6f74 2076 616c 6964 3a0d 0a20  if not valid:.. 
+000282c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000282d0: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
+000282e0: 6564 466f 7228 6c6f 6767 696e 672e 4445  edFor(logging.DE
+000282f0: 4255 4729 3a0d 0a20 2020 2020 2020 2020  BUG):..         
+00028300: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
+00028310: 722e 6465 6275 6728 6622 7b46 6173 7441  r.debug(f"{FastA
+00028320: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
+00028330: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
+00028340: 5f3a 2075 6e73 7570 706f 7274 6564 2074  _: unsupported t
+00028350: 7970 6520 696e 207b 7265 7072 2874 7970  ype in {repr(typ
+00028360: 6573 297d 2229 0d0a 2020 2020 2020 2020  es)}")..        
+00028370: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00028380: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
+00028390: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000283a0: 6172 7261 795f 6675 6e63 282a 6172 6773  array_func(*args
+000283b0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000283c0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+000283d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000283e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000283f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028410: 0d0a 2020 2020 6465 6620 5f5f 6172 7261  ..    def __arra
+00028420: 795f 7566 756e 635f 5f28 7365 6c66 2c20  y_ufunc__(self, 
+00028430: 7566 756e 633a 2043 616c 6c61 626c 652c  ufunc: Callable,
+00028440: 206d 6574 686f 643a 2073 7472 2c20 2a69   method: str, *i
+00028450: 6e70 7574 733a 2041 6e79 2c20 2a2a 6b77  nputs: Any, **kw
+00028460: 6172 6773 3a20 416e 7929 3a0d 0a20 2020  args: Any):..   
+00028470: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00028480: 2020 5468 6520 4661 7374 4172 7261 7920    The FastArray 
+00028490: 756e 6976 6572 7361 6c20 6675 6e63 7469  universal functi
+000284a0: 6f6e 2028 6f72 2075 6675 6e63 2920 6f76  on (or ufunc) ov
+000284b0: 6572 7269 6465 206f 6666 6572 7320 6d75  erride offers mu
+000284c0: 6c74 6974 6872 6561 6465 6420 432f 432b  ltithreaded C/C+
+000284d0: 2b20 696d 706c 656d 656e 7461 7469 6f6e  + implementation
+000284e0: 2061 7420 7468 6520 5269 7074 6964 6543   at the RiptideC
+000284f0: 5050 206c 6179 6572 2e0d 0a0d 0a20 2020  PP layer.....   
+00028500: 2020 2020 2057 6865 6e20 4661 7374 4172       When FastAr
+00028510: 7261 7920 7265 6365 6976 6573 2061 2060  ray receives a `
+00028520: 7566 756e 6360 2063 616c 6c61 626c 6520  ufunc` callable 
+00028530: 6974 2077 696c 6c20 6174 7465 6d70 7420  it will attempt 
+00028540: 746f 2068 616e 646c 6520 6974 2069 6e20  to handle it in 
+00028550: 7072 696f 7269 7479 206f 7264 6572 3a0d  priority order:.
+00028560: 0a20 2020 2020 2020 2020 2020 2031 2e20  .            1. 
+00028570: 636f 6e73 6964 6572 696e 6720 6060 4661  considering ``Fa
+00028580: 7374 4172 7261 7960 6020 6060 4661 7374  stArray`` ``Fast
+00028590: 4675 6e63 7469 6f6e 6060 2069 7320 656e  Function`` is en
+000285a0: 6162 6c65 642c 2075 6675 6e63 2069 7320  abled, ufunc is 
+000285b0: 6861 6e64 6c65 6420 6279 2061 6e20 6578  handled by an ex
+000285c0: 706c 6963 6974 2075 6675 6e63 206f 7665  plicit ufunc ove
+000285d0: 7272 6964 652c 206f 7468 6572 7769 7365  rride, otherwise
+000285e0: 0d0a 2020 2020 2020 2020 2020 2020 322e  ..            2.
+000285f0: 2075 6675 6e63 2069 7320 6861 6e64 6c65   ufunc is handle
+00028600: 6420 6174 2074 6865 2052 6970 7461 626c  d at the Riptabl
+00028610: 6520 2f20 4e75 6d70 7920 4150 4920 6f76  e / Numpy API ov
+00028620: 6572 7269 6465 7320 6c65 7665 6c2c 206f  errides level, o
+00028630: 7468 6572 7769 7365 0d0a 2020 2020 2020  therwise..      
+00028640: 2020 2020 2020 332e 2075 6675 6e63 2069        3. ufunc i
+00028650: 7320 6861 6e64 6c65 6420 6174 2074 6865  s handled at the
+00028660: 204e 756d 7079 2041 5049 206c 6576 656c   Numpy API level
+00028670: 2e0d 0a0d 0a20 2020 2020 2020 2047 6976  .....        Giv
+00028680: 656e 2061 2063 6f6d 6269 6e61 7469 6f6e  en a combination
+00028690: 206f 6620 6075 6675 6e63 602c 2060 696e   of `ufunc`, `in
+000286a0: 7075 7473 602c 2061 6e64 2060 6b77 6172  puts`, and `kwar
+000286b0: 6773 602c 2069 6620 6e65 6974 6865 7220  gs`, if neither 
+000286c0: 6f66 2074 6865 2061 666f 7265 6d65 6e74  of the aforement
+000286d0: 696f 6e65 6420 6361 7365 7320 7375 7070  ioned cases supp
+000286e0: 6f72 7420 7468 6973 0d0a 2020 2020 2020  ort this..      
+000286f0: 2020 7468 656e 2061 2077 6172 6e69 6e67    then a warning
+00028700: 2069 7320 656d 6974 7465 642e 0d0a 0d0a   is emitted.....
+00028710: 2020 2020 2020 2020 5468 6520 666f 6c6c          The foll
+00028720: 6f77 696e 6720 7265 6665 7265 6e63 6573  owing references
+00028730: 2074 6f20 7375 7070 6f72 7465 6420 7566   to supported uf
+00028740: 756e 6373 2061 7265 2067 726f 7570 6564  uncs are grouped
+00028750: 2062 7920 6d65 7468 6f64 2074 7970 652e   by method type.
+00028760: 0d0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
+00028770: 466f 7220 606d 6574 686f 6460 2074 7970  For `method` typ
+00028780: 6520 6060 7265 6475 6365 6060 2c20 7365  e ``reduce``, se
+00028790: 6520 6060 6752 6564 7563 6555 4675 6e63  e ``gReduceUFunc
+000287a0: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
+000287b0: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
+000287c0: 2074 7970 6520 6060 5f5f 6361 6c6c 5f5f   type ``__call__
+000287d0: 6060 2c20 7365 6520 6060 6742 696e 6172  ``, see ``gBinar
+000287e0: 7955 4675 6e63 7360 602c 2060 6067 4269  yUFuncs``, ``gBi
+000287f0: 6e61 7279 4c6f 6769 6361 6c55 4675 6e63  naryLogicalUFunc
+00028800: 7360 602c 2060 6067 4269 6e61 7279 4269  s``, ``gBinaryBi
+00028810: 7477 6973 6555 4675 6e63 7360 602c 2061  twiseUFuncs``, a
+00028820: 6e64 2060 6067 556e 6172 7955 4675 6e63  nd ``gUnaryUFunc
+00028830: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
+00028840: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
+00028850: 2074 7970 6520 6060 6174 6060 2072 6574   type ``at`` ret
+00028860: 7572 6e20 6060 4e6f 6e65 6060 2e0d 0a0d  urn ``None``....
+00028870: 0a20 2020 2020 2020 2049 6620 606f 7574  .        If `out
+00028880: 6020 6172 6775 6d65 6e74 2069 7320 7370  ` argument is sp
+00028890: 6563 6966 6965 642c 2074 6865 6e20 616e  ecified, then an
+000288a0: 2065 7874 7261 2061 7272 6179 2063 6f70   extra array cop
+000288b0: 7920 6973 2070 6572 666f 726d 6564 206f  y is performed o
+000288c0: 6e20 7468 6520 7265 7375 6c74 206f 6620  n the result of 
+000288d0: 7468 6520 7566 756e 6320 636f 6d70 7574  the ufunc comput
+000288e0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
+000288f0: 2020 4966 2061 2060 6474 7970 6560 206b    If a `dtype` k
+00028900: 6579 776f 7264 2069 7320 7370 6563 6966  eyword is specif
+00028910: 6965 642c 2061 6c6c 2065 6666 6f72 7473  ied, all efforts
+00028920: 2061 7265 206d 6164 6520 746f 2072 6573   are made to res
+00028930: 7065 6374 2074 6865 2060 6474 7970 6560  pect the `dtype`
+00028940: 206f 6e20 7468 6520 7265 7375 6c74 206f   on the result o
+00028950: 6620 7468 6520 636f 6d70 7574 6174 696f  f the computatio
+00028960: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5061  n.....        Pa
+00028970: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00028980: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00028990: 2020 2020 2020 7566 756e 6320 3a20 6361        ufunc : ca
+000289a0: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
+000289b0: 2020 2020 5468 6520 7566 756e 6320 6f62      The ufunc ob
+000289c0: 6a65 6374 2074 6861 7420 7761 7320 6361  ject that was ca
+000289d0: 6c6c 6564 2e0d 0a20 2020 2020 2020 206d  lled...        m
+000289e0: 6574 686f 6420 3a20 7374 720d 0a20 2020  ethod : str..   
+000289f0: 2020 2020 2020 2020 2041 2073 7472 696e           A strin
+00028a00: 6720 696e 6469 6361 7469 6e67 2077 6869  g indicating whi
+00028a10: 6368 2055 6675 6e63 206d 6574 686f 6420  ch Ufunc method 
+00028a20: 7761 7320 6361 6c6c 6564 2028 6f6e 6520  was called (one 
+00028a30: 6f66 2022 5f5f 6361 6c6c 5f5f 222c 2022  of "__call__", "
+00028a40: 7265 6475 6365 222c 2022 7265 6475 6365  reduce", "reduce
+00028a50: 6174 222c 2022 6163 6375 6d75 6c61 7465  at", "accumulate
+00028a60: 222c 2022 6f75 7465 7222 2c20 2269 6e6e  ", "outer", "inn
+00028a70: 6572 2229 2e0d 0a20 2020 2020 2020 2069  er")...        i
+00028a80: 6e70 7574 730d 0a20 2020 2020 2020 2020  nputs..         
+00028a90: 2020 2041 2074 7570 6c65 206f 6620 7468     A tuple of th
+00028aa0: 6520 696e 7075 7420 6172 6775 6d65 6e74  e input argument
+00028ab0: 7320 746f 2074 6865 2075 6675 6e63 2e0d  s to the ufunc..
+00028ac0: 0a20 2020 2020 2020 206b 7761 7267 730d  .        kwargs.
+00028ad0: 0a20 2020 2020 2020 2020 2020 2041 2064  .            A d
+00028ae0: 6963 7469 6f6e 6172 7920 636f 6e74 6169  ictionary contai
+00028af0: 6e69 6e67 2074 6865 206f 7074 696f 6e61  ning the optiona
+00028b00: 6c20 696e 7075 7420 6172 6775 6d65 6e74  l input argument
+00028b10: 7320 6f66 2074 6865 2075 6675 6e63 2e20  s of the ufunc. 
+00028b20: 4966 2067 6976 656e 2c20 616e 7920 6f75  If given, any ou
+00028b30: 7420 6172 6775 6d65 6e74 732c 2062 6f74  t arguments, bot
+00028b40: 6820 706f 7369 7469 6f6e 616c 2061 6e64  h positional and
+00028b50: 206b 6579 776f 7264 2c20 6172 6520 7061   keyword, are pa
+00028b60: 7373 6564 2061 7320 6120 7475 706c 6520  ssed as a tuple 
+00028b70: 696e 206b 7761 7267 732e 0d0a 0d0a 2020  in kwargs.....  
+00028b80: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+00028b90: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+00028ba0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00028bb0: 6d65 7468 6f64 2073 686f 756c 6420 7265  method should re
+00028bc0: 7475 726e 2065 6974 6865 7220 7468 6520  turn either the 
+00028bd0: 7265 7375 6c74 206f 6620 7468 6520 6f70  result of the op
+00028be0: 6572 6174 696f 6e2c 206f 7220 4e6f 7449  eration, or NotI
+00028bf0: 6d70 6c65 6d65 6e74 6564 2069 6620 7468  mplemented if th
+00028c00: 6520 6f70 6572 6174 696f 6e20 7265 7175  e operation requ
+00028c10: 6573 7465 6420 6973 206e 6f74 2069 6d70  ested is not imp
+00028c20: 6c65 6d65 6e74 6564 2e0d 0a0d 0a20 2020  lemented.....   
+00028c30: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
+00028c40: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
+00028c50: 2020 2054 6865 2063 7572 7265 6e74 2069     The current i
+00028c60: 6d70 6c65 6d65 6e74 6174 696f 6e20 646f  mplementation do
+00028c70: 6573 206e 6f74 2073 7570 706f 7274 2074  es not support t
+00028c80: 6865 2066 6f6c 6c6f 7769 6e67 206b 6579  he following key
+00028c90: 776f 7264 2061 7267 756d 656e 7473 3a20  word arguments: 
+00028ca0: 6063 6173 7469 6e67 602c 2060 7369 6760  `casting`, `sig`
+00028cb0: 2c20 6073 6967 6e61 7475 7265 602c 2061  , `signature`, a
+00028cc0: 6e64 0d0a 2020 2020 2020 2020 6063 6f72  nd..        `cor
+00028cd0: 655f 7369 676e 6174 7572 6560 2e0d 0a0d  e_signature`....
+00028ce0: 0a20 2020 2020 2020 2049 7420 6861 7320  .        It has 
+00028cf0: 7061 7274 6961 6c20 7375 7070 6f72 7420  partial support 
+00028d00: 666f 7220 6b65 7977 6f72 6420 6172 6775  for keyword argu
+00028d10: 6d65 6e74 733a 2060 7768 6572 6560 2c20  ments: `where`, 
+00028d20: 6061 7869 7360 2c20 616e 6420 6061 7865  `axis`, and `axe
+00028d30: 7360 2c20 6966 2074 6865 7920 6d61 7463  s`, if they matc
+00028d40: 680d 0a20 2020 2020 2020 2074 6865 2064  h..        the d
+00028d50: 6566 6175 6c74 2076 616c 7565 732e 0d0a  efault values...
+00028d60: 0d0a 2020 2020 2020 2020 4966 2046 6173  ..        If Fas
+00028d70: 7441 7272 6179 2773 2060 6057 6172 6e69  tArray's ``Warni
+00028d80: 6e67 4c65 7665 6c60 6020 6973 2065 6e61  ngLevel`` is ena
+00028d90: 626c 6564 2c20 7468 656e 2077 6172 6e69  bled, then warni
+00028da0: 6e67 7320 7769 6c6c 2062 6520 656d 6974  ngs will be emit
+00028db0: 7465 6420 6966 2061 6e79 206f 6620 756e  ted if any of un
+00028dc0: 7375 7070 6f72 7465 6420 6f72 2070 6172  supported or par
+00028dd0: 7469 616c 6c79 0d0a 2020 2020 2020 2020  tially..        
+00028de0: 7375 7070 6f72 7465 6420 6b65 7977 6f72  supported keywor
+00028df0: 6420 6172 6775 6d65 6e74 7320 6172 6520  d arguments are 
+00028e00: 7061 7373 6564 2e0d 0a0d 0a20 2020 2020  passed.....     
+00028e10: 2020 2054 4f44 4f20 646f 6375 6d65 6e74     TODO document
+00028e20: 2063 7573 746f 6d20 7570 2063 6173 7469   custom up casti
+00028e30: 6e67 2072 756c 6573 2e0d 0a0d 0a20 2020  ng rules.....   
+00028e40: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00028e50: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00028e60: 0a20 2020 2020 2020 2046 6f72 206d 6f72  .        For mor
+00028e70: 6520 696e 666f 726d 6174 696f 6e20 6f6e  e information on
+00028e80: 2075 6675 6e63 2073 6565 2074 6865 2066   ufunc see the f
+00028e90: 6f6c 6c6f 7769 6e67 206e 756d 7079 2064  ollowing numpy d
+00028ea0: 6f63 756d 656e 7473 3a0d 0a20 2020 2020  ocuments:..     
+00028eb0: 2020 2020 2020 202d 2068 7474 7073 3a2f         - https:/
+00028ec0: 2f6e 756d 7079 2e6f 7267 2f64 6f63 2f73  /numpy.org/doc/s
+00028ed0: 7461 626c 652f 7265 6665 7265 6e63 652f  table/reference/
+00028ee0: 6172 7261 7973 2e63 6c61 7373 6573 2e68  arrays.classes.h
+00028ef0: 746d 6c23 6e75 6d70 792e 636c 6173 732e  tml#numpy.class.
+00028f00: 5f5f 6172 7261 795f 7566 756e 635f 5f0d  __array_ufunc__.
+00028f10: 0a20 2020 2020 2020 2020 2020 202d 2068  .            - h
+00028f20: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
+00028f30: 2f64 6f63 2f73 7461 626c 652f 7265 6665  /doc/stable/refe
+00028f40: 7265 6e63 652f 7566 756e 6373 2e68 746d  rence/ufuncs.htm
+00028f50: 6c0d 0a0d 0a20 2020 2020 2020 204e 6f74  l....        Not
+00028f60: 652c 2074 6865 2064 6f63 7374 7269 6e67  e, the docstring
+00028f70: 2050 6172 616d 6574 6572 7320 616e 6420   Parameters and 
+00028f80: 5265 7475 726e 2073 6563 7469 6f6e 2069  Return section i
+00028f90: 7320 7265 7065 6174 6564 2066 726f 6d20  s repeated from 
+00028fa0: 7468 6520 6e75 6d70 790d 0a20 2020 2020  the numpy..     
+00028fb0: 2020 2060 5f5f 6172 7261 795f 7566 756e     `__array_ufun
+00028fc0: 635f 5f60 2064 6f63 7374 7269 6e67 2073  c__` docstring s
+00028fd0: 696e 6365 2074 6869 7320 6973 206f 7665  ince this is ove
+00028fe0: 7272 6964 696e 6720 7468 6174 206d 6574  rriding that met
+00028ff0: 686f 642e 0d0a 2020 2020 2020 2020 2222  hod...        ""
+00029000: 220d 0a20 2020 2020 2020 2023 2054 4f44  "..        # TOD
+00029010: 4f20 636f 6e73 6964 6572 2075 7369 6e67  O consider using
+00029020: 2074 7970 6520 616e 6e6f 7461 7469 6f6e   type annotation
+00029030: 2074 7970 696e 672e 4669 6e61 6c20 666f   typing.Final fo
+00029040: 7220 7468 6573 6520 7265 6164 2d6f 6e6c  r these read-onl
+00029050: 7920 7661 7269 6162 6c65 7320 7768 656e  y variables when
+00029060: 206d 6f76 696e 6720 746f 2050 7974 686f   moving to Pytho
+00029070: 6e20 332e 380d 0a20 2020 2020 2020 2023  n 3.8..        #
+00029080: 2050 7974 686f 6e20 332e 3820 6164 6465   Python 3.8 adde
+00029090: 6420 7375 7070 6f72 7420 666f 7220 7479  d support for ty
+000290a0: 7069 6e67 2e46 696e 616c 2e20 4669 6e61  ping.Final. Fina
+000290b0: 6c20 7769 6c6c 2063 6174 6368 2075 6e69  l will catch uni
+000290c0: 6e74 656e 6465 6420 6173 7369 676e 6d65  ntended assignme
+000290d0: 6e74 7320 666f 7220 636f 6e73 7461 6e74  nts for constant
+000290e0: 7320 7768 656e 2072 756e 6e69 6e67 0d0a  s when running..
+000290f0: 2020 2020 2020 2020 2320 7374 6174 6963          # static
+00029100: 2074 7970 6520 6368 6563 6b65 7273 2073   type checkers s
+00029110: 7563 6820 6173 206d 7970 792e 0d0a 2020  uch as mypy...  
+00029120: 2020 2020 2020 5f55 4e53 5550 504f 5254        _UNSUPPORT
+00029130: 4544 5f4b 4559 574f 5244 533a 2054 7570  ED_KEYWORDS: Tup
+00029140: 6c65 5b73 7472 2c20 7374 722c 2073 7472  le[str, str, str
+00029150: 2c20 7374 725d 203d 2028 2263 6173 7469  , str] = ("casti
+00029160: 6e67 222c 2022 7369 6722 2c20 2273 6967  ng", "sig", "sig
+00029170: 6e61 7475 7265 222c 2022 636f 7265 5f73  nature", "core_s
+00029180: 6967 6e61 7475 7265 2229 0d0a 2020 2020  ignature")..    
+00029190: 2020 2020 5f50 4152 5449 414c 4c59 5f53      _PARTIALLY_S
+000291a0: 5550 504f 5254 4544 5f4b 4559 574f 5244  UPPORTED_KEYWORD
+000291b0: 535f 544f 5f44 4546 4155 4c54 533a 204d  S_TO_DEFAULTS: M
+000291c0: 6170 7069 6e67 5b73 7472 2c20 556e 696f  apping[str, Unio
+000291d0: 6e5b 4e6f 6e65 2c20 626f 6f6c 5d5d 203d  n[None, bool]] =
+000291e0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+000291f0: 2277 6865 7265 223a 2054 7275 652c 0d0a  "where": True,..
+00029200: 2020 2020 2020 2020 2020 2020 2261 7869              "axi
+00029210: 7322 3a20 4e6f 6e65 2c0d 0a20 2020 2020  s": None,..     
+00029220: 2020 2020 2020 2022 6178 6573 223a 204e         "axes": N
+00029230: 6f6e 652c 0d0a 2020 2020 2020 2020 7d0d  one,..        }.
+00029240: 0a20 2020 2020 2020 2074 6f70 6c65 7665  .        topleve
+00029250: 6c5f 6162 6f72 743a 2062 6f6f 6c20 3d20  l_abort: bool = 
+00029260: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
+00029270: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
+00029280: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
+00029290: 2020 2020 2020 2020 7072 696e 7428 222a          print("*
+000292a0: 2a2a 2074 6f70 206c 6576 656c 2061 7272  ** top level arr
+000292b0: 6179 5f75 6675 6e63 222c 2075 6675 6e63  ay_ufunc", ufunc
+000292c0: 2c20 6d65 7468 6f64 2c20 2a69 6e70 7574  , method, *input
+000292d0: 732c 206b 7761 7267 7329 0d0a 0d0a 2020  s, kwargs)....  
+000292e0: 2020 2020 2020 2320 666c 6970 2061 6e79        # flip any
+000292f0: 2069 6e70 7574 7320 7468 6174 2061 7265   inputs that are
+00029300: 2066 6173 7461 7272 6179 7320 6261 636b   fastarrays back
+00029310: 2074 6f20 616e 206e 6461 7272 6179 2e2e   to an ndarray..
+00029320: 2e0d 0a20 2020 2020 2020 2061 7267 733a  ...        args:
+00029330: 204c 6973 745b 416e 795d 203d 205b 5d0d   List[Any] = [].
+00029340: 0a20 2020 2020 2020 2066 6f72 2069 6e70  .        for inp
+00029350: 7574 2069 6e20 696e 7075 7473 3a0d 0a20  ut in inputs:.. 
+00029360: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00029370: 696e 7374 616e 6365 2869 6e70 7574 2c20  instance(input, 
+00029380: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
+00029390: 2020 2020 2020 2020 2020 2020 2020 6973                is
+000293a0: 5f6e 6f74 5f73 7570 706f 7274 6564 203d  _not_supported =
+000293b0: 2073 656c 662e 5f69 735f 6e6f 745f 7375   self._is_not_su
+000293c0: 7070 6f72 7465 6428 696e 7075 7429 0d0a  pported(input)..
 000293d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293e0: 2023 2063 6865 636b 2066 6f72 2063 6f6d   # check for com
-000293f0: 7061 7269 736f 6e20 616e 6420 6c6f 6769  parison and logi
-00029400: 6361 6c20 6f72 2f61 6e64 2066 756e 6374  cal or/and funct
-00029410: 696f 6e73 0d0a 2020 2020 2020 2020 2020  ions..          
-00029420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029430: 2020 6661 7374 5f66 756e 6374 696f 6e20    fast_function 
-00029440: 3d20 6742 696e 6172 794c 6f67 6963 616c  = gBinaryLogical
-00029450: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
-00029460: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00029470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029480: 2020 2020 2069 6620 6661 7374 5f66 756e       if fast_fun
-00029490: 6374 696f 6e20 6973 206e 6f74 204e 6f6e  ction is not Non
-000294a0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000294b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000294c0: 2020 2020 6966 2046 6173 7441 7272 6179      if FastArray
-000294d0: 2e56 6572 626f 7365 203e 2032 3a0d 0a20  .Verbose > 2:.. 
-000294e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000294f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029500: 2020 2070 7269 6e74 2866 222a 2a6c 6f67     print(f"**log
-00029510: 6963 616c 2066 756e 6374 696f 6e20 6361  ical function ca
-00029520: 6c6c 6564 207b 7566 756e 637d 2061 7267  lled {ufunc} arg
-00029530: 733a 207b 6172 6773 7d22 290d 0a20 2020  s: {args}")..   
-00029540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029550: 2020 2020 2020 2020 2020 2020 2069 735f               is_
-00029560: 6c6f 6769 6361 6c20 3d20 310d 0a20 2020  logical = 1..   
-00029570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029580: 2020 2020 2020 2020 2020 2020 2066 696e               fin
-00029590: 616c 5f64 7479 7065 203d 206e 702e 626f  al_dtype = np.bo
-000295a0: 6f6c 5f0d 0a0d 0a20 2020 2020 2020 2020  ol_....         
-000295b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000295c0: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-000295d0: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-000295e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000295f0: 2020 2020 2020 2320 6368 6563 6b20 666f        # check fo
-00029600: 7220 6269 7477 6973 6520 6675 6e63 7469  r bitwise functi
-00029610: 6f6e 733f 2028 7465 7374 2074 6869 7329  ons? (test this)
-00029620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029630: 2020 2020 2020 2020 2020 2020 2020 6661                fa
-00029640: 7374 5f66 756e 6374 696f 6e20 3d20 6742  st_function = gB
-00029650: 696e 6172 7942 6974 7769 7365 5546 756e  inaryBitwiseUFun
-00029660: 6373 2e67 6574 2875 6675 6e63 2c20 4e6f  cs.get(ufunc, No
-00029670: 6e65 290d 0a0d 0a20 2020 2020 2020 2020  ne)....         
-00029680: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00029690: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-000296a0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-000296b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000296c0: 2020 2020 2020 2020 2020 6966 2068 6173            if has
-000296d0: 5f6f 7574 7075 7473 2061 6e64 2069 735f  _outputs and is_
-000296e0: 6c6f 6769 6361 6c20 3d3d 2030 3a0d 0a20  logical == 0:.. 
-000296f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029700: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00029710: 2068 6176 6520 746f 2063 6f6e 666f 726d   have to conform
-00029720: 2074 6f20 6f75 7470 7574 0d0a 2020 2020   to output..    
-00029730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029740: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-00029750: 6c5f 6474 7970 6520 3d20 6f75 745f 6172  l_dtype = out_ar
-00029760: 6773 5b30 5d2e 6474 7970 650d 0a20 2020  gs[0].dtype..   
-00029770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029780: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00029790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297b0: 6966 2069 735f 6c6f 6769 6361 6c20 3d3d  if is_logical ==
-000297c0: 2031 2061 6e64 2073 6361 6c61 7273 203d   1 and scalars =
-000297d0: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
-000297e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297f0: 2020 2020 2020 2020 2020 2320 4e4f 5445            # NOTE
-00029800: 3a20 7363 616c 6172 2075 7063 6173 7420  : scalar upcast 
-00029810: 7275 6c65 7320 2d2d 206a 7573 7420 6170  rules -- just ap
-00029820: 706c 7920 746f 206c 6f67 6963 616c 7320  ply to logicals 
-00029830: 736f 2074 6861 7420 6172 7220 3c20 3520  so that arr < 5 
-00029840: 646f 6573 206e 6f74 2075 7063 6173 743f  does not upcast?
-00029850: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029870: 2020 2020 2020 2320 2020 2020 2020 6f72        #       or
-00029880: 2067 6c6f 6261 6c6c 7920 6170 706c 7920   globally apply 
-00029890: 7468 6973 2072 756c 6520 736f 2074 6861  this rule so tha
-000298a0: 7420 6172 7220 3d20 6172 7220 2b20 350d  t arr = arr + 5.
-000298b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000298c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000298d0: 2020 2020 2023 2069 6620 7363 616c 6172       # if scalar
-000298e0: 7320 3d3d 2031 3a0d 0a20 2020 2020 2020  s == 1:..       
-000298f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029900: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-00029910: 7065 6369 616c 2063 6173 6520 6861 7665  pecial case have
-00029920: 2074 6f20 7365 6520 6966 2073 6361 6c61   to see if scala
-00029930: 7220 6973 2069 6e20 7261 6e67 650d 0a20  r is in range.. 
-00029940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029960: 2020 2069 6620 7479 7065 2861 7267 735b     if type(args[
-00029970: 305d 2920 696e 2053 6361 6c61 7254 7970  0]) in ScalarTyp
-00029980: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00029990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000299a0: 2020 2020 2020 2020 2020 2020 7363 616c              scal
-000299b0: 6172 5f76 616c 203d 2061 7267 735b 305d  ar_val = args[0]
-000299c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000299d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000299e0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000299f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a10: 2020 2020 2073 6361 6c61 725f 7661 6c20       scalar_val 
-00029a20: 3d20 6172 6773 5b31 5d0d 0a0d 0a20 2020  = args[1]....   
-00029a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a50: 2066 696e 616c 5f64 7479 7065 203d 206c   final_dtype = l
-00029a60: 6f67 6963 616c 5f66 696e 645f 636f 6d6d  ogical_find_comm
-00029a70: 6f6e 5f74 7970 6528 6172 7261 795f 7479  on_type(array_ty
-00029a80: 7065 732c 2073 6361 6c61 725f 7479 7065  pes, scalar_type
-00029a90: 732c 2073 6361 6c61 725f 7661 6c29 0d0a  s, scalar_val)..
-00029aa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ac0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00029ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ae0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00029af0: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
-00029b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029b10: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
-00029b20: 6368 6563 6b20 666f 7220 6275 6720 7768  check for bug wh
-00029b30: 6572 6520 6e70 2e69 6e74 3332 2074 7970  ere np.int32 typ
-00029b40: 6520 3720 6765 7473 2066 6c69 7070 6564  e 7 gets flipped
-00029b50: 2074 6f20 6e70 2e69 6e74 3332 2074 7970   to np.int32 typ
-00029b60: 6520 350d 0a20 2020 2020 2020 2020 2020  e 5..           
-00029b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029b80: 2020 2020 2020 2020 2069 6620 7363 616c           if scal
-00029b90: 6172 7320 3d3d 2030 2061 6e64 206c 656e  ars == 0 and len
-00029ba0: 2861 7272 6179 5f74 7970 6573 2920 3d3d  (array_types) ==
-00029bb0: 2032 2061 6e64 2028 6172 7261 795f 7479   2 and (array_ty
-00029bc0: 7065 735b 305d 203d 3d20 6172 7261 795f  pes[0] == array_
-00029bd0: 7479 7065 735b 315d 293a 0d0a 2020 2020  types[1]):..    
-00029be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c00: 2020 2020 6669 6e61 6c5f 6474 7970 6520      final_dtype 
-00029c10: 3d20 6172 7261 795f 7479 7065 735b 305d  = array_types[0]
-00029c20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c40: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00029c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c70: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
-00029c80: 2069 6e74 2073 6361 6c61 7220 6167 6169   int scalar agai
-00029c90: 6e73 7420 696e 740d 0a20 2020 2020 2020  nst int..       
-00029ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029cc0: 2023 2062 7567 2077 6865 7265 206e 702e   # bug where np.
-00029cd0: 696e 7438 2061 6e64 2074 6865 6e20 6164  int8 and then ad
-00029ce0: 6420 2b31 3939 3920 6f72 206c 6172 6765  d +1999 or large
-00029cf0: 7220 6e75 6d62 6572 2e20 206e 6565 6420  r number.  need 
-00029d00: 746f 2075 7063 6173 740d 0a20 2020 2020  to upcast..     
-00029d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d30: 2020 2069 6620 7363 616c 6172 7320 3d3d     if scalars ==
-00029d40: 2031 2061 6e64 2061 7272 6179 5f74 7970   1 and array_typ
-00029d50: 6573 5b30 5d2e 6e75 6d20 3c3d 2031 303a  es[0].num <= 10:
-00029d60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d80: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00029d90: 2074 7970 6528 6172 6773 5b30 5d29 2069   type(args[0]) i
-00029da0: 6e20 5363 616c 6172 5479 7065 3a0d 0a20  n ScalarType:.. 
-00029db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029dd0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00029de0: 6361 6c61 725f 7661 6c20 3d20 6172 6773  calar_val = args
-00029df0: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-00029e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e20: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00029e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e50: 2020 2020 2020 2020 7363 616c 6172 5f76          scalar_v
-00029e60: 616c 203d 2061 7267 735b 315d 0d0a 0d0a  al = args[1]....
-00029e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029e90: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-00029ea0: 6c5f 6474 7970 6520 3d20 6c6f 6769 6361  l_dtype = logica
-00029eb0: 6c5f 6669 6e64 5f63 6f6d 6d6f 6e5f 7479  l_find_common_ty
-00029ec0: 7065 280d 0a20 2020 2020 2020 2020 2020  pe(..           
-00029ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ef0: 2020 2020 2061 7272 6179 5f74 7970 6573       array_types
-00029f00: 2c20 7363 616c 6172 5f74 7970 6573 2c20  , scalar_types, 
-00029f10: 7363 616c 6172 5f76 616c 0d0a 2020 2020  scalar_val..    
-00029f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f40: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00029f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f70: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00029f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029fa0: 2020 2020 2020 6669 6e61 6c5f 6474 7970        final_dtyp
-00029fb0: 6520 3d20 6e70 2e66 696e 645f 636f 6d6d  e = np.find_comm
-00029fc0: 6f6e 5f74 7970 6528 6172 7261 795f 7479  on_type(array_ty
-00029fd0: 7065 732c 2073 6361 6c61 725f 7479 7065  pes, scalar_type
-00029fe0: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
-00029ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a000: 2020 2320 6966 2077 6520 6172 6520 6164    # if we are ad
-0002a010: 6469 6e67 2074 776f 2073 7472 696e 6773  ding two strings
-0002a020: 206f 7220 756e 6963 6f64 652c 2073 7065   or unicode, spe
-0002a030: 6369 616c 2063 6173 650d 0a20 2020 2020  cial case..     
-0002a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a050: 2020 2020 2020 2023 2069 6620 7765 2074         # if we t
-0002a060: 6869 6e6b 2074 6865 2066 696e 616c 2064  hink the final d
-0002a070: 7479 7065 2069 7320 616e 206f 626a 6563  type is an objec
-0002a080: 742c 2063 6865 636b 2069 6620 7468 6973  t, check if this
-0002a090: 2069 7320 7265 616c 6c79 2074 776f 2073   is really two s
-0002a0a0: 7472 696e 6773 0d0a 2020 2020 2020 2020  trings..        
-0002a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a0c0: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
-0002a0d0: 7469 6f6e 203d 3d20 4d41 5448 5f4f 5045  tion == MATH_OPE
-0002a0e0: 5241 5449 4f4e 2e41 4444 2061 6e64 2028  RATION.ADD and (
-0002a0f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a110: 2020 6172 7261 795f 7479 7065 735b 305d    array_types[0]
-0002a120: 2e6e 756d 203d 3d20 3138 206f 7220 6172  .num == 18 or ar
-0002a130: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
-0002a140: 203d 3d20 3139 0d0a 2020 2020 2020 2020   == 19..        
-0002a150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a160: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
-0002a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a180: 2020 2020 2020 2020 2320 6173 7375 6d65          # assume
-0002a190: 2061 6464 6974 696f 6e20 6f66 2074 776f   addition of two
-0002a1a0: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
-0002a1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a1c0: 2020 2020 2020 2020 2020 6669 6e61 6c5f            final_
-0002a1d0: 6474 7970 6520 3d20 6172 7261 795f 7479  dtype = array_ty
-0002a1e0: 7065 735b 305d 0d0a 2020 2020 2020 2020  pes[0]..        
-0002a1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a200: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
-0002a210: 7273 2021 3d20 303a 0d0a 2020 2020 2020  rs != 0:..      
-0002a220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a230: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002a240: 7765 2068 6176 6520 6120 7363 616c 6172  we have a scalar
-0002a250: 2e2e 2e20 6d61 6b65 2073 7572 6520 7765  ... make sure we
-0002a260: 2063 6f6e 7665 7274 2069 740d 0a20 2020   convert it..   
-0002a270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a290: 2069 6620 7479 7065 2861 7267 735b 305d   if type(args[0]
-0002a2a0: 2920 696e 2053 6361 6c61 7254 7970 653a  ) in ScalarType:
-0002a2b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a2d0: 2020 2020 2020 2020 2020 2320 6669 7820            # fix 
-0002a2e0: 7363 616c 6172 2074 7970 6520 6d61 6b65  scalar type make
-0002a2f0: 2073 7572 6520 7374 7269 6e67 206f 7220   sure string or 
-0002a300: 756e 6963 6f64 650d 0a20 2020 2020 2020  unicode..       
-0002a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a330: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
-0002a340: 305d 2e6e 756d 203d 3d20 3138 3a0d 0a20  0].num == 18:.. 
-0002a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a370: 2020 2020 2020 2020 2020 2061 7267 735b             args[
-0002a380: 305d 203d 2073 7472 2e65 6e63 6f64 6528  0] = str.encode(
-0002a390: 7374 7228 6172 6773 5b30 5d29 290d 0a20  str(args[0])).. 
-0002a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a3c0: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
-0002a3d0: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
-0002a3e0: 3139 3a0d 0a20 2020 2020 2020 2020 2020  19:..           
-0002a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a410: 2061 7267 735b 305d 203d 2073 7472 2861   args[0] = str(a
-0002a420: 7267 735b 305d 290d 0a20 2020 2020 2020  rgs[0])..       
-0002a430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a440: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002a450: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a470: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0002a480: 7272 6179 5f74 7970 6573 5b30 5d2e 6e75  rray_types[0].nu
-0002a490: 6d20 3d3d 2031 383a 0d0a 2020 2020 2020  m == 18:..      
-0002a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a4c0: 2020 2020 2020 6172 6773 5b31 5d20 3d20        args[1] = 
-0002a4d0: 7374 722e 656e 636f 6465 2873 7472 2861  str.encode(str(a
-0002a4e0: 7267 735b 315d 2929 0d0a 2020 2020 2020  rgs[1]))..      
-0002a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a510: 2020 6966 2061 7272 6179 5f74 7970 6573    if array_types
-0002a520: 5b30 5d2e 6e75 6d20 3d3d 2031 393a 0d0a  [0].num == 19:..
-0002a530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a550: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002a560: 5b31 5d20 3d20 7374 7228 6172 6773 5b31  [1] = str(args[1
-0002a570: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0002a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a590: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0002a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a5b0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002a5c0: 2077 6520 6861 7665 2074 776f 2061 7272   we have two arr
-0002a5d0: 6179 732c 2069 6620 6f6e 6520 6172 7261  ays, if one arra
-0002a5e0: 7920 6973 206e 6f74 2070 726f 7065 7220  y is not proper 
-0002a5f0: 7374 7269 6e67 2074 7970 652c 2063 6f6e  string type, con
-0002a600: 7665 7274 2069 740d 0a20 2020 2020 2020  vert it..       
-0002a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a620: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002a630: 6172 7261 795f 7479 7065 735b 315d 2021  array_types[1] !
-0002a640: 3d20 6669 6e61 6c5f 6474 7970 653a 0d0a  = final_dtype:..
-0002a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a670: 2020 2020 2020 2020 6966 2061 7272 6179          if array
-0002a680: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
-0002a690: 2031 383a 0d0a 2020 2020 2020 2020 2020   18:..          
-0002a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a6c0: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
-0002a6d0: 5b31 5d2e 6173 7479 7065 2822 5322 290d  [1].astype("S").
-0002a6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a700: 2020 2020 2020 2020 2069 6620 6172 7261           if arra
-0002a710: 795f 7479 7065 735b 305d 2e6e 756d 203d  y_types[0].num =
-0002a720: 3d20 3139 3a0d 0a20 2020 2020 2020 2020  = 19:..         
-0002a730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a750: 2020 2061 7267 735b 315d 203d 2061 7267     args[1] = arg
-0002a760: 735b 315d 2e61 7374 7970 6528 2255 2229  s[1].astype("U")
-0002a770: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a790: 2020 2020 6966 2046 6173 7441 7272 6179      if FastArray
-0002a7a0: 2e56 6572 626f 7365 203e 2032 3a0d 0a20  .Verbose > 2:.. 
-0002a7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a7d0: 2020 2070 7269 6e74 2822 4144 4420 7374     print("ADD st
-0002a7e0: 7269 6e67 206f 7065 7261 7469 6f6e 222c  ring operation",
-0002a7f0: 2061 7272 6179 5f74 7970 6573 2c20 7363   array_types, sc
-0002a800: 616c 6172 5f74 7970 6573 290d 0a0d 0a20  alar_types).... 
-0002a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a820: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002a830: 7363 616c 6172 7320 3d3d 2030 3a0d 0a20  scalars == 0:.. 
-0002a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a850: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002a860: 6620 6172 7261 795f 7479 7065 735b 305d  f array_types[0]
-0002a870: 2021 3d20 6172 7261 795f 7479 7065 735b   != array_types[
-0002a880: 315d 3a0d 0a20 2020 2020 2020 2020 2020  1]:..           
-0002a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a8a0: 2020 2020 2020 2020 2023 2055 5043 4153           # UPCAS
-0002a8b0: 5420 5255 4c45 530d 0a20 2020 2020 2020  T RULES..       
-0002a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a8d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002a8e0: 6172 7261 795f 7479 7065 735b 305d 203d  array_types[0] =
-0002a8f0: 3d20 6669 6e61 6c5f 6474 7970 6520 616e  = final_dtype an
-0002a900: 6420 6172 7261 795f 7479 7065 735b 315d  d array_types[1]
-0002a910: 2021 3d20 6669 6e61 6c5f 6474 7970 653a   != final_dtype:
-0002a920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a940: 2020 2020 2020 2020 2020 2320 7072 696e            # prin
-0002a950: 7428 2221 2121 7570 6361 7374 2072 756c  t("!!!upcast rul
-0002a960: 6573 2073 6563 6f6e 6422 2c20 6172 7261  es second", arra
-0002a970: 795f 7479 7065 735b 305d 2c20 6172 7261  y_types[0], arra
-0002a980: 795f 7479 7065 735b 315d 2c20 6669 6e61  y_types[1], fina
-0002a990: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
-0002a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a9c0: 2020 2320 636f 6e76 6572 7420 746f 2074    # convert to t
-0002a9d0: 6865 2070 726f 7065 7220 7479 7065 2062  he proper type b
-0002a9e0: 6566 6f72 2063 616c 6375 6c61 7469 6f6e  efor calculation
-0002a9f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aa10: 2020 2020 2020 2020 2020 6172 6773 5b31            args[1
-0002aa20: 5d20 3d20 5f41 5354 5950 4528 6172 6773  ] = _ASTYPE(args
-0002aa30: 5b31 5d2c 2066 696e 616c 5f64 7479 7065  [1], final_dtype
-0002aa40: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aa60: 2020 2020 2020 2020 2065 6c69 6620 6172           elif ar
-0002aa70: 7261 795f 7479 7065 735b 305d 2021 3d20  ray_types[0] != 
-0002aa80: 6669 6e61 6c5f 6474 7970 6520 616e 6420  final_dtype and 
-0002aa90: 6172 7261 795f 7479 7065 735b 315d 203d  array_types[1] =
-0002aaa0: 3d20 6669 6e61 6c5f 6474 7970 653a 0d0a  = final_dtype:..
-0002aab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aad0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0002aae0: 2221 2121 7570 6361 7374 2072 756c 6573  "!!!upcast rules
-0002aaf0: 2066 6972 7374 222c 2061 7272 6179 5f74   first", array_t
-0002ab00: 7970 6573 5b30 5d2c 2061 7272 6179 5f74  ypes[0], array_t
-0002ab10: 7970 6573 5b31 5d2c 2066 696e 616c 5f64  ypes[1], final_d
-0002ab20: 7479 7065 290d 0a20 2020 2020 2020 2020  type)..         
-0002ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ab40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002ab50: 2063 6f6e 7665 7274 2074 6f20 7468 6520   convert to the 
-0002ab60: 7072 6f70 6572 2074 7970 6520 6265 666f  proper type befo
-0002ab70: 7220 6361 6c63 756c 6174 696f 6e0d 0a20  r calculation.. 
-0002ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aba0: 2020 2020 2020 2061 7267 735b 305d 203d         args[0] =
-0002abb0: 205f 4153 5459 5045 2861 7267 735b 305d   _ASTYPE(args[0]
-0002abc0: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
-0002abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abf0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0002ac00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000293e0: 6966 2069 735f 6e6f 745f 7375 7070 6f72  if is_not_suppor
+000293f0: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
+00029400: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+00029410: 2065 6e61 626c 6520 7468 6973 2077 6172   enable this war
+00029420: 6e69 6e67 2069 6e20 6120 6675 7475 7265  ning in a future
+00029430: 206d 696e 6f72 2072 656c 6561 7365 0d0a   minor release..
+00029440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029450: 2020 2020 2320 4661 7374 4172 7261 792e      # FastArray.
+00029460: 5f70 6f73 7369 626c 795f 7761 726e 2866  _possibly_warn(f
+00029470: 275f 5f61 7272 6179 5f75 6675 6e63 5f5f  '__array_ufunc__
+00029480: 3a20 756e 7375 7070 6f72 7465 6420 696e  : unsupported in
+00029490: 7075 7420 227b 696e 7075 747d 2227 290d  put "{input}"').
+000294a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000294b0: 2020 2020 2074 6f70 6c65 7665 6c5f 6162       toplevel_ab
+000294c0: 6f72 7420 7c3d 2069 735f 6e6f 745f 7375  ort |= is_not_su
+000294d0: 7070 6f72 7465 640d 0a20 2020 2020 2020  pported..       
+000294e0: 2020 2020 2061 7267 732e 6170 7065 6e64       args.append
+000294f0: 2869 6e70 7574 290d 0a0d 0a20 2020 2020  (input)....     
+00029500: 2020 2023 2043 6865 636b 2066 6f72 206e     # Check for n
+00029510: 756d 7079 2072 756c 6573 2074 6861 7420  umpy rules that 
+00029520: 7765 2063 616e 6e6f 7420 6861 6e64 6c65  we cannot handle
+00029530: 2e0d 0a20 2020 2020 2020 2066 6f72 206b  ...        for k
+00029540: 7720 696e 205f 554e 5355 5050 4f52 5445  w in _UNSUPPORTE
+00029550: 445f 4b45 5957 4f52 4453 3a0d 0a20 2020  D_KEYWORDS:..   
+00029560: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
+00029570: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+00029580: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+00029590: 4f20 656e 6162 6c65 2074 6869 7320 7761  O enable this wa
+000295a0: 726e 696e 6720 696e 2061 2066 7574 7572  rning in a futur
+000295b0: 6520 6d69 6e6f 7220 7265 6c65 6173 650d  e minor release.
+000295c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000295d0: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
+000295e0: 7373 6962 6c79 5f77 6172 6e28 6627 5f5f  ssibly_warn(f'__
+000295f0: 6172 7261 795f 7566 756e 635f 5f3a 2075  array_ufunc__: u
+00029600: 6e73 7570 706f 7274 6564 206b 6579 776f  nsupported keywo
+00029610: 7264 2061 7267 756d 656e 7420 227b 6b77  rd argument "{kw
+00029620: 7d22 2729 0d0a 2020 2020 2020 2020 2020  }"')..          
+00029630: 2020 2020 2020 746f 706c 6576 656c 5f61        toplevel_a
+00029640: 626f 7274 207c 3d20 5472 7565 0d0a 0d0a  bort |= True....
+00029650: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
+00029660: 666f 7220 6e75 6d70 7920 7275 6c65 7320  for numpy rules 
+00029670: 7468 6174 2077 6520 7061 7274 6961 6c6c  that we partiall
+00029680: 7920 7375 7070 6f72 743b 2074 6861 7420  y support; that 
+00029690: 6973 2c20 7768 6572 6520 7765 206f 6e6c  is, where we onl
+000296a0: 7920 7375 7070 6f72 740d 0a20 2020 2020  y support..     
+000296b0: 2020 2023 2074 6865 206b 6579 776f 7264     # the keyword
+000296c0: 2069 6620 7468 6520 7661 6c75 6520 6973   if the value is
+000296d0: 2073 6f6d 6520 6465 6661 756c 7420 7661   some default va
+000296e0: 6c75 6520 616e 6420 6f74 6865 7277 6973  lue and otherwis
+000296f0: 6520 7075 6e74 2074 6f20 6e75 6d70 792e  e punt to numpy.
+00029700: 0d0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
+00029710: 7661 6c75 6520 6173 736f 6369 6174 6564  value associated
+00029720: 2077 6974 6820 6561 6368 206b 6579 776f   with each keywo
+00029730: 7264 2069 6e20 7468 6520 6469 6374 696f  rd in the dictio
+00029740: 6e61 7279 2069 7320 7468 6520 6f6e 6c79  nary is the only
+00029750: 2076 616c 7565 2077 6527 6c6c 0d0a 2020   value we'll..  
+00029760: 2020 2020 2020 2320 7375 7070 6f72 7420        # support 
+00029770: 666f 7220 7468 6174 206b 6579 776f 7264  for that keyword
+00029780: 2e0d 0a20 2020 2020 2020 2023 2046 6f72  ...        # For
+00029790: 2065 7861 6d70 6c65 2c20 696e 206e 756d   example, in num
+000297a0: 7079 2031 2e31 3720 7468 6520 7375 6d28  py 1.17 the sum(
+000297b0: 2920 6675 6e63 7469 6f6e 2070 6173 7365  ) function passe
+000297c0: 7320 7768 6572 653d 5472 7565 2062 7920  s where=True by 
+000297d0: 6465 6661 756c 742e 0d0a 2020 2020 2020  default...      
+000297e0: 2020 666f 7220 6b77 2c20 6465 6661 756c    for kw, defaul
+000297f0: 745f 7661 6c20 696e 205f 5041 5254 4941  t_val in _PARTIA
+00029800: 4c4c 595f 5355 5050 4f52 5445 445f 4b45  LLY_SUPPORTED_KE
+00029810: 5957 4f52 4453 5f54 4f5f 4445 4641 554c  YWORDS_TO_DEFAUL
+00029820: 5453 2e69 7465 6d73 2829 3a0d 0a20 2020  TS.items():..   
+00029830: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
+00029840: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+00029850: 2020 2020 2020 2020 2020 2023 2055 7365             # Use
+00029860: 2061 2074 7970 6520 6368 6563 6b20 6265   a type check be
+00029870: 666f 7265 2065 7175 616c 6974 7920 6865  fore equality he
+00029880: 7265 2074 6f20 6176 6f69 6420 6572 726f  re to avoid erro
+00029890: 7273 2063 6175 7365 640d 0a20 2020 2020  rs caused..     
+000298a0: 2020 2020 2020 2020 2020 2023 2062 7920             # by 
+000298b0: 6368 6563 6b69 6e67 2065 7175 616c 6974  checking equalit
+000298c0: 7920 6265 7477 6565 6e20 626f 6f6c 7320  y between bools 
+000298d0: 616e 6420 6172 7261 7973 2e0d 0a20 2020  and arrays...   
+000298e0: 2020 2020 2020 2020 2020 2020 206b 7761               kwa
+000298f0: 7267 5f76 616c 203d 206b 7761 7267 735b  rg_val = kwargs[
+00029900: 6b77 5d0d 0a20 2020 2020 2020 2020 2020  kw]..           
+00029910: 2020 2020 2069 6620 7479 7065 2864 6566       if type(def
+00029920: 6175 6c74 5f76 616c 2920 213d 2074 7970  ault_val) != typ
+00029930: 6528 6b77 6172 675f 7661 6c29 206f 7220  e(kwarg_val) or 
+00029940: 6b77 6172 675f 7661 6c20 213d 2064 6566  kwarg_val != def
+00029950: 6175 6c74 5f76 616c 3a0d 0a20 2020 2020  ault_val:..     
+00029960: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00029970: 6f70 6c65 7665 6c5f 6162 6f72 7420 7c3d  oplevel_abort |=
+00029980: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
+00029990: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
+000299a0: 5b6e 702e 6474 7970 655d 203d 206b 7761  [np.dtype] = kwa
+000299b0: 7267 732e 6765 7428 2264 7479 7065 222c  rgs.get("dtype",
+000299c0: 204e 6f6e 6529 0d0a 0d0a 2020 2020 2020   None)....      
+000299d0: 2020 6861 735f 6f75 7470 7574 733a 2062    has_outputs: b
+000299e0: 6f6f 6c20 3d20 4661 6c73 650d 0a20 2020  ool = False..   
+000299f0: 2020 2020 206f 7574 5f61 7267 733a 204c       out_args: L
+00029a00: 6973 745b 416e 795d 203d 205b 5d0d 0a0d  ist[Any] = []...
+00029a10: 0a20 2020 2020 2020 2023 2066 6c69 7020  .        # flip 
+00029a20: 616e 7920 6f75 7470 7574 7320 746f 206e  any outputs to n
+00029a30: 6461 7272 6179 2e2e 2e0d 0a20 2020 2020  darray.....     
+00029a40: 2020 206f 7574 7075 7473 203d 206b 7761     outputs = kwa
+00029a50: 7267 732e 706f 7028 226f 7574 222c 204e  rgs.pop("out", N
+00029a60: 6f6e 6529 0d0a 2020 2020 2020 2020 6966  one)..        if
+00029a70: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
+00029a80: 2020 2020 2020 2068 6173 5f6f 7574 7075         has_outpu
+00029a90: 7473 203d 2054 7275 650d 0a20 2020 2020  ts = True..     
+00029aa0: 2020 2020 2020 2066 6f72 206f 7574 7075         for outpu
+00029ab0: 7420 696e 206f 7574 7075 7473 3a0d 0a20  t in outputs:.. 
+00029ac0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00029ad0: 6620 6973 696e 7374 616e 6365 286f 7574  f isinstance(out
+00029ae0: 7075 742c 206e 702e 6e64 6172 7261 7929  put, np.ndarray)
+00029af0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00029b00: 2020 2020 2020 2069 735f 6e6f 745f 7375         is_not_su
+00029b10: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
+00029b20: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
+00029b30: 286f 7574 7075 7429 0d0a 2020 2020 2020  (output)..      
+00029b40: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00029b50: 2069 735f 6e6f 745f 7375 7070 6f72 7465   is_not_supporte
+00029b60: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+00029b70: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+00029b80: 444f 2065 6e61 626c 6520 7468 6973 2077  DO enable this w
+00029b90: 6172 6e69 6e67 2069 6e20 6120 6675 7475  arning in a futu
+00029ba0: 7265 206d 696e 6f72 2072 656c 6561 7365  re minor release
+00029bb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029bc0: 2020 2020 2020 2020 2020 2320 4661 7374            # Fast
+00029bd0: 4172 7261 792e 5f70 6f73 7369 626c 795f  Array._possibly_
+00029be0: 7761 726e 2866 275f 5f61 7272 6179 5f75  warn(f'__array_u
+00029bf0: 6675 6e63 5f5f 3a20 756e 7375 7070 6f72  func__: unsuppor
+00029c00: 7465 6420 6f75 7470 7574 2022 7b6f 7574  ted output "{out
+00029c10: 7075 747d 2227 290d 0a20 2020 2020 2020  put}"')..       
+00029c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029c30: 2074 6f70 6c65 7665 6c5f 6162 6f72 7420   toplevel_abort 
+00029c40: 7c3d 2069 735f 6e6f 745f 7375 7070 6f72  |= is_not_suppor
+00029c50: 7465 640d 0a20 2020 2020 2020 2020 2020  ted..           
+00029c60: 2020 2020 206f 7574 5f61 7267 732e 6170       out_args.ap
+00029c70: 7065 6e64 286f 7574 7075 7429 0d0a 2020  pend(output)..  
+00029c80: 2020 2020 2020 2020 2020 2320 7265 706c            # repl
+00029c90: 6163 6520 6f75 740d 0a20 2020 2020 2020  ace out..       
+00029ca0: 2020 2020 206b 7761 7267 735b 226f 7574       kwargs["out
+00029cb0: 225d 203d 2074 7570 6c65 286f 7574 5f61  "] = tuple(out_a
+00029cc0: 7267 7329 0d0a 2020 2020 2020 2020 656c  rgs)..        el
+00029cd0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00029ce0: 2023 2054 4a44 202d 2068 6572 6520 6f75   # TJD - here ou
+00029cf0: 7470 7574 7320 7761 7320 6e6f 7420 7370  tputs was not sp
+00029d00: 6563 6966 6965 640d 0a20 2020 2020 2020  ecified..       
+00029d10: 2020 2020 2023 206e 6f77 2069 6620 5546       # now if UF
+00029d20: 756e 632e 6e6f 7574 203d 3d31 2c20 7468  unc.nout ==1, th
+00029d30: 6973 2066 756e 6374 696f 6e20 7265 7175  is function requ
+00029d40: 6972 6573 2061 6e20 6f75 7470 7574 0d0a  ires an output..
+00029d50: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+00029d60: 7574 7320 3d20 284e 6f6e 652c 2920 2a20  uts = (None,) * 
+00029d70: 7566 756e 632e 6e6f 7574 0d0a 0d0a 2020  ufunc.nout....  
+00029d80: 2020 2020 2020 2320 5365 6520 6874 7470        # See http
+00029d90: 733a 2f2f 646f 6373 2e70 7974 686f 6e2e  s://docs.python.
+00029da0: 6f72 672f 332f 632d 6170 692f 7479 7065  org/3/c-api/type
+00029db0: 6f62 6a2e 6874 6d6c 0d0a 2020 2020 2020  obj.html..      
+00029dc0: 2020 2320 5365 6520 4e75 6d62 6572 204f    # See Number O
+00029dd0: 626a 6563 7420 5374 7275 6374 7572 6573  bject Structures
+00029de0: 2061 6e64 204d 6170 7069 6e67 204f 626a   and Mapping Obj
+00029df0: 6563 7420 5374 7275 6374 7572 6520 666f  ect Structure fo
+00029e00: 7220 696e 6465 7869 6e67 0d0a 0d0a 2020  r indexing....  
+00029e10: 2020 2020 2020 2320 7566 756e 632e 6e69        # ufunc.ni
+00029e20: 6e09 2020 2020 5468 6520 6e75 6d62 6572  n.    The number
+00029e30: 206f 6620 696e 7075 7473 2e0d 0a20 2020   of inputs...   
+00029e40: 2020 2020 2023 2075 6675 6e63 2e6e 6f75       # ufunc.nou
+00029e50: 7409 2020 2020 5468 6520 6e75 6d62 6572  t.    The number
+00029e60: 206f 6620 6f75 7470 7574 732e 0d0a 2020   of outputs...  
+00029e70: 2020 2020 2020 2320 7566 756e 632e 6e61        # ufunc.na
+00029e80: 7267 7309 5468 6520 6e75 6d62 6572 206f  rgs.The number o
+00029e90: 6620 6172 6775 6d65 6e74 732e 0d0a 2020  f arguments...  
+00029ea0: 2020 2020 2020 2320 7566 756e 632e 6e74        # ufunc.nt
+00029eb0: 7970 6573 0954 6865 206e 756d 6265 7220  ypes.The number 
+00029ec0: 6f66 2074 7970 6573 2e0d 0a20 2020 2020  of types...     
+00029ed0: 2020 2023 2075 6675 6e63 2e74 7970 6573     # ufunc.types
+00029ee0: 0952 6574 7572 6e73 2061 206c 6973 7420  .Returns a list 
+00029ef0: 7769 7468 2074 7970 6573 2067 726f 7570  with types group
+00029f00: 6564 2069 6e70 7574 2d3e 6f75 7470 7574  ed input->output
+00029f10: 2e0d 0a20 2020 2020 2020 2023 2075 6675  ...        # ufu
+00029f20: 6e63 2e69 6465 6e74 6974 7909 5468 6520  nc.identity.The 
+00029f30: 6964 656e 7469 7479 2076 616c 7565 2e0d  identity value..
+00029f40: 0a0d 0a20 2020 2020 2020 2066 696e 616c  ...        final
+00029f50: 5f64 7479 7065 3a20 4f70 7469 6f6e 616c  _dtype: Optional
+00029f60: 5b6e 702e 6474 7970 655d 203d 204e 6f6e  [np.dtype] = Non
+00029f70: 650d 0a20 2020 2020 2020 2066 6173 745f  e..        fast_
+00029f80: 6675 6e63 7469 6f6e 3a20 4f70 7469 6f6e  function: Option
+00029f90: 616c 5b4d 4154 485f 4f50 4552 4154 494f  al[MATH_OPERATIO
+00029fa0: 4e5d 203d 204e 6f6e 650d 0a20 2020 2020  N] = None..     
+00029fb0: 2020 2072 6564 7563 655f 6675 6e63 3a20     reduce_func: 
+00029fc0: 4f70 7469 6f6e 616c 5b52 4544 5543 455f  Optional[REDUCE_
+00029fd0: 4655 4e43 5449 4f4e 535d 203d 204e 6f6e  FUNCTIONS] = Non
+00029fe0: 650d 0a0d 0a20 2020 2020 2020 2023 2048  e....        # H
+00029ff0: 616e 646c 6520 7265 6475 6365 2075 6675  andle reduce ufu
+0002a000: 6e63 206d 6574 686f 6473 2e0d 0a20 2020  nc methods...   
+0002a010: 2020 2020 2023 206e 6f74 653a 2077 6865       # note: whe
+0002a020: 6e20 6d65 7468 6f64 2069 7320 2761 7427  n method is 'at'
+0002a030: 2074 6869 7320 6973 2061 6e20 696e 706c   this is an inpl
+0002a040: 6163 6520 756e 6275 6666 6572 6564 206f  ace unbuffered o
+0002a050: 7065 7261 7469 6f6e 0d0a 2020 2020 2020  peration..      
+0002a060: 2020 2320 7468 6973 2063 616e 2073 7065    # this can spe
+0002a070: 6564 2075 7020 726f 7574 696e 6573 2074  ed up routines t
+0002a080: 6861 7420 7573 6520 6865 6176 7920 6d61  hat use heavy ma
+0002a090: 736b 6564 206f 7065 7261 7469 6f6e 730d  sked operations.
+0002a0a0: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
+0002a0b0: 6f64 203d 3d20 2272 6564 7563 6522 2061  od == "reduce" a
+0002a0c0: 6e64 2046 6173 7441 7272 6179 2e46 6173  nd FastArray.Fas
+0002a0d0: 7465 7255 4675 6e63 2061 6e64 206e 6f74  terUFunc and not
+0002a0e0: 2074 6f70 6c65 7665 6c5f 6162 6f72 743a   toplevel_abort:
+0002a0f0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002a100: 612e 616e 7928 2920 616e 6420 612e 616c  a.any() and a.al
+0002a110: 6c28 2920 6172 6520 6c6f 6769 6361 6c20  l() are logical 
+0002a120: 7265 6475 6365 206f 7065 7261 7469 6f6e  reduce operation
+0002a130: 730d 0a20 2020 2020 2020 2020 2020 2023  s..            #
+0002a140: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+0002a150: 2020 2020 2020 2023 204c 6f6f 6b20 666f         # Look fo
+0002a160: 7220 6178 6973 3a4e 6f6e 6520 2d2d 206f  r axis:None -- o
+0002a170: 7468 6572 7769 7365 2041 424f 5254 0d0a  therwise ABORT..
+0002a180: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+0002a190: 656e 206c 6f6f 6b20 666f 7220 4b65 6570  en look for Keep
+0002a1a0: 6469 6d73 2077 6968 6368 206d 6561 6e73  dims wihch means
+0002a1b0: 2074 6f20 7772 6170 2072 6573 756c 7420   to wrap result 
+0002a1c0: 696e 206c 6973 742f 6172 7261 793f 0d0a  in list/array?..
+0002a1d0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+0002a1e0: 656e 2063 6865 636b 2064 7479 7065 2061  en check dtype a
+0002a1f0: 6c73 6f0d 0a20 2020 2020 2020 2020 2020  lso..           
+0002a200: 2023 0d0a 2020 2020 2020 2020 2020 2020   #..            
+0002a210: 2320 496e 205b 3232 5d3a 2074 3d46 4128  # In [22]: t=FA(
+0002a220: 5b5b 332c 342c 355d 2c5b 362c 372c 385d  [[3,4,5],[6,7,8]
+0002a230: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0002a240: 2320 496e 205b 3233 5d3a 206e 702e 6164  # In [23]: np.ad
+0002a250: 642e 7265 6475 6365 2874 290d 0a20 2020  d.reduce(t)..   
+0002a260: 2020 2020 2020 2020 2023 2121 7265 6475           #!!redu
+0002a270: 6365 2020 7265 6475 6365 206e 696e 3a20  ce  reduce nin: 
+0002a280: 3220 3120 3c75 6675 6e63 2027 6164 6427  2 1 <ufunc 'add'
+0002a290: 3e20 5b61 7272 6179 285b 5b33 2c20 342c  > [array([[3, 4,
+0002a2a0: 2035 5d2c 0d0a 2020 2020 2020 2020 2020   5],..          
+0002a2b0: 2020 2320 2020 2020 2020 5b36 2c20 372c    #       [6, 7,
+0002a2c0: 2038 5d5d 295d 206f 7574 3a20 284e 6f6e   8]])] out: (Non
+0002a2d0: 652c 2920 6b77 6172 6773 3a20 7b7d 0d0a  e,) kwargs: {}..
+0002a2e0: 2020 2020 2020 2020 2020 2020 2320 7265              # re
+0002a2f0: 7375 6c74 7320 5b20 3920 3131 2031 335d  sults [ 9 11 13]
+0002a300: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002a310: 4f75 745b 3233 5d3a 2061 7272 6179 285b  Out[23]: array([
+0002a320: 2039 2c20 3131 2c20 3133 5d29 0d0a 2020   9, 11, 13])..  
+0002a330: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
+0002a340: 3234 5d3a 206e 702e 6164 642e 7265 6475  24]: np.add.redu
+0002a350: 6365 2874 2c20 6178 6973 3d4e 6f6e 6529  ce(t, axis=None)
+0002a360: 0d0a 2020 2020 2020 2020 2020 2020 2321  ..            #!
+0002a370: 2172 6564 7563 6520 2072 6564 7563 6520  !reduce  reduce 
+0002a380: 6e69 6e3a 2032 2031 203c 7566 756e 6320  nin: 2 1 <ufunc 
+0002a390: 2761 6464 273e 205b 6172 7261 7928 5b5b  'add'> [array([[
+0002a3a0: 332c 2034 2c20 355d 2c0d 0a20 2020 2020  3, 4, 5],..     
+0002a3b0: 2020 2020 2020 2023 2020 2020 2020 205b         #       [
+0002a3c0: 362c 2037 2c20 385d 5d29 5d20 6f75 743a  6, 7, 8]])] out:
+0002a3d0: 2028 4e6f 6e65 2c29 206b 7761 7267 733a   (None,) kwargs:
+0002a3e0: 207b 2761 7869 7327 3a20 4e6f 6e65 7d0d   {'axis': None}.
+0002a3f0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
+0002a400: 6573 756c 7473 2033 330d 0a20 2020 2020  esults 33..     
+0002a410: 2020 2020 2020 2023 204f 7574 5b32 345d         # Out[24]
+0002a420: 3a20 3333 0d0a 2020 2020 2020 2020 2020  : 33..          
+0002a430: 2020 2320 496e 205b 3235 5d3a 206e 702e    # In [25]: np.
+0002a440: 6164 642e 7265 6475 6365 2874 2c20 6178  add.reduce(t, ax
+0002a450: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
+0002a460: 733d 5472 7565 290d 0a20 2020 2020 2020  s=True)..       
+0002a470: 2020 2020 2023 2121 7265 6475 6365 2020       #!!reduce  
+0002a480: 7265 6475 6365 206e 696e 3a20 3220 3120  reduce nin: 2 1 
+0002a490: 3c75 6675 6e63 2027 6164 6427 3e20 5b61  <ufunc 'add'> [a
+0002a4a0: 7272 6179 285b 5b33 2c20 342c 2035 5d2c  rray([[3, 4, 5],
+0002a4b0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002a4c0: 2020 2020 2020 5b36 2c20 372c 2038 5d5d        [6, 7, 8]]
+0002a4d0: 295d 206f 7574 3a20 284e 6f6e 652c 2920  )] out: (None,) 
+0002a4e0: 6b77 6172 6773 3a20 7b27 6178 6973 273a  kwargs: {'axis':
+0002a4f0: 204e 6f6e 652c 2027 6b65 6570 6469 6d73   None, 'keepdims
+0002a500: 273a 2054 7275 657d 0d0a 2020 2020 2020  ': True}..      
+0002a510: 2020 2020 2020 2320 7265 7375 6c74 7320        # results 
+0002a520: 5b5b 3333 5d5d 0d0a 2020 2020 2020 2020  [[33]]..        
+0002a530: 2020 2020 2320 4f75 745b 3235 5d3a 2061      # Out[25]: a
+0002a540: 7272 6179 285b 5b33 335d 5d29 0d0a 2020  rray([[33]])..  
+0002a550: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
+0002a560: 3236 5d3a 206e 702e 6164 642e 7265 6475  26]: np.add.redu
+0002a570: 6365 2874 2c20 6178 6973 3d4e 6f6e 652c  ce(t, axis=None,
+0002a580: 206b 6565 7064 696d 733d 5472 7565 2c20   keepdims=True, 
+0002a590: 6474 7970 653d 6e70 2e66 6c6f 6174 3332  dtype=np.float32
+0002a5a0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0002a5b0: 2121 7265 6475 6365 2020 7265 6475 6365  !!reduce  reduce
+0002a5c0: 206e 696e 3a20 3220 3120 3c75 6675 6e63   nin: 2 1 <ufunc
+0002a5d0: 2027 6164 6427 3e20 5b61 7272 6179 285b   'add'> [array([
+0002a5e0: 5b33 2c20 342c 2035 5d2c 0d0a 2020 2020  [3, 4, 5],..    
+0002a5f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002a600: 5b36 2c20 372c 2038 5d5d 295d 206f 7574  [6, 7, 8]])] out
+0002a610: 3a20 284e 6f6e 652c 2920 6b77 6172 6773  : (None,) kwargs
+0002a620: 3a20 7b27 6178 6973 273a 204e 6f6e 652c  : {'axis': None,
+0002a630: 2027 6b65 6570 6469 6d73 273a 2054 7275   'keepdims': Tru
+0002a640: 652c 2027 6474 7970 6527 3a20 3c63 6c61  e, 'dtype': <cla
+0002a650: 7373 2027 6e75 6d70 792e 666c 6f61 7433  ss 'numpy.float3
+0002a660: 3227 3e7d 0d0a 2020 2020 2020 2020 2020  2'>}..          
+0002a670: 2020 2320 7265 7375 6c74 7320 5b5b 3333    # results [[33
+0002a680: 2e5d 5d0d 0a20 2020 2020 2020 2020 2020  .]]..           
+0002a690: 2023 204f 7574 5b32 365d 3a20 6172 7261   # Out[26]: arra
+0002a6a0: 7928 5b5b 3333 2e5d 5d2c 2064 7479 7065  y([[33.]], dtype
+0002a6b0: 3d66 6c6f 6174 3332 290d 0a20 2020 2020  =float32)..     
+0002a6c0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
+0002a6d0: 2121 7265 6475 6365 2022 2c20 6d65 7468  !!reduce ", meth
+0002a6e0: 6f64 2c20 276e 696e 3a27 2c20 7566 756e  od, 'nin:', ufun
+0002a6f0: 632e 6e69 6e2c 2075 6675 6e63 2e6e 6f75  c.nin, ufunc.nou
+0002a700: 742c 2075 6675 6e63 2c20 2061 7267 732c  t, ufunc,  args,
+0002a710: 2027 6f75 743a 272c 206f 7574 7075 7473   'out:', outputs
+0002a720: 2c20 2027 6b77 6172 6773 3a27 2c20 6b77  ,  'kwargs:', kw
+0002a730: 6172 6773 2c27 6e64 696d 272c 2061 7267  args,'ndim', arg
+0002a740: 735b 305d 2e6e 6469 6d29 0d0a 2020 2020  s[0].ndim)..    
+0002a750: 2020 2020 2020 2020 2320 7265 7375 6c74          # result
+0002a760: 4e20 3d20 7375 7065 7228 4661 7374 4172  N = super(FastAr
+0002a770: 7261 792c 2073 656c 6629 2e5f 5f61 7272  ray, self).__arr
+0002a780: 6179 5f75 6675 6e63 5f5f 2875 6675 6e63  ay_ufunc__(ufunc
+0002a790: 2c20 6d65 7468 6f64 2c2a 2a6b 7761 7267  , method,**kwarg
+0002a7a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+0002a7b0: 2320 7072 696e 7428 2221 2172 6573 756c  # print("!!resul
+0002a7c0: 7420 6e75 6d70 7922 2c20 7265 7375 6c74  t numpy", result
+0002a7d0: 4e2c 2074 7970 6528 7265 7375 6c74 4e29  N, type(resultN)
+0002a7e0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0002a7f0: 204e 4f54 453a 0d0a 2020 2020 2020 2020   NOTE:..        
+0002a800: 2020 2020 2320 6c6f 6f6b 2066 6f72 2072      # look for r
+0002a810: 6564 7563 6520 6c6f 6769 6361 6c5f 6f72  educe logical_or
+0002a820: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002a830: 6c6f 6f6b 2066 6f72 2072 6564 7563 655f  look for reduce_
+0002a840: 6c6f 6769 6361 6c5f 616e 6420 2020 2875  logical_and   (u
+0002a850: 7365 6420 7769 7468 206e 702e 666d 696e  sed with np.fmin
+0002a860: 2066 6f72 2069 6e73 7461 6e63 6529 0d0a   for instance)..
+0002a870: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0002a880: 6475 6365 5f66 756e 6320 3d20 6752 6564  duce_func = gRed
+0002a890: 7563 6555 4675 6e63 732e 6765 7428 7566  uceUFuncs.get(uf
+0002a8a0: 756e 632c 204e 6f6e 6529 0d0a 0d0a 2020  unc, None)....  
+0002a8b0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
+0002a8c0: 2077 6520 6361 6e20 7072 6f63 6565 6420   we can proceed 
+0002a8d0: 746f 2063 616c 6375 6c61 7465 2061 2066  to calculate a f
+0002a8e0: 6173 7465 7220 7761 790d 0a20 2020 2020  aster way..     
+0002a8f0: 2020 2069 6620 6d65 7468 6f64 203d 3d20     if method == 
+0002a900: 225f 5f63 616c 6c5f 5f22 2061 6e64 2046  "__call__" and F
+0002a910: 6173 7441 7272 6179 2e46 6173 7465 7255  astArray.FasterU
+0002a920: 4675 6e63 2061 6e64 206e 6f74 2074 6f70  Func and not top
+0002a930: 6c65 7665 6c5f 6162 6f72 743a 0d0a 2020  level_abort:..  
+0002a940: 2020 2020 2020 2020 2020 2320 6368 6563            # chec
+0002a950: 6b20 666f 7220 6269 6e61 7279 2075 6675  k for binary ufu
+0002a960: 6e63 0d0a 2020 2020 2020 2020 2020 2020  nc..            
+0002a970: 6966 206c 656e 2861 7267 7329 203d 3d20  if len(args) == 
+0002a980: 3220 616e 6420 7566 756e 632e 6e6f 7574  2 and ufunc.nout
+0002a990: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002a9a0: 2020 2020 2020 2020 2323 2323 2323 2323          ########
+0002a9b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002a9c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002a9d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002a9e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002a9f0: 2323 230d 0a20 2020 2020 2020 2020 2020  ###..           
+0002aa00: 2020 2020 2023 2320 4249 4e41 5259 0d0a       ## BINARY..
+0002aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002aa20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002aa30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002aa40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002aa50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002aa60: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
+0002aa70: 2020 2020 2020 2020 2020 2020 2061 7272               arr
+0002aa80: 6179 5f74 7970 6573 3a20 4c69 7374 5b6e  ay_types: List[n
+0002aa90: 702e 6474 7970 655d 203d 205b 5d0d 0a20  p.dtype] = [].. 
+0002aaa0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002aab0: 6361 6c61 725f 7479 7065 733a 204c 6973  calar_types: Lis
+0002aac0: 745b 5363 616c 6172 5479 7065 5d20 3d20  t[ScalarType] = 
+0002aad0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
+0002aae0: 2020 2020 2020 7363 616c 6172 733a 2069        scalars: i
+0002aaf0: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
+0002ab00: 2020 2020 2020 2020 6162 6f72 743a 2069          abort: i
+0002ab10: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
+0002ab20: 2020 2020 2020 2020 666f 7220 6172 7220          for arr 
+0002ab30: 696e 2061 7267 733a 0d0a 2020 2020 2020  in args:..      
+0002ab40: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0002ab50: 7254 7970 6520 3d20 7479 7065 2861 7272  rType = type(arr
+0002ab60: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002ab70: 2020 2020 2020 2069 6620 6172 7254 7970         if arrTyp
+0002ab80: 6520 696e 2053 6361 6c61 7254 7970 653a  e in ScalarType:
+0002ab90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002aba0: 2020 2020 2020 2020 2020 7363 616c 6172            scalar
+0002abb0: 7320 2b3d 2031 0d0a 2020 2020 2020 2020  s += 1..        
+0002abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002abd0: 7363 616c 6172 5f74 7970 6573 2e61 7070  scalar_types.app
+0002abe0: 656e 6428 6172 7254 7970 6529 0d0a 2020  end(arrType)..  
+0002abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
 0002ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac20: 2020 2023 2073 6f6d 6574 696d 6573 2062     # sometimes b
-0002ac30: 6f74 6820 6f66 2074 6865 6d20 6d75 7374  oth of them must
-0002ac40: 2062 6520 7570 6361 7374 2e2e 2e0d 0a20   be upcast..... 
-0002ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ac70: 2020 2020 2020 2023 2063 6f6e 7369 6465         # conside
-0002ac80: 7220 2069 6e74 3820 2a20 7569 6e74 3820  r  int8 * uint8 
-0002ac90: 3d3d 3e20 7769 6c6c 2075 7063 6173 7420  ==> will upcast 
-0002aca0: 746f 2069 6e74 3136 0d0a 2020 2020 2020  to int16..      
-0002acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002acd0: 2020 2320 7072 696e 7428 2221 2121 6361    # print("!!!ca
-0002ace0: 6e6e 6f74 2075 6e64 6572 7374 616e 6420  nnot understand 
-0002acf0: 7570 6361 7374 2072 756c 6573 222c 2061  upcast rules", a
-0002ad00: 7272 6179 7479 7065 735b 305d 2c20 6172  rraytypes[0], ar
-0002ad10: 7261 7974 7970 6573 5b31 5d2c 2066 696e  raytypes[1], fin
-0002ad20: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
+0002ac20: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0002ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac40: 2020 2061 7272 6179 5f74 7970 6573 2e61     array_types.a
+0002ac50: 7070 656e 6428 6172 722e 6474 7970 6529  ppend(arr.dtype)
+0002ac60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ac70: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002ac80: 6368 6563 6b20 666f 7220 6e6f 6e20 636f  check for non co
+0002ac90: 6e74 696e 676f 7573 2061 7272 6179 730d  ntingous arrays.
+0002aca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002acb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002acc0: 6172 722e 6974 656d 7369 7a65 2021 3d20  arr.itemsize != 
+0002acd0: 6172 722e 7374 7269 6465 735b 305d 3a0d  arr.strides[0]:.
+0002ace0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad00: 2061 626f 7274 203d 2031 0d0a 2020 2020   abort = 1..    
+0002ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad20: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
 0002ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad50: 2020 2061 7267 735b 305d 203d 205f 4153     args[0] = _AS
-0002ad60: 5459 5045 2861 7267 735b 305d 2c20 6669  TYPE(args[0], fi
-0002ad70: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
-0002ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ada0: 2020 2020 6172 6773 5b31 5d20 3d20 5f41      args[1] = _A
-0002adb0: 5354 5950 4528 6172 6773 5b31 5d2c 2066  STYPE(args[1], f
-0002adc0: 696e 616c 5f64 7479 7065 290d 0a20 2020  inal_dtype)..   
-0002add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad40: 2020 2020 2020 2020 2061 626f 7274 203d           abort =
+0002ad50: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+0002ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad70: 2320 6361 6e20 6861 7070 656e 2077 6865  # can happen whe
+0002ad80: 6e20 4e6f 6e65 206f 7220 6120 7079 7468  n None or a pyth
+0002ad90: 6f6e 206c 6973 7420 6973 2070 6173 7365  on list is passe
+0002ada0: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
+0002adb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002adc0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
+0002add0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
 0002ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002adf0: 2020 2020 2023 2054 4a44 2063 6865 636b       # TJD check
-0002ae00: 206c 6f67 6963 2068 6572 652e 2e2e 2077   logic here... w
-0002ae10: 6861 7420 646f 6573 206e 756d 7079 2077  hat does numpy w
-0002ae20: 6865 6e20 696e 742a 202a 2075 696e 7438  hen int* * uint8
-0002ae30: 203f 2073 7065 6564 2074 6573 740d 0a20   ? speed test.. 
-0002ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ae50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ae60: 2020 2020 2020 2023 2355 7365 4e75 6d70         ##UseNump
-0002ae70: 7920 3d20 5472 7565 0d0a 2020 2020 2020  y = True..      
+0002adf0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0002ae00: 6622 2a2a 646f 6e74 206b 6e6f 7720 686f  f"**dont know ho
+0002ae10: 7720 746f 2068 616e 646c 6520 6172 7261  w to handle arra
+0002ae20: 7920 7b61 7272 7d20 6172 6773 3a20 7b61  y {arr} args: {a
+0002ae30: 7267 737d 2229 0d0a 0d0a 2020 2020 2020  rgs}")....      
+0002ae40: 2020 2020 2020 2020 2020 6966 2061 626f            if abo
+0002ae50: 7274 203d 3d20 303a 0d0a 2020 2020 2020  rt == 0:..      
+0002ae60: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002ae70: 2073 6361 6c61 7273 203c 2032 3a0d 0a20   scalars < 2:.. 
 0002ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ae90: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aeb0: 2020 2020 2020 2020 2020 2020 2023 2055               # U
-0002aec0: 5043 4153 5420 5255 4c45 5320 7768 656e  PCAST RULES when
-0002aed0: 206f 6e65 2069 7320 6120 7363 616c 6172   one is a scalar
-0002aee0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ae90: 2020 2020 2020 2069 735f 6c6f 6769 6361         is_logica
+0002aea0: 6c20 3d20 300d 0a20 2020 2020 2020 2020  l = 0..         
+0002aeb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002aec0: 2063 6865 636b 2066 6f72 2061 6464 2c20   check for add, 
+0002aed0: 7375 622c 206d 756c 2c20 6469 7669 6465  sub, mul, divide
+0002aee0: 2c20 706f 7765 720d 0a20 2020 2020 2020  , power..       
 0002aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af00: 2020 6966 2061 7272 6179 5f74 7970 6573    if array_types
-0002af10: 5b30 5d20 213d 2066 696e 616c 5f64 7479  [0] != final_dty
-0002af20: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
-0002af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af40: 2020 2020 2020 2020 2023 2077 6869 6368           # which
-0002af50: 2061 7267 756d 656e 7420 6973 2074 6865   argument is the
-0002af60: 2073 6361 6c61 723f 2020 636f 6e76 6572   scalar?  conver
-0002af70: 7420 7468 6520 6f74 6865 7220 6f6e 650d  t the other one.
-0002af80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002af90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002afa0: 2020 2020 2069 6620 7479 7065 2861 7267       if type(arg
-0002afb0: 735b 305d 2920 696e 2053 6361 6c61 7254  s[0]) in ScalarT
-0002afc0: 7970 653a 0d0a 2020 2020 2020 2020 2020  ype:..          
-0002afd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002afe0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002aff0: 7072 696e 7428 2263 6f6e 7665 7274 696e  print("convertin
-0002b000: 6720 6172 6732 2066 726f 6d22 2c20 6172  g arg2 from", ar
-0002b010: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
-0002b020: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-0002b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b040: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-0002b050: 735b 315d 203d 205f 4153 5459 5045 2861  s[1] = _ASTYPE(a
-0002b060: 7267 735b 315d 2c20 6669 6e61 6c5f 6474  rgs[1], final_dt
-0002b070: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+0002af00: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
+0002af10: 2067 4269 6e61 7279 5546 756e 6373 2e67   gBinaryUFuncs.g
+0002af20: 6574 2875 6675 6e63 2c20 4e6f 6e65 290d  et(ufunc, None).
+0002af30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002af40: 2020 2020 2020 2020 2069 6620 6661 7374           if fast
+0002af50: 5f66 756e 6374 696f 6e20 6973 204e 6f6e  _function is Non
+0002af60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002af80: 2320 6368 6563 6b20 666f 7220 636f 6d70  # check for comp
+0002af90: 6172 6973 6f6e 2061 6e64 206c 6f67 6963  arison and logic
+0002afa0: 616c 206f 722f 616e 6420 6675 6e63 7469  al or/and functi
+0002afb0: 6f6e 730d 0a20 2020 2020 2020 2020 2020  ons..           
+0002afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002afd0: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
+0002afe0: 2067 4269 6e61 7279 4c6f 6769 6361 6c55   gBinaryLogicalU
+0002aff0: 4675 6e63 732e 6765 7428 7566 756e 632c  Funcs.get(ufunc,
+0002b000: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
+0002b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b020: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
+0002b030: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+0002b040: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b060: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+0002b070: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
 0002b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b090: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0002b0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0c0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
-0002b0d0: 2822 636f 6e76 6572 7469 6e67 2061 7267  ("converting arg
-0002b0e0: 3120 6672 6f6d 2022 2c20 6172 6773 5b30  1 from ", args[0
-0002b0f0: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
-0002b100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0a0: 2020 7072 696e 7428 6622 2a2a 6c6f 6769    print(f"**logi
+0002b0b0: 6361 6c20 6675 6e63 7469 6f6e 2063 616c  cal function cal
+0002b0c0: 6c65 6420 7b75 6675 6e63 7d20 6172 6773  led {ufunc} args
+0002b0d0: 3a20 7b61 7267 737d 2229 0d0a 2020 2020  : {args}")..    
+0002b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b0f0: 2020 2020 2020 2020 2020 2020 6973 5f6c              is_l
+0002b100: 6f67 6963 616c 203d 2031 0d0a 2020 2020  ogical = 1..    
 0002b110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b120: 2020 2020 2020 2020 2061 7267 735b 305d           args[0]
-0002b130: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
-0002b140: 305d 2c20 6669 6e61 6c5f 6474 7970 6529  0], final_dtype)
-0002b150: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002b160: 2320 6e6f 7420 6120 6269 6e61 7279 2075  # not a binary u
-0002b170: 6675 6e63 2c20 6368 6563 6b20 666f 7220  func, check for 
-0002b180: 756e 6172 7920 7566 756e 630d 0a20 2020  unary ufunc..   
-0002b190: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-0002b1a0: 2066 6f72 206a 7573 7420 3120 696e 7075   for just 1 inpu
-0002b1b0: 7420 2875 6e61 7279 290d 0a0d 0a20 2020  t (unary)....   
-0002b1c0: 2020 2020 2020 2020 2065 6c69 6620 2875           elif (u
-0002b1d0: 6675 6e63 2e6e 696e 203d 3d20 3129 2061  func.nin == 1) a
-0002b1e0: 6e64 2028 7566 756e 632e 6e6f 7574 203d  nd (ufunc.nout =
-0002b1f0: 3d20 3129 3a0d 0a20 2020 2020 2020 2020  = 1):..         
-0002b200: 2020 2020 2020 2023 2323 2323 2323 2323         #########
-0002b210: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b220: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b230: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b240: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b250: 2323 0d0a 2020 2020 2020 2020 2020 2020  ##..            
-0002b260: 2020 2020 2323 2055 4e41 5259 0d0a 2020      ## UNARY..  
-0002b270: 2020 2020 2020 2020 2020 2020 2020 2323                ##
-0002b280: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b290: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b2a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b2b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002b2c0: 2323 2323 2323 2323 230d 0a20 2020 2020  #########..     
-0002b2d0: 2020 2020 2020 2020 2020 2066 6173 745f             fast_
-0002b2e0: 6675 6e63 7469 6f6e 203d 2067 556e 6172  function = gUnar
-0002b2f0: 7955 4675 6e63 732e 6765 7428 7566 756e  yUFuncs.get(ufun
-0002b300: 632c 204e 6f6e 6529 0d0a 2020 2020 2020  c, None)..      
-0002b310: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002b320: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002b330: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
-0002b340: 6520 3e20 313a 0d0a 2020 2020 2020 2020  e > 1:..        
-0002b350: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0002b360: 7428 222a 2a2a 756e 6b6e 6f77 6e20 7566  t("***unknown uf
-0002b370: 756e 6320 6172 6720 7374 796c 653a 2022  unc arg style: "
-0002b380: 2c20 7566 756e 632e 6e69 6e2c 2075 6675  , ufunc.nin, ufu
-0002b390: 6e63 2e6e 6f75 742c 2075 6675 6e63 2c20  nc.nout, ufunc, 
-0002b3a0: 6172 6773 2c20 6b77 6172 6773 290d 0a0d  args, kwargs)...
-0002b3b0: 0a20 2020 2020 2020 2023 202d 2d2d 2d2d  .        # -----
-0002b3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b3e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b3f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b420: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0002b430: 2020 6966 206e 6f74 2046 6173 7441 7272    if not FastArr
-0002b440: 6179 2e46 6173 7465 7255 4675 6e63 3a0d  ay.FasterUFunc:.
-0002b450: 0a20 2020 2020 2020 2020 2020 2066 6173  .            fas
-0002b460: 745f 6675 6e63 7469 6f6e 203d 204e 6f6e  t_function = Non
-0002b470: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-0002b480: 6564 7563 655f 6675 6e63 203d 204e 6f6e  educe_func = Non
-0002b490: 650d 0a0d 0a20 2020 2020 2020 2023 2063  e....        # c
-0002b4a0: 6865 636b 2066 6f72 2061 2072 6564 7563  heck for a reduc
-0002b4b0: 6520 6675 6e63 206c 696b 6520 7375 6d20  e func like sum 
-0002b4c0: 6f72 206d 696e 0d0a 2020 2020 2020 2020  or min..        
-0002b4d0: 6966 2072 6564 7563 655f 6675 6e63 2069  if reduce_func i
-0002b4e0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0002b4f0: 2020 2020 2020 2020 206b 6565 7064 696d           keepdim
-0002b500: 733a 2062 6f6f 6c20 3d20 6b77 6172 6773  s: bool = kwargs
-0002b510: 2e67 6574 2822 6b65 6570 6469 6d73 222c  .get("keepdims",
-0002b520: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-0002b530: 2020 2020 2069 6620 6474 7970 6520 6973       if dtype is
-0002b540: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0002b550: 2020 2020 2020 2020 6474 7970 6520 3d20          dtype = 
-0002b560: 6172 6773 5b30 5d2e 6474 7970 650d 0a0d  args[0].dtype...
-0002b570: 0a20 2020 2020 2020 2020 2020 2023 204d  .            # M
-0002b580: 6174 684c 6564 6765 720d 0a20 2020 2020  athLedger..     
-0002b590: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0002b5a0: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-0002b5b0: 684c 6564 6765 722e 5f52 4544 5543 4528  hLedger._REDUCE(
-0002b5c0: 6172 6773 5b30 5d2c 2072 6564 7563 655f  args[0], reduce_
-0002b5d0: 6675 6e63 290d 0a20 2020 2020 2020 2020  func)..         
-0002b5e0: 2020 2063 6861 7220 3d20 6e70 2e64 7479     char = np.dty
-0002b5f0: 7065 2864 7479 7065 292e 6368 6172 0d0a  pe(dtype).char..
-0002b600: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002b610: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002b620: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
-0002b630: 2020 2020 2020 2070 7269 6e74 2822 2a2a         print("**
-0002b640: 2a72 6573 756c 7420 6672 6f6d 2072 6564  *result from red
-0002b650: 7563 6522 2c20 7265 7375 6c74 2c20 7479  uce", result, ty
-0002b660: 7065 2872 6573 756c 7429 2c20 6474 7970  pe(result), dtyp
-0002b670: 652c 2063 6861 7229 0d0a 0d0a 2020 2020  e, char)....    
-0002b680: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
-0002b690: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+0002b120: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002b130: 6c5f 6474 7970 6520 3d20 6e70 2e62 6f6f  l_dtype = np.boo
+0002b140: 6c5f 0d0a 0d0a 2020 2020 2020 2020 2020  l_....          
+0002b150: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002b160: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
+0002b170: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+0002b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b190: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
+0002b1a0: 2062 6974 7769 7365 2066 756e 6374 696f   bitwise functio
+0002b1b0: 6e73 3f20 2874 6573 7420 7468 6973 290d  ns? (test this).
+0002b1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b1d0: 2020 2020 2020 2020 2020 2020 2066 6173               fas
+0002b1e0: 745f 6675 6e63 7469 6f6e 203d 2067 4269  t_function = gBi
+0002b1f0: 6e61 7279 4269 7477 6973 6555 4675 6e63  naryBitwiseUFunc
+0002b200: 732e 6765 7428 7566 756e 632c 204e 6f6e  s.get(ufunc, Non
+0002b210: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+0002b220: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002b230: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
+0002b240: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0002b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b260: 2020 2020 2020 2020 2069 6620 6861 735f           if has_
+0002b270: 6f75 7470 7574 7320 616e 6420 6973 5f6c  outputs and is_l
+0002b280: 6f67 6963 616c 203d 3d20 303a 0d0a 2020  ogical == 0:..  
+0002b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b2a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002b2b0: 6861 7665 2074 6f20 636f 6e66 6f72 6d20  have to conform 
+0002b2c0: 746f 206f 7574 7075 740d 0a20 2020 2020  to output..     
+0002b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b2e0: 2020 2020 2020 2020 2020 2066 696e 616c             final
+0002b2f0: 5f64 7479 7065 203d 206f 7574 5f61 7267  _dtype = out_arg
+0002b300: 735b 305d 2e64 7479 7065 0d0a 2020 2020  s[0].dtype..    
+0002b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b320: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0002b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b340: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002b350: 6620 6973 5f6c 6f67 6963 616c 203d 3d20  f is_logical == 
+0002b360: 3120 616e 6420 7363 616c 6172 7320 3d3d  1 and scalars ==
+0002b370: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
+0002b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b390: 2020 2020 2020 2020 2023 204e 4f54 453a           # NOTE:
+0002b3a0: 2073 6361 6c61 7220 7570 6361 7374 2072   scalar upcast r
+0002b3b0: 756c 6573 202d 2d20 6a75 7374 2061 7070  ules -- just app
+0002b3c0: 6c79 2074 6f20 6c6f 6769 6361 6c73 2073  ly to logicals s
+0002b3d0: 6f20 7468 6174 2061 7272 203c 2035 2064  o that arr < 5 d
+0002b3e0: 6f65 7320 6e6f 7420 7570 6361 7374 3f0d  oes not upcast?.
+0002b3f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b410: 2020 2020 2023 2020 2020 2020 206f 7220       #       or 
+0002b420: 676c 6f62 616c 6c79 2061 7070 6c79 2074  globally apply t
+0002b430: 6869 7320 7275 6c65 2073 6f20 7468 6174  his rule so that
+0002b440: 2061 7272 203d 2061 7272 202b 2035 0d0a   arr = arr + 5..
+0002b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b470: 2020 2020 2320 6966 2073 6361 6c61 7273      # if scalars
+0002b480: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b4a0: 2020 2020 2020 2020 2020 2020 2320 7370              # sp
+0002b4b0: 6563 6961 6c20 6361 7365 2068 6176 6520  ecial case have 
+0002b4c0: 746f 2073 6565 2069 6620 7363 616c 6172  to see if scalar
+0002b4d0: 2069 7320 696e 2072 616e 6765 0d0a 2020   is in range..  
+0002b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b500: 2020 6966 2074 7970 6528 6172 6773 5b30    if type(args[0
+0002b510: 5d29 2069 6e20 5363 616c 6172 5479 7065  ]) in ScalarType
+0002b520: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b540: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
+0002b550: 725f 7661 6c20 3d20 6172 6773 5b30 5d0d  r_val = args[0].
+0002b560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b580: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002b590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b5b0: 2020 2020 7363 616c 6172 5f76 616c 203d      scalar_val =
+0002b5c0: 2061 7267 735b 315d 0d0a 0d0a 2020 2020   args[1]....    
+0002b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b5f0: 6669 6e61 6c5f 6474 7970 6520 3d20 6c6f  final_dtype = lo
+0002b600: 6769 6361 6c5f 6669 6e64 5f63 6f6d 6d6f  gical_find_commo
+0002b610: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
+0002b620: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
+0002b630: 2c20 7363 616c 6172 5f76 616c 290d 0a0d  , scalar_val)...
+0002b640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b660: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0002b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b680: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0002b690: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
 0002b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b6b0: 2320 7072 696e 7428 2272 6564 7563 6520  # print("reduce 
-0002b6c0: 6361 6c6c 6564 222c 2075 6675 6e63 2c20  called", ufunc, 
-0002b6d0: 6b65 6570 6469 6d73 2c20 6474 7970 6529  keepdims, dtype)
-0002b6e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002b6f0: 2020 6966 2072 6564 7563 655f 6675 6e63    if reduce_func
-0002b700: 2069 6e20 5b52 4544 5543 455f 4655 4e43   in [REDUCE_FUNC
-0002b710: 5449 4f4e 532e 5245 4455 4345 5f53 554d  TIONS.REDUCE_SUM
-0002b720: 2c20 5245 4455 4345 5f46 554e 4354 494f  , REDUCE_FUNCTIO
-0002b730: 4e53 2e52 4544 5543 455f 4e41 4e53 554d  NS.REDUCE_NANSUM
-0002b740: 5d20 616e 6420 6973 696e 7374 616e 6365  ] and isinstance
-0002b750: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0002b760: 2020 2020 2020 2072 6573 756c 742c 2066         result, f
-0002b770: 6c6f 6174 0d0a 2020 2020 2020 2020 2020  loat..          
-0002b780: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
-0002b790: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002b7a0: 7375 6c74 203d 206e 702e 666c 6f61 7436  sult = np.float6
-0002b7b0: 3428 7265 7375 6c74 290d 0a20 2020 2020  4(result)..     
-0002b7c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002b7d0: 6474 7970 6520 213d 206e 702e 666c 6f61  dtype != np.floa
-0002b7e0: 7433 3220 616e 6420 6474 7970 6520 213d  t32 and dtype !=
-0002b7f0: 206e 702e 666c 6f61 7436 343a 0d0a 2020   np.float64:..  
+0002b6b0: 2020 2020 2020 2023 2054 4f44 4f3a 2063         # TODO: c
+0002b6c0: 6865 636b 2066 6f72 2062 7567 2077 6865  heck for bug whe
+0002b6d0: 7265 206e 702e 696e 7433 3220 7479 7065  re np.int32 type
+0002b6e0: 2037 2067 6574 7320 666c 6970 7065 6420   7 gets flipped 
+0002b6f0: 746f 206e 702e 696e 7433 3220 7479 7065  to np.int32 type
+0002b700: 2035 0d0a 2020 2020 2020 2020 2020 2020   5..            
+0002b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b720: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
+0002b730: 7273 203d 3d20 3020 616e 6420 6c65 6e28  rs == 0 and len(
+0002b740: 6172 7261 795f 7479 7065 7329 203d 3d20  array_types) == 
+0002b750: 3220 616e 6420 2861 7272 6179 5f74 7970  2 and (array_typ
+0002b760: 6573 5b30 5d20 3d3d 2061 7272 6179 5f74  es[0] == array_t
+0002b770: 7970 6573 5b31 5d29 3a0d 0a20 2020 2020  ypes[1]):..     
+0002b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b7a0: 2020 2066 696e 616c 5f64 7479 7065 203d     final_dtype =
+0002b7b0: 2061 7272 6179 5f74 7970 6573 5b30 5d0d   array_types[0].
+0002b7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b7e0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b810: 2020 2320 7072 6573 6572 7665 2069 6e74    # preserve int
-0002b820: 6567 6572 730d 0a20 2020 2020 2020 2020  egers..         
-0002b830: 2020 2020 2020 2020 2020 2069 6620 6368             if ch
-0002b840: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
-0002b850: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
-0002b860: 6567 6572 3634 3a0d 0a20 2020 2020 2020  eger64:..       
-0002b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b880: 2023 2070 7265 7365 7276 6520 6869 6768   # preserve high
-0002b890: 2062 6974 0d0a 2020 2020 2020 2020 2020   bit..          
-0002b8a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002b8b0: 7375 6c74 203d 206e 702e 7569 6e74 3634  sult = np.uint64
-0002b8c0: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
-0002b8d0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002b8e0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0002b8f0: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002b900: 756c 7420 3d20 6e70 2e69 6e74 3634 2872  ult = np.int64(r
-0002b910: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-0002b920: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0002b930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b940: 2020 2072 6573 756c 7420 3d20 6e70 2e66     result = np.f
-0002b950: 6c6f 6174 3634 2872 6573 756c 7429 0d0a  loat64(result)..
-0002b960: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002b970: 2020 2320 4d49 4e2f 4d41 5820 6e65 6564    # MIN/MAX need
-0002b980: 2074 6f20 7265 7475 726e 2073 616d 6520   to return same 
-0002b990: 7479 7065 0d0a 2020 2020 2020 2020 2020  type..          
-0002b9a0: 2020 2020 2020 6966 2072 6564 7563 655f        if reduce_
-0002b9b0: 6675 6e63 203e 3d20 5245 4455 4345 5f46  func >= REDUCE_F
-0002b9c0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-0002b9d0: 4d49 4e3a 0d0a 2020 2020 2020 2020 2020  MIN:..          
-0002b9e0: 2020 2020 2020 2020 2020 2320 6d69 6e20            # min 
-0002b9f0: 6d61 7820 6e6f 7420 616c 6c6f 7765 6420  max not allowed 
-0002ba00: 6f6e 2065 6d70 7479 2061 7272 6179 2070  on empty array p
-0002ba10: 6572 2075 6e69 7420 7465 7374 0d0a 2020  er unit test..  
+0002b810: 2020 2020 2320 6368 6563 6b20 666f 7220      # check for 
+0002b820: 696e 7420 7363 616c 6172 2061 6761 696e  int scalar again
+0002b830: 7374 2069 6e74 0d0a 2020 2020 2020 2020  st int..        
+0002b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b860: 2320 6275 6720 7768 6572 6520 6e70 2e69  # bug where np.i
+0002b870: 6e74 3820 616e 6420 7468 656e 2061 6464  nt8 and then add
+0002b880: 202b 3139 3939 206f 7220 6c61 7267 6572   +1999 or larger
+0002b890: 206e 756d 6265 722e 2020 6e65 6564 2074   number.  need t
+0002b8a0: 6f20 7570 6361 7374 0d0a 2020 2020 2020  o upcast..      
+0002b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b8d0: 2020 6966 2073 6361 6c61 7273 203d 3d20    if scalars == 
+0002b8e0: 3120 616e 6420 6172 7261 795f 7479 7065  1 and array_type
+0002b8f0: 735b 305d 2e6e 756d 203c 3d20 3130 3a0d  s[0].num <= 10:.
+0002b900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b920: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002b930: 7479 7065 2861 7267 735b 305d 2920 696e  type(args[0]) in
+0002b940: 2053 6361 6c61 7254 7970 653a 0d0a 2020   ScalarType:..  
+0002b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b970: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+0002b980: 616c 6172 5f76 616c 203d 2061 7267 735b  alar_val = args[
+0002b990: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+0002b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b9c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0002b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b9f0: 2020 2020 2020 2073 6361 6c61 725f 7661         scalar_va
+0002ba00: 6c20 3d20 6172 6773 5b31 5d0d 0a0d 0a20  l = args[1].... 
+0002ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba30: 2020 6966 206c 656e 2861 7267 735b 305d    if len(args[0]
-0002ba40: 2920 3d3d 2030 3a0d 0a20 2020 2020 2020  ) == 0:..       
-0002ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba60: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0002ba70: 7228 226d 696e 2f6d 6178 2061 7267 2069  r("min/max arg i
-0002ba80: 7320 616e 2065 6d70 7479 2073 6571 7565  s an empty seque
-0002ba90: 6e63 652e 2229 0d0a 0d0a 2020 2020 2020  nce.")....      
-0002baa0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002bab0: 6d69 6e2f 6d61 782f 6e61 6e6d 696e 2f6e  min/max/nanmin/n
-0002bac0: 616e 6d61 7820 2d2d 2073 616d 6520 7265  anmax -- same re
-0002bad0: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
-0002bae0: 2020 2020 2020 2020 2020 6966 2064 7479            if dty
-0002baf0: 7065 203d 3d20 6e70 2e62 6f6f 6c5f 3a0d  pe == np.bool_:.
-0002bb00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002bb10: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-0002bb20: 3d20 6e70 2e62 6f6f 6c28 7265 7375 6c74  = np.bool(result
-0002bb30: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002bb40: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb60: 2020 2020 2020 7265 7375 6c74 203d 2064        result = d
-0002bb70: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+0002ba30: 2020 2020 2020 2020 2020 2066 696e 616c             final
+0002ba40: 5f64 7479 7065 203d 206c 6f67 6963 616c  _dtype = logical
+0002ba50: 5f66 696e 645f 636f 6d6d 6f6e 5f74 7970  _find_common_typ
+0002ba60: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+0002ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ba90: 2020 2020 6172 7261 795f 7479 7065 732c      array_types,
+0002baa0: 2073 6361 6c61 725f 7479 7065 732c 2073   scalar_types, s
+0002bab0: 6361 6c61 725f 7661 6c0d 0a20 2020 2020  calar_val..     
+0002bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bae0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0002baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb10: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0002bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb40: 2020 2020 2066 696e 616c 5f64 7479 7065       final_dtype
+0002bb50: 203d 206e 702e 6669 6e64 5f63 6f6d 6d6f   = np.find_commo
+0002bb60: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
+0002bb70: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
 0002bb80: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002bb90: 2020 2020 2020 2020 2069 6620 6b65 6570           if keep
-0002bba0: 6469 6d73 3a0d 0a20 2020 2020 2020 2020  dims:..         
-0002bbb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0002bbc0: 6573 756c 7420 3d20 4661 7374 4172 7261  esult = FastArra
-0002bbd0: 7928 5b72 6573 756c 745d 292e 6173 7479  y([result]).asty
-0002bbe0: 7065 2864 7479 7065 290d 0a20 2020 2020  pe(dtype)..     
-0002bbf0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002bc00: 6b65 6570 6469 6d73 3a0d 0a20 2020 2020  keepdims:..     
-0002bc10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002bc20: 2066 6f72 6365 2062 6163 6b20 696e 746f   force back into
-0002bc30: 2061 6e20 6172 7261 7920 6672 6f6d 2073   an array from s
-0002bc40: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
-0002bc50: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0002bc60: 7420 3d20 4661 7374 4172 7261 7928 5b72  t = FastArray([r
-0002bc70: 6573 756c 745d 290d 0a0d 0a20 2020 2020  esult])....     
-0002bc80: 2020 2020 2020 2020 2020 2023 2077 6520             # we 
-0002bc90: 6469 6420 7468 6520 7265 6475 6365 2c20  did the reduce, 
-0002bca0: 6e6f 7720 7265 7475 726e 2074 6865 2072  now return the r
-0002bcb0: 6573 756c 740d 0a20 2020 2020 2020 2020  esult..         
-0002bcc0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0002bcd0: 7375 6c74 0d0a 0d0a 2020 2020 2020 2020  sult....        
-0002bce0: 2320 6368 6563 6b20 666f 7220 6e6f 726d  # check for norm
-0002bcf0: 616c 2063 616c 6c20 6675 6e63 7469 6f6e  al call function
-0002bd00: 0d0a 2020 2020 2020 2020 656c 6966 2066  ..        elif f
-0002bd10: 6173 745f 6675 6e63 7469 6f6e 2069 7320  ast_function is 
-0002bd20: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-0002bd30: 2020 2020 2020 2023 2043 616c 6c20 7468         # Call th
-0002bd40: 6520 4661 7374 4172 7261 7920 4150 4973  e FastArray APIs
-0002bd50: 2069 6e73 7465 6164 206f 6620 6e75 6d70   instead of nump
-0002bd60: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
-0002bd70: 2063 616c 6c6d 6f64 6520 3d20 2766 270d   callmode = 'f'.
-0002bd80: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-0002bd90: 756c 7473 203d 204e 6f6e 650d 0a20 2020  ults = None..   
-0002bda0: 2020 2020 2020 2020 2069 6620 7566 756e           if ufun
-0002bdb0: 632e 6e69 6e20 3d3d 2032 3a0d 0a20 2020  c.nin == 2:..   
-0002bdc0: 2020 2020 2020 2020 2020 2020 2066 696e               fin
-0002bdd0: 616c 5f6e 756d 203d 202d 310d 0a20 2020  al_num = -1..   
-0002bde0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002bdf0: 6669 6e61 6c5f 6474 7970 6520 6973 206e  final_dtype is n
-0002be00: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0002be10: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002be20: 2066 696e 616c 5f64 7479 7065 203d 3d20   final_dtype == 
-0002be30: 6e70 2e62 6f6f 6c5f 3a0d 0a20 2020 2020  np.bool_:..     
-0002be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be50: 2020 2066 696e 616c 5f6e 756d 203d 2030     final_num = 0
-0002be60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002be70: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be90: 2020 2020 2066 696e 616c 5f6e 756d 203d       final_num =
-0002bea0: 2066 696e 616c 5f64 7479 7065 2e6e 756d   final_dtype.num
-0002beb0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002bec0: 2020 2020 2320 6265 6361 7573 6520 7363      # because sc
-0002bed0: 616c 6172 7320 6361 6e20 6265 2070 6173  alars can be pas
-0002bee0: 7365 6420 6173 206e 702e 696e 7436 3428  sed as np.int64(
-0002bef0: 3836 3430 3030 290d 0a20 2020 2020 2020  864000)..       
-0002bf00: 2020 2020 2020 2020 2069 6620 7479 7065           if type
-0002bf10: 2861 7267 735b 305d 2920 696e 2067 4e75  (args[0]) in gNu
-0002bf20: 6d70 7953 6361 6c61 7254 7970 653a 0d0a  mpyScalarType:..
-0002bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf40: 2020 2020 2320 7072 696e 7428 2763 6f6e      # print('con
-0002bf50: 7665 7274 696e 6720 6172 6731 272c 2061  verting arg1', a
-0002bf60: 7267 735b 305d 290d 0a20 2020 2020 2020  rgs[0])..       
-0002bf70: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-0002bf80: 735b 305d 203d 206e 702e 6173 6172 7261  s[0] = np.asarra
-0002bf90: 7928 6172 6773 5b30 5d29 0d0a 0d0a 2020  y(args[0])....  
-0002bfa0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002bfb0: 2074 7970 6528 6172 6773 5b31 5d29 2069   type(args[1]) i
-0002bfc0: 6e20 674e 756d 7079 5363 616c 6172 5479  n gNumpyScalarTy
-0002bfd0: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
-0002bfe0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
-0002bff0: 2827 636f 6e76 6572 7469 6e67 2061 7267  ('converting arg
-0002c000: 3227 2c20 6172 6773 5b31 5d29 0d0a 2020  2', args[1])..  
-0002c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c020: 2020 6172 6773 5b31 5d20 3d20 6e70 2e61    args[1] = np.a
-0002c030: 7361 7272 6179 2861 7267 735b 315d 290d  sarray(args[1]).
-0002c040: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002c050: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
-0002c060: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
-0002c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c080: 2020 7072 696e 7428 0d0a 2020 2020 2020    print(..      
+0002bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bba0: 2023 2069 6620 7765 2061 7265 2061 6464   # if we are add
+0002bbb0: 696e 6720 7477 6f20 7374 7269 6e67 7320  ing two strings 
+0002bbc0: 6f72 2075 6e69 636f 6465 2c20 7370 6563  or unicode, spec
+0002bbd0: 6961 6c20 6361 7365 0d0a 2020 2020 2020  ial case..      
+0002bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bbf0: 2020 2020 2020 2320 6966 2077 6520 7468        # if we th
+0002bc00: 696e 6b20 7468 6520 6669 6e61 6c20 6474  ink the final dt
+0002bc10: 7970 6520 6973 2061 6e20 6f62 6a65 6374  ype is an object
+0002bc20: 2c20 6368 6563 6b20 6966 2074 6869 7320  , check if this 
+0002bc30: 6973 2072 6561 6c6c 7920 7477 6f20 7374  is really two st
+0002bc40: 7269 6e67 730d 0a20 2020 2020 2020 2020  rings..         
+0002bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bc60: 2020 2069 6620 6661 7374 5f66 756e 6374     if fast_funct
+0002bc70: 696f 6e20 3d3d 204d 4154 485f 4f50 4552  ion == MATH_OPER
+0002bc80: 4154 494f 4e2e 4144 4420 616e 6420 280d  ATION.ADD and (.
+0002bc90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bcb0: 2061 7272 6179 5f74 7970 6573 5b30 5d2e   array_types[0].
+0002bcc0: 6e75 6d20 3d3d 2031 3820 6f72 2061 7272  num == 18 or arr
+0002bcd0: 6179 5f74 7970 6573 5b30 5d2e 6e75 6d20  ay_types[0].num 
+0002bce0: 3d3d 2031 390d 0a20 2020 2020 2020 2020  == 19..         
+0002bcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bd00: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
+0002bd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bd20: 2020 2020 2020 2023 2061 7373 756d 6520         # assume 
+0002bd30: 6164 6469 7469 6f6e 206f 6620 7477 6f20  addition of two 
+0002bd40: 7374 7269 6e67 730d 0a20 2020 2020 2020  strings..       
+0002bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bd60: 2020 2020 2020 2020 2066 696e 616c 5f64           final_d
+0002bd70: 7479 7065 203d 2061 7272 6179 5f74 7970  type = array_typ
+0002bd80: 6573 5b30 5d0d 0a20 2020 2020 2020 2020  es[0]..         
+0002bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bda0: 2020 2020 2020 2069 6620 7363 616c 6172         if scalar
+0002bdb0: 7320 213d 2030 3a0d 0a20 2020 2020 2020  s != 0:..       
+0002bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bdd0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+0002bde0: 6520 6861 7665 2061 2073 6361 6c61 722e  e have a scalar.
+0002bdf0: 2e2e 206d 616b 6520 7375 7265 2077 6520  .. make sure we 
+0002be00: 636f 6e76 6572 7420 6974 0d0a 2020 2020  convert it..    
+0002be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002be30: 6966 2074 7970 6528 6172 6773 5b30 5d29  if type(args[0])
+0002be40: 2069 6e20 5363 616c 6172 5479 7065 3a0d   in ScalarType:.
+0002be50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002be70: 2020 2020 2020 2020 2023 2066 6978 2073           # fix s
+0002be80: 6361 6c61 7220 7479 7065 206d 616b 6520  calar type make 
+0002be90: 7375 7265 2073 7472 696e 6720 6f72 2075  sure string or u
+0002bea0: 6e69 636f 6465 0d0a 2020 2020 2020 2020  nicode..        
+0002beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bed0: 6966 2061 7272 6179 5f74 7970 6573 5b30  if array_types[0
+0002bee0: 5d2e 6e75 6d20 3d3d 2031 383a 0d0a 2020  ].num == 18:..  
+0002bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bf10: 2020 2020 2020 2020 2020 6172 6773 5b30            args[0
+0002bf20: 5d20 3d20 7374 722e 656e 636f 6465 2873  ] = str.encode(s
+0002bf30: 7472 2861 7267 735b 305d 2929 0d0a 2020  tr(args[0]))..  
+0002bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bf60: 2020 2020 2020 6966 2061 7272 6179 5f74        if array_t
+0002bf70: 7970 6573 5b30 5d2e 6e75 6d20 3d3d 2031  ypes[0].num == 1
+0002bf80: 393a 0d0a 2020 2020 2020 2020 2020 2020  9:..            
+0002bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bfb0: 6172 6773 5b30 5d20 3d20 7374 7228 6172  args[0] = str(ar
+0002bfc0: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
+0002bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bfe0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002bff0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c010: 2020 2020 2020 2020 2020 2069 6620 6172             if ar
+0002c020: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
+0002c030: 203d 3d20 3138 3a0d 0a20 2020 2020 2020   == 18:..       
+0002c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c060: 2020 2020 2061 7267 735b 315d 203d 2073       args[1] = s
+0002c070: 7472 2e65 6e63 6f64 6528 7374 7228 6172  tr.encode(str(ar
+0002c080: 6773 5b31 5d29 290d 0a20 2020 2020 2020  gs[1]))..       
 0002c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0a0: 2020 222a 2a2a 2062 696e 6172 7920 7468    "*** binary th
-0002c0b0: 696e 6b20 7765 2063 616e 2063 616c 6c22  ink we can call"
-0002c0c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002c0d0: 2020 2020 2020 2020 2020 2066 6173 745f             fast_
-0002c0e0: 6675 6e63 7469 6f6e 2c0d 0a20 2020 2020  function,..     
-0002c0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c100: 2020 2075 6675 6e63 2e6e 696e 2c0d 0a20     ufunc.nin,.. 
-0002c110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c120: 2020 2020 2020 2075 6675 6e63 2e6e 6f75         ufunc.nou
-0002c130: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0002c140: 2020 2020 2020 2020 2020 2020 2261 7267              "arg
-0002c150: 3122 2c0d 0a20 2020 2020 2020 2020 2020  1",..           
-0002c160: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-0002c170: 735b 305d 2c0d 0a20 2020 2020 2020 2020  s[0],..         
-0002c180: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002c190: 6172 6732 222c 0d0a 2020 2020 2020 2020  arg2",..        
-0002c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1b0: 6172 6773 5b31 5d2c 0d0a 2020 2020 2020  args[1],..      
-0002c1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1d0: 2020 226f 7574 222c 0d0a 2020 2020 2020    "out",..      
-0002c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1f0: 2020 6f75 745f 6172 6773 2c0d 0a20 2020    out_args,..   
+0002c0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0b0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
+0002c0c0: 305d 2e6e 756d 203d 3d20 3139 3a0d 0a20  0].num == 19:.. 
+0002c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0f0: 2020 2020 2020 2020 2020 2061 7267 735b             args[
+0002c100: 315d 203d 2073 7472 2861 7267 735b 315d  1] = str(args[1]
+0002c110: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c130: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c150: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002c160: 7765 2068 6176 6520 7477 6f20 6172 7261  we have two arra
+0002c170: 7973 2c20 6966 206f 6e65 2061 7272 6179  ys, if one array
+0002c180: 2069 7320 6e6f 7420 7072 6f70 6572 2073   is not proper s
+0002c190: 7472 696e 6720 7479 7065 2c20 636f 6e76  tring type, conv
+0002c1a0: 6572 7420 6974 0d0a 2020 2020 2020 2020  ert it..        
+0002c1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c1c0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0002c1d0: 7272 6179 5f74 7970 6573 5b31 5d20 213d  rray_types[1] !=
+0002c1e0: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
+0002c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c210: 2020 2020 2022 6669 6e61 6c22 2c0d 0a20       "final",.. 
-0002c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c230: 2020 2020 2020 2066 696e 616c 5f6e 756d         final_num
-0002c240: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002c250: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0002c260: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0002c270: 286f 7574 5f61 7267 7329 203d 3d20 313a  (out_args) == 1:
-0002c280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c290: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
-0002c2a0: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-0002c2b0: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
-0002c2c0: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
+0002c210: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
+0002c220: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
+0002c230: 3138 3a0d 0a20 2020 2020 2020 2020 2020  18:..           
+0002c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c260: 2061 7267 735b 315d 203d 2061 7267 735b   args[1] = args[
+0002c270: 315d 2e61 7374 7970 6528 2253 2229 0d0a  1].astype("S")..
+0002c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c2a0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
+0002c2b0: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
+0002c2c0: 2031 393a 0d0a 2020 2020 2020 2020 2020   19:..          
 0002c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2e0: 2020 2020 2020 2020 2861 7267 735b 305d          (args[0]
-0002c2f0: 2c20 6172 6773 5b31 5d2c 206f 7574 5f61  , args[1], out_a
-0002c300: 7267 735b 305d 292c 2066 6173 745f 6675  rgs[0]), fast_fu
-0002c310: 6e63 7469 6f6e 2c20 6669 6e61 6c5f 6e75  nction, final_nu
-0002c320: 6d0d 0a20 2020 2020 2020 2020 2020 2020  m..             
-0002c330: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0002c340: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0002c350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c360: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-0002c370: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002c380: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
-0002c390: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
-0002c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3b0: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
-0002c3c0: 2061 7267 735b 315d 292c 2066 6173 745f   args[1]), fast_
-0002c3d0: 6675 6e63 7469 6f6e 2c20 6669 6e61 6c5f  function, final_
-0002c3e0: 6e75 6d0d 0a20 2020 2020 2020 2020 2020  num..           
-0002c3f0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-0002c400: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0002c410: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002c420: 2066 6f72 2063 6f6e 7665 7273 696f 6e20   for conversion 
-0002c430: 6675 6e63 7469 6f6e 730d 0a20 2020 2020  functions..     
-0002c440: 2020 2020 2020 2020 2020 2023 2064 7479             # dty
-0002c450: 7065 3d6b 7761 7267 732e 6765 7428 2764  pe=kwargs.get('d
-0002c460: 7479 7065 272c 4e6f 6e65 290d 0a20 2020  type',None)..   
-0002c470: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002c480: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
-0002c490: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
-0002c4a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0002c4b0: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-0002c4c0: 2020 2020 2020 2020 2020 2020 222a 2a2a              "***
-0002c4d0: 2075 6e61 7279 2074 6869 6e6b 2077 6520   unary think we 
-0002c4e0: 6361 6e20 6361 6c6c 222c 0d0a 2020 2020  can call",..    
-0002c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c500: 2020 2020 6661 7374 5f66 756e 6374 696f      fast_functio
-0002c510: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-0002c520: 2020 2020 2020 2020 2020 2020 7566 756e              ufun
-0002c530: 632e 6e69 6e2c 0d0a 2020 2020 2020 2020  c.nin,..        
+0002c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c2f0: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
+0002c300: 5b31 5d2e 6173 7479 7065 2822 5522 290d  [1].astype("U").
+0002c310: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c330: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+0002c340: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
+0002c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c370: 2020 7072 696e 7428 2241 4444 2073 7472    print("ADD str
+0002c380: 696e 6720 6f70 6572 6174 696f 6e22 2c20  ing operation", 
+0002c390: 6172 7261 795f 7479 7065 732c 2073 6361  array_types, sca
+0002c3a0: 6c61 725f 7479 7065 7329 0d0a 0d0a 2020  lar_types)....  
+0002c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3c0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+0002c3d0: 6361 6c61 7273 203d 3d20 303a 0d0a 2020  calars == 0:..  
+0002c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c3f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c400: 2061 7272 6179 5f74 7970 6573 5b30 5d20   array_types[0] 
+0002c410: 213d 2061 7272 6179 5f74 7970 6573 5b31  != array_types[1
+0002c420: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c440: 2020 2020 2020 2020 2320 5550 4341 5354          # UPCAST
+0002c450: 2052 554c 4553 0d0a 2020 2020 2020 2020   RULES..        
+0002c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c470: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0002c480: 7272 6179 5f74 7970 6573 5b30 5d20 3d3d  rray_types[0] ==
+0002c490: 2066 696e 616c 5f64 7479 7065 2061 6e64   final_dtype and
+0002c4a0: 2061 7272 6179 5f74 7970 6573 5b31 5d20   array_types[1] 
+0002c4b0: 213d 2066 696e 616c 5f64 7479 7065 3a0d  != final_dtype:.
+0002c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c4e0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
+0002c4f0: 2822 2121 2175 7063 6173 7420 7275 6c65  ("!!!upcast rule
+0002c500: 7320 7365 636f 6e64 222c 2061 7272 6179  s second", array
+0002c510: 5f74 7970 6573 5b30 5d2c 2061 7272 6179  _types[0], array
+0002c520: 5f74 7970 6573 5b31 5d2c 2066 696e 616c  _types[1], final
+0002c530: 5f64 7479 7065 290d 0a20 2020 2020 2020  _dtype)..       
 0002c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c550: 7566 756e 632e 6e6f 7574 2c0d 0a20 2020  ufunc.nout,..   
-0002c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c570: 2020 2020 2022 6172 6731 222c 0d0a 2020       "arg1",..  
-0002c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c590: 2020 2020 2020 6172 6773 5b30 5d2c 0d0a        args[0],..
+0002c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c560: 2023 2063 6f6e 7665 7274 2074 6f20 7468   # convert to th
+0002c570: 6520 7072 6f70 6572 2074 7970 6520 6265  e proper type be
+0002c580: 666f 7220 6361 6c63 756c 6174 696f 6e0d  for calculation.
+0002c590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5b0: 2020 2020 2020 2020 226f 7574 222c 0d0a          "out",..
-0002c5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5d0: 2020 2020 2020 2020 6f75 745f 6172 6773          out_args
-0002c5e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002c5f0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0002c600: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0002c610: 656e 286f 7574 5f61 7267 7329 203d 3d20  en(out_args) == 
-0002c620: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
-0002c630: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
-0002c640: 3d20 5479 7065 5265 6769 7374 6572 2e4d  = TypeRegister.M
-0002c650: 6174 684c 6564 6765 722e 5f42 4153 4943  athLedger._BASIC
-0002c660: 4d41 5448 5f4f 4e45 5f49 4e50 5554 2828  MATH_ONE_INPUT((
-0002c670: 6172 6773 5b30 5d2c 206f 7574 5f61 7267  args[0], out_arg
-0002c680: 735b 305d 292c 2066 6173 745f 6675 6e63  s[0]), fast_func
-0002c690: 7469 6f6e 2c20 3029 0d0a 2020 2020 2020  tion, 0)..      
-0002c6a0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0002c6b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c6c0: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-0002c6d0: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002c6e0: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
-0002c6f0: 485f 4f4e 455f 494e 5055 5428 2861 7267  H_ONE_INPUT((arg
-0002c700: 735b 305d 292c 2066 6173 745f 6675 6e63  s[0]), fast_func
-0002c710: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
-0002c720: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
-0002c730: 7473 2069 7320 6e6f 7420 4e6f 6e65 2061  ts is not None a
-0002c740: 6e64 206c 656e 286f 7574 5f61 7267 7329  nd len(out_args)
-0002c750: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0002c760: 2020 2020 2020 2020 2320 7768 656e 2074          # when t
-0002c770: 6865 206f 7574 7075 7420 6172 6775 6d65  he output argume
-0002c780: 6e74 2069 7320 666f 7263 6564 2062 7574  nt is forced but
-0002c790: 2077 6520 6361 6c63 756c 6174 6520 6974   we calculate it
-0002c7a0: 2069 6e74 6f20 616e 6f74 6865 7220 6172   into another ar
-0002c7b0: 7261 7920 7765 206e 6565 6420 746f 2063  ray we need to c
-0002c7c0: 6f70 7920 7468 6520 7265 7375 6c74 2069  opy the result i
-0002c7d0: 6e74 6f20 7468 6520 6f75 7470 7574 0d0a  nto the output..
-0002c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7f0: 6966 206e 6f74 2072 632e 436f 6d70 6172  if not rc.Compar
-0002c800: 654e 756d 7079 4d65 6d41 6464 7265 7373  eNumpyMemAddress
-0002c810: 286f 7574 5f61 7267 735b 305d 2c20 7265  (out_args[0], re
-0002c820: 7375 6c74 7329 3a0d 0a20 2020 2020 2020  sults):..       
-0002c830: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002c840: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
-0002c850: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
+0002c5b0: 2020 2020 2020 2020 2061 7267 735b 315d           args[1]
+0002c5c0: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
+0002c5d0: 315d 2c20 6669 6e61 6c5f 6474 7970 6529  1], final_dtype)
+0002c5e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c600: 2020 2020 2020 2020 656c 6966 2061 7272          elif arr
+0002c610: 6179 5f74 7970 6573 5b30 5d20 213d 2066  ay_types[0] != f
+0002c620: 696e 616c 5f64 7479 7065 2061 6e64 2061  inal_dtype and a
+0002c630: 7272 6179 5f74 7970 6573 5b31 5d20 3d3d  rray_types[1] ==
+0002c640: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
+0002c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c670: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
+0002c680: 2121 2175 7063 6173 7420 7275 6c65 7320  !!!upcast rules 
+0002c690: 6669 7273 7422 2c20 6172 7261 795f 7479  first", array_ty
+0002c6a0: 7065 735b 305d 2c20 6172 7261 795f 7479  pes[0], array_ty
+0002c6b0: 7065 735b 315d 2c20 6669 6e61 6c5f 6474  pes[1], final_dt
+0002c6c0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+0002c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c6e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002c6f0: 636f 6e76 6572 7420 746f 2074 6865 2070  convert to the p
+0002c700: 726f 7065 7220 7479 7065 2062 6566 6f72  roper type befor
+0002c710: 2063 616c 6375 6c61 7469 6f6e 0d0a 2020   calculation..  
+0002c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c740: 2020 2020 2020 6172 6773 5b30 5d20 3d20        args[0] = 
+0002c750: 5f41 5354 5950 4528 6172 6773 5b30 5d2c  _ASTYPE(args[0],
+0002c760: 2066 696e 616c 5f64 7479 7065 290d 0a20   final_dtype).. 
+0002c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c790: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7c0: 2020 2320 736f 6d65 7469 6d65 7320 626f    # sometimes bo
+0002c7d0: 7468 206f 6620 7468 656d 206d 7573 7420  th of them must 
+0002c7e0: 6265 2075 7063 6173 742e 2e2e 0d0a 2020  be upcast.....  
+0002c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c810: 2020 2020 2020 2320 636f 6e73 6964 6572        # consider
+0002c820: 2020 696e 7438 202a 2075 696e 7438 203d    int8 * uint8 =
+0002c830: 3d3e 2077 696c 6c20 7570 6361 7374 2074  => will upcast t
+0002c840: 6f20 696e 7431 360d 0a20 2020 2020 2020  o int16..       
+0002c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c870: 7072 696e 7428 0d0a 2020 2020 2020 2020  print(..        
-0002c880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c890: 2020 2020 222a 2a2a 2070 6572 666f 726d      "*** perform
-0002c8a0: 696e 6720 616e 2065 7874 7261 2063 6f70  ing an extra cop
-0002c8b0: 7920 746f 206d 6174 6368 206f 7574 7075  y to match outpu
-0002c8c0: 7420 7265 7175 6573 7422 2c0d 0a20 2020  t request",..   
+0002c870: 2023 2070 7269 6e74 2822 2121 2163 616e   # print("!!!can
+0002c880: 6e6f 7420 756e 6465 7273 7461 6e64 2075  not understand u
+0002c890: 7063 6173 7420 7275 6c65 7322 2c20 6172  pcast rules", ar
+0002c8a0: 7261 7974 7970 6573 5b30 5d2c 2061 7272  raytypes[0], arr
+0002c8b0: 6179 7479 7065 735b 315d 2c20 6669 6e61  aytypes[1], fina
+0002c8c0: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
 0002c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8e0: 2020 2020 2020 2020 2069 6428 6f75 745f           id(out_
-0002c8f0: 6172 6773 5b30 5d29 2c0d 0a20 2020 2020  args[0]),..     
-0002c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c910: 2020 2020 2020 2069 6428 7265 7375 6c74         id(result
-0002c920: 7329 2c0d 0a20 2020 2020 2020 2020 2020  s),..           
+0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8f0: 2020 6172 6773 5b30 5d20 3d20 5f41 5354    args[0] = _AST
+0002c900: 5950 4528 6172 6773 5b30 5d2c 2066 696e  YPE(args[0], fin
+0002c910: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
+0002c920: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c940: 206f 7574 5f61 7267 735b 305d 2c0d 0a20   out_args[0],.. 
-0002c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c960: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0002c970: 7473 2c0d 0a20 2020 2020 2020 2020 2020  ts,..           
-0002c980: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0002c990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9a0: 2020 2020 6f75 745f 6172 6773 5b30 5d5b      out_args[0][
-0002c9b0: 2e2e 2e5d 203d 2072 6573 756c 7473 0d0a  ...] = results..
-0002c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9d0: 2020 2020 7265 7375 6c74 7320 3d20 6f75      results = ou
-0002c9e0: 745f 6172 6773 5b30 5d0d 0a0d 0a20 2020  t_args[0]....   
-0002c9f0: 2020 2020 2020 2020 2069 6620 7265 7375           if resu
-0002ca00: 6c74 7320 6973 204e 6f6e 653a 0d0a 2020  lts is None:..  
-0002ca10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002ca20: 7075 6e74 6564 0d0a 2020 2020 2020 2020  punted..        
-0002ca30: 2020 2020 2020 2020 2320 6361 6c6c 6d6f          # callmo
-0002ca40: 6465 3d27 7027 0d0a 2020 2020 2020 2020  de='p'..        
-0002ca50: 2020 2020 2020 2020 6966 2046 6173 7441          if FastA
-0002ca60: 7272 6179 2e56 6572 626f 7365 203e 2031  rray.Verbose > 1
-0002ca70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002ca80: 2020 2020 2020 2070 7269 6e74 2822 2a2a         print("**
-0002ca90: 2a70 756e 7465 6420 7566 756e 633a 2022  *punted ufunc: "
-0002caa0: 2c20 7566 756e 632e 6e69 6e2c 2075 6675  , ufunc.nin, ufu
-0002cab0: 6e63 2e6e 6f75 742c 2075 6675 6e63 2c20  nc.nout, ufunc, 
-0002cac0: 6172 6773 2c20 6b77 6172 6773 290d 0a20  args, kwargs).. 
-0002cad0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002cae0: 6173 745f 6675 6e63 7469 6f6e 203d 204e  ast_function = N
-0002caf0: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
-0002cb00: 2020 2020 2023 2066 616c 6c20 746f 2022       # fall to "
-0002cb10: 6966 2066 6173 745f 6675 6e63 7469 6f6e  if fast_function
-0002cb20: 2069 7320 4e6f 6e65 2220 616e 6420 7275   is None" and ru
-0002cb30: 6e20 7468 726f 7567 6820 6e75 6d70 792e  n through numpy.
-0002cb40: 2e2e 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
-0002cb50: 2020 2320 7265 7370 6563 7420 6474 7970    # respect dtyp
-0002cb60: 650d 0a20 2020 2020 2020 2020 2020 2065  e..            e
-0002cb70: 6c69 6620 6474 7970 6520 6973 206e 6f74  lif dtype is not
-0002cb80: 204e 6f6e 6520 616e 6420 6973 696e 7374   None and isinst
-0002cb90: 616e 6365 2872 6573 756c 7473 2c20 6e70  ance(results, np
-0002cba0: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
-0002cbb0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0002cbc0: 7479 7065 2069 7320 6e6f 7420 7265 7375  type is not resu
-0002cbd0: 6c74 732e 6474 7970 653a 0d0a 2020 2020  lts.dtype:..    
-0002cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cbf0: 6966 2046 6173 7441 7272 6179 2e56 6572  if FastArray.Ver
-0002cc00: 626f 7365 203e 2031 3a0d 0a20 2020 2020  bose > 1:..     
-0002cc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc20: 2020 2070 7269 6e74 2822 2a2a 2a72 6573     print("***res
-0002cc30: 756c 7420 6672 6f6d 2072 6564 7563 6522  ult from reduce"
-0002cc40: 2c20 7265 7375 6c74 732c 2072 6573 756c  , results, resul
-0002cc50: 7473 2e64 7479 7065 2c20 6474 7970 6529  ts.dtype, dtype)
-0002cc60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cc70: 2020 2020 2020 2320 636f 6e76 6572 740d        # convert.
-0002cc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002cc90: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
-0002cca0: 6573 756c 7473 2e61 7374 7970 6528 6474  esults.astype(dt
-0002ccb0: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
-0002ccc0: 6966 2066 6173 745f 6675 6e63 7469 6f6e  if fast_function
-0002ccd0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0002cce0: 2020 2020 2020 2023 2043 616c 6c20 7468         # Call th
-0002ccf0: 6520 6e75 6d70 7920 4150 4973 0d0a 2020  e numpy APIs..  
-0002cd00: 2020 2020 2020 2020 2020 2320 4368 6563            # Chec
-0002cd10: 6b20 6966 2077 6520 6361 6e20 7573 6520  k if we can use 
-0002cd20: 7468 6520 7265 6379 636c 6564 2061 7272  the recycled arr
-0002cd30: 6179 7320 746f 2061 766f 6964 2061 6e20  ays to avoid an 
-0002cd40: 616c 6c6f 6361 7469 6f6e 2066 6f72 2074  allocation for t
-0002cd50: 6865 206f 7574 7075 7420 6172 7261 790d  he output array.
-0002cd60: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-0002cd70: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-0002cd80: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
-0002cd90: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0002cda0: 222a 2a70 756e 7465 6420 6f6e 206e 756d  "**punted on num
-0002cdb0: 7079 2122 2c20 7566 756e 6329 0d0a 0d0a  py!", ufunc)....
-0002cdc0: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
-0002cdd0: 5445 3a20 5765 2061 7265 2067 6f69 6e67  TE: We are going
-0002cde0: 2074 6f20 6c65 7420 6e75 6d70 7920 7072   to let numpy pr
-0002cdf0: 6f63 6573 7320 6974 0d0a 2020 2020 2020  ocess it..      
-0002ce00: 2020 2020 2020 2320 5765 206d 7573 7420        # We must 
-0002ce10: 6368 616e 6765 2061 6c6c 2046 6173 7441  change all FastA
-0002ce20: 7272 6179 7320 746f 206e 6f72 6d61 6c20  rrays to normal 
-0002ce30: 6e75 6d70 7920 6172 7261 7973 0d0a 2020  numpy arrays..  
-0002ce40: 2020 2020 2020 2020 2020 6172 6773 203d            args =
-0002ce50: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
-0002ce60: 2066 6f72 2069 6e70 7574 2069 6e20 696e   for input in in
-0002ce70: 7075 7473 3a0d 0a20 2020 2020 2020 2020  puts:..         
-0002ce80: 2020 2020 2020 2023 2066 6c69 7020 6261         # flip ba
-0002ce90: 636b 2074 6f20 6e75 6d70 7920 746f 2061  ck to numpy to a
-0002cea0: 766f 6964 2065 7272 6f72 7320 7768 656e  void errors when
-0002ceb0: 206e 756d 7079 2063 616c 6375 6c61 7465   numpy calculate
-0002cec0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0002ced0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002cee0: 2869 6e70 7574 2c20 4661 7374 4172 7261  (input, FastArra
-0002cef0: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-0002cf00: 2020 2020 2020 2020 2061 7267 732e 6170           args.ap
-0002cf10: 7065 6e64 2869 6e70 7574 2e76 6965 7728  pend(input.view(
-0002cf20: 6e70 2e6e 6461 7272 6179 2929 0d0a 2020  np.ndarray))..  
-0002cf30: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002cf40: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0002cf50: 2020 2020 2020 2020 2061 7267 732e 6170           args.ap
-0002cf60: 7065 6e64 2869 6e70 7574 290d 0a0d 0a20  pend(input).... 
-0002cf70: 2020 2020 2020 2020 2020 2069 6620 6861             if ha
-0002cf80: 735f 6f75 7470 7574 733a 0d0a 2020 2020  s_outputs:..    
-0002cf90: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
-0002cfa0: 7574 7320 3d20 6b77 6172 6773 2e70 6f70  uts = kwargs.pop
-0002cfb0: 2822 6f75 7422 2c20 4e6f 6e65 290d 0a20  ("out", None).. 
-0002cfc0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002cfd0: 6620 6f75 7470 7574 733a 0d0a 2020 2020  f outputs:..    
-0002cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cff0: 6f75 745f 6172 6773 203d 205b 5d0d 0a20  out_args = [].. 
-0002d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d010: 2020 2066 6f72 206f 7574 7075 7420 696e     for output in
-0002d020: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
-0002d030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d040: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002d050: 286f 7574 7075 742c 2046 6173 7441 7272  (output, FastArr
-0002d060: 6179 293a 0d0a 2020 2020 2020 2020 2020  ay):..          
-0002d070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d080: 2020 6f75 745f 6172 6773 2e61 7070 656e    out_args.appen
-0002d090: 6428 6f75 7470 7574 2e76 6965 7728 6e70  d(output.view(np
-0002d0a0: 2e6e 6461 7272 6179 2929 0d0a 2020 2020  .ndarray))..    
-0002d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0c0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0002d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0e0: 2020 2020 2020 206f 7574 5f61 7267 732e         out_args.
-0002d0f0: 6170 7065 6e64 286f 7574 7075 7429 0d0a  append(output)..
-0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d110: 2020 2020 2320 7265 706c 6163 6520 6f75      # replace ou
-0002d120: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-0002d130: 2020 2020 2020 206b 7761 7267 735b 226f         kwargs["o
-0002d140: 7574 225d 203d 2074 7570 6c65 286f 7574  ut"] = tuple(out
-0002d150: 5f61 7267 7329 0d0a 0d0a 2020 2020 2020  _args)....      
-0002d160: 2020 2020 2020 2320 4e4f 5445 3a20 4966        # NOTE: If
-0002d170: 2074 6865 2073 7065 6369 6669 6564 2075   the specified u
-0002d180: 6675 6e63 202b 2069 6e70 7574 7320 636f  func + inputs co
-0002d190: 6d62 696e 6174 696f 6e20 6973 6e27 7420  mbination isn't 
-0002d1a0: 7375 7070 6f72 7465 6420 6279 206e 756d  supported by num
-0002d1b0: 7079 2065 6974 6865 722c 0d0a 2020 2020  py either,..    
-0002d1c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002d1d0: 6173 206f 6620 6e75 6d70 7920 312e 3137  as of numpy 1.17
-0002d1e0: 2e78 2074 6869 7320 6361 6c6c 2077 696c  .x this call wil
-0002d1f0: 6c20 656e 6420 7570 2072 6169 7369 6e67  l end up raising
-0002d200: 2061 2055 4675 6e63 5479 7065 4572 726f   a UFuncTypeErro
-0002d210: 7220 736f 2074 6865 2072 6573 740d 0a20  r so the rest.. 
-0002d220: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-0002d230: 2020 206f 6620 7468 6520 4661 7374 4172     of the FastAr
-0002d240: 7261 792e 5f5f 6172 7261 795f 7566 756e  ray.__array_ufun
-0002d250: 635f 5f20 626f 6479 2028 6265 6c6f 7729  c__ body (below)
-0002d260: 2077 6f6e 2774 2065 6e64 2075 7020 6578   won't end up ex
-0002d270: 6563 7574 696e 672e 0d0a 2020 2020 2020  ecuting...      
-0002d280: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
-0002d290: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
-0002d2a0: 684c 6564 6765 722e 5f41 5252 4159 5f55  hLedger._ARRAY_U
-0002d2b0: 4655 4e43 2873 7570 6572 2846 6173 7441  FUNC(super(FastA
-0002d2c0: 7272 6179 2c20 7365 6c66 292c 2075 6675  rray, self), ufu
-0002d2d0: 6e63 2c20 6d65 7468 6f64 2c20 2a61 7267  nc, method, *arg
-0002d2e0: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
-0002d2f0: 2020 2020 2020 2020 2320 4966 2072 6970          # If rip
-0002d300: 7461 626c 6520 6861 7320 6e6f 7420 696d  table has not im
-0002d310: 706c 656d 656e 7465 6420 6120 6365 7274  plemented a cert
-0002d320: 6169 6e20 7566 756e 6320 286f 7220 646f  ain ufunc (or do
-0002d330: 6573 6e27 7420 7375 7070 6f72 7420 6974  esn't support it
-0002d340: 2066 6f72 2074 6865 2067 6976 656e 2061   for the given a
-0002d350: 7267 756d 656e 7473 292c 0d0a 2020 2020  rguments),..    
-0002d360: 2020 2020 2320 656d 6974 2061 2077 6172      # emit a war
-0002d370: 6e69 6e67 2061 626f 7574 2069 7420 746f  ning about it to
-0002d380: 206c 6574 2074 6865 2075 7365 7220 6b6e   let the user kn
-0002d390: 6f77 2e0d 0a20 2020 2020 2020 2023 2057  ow...        # W
-0002d3a0: 6865 6e20 6e75 6d70 7920 646f 6573 206e  hen numpy does n
-0002d3b0: 6f74 2073 7570 706f 7274 2074 6865 2075  ot support the u
-0002d3c0: 6675 6e63 2b69 6e70 7574 7320 6569 7468  func+inputs eith
-0002d3d0: 6572 2c20 7765 2077 6f6e 2774 2072 6561  er, we won't rea
-0002d3e0: 6368 2074 6869 7320 706f 696e 7420 2861  ch this point (a
-0002d3f0: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
-0002d400: 7829 2c0d 0a20 2020 2020 2020 2023 2073  x),..        # s
-0002d410: 696e 6365 206e 756d 7079 2077 696c 6c20  ince numpy will 
-0002d420: 7261 6973 6520 6120 5546 756e 6354 7970  raise a UFuncTyp
-0002d430: 6545 7272 6f72 2065 6172 6c69 6572 2028  eError earlier (
-0002d440: 6265 666f 7265 2074 6869 7320 706f 696e  before this poin
-0002d450: 7429 2072 6174 6865 7220 7468 616e 2061  t) rather than a
-0002d460: 6674 6572 2077 6520 7265 7475 726e 204e  fter we return N
-0002d470: 6f74 496d 706c 656d 656e 7465 642e 0d0a  otImplemented...
-0002d480: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
-0002d490: 7473 2069 7320 4e6f 7449 6d70 6c65 6d65  ts is NotImpleme
-0002d4a0: 6e74 6564 3a0d 0a20 2020 2020 2020 2020  nted:..         
-0002d4b0: 2020 2077 6172 6e69 6e67 732e 7761 726e     warnings.warn
-0002d4c0: 2866 222a 2a2a 7566 756e 6320 7b75 6675  (f"***ufunc {ufu
-0002d4d0: 6e63 7d20 7b61 7267 737d 207b 6b77 6172  nc} {args} {kwar
-0002d4e0: 6773 7d20 6973 206e 6f74 2069 6d70 6c65  gs} is not imple
-0002d4f0: 6d65 6e74 6564 2229 0d0a 2020 2020 2020  mented")..      
-0002d500: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
-0002d510: 496d 706c 656d 656e 7465 640d 0a0d 0a20  Implemented.... 
-0002d520: 2020 2020 2020 2023 2055 6675 6e63 7320         # Ufuncs 
-0002d530: 616c 736f 2068 6176 6520 6120 6669 6674  also have a fift
-0002d540: 6820 6d65 7468 6f64 2074 6861 7420 616c  h method that al
-0002d550: 6c6f 7773 2069 6e20 706c 6163 6520 6f70  lows in place op
-0002d560: 6572 6174 696f 6e73 2074 6f20 6265 2070  erations to be p
-0002d570: 6572 666f 726d 6564 2075 7369 6e67 2066  erformed using f
-0002d580: 616e 6379 2069 6e64 6578 696e 672e 0d0a  ancy indexing...
-0002d590: 2020 2020 2020 2020 2320 4e6f 2062 7566          # No buf
-0002d5a0: 6665 7269 6e67 2069 7320 7573 6564 206f  fering is used o
-0002d5b0: 6e20 7468 6520 6469 6d65 6e73 696f 6e73  n the dimensions
-0002d5c0: 2077 6865 7265 2066 616e 6379 2069 6e64   where fancy ind
-0002d5d0: 6578 696e 6720 6973 2075 7365 642c 2073  exing is used, s
-0002d5e0: 6f20 7468 6520 6661 6e63 7920 696e 6465  o the fancy inde
-0002d5f0: 7820 6361 6e20 6c69 7374 2061 6e20 6974  x can list an it
-0002d600: 656d 206d 6f72 6520 7468 616e 206f 6e63  em more than onc
-0002d610: 650d 0a20 2020 2020 2020 2023 2020 2020  e..        #    
-0002d620: 2061 6e64 2074 6865 206f 7065 7261 7469   and the operati
-0002d630: 6f6e 2077 696c 6c20 6265 2070 6572 666f  on will be perfo
-0002d640: 726d 6564 206f 6e20 7468 6520 7265 7375  rmed on the resu
-0002d650: 6c74 206f 6620 7468 6520 7072 6576 696f  lt of the previo
-0002d660: 7573 206f 7065 7261 7469 6f6e 2066 6f72  us operation for
-0002d670: 2074 6861 7420 6974 656d 2e0d 0a20 2020   that item...   
-0002d680: 2020 2020 2023 2075 6675 6e63 2e72 6564       # ufunc.red
-0002d690: 7563 6528 615b 2c20 6178 6973 2c20 6474  uce(a[, axis, dt
-0002d6a0: 7970 652c 206f 7574 2c20 6b65 6570 6469  ype, out, keepdi
-0002d6b0: 6d73 5d29 0952 6564 7563 6573 2061 2773  ms]).Reduces a's
-0002d6c0: 2064 696d 656e 7369 6f6e 2062 7920 6f6e   dimension by on
-0002d6d0: 652c 2062 7920 6170 706c 7969 6e67 2075  e, by applying u
-0002d6e0: 6675 6e63 2061 6c6f 6e67 206f 6e65 2061  func along one a
-0002d6f0: 7869 732e 0d0a 2020 2020 2020 2020 2320  xis...        # 
-0002d700: 7566 756e 632e 6163 6375 6d75 6c61 7465  ufunc.accumulate
-0002d710: 2861 7272 6179 5b2c 2061 7869 732c 2064  (array[, axis, d
-0002d720: 7479 7065 2c20 6f75 745d 2909 4163 6375  type, out]).Accu
-0002d730: 6d75 6c61 7465 2074 6865 2072 6573 756c  mulate the resul
-0002d740: 7420 6f66 2061 7070 6c79 696e 6720 7468  t of applying th
-0002d750: 6520 6f70 6572 6174 6f72 2074 6f20 616c  e operator to al
-0002d760: 6c20 656c 656d 656e 7473 2e0d 0a20 2020  l elements...   
-0002d770: 2020 2020 2023 2075 6675 6e63 2e72 6564       # ufunc.red
-0002d780: 7563 6561 7428 612c 2069 6e64 6963 6573  uceat(a, indices
-0002d790: 5b2c 2061 7869 732c 2064 7479 7065 2c20  [, axis, dtype, 
-0002d7a0: 6f75 745d 2909 5065 7266 6f72 6d73 2061  out]).Performs a
-0002d7b0: 2028 6c6f 6361 6c29 2072 6564 7563 6520   (local) reduce 
-0002d7c0: 7769 7468 2073 7065 6369 6669 6564 2073  with specified s
-0002d7d0: 6c69 6365 7320 6f76 6572 2061 2073 696e  lices over a sin
-0002d7e0: 676c 6520 6178 6973 2e0d 0a20 2020 2020  gle axis...     
-0002d7f0: 2020 2023 2075 6675 6e63 2e6f 7574 6572     # ufunc.outer
-0002d800: 2841 2c20 4229 0941 7070 6c79 2074 6865  (A, B).Apply the
-0002d810: 2075 6675 6e63 206f 7020 746f 2061 6c6c   ufunc op to all
-0002d820: 2070 6169 7273 2028 612c 2062 2920 7769   pairs (a, b) wi
-0002d830: 7468 2061 2069 6e20 4120 616e 6420 6220  th a in A and b 
-0002d840: 696e 2042 2e0d 0a20 2020 2020 2020 2023  in B...        #
-0002d850: 2075 6675 6e63 2e61 7428 612c 2069 6e64   ufunc.at(a, ind
-0002d860: 6963 6573 5b2c 2062 5d29 0950 6572 666f  ices[, b]).Perfo
-0002d870: 726d 7320 756e 6275 6666 6572 6564 2069  rms unbuffered i
-0002d880: 6e20 706c 6163 6520 6f70 6572 6174 696f  n place operatio
-0002d890: 6e20 6f6e 206f 7065 7261 6e64 2027 6127  n on operand 'a'
-0002d8a0: 2066 6f72 2065 6c65 6d65 6e74 7320 7370   for elements sp
-0002d8b0: 6563 6966 6965 6420 6279 2027 696e 6469  ecified by 'indi
-0002d8c0: 6365 7327 2e0d 0a0d 0a20 2020 2020 2020  ces'.....       
-0002d8d0: 2069 6620 6d65 7468 6f64 203d 3d20 2261   if method == "a
-0002d8e0: 7422 3a0d 0a20 2020 2020 2020 2020 2020  t":..           
-0002d8f0: 2072 6574 7572 6e0d 0a0d 0a20 2020 2020   return....     
-0002d900: 2020 2069 6620 7566 756e 632e 6e6f 7574     if ufunc.nout
-0002d910: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0002d920: 2020 2020 2320 6368 6563 6b20 6966 2077      # check if w
-0002d930: 6520 7573 6564 206f 7572 206f 776e 206f  e used our own o
-0002d940: 7574 7075 740d 0a0d 0a20 2020 2020 2020  utput....       
-0002d950: 2020 2020 2023 2069 6620 6973 696e 7374       # if isinst
-0002d960: 616e 6365 286f 7574 4172 7261 792c 206e  ance(outArray, n
-0002d970: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
-0002d980: 2020 2020 2020 2020 2023 2020 2020 7265           #    re
-0002d990: 7475 726e 206f 7574 4172 7261 792e 7669  turn outArray.vi
-0002d9a0: 6577 2846 6173 7441 7272 6179 290d 0a0d  ew(FastArray)...
-0002d9b0: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
-0002d9c0: 6620 2866 696e 616c 5f64 7479 7065 2021  f (final_dtype !
-0002d9d0: 3d20 4e6f 6e65 2061 6e64 2066 696e 616c  = None and final
-0002d9e0: 5f64 7479 7065 2021 3d20 7265 7375 6c74  _dtype != result
-0002d9f0: 732e 6474 7970 6529 3a0d 0a20 2020 2020  s.dtype):..     
-0002da00: 2020 2020 2020 2023 2020 2020 7072 696e         #    prin
-0002da10: 7428 222a 2a2a 2a2a 2a20 6d69 7370 7265  t("****** mispre
-0002da20: 6469 6374 6564 2066 696e 616c 222c 2066  dicted final", f
-0002da30: 696e 616c 5f64 7479 7065 2c20 7265 7375  inal_dtype, resu
-0002da40: 6c74 732e 6474 7970 652c 2075 6675 6e63  lts.dtype, ufunc
-0002da50: 2c20 7363 616c 6172 7479 7065 732c 2061  , scalartypes, a
-0002da60: 7267 732c 206f 7574 7075 7473 2c20 6b77  rgs, outputs, kw
-0002da70: 6172 6773 293b 0d0a 2020 2020 2020 2020  args);..        
-0002da80: 2020 2020 2320 7265 7375 6c74 7320 3d20      # results = 
-0002da90: 2872 6573 756c 7473 2c29 0d0a 0d0a 2020  (results,)....  
-0002daa0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0002dab0: 2069 7369 6e73 7461 6e63 6528 7265 7375   isinstance(resu
-0002dac0: 6c74 732c 2046 6173 7441 7272 6179 2920  lts, FastArray) 
-0002dad0: 616e 6420 6973 696e 7374 616e 6365 2872  and isinstance(r
-0002dae0: 6573 756c 7473 2c20 6e70 2e6e 6461 7272  esults, np.ndarr
-0002daf0: 6179 293a 0d0a 2020 2020 2020 2020 2020  ay):..          
-0002db00: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-0002db10: 756c 7473 2e76 6965 7728 4661 7374 4172  ults.view(FastAr
-0002db20: 7261 7929 0d0a 0d0a 2020 2020 2020 2020  ray)....        
-0002db30: 2020 2020 2320 7468 696e 6b20 6869 7420      # think hit 
-0002db40: 6865 7265 2066 6f72 2073 756d 2077 6968  here for sum wih
-0002db50: 6368 2064 6f65 7320 6e6f 7420 7265 7475  ch does not retu
-0002db60: 726e 2061 6e20 6172 7261 792c 206a 7573  rn an array, jus
-0002db70: 7420 6120 6e75 6d62 6572 0d0a 2020 2020  t a number..    
-0002db80: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0002db90: 6573 756c 7473 0d0a 0d0a 2020 2020 2020  esults....      
-0002dba0: 2020 2320 6d6f 7265 2074 6861 6e20 6f6e    # more than on
-0002dbb0: 6520 6974 656d 2c20 736f 2077 6520 6172  e item, so we ar
-0002dbc0: 6520 6d61 6b69 6e67 2061 2074 7570 6c65  e making a tuple
-0002dbd0: 0d0a 2020 2020 2020 2020 2320 6361 6e20  ..        # can 
-0002dbe0: 7265 7375 6c74 2069 6e20 5f5f 6172 7261  result in __arra
-0002dbf0: 795f 6669 6e61 6c69 7a65 5f5f 2062 6569  y_finalize__ bei
-0002dc00: 6e67 2063 616c 6c65 640d 0a20 2020 2020  ng called..     
-0002dc10: 2020 2072 6573 756c 7473 203d 2074 7570     results = tup
-0002dc20: 6c65 280d 0a20 2020 2020 2020 2020 2020  le(..           
-0002dc30: 2028 6e70 2e61 7361 7272 6179 2872 6573   (np.asarray(res
-0002dc40: 756c 7429 2e76 6965 7728 4661 7374 4172  ult).view(FastAr
-0002dc50: 7261 7929 2069 6620 6f75 7470 7574 2069  ray) if output i
-0002dc60: 7320 4e6f 6e65 2065 6c73 6520 6f75 7470  s None else outp
-0002dc70: 7574 290d 0a20 2020 2020 2020 2020 2020  ut)..           
-0002dc80: 2066 6f72 2072 6573 756c 742c 206f 7574   for result, out
-0002dc90: 7075 7420 696e 207a 6970 2872 6573 756c  put in zip(resul
-0002dca0: 7473 2c20 6f75 7470 7574 7329 0d0a 2020  ts, outputs)..  
-0002dcb0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-0002dcc0: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
-0002dcd0: 2068 6176 6520 6120 7475 706c 6520 6f66   have a tuple of
-0002dce0: 206f 6e65 2069 7465 6d2c 2069 6620 736f   one item, if so
-0002dcf0: 206a 7573 7420 7265 7475 726e 2074 6865   just return the
-0002dd00: 206f 6e65 2069 7465 6d0d 0a20 2020 2020   one item..     
-0002dd10: 2020 2069 6620 6c65 6e28 7265 7375 6c74     if len(result
-0002dd20: 7329 203d 3d20 313a 0d0a 2020 2020 2020  s) == 1:..      
-0002dd30: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
-0002dd40: 7265 7375 6c74 735b 305d 0d0a 2020 2020  results[0]..    
-0002dd50: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-0002dd60: 7473 0d0a 0d0a 2020 2020 4070 726f 7065  ts....    @prope
-0002dd70: 7274 790d 0a20 2020 2064 6566 206e 756d  rty..    def num
-0002dd80: 6261 7374 7269 6e67 2873 656c 6629 3a0d  bastring(self):.
-0002dd90: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0002dda0: 2020 2020 2020 636f 6e76 6572 7473 2062        converts b
-0002ddb0: 7974 6520 7374 7269 6e67 2061 6e64 2075  yte string and u
-0002ddc0: 6e69 636f 6465 2073 7472 696e 6773 2074  nicode strings t
-0002ddd0: 6f20 6120 3264 696d 656e 7369 6f6e 616c  o a 2dimensional
-0002dde0: 2061 7272 6179 0d0a 2020 2020 2020 2020   array..        
-0002ddf0: 736f 2074 6861 7420 6e75 6d62 6120 6361  so that numba ca
-0002de00: 6e20 7072 6f63 6573 7320 6974 2063 6f72  n process it cor
-0002de10: 7265 6374 6c79 0d0a 0d0a 2020 2020 2020  rectly....      
-0002de20: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-0002de30: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0002de40: 2020 2020 2020 3e3e 3e20 406e 756d 6261        >>> @numba
-0002de50: 2e6a 6974 286e 6f70 7974 686f 6e3d 5472  .jit(nopython=Tr
-0002de60: 7565 290d 0a20 2020 2020 2020 202e 2e2e  ue)..        ...
-0002de70: 2064 6566 206e 756d 6261 5f73 7472 2874   def numba_str(t
-0002de80: 7874 293a 0d0a 2020 2020 2020 2020 2e2e  xt):..        ..
-0002de90: 2e20 2020 2020 783d 300d 0a20 2020 2020  .     x=0..     
-0002dea0: 2020 202e 2e2e 2020 2020 2066 6f72 2069     ...     for i
-0002deb0: 2069 6e20 7261 6e67 6528 7478 742e 7368   in range(txt.sh
-0002dec0: 6170 655b 305d 293a 0d0a 2020 2020 2020  ape[0]):..      
-0002ded0: 2020 2e2e 2e20 2020 2020 2020 2020 6966    ...         if
-0002dee0: 2028 7478 745b 692c 305d 3d3d 3131 3620   (txt[i,0]==116 
-0002def0: 616e 6420 2023 2027 7427 0d0a 2020 2020  and  # 't'..    
-0002df00: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
-0002df10: 2020 2020 7478 745b 692c 315d 3d3d 3130      txt[i,1]==10
-0002df20: 3120 616e 6420 2023 2027 6527 0d0a 2020  1 and  # 'e'..  
-0002df30: 2020 2020 2020 2e2e 2e20 2020 2020 2020        ...       
-0002df40: 2020 2020 2020 7478 745b 692c 325d 3d3d        txt[i,2]==
-0002df50: 3132 3020 616e 6420 2023 2027 7827 0d0a  120 and  # 'x'..
-0002df60: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-0002df70: 2020 2020 2020 2020 7478 745b 692c 335d          txt[i,3]
-0002df80: 3d3d 3131 3629 3a20 2020 2023 2027 7427  ==116):    # 't'
-0002df90: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-0002dfa0: 2020 2020 2020 2020 2020 7820 2b3d 2031            x += 1
-0002dfb0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-0002dfc0: 2020 7265 7475 726e 2078 0d0a 2020 2020    return x..    
-0002dfd0: 2020 2020 3e3e 3e0d 0a20 2020 2020 2020      >>>..       
-0002dfe0: 203e 3e3e 2078 3d46 6173 7441 7272 6179   >>> x=FastArray
-0002dff0: 285b 2773 6f6d 6527 2c27 7465 7874 272c  (['some','text',
-0002e000: 2774 6869 7327 2c27 6973 275d 290d 0a20  'this','is']).. 
-0002e010: 2020 2020 2020 203e 3e3e 206e 756d 6261         >>> numba
-0002e020: 5f73 7472 2878 2e76 6965 7728 6e70 2e75  _str(x.view(np.u
-0002e030: 696e 7438 292e 7265 7368 6170 6528 286c  int8).reshape((l
-0002e040: 656e 2878 292c 2078 2e69 7465 6d73 697a  en(x), x.itemsiz
-0002e050: 6529 2929 0d0a 2020 2020 2020 2020 3e3e  e)))..        >>
-0002e060: 3e20 6e75 6d62 615f 7374 7228 782e 6e75  > numba_str(x.nu
-0002e070: 6d62 6173 7472 696e 6729 0d0a 2020 2020  mbastring)..    
-0002e080: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-0002e090: 2020 2069 6e74 7970 6520 3d20 7365 6c66     intype = self
-0002e0a0: 2e64 7479 7065 2e5f 5f73 7472 5f5f 2829  .dtype.__str__()
-0002e0b0: 0d0a 2020 2020 2020 2020 6966 2069 6e74  ..        if int
-0002e0c0: 7970 655b 305d 203d 3d20 227c 2220 6f72  ype[0] == "|" or
-0002e0d0: 2069 6e74 7970 655b 305d 203d 3d20 223c   intype[0] == "<
-0002e0e0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0002e0f0: 6966 2069 6e74 7970 655b 315d 203d 3d20  if intype[1] == 
-0002e100: 2253 223a 0d0a 2020 2020 2020 2020 2020  "S":..          
-0002e110: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0002e120: 662e 7669 6577 286e 702e 7569 6e74 3829  f.view(np.uint8)
-0002e130: 2e72 6573 6861 7065 2828 6c65 6e28 7365  .reshape((len(se
-0002e140: 6c66 292c 2073 656c 662e 6974 656d 7369  lf), self.itemsi
-0002e150: 7a65 2929 0d0a 2020 2020 2020 2020 2020  ze))..          
-0002e160: 2020 6966 2069 6e74 7970 655b 315d 203d    if intype[1] =
-0002e170: 3d20 2255 223a 0d0a 2020 2020 2020 2020  = "U":..        
-0002e180: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0002e190: 656c 662e 7669 6577 286e 702e 7569 6e74  elf.view(np.uint
-0002e1a0: 3332 292e 7265 7368 6170 6528 286c 656e  32).reshape((len
-0002e1b0: 2873 656c 6629 2c20 7365 6c66 2e69 7465  (self), self.ite
-0002e1c0: 6d73 697a 6520 2f2f 2034 2929 0d0a 2020  msize // 4))..  
-0002e1d0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0002e1e0: 660d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  f....    # -----
-0002e1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e220: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-0002e230: 6170 706c 795f 6e75 6d62 6128 7365 6c66  apply_numba(self
-0002e240: 2c20 2a61 7267 732c 206f 7479 7065 3d4e  , *args, otype=N
-0002e250: 6f6e 652c 206d 7966 756e 633d 226d 7966  one, myfunc="myf
-0002e260: 756e 6322 2c20 6e61 6d65 3d4e 6f6e 6529  unc", name=None)
-0002e270: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0002e280: 2020 2020 2020 2020 5072 696e 7420 746f          Print to
-0002e290: 2073 6372 6565 6e20 616e 2065 7861 6d70   screen an examp
-0002e2a0: 6c65 206e 756d 6261 2073 6967 6e61 7475  le numba signatu
-0002e2b0: 7265 2066 6f72 2074 6865 2061 7272 6179  re for the array
-0002e2c0: 2e0d 0a0d 0a20 2020 2020 2020 2059 6f75  .....        You
-0002e2d0: 2063 616e 2074 6865 6e20 636f 7079 2074   can then copy t
-0002e2e0: 6869 7320 6578 616d 706c 6520 746f 2062  his example to b
-0002e2f0: 7569 6c64 2079 6f75 7220 6f77 6e20 6e75  uild your own nu
-0002e300: 6d62 6120 6675 6e63 7469 6f6e 2e0d 0a0d  mba function....
-0002e310: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-0002e320: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-0002e330: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0002e340: 202a 6172 6773 3a0d 0a20 2020 2020 2020   *args:..       
-0002e350: 2020 2020 2054 6573 7420 6172 6775 6d65       Test argume
-0002e360: 6e74 730d 0a0d 0a20 2020 2020 2020 206f  nts....        o
-0002e370: 7479 7065 3a20 7374 722c 2064 6566 6175  type: str, defau
-0002e380: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-0002e390: 2020 2020 2041 2064 6966 6665 7265 6e74       A different
-0002e3a0: 206f 7574 7075 7420 6461 7461 2074 7970   output data typ
-0002e3b0: 650d 0a0d 0a20 2020 2020 2020 206d 7966  e....        myf
-0002e3c0: 756e 633a 2073 7472 2c20 6465 6661 756c  unc: str, defaul
-0002e3d0: 7420 276d 7966 756e 6327 0d0a 2020 2020  t 'myfunc'..    
-0002e3e0: 2020 2020 2020 2020 4120 7374 7269 6e67          A string
-0002e3f0: 2074 6f20 6361 6c6c 2074 6865 2066 756e   to call the fun
-0002e400: 6374 696f 6e0d 0a0d 0a20 2020 2020 2020  ction....       
-0002e410: 206e 616d 653a 2073 7472 2c20 6465 6661   name: str, defa
-0002e420: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
-0002e430: 2020 2020 2020 4120 7374 7269 6e67 2074        A string t
-0002e440: 6f20 6e61 6d65 2074 6865 2061 7272 6179  o name the array
-0002e450: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0002e460: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0002e470: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0002e480: 3e3e 3e20 696d 706f 7274 206e 756d 6261  >>> import numba
-0002e490: 0d0a 2020 2020 2020 2020 3e3e 3e20 406e  ..        >>> @n
-0002e4a0: 756d 6261 2e67 7576 6563 746f 7269 7a65  umba.guvectorize
-0002e4b0: 285b 2776 6f69 6428 696e 7436 345b 3a5d  (['void(int64[:]
-0002e4c0: 2c20 696e 7436 345b 3a5d 2927 5d2c 2027  , int64[:])'], '
-0002e4d0: 286e 292d 3e28 6e29 2729 0d0a 2020 2020  (n)->(n)')..    
-0002e4e0: 2020 2020 2e2e 2e20 6465 6620 7371 7561      ... def squa
-0002e4f0: 7265 7628 782c 6f75 7429 3a0d 0a20 2020  rev(x,out):..   
-0002e500: 2020 2020 202e 2e2e 2020 2020 2066 6f72       ...     for
-0002e510: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
-0002e520: 7829 293a 0d0a 2020 2020 2020 2020 2e2e  x)):..        ..
-0002e530: 2e20 2020 2020 2020 2020 6f75 745b 695d  .         out[i]
-0002e540: 3d78 5b69 5d2a 2a32 0d0a 2020 2020 2020  =x[i]**2..      
-0002e550: 2020 2e2e 2e0d 0a20 2020 2020 2020 203e    .....        >
-0002e560: 3e3e 2061 3d61 7261 6e67 6528 315f 3030  >> a=arange(1_00
-0002e570: 305f 3030 3029 2e61 7374 7970 6528 6e70  0_000).astype(np
-0002e580: 2e69 6e74 3634 290d 0a20 2020 2020 2020  .int64)..       
-0002e590: 203e 3e3e 2073 7175 6172 6576 2861 290d   >>> squarev(a).
-0002e5a0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0002e5b0: 6179 285b 2020 2020 2020 2020 2020 2030  ay([           0
-0002e5c0: 2c20 2020 2020 2020 2020 2020 2031 2c20  ,            1, 
-0002e5d0: 2020 2020 2020 2020 2020 2034 2c20 2e2e             4, ..
-0002e5e0: 2e2c 2039 3939 3939 3430 3030 3030 392c  ., 999994000009,
-0002e5f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e600: 2020 2020 2039 3939 3939 3630 3030 3030       99999600000
-0002e610: 342c 2039 3939 3939 3830 3030 3030 315d  4, 999998000001]
-0002e620: 2c20 6474 7970 653d 696e 7436 3429 0d0a  , dtype=int64)..
-0002e630: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0002e640: 2020 2020 2069 6620 6e61 6d65 2069 7320       if name is 
-0002e650: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0002e660: 2020 2023 2074 7279 2066 6972 7374 2074     # try first t
-0002e670: 6f20 6765 7420 7468 6520 6e61 6d65 0d0a  o get the name..
-0002e680: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-0002e690: 203d 2073 656c 662e 6765 745f 6e61 6d65   = self.get_name
-0002e6a0: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
-0002e6b0: 2020 6966 206e 616d 6520 6973 204e 6f6e    if name is Non
-0002e6c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002e6d0: 2020 2020 6e61 6d65 203d 2022 6122 0d0a      name = "a"..
-0002e6e0: 0d0a 2020 2020 2020 2020 696e 7479 7065  ..        intype
-0002e6f0: 203d 2073 656c 662e 6474 7970 652e 5f5f   = self.dtype.__
-0002e700: 7374 725f 5f28 290d 0a0d 0a20 2020 2020  str__()....     
-0002e710: 2020 2069 6620 6f74 7970 6520 6973 204e     if otype is N
-0002e720: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0002e730: 2020 6f75 7474 7970 6520 3d20 7365 6c66    outtype = self
-0002e740: 2e64 7479 7065 2e5f 5f73 7472 5f5f 2829  .dtype.__str__()
-0002e750: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-0002e760: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
-0002e770: 7479 7065 203d 206e 702e 6474 7970 6528  type = np.dtype(
-0002e780: 6f74 7970 6529 2e5f 5f73 7472 5f5f 2829  otype).__str__()
-0002e790: 0d0a 0d0a 2020 2020 2020 2020 2320 544f  ....        # TO
-0002e7a0: 444f 3a20 7768 6174 2069 6620 756e 6963  DO: what if unic
-0002e7b0: 6f64 6520 6f72 2073 7472 696e 673f 2020  ode or string?  
-0002e7c0: 2e66 726f 6d62 7566 6665 722f 2e76 6965  .frombuffer/.vie
-0002e7d0: 7728 6e70 2e75 696e 7438 290d 0a0d 0a20  w(np.uint8).... 
-0002e7e0: 2020 2020 2020 2070 7265 616d 626c 6520         preamble 
-0002e7f0: 3d20 2269 6d70 6f72 7420 6e75 6d62 615c  = "import numba\
-0002e800: 6e40 6e75 6d62 612e 6775 7665 6374 6f72  n@numba.guvector
-0002e810: 697a 6528 5b5c 6e22 0d0a 0d0a 2020 2020  ize([\n"....    
-0002e820: 2020 2020 6d69 6464 6c65 203d 2066 2227      middle = f"'
-0002e830: 766f 6964 287b 696e 7479 7065 7d5b 3a5d  void({intype}[:]
-0002e840: 2c20 7b6f 7574 7479 7065 7d5b 3a5d 2927  , {outtype}[:])'
-0002e850: 2c20 2020 2020 2020 2320 3c2d 2d20 6361  ,       # <-- ca
-0002e860: 6e20 7374 6163 6b20 6d75 6c74 6970 6c65  n stack multiple
-0002e870: 2064 6966 6665 7265 6e74 2064 7479 7065   different dtype
-0002e880: 7320 2078 2e76 6965 7728 6e70 2e75 696e  s  x.view(np.uin
-0002e890: 7438 292e 7265 7368 6170 6528 2d31 2c20  t8).reshape(-1, 
-0002e8a0: 782e 6974 656d 7369 7a65 295c 6e22 0d0a  x.itemsize)\n"..
-0002e8b0: 0d0a 2020 2020 2020 2020 706f 7374 616d  ..        postam
-0002e8c0: 626c 6520 3d20 2220 2020 205d 2c20 2728  ble = "    ], '(
-0002e8d0: 6e29 2d3e 286e 2927 2c20 7461 7267 6574  n)->(n)', target
-0002e8e0: 3d27 6370 7527 295c 6e22 0d0a 2020 2020  ='cpu')\n"..    
-0002e8f0: 2020 2020 636f 6465 203d 2066 2264 6566      code = f"def
-0002e900: 207b 6d79 6675 6e63 7d28 6461 7461 5f69   {myfunc}(data_i
-0002e910: 6e2c 2064 6174 615f 6f75 7429 3a5c 6e20  n, data_out):\n 
-0002e920: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0002e930: 6528 6c65 6e28 6461 7461 5f69 6e29 293a  e(len(data_in)):
-0002e940: 5c6e 2020 2020 2020 2020 6461 7461 5f6f  \n        data_o
-0002e950: 7574 5b69 5d3d 6461 7461 5f69 6e5b 695d  ut[i]=data_in[i]
-0002e960: 2020 2023 3c2d 2d20 7075 7420 796f 7572     #<-- put your
-0002e970: 2063 6f64 6520 6865 7265 5c6e 220d 0a20   code here\n".. 
-0002e980: 2020 2020 2020 2065 7865 6320 3d20 7072         exec = pr
-0002e990: 6561 6d62 6c65 202b 206d 6964 646c 6520  eamble + middle 
-0002e9a0: 2b20 706f 7374 616d 626c 6520 2b20 636f  + postamble + co
-0002e9b0: 6465 0d0a 0d0a 2020 2020 2020 2020 7072  de....        pr
-0002e9c0: 696e 7428 2243 6f70 7920 7468 6520 636f  int("Copy the co
-0002e9d0: 6465 2073 6e69 7070 6574 2062 656c 6f77  de snippet below
-0002e9e0: 2061 6e64 2072 656e 616d 6520 6d79 6675   and rename myfu
-0002e9f0: 6e63 2229 0d0a 2020 2020 2020 2020 7072  nc")..        pr
-0002ea00: 696e 7428 222d 2d2d 2d2d 2d2d 2d2d 2d2d  int("-----------
-0002ea10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ea20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ea30: 2d2d 2229 0d0a 2020 2020 2020 2020 7072  --")..        pr
-0002ea40: 696e 7428 6578 6563 290d 0a20 2020 2020  int(exec)..     
-0002ea50: 2020 2070 7269 6e74 2822 2d2d 2d2d 2d2d     print("------
-0002ea60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ea70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ea80: 2d2d 2d2d 2d2d 2d22 290d 0a20 2020 2020  -------")..     
-0002ea90: 2020 2069 6620 696e 7479 7065 5b30 5d20     if intype[0] 
-0002eaa0: 3d3d 2022 7c22 206f 7220 696e 7479 7065  == "|" or intype
-0002eab0: 5b30 5d20 3d3d 2022 3c22 3a0d 0a20 2020  [0] == "<":..   
-0002eac0: 2020 2020 2020 2020 2069 6620 696e 7479           if inty
-0002ead0: 7065 5b31 5d20 3d3d 2022 5322 3a0d 0a20  pe[1] == "S":.. 
-0002eae0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0002eaf0: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
-0002eb00: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
-0002eb10: 6e20 6361 6c6c 207b 6d79 6675 6e63 7d28  n call {myfunc}(
-0002eb20: 7b6e 616d 657d 2e6e 756d 6261 7374 7269  {name}.numbastri
-0002eb30: 6e67 2c65 6d70 7479 5f6c 696b 6528 7b6e  ng,empty_like({n
-0002eb40: 616d 657d 292e 6e75 6d62 6173 7472 696e  ame}).numbastrin
-0002eb50: 6729 2077 6865 7265 207b 6e61 6d65 7d20  g) where {name} 
-0002eb60: 6973 2074 6865 2069 6e70 7574 2061 7272  is the input arr
-0002eb70: 6179 220d 0a20 2020 2020 2020 2020 2020  ay"..           
-0002eb80: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-0002eb90: 2020 2020 656c 6966 2069 6e74 7970 655b      elif intype[
-0002eba0: 315d 203d 3d20 2255 223a 0d0a 2020 2020  1] == "U":..    
-0002ebb0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0002ebc0: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-0002ebd0: 2020 2020 2020 2020 6622 5468 656e 2063          f"Then c
-0002ebe0: 616c 6c20 7b6d 7966 756e 637d 287b 6e61  all {myfunc}({na
-0002ebf0: 6d65 7d2e 6e75 6d62 6173 7472 696e 672c  me}.numbastring,
-0002ec00: 656d 7074 795f 6c69 6b65 287b 6e61 6d65  empty_like({name
-0002ec10: 7d29 2e6e 756d 6261 7374 7269 6e67 2920  }).numbastring) 
-0002ec20: 7768 6572 6520 7b6e 616d 657d 2069 7320  where {name} is 
-0002ec30: 7468 6520 696e 7075 7420 6172 7261 7922  the input array"
-0002ec40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ec50: 2020 290d 0a20 2020 2020 2020 2065 6c73    )..        els
-0002ec60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002ec70: 7072 696e 7428 6622 5468 656e 2063 616c  print(f"Then cal
-0002ec80: 6c20 7b6d 7966 756e 637d 287b 6e61 6d65  l {myfunc}({name
-0002ec90: 7d2c 656d 7074 795f 6c69 6b65 287b 6e61  },empty_like({na
-0002eca0: 6d65 7d29 2920 7768 6572 6520 7b6e 616d  me})) where {nam
-0002ecb0: 657d 2069 7320 7468 6520 696e 7075 7420  e} is the input 
-0002ecc0: 6172 7261 7922 290d 0a20 2020 2020 2020  array")..       
-0002ecd0: 2023 2072 6574 7572 6e20 6578 6563 0d0a   # return exec..
-0002ece0: 0d0a 2020 2020 6465 6620 6170 706c 7928  ..    def apply(
-0002ecf0: 7365 6c66 2c20 7079 6675 6e63 2c20 2a61  self, pyfunc, *a
-0002ed00: 7267 732c 206f 7479 7065 733d 4e6f 6e65  rgs, otypes=None
-0002ed10: 2c20 646f 633d 4e6f 6e65 2c20 6578 636c  , doc=None, excl
-0002ed20: 7564 6564 3d4e 6f6e 652c 2063 6163 6865  uded=None, cache
-0002ed30: 3d46 616c 7365 2c20 7369 676e 6174 7572  =False, signatur
-0002ed40: 653d 4e6f 6e65 293a 0d0a 2020 2020 2020  e=None):..      
-0002ed50: 2020 2222 220d 0a20 2020 2020 2020 2047    """..        G
-0002ed60: 656e 6572 616c 697a 6564 2066 756e 6374  eneralized funct
-0002ed70: 696f 6e20 636c 6173 732e 2020 7365 653a  ion class.  see:
-0002ed80: 206e 702e 7665 6374 6f72 697a 650d 0a0d   np.vectorize...
-0002ed90: 0a20 2020 2020 2020 2043 7265 6174 6573  .        Creates
-0002eda0: 2061 6e64 2074 6865 6e20 6170 706c 6965   and then applie
-0002edb0: 7320 6120 7665 6374 6f72 697a 6564 2066  s a vectorized f
-0002edc0: 756e 6374 696f 6e20 7768 6963 6820 7461  unction which ta
-0002edd0: 6b65 7320 6120 6e65 7374 6564 2073 6571  kes a nested seq
-0002ede0: 7565 6e63 6520 6f66 206f 626a 6563 7473  uence of objects
-0002edf0: 206f 720d 0a20 2020 2020 2020 206e 756d   or..        num
-0002ee00: 7079 2061 7272 6179 7320 6173 2069 6e70  py arrays as inp
-0002ee10: 7574 7320 616e 6420 7265 7475 726e 7320  uts and returns 
-0002ee20: 616e 2073 696e 676c 6520 6f72 2074 7570  an single or tup
-0002ee30: 6c65 206f 6620 6e75 6d70 7920 6172 7261  le of numpy arra
-0002ee40: 7920 6173 0d0a 2020 2020 2020 2020 6f75  y as..        ou
-0002ee50: 7470 7574 2e20 5468 6520 7665 6374 6f72  tput. The vector
-0002ee60: 697a 6564 2066 756e 6374 696f 6e20 6576  ized function ev
-0002ee70: 616c 7561 7465 7320 6070 7966 756e 6360  aluates `pyfunc`
-0002ee80: 206f 7665 7220 7375 6363 6573 7369 7665   over successive
-0002ee90: 2074 7570 6c65 730d 0a20 2020 2020 2020   tuples..       
-0002eea0: 206f 6620 7468 6520 696e 7075 7420 6172   of the input ar
-0002eeb0: 7261 7973 206c 696b 6520 7468 6520 7079  rays like the py
-0002eec0: 7468 6f6e 206d 6170 2066 756e 6374 696f  thon map functio
-0002eed0: 6e2c 2065 7863 6570 7420 6974 2075 7365  n, except it use
-0002eee0: 7320 7468 650d 0a20 2020 2020 2020 2062  s the..        b
-0002eef0: 726f 6164 6361 7374 696e 6720 7275 6c65  roadcasting rule
-0002ef00: 7320 6f66 206e 756d 7079 2e0d 0a0d 0a20  s of numpy..... 
-0002ef10: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
-0002ef20: 7479 7065 206f 6620 7468 6520 6f75 7470  type of the outp
-0002ef30: 7574 206f 6620 6076 6563 746f 7269 7a65  ut of `vectorize
-0002ef40: 6460 2069 7320 6465 7465 726d 696e 6564  d` is determined
-0002ef50: 2062 7920 6361 6c6c 696e 670d 0a20 2020   by calling..   
-0002ef60: 2020 2020 2074 6865 2066 756e 6374 696f       the functio
-0002ef70: 6e20 7769 7468 2074 6865 2066 6972 7374  n with the first
-0002ef80: 2065 6c65 6d65 6e74 206f 6620 7468 6520   element of the 
-0002ef90: 696e 7075 742e 2020 5468 6973 2063 616e  input.  This can
-0002efa0: 2062 6520 6176 6f69 6465 640d 0a20 2020   be avoided..   
-0002efb0: 2020 2020 2062 7920 7370 6563 6966 7969       by specifyi
-0002efc0: 6e67 2074 6865 2060 6f74 7970 6573 6020  ng the `otypes` 
-0002efd0: 6172 6775 6d65 6e74 2e0d 0a0d 0a20 2020  argument.....   
-0002efe0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-0002eff0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0002f000: 2d2d 2d0d 0a20 2020 2020 2020 2070 7966  ---..        pyf
-0002f010: 756e 6320 3a20 6361 6c6c 6162 6c65 0d0a  unc : callable..
-0002f020: 2020 2020 2020 2020 2020 2020 4120 7079              A py
-0002f030: 7468 6f6e 2066 756e 6374 696f 6e20 6f72  thon function or
-0002f040: 206d 6574 686f 642e 0d0a 2020 2020 2020   method...      
-0002f050: 2020 6f74 7970 6573 203a 2073 7472 206f    otypes : str o
-0002f060: 7220 6c69 7374 206f 6620 6474 7970 6573  r list of dtypes
-0002f070: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
-0002f080: 2020 2020 2020 2020 5468 6520 6f75 7470          The outp
-0002f090: 7574 2064 6174 6120 7479 7065 2e20 4974  ut data type. It
-0002f0a0: 206d 7573 7420 6265 2073 7065 6369 6669   must be specifi
-0002f0b0: 6564 2061 7320 6569 7468 6572 2061 2073  ed as either a s
-0002f0c0: 7472 696e 6720 6f66 0d0a 2020 2020 2020  tring of..      
-0002f0d0: 2020 2020 2020 7479 7065 636f 6465 2063        typecode c
-0002f0e0: 6861 7261 6374 6572 7320 6f72 2061 206c  haracters or a l
-0002f0f0: 6973 7420 6f66 2064 6174 6120 7479 7065  ist of data type
-0002f100: 2073 7065 6369 6669 6572 732e 2054 6865   specifiers. The
-0002f110: 7265 2073 686f 756c 640d 0a20 2020 2020  re should..     
-0002f120: 2020 2020 2020 2062 6520 6f6e 6520 6461         be one da
-0002f130: 7461 2074 7970 6520 7370 6563 6966 6965  ta type specifie
-0002f140: 7220 666f 7220 6561 6368 206f 7574 7075  r for each outpu
-0002f150: 742e 0d0a 2020 2020 2020 2020 646f 6320  t...        doc 
-0002f160: 3a20 7374 722c 206f 7074 696f 6e61 6c0d  : str, optional.
-0002f170: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0002f180: 2064 6f63 7374 7269 6e67 2066 6f72 2074   docstring for t
-0002f190: 6865 2066 756e 6374 696f 6e2e 2049 6620  he function. If 
-0002f1a0: 604e 6f6e 6560 2c20 7468 6520 646f 6373  `None`, the docs
-0002f1b0: 7472 696e 6720 7769 6c6c 2062 6520 7468  tring will be th
-0002f1c0: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
-0002f1d0: 6070 7966 756e 632e 5f5f 646f 635f 5f60  `pyfunc.__doc__`
-0002f1e0: 602e 0d0a 2020 2020 2020 2020 6578 636c  `...        excl
-0002f1f0: 7564 6564 203a 2073 6574 2c20 6f70 7469  uded : set, opti
-0002f200: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0002f210: 2020 5365 7420 6f66 2073 7472 696e 6773    Set of strings
-0002f220: 206f 7220 696e 7465 6765 7273 2072 6570   or integers rep
-0002f230: 7265 7365 6e74 696e 6720 7468 6520 706f  resenting the po
-0002f240: 7369 7469 6f6e 616c 206f 7220 6b65 7977  sitional or keyw
-0002f250: 6f72 640d 0a20 2020 2020 2020 2020 2020  ord..           
-0002f260: 2061 7267 756d 656e 7473 2066 6f72 2077   arguments for w
-0002f270: 6869 6368 2074 6865 2066 756e 6374 696f  hich the functio
-0002f280: 6e20 7769 6c6c 206e 6f74 2062 6520 7665  n will not be ve
-0002f290: 6374 6f72 697a 6564 2e20 2054 6865 7365  ctorized.  These
-0002f2a0: 2077 696c 6c20 6265 0d0a 2020 2020 2020   will be..      
-0002f2b0: 2020 2020 2020 7061 7373 6564 2064 6972        passed dir
-0002f2c0: 6563 746c 7920 746f 2060 7079 6675 6e63  ectly to `pyfunc
-0002f2d0: 6020 756e 6d6f 6469 6669 6564 2e0d 0a0d  ` unmodified....
-0002f2e0: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
-0002f2f0: 7665 7273 696f 6e61 6464 6564 3a3a 2031  versionadded:: 1
-0002f300: 2e37 2e30 0d0a 0d0a 2020 2020 2020 2020  .7.0....        
-0002f310: 6361 6368 6520 3a20 626f 6f6c 2c20 6f70  cache : bool, op
-0002f320: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-0002f330: 2020 2049 6620 6054 7275 6560 2c20 7468     If `True`, th
-0002f340: 656e 2063 6163 6865 2074 6865 2066 6972  en cache the fir
-0002f350: 7374 2066 756e 6374 696f 6e20 6361 6c6c  st function call
-0002f360: 2074 6861 7420 6465 7465 726d 696e 6573   that determines
-0002f370: 2074 6865 206e 756d 6265 720d 0a20 2020   the number..   
-0002f380: 2020 2020 2020 2020 6f66 206f 7574 7075          of outpu
-0002f390: 7473 2069 6620 606f 7479 7065 7360 2069  ts if `otypes` i
-0002f3a0: 7320 6e6f 7420 7072 6f76 6964 6564 2e0d  s not provided..
-0002f3b0: 0a0d 0a20 2020 2020 2020 2020 2020 202e  ...            .
-0002f3c0: 2e20 7665 7273 696f 6e61 6464 6564 3a3a  . versionadded::
-0002f3d0: 2031 2e37 2e30 0d0a 0d0a 2020 2020 2020   1.7.0....      
-0002f3e0: 2020 7369 676e 6174 7572 6520 3a20 7374    signature : st
-0002f3f0: 7269 6e67 2c20 6f70 7469 6f6e 616c 0d0a  ring, optional..
-0002f400: 2020 2020 2020 2020 2020 2020 4765 6e65              Gene
-0002f410: 7261 6c69 7a65 6420 756e 6976 6572 7361  ralized universa
-0002f420: 6c20 6675 6e63 7469 6f6e 2073 6967 6e61  l function signa
-0002f430: 7475 7265 2c20 652e 672e 2c20 6060 286d  ture, e.g., ``(m
-0002f440: 2c6e 292c 286e 292d 3e28 6d29 6060 2066  ,n),(n)->(m)`` f
-0002f450: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-0002f460: 7665 6374 6f72 697a 6564 206d 6174 7269  vectorized matri
-0002f470: 782d 7665 6374 6f72 206d 756c 7469 706c  x-vector multipl
-0002f480: 6963 6174 696f 6e2e 2049 6620 7072 6f76  ication. If prov
-0002f490: 6964 6564 2c20 6060 7079 6675 6e63 6060  ided, ``pyfunc``
-0002f4a0: 2077 696c 6c0d 0a20 2020 2020 2020 2020   will..         
-0002f4b0: 2020 2062 6520 6361 6c6c 6564 2077 6974     be called wit
-0002f4c0: 6820 2861 6e64 2065 7870 6563 7465 6420  h (and expected 
-0002f4d0: 746f 2072 6574 7572 6e29 2061 7272 6179  to return) array
-0002f4e0: 7320 7769 7468 2073 6861 7065 7320 6769  s with shapes gi
-0002f4f0: 7665 6e20 6279 2074 6865 0d0a 2020 2020  ven by the..    
-0002f500: 2020 2020 2020 2020 7369 7a65 206f 6620          size of 
-0002f510: 636f 7272 6573 706f 6e64 696e 6720 636f  corresponding co
-0002f520: 7265 2064 696d 656e 7369 6f6e 732e 2042  re dimensions. B
-0002f530: 7920 6465 6661 756c 742c 2060 6070 7966  y default, ``pyf
-0002f540: 756e 6360 6020 6973 0d0a 2020 2020 2020  unc`` is..      
-0002f550: 2020 2020 2020 6173 7375 6d65 6420 746f        assumed to
-0002f560: 2074 616b 6520 7363 616c 6172 7320 6173   take scalars as
-0002f570: 2069 6e70 7574 2061 6e64 206f 7574 7075   input and outpu
-0002f580: 742e 0d0a 0d0a 2020 2020 2020 2020 2020  t.....          
-0002f590: 2020 2e2e 2076 6572 7369 6f6e 6164 6465    .. versionadde
-0002f5a0: 643a 3a20 312e 3132 2e30 0d0a 0d0a 2020  d:: 1.12.0....  
-0002f5b0: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0002f5c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0002f5d0: 2020 2020 2020 2020 7665 6374 6f72 697a          vectoriz
-0002f5e0: 6564 203a 2063 616c 6c61 626c 650d 0a20  ed : callable.. 
-0002f5f0: 2020 2020 2020 2020 2020 2056 6563 746f             Vecto
-0002f600: 7269 7a65 6420 6675 6e63 7469 6f6e 2e0d  rized function..
-0002f610: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
-0002f620: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
-0002f630: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
-0002f640: 6173 7441 7272 6179 2e61 7070 6c79 5f6e  astArray.apply_n
-0002f650: 756d 6261 0d0a 2020 2020 2020 2020 4661  umba..        Fa
-0002f660: 7374 4172 7261 792e 6170 706c 795f 7061  stArray.apply_pa
-0002f670: 6e64 6173 0d0a 0d0a 2020 2020 2020 2020  ndas....        
-0002f680: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-0002f690: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0002f6a0: 2020 2020 3e3e 3e20 6465 6620 6d79 6675      >>> def myfu
-0002f6b0: 6e63 2861 2c20 6229 3a0d 0a20 2020 2020  nc(a, b):..     
-0002f6c0: 2020 202e 2e2e 2020 2020 2022 5265 7475     ...     "Retu
-0002f6d0: 726e 2061 2d62 2069 6620 613e 622c 206f  rn a-b if a>b, o
-0002f6e0: 7468 6572 7769 7365 2072 6574 7572 6e20  therwise return 
-0002f6f0: 612b 6222 0d0a 2020 2020 2020 2020 2e2e  a+b"..        ..
-0002f700: 2e20 2020 2020 6966 2061 203e 2062 3a0d  .     if a > b:.
-0002f710: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0002f720: 2020 2020 2072 6574 7572 6e20 6120 2d20       return a - 
-0002f730: 620d 0a20 2020 2020 2020 202e 2e2e 2020  b..        ...  
-0002f740: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002f750: 2020 2e2e 2e20 2020 2020 2020 2020 7265    ...         re
-0002f760: 7475 726e 2061 202b 2062 0d0a 2020 2020  turn a + b..    
-0002f770: 2020 2020 3e3e 3e0d 0a20 2020 2020 2020      >>>..       
-0002f780: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
-0002f790: 290d 0a20 2020 2020 2020 203e 3e3e 2062  )..        >>> b
-0002f7a0: 3d61 7261 6e67 6528 3130 292b 310d 0a20  =arange(10)+1.. 
-0002f7b0: 2020 2020 2020 203e 3e3e 2061 2e61 7070         >>> a.app
-0002f7c0: 6c79 286d 7966 756e 632c 6229 0d0a 2020  ly(myfunc,b)..  
-0002f7d0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0002f7e0: 5b20 312c 2020 332c 2020 352c 2020 372c  [ 1,  3,  5,  7,
-0002f7f0: 2020 392c 2031 312c 2031 332c 2031 352c    9, 11, 13, 15,
-0002f800: 2031 372c 2031 395d 290d 0a0d 0a20 2020   17, 19])....   
-0002f810: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
-0002f820: 6820 6f6e 6520 696e 7075 7420 6172 7261  h one input arra
-0002f830: 790d 0a0d 0a20 2020 2020 2020 203e 3e3e  y....        >>>
-0002f840: 2064 6566 2073 7175 6172 6528 7829 3a0d   def square(x):.
-0002f850: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0002f860: 2072 6574 7572 6e20 782a 2a32 0d0a 2020   return x**2..  
-0002f870: 2020 2020 2020 3e3e 3e0d 0a20 2020 2020        >>>..     
-0002f880: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
-0002f890: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
-0002f8a0: 2061 2e61 7070 6c79 2873 7175 6172 6529   a.apply(square)
-0002f8b0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0002f8c0: 7261 7928 5b20 302c 2020 312c 2020 342c  ray([ 0,  1,  4,
-0002f8d0: 2020 392c 2031 362c 2032 352c 2033 362c    9, 16, 25, 36,
-0002f8e0: 2034 392c 2036 342c 2038 315d 290d 0a0d   49, 64, 81])...
-0002f8f0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-0002f900: 2077 6974 6820 6c61 6d62 6461 0d0a 0d0a   with lambda....
-0002f910: 2020 2020 2020 2020 3e3e 3e20 613d 6172          >>> a=ar
-0002f920: 616e 6765 2831 3029 0d0a 2020 2020 2020  ange(10)..      
-0002f930: 2020 3e3e 3e20 612e 6170 706c 7928 6c61    >>> a.apply(la
-0002f940: 6d62 6461 2078 3a20 782a 2a32 290d 0a20  mbda x: x**2).. 
-0002f950: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-0002f960: 285b 2030 2c20 2031 2c20 2034 2c20 2039  ([ 0,  1,  4,  9
-0002f970: 2c20 3136 2c20 3235 2c20 3336 2c20 3439  , 16, 25, 36, 49
-0002f980: 2c20 3634 2c20 3831 5d29 0d0a 0d0a 2020  , 64, 81])....  
-0002f990: 2020 2020 2020 4578 616d 706c 6520 7769        Example wi
-0002f9a0: 7468 206e 756d 6261 0d0a 0d0a 2020 2020  th numba....    
-0002f9b0: 2020 2020 3e3e 3e20 6672 6f6d 206e 756d      >>> from num
-0002f9c0: 6261 2069 6d70 6f72 7420 6a69 740d 0a20  ba import jit.. 
-0002f9d0: 2020 2020 2020 203e 3e3e 2040 6a69 740d         >>> @jit.
-0002f9e0: 0a20 2020 2020 2020 202e 2e2e 2064 6566  .        ... def
-0002f9f0: 2073 7175 6172 6569 7428 7829 3a0d 0a20   squareit(x):.. 
-0002fa00: 2020 2020 2020 202e 2e2e 2020 2020 2072         ...     r
-0002fa10: 6574 7572 6e20 782a 2a32 0d0a 2020 2020  eturn x**2..    
-0002fa20: 2020 2020 3e3e 3e20 612e 6170 706c 7928      >>> a.apply(
-0002fa30: 7371 7561 7265 6974 290d 0a20 2020 2020  squareit)..     
-0002fa40: 2020 2046 6173 7441 7272 6179 285b 2030     FastArray([ 0
-0002fa50: 2c20 2031 2c20 2034 2c20 2039 2c20 3136  ,  1,  4,  9, 16
-0002fa60: 2c20 3235 2c20 3336 2c20 3439 2c20 3634  , 25, 36, 49, 64
-0002fa70: 2c20 3831 5d29 0d0a 0d0a 2020 2020 2020  , 81])....      
-0002fa80: 2020 4578 616d 706c 6573 2074 6f20 7573    Examples to us
-0002fa90: 6520 6578 6973 7469 6e67 2062 7569 6c74  e existing built
-0002faa0: 696e 206f 6374 2066 756e 6374 696f 6e20  in oct function 
-0002fab0: 6275 7420 6368 616e 6765 2074 6865 206f  but change the o
-0002fac0: 7574 7075 7420 6672 6f6d 2073 7472 696e  utput from strin
-0002fad0: 672c 2074 6f20 756e 6963 6f64 652c 2074  g, to unicode, t
-0002fae0: 6f20 6f62 6a65 6374 0d0a 0d0a 2020 2020  o object....    
-0002faf0: 2020 2020 3e3e 3e20 613d 6172 616e 6765      >>> a=arange
-0002fb00: 2831 3029 0d0a 2020 2020 2020 2020 3e3e  (10)..        >>
-0002fb10: 3e20 612e 6170 706c 7928 6f63 742c 206f  > a.apply(oct, o
-0002fb20: 7479 7065 733d 5b27 5327 5d29 0d0a 2020  types=['S'])..  
-0002fb30: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0002fb40: 5b62 2730 6f30 272c 2062 2730 6f31 272c  [b'0o0', b'0o1',
-0002fb50: 2062 2730 6f32 272c 2062 2730 6f33 272c   b'0o2', b'0o3',
-0002fb60: 2062 2730 6f34 272c 2062 2730 6f35 272c   b'0o4', b'0o5',
-0002fb70: 2062 2730 6f36 272c 2062 2730 6f37 272c   b'0o6', b'0o7',
-0002fb80: 2062 2730 6f31 3027 2c20 6227 306f 3131   b'0o10', b'0o11
-0002fb90: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
-0002fba0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-0002fbb0: 613d 6172 616e 6765 2831 3029 0d0a 2020  a=arange(10)..  
-0002fbc0: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
-0002fbd0: 7928 6f63 742c 206f 7479 7065 733d 5b27  y(oct, otypes=['
-0002fbe0: 5527 5d29 0d0a 2020 2020 2020 2020 4661  U'])..        Fa
-0002fbf0: 7374 4172 7261 7928 5b27 306f 3027 2c20  stArray(['0o0', 
-0002fc00: 2730 6f31 272c 2027 306f 3227 2c20 2730  '0o1', '0o2', '0
-0002fc10: 6f33 272c 2027 306f 3427 2c20 2730 6f35  o3', '0o4', '0o5
-0002fc20: 272c 2027 306f 3627 2c20 2730 6f37 272c  ', '0o6', '0o7',
-0002fc30: 2027 306f 3130 272c 2027 306f 3131 275d   '0o10', '0o11']
-0002fc40: 2c20 6474 7970 653d 273c 5534 2729 0d0a  , dtype='<U4')..
-0002fc50: 0d0a 2020 2020 2020 2020 3e3e 3e20 613d  ..        >>> a=
-0002fc60: 6172 616e 6765 2831 3029 0d0a 2020 2020  arange(10)..    
-0002fc70: 2020 2020 3e3e 3e20 612e 6170 706c 7928      >>> a.apply(
-0002fc80: 6f63 742c 206f 7479 7065 733d 5b27 4f27  oct, otypes=['O'
-0002fc90: 5d29 0d0a 2020 2020 2020 2020 4661 7374  ])..        Fast
-0002fca0: 4172 7261 7928 5b27 306f 3027 2c20 2730  Array(['0o0', '0
-0002fcb0: 6f31 272c 2027 306f 3227 2c20 2730 6f33  o1', '0o2', '0o3
-0002fcc0: 272c 2027 306f 3427 2c20 2730 6f35 272c  ', '0o4', '0o5',
-0002fcd0: 2027 306f 3627 2c20 2730 6f37 272c 2027   '0o6', '0o7', '
-0002fce0: 306f 3130 272c 2027 306f 3131 275d 2c20  0o10', '0o11'], 
-0002fcf0: 6474 7970 653d 6f62 6a65 6374 290d 0a0d  dtype=object)...
-0002fd00: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0002fd10: 2020 2020 2020 2020 7666 756e 6320 3d20          vfunc = 
-0002fd20: 6e70 2e76 6563 746f 7269 7a65 2870 7966  np.vectorize(pyf
-0002fd30: 756e 632c 206f 7479 7065 733d 6f74 7970  unc, otypes=otyp
-0002fd40: 6573 2c20 646f 633d 646f 632c 2065 7863  es, doc=doc, exc
-0002fd50: 6c75 6465 643d 6578 636c 7564 6564 2c20  luded=excluded, 
-0002fd60: 6361 6368 653d 6361 6368 652c 2073 6967  cache=cache, sig
-0002fd70: 6e61 7475 7265 3d73 6967 6e61 7475 7265  nature=signature
-0002fd80: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
-0002fd90: 7420 3d20 7666 756e 6328 7365 6c66 2c20  t = vfunc(self, 
-0002fda0: 2a61 7267 7329 0d0a 2020 2020 2020 2020  *args)..        
-0002fdb0: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-0002fdc0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-0002fdd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fde0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fdf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002fe00: 2d2d 0d0a 2020 2020 6465 6620 6170 706c  --..    def appl
-0002fe10: 795f 7061 6e64 6173 2873 656c 662c 2066  y_pandas(self, f
-0002fe20: 756e 632c 2063 6f6e 7665 7274 5f64 7479  unc, convert_dty
-0002fe30: 7065 3d54 7275 652c 2061 7267 733d 2829  pe=True, args=()
-0002fe40: 2c20 2a2a 6b77 6473 293a 0d0a 2020 2020  , **kwds):..    
-0002fe50: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0002fe60: 2049 6e76 6f6b 6520 6675 6e63 7469 6f6e   Invoke function
-0002fe70: 206f 6e20 7661 6c75 6573 206f 6620 4661   on values of Fa
-0002fe80: 7374 4172 7261 792e 2043 616e 2062 6520  stArray. Can be 
-0002fe90: 7566 756e 6320 2861 204e 756d 5079 2066  ufunc (a NumPy f
-0002fea0: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
-0002feb0: 2074 6861 7420 6170 706c 6965 7320 746f   that applies to
-0002fec0: 2074 6865 2065 6e74 6972 6520 4661 7374   the entire Fast
-0002fed0: 4172 7261 7929 206f 7220 6120 5079 7468  Array) or a Pyth
-0002fee0: 6f6e 2066 756e 6374 696f 6e20 7468 6174  on function that
-0002fef0: 206f 6e6c 7920 776f 726b 730d 0a20 2020   only works..   
-0002ff00: 2020 2020 206f 6e20 7369 6e67 6c65 2076       on single v
-0002ff10: 616c 7565 730d 0a0d 0a20 2020 2020 2020  alues....       
-0002ff20: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-0002ff30: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-0002ff40: 0a20 2020 2020 2020 2066 756e 6320 3a20  .        func : 
-0002ff50: 6675 6e63 7469 6f6e 0d0a 2020 2020 2020  function..      
-0002ff60: 2020 636f 6e76 6572 745f 6474 7970 6520    convert_dtype 
-0002ff70: 3a20 626f 6f6c 6561 6e2c 2064 6566 6175  : boolean, defau
-0002ff80: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
-0002ff90: 2020 2020 2054 7279 2074 6f20 6669 6e64       Try to find
-0002ffa0: 2062 6574 7465 7220 6474 7970 6520 666f   better dtype fo
-0002ffb0: 7220 656c 656d 656e 7477 6973 6520 6675  r elementwise fu
-0002ffc0: 6e63 7469 6f6e 2072 6573 756c 7473 2e20  nction results. 
-0002ffd0: 4966 0d0a 2020 2020 2020 2020 2020 2020  If..            
-0002ffe0: 4661 6c73 652c 206c 6561 7665 2061 7320  False, leave as 
-0002fff0: 6474 7970 653d 6f62 6a65 6374 0d0a 2020  dtype=object..  
-00030000: 2020 2020 2020 6172 6773 203a 2074 7570        args : tup
-00030010: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-00030020: 506f 7369 7469 6f6e 616c 2061 7267 756d  Positional argum
-00030030: 656e 7473 2074 6f20 7061 7373 2074 6f20  ents to pass to 
-00030040: 6675 6e63 7469 6f6e 2069 6e20 6164 6469  function in addi
-00030050: 7469 6f6e 2074 6f20 7468 6520 7661 6c75  tion to the valu
-00030060: 650d 0a20 2020 2020 2020 2041 6464 6974  e..        Addit
-00030070: 696f 6e61 6c20 6b65 7977 6f72 6420 6172  ional keyword ar
-00030080: 6775 6d65 6e74 7320 7769 6c6c 2062 6520  guments will be 
-00030090: 7061 7373 6564 2061 7320 6b65 7977 6f72  passed as keywor
-000300a0: 6473 2074 6f20 7468 6520 6675 6e63 7469  ds to the functi
-000300b0: 6f6e 0d0a 0d0a 2020 2020 2020 2020 5265  on....        Re
-000300c0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-000300d0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000300e0: 7920 3a20 4661 7374 4172 7261 7920 6f72  y : FastArray or
-000300f0: 2044 6174 6173 6574 2069 6620 6675 6e63   Dataset if func
-00030100: 2072 6574 7572 6e73 2061 2046 6173 7441   returns a FastA
-00030110: 7272 6179 0d0a 0d0a 2020 2020 2020 2020  rray....        
-00030120: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-00030130: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00030140: 2020 2020 4661 7374 4172 7261 792e 6d61      FastArray.ma
-00030150: 703a 2046 6f72 2065 6c65 6d65 6e74 2d77  p: For element-w
-00030160: 6973 6520 6f70 6572 6174 696f 6e73 0d0a  ise operations..
-00030170: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00030180: 792e 6167 673a 206f 6e6c 7920 7065 7266  y.agg: only perf
-00030190: 6f72 6d20 6167 6772 6567 6174 696e 6720  orm aggregating 
-000301a0: 7479 7065 206f 7065 7261 7469 6f6e 730d  type operations.
-000301b0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-000301c0: 6179 2e74 7261 6e73 666f 726d 3a20 6f6e  ay.transform: on
-000301d0: 6c79 2070 6572 666f 726d 2074 7261 6e73  ly perform trans
-000301e0: 666f 726d 696e 6720 7479 7065 206f 7065  forming type ope
-000301f0: 7261 7469 6f6e 730d 0a0d 0a20 2020 2020  rations....     
-00030200: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-00030210: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00030220: 2020 2020 2020 2043 7265 6174 6520 6120         Create a 
-00030230: 4661 7374 4172 7261 7920 7769 7468 2074  FastArray with t
-00030240: 7970 6963 616c 2073 756d 6d65 7220 7465  ypical summer te
-00030250: 6d70 6572 6174 7572 6573 2066 6f72 2065  mperatures for e
-00030260: 6163 6820 6369 7479 2e0d 0a0d 0a20 2020  ach city.....   
-00030270: 2020 2020 203e 3e3e 2066 6120 3d20 7274       >>> fa = rt
-00030280: 2e46 6173 7441 7272 6179 285b 3230 2c20  .FastArray([20, 
-00030290: 3231 2c20 3132 5d2c 2069 6e64 6578 3d5b  21, 12], index=[
-000302a0: 274c 6f6e 646f 6e27 2c20 274e 6577 2059  'London', 'New Y
-000302b0: 6f72 6b27 2c27 4865 6c73 696e 6b69 275d  ork','Helsinki']
-000302c0: 290d 0a20 2020 2020 2020 203e 3e3e 2066  )..        >>> f
-000302d0: 610d 0a20 2020 2020 2020 204c 6f6e 646f  a..        Londo
-000302e0: 6e20 2020 2020 2032 300d 0a20 2020 2020  n      20..     
-000302f0: 2020 204e 6577 2059 6f72 6b20 2020 2032     New York    2
-00030300: 310d 0a20 2020 2020 2020 2048 656c 7369  1..        Helsi
-00030310: 6e6b 6920 2020 2031 320d 0a20 2020 2020  nki    12..     
-00030320: 2020 2064 7479 7065 3a20 696e 7436 340d     dtype: int64.
-00030330: 0a0d 0a20 2020 2020 2020 2053 7175 6172  ...        Squar
-00030340: 6520 7468 6520 7661 6c75 6573 2062 7920  e the values by 
-00030350: 6465 6669 6e69 6e67 2061 2066 756e 6374  defining a funct
-00030360: 696f 6e20 616e 6420 7061 7373 696e 6720  ion and passing 
-00030370: 6974 2061 7320 616e 0d0a 2020 2020 2020  it as an..      
-00030380: 2020 6172 6775 6d65 6e74 2074 6f20 6060    argument to ``
-00030390: 6170 706c 7928 2960 602e 0d0a 0d0a 2020  apply()``.....  
-000303a0: 2020 2020 2020 3e3e 3e20 6465 6620 7371        >>> def sq
-000303b0: 7561 7265 2878 293a 0d0a 2020 2020 2020  uare(x):..      
-000303c0: 2020 2e2e 2e20 2020 2020 7265 7475 726e    ...     return
-000303d0: 2078 2a2a 320d 0a20 2020 2020 2020 203e   x**2..        >
-000303e0: 3e3e 2066 612e 6170 706c 7928 7371 7561  >> fa.apply(squa
-000303f0: 7265 290d 0a20 2020 2020 2020 204c 6f6e  re)..        Lon
-00030400: 646f 6e20 2020 2020 2034 3030 0d0a 2020  don      400..  
-00030410: 2020 2020 2020 4e65 7720 596f 726b 2020        New York  
-00030420: 2020 3434 310d 0a20 2020 2020 2020 2048    441..        H
-00030430: 656c 7369 6e6b 6920 2020 2031 3434 0d0a  elsinki    144..
-00030440: 2020 2020 2020 2020 6474 7970 653a 2069          dtype: i
-00030450: 6e74 3634 0d0a 0d0a 2020 2020 2020 2020  nt64....        
-00030460: 5371 7561 7265 2074 6865 2076 616c 7565  Square the value
-00030470: 7320 6279 2070 6173 7369 6e67 2061 6e20  s by passing an 
-00030480: 616e 6f6e 796d 6f75 7320 6675 6e63 7469  anonymous functi
-00030490: 6f6e 2061 7320 616e 0d0a 2020 2020 2020  on as an..      
-000304a0: 2020 6172 6775 6d65 6e74 2074 6f20 6060    argument to ``
-000304b0: 6170 706c 7928 2960 602e 0d0a 0d0a 2020  apply()``.....  
-000304c0: 2020 2020 2020 3e3e 3e20 6661 2e61 7070        >>> fa.app
-000304d0: 6c79 286c 616d 6264 6120 783a 2078 2a2a  ly(lambda x: x**
-000304e0: 3229 0d0a 2020 2020 2020 2020 4c6f 6e64  2)..        Lond
-000304f0: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
-00030500: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
-00030510: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
-00030520: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
-00030530: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
-00030540: 7436 340d 0a0d 0a20 2020 2020 2020 2044  t64....        D
-00030550: 6566 696e 6520 6120 6375 7374 6f6d 2066  efine a custom f
-00030560: 756e 6374 696f 6e20 7468 6174 206e 6565  unction that nee
-00030570: 6473 2061 6464 6974 696f 6e61 6c20 706f  ds additional po
-00030580: 7369 7469 6f6e 616c 0d0a 2020 2020 2020  sitional..      
-00030590: 2020 6172 6775 6d65 6e74 7320 616e 6420    arguments and 
-000305a0: 7061 7373 2074 6865 7365 2061 6464 6974  pass these addit
-000305b0: 696f 6e61 6c20 6172 6775 6d65 6e74 7320  ional arguments 
-000305c0: 7573 696e 6720 7468 650d 0a20 2020 2020  using the..     
-000305d0: 2020 2060 6061 7267 7360 6020 6b65 7977     ``args`` keyw
-000305e0: 6f72 642e 0d0a 0d0a 2020 2020 2020 2020  ord.....        
-000305f0: 3e3e 3e20 6465 6620 7375 6274 7261 6374  >>> def subtract
-00030600: 5f63 7573 746f 6d5f 7661 6c75 6528 782c  _custom_value(x,
-00030610: 2063 7573 746f 6d5f 7661 6c75 6529 3a0d   custom_value):.
-00030620: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00030630: 2072 6574 7572 6e20 782d 6375 7374 6f6d   return x-custom
-00030640: 5f76 616c 7565 0d0a 2020 2020 2020 2020  _value..        
-00030650: 3e3e 3e20 6661 2e61 7070 6c79 2873 7562  >>> fa.apply(sub
-00030660: 7472 6163 745f 6375 7374 6f6d 5f76 616c  tract_custom_val
-00030670: 7565 2c20 6172 6773 3d28 352c 2929 0d0a  ue, args=(5,))..
-00030680: 2020 2020 2020 2020 4c6f 6e64 6f6e 2020          London  
-00030690: 2020 2020 3135 0d0a 2020 2020 2020 2020      15..        
-000306a0: 4e65 7720 596f 726b 2020 2020 3136 0d0a  New York    16..
-000306b0: 2020 2020 2020 2020 4865 6c73 696e 6b69          Helsinki
-000306c0: 2020 2020 2037 0d0a 2020 2020 2020 2020       7..        
-000306d0: 6474 7970 653a 2069 6e74 3634 0d0a 0d0a  dtype: int64....
-000306e0: 2020 2020 2020 2020 4465 6669 6e65 2061          Define a
-000306f0: 2063 7573 746f 6d20 6675 6e63 7469 6f6e   custom function
-00030700: 2074 6861 7420 7461 6b65 7320 6b65 7977   that takes keyw
-00030710: 6f72 6420 6172 6775 6d65 6e74 730d 0a20  ord arguments.. 
-00030720: 2020 2020 2020 2061 6e64 2070 6173 7320         and pass 
-00030730: 7468 6573 6520 6172 6775 6d65 6e74 7320  these arguments 
-00030740: 746f 2060 6061 7070 6c79 6060 2e0d 0a0d  to ``apply``....
-00030750: 0a20 2020 2020 2020 203e 3e3e 2064 6566  .        >>> def
-00030760: 2061 6464 5f63 7573 746f 6d5f 7661 6c75   add_custom_valu
-00030770: 6573 2878 2c20 2a2a 6b77 6172 6773 293a  es(x, **kwargs):
-00030780: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-00030790: 2020 666f 7220 6d6f 6e74 6820 696e 206b    for month in k
-000307a0: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
-000307b0: 2e2e 2e20 2020 2020 2020 2020 782b 3d6b  ...         x+=k
-000307c0: 7761 7267 735b 6d6f 6e74 685d 0d0a 2020  wargs[month]..  
-000307d0: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
-000307e0: 7475 726e 2078 0d0a 2020 2020 2020 2020  turn x..        
-000307f0: 3e3e 3e20 6661 2e61 7070 6c79 2861 6464  >>> fa.apply(add
-00030800: 5f63 7573 746f 6d5f 7661 6c75 6573 2c20  _custom_values, 
-00030810: 6a75 6e65 3d33 302c 206a 756c 793d 3230  june=30, july=20
-00030820: 2c20 6175 6775 7374 3d32 3529 0d0a 2020  , august=25)..  
-00030830: 2020 2020 2020 4c6f 6e64 6f6e 2020 2020        London    
-00030840: 2020 3935 0d0a 2020 2020 2020 2020 4e65    95..        Ne
-00030850: 7720 596f 726b 2020 2020 3936 0d0a 2020  w York    96..  
-00030860: 2020 2020 2020 4865 6c73 696e 6b69 2020        Helsinki  
-00030870: 2020 3837 0d0a 2020 2020 2020 2020 6474    87..        dt
-00030880: 7970 653a 2069 6e74 3634 0d0a 0d0a 2020  ype: int64....  
-00030890: 2020 2020 2020 5573 6520 6120 6675 6e63        Use a func
-000308a0: 7469 6f6e 2066 726f 6d20 7468 6520 4e75  tion from the Nu
-000308b0: 6d70 7920 6c69 6272 6172 792e 0d0a 0d0a  mpy library.....
-000308c0: 2020 2020 2020 2020 3e3e 3e20 6661 2e61          >>> fa.a
-000308d0: 7070 6c79 286e 702e 6c6f 6729 0d0a 2020  pply(np.log)..  
-000308e0: 2020 2020 2020 4c6f 6e64 6f6e 2020 2020        London    
-000308f0: 2020 322e 3939 3537 3332 0d0a 2020 2020    2.995732..    
-00030900: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
-00030910: 332e 3034 3435 3232 0d0a 2020 2020 2020  3.044522..      
-00030920: 2020 4865 6c73 696e 6b69 2020 2020 322e    Helsinki    2.
-00030930: 3438 3439 3037 0d0a 2020 2020 2020 2020  484907..        
-00030940: 6474 7970 653a 2066 6c6f 6174 3634 0d0a  dtype: float64..
-00030950: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00030960: 2020 2020 2069 6d70 6f72 7420 7061 6e64       import pand
-00030970: 6173 2061 7320 7064 0d0a 0d0a 2020 2020  as as pd....    
-00030980: 2020 2020 7365 7269 6573 203d 2070 642e      series = pd.
-00030990: 5365 7269 6573 2873 656c 6629 0d0a 2020  Series(self)..  
-000309a0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-000309b0: 6572 6965 732e 6170 706c 7928 6675 6e63  eries.apply(func
-000309c0: 2c20 636f 6e76 6572 745f 6474 7970 653d  , convert_dtype=
-000309d0: 636f 6e76 6572 745f 6474 7970 652c 2061  convert_dtype, a
-000309e0: 7267 733d 6172 6773 2c20 2a2a 6b77 6473  rgs=args, **kwds
-000309f0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00030a00: 6e20 7265 7375 6c74 2e76 616c 7565 730d  n result.values.
-00030a10: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00030a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00030a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00030a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00030a50: 2d2d 2d2d 0d0a 2020 2020 4063 6163 6865  ----..    @cache
-00030a60: 645f 7765 616b 7265 665f 7072 6f70 6572  d_weakref_proper
-00030a70: 7479 0d0a 2020 2020 6465 6620 7374 7228  ty..    def str(
-00030a80: 7365 6c66 2920 2d3e 2022 4641 5374 7269  self) -> "FAStri
-00030a90: 6e67 223a 0d0a 2020 2020 2020 2020 7222  ng":..        r"
-00030aa0: 2222 4361 7374 7320 616e 2061 7272 6179  ""Casts an array
-00030ab0: 206f 6620 6279 7465 2073 7472 696e 6773   of byte strings
-00030ac0: 206f 7220 756e 6963 6f64 6520 6173 2060   or unicode as `
-00030ad0: 6046 4153 7472 696e 6760 602e 0d0a 0d0a  `FAString``.....
-00030ae0: 2020 2020 2020 2020 456e 6162 6c65 7320          Enables 
-00030af0: 6120 7661 7269 6574 7920 6f66 2075 7365  a variety of use
-00030b00: 6675 6c20 7374 7269 6e67 206d 616e 6970  ful string manip
-00030b10: 756c 6174 696f 6e20 6d65 7468 6f64 732e  ulation methods.
-00030b20: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00030b30: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00030b40: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4641  ----..        FA
-00030b50: 5374 7269 6e67 0d0a 0d0a 2020 2020 2020  String....      
-00030b60: 2020 5261 6973 6573 0d0a 2020 2020 2020    Raises..      
-00030b70: 2020 2d2d 2d2d 2d2d 0d0a 2020 2020 2020    ------..      
-00030b80: 2020 5479 7065 4572 726f 720d 0a20 2020    TypeError..   
-00030b90: 2020 2020 2020 2020 2049 6620 7468 6520           If the 
-00030ba0: 4661 7374 4172 7261 7920 6973 206f 6620  FastArray is of 
-00030bb0: 6474 7970 6520 6f74 6865 7220 7468 616e  dtype other than
-00030bc0: 2062 7974 6520 7374 7269 6e67 206f 7220   byte string or 
-00030bd0: 756e 6963 6f64 650d 0a0d 0a20 2020 2020  unicode....     
-00030be0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00030bf0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00030c00: 2020 2020 2020 206e 702e 6368 6172 6172         np.charar
-00030c10: 7261 790d 0a20 2020 2020 2020 206e 702e  ray..        np.
-00030c20: 6368 6172 0d0a 2020 2020 2020 2020 7274  char..        rt
-00030c30: 2e46 4153 7472 696e 672e 6170 706c 790d  .FAString.apply.
-00030c40: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-00030c50: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-00030c60: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-00030c70: 3e3e 2073 3d46 4128 5b27 7468 6973 272c  >> s=FA(['this',
-00030c80: 2774 6861 7427 2c27 7465 7374 2027 5d2a  'that','test ']*
-00030c90: 3130 305f 3030 3029 0d0a 2020 2020 2020  100_000)..      
-00030ca0: 2020 3e3e 3e20 732e 7374 722e 7570 7065    >>> s.str.uppe
-00030cb0: 720d 0a20 2020 2020 2020 2046 6173 7441  r..        FastA
-00030cc0: 7272 6179 285b 6227 5448 4953 272c 2062  rray([b'THIS', b
-00030cd0: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
-00030ce0: 2c20 2e2e 2e2c 2062 2754 4849 5327 2c20  , ..., b'THIS', 
-00030cf0: 6227 5448 4154 272c 2062 2754 4553 5420  b'THAT', b'TEST 
-00030d00: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
-00030d10: 2020 2020 2020 2064 7479 7065 3d27 7c53         dtype='|S
-00030d20: 3527 290d 0a0d 0a20 2020 2020 2020 203e  5')....        >
-00030d30: 3e3e 2073 2e73 7472 2e6c 6f77 6572 0d0a  >> s.str.lower..
-00030d40: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00030d50: 7928 5b62 2774 6869 7327 2c20 6227 7468  y([b'this', b'th
-00030d60: 6174 272c 2062 2774 6573 7420 272c 202e  at', b'test ', .
-00030d70: 2e2e 2c20 6227 7468 6973 272c 2062 2774  .., b'this', b't
-00030d80: 6861 7427 2c20 6227 7465 7374 2027 5d2c  hat', b'test '],
-00030d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00030da0: 2020 2020 6474 7970 653d 277c 5335 2729      dtype='|S5')
-00030db0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00030dc0: 732e 7374 722e 7265 6d6f 7665 7472 6169  s.str.removetrai
-00030dd0: 6c69 6e67 2829 0d0a 2020 2020 2020 2020  ling()..        
-00030de0: 4661 7374 4172 7261 7928 5b62 2774 6869  FastArray([b'thi
-00030df0: 7327 2c20 6227 7468 6174 272c 2062 2774  s', b'that', b't
-00030e00: 6573 7427 2c20 2e2e 2e2c 2062 2774 6869  est', ..., b'thi
-00030e10: 7327 2c20 6227 7468 6174 272c 2062 2774  s', b'that', b't
-00030e20: 6573 7427 5d2c 0d0a 2020 2020 2020 2020  est'],..        
-00030e30: 2020 2020 2020 2020 2020 6474 7970 653d            dtype=
-00030e40: 277c 5335 2729 0d0a 2020 2020 2020 2020  '|S5')..        
-00030e50: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-00030e60: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-00030e70: 696e 2022 5553 223a 0d0a 2020 2020 2020  in "US":..      
-00030e80: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-00030e90: 6552 6567 6973 7465 722e 4641 5374 7269  eRegister.FAStri
-00030ea0: 6e67 2873 656c 6629 0d0a 2020 2020 2020  ng(self)..      
-00030eb0: 2020 6966 2073 656c 662e 6474 7970 652e    if self.dtype.
-00030ec0: 6368 6172 203d 3d20 224f 223a 0d0a 2020  char == "O":..  
-00030ed0: 2020 2020 2020 2020 2020 2320 7472 7920            # try 
-00030ee0: 746f 2063 6f6e 7665 7274 2074 6f20 7374  to convert to st
-00030ef0: 7269 6e67 2028 6d69 6768 7420 6861 7665  ring (might have
-00030f00: 2063 6f6d 6520 6672 6f6d 2070 616e 6461   come from panda
-00030f10: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00030f20: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00030f30: 2020 2020 2020 636f 6e76 203d 2073 656c        conv = sel
-00030f40: 662e 6173 7479 7065 2822 5322 290d 0a20  f.astype("S").. 
-00030f50: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00030f60: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00030f70: 2020 2020 636f 6e76 203d 2073 656c 662e      conv = self.
-00030f80: 6173 7479 7065 2822 5522 290d 0a20 2020  astype("U")..   
-00030f90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00030fa0: 5479 7065 5265 6769 7374 6572 2e46 4153  TypeRegister.FAS
-00030fb0: 7472 696e 6728 636f 6e76 290d 0a0d 0a20  tring(conv).... 
-00030fc0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00030fd0: 6545 7272 6f72 2866 2254 6865 202e 7374  eError(f"The .st
-00030fe0: 7220 6675 6e63 7469 6f6e 2063 616e 206f  r function can o
-00030ff0: 6e6c 7920 6265 2075 7365 6420 6f6e 2062  nly be used on b
-00031000: 7974 6520 7374 7269 6e67 2061 6e64 2075  yte string and u
-00031010: 6e69 636f 6465 206e 6f74 207b 7365 6c66  nicode not {self
-00031020: 2e64 7479 7065 2172 7d22 290d 0a0d 0a20  .dtype!r}").... 
-00031030: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00031040: 0d0a 2020 2020 6465 6620 6672 6f6d 5f61  ..    def from_a
-00031050: 7272 6f77 280d 0a20 2020 2020 2020 2061  rrow(..        a
-00031060: 7272 3a20 556e 696f 6e5b 2270 612e 4172  rr: Union["pa.Ar
-00031070: 7261 7922 2c20 2270 612e 4368 756e 6b65  ray", "pa.Chunke
-00031080: 6441 7272 6179 225d 2c0d 0a20 2020 2020  dArray"],..     
-00031090: 2020 207a 6572 6f5f 636f 7079 5f6f 6e6c     zero_copy_onl
-000310a0: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0d  y: bool = True,.
-000310b0: 0a20 2020 2020 2020 2077 7269 7461 626c  .        writabl
-000310c0: 653a 2062 6f6f 6c20 3d20 4661 6c73 652c  e: bool = False,
-000310d0: 0d0a 2020 2020 2020 2020 6175 746f 5f77  ..        auto_w
-000310e0: 6964 656e 3a20 626f 6f6c 203d 2046 616c  iden: bool = Fal
-000310f0: 7365 2c0d 0a20 2020 2029 202d 3e20 2246  se,..    ) -> "F
-00031100: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
-00031110: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00031120: 2043 6f6e 7665 7274 2061 2070 7961 7272   Convert a pyarr
-00031130: 6f77 2060 4172 7261 7960 2074 6f20 6120  ow `Array` to a 
-00031140: 7269 7074 6162 6c65 2060 4661 7374 4172  riptable `FastAr
-00031150: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
-00031160: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-00031170: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00031180: 0a20 2020 2020 2020 2061 7272 203a 2070  .        arr : p
-00031190: 7961 7272 6f77 2e41 7272 6179 206f 7220  yarrow.Array or 
-000311a0: 7079 6172 726f 772e 4368 756e 6b65 6441  pyarrow.ChunkedA
-000311b0: 7272 6179 0d0a 2020 2020 2020 2020 7a65  rray..        ze
-000311c0: 726f 5f63 6f70 795f 6f6e 6c79 203a 2062  ro_copy_only : b
-000311d0: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
-000311e0: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
-000311f0: 6620 5472 7565 2c20 616e 2065 7863 6570  f True, an excep
-00031200: 7469 6f6e 2077 696c 6c20 6265 2072 6169  tion will be rai
-00031210: 7365 6420 6966 2074 6865 2063 6f6e 7665  sed if the conve
-00031220: 7273 696f 6e20 746f 2061 2060 4661 7374  rsion to a `Fast
-00031230: 4172 7261 7960 2077 6f75 6c64 2072 6571  Array` would req
-00031240: 7569 7265 2063 6f70 7969 6e67 2074 6865  uire copying the
-00031250: 0d0a 2020 2020 2020 2020 2020 2020 756e  ..            un
-00031260: 6465 726c 7969 6e67 2064 6174 6120 2865  derlying data (e
-00031270: 2e67 2e20 696e 2070 7265 7365 6e63 6520  .g. in presence 
-00031280: 6f66 206e 756c 6c73 2c20 6f72 2066 6f72  of nulls, or for
-00031290: 206e 6f6e 2d70 7269 6d69 7469 7665 2074   non-primitive t
-000312a0: 7970 6573 292e 0d0a 2020 2020 2020 2020  ypes)...        
-000312b0: 7772 6974 6162 6c65 203a 2062 6f6f 6c2c  writable : bool,
-000312c0: 2064 6566 6175 6c74 2046 616c 7365 0d0a   default False..
-000312d0: 2020 2020 2020 2020 2020 2020 466f 7220              For 
-000312e0: 6120 6046 6173 7441 7272 6179 6020 6372  a `FastArray` cr
-000312f0: 6561 7465 6420 7769 7468 207a 6572 6f20  eated with zero 
-00031300: 636f 7079 2028 7669 6577 206f 6e20 7468  copy (view on th
-00031310: 6520 4172 726f 7720 6461 7461 292c 2074  e Arrow data), t
-00031320: 6865 2072 6573 756c 7469 6e67 2061 7272  he resulting arr
-00031330: 6179 2069 7320 6e6f 7420 7772 6974 6162  ay is not writab
-00031340: 6c65 2028 4172 726f 7720 6461 7461 2069  le (Arrow data i
-00031350: 7320 696d 6d75 7461 626c 6529 2e0d 0a20  s immutable)... 
-00031360: 2020 2020 2020 2020 2020 2042 7920 7365             By se
-00031370: 7474 696e 6720 7468 6973 2074 6f20 5472  tting this to Tr
-00031380: 7565 2c20 6120 636f 7079 206f 6620 7468  ue, a copy of th
-00031390: 6520 6172 7261 7920 6973 206d 6164 6520  e array is made 
-000313a0: 746f 2065 6e73 7572 6520 6974 2069 7320  to ensure it is 
-000313b0: 7772 6974 6162 6c65 2e0d 0a20 2020 2020  writable...     
-000313c0: 2020 2061 7574 6f5f 7769 6465 6e20 3a20     auto_widen : 
-000313d0: 626f 6f6c 2c20 6f70 7469 6f6e 616c 2c20  bool, optional, 
-000313e0: 6465 6661 756c 7420 746f 2046 616c 7365  default to False
-000313f0: 0d0a 2020 2020 2020 2020 2020 2020 5768  ..            Wh
-00031400: 656e 2046 616c 7365 2028 7468 6520 6465  en False (the de
-00031410: 6661 756c 7429 2c20 6966 2061 6e20 6172  fault), if an ar
-00031420: 726f 7720 6172 7261 7920 636f 6e74 6169  row array contai
-00031430: 6e73 2061 2076 616c 7565 2077 6869 6368  ns a value which
-00031440: 2077 6f75 6c64 2062 6520 636f 6e73 6964   would be consid
-00031450: 6572 6564 0d0a 2020 2020 2020 2020 2020  ered..          
-00031460: 2020 7468 6520 2769 6e76 616c 6964 272f    the 'invalid'/
-00031470: 4e41 2076 616c 7565 2066 6f72 2074 6865  NA value for the
-00031480: 2065 7175 6976 616c 656e 7420 6474 7970   equivalent dtyp
-00031490: 6520 696e 2061 2060 4661 7374 4172 7261  e in a `FastArra
-000314a0: 7960 2c20 7261 6973 6520 616e 2065 7863  y`, raise an exc
-000314b0: 6570 7469 6f6e 0d0a 2020 2020 2020 2020  eption..        
-000314c0: 2020 2020 6265 6361 7573 6520 6469 7265      because dire
-000314d0: 6374 2063 6f6e 7665 7273 696f 6e20 776f  ct conversion wo
-000314e0: 756c 6420 6265 206c 6f73 7379 202f 2063  uld be lossy / c
-000314f0: 6861 6e67 6520 7468 6520 7365 6d61 6e74  hange the semant
-00031500: 6963 206d 6561 6e69 6e67 206f 6620 7468  ic meaning of th
-00031510: 6520 6461 7461 2e0d 0a20 2020 2020 2020  e data...       
-00031520: 2020 2020 2057 6865 6e20 5472 7565 2c20       When True, 
-00031530: 7468 6520 636f 6e76 6572 7465 6420 6172  the converted ar
-00031540: 7261 7920 7769 6c6c 2062 6520 7769 6465  ray will be wide
-00031550: 6e65 6420 2869 6620 706f 7373 6962 6c65  ned (if possible
-00031560: 2920 746f 2074 6865 206e 6578 742d 6c61  ) to the next-la
-00031570: 7267 6573 7420 6474 7970 650d 0a20 2020  rgest dtype..   
-00031580: 2020 2020 2020 2020 2074 6f20 656e 7375           to ensu
-00031590: 7265 2074 6865 2064 6174 6120 7769 6c6c  re the data will
-000315a0: 2062 6520 696e 7465 7270 7265 7465 6420   be interpreted 
-000315b0: 696e 2074 6865 2073 616d 6520 7761 792e  in the same way.
-000315c0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-000315d0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-000315e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
-000315f0: 7374 4172 7261 790d 0a20 2020 2020 2020  stArray..       
-00031600: 2022 2222 0d0a 2020 2020 2020 2020 696d   """..        im
-00031610: 706f 7274 2070 7961 7272 6f77 2e74 7970  port pyarrow.typ
-00031620: 6573 2061 7320 7061 740d 0a0d 0a20 2020  es as pat....   
-00031630: 2020 2020 2023 2042 6173 6564 206f 6e20       # Based on 
-00031640: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
-00031650: 6172 7261 792c 2064 6973 7061 7463 6820  array, dispatch 
-00031660: 746f 2074 7970 652d 7370 6563 6966 6963  to type-specific
-00031670: 2069 6d70 6c65 6d65 6e74 6174 696f 6e73   implementations
-00031680: 206f 6620 2e66 726f 6d5f 6172 726f 7728   of .from_arrow(
-00031690: 292e 0d0a 2020 2020 2020 2020 7061 5f61  )...        pa_a
-000316a0: 7272 5f74 7970 6520 3d20 6172 722e 7479  rr_type = arr.ty
-000316b0: 7065 0d0a 2020 2020 2020 2020 6966 2028  pe..        if (
-000316c0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
-000316d0: 742e 6973 5f62 6f6f 6c65 616e 2870 615f  t.is_boolean(pa_
-000316e0: 6172 725f 7479 7065 290d 0a20 2020 2020  arr_type)..     
-000316f0: 2020 2020 2020 206f 7220 7061 742e 6973         or pat.is
-00031700: 5f69 6e74 6567 6572 2870 615f 6172 725f  _integer(pa_arr_
-00031710: 7479 7065 290d 0a20 2020 2020 2020 2020  type)..         
-00031720: 2020 206f 7220 7061 742e 6973 5f66 6c6f     or pat.is_flo
-00031730: 6174 696e 6728 7061 5f61 7272 5f74 7970  ating(pa_arr_typ
-00031740: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-00031750: 6f72 2070 6174 2e69 735f 7374 7269 6e67  or pat.is_string
-00031760: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
-00031770: 2020 2020 2020 2020 2020 206f 7220 7061             or pa
-00031780: 742e 6973 5f62 696e 6172 7928 7061 5f61  t.is_binary(pa_a
-00031790: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
-000317a0: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
-000317b0: 6669 7865 645f 7369 7a65 5f62 696e 6172  fixed_size_binar
-000317c0: 7928 7061 5f61 7272 5f74 7970 6529 0d0a  y(pa_arr_type)..
-000317d0: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
-000317e0: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
-000317f0: 4368 6563 6b20 7768 6574 6865 7220 7468  Check whether th
-00031800: 6973 2063 6f6c 756d 6e20 6861 7320 6120  is column has a 
-00031810: 7573 6572 2d73 7065 6369 6669 6564 2066  user-specified f
-00031820: 696c 6c20 7661 6c75 6520 7072 6f76 6964  ill value provid
-00031830: 6564 3b20 6966 2073 6f2c 2070 6173 7320  ed; if so, pass 
-00031840: 6974 2061 6c6f 6e67 2074 6f0d 0a20 2020  it along to..   
-00031850: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00031860: 2074 6865 2046 6173 7441 7272 6179 2e66   the FastArray.f
-00031870: 726f 6d5f 6172 726f 7728 2920 6d65 7468  rom_arrow() meth
-00031880: 6f64 2063 616c 6c20 6265 6c6f 772e 0d0a  od call below...
-00031890: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000318a0: 726e 2046 6173 7441 7272 6179 2e5f 6672  rn FastArray._fr
-000318b0: 6f6d 5f61 7272 6f77 2861 7272 2c20 7a65  om_arrow(arr, ze
-000318c0: 726f 5f63 6f70 795f 6f6e 6c79 3d7a 6572  ro_copy_only=zer
-000318d0: 6f5f 636f 7079 5f6f 6e6c 792c 2077 7269  o_copy_only, wri
-000318e0: 7461 626c 653d 7772 6974 6162 6c65 2c20  table=writable, 
-000318f0: 6175 746f 5f77 6964 656e 3d61 7574 6f5f  auto_widen=auto_
-00031900: 7769 6465 6e29 0d0a 0d0a 2020 2020 2020  widen)....      
-00031910: 2020 656c 6966 2070 6174 2e69 735f 6469    elif pat.is_di
-00031920: 6374 696f 6e61 7279 2870 615f 6172 725f  ctionary(pa_arr_
-00031930: 7479 7065 2920 6f72 2070 6174 2e69 735f  type) or pat.is_
-00031940: 7374 7275 6374 2870 615f 6172 725f 7479  struct(pa_arr_ty
-00031950: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
-00031960: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-00031970: 6973 7465 722e 4361 7465 676f 7269 6361  ister.Categorica
-00031980: 6c2e 5f66 726f 6d5f 6172 726f 7728 6172  l._from_arrow(ar
-00031990: 722c 207a 6572 6f5f 636f 7079 5f6f 6e6c  r, zero_copy_onl
-000319a0: 793d 7a65 726f 5f63 6f70 795f 6f6e 6c79  y=zero_copy_only
-000319b0: 2c20 7772 6974 6162 6c65 3d77 7269 7461  , writable=writa
-000319c0: 626c 6529 0d0a 0d0a 2020 2020 2020 2020  ble)....        
-000319d0: 656c 6966 2070 6174 2e69 735f 7469 6d65  elif pat.is_time
-000319e0: 7374 616d 7028 7061 5f61 7272 5f74 7970  stamp(pa_arr_typ
-000319f0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00031a00: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-00031a10: 7374 6572 2e44 6174 6554 696d 654e 616e  ster.DateTimeNan
-00031a20: 6f2e 5f66 726f 6d5f 6172 726f 7728 6172  o._from_arrow(ar
-00031a30: 722c 207a 6572 6f5f 636f 7079 5f6f 6e6c  r, zero_copy_onl
-00031a40: 793d 7a65 726f 5f63 6f70 795f 6f6e 6c79  y=zero_copy_only
-00031a50: 2c20 7772 6974 6162 6c65 3d77 7269 7461  , writable=writa
-00031a60: 626c 6529 0d0a 0d0a 2020 2020 2020 2020  ble)....        
-00031a70: 656c 6966 2070 6174 2e69 735f 6461 7465  elif pat.is_date
-00031a80: 2870 615f 6172 725f 7479 7065 293a 0d0a  (pa_arr_type):..
-00031a90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00031aa0: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
-00031ab0: 4461 7465 2e5f 6672 6f6d 5f61 7272 6f77  Date._from_arrow
-00031ac0: 2861 7272 2c20 7a65 726f 5f63 6f70 795f  (arr, zero_copy_
-00031ad0: 6f6e 6c79 3d7a 6572 6f5f 636f 7079 5f6f  only=zero_copy_o
-00031ae0: 6e6c 792c 2077 7269 7461 626c 653d 7772  nly, writable=wr
-00031af0: 6974 6162 6c65 290d 0a0d 0a20 2020 2020  itable)....     
-00031b00: 2020 2065 6c69 6620 7061 742e 6973 5f64     elif pat.is_d
-00031b10: 7572 6174 696f 6e28 7061 5f61 7272 5f74  uration(pa_arr_t
-00031b20: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
-00031b30: 2020 2072 6574 7572 6e20 5479 7065 5265     return TypeRe
-00031b40: 6769 7374 6572 2e54 696d 6553 7061 6e2e  gister.TimeSpan.
-00031b50: 5f66 726f 6d5f 6172 726f 7728 6172 722c  _from_arrow(arr,
-00031b60: 207a 6572 6f5f 636f 7079 5f6f 6e6c 793d   zero_copy_only=
-00031b70: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
-00031b80: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
-00031b90: 6529 0d0a 0d0a 2020 2020 2020 2020 656c  e)....        el
-00031ba0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00031bb0: 2023 2055 6e6b 6e6f 776e 2f75 6e73 7570   # Unknown/unsup
-00031bc0: 706f 7274 6564 2061 7272 6179 2074 7970  ported array typ
-00031bd0: 6520 2d2d 2063 616e 2774 2063 6f6e 7665  e -- can't conve
-00031be0: 7274 2e0d 0a20 2020 2020 2020 2020 2020  rt...           
-00031bf0: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
-00031c00: 656e 7465 6445 7272 6f72 2866 2270 7961  entedError(f"pya
-00031c10: 7272 6f77 2061 7272 6179 7320 6f66 2074  rrow arrays of t
-00031c20: 7970 6520 277b 7061 5f61 7272 5f74 7970  ype '{pa_arr_typ
-00031c30: 657d 2720 6361 6e27 7420 6265 2063 6f6e  e}' can't be con
-00031c40: 7665 7274 6564 2074 6f20 7269 7074 6162  verted to riptab
-00031c50: 6c65 2061 7272 6179 732e 2229 0d0a 0d0a  le arrays.")....
-00031c60: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00031c70: 640d 0a20 2020 2064 6566 205f 6672 6f6d  d..    def _from
-00031c80: 5f61 7272 6f77 280d 0a20 2020 2020 2020  _arrow(..       
-00031c90: 2061 7272 3a20 556e 696f 6e5b 2270 612e   arr: Union["pa.
-00031ca0: 4172 7261 7922 2c20 2270 612e 4368 756e  Array", "pa.Chun
-00031cb0: 6b65 6441 7272 6179 225d 2c0d 0a20 2020  kedArray"],..   
-00031cc0: 2020 2020 207a 6572 6f5f 636f 7079 5f6f       zero_copy_o
-00031cd0: 6e6c 793a 2062 6f6f 6c20 3d20 5472 7565  nly: bool = True
-00031ce0: 2c0d 0a20 2020 2020 2020 2077 7269 7461  ,..        writa
-00031cf0: 626c 653a 2062 6f6f 6c20 3d20 4661 6c73  ble: bool = Fals
-00031d00: 652c 0d0a 2020 2020 2020 2020 6175 746f  e,..        auto
-00031d10: 5f77 6964 656e 3a20 626f 6f6c 203d 2046  _widen: bool = F
-00031d20: 616c 7365 2c0d 0a20 2020 2029 202d 3e20  alse,..    ) -> 
-00031d30: 2246 6173 7441 7272 6179 223a 0d0a 2020  "FastArray":..  
-00031d40: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00031d50: 2020 2043 6f6e 7665 7274 2061 2070 7961     Convert a pya
-00031d60: 7272 6f77 2060 4172 7261 7960 2074 6f20  rrow `Array` to 
-00031d70: 6120 7269 7074 6162 6c65 2060 4661 7374  a riptable `Fast
-00031d80: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
-00031d90: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00031da0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00031db0: 2d0d 0a20 2020 2020 2020 2061 7272 203a  -..        arr :
-00031dc0: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
-00031dd0: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
-00031de0: 6441 7272 6179 0d0a 2020 2020 2020 2020  dArray..        
-00031df0: 7a65 726f 5f63 6f70 795f 6f6e 6c79 203a  zero_copy_only :
-00031e00: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
-00031e10: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
-00031e20: 2049 6620 5472 7565 2c20 616e 2065 7863   If True, an exc
-00031e30: 6570 7469 6f6e 2077 696c 6c20 6265 2072  eption will be r
-00031e40: 6169 7365 6420 6966 2074 6865 2063 6f6e  aised if the con
-00031e50: 7665 7273 696f 6e20 746f 2061 2060 4661  version to a `Fa
-00031e60: 7374 4172 7261 7960 2077 6f75 6c64 2072  stArray` would r
-00031e70: 6571 7569 7265 2063 6f70 7969 6e67 2074  equire copying t
-00031e80: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
-00031e90: 756e 6465 726c 7969 6e67 2064 6174 6120  underlying data 
-00031ea0: 2865 2e67 2e20 696e 2070 7265 7365 6e63  (e.g. in presenc
-00031eb0: 6520 6f66 206e 756c 6c73 2c20 6f72 2066  e of nulls, or f
-00031ec0: 6f72 206e 6f6e 2d70 7269 6d69 7469 7665  or non-primitive
-00031ed0: 2074 7970 6573 292e 0d0a 2020 2020 2020   types)...      
-00031ee0: 2020 7772 6974 6162 6c65 203a 2062 6f6f    writable : boo
-00031ef0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-00031f00: 0d0a 2020 2020 2020 2020 2020 2020 466f  ..            Fo
-00031f10: 7220 6120 6046 6173 7441 7272 6179 6020  r a `FastArray` 
-00031f20: 6372 6561 7465 6420 7769 7468 207a 6572  created with zer
-00031f30: 6f20 636f 7079 2028 7669 6577 206f 6e20  o copy (view on 
-00031f40: 7468 6520 4172 726f 7720 6461 7461 292c  the Arrow data),
-00031f50: 2074 6865 2072 6573 756c 7469 6e67 2061   the resulting a
-00031f60: 7272 6179 2069 7320 6e6f 7420 7772 6974  rray is not writ
-00031f70: 6162 6c65 2028 4172 726f 7720 6461 7461  able (Arrow data
-00031f80: 2069 7320 696d 6d75 7461 626c 6529 2e0d   is immutable)..
-00031f90: 0a20 2020 2020 2020 2020 2020 2042 7920  .            By 
-00031fa0: 7365 7474 696e 6720 7468 6973 2074 6f20  setting this to 
-00031fb0: 5472 7565 2c20 6120 636f 7079 206f 6620  True, a copy of 
-00031fc0: 7468 6520 6172 7261 7920 6973 206d 6164  the array is mad
-00031fd0: 6520 746f 2065 6e73 7572 6520 6974 2069  e to ensure it i
-00031fe0: 7320 7772 6974 6162 6c65 2e0d 0a20 2020  s writable...   
-00031ff0: 2020 2020 2061 7574 6f5f 7769 6465 6e20       auto_widen 
-00032000: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
-00032010: 2c20 6465 6661 756c 7420 746f 2046 616c  , default to Fal
-00032020: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-00032030: 5768 656e 2046 616c 7365 2028 7468 6520  When False (the 
-00032040: 6465 6661 756c 7429 2c20 6966 2061 6e20  default), if an 
-00032050: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
-00032060: 6169 6e73 2061 2076 616c 7565 2077 6869  ains a value whi
-00032070: 6368 2077 6f75 6c64 2062 6520 636f 6e73  ch would be cons
-00032080: 6964 6572 6564 0d0a 2020 2020 2020 2020  idered..        
-00032090: 2020 2020 7468 6520 2769 6e76 616c 6964      the 'invalid
-000320a0: 272f 4e41 2076 616c 7565 2066 6f72 2074  '/NA value for t
-000320b0: 6865 2065 7175 6976 616c 656e 7420 6474  he equivalent dt
-000320c0: 7970 6520 696e 2061 2060 4661 7374 4172  ype in a `FastAr
-000320d0: 7261 7960 2c20 7261 6973 6520 616e 2065  ray`, raise an e
-000320e0: 7863 6570 7469 6f6e 0d0a 2020 2020 2020  xception..      
-000320f0: 2020 2020 2020 6265 6361 7573 6520 6469        because di
-00032100: 7265 6374 2063 6f6e 7665 7273 696f 6e20  rect conversion 
-00032110: 776f 756c 6420 6265 206c 6f73 7379 202f  would be lossy /
-00032120: 2063 6861 6e67 6520 7468 6520 7365 6d61   change the sema
-00032130: 6e74 6963 206d 6561 6e69 6e67 206f 6620  ntic meaning of 
-00032140: 7468 6520 6461 7461 2e0d 0a20 2020 2020  the data...     
-00032150: 2020 2020 2020 2057 6865 6e20 5472 7565         When True
-00032160: 2c20 7468 6520 636f 6e76 6572 7465 6420  , the converted 
-00032170: 6172 7261 7920 7769 6c6c 2062 6520 7769  array will be wi
-00032180: 6465 6e65 6420 2869 6620 706f 7373 6962  dened (if possib
-00032190: 6c65 2920 746f 2074 6865 206e 6578 742d  le) to the next-
-000321a0: 6c61 7267 6573 7420 6474 7970 650d 0a20  largest dtype.. 
-000321b0: 2020 2020 2020 2020 2020 2074 6f20 656e             to en
-000321c0: 7375 7265 2074 6865 2064 6174 6120 7769  sure the data wi
-000321d0: 6c6c 2062 6520 696e 7465 7270 7265 7465  ll be interprete
-000321e0: 6420 696e 2074 6865 2073 616d 6520 7761  d in the same wa
-000321f0: 792e 0d0a 0d0a 2020 2020 2020 2020 5265  y.....        Re
-00032200: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-00032210: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00032220: 4661 7374 4172 7261 790d 0a20 2020 2020  FastArray..     
-00032230: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00032240: 696d 706f 7274 2070 7961 7272 6f77 2061  import pyarrow a
-00032250: 7320 7061 0d0a 2020 2020 2020 2020 696d  s pa..        im
-00032260: 706f 7274 2070 7961 7272 6f77 2e63 6f6d  port pyarrow.com
-00032270: 7075 7465 2061 7320 7063 0d0a 2020 2020  pute as pc..    
-00032280: 2020 2020 696d 706f 7274 2070 7961 7272      import pyarr
-00032290: 6f77 2e74 7970 6573 2061 7320 7061 740d  ow.types as pat.
-000322a0: 0a0d 0a20 2020 2020 2020 2023 204d 616b  ...        # Mak
-000322b0: 6520 7375 7265 2074 6865 2069 6e70 7574  e sure the input
-000322c0: 2061 7272 6179 2069 7320 6f6e 6520 6f66   array is one of
-000322d0: 2074 6865 2070 7961 7272 6f77 2061 7272   the pyarrow arr
-000322e0: 6179 2074 7970 6573 2e0d 0a20 2020 2020  ay types...     
-000322f0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00032300: 616e 6365 2861 7272 2c20 2870 612e 4172  ance(arr, (pa.Ar
-00032310: 7261 792c 2070 612e 4368 756e 6b65 6441  ray, pa.ChunkedA
-00032320: 7272 6179 2929 3a0d 0a20 2020 2020 2020  rray)):..       
-00032330: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
-00032340: 7272 6f72 2822 5468 6520 6172 7261 7920  rror("The array 
-00032350: 6973 206e 6f74 2061 6e20 696e 7374 616e  is not an instan
-00032360: 6365 206f 6620 6070 7961 7272 6f77 2e41  ce of `pyarrow.A
-00032370: 7272 6179 6020 6f72 2060 7079 6172 726f  rray` or `pyarro
-00032380: 772e 4368 756e 6b65 6441 7272 6179 602e  w.ChunkedArray`.
-00032390: 2229 0d0a 0d0a 2020 2020 2020 2020 2320  ")....        # 
-000323a0: 4368 756e 6b65 6441 7272 6179 7320 6e65  ChunkedArrays ne
-000323b0: 6564 2073 7065 6369 616c 2068 616e 646c  ed special handl
-000323c0: 696e 672e 0d0a 2020 2020 2020 2020 6966  ing...        if
-000323d0: 2069 7369 6e73 7461 6e63 6528 6172 722c   isinstance(arr,
-000323e0: 2070 612e 4368 756e 6b65 6441 7272 6179   pa.ChunkedArray
-000323f0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00032400: 2320 4120 7369 6e67 6c65 2d63 6875 6e6b  # A single-chunk
-00032410: 2043 6875 6e6b 6564 4172 7261 7920 6361   ChunkedArray ca
-00032420: 6e20 6265 2068 616e 646c 6564 2062 7920  n be handled by 
-00032430: 6a75 7374 2065 7874 7261 6374 696e 6720  just extracting 
-00032440: 7468 6174 2063 6875 6e6b 0d0a 2020 2020  that chunk..    
-00032450: 2020 2020 2020 2020 2320 616e 6420 7265          # and re
-00032460: 6375 7273 6976 656c 7920 7072 6f63 6573  cursively proces
-00032470: 7369 6e67 2069 742e 0d0a 2020 2020 2020  sing it...      
-00032480: 2020 2020 2020 6966 2061 7272 2e6e 756d        if arr.num
-00032490: 5f63 6875 6e6b 7320 3d3d 2031 3a0d 0a20  _chunks == 1:.. 
-000324a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000324b0: 6574 7572 6e20 4661 7374 4172 7261 792e  eturn FastArray.
-000324c0: 5f66 726f 6d5f 6172 726f 7728 0d0a 2020  _from_arrow(..  
-000324d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000324e0: 2020 6172 722e 6368 756e 6b28 3029 2c20    arr.chunk(0), 
-000324f0: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
-00032500: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
-00032510: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
-00032520: 2c20 6175 746f 5f77 6964 656e 3d61 7574  , auto_widen=aut
-00032530: 6f5f 7769 6465 6e0d 0a20 2020 2020 2020  o_widen..       
-00032540: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00032550: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00032560: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00032570: 2054 4f44 4f3a 2042 656e 6368 6d61 726b   TODO: Benchmark
-00032580: 2074 6869 7320 7673 2e20 7573 696e 6720   this vs. using 
-00032590: 4368 756e 6b65 6441 7272 6179 2e63 6f6d  ChunkedArray.com
-000325a0: 6269 6e65 5f63 6875 6e6b 7328 2920 7468  bine_chunks() th
-000325b0: 656e 2063 6f6e 7665 7274 696e 672e 0d0a  en converting...
-000325c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000325d0: 2320 544f 444f 3a20 4c6f 6f6b 2061 7420  # TODO: Look at 
-000325e0: 607a 6572 6f5f 636f 7079 5f6f 6e6c 7960  `zero_copy_only`
-000325f0: 2061 6e64 2060 7772 6974 6162 6c65 6020   and `writable` 
-00032600: 2d2d 2074 6865 2063 6f6e 7665 7274 6564  -- the converted
-00032610: 2061 7272 6179 7320 636f 756c 6420 6265   arrays could be
-00032620: 2064 6573 7472 6f79 6564 2077 6869 6c65   destroyed while
-00032630: 2068 7374 6163 6b69 6e67 0d0a 2020 2020   hstacking..    
-00032640: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00032650: 2020 2020 7369 6e63 6520 7765 206b 6e6f      since we kno
-00032660: 7720 7468 6579 276c 6c20 6861 7665 206a  w they'll have j
-00032670: 7573 7420 6265 656e 2063 7265 6174 6564  ust been created
-00032680: 3b20 7468 6973 2063 6f75 6c64 2072 6564  ; this could red
-00032690: 7563 6520 7065 616b 206d 656d 6f72 7920  uce peak memory 
-000326a0: 7574 696c 697a 6174 696f 6e2e 0d0a 2020  utilization...  
-000326b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000326c0: 7475 726e 2068 7374 6163 6b28 0d0a 2020  turn hstack(..  
-000326d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000326e0: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
-000326f0: 2020 2020 2020 2020 2020 2020 2046 6173               Fas
-00032700: 7441 7272 6179 2e5f 6672 6f6d 5f61 7272  tArray._from_arr
-00032710: 6f77 280d 0a20 2020 2020 2020 2020 2020  ow(..           
-00032720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032730: 2061 7272 5f63 6875 6e6b 2c20 7a65 726f   arr_chunk, zero
-00032740: 5f63 6f70 795f 6f6e 6c79 3d7a 6572 6f5f  _copy_only=zero_
-00032750: 636f 7079 5f6f 6e6c 792c 2077 7269 7461  copy_only, writa
-00032760: 626c 653d 7772 6974 6162 6c65 2c20 6175  ble=writable, au
-00032770: 746f 5f77 6964 656e 3d61 7574 6f5f 7769  to_widen=auto_wi
-00032780: 6465 6e0d 0a20 2020 2020 2020 2020 2020  den..           
-00032790: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-000327a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000327b0: 2020 2020 2020 2020 666f 7220 6172 725f          for arr_
-000327c0: 6368 756e 6b20 696e 2061 7272 2e69 7465  chunk in arr.ite
-000327d0: 7263 6875 6e6b 7328 290d 0a20 2020 2020  rchunks()..     
-000327e0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-000327f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00032800: 2020 290d 0a0d 0a20 2020 2020 2020 2023    )....        #
-00032810: 2048 616e 646c 6520 6261 7365 6420 6f6e   Handle based on
-00032820: 2074 6865 2074 7970 6520 6f66 2074 6865   the type of the
-00032830: 2069 6e70 7574 2061 7272 6179 2e0d 0a20   input array... 
-00032840: 2020 2020 2020 2069 6620 7061 742e 6973         if pat.is
-00032850: 5f69 6e74 6567 6572 2861 7272 2e74 7970  _integer(arr.typ
-00032860: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00032870: 2023 2046 6f72 2061 7272 6179 7320 6f66   # For arrays of
-00032880: 2070 7269 6d69 7469 7665 2074 7970 6573   primitive types
-00032890: 2c20 7061 2e44 6174 6154 7970 652e 746f  , pa.DataType.to
-000328a0: 5f70 616e 6461 735f 6474 7970 6528 2920  _pandas_dtype() 
-000328b0: 6163 7475 616c 6c79 2072 6574 7572 6e73  actually returns
-000328c0: 2074 6865 2065 7175 6976 616c 656e 7420   the equivalent 
-000328d0: 6e75 6d70 7920 6474 7970 652e 0d0a 2020  numpy dtype...  
-000328e0: 2020 2020 2020 2020 2020 6172 725f 6474            arr_dt
-000328f0: 7970 6520 3d20 6172 722e 7479 7065 2e74  ype = arr.type.t
-00032900: 6f5f 7061 6e64 6173 5f64 7479 7065 2829  o_pandas_dtype()
-00032910: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00032920: 2320 4765 7420 7468 6520 7269 7074 6162  # Get the riptab
-00032930: 6c65 2069 6e76 616c 6964 2076 616c 7565  le invalid value
-00032940: 2066 6f72 2074 6869 7320 6172 7261 7920   for this array 
-00032950: 7479 7065 2e0d 0a20 2020 2020 2020 2020  type...         
-00032960: 2020 2061 7272 5f72 745f 696e 7620 3d20     arr_rt_inv = 
-00032970: 494e 5641 4c49 445f 4449 4354 5b6e 702e  INVALID_DICT[np.
-00032980: 6474 7970 6528 6172 725f 6474 7970 6529  dtype(arr_dtype)
-00032990: 2e6e 756d 5d0d 0a0d 0a20 2020 2020 2020  .num]....       
-000329a0: 2020 2020 2023 2047 6574 206d 696e 2061       # Get min a
-000329b0: 6e64 206d 6178 2076 616c 7565 206f 6620  nd max value of 
-000329c0: 7468 6520 696e 7075 7420 6172 7261 792c  the input array,
-000329d0: 2073 6f20 7765 206b 6e6f 7720 6966 2077   so we know if w
-000329e0: 6520 6e65 6564 2074 6f20 7072 6f6d 6f74  e need to promot
-000329f0: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
-00032a00: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
-00032a10: 6765 7374 2064 7479 7065 2074 6f20 6265  gest dtype to be
-00032a20: 2061 626c 6520 746f 2063 6f72 7265 6374   able to correct
-00032a30: 6c79 2072 6570 7265 7365 6e74 206e 756c  ly represent nul
-00032a40: 6c73 2e0d 0a20 2020 2020 2020 2020 2020  ls...           
-00032a50: 2023 2054 6869 7320 6d75 7374 2062 6520   # This must be 
-00032a60: 646f 6e65 2065 7665 6e20 6966 2074 6865  done even if the
-00032a70: 2069 6e70 7574 2061 7272 6179 2068 6173   input array has
-00032a80: 206e 6f20 6e75 6c6c 732c 2062 6563 6175   no nulls, becau
-00032a90: 7365 206f 7468 6572 7769 7365 2074 6865  se otherwise the
-00032aa0: 206e 6f6e 2d6e 756c 6c0d 0a20 2020 2020   non-null..     
-00032ab0: 2020 2020 2020 2023 2076 616c 7565 7320         # values 
-00032ac0: 696e 2074 6865 2069 6e70 7574 2063 6f72  in the input cor
-00032ad0: 7265 7370 6f6e 6469 6e67 2074 6f20 7269  responding to ri
-00032ae0: 7074 6162 6c65 2069 6e74 6567 6572 2069  ptable integer i
-00032af0: 6e76 616c 6964 7320 776f 756c 6420 7468  nvalids would th
-00032b00: 656e 2062 6520 7265 636f 676e 697a 6564  en be recognized
-00032b10: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00032b20: 6173 2073 7563 6820 6166 7465 7220 636f  as such after co
-00032b30: 6e76 6572 7369 6f6e 2e0d 0a20 2020 2020  nversion...     
-00032b40: 2020 2020 2020 206d 696e 5f6d 6178 5f72         min_max_r
-00032b50: 6573 756c 743a 2070 612e 5374 7275 6374  esult: pa.Struct
-00032b60: 5363 616c 6172 203d 2070 632e 6d69 6e5f  Scalar = pc.min_
-00032b70: 6d61 7828 6172 7229 0d0a 2020 2020 2020  max(arr)..      
-00032b80: 2020 2020 2020 6d69 6e5f 7661 6c75 6520        min_value 
-00032b90: 3d20 6d69 6e5f 6d61 785f 7265 7375 6c74  = min_max_result
-00032ba0: 5b22 6d69 6e22 5d0d 0a20 2020 2020 2020  ["min"]..       
-00032bb0: 2020 2020 206d 6178 5f76 616c 7565 203d       max_value =
-00032bc0: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
-00032bd0: 226d 6178 225d 0d0a 0d0a 2020 2020 2020  "max"]....      
-00032be0: 2020 2020 2020 6172 725f 7061 5f64 7479        arr_pa_dty
-00032bf0: 7065 5f77 6964 656e 6564 3a20 4f70 7469  pe_widened: Opti
-00032c00: 6f6e 616c 5b70 612e 4461 7461 5479 7065  onal[pa.DataType
-00032c10: 5d20 3d20 4e6f 6e65 0d0a 2020 2020 2020  ] = None..      
-00032c20: 2020 2020 2020 6966 206d 696e 5f76 616c        if min_val
-00032c30: 7565 203d 3d20 6172 725f 7274 5f69 6e76  ue == arr_rt_inv
-00032c40: 206f 7220 6d61 785f 7661 6c75 6520 3d3d   or max_value ==
-00032c50: 2061 7272 5f72 745f 696e 763a 0d0a 2020   arr_rt_inv:..  
-00032c60: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00032c70: 4966 2074 6865 2069 6e70 7574 2061 7272  If the input arr
-00032c80: 6179 2068 6f6c 6473 2036 342d 6269 7420  ay holds 64-bit 
-00032c90: 696e 7465 6765 7273 2028 7369 676e 6564  integers (signed
-00032ca0: 206f 7220 756e 7369 676e 6564 292c 2077   or unsigned), w
-00032cb0: 6520 6361 6e27 7420 646f 2061 206c 6f73  e can't do a los
-00032cc0: 736c 6573 7320 636f 6e76 6572 7369 6f6e  sless conversion
-00032cd0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00032ce0: 2020 2023 2073 696e 6365 2074 6865 7265     # since there
-00032cf0: 2069 7320 6e6f 2077 6964 6572 2069 6e74   is no wider int
-00032d00: 6567 6572 2061 7661 696c 6162 6c65 2e0d  eger available..
-00032d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032d20: 2069 6620 7a65 726f 5f63 6f70 795f 6f6e   if zero_copy_on
-00032d30: 6c79 3a0d 0a20 2020 2020 2020 2020 2020  ly:..           
-00032d40: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00032d50: 616c 7565 4572 726f 7228 0d0a 2020 2020  alueError(..    
-00032d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032d70: 2020 2020 2243 616e 6e6f 7420 7065 7266      "Cannot perf
-00032d80: 6f72 6d20 6120 7a65 726f 2d63 6f70 7920  orm a zero-copy 
-00032d90: 636f 6e76 6572 7369 6f6e 206f 6620 616e  conversion of an
-00032da0: 2061 7272 6f77 2061 7272 6179 2063 6f6e   arrow array con
-00032db0: 7461 696e 696e 6720 7468 6520 7269 7074  taining the ript
-00032dc0: 6162 6c65 2069 6e76 616c 6964 2076 616c  able invalid val
-00032dd0: 7565 2066 6f72 2074 6865 2061 7272 6179  ue for the array
-00032de0: 2064 7479 7065 2e22 0d0a 2020 2020 2020   dtype."..      
-00032df0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00032e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032e10: 2065 6c69 6620 6172 725f 6474 7970 652e   elif arr_dtype.
-00032e20: 6974 656d 7369 7a65 203d 3d20 383a 0d0a  itemsize == 8:..
-00032e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032e40: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00032e50: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-00032e60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00032e70: 4361 6e6e 6f74 206c 6f73 736c 6573 736c  Cannot losslessl
-00032e80: 7920 636f 6e76 6572 7420 616e 2061 7272  y convert an arr
-00032e90: 6f77 2061 7272 6179 206f 6620 2875 2969  ow array of (u)i
-00032ea0: 6e74 3634 2063 6f6e 7461 696e 696e 6720  nt64 containing 
-00032eb0: 7468 6520 7269 7074 6162 6c65 2069 6e76  the riptable inv
-00032ec0: 616c 6964 2076 616c 7565 2074 6f20 6120  alid value to a 
-00032ed0: 7269 7074 6162 6c65 2061 7272 6179 2e22  riptable array."
-00032ee0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00032ef0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00032f00: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
-00032f10: 7420 6175 746f 5f77 6964 656e 3a0d 0a20  t auto_widen:.. 
-00032f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032f30: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00032f40: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
-00032f50: 2020 2020 2020 2020 2020 2020 2020 2249                "I
-00032f60: 6e70 7574 2061 7272 6179 2072 6571 7569  nput array requi
-00032f70: 7265 7320 7769 6465 6e69 6e67 2066 6f72  res widening for
-00032f80: 206c 6f73 736c 6573 7320 636f 6e76 6572   lossless conver
-00032f90: 7369 6f6e 2e20 5370 6563 6966 7920 6175  sion. Specify au
-00032fa0: 746f 5f77 6964 656e 3d54 7275 6520 6966  to_widen=True if
-00032fb0: 2079 6f75 2077 616e 7420 746f 2061 6c6c   you want to all
-00032fc0: 6f77 2074 6865 2077 6964 656e 696e 6720  ow the widening 
-00032fd0: 636f 6e76 6572 7369 6f6e 2028 7768 6963  conversion (whic
-00032fe0: 6820 7265 7175 6972 6573 2061 6e20 6172  h requires an ar
-00032ff0: 7261 7920 636f 7079 292e 220d 0a20 2020  ray copy)."..   
-00033000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033010: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00033020: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00033030: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00033040: 2057 6964 656e 2074 6865 2064 7479 7065   Widen the dtype
-00033050: 206f 6620 7468 6520 6f75 7470 7574 2061   of the output a
-00033060: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
-00033070: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
-00033080: 745f 6474 7970 6520 3d20 6e70 2e6d 696e  t_dtype = np.min
-00033090: 5f73 6361 6c61 725f 7479 7065 2832 202a  _scalar_type(2 *
-000330a0: 2061 7272 5f72 745f 696e 7629 0d0a 2020   arr_rt_inv)..  
-000330b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000330c0: 2020 6172 725f 7061 5f64 7479 7065 5f77    arr_pa_dtype_w
-000330d0: 6964 656e 6564 203d 2070 612e 6672 6f6d  idened = pa.from
-000330e0: 5f6e 756d 7079 5f64 7479 7065 286f 7574  _numpy_dtype(out
-000330f0: 7075 745f 6474 7970 6529 0d0a 0d0a 2020  put_dtype)....  
-00033100: 2020 2020 2020 2020 2020 2320 4372 6561            # Crea
-00033110: 7465 2074 6865 206f 7574 7075 7420 6172  te the output ar
-00033120: 7261 792c 2070 6572 666f 726d 696e 6720  ray, performing 
-00033130: 6120 7769 6465 6e69 6e67 2063 6f6e 7665  a widening conve
-00033140: 7273 696f 6e20 2b20 6669 6c6c 696e 6720  rsion + filling 
-00033150: 696e 206e 756c 6c73 2077 6974 6820 7468  in nulls with th
-00033160: 6520 7269 7074 6162 6c65 2069 6e76 616c  e riptable inval
-00033170: 6964 2069 6620 6e65 6365 7373 6172 792e  id if necessary.
-00033180: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00033190: 544f 444f 3a20 5468 6973 2063 6f75 6c64  TODO: This could
-000331a0: 2062 6520 6661 7374 6572 202d 2d20 6966   be faster -- if
-000331b0: 2074 6865 7265 2773 2061 2077 6179 2074   there's a way t
-000331c0: 6f20 6765 7420 6120 6e75 6d70 7920 626f  o get a numpy bo
-000331d0: 6f6c 6561 6e20 6172 7261 7920 6672 6f6d  olean array from
-000331e0: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
-000331f0: 2773 206e 756c 6c2d 6d61 736b 2c0d 0a20  's null-mask,.. 
-00033200: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00033210: 2020 2077 6520 6361 6e20 636f 6e76 6572     we can conver
-00033220: 7420 6469 7265 6374 6c79 2074 6f20 6e75  t directly to nu
-00033230: 6d70 792f 7269 7074 6162 6c65 3b20 7468  mpy/riptable; th
-00033240: 656e 2c20 7769 6465 6e20 7468 6520 4661  en, widen the Fa
-00033250: 7374 4172 7261 7920 2877 6869 6368 276c  stArray (which'l
-00033260: 6c20 6265 2070 6172 616c 6c65 6c69 7a65  l be parallelize
-00033270: 6429 3b0d 0a20 2020 2020 2020 2020 2020  d);..           
-00033280: 2023 2020 2020 2020 2074 6865 6e20 7573   #       then us
-00033290: 6520 7274 2e63 6f70 795f 746f 2829 202f  e rt.copy_to() /
-000332a0: 2072 742e 7075 746d 6173 6b28 2920 746f   rt.putmask() to
-000332b0: 206f 7665 7277 7269 7465 2074 6865 2065   overwrite the e
-000332c0: 6c65 6d65 6e74 7320 6f66 2074 6865 2077  lements of the w
-000332d0: 6964 656e 6564 2046 6173 7441 7272 6179  idened FastArray
-000332e0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000332f0: 2020 2020 2020 636f 7272 6573 706f 6e64        correspond
-00033300: 696e 6720 746f 2074 6865 206e 756c 6c73  ing to the nulls
-00033310: 2066 726f 6d20 7468 6520 6d61 736b 2077   from the mask w
-00033320: 6974 6820 7468 6520 7269 7074 6162 6c65  ith the riptable
-00033330: 2069 6e76 616c 6964 2076 616c 7565 2066   invalid value f
-00033340: 6f72 2074 6865 206f 7574 7075 7420 6172  or the output ar
-00033350: 7261 7920 7479 7065 2e0d 0a20 2020 2020  ray type...     
-00033360: 2020 2020 2020 2069 6620 6172 725f 7061         if arr_pa
-00033370: 5f64 7479 7065 5f77 6964 656e 6564 2069  _dtype_widened i
-00033380: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00033390: 2020 2020 2020 2020 2020 2020 2061 7272               arr
-000333a0: 3a20 7061 2e41 7272 6179 203d 2061 7272  : pa.Array = arr
-000333b0: 2e63 6173 7428 6172 725f 7061 5f64 7479  .cast(arr_pa_dty
-000333c0: 7065 5f77 6964 656e 6564 290d 0a0d 0a20  pe_widened).... 
-000333d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000333e0: 6e20 6172 722e 6669 6c6c 5f6e 756c 6c28  n arr.fill_null(
-000333f0: 6172 725f 7274 5f69 6e76 292e 746f 5f6e  arr_rt_inv).to_n
-00033400: 756d 7079 287a 6572 6f5f 636f 7079 5f6f  umpy(zero_copy_o
-00033410: 6e6c 793d 4661 6c73 652c 2077 7269 7461  nly=False, writa
-00033420: 626c 653d 7772 6974 6162 6c65 292e 7669  ble=writable).vi
-00033430: 6577 2846 6173 7441 7272 6179 290d 0a0d  ew(FastArray)...
-00033440: 0a20 2020 2020 2020 2065 6c69 6620 7061  .        elif pa
-00033450: 742e 6973 5f66 6c6f 6174 696e 6728 6172  t.is_floating(ar
-00033460: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
-00033470: 2020 2020 2020 2320 466c 6f61 7469 6e67        # Floating
-00033480: 2d70 6f69 6e74 2061 7272 6179 7320 6361  -point arrays ca
-00033490: 6e20 6265 2063 6f6e 7665 7274 6564 2064  n be converted d
-000334a0: 6972 6563 746c 7920 746f 206e 756d 7079  irectly to numpy
-000334b0: 2c20 7369 6e63 6520 7079 6172 726f 7720  , since pyarrow 
-000334c0: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
-000334d0: 6c79 0d0a 2020 2020 2020 2020 2020 2020  ly..            
-000334e0: 2320 6669 6c6c 206e 756c 6c20 7661 6c75  # fill null valu
-000334f0: 6573 2077 6974 6820 4e61 4e2e 0d0a 2020  es with NaN...  
-00033500: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00033510: 2061 7272 2e74 6f5f 6e75 6d70 7928 7a65   arr.to_numpy(ze
-00033520: 726f 5f63 6f70 795f 6f6e 6c79 3d7a 6572  ro_copy_only=zer
-00033530: 6f5f 636f 7079 5f6f 6e6c 792c 2077 7269  o_copy_only, wri
-00033540: 7461 626c 653d 7772 6974 6162 6c65 292e  table=writable).
-00033550: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
-00033560: 0a0d 0a20 2020 2020 2020 2065 6c69 6620  ...        elif 
-00033570: 7061 742e 6973 5f62 6f6f 6c65 616e 2861  pat.is_boolean(a
-00033580: 7272 2e74 7970 6529 3a0d 0a20 2020 2020  rr.type):..     
-00033590: 2020 2020 2020 2023 2042 6f6f 6c65 616e         # Boolean
-000335a0: 2061 7272 6179 7320 6361 6e20 6f6e 6c79   arrays can only
-000335b0: 2062 6520 636f 6e76 6572 7465 6420 7768   be converted wh
-000335c0: 656e 2074 6865 7920 646f 206e 6f74 2063  en they do not c
-000335d0: 6f6e 7461 696e 206e 756c 6c73 2e0d 0a20  ontain nulls... 
-000335e0: 2020 2020 2020 2020 2020 2023 2072 6970             # rip
-000335f0: 7461 626c 6520 646f 6573 206e 6f74 2073  table does not s
-00033600: 7570 706f 7274 2061 6e20 2769 6e76 616c  upport an 'inval
-00033610: 6964 272f 4e41 2076 616c 7565 2066 6f72  id'/NA value for
-00033620: 2062 6f6f 6c65 616e 2c20 736f 2070 7961   boolean, so pya
-00033630: 7272 6f77 2061 7272 6179 730d 0a20 2020  rrow arrays..   
-00033640: 2020 2020 2020 2020 2023 2077 6974 6820           # with 
-00033650: 6e75 6c6c 7320 6361 6e27 7420 6265 2072  nulls can't be r
-00033660: 6570 7265 7365 6e74 6564 2069 6e20 7269  epresented in ri
-00033670: 7074 6162 6c65 2e0d 0a20 2020 2020 2020  ptable...       
-00033680: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
-00033690: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
-000336a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000336b0: 7475 726e 2061 7272 2e74 6f5f 6e75 6d70  turn arr.to_nump
-000336c0: 7928 7a65 726f 5f63 6f70 795f 6f6e 6c79  y(zero_copy_only
-000336d0: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
-000336e0: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
-000336f0: 6c65 292e 7669 6577 2846 6173 7441 7272  le).view(FastArr
-00033700: 6179 290d 0a20 2020 2020 2020 2020 2020  ay)..           
-00033710: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00033720: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00033730: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
-00033740: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00033750: 7269 7074 6162 6c65 2062 6f6f 6c65 616e  riptable boolean
-00033760: 2061 7272 6179 7320 646f 206e 6f74 2073   arrays do not s
-00033770: 7570 706f 7274 2061 6e20 696e 7661 6c69  upport an invali
-00033780: 6420 7661 6c75 652c 2073 6f20 7468 6579  d value, so they
-00033790: 2063 616e 6e6f 7420 6265 2063 7265 6174   cannot be creat
-000337a0: 6564 2066 726f 6d20 7079 6172 726f 7720  ed from pyarrow 
-000337b0: 6172 7261 7973 2063 6f6e 7461 696e 696e  arrays containin
-000337c0: 6720 6e75 6c6c 732e 220d 0a20 2020 2020  g nulls."..     
-000337d0: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-000337e0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
-000337f0: 2e69 735f 7374 7269 6e67 2861 7272 2e74  .is_string(arr.t
-00033800: 7970 6529 206f 7220 7061 742e 6973 5f6c  ype) or pat.is_l
-00033810: 6172 6765 5f73 7472 696e 6728 6172 722e  arge_string(arr.
-00033820: 7479 7065 293a 0d0a 2020 2020 2020 2020  type):..        
-00033830: 2020 2020 2320 7079 6172 726f 7720 7661      # pyarrow va
-00033840: 7269 6162 6c65 2d6c 656e 6774 6820 7374  riable-length st
-00033850: 7269 6e67 2061 7272 6179 7320 6361 6e20  ring arrays can 
-00033860: 5f6e 6576 6572 5f20 6265 207a 6572 6f2d  _never_ be zero-
-00033870: 636f 7079 2063 6f6e 7665 7274 6564 2074  copy converted t
-00033880: 6f20 6669 7865 642d 6c65 6e67 7468 206e  o fixed-length n
-00033890: 756d 7079 2f72 6970 7461 626c 6520 6172  umpy/riptable ar
-000338a0: 7261 7973 0d0a 2020 2020 2020 2020 2020  rays..          
-000338b0: 2020 2320 6265 6361 7573 6520 6f66 2064    # because of d
-000338c0: 6966 6665 7265 6e63 6573 2069 6e20 7468  ifferences in th
-000338d0: 6520 6d65 6d6f 7279 206c 6179 6f75 742e  e memory layout.
-000338e0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000338f0: 207a 6572 6f5f 636f 7079 5f6f 6e6c 793a   zero_copy_only:
-00033900: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00033910: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00033920: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00033930: 2020 2020 2020 2020 2022 7079 6172 726f           "pyarro
-00033940: 7720 7661 7269 6162 6c65 2d6c 656e 6774  w variable-lengt
-00033950: 6820 7374 7269 6e67 2061 7272 6179 7320  h string arrays 
-00033960: 6361 6e6e 6f74 2062 6520 7a65 726f 2d63  cannot be zero-c
-00033970: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
-00033980: 2072 6970 7461 626c 6520 6172 7261 7973   riptable arrays
-00033990: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
-000339a0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-000339b0: 2020 2020 2023 2043 6865 636b 2066 6f72       # Check for
-000339c0: 2077 6865 7468 6572 2074 6865 2061 7272   whether the arr
-000339d0: 6179 2063 6f6e 7461 696e 7320 6f6e 6c79  ay contains only
-000339e0: 2041 5343 4949 2073 7472 696e 6773 2e0d   ASCII strings..
-000339f0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00033a00: 6869 7320 6973 2075 7365 6420 746f 2067  his is used to g
-00033a10: 7569 6465 2068 6f77 2074 6865 2046 6173  uide how the Fas
-00033a20: 7441 7272 6179 2069 7320 6372 6561 7465  tArray is create
-00033a30: 642e 0d0a 2020 2020 2020 2020 2020 2020  d...            
-00033a40: 6861 735f 756e 6963 6f64 6520 3d20 6e6f  has_unicode = no
-00033a50: 7420 7063 2e61 6c6c 2870 632e 7374 7269  t pc.all(pc.stri
-00033a60: 6e67 5f69 735f 6173 6369 6928 6172 7229  ng_is_ascii(arr)
-00033a70: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00033a80: 2023 2043 6f6e 7665 7274 2074 6865 2061   # Convert the a
-00033a90: 7272 6179 2074 6f20 6120 6e75 6d70 7920  rray to a numpy 
-00033aa0: 6172 7261 792e 0d0a 2020 2020 2020 2020  array...        
-00033ab0: 2020 2020 2320 556e 666f 7274 756e 6174      # Unfortunat
-00033ac0: 656c 792c 2061 7320 6f66 2070 7961 7272  ely, as of pyarr
-00033ad0: 6f77 2034 2e30 2c20 7468 6973 2063 6f6e  ow 4.0, this con
-00033ae0: 7665 7273 696f 6e20 616c 7761 7973 2070  version always p
-00033af0: 726f 6475 6365 7320 6120 6e75 6d70 7920  roduces a numpy 
-00033b00: 6f62 6a65 6374 2061 7272 6179 2063 6f6e  object array con
-00033b10: 7461 696e 696e 6720 7468 650d 0a20 2020  taining the..   
-00033b20: 2020 2020 2020 2020 2023 2073 7472 696e           # strin
-00033b30: 6773 2028 6173 2050 7974 686f 6e20 7374  gs (as Python st
-00033b40: 7269 6e67 7329 2072 6174 6865 7220 7468  rings) rather th
-00033b50: 616e 2061 206e 756d 7079 2073 7472 696e  an a numpy strin
-00033b60: 6720 6172 7261 792e 0d0a 2020 2020 2020  g array...      
-00033b70: 2020 2020 2020 2320 5765 2772 6520 6162        # We're ab
-00033b80: 6c65 2074 6f20 6861 6e64 6c65 2074 6869  le to handle thi
-00033b90: 7320 746f 2072 6574 7572 6e20 7468 6520  s to return the 
-00033ba0: 7365 6e73 6962 6c65 2074 6869 6e67 2066  sensible thing f
-00033bb0: 6f72 2072 6970 7461 626c 6520 7573 6572  or riptable user
-00033bc0: 732c 2062 7574 2069 7420 646f 6573 206d  s, but it does m
-00033bd0: 6561 6e20 7468 6973 2063 6f6e 7665 7273  ean this convers
-00033be0: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
-00033bf0: 2023 2069 7320 736c 6f77 6572 2074 6861   # is slower tha
-00033c00: 6e20 6e65 6365 7373 6172 7920 7269 6768  n necessary righ
-00033c10: 7420 6e6f 772e 0d0a 2020 2020 2020 2020  t now...        
-00033c20: 2020 2020 2320 544f 444f 3a20 4173 6b20      # TODO: Ask 
-00033c30: 7079 6172 726f 772d 6465 7620 6162 6f75  pyarrow-dev abou
-00033c40: 7420 696d 706c 656d 656e 7469 6e67 2061  t implementing a
-00033c50: 6e20 6f70 7469 6f6e 2074 6f20 7265 7475  n option to retu
-00033c60: 726e 2061 206e 756d 7079 2027 5327 206f  rn a numpy 'S' o
-00033c70: 7220 2755 2720 6172 7261 7920 696e 7374  r 'U' array inst
-00033c80: 6561 642c 2069 7427 6c6c 2062 650d 0a20  ead, it'll be.. 
-00033c90: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00033ca0: 2020 206d 7563 6820 6d6f 7265 2065 6666     much more eff
-00033cb0: 6963 6965 6e74 2c20 6576 656e 2074 686f  icient, even tho
-00033cc0: 7567 6820 736f 6d65 2073 7061 6365 2077  ugh some space w
-00033cd0: 696c 6c20 6265 2077 6173 7465 6420 6475  ill be wasted du
-00033ce0: 6520 746f 206e 756d 7079 206e 6f74 2073  e to numpy not s
-00033cf0: 7570 706f 7274 696e 6720 7661 7269 6162  upporting variab
-00033d00: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
-00033d10: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
-00033d20: 2320 544f 444f 3a20 436f 6e73 6964 6572  # TODO: Consider
-00033d30: 2063 6f6e 7665 7274 696e 6720 7468 6520   converting the 
-00033d40: 7079 6172 726f 7720 6172 7261 7920 746f  pyarrow array to
-00033d50: 2061 2064 6963 7469 6f6e 6172 792d 656e   a dictionary-en
-00033d60: 636f 6465 6420 6172 7261 7920 2d2d 2069  coded array -- i
-00033d70: 6620 7468 6572 6520 6172 6520 6f6e 6c79  f there are only
-00033d80: 2061 2066 6577 2075 6e69 7175 6573 2c0d   a few uniques,.
-00033d90: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00033da0: 2020 2020 2069 7427 6c6c 2062 6520 6d6f       it'll be mo
-00033db0: 7265 2065 6666 6963 6965 6e74 2028 6576  re efficient (ev
-00033dc0: 656e 2074 686f 7567 6820 646f 696e 6720  en though doing 
-00033dd0: 6d6f 7265 2077 6f72 6b29 2062 7920 6176  more work) by av
-00033de0: 6f69 6469 6e67 2072 6570 6574 6974 6976  oiding repetitiv
-00033df0: 6520 6372 6561 7469 6f6e 206f 6620 7468  e creation of th
-00033e00: 6520 5079 7468 6f6e 2073 7472 696e 6720  e Python string 
-00033e10: 6f62 6a65 6374 732e 0d0a 2020 2020 2020  objects...      
-00033e20: 2020 2020 2020 6966 2061 7272 2e6e 756c        if arr.nul
-00033e30: 6c5f 636f 756e 7420 3d3d 2030 3a0d 0a20  l_count == 0:.. 
-00033e40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00033e50: 6d70 203d 2061 7272 2e74 6f5f 6e75 6d70  mp = arr.to_nump
-00033e60: 7928 7a65 726f 5f63 6f70 795f 6f6e 6c79  y(zero_copy_only
-00033e70: 3d46 616c 7365 2c20 7772 6974 6162 6c65  =False, writable
-00033e80: 3d77 7269 7461 626c 6529 0d0a 0d0a 2020  =writable)....  
-00033e90: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00033ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033eb0: 2023 204e 6565 6420 746f 2066 696c 6c20   # Need to fill 
-00033ec0: 6e75 6c6c 7320 7769 7468 2061 6e20 656d  nulls with an em
-00033ed0: 7074 7920 7374 7269 6e67 2062 6566 6f72  pty string befor
-00033ee0: 6520 636f 6e76 6572 7469 6e67 2074 6f20  e converting to 
-00033ef0: 6e75 6d70 792e 0d0a 2020 2020 2020 2020  numpy...        
-00033f00: 2020 2020 2020 2020 2320 2849 4e56 414c          # (INVAL
-00033f10: 4944 5f44 4943 545b 6e70 2e64 7479 7065  ID_DICT[np.dtype
-00033f20: 2827 5527 292e 6e75 6d5d 203d 3d20 2727  ('U').num] == ''
-00033f30: 292e 0d0a 2020 2020 2020 2020 2020 2020  )...            
-00033f40: 2020 2020 746d 7020 3d20 6172 722e 6669      tmp = arr.fi
-00033f50: 6c6c 5f6e 756c 6c28 2222 292e 746f 5f6e  ll_null("").to_n
-00033f60: 756d 7079 287a 6572 6f5f 636f 7079 5f6f  umpy(zero_copy_o
-00033f70: 6e6c 793d 4661 6c73 652c 2077 7269 7461  nly=False, writa
-00033f80: 626c 653d 7772 6974 6162 6c65 290d 0a0d  ble=writable)...
-00033f90: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00033fa0: 756c 7420 3d20 4661 7374 4172 7261 7928  ult = FastArray(
-00033fb0: 746d 702c 2064 7479 7065 3d73 7472 2c20  tmp, dtype=str, 
-00033fc0: 756e 6963 6f64 653d 6861 735f 756e 6963  unicode=has_unic
-00033fd0: 6f64 6529 0d0a 2020 2020 2020 2020 2020  ode)..          
-00033fe0: 2020 6966 206e 6f74 2077 7269 7461 626c    if not writabl
-00033ff0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00034000: 2020 2020 7265 7375 6c74 2e66 6c61 6773      result.flags
-00034010: 2e77 7269 7465 6162 6c65 203d 2046 616c  .writeable = Fal
-00034020: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-00034030: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-00034040: 0a20 2020 2020 2020 2065 6c69 6620 7061  .        elif pa
-00034050: 742e 6973 5f66 6978 6564 5f73 697a 655f  t.is_fixed_size_
-00034060: 6269 6e61 7279 2861 7272 2e74 7970 6529  binary(arr.type)
-00034070: 3a0d 0a20 2020 2020 2020 2020 2020 206e  :..            n
-00034080: 756c 6c5f 636f 756e 7420 3d20 6172 722e  ull_count = arr.
-00034090: 6e75 6c6c 5f63 6f75 6e74 0d0a 2020 2020  null_count..    
-000340a0: 2020 2020 2020 2020 6966 206e 756c 6c5f          if null_
-000340b0: 636f 756e 7420 213d 2030 3a0d 0a20 2020  count != 0:..   
-000340c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000340d0: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
-000340e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000340f0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00034100: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
-00034110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034120: 2243 616e 2774 2070 6572 666f 726d 2061  "Can't perform a
-00034130: 207a 6572 6f2d 636f 7079 2063 6f6e 7665   zero-copy conve
-00034140: 7273 696f 6e20 6f66 2061 2066 6978 6564  rsion of a fixed
-00034150: 2d73 697a 6520 6269 6e61 7279 2061 7272  -size binary arr
-00034160: 6179 2074 6f20 7269 7074 6162 6c65 2077  ay to riptable w
-00034170: 6865 6e20 7468 6520 696e 7075 7420 6172  hen the input ar
-00034180: 7261 7920 636f 6e74 6169 6e73 206e 756c  ray contains nul
-00034190: 6c73 2e22 0d0a 2020 2020 2020 2020 2020  ls."..          
-000341a0: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-000341b0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000341c0: 7272 203d 2061 7272 2e66 696c 6c5f 6e75  rr = arr.fill_nu
-000341d0: 6c6c 280d 0a20 2020 2020 2020 2020 2020  ll(..           
-000341e0: 2020 2020 2020 2020 2062 225c 7830 3022           b"\x00"
-000341f0: 202a 2061 7272 2e74 7970 652e 6279 7465   * arr.type.byte
-00034200: 5f77 6964 7468 0d0a 2020 2020 2020 2020  _width..        
-00034210: 2020 2020 2020 2020 2920 2023 2063 616e          )  # can
-00034220: 2774 2066 696c 6c20 7769 7468 2062 2222  't fill with b""
-00034230: 2c20 7369 6e63 6520 6222 2220 6973 206e  , since b"" is n
-00034240: 6f74 2076 616c 6964 2066 6f72 2066 6978  ot valid for fix
-00034250: 6564 2077 6964 7468 2074 7970 650d 0a0d  ed width type...
-00034260: 0a20 2020 2020 2020 2020 2020 2023 2043  .            # C
-00034270: 616c 6c69 6e67 2070 612e 4172 7261 792e  alling pa.Array.
-00034280: 746f 5f6e 756d 7079 2077 6974 6820 7a65  to_numpy with ze
-00034290: 726f 5f63 6f70 793d 5472 7565 2072 6169  ro_copy=True rai
-000342a0: 7365 7320 616e 2065 7272 6f72 2077 6974  ses an error wit
-000342b0: 6820 6669 7865 6420 7369 7a65 6420 6269  h fixed sized bi
-000342c0: 6e61 7279 2074 7970 652e 0d0a 2020 2020  nary type...    
-000342d0: 2020 2020 2020 2020 2320 4361 6c6c 696e          # Callin
-000342e0: 6720 7061 2e41 7272 6179 2e74 6f5f 6e75  g pa.Array.to_nu
-000342f0: 6d70 7920 7769 7468 207a 6572 6f5f 636f  mpy with zero_co
-00034300: 7079 3d46 616c 7365 2072 6574 7572 6e73  py=False returns
-00034310: 2061 206e 756d 7079 2061 7272 6179 2077   a numpy array w
-00034320: 6865 7265 2074 7970 6573 2061 7265 2070  here types are p
-00034330: 7974 686f 6e20 6279 7465 7320 6f62 6a65  ython bytes obje
-00034340: 6374 732e 0d0a 2020 2020 2020 2020 2020  cts...          
-00034350: 2020 2320 576f 726b 6172 6f75 6e64 2062    # Workaround b
-00034360: 656c 6f77 2063 7265 6174 6573 2074 6865  elow creates the
-00034370: 206e 756d 7079 2062 7566 6665 7220 6f66   numpy buffer of
-00034380: 2074 7970 6520 2253 2220 6d61 6e75 616c   type "S" manual
-00034390: 6c79 2e0d 0a20 2020 2020 2020 2020 2020  ly...           
-000343a0: 2062 7566 203d 206e 702e 6672 6f6d 6275   buf = np.frombu
-000343b0: 6666 6572 280d 0a20 2020 2020 2020 2020  ffer(..         
-000343c0: 2020 2020 2020 2061 7272 2e62 7566 6665         arr.buffe
-000343d0: 7273 2829 5b31 5d2c 0d0a 2020 2020 2020  rs()[1],..      
-000343e0: 2020 2020 2020 2020 2020 6474 7970 653d            dtype=
-000343f0: 2253 2220 2b20 7374 7228 6172 722e 7479  "S" + str(arr.ty
-00034400: 7065 2e62 7974 655f 7769 6474 6829 2c0d  pe.byte_width),.
-00034410: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00034420: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00034430: 2077 7269 7461 626c 6520 616e 6420 6e75   writable and nu
-00034440: 6c6c 5f63 6f75 6e74 203d 3d20 303a 2020  ll_count == 0:  
-00034450: 2320 616c 7265 6164 7920 6d61 6465 2061  # already made a
-00034460: 2063 6f70 7920 6966 206e 756c 6c5f 636f   copy if null_co
-00034470: 756e 7420 213d 2030 0d0a 2020 2020 2020  unt != 0..      
-00034480: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00034490: 203d 2046 6173 7441 7272 6179 286e 702e   = FastArray(np.
-000344a0: 636f 7079 2862 7566 2929 0d0a 2020 2020  copy(buf))..    
-000344b0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-000344c0: 6c74 2e66 6c61 6773 2e77 7269 7465 6162  lt.flags.writeab
-000344d0: 6c65 203d 2077 7269 7461 626c 650d 0a20  le = writable.. 
-000344e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000344f0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00034500: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00034510: 6c74 203d 2046 6173 7441 7272 6179 2862  lt = FastArray(b
-00034520: 7566 290d 0a20 2020 2020 2020 2020 2020  uf)..           
-00034530: 2072 6573 756c 742e 666c 6167 732e 7772   result.flags.wr
-00034540: 6974 6561 626c 6520 3d20 7772 6974 6162  iteable = writab
-00034550: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-00034560: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-00034570: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00034580: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00034590: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
-000345a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000345b0: 2246 6173 7441 7272 6179 2063 616e 6e6f  "FastArray canno
-000345c0: 7420 6265 2063 7265 6174 6564 2066 726f  t be created fro
-000345d0: 6d20 6120 7079 6172 726f 7720 6172 7261  m a pyarrow arra
-000345e0: 7920 6f66 2074 7970 6520 277b 6172 722e  y of type '{arr.
-000345f0: 7479 7065 7d27 2e20 596f 7520 6d61 7920  type}'. You may 
-00034600: 6e65 6564 2074 6f20 6361 6c6c 2074 6865  need to call the
-00034610: 2060 6672 6f6d 5f61 7272 6f77 6020 6d65   `from_arrow` me
-00034620: 7468 6f64 206f 6e20 6f6e 6520 6f66 2074  thod on one of t
-00034630: 6865 2064 6572 6976 6564 2073 7562 636c  he derived subcl
-00034640: 6173 7365 7320 696e 7374 6561 642e 220d  asses instead.".
-00034650: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00034660: 0d0a 2020 2020 6465 6620 746f 5f61 7272  ..    def to_arr
-00034670: 6f77 280d 0a20 2020 2020 2020 2073 656c  ow(..        sel
-00034680: 662c 0d0a 2020 2020 2020 2020 7479 7065  f,..        type
-00034690: 3a20 4f70 7469 6f6e 616c 5b22 7061 2e44  : Optional["pa.D
-000346a0: 6174 6154 7970 6522 5d20 3d20 4e6f 6e65  ataType"] = None
-000346b0: 2c0d 0a20 2020 2020 2020 202a 2c0d 0a20  ,..        *,.. 
-000346c0: 2020 2020 2020 2070 7265 7365 7276 655f         preserve_
-000346d0: 6669 7865 645f 6279 7465 733a 2062 6f6f  fixed_bytes: boo
-000346e0: 6c20 3d20 4661 6c73 652c 0d0a 2020 2020  l = False,..    
-000346f0: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
-00034700: 735f 746f 5f6e 756c 6c3a 2062 6f6f 6c20  s_to_null: bool 
-00034710: 3d20 5472 7565 2c0d 0a20 2020 2029 202d  = True,..    ) -
-00034720: 3e20 556e 696f 6e5b 2270 612e 4172 7261  > Union["pa.Arra
-00034730: 7922 2c20 2270 612e 4368 756e 6b65 6441  y", "pa.ChunkedA
-00034740: 7272 6179 225d 3a0d 0a20 2020 2020 2020  rray"]:..       
-00034750: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
-00034760: 6e76 6572 7420 7468 6973 2060 4661 7374  nvert this `Fast
-00034770: 4172 7261 7960 2074 6f20 6120 6070 7961  Array` to a `pya
-00034780: 7272 6f77 2e41 7272 6179 602e 0d0a 0d0a  rrow.Array`.....
-00034790: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-000347a0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-000347b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000347c0: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
-000347d0: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
-000347e0: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
-000347f0: 6f6e 650d 0a20 2020 2020 2020 2070 7265  one..        pre
-00034800: 7365 7276 655f 6669 7865 645f 6279 7465  serve_fixed_byte
-00034810: 7320 3a20 626f 6f6c 2c20 6f70 7469 6f6e  s : bool, option
-00034820: 616c 2c20 6465 6661 756c 7473 2074 6f20  al, defaults to 
-00034830: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00034840: 2020 2049 6620 7468 6973 2060 4661 7374     If this `Fast
-00034850: 4172 7261 7960 2069 7320 616e 2041 5343  Array` is an ASC
-00034860: 4949 2073 7472 696e 6720 6172 7261 7920  II string array 
-00034870: 2864 7479 7065 2e6b 696e 6420 3d3d 2027  (dtype.kind == '
-00034880: 5327 292c 0d0a 2020 2020 2020 2020 2020  S'),..          
-00034890: 2020 7365 7420 7468 6973 2070 6172 616d    set this param
-000348a0: 6574 6572 2074 6f20 5472 7565 2074 6f20  eter to True to 
-000348b0: 7072 6f64 7563 6520 6120 6669 7865 642d  produce a fixed-
-000348c0: 6c65 6e67 7468 2062 696e 6172 7920 6172  length binary ar
-000348d0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-000348e0: 2069 6e73 7465 6164 206f 6620 6120 7661   instead of a va
-000348f0: 7269 6162 6c65 2d6c 656e 6774 6820 7374  riable-length st
-00034900: 7269 6e67 2061 7272 6179 2e0d 0a20 2020  ring array...   
-00034910: 2020 2020 2065 6d70 7479 5f73 7472 696e       empty_strin
-00034920: 6773 5f74 6f5f 6e75 6c6c 203a 2062 6f6f  gs_to_null : boo
-00034930: 6c2c 206f 7074 696f 6e61 6c2c 2064 6566  l, optional, def
-00034940: 6175 6c74 7320 546f 2054 7275 650d 0a20  aults To True.. 
-00034950: 2020 2020 2020 2020 2020 2049 6620 7468             If th
-00034960: 6973 2060 4661 7374 4172 7261 7960 2069  is `FastArray` i
-00034970: 7320 616e 2041 5343 4949 206f 7220 556e  s an ASCII or Un
-00034980: 6963 6f64 6520 7374 7269 6e67 2061 7272  icode string arr
-00034990: 6179 2c0d 0a20 2020 2020 2020 2020 2020  ay,..           
-000349a0: 2073 7065 6369 6679 2054 7275 6520 666f   specify True fo
-000349b0: 7220 7468 6973 2070 6172 616d 6574 6572  r this parameter
-000349c0: 2074 6f20 636f 6e76 6572 7420 656d 7074   to convert empt
-000349d0: 7920 7374 7269 6e67 7320 746f 206e 756c  y strings to nul
-000349e0: 6c73 2069 6e20 7468 6520 6f75 7470 7574  ls in the output
-000349f0: 2e0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
-00034a00: 6970 7461 626c 6520 696e 636f 6e73 6973  iptable inconsis
-00034a10: 7465 6e74 6c79 2072 6563 6f67 6e69 7a65  tently recognize
-00034a20: 7320 7468 6520 656d 7074 7920 7374 7269  s the empty stri
-00034a30: 6e67 2061 7320 616e 2027 696e 7661 6c69  ng as an 'invali
-00034a40: 6427 2c0d 0a20 2020 2020 2020 2020 2020  d',..           
-00034a50: 2073 6f20 7468 6973 2070 6172 616d 6574   so this paramet
-00034a60: 6572 2061 6c6c 6f77 7320 7468 6520 6361  er allows the ca
-00034a70: 6c6c 6572 2074 6f20 7370 6563 6966 7920  ller to specify 
-00034a80: 7768 6963 6820 696e 7465 7270 7265 7461  which interpreta
-00034a90: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
-00034aa0: 2020 7468 6579 2077 616e 742e 0d0a 0d0a    they want.....
-00034ab0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00034ac0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00034ad0: 0d0a 2020 2020 2020 2020 7079 6172 726f  ..        pyarro
-00034ae0: 772e 4172 7261 7920 6f72 2070 7961 7272  w.Array or pyarr
-00034af0: 6f77 2e43 6875 6e6b 6564 4172 7261 790d  ow.ChunkedArray.
-00034b00: 0a0d 0a20 2020 2020 2020 204e 6f74 6573  ...        Notes
-00034b10: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d0d  ..        -----.
-00034b20: 0a20 2020 2020 2020 2054 4f44 4f3a 2041  .        TODO: A
-00034b30: 6464 2062 6f6f 6c20 7061 7261 6d65 7465  dd bool paramete
-00034b40: 7220 7768 6963 6820 6469 7265 6374 7320  r which directs 
-00034b50: 7468 6520 636f 6e76 6572 7369 6f6e 2074  the conversion t
-00034b60: 6f20 6368 6f6f 7365 2074 6865 206d 6f73  o choose the mos
-00034b70: 742d 636f 6d70 6163 7420 6f75 7470 7574  t-compact output
-00034b80: 2074 7970 6520 706f 7373 6962 6c65 3f0d   type possible?.
-00034b90: 0a20 2020 2020 2020 2020 2020 2020 2054  .              T
-00034ba0: 6869 7320 776f 756c 6420 6265 2072 656c  his would be rel
-00034bb0: 6576 616e 7420 746f 2069 6e64 6963 6573  evant to indices
-00034bc0: 206f 6620 6361 7465 676f 7269 6361 6c2f   of categorical/
-00034bd0: 6469 6374 696f 6e61 7279 2d65 6e63 6f64  dictionary-encod
-00034be0: 6564 2061 7272 6179 732c 2062 7574 2063  ed arrays, but c
-00034bf0: 6f75 6c64 2061 6c73 6f20 6d61 6b65 2073  ould also make s
-00034c00: 656e 7365 0d0a 2020 2020 2020 2020 2020  ense..          
-00034c10: 2020 2020 666f 7220 7265 6775 6c61 7220      for regular 
-00034c20: 4661 7374 4172 7261 7920 7479 7065 7320  FastArray types 
-00034c30: 2865 2e67 2e20 746f 2075 7365 2061 6e20  (e.g. to use an 
-00034c40: 696e 7438 2069 6e73 7465 6164 206f 6620  int8 instead of 
-00034c50: 616e 2069 6e74 3332 2077 6865 6e20 6974  an int32 when it
-00034c60: 2764 2062 6520 6120 6c6f 7373 6c65 7373  'd be a lossless
-00034c70: 2063 6f6e 7665 7273 696f 6e29 2e0d 0a20   conversion)... 
-00034c80: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00034c90: 2020 2020 696d 706f 7274 2062 7569 6c74      import built
-00034ca0: 696e 730d 0a0d 0a20 2020 2020 2020 2069  ins....        i
-00034cb0: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
-00034cc0: 2070 610d 0a0d 0a20 2020 2020 2020 2023   pa....        #
-00034cd0: 2044 6572 6976 6564 2061 7272 6179 2074   Derived array t
-00034ce0: 7970 6573 204d 5553 5420 696d 706c 656d  ypes MUST implem
-00034cf0: 656e 7420 7468 6569 7220 6f77 6e20 6f76  ent their own ov
-00034d00: 6572 6c6f 6164 206f 6620 7468 6973 2066  erload of this f
-00034d10: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
-00034d20: 2023 2066 6f72 2063 6f72 7265 6374 6e65   # for correctne
-00034d30: 7373 3b20 666f 7220 7468 6174 2072 6561  ss; for that rea
-00034d40: 736f 6e2c 2072 6169 7365 2061 6e20 6572  son, raise an er
-00034d50: 726f 7220 6966 2073 6f6d 656f 6e65 2061  ror if someone a
-00034d60: 7474 656d 7074 7320 746f 0d0a 2020 2020  ttempts to..    
-00034d70: 2020 2020 2320 6361 6c6c 202a 7468 6973      # call *this
-00034d80: 2a20 696d 706c 656d 656e 7461 7469 6f6e  * implementation
-00034d90: 206f 6620 7468 6520 6d65 7468 6f64 2066   of the method f
-00034da0: 6f72 2061 2064 6572 6976 6564 2061 7272  or a derived arr
-00034db0: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
-00034dc0: 2020 6966 2062 7569 6c74 696e 732e 7479    if builtins.ty
-00034dd0: 7065 2873 656c 6629 2021 3d20 4661 7374  pe(self) != Fast
-00034de0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00034df0: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
-00034e00: 6c65 6d65 6e74 6564 4572 726f 7228 0d0a  lementedError(..
-00034e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034e20: 6622 5468 6520 607b 6275 696c 7469 6e73  f"The `{builtins
-00034e30: 2e74 7970 6528 7365 6c66 292e 5f5f 7175  .type(self).__qu
-00034e40: 616c 6e61 6d65 5f5f 7d60 2074 7970 6520  alname__}` type 
-00034e50: 6d75 7374 2069 6d70 6c65 6d65 6e74 2069  must implement i
-00034e60: 7427 7320 6f77 6e20 6f76 6572 7269 6465  t's own override
-00034e70: 206f 6620 7468 6520 6074 6f5f 6172 726f   of the `to_arro
-00034e80: 7728 2960 206d 6574 686f 642e 220d 0a20  w()` method.".. 
-00034e90: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-00034ea0: 2020 2020 2020 2020 2320 7269 7074 6162          # riptab
-00034eb0: 6c65 2028 6174 206c 6561 7374 2061 7320  le (at least as 
-00034ec0: 6f66 2031 2e30 2e35 3629 2064 6f65 7320  of 1.0.56) does 
-00034ed0: 6e6f 7420 2a74 7275 6c79 2a20 7375 7070  not *truly* supp
-00034ee0: 6f72 7420 696e 7661 6c69 642f 4e41 2076  ort invalid/NA v
-00034ef0: 616c 7565 730d 0a20 2020 2020 2020 2023  alues..        #
-00034f00: 2069 6e20 626f 6f6c 206f 7220 6173 6369   in bool or asci
-00034f10: 692f 756e 6963 6f64 6520 7374 7269 6e67  i/unicode string
-00034f20: 2d74 7970 6564 2061 7272 6179 732e 2048  -typed arrays. H
-00034f30: 616e 646c 6520 7468 6f73 6520 6474 7970  andle those dtyp
-00034f40: 6573 2073 7065 6369 616c 6c79 2e0d 0a20  es specially... 
-00034f50: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
-00034f60: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
-00034f70: 7065 2c20 6e70 2e69 6e74 6567 6572 293a  pe, np.integer):
-00034f80: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00034f90: 544f 444f 3a20 4966 2074 6869 7320 6172  TODO: If this ar
-00034fa0: 7261 7920 6861 7320 2e6e 6469 6d73 203e  ray has .ndims >
-00034fb0: 3d20 322c 206e 6565 6420 746f 2063 6f6e  = 2, need to con
-00034fc0: 7665 7274 2074 6f20 7079 6172 726f 7720  vert to pyarrow 
-00034fd0: 7573 696e 6720 7061 2e54 656e 736f 722e  using pa.Tensor.
-00034fe0: 6672 6f6d 5f6e 756d 7079 282e 2e2e 292e  from_numpy(...).
-00034ff0: 2054 6861 7420 646f 6573 6e27 7420 6861   That doesn't ha
-00035000: 6e64 6c65 206d 6173 6b73 2061 7320 6f66  ndle masks as of
-00035010: 2070 7961 7272 6f77 2034 2e30 2e0d 0a0d   pyarrow 4.0....
-00035020: 0a20 2020 2020 2020 2020 2020 2023 2047  .            # G
-00035030: 6574 2061 206d 6173 6b20 6f66 2069 6e76  et a mask of inv
-00035040: 616c 6964 732e 0d0a 2020 2020 2020 2020  alids...        
-00035050: 2020 2020 696e 7661 6c69 6473 5f6d 6173      invalids_mas
-00035060: 6b20 3d20 7365 6c66 2e69 736e 616e 2829  k = self.isnan()
-00035070: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00035080: 2320 4966 2061 6c6c 2076 616c 7565 7320  # If all values 
-00035090: 6172 6520 7661 6c69 642c 2064 6f6e 2774  are valid, don't
-000350a0: 2062 6f74 6865 7220 6372 6561 7469 6e67   bother creating
-000350b0: 2061 6e20 616c 6c2d 4661 6c73 6520 6d61   an all-False ma
-000350c0: 736b 2c20 6974 2773 206a 7573 7420 7761  sk, it's just wa
-000350d0: 7374 696e 6720 6d65 6d6f 7279 2e0d 0a20  sting memory... 
-000350e0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-000350f0: 7420 696e 7661 6c69 6473 5f6d 6173 6b2e  t invalids_mask.
-00035100: 616e 7928 293a 0d0a 2020 2020 2020 2020  any():..        
-00035110: 2020 2020 2020 2020 696e 7661 6c69 6473          invalids
-00035120: 5f6d 6173 6b20 3d20 4e6f 6e65 0d0a 0d0a  _mask = None....
-00035130: 2020 2020 2020 2020 2020 2020 2320 4372              # Cr
-00035140: 6561 7465 2074 6865 2070 7961 7272 6f77  eate the pyarrow
-00035150: 2061 7272 6179 2066 726f 6d20 6974 202b   array from it +
-00035160: 2074 6869 7320 6172 7261 792e 0d0a 2020   this array...  
-00035170: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00035180: 2070 612e 6172 7261 7928 7365 6c66 2e5f   pa.array(self._
-00035190: 6e70 2c20 6d61 736b 3d69 6e76 616c 6964  np, mask=invalid
-000351a0: 735f 6d61 736b 2c20 7479 7065 3d74 7970  s_mask, type=typ
-000351b0: 6529 0d0a 0d0a 2020 2020 2020 2020 656c  e)....        el
-000351c0: 6966 206e 702e 6973 7375 6264 7479 7065  if np.issubdtype
-000351d0: 2873 656c 662e 6474 7970 652c 206e 702e  (self.dtype, np.
-000351e0: 666c 6f61 7469 6e67 293a 0d0a 2020 2020  floating):..    
-000351f0: 2020 2020 2020 2020 2320 5573 696e 6720          # Using 
-00035200: 666c 6f61 7469 6e67 2d70 6f69 6e74 204e  floating-point N
-00035210: 614e 2074 6f20 7369 676e 616c 2062 6f74  aN to signal bot
-00035220: 6820 4e61 4e20 616e 6420 4e41 2f6e 756c  h NaN and NA/nul
-00035230: 6c20 696e 2072 6970 7461 626c 6520 6d65  l in riptable me
-00035240: 616e 7320 7765 0d0a 2020 2020 2020 2020  ans we..        
-00035250: 2020 2020 2320 6e65 6564 2074 6f20 6d61      # need to ma
-00035260: 6b65 2061 2064 6563 6973 696f 6e20 6865  ke a decision he
-00035270: 7265 206f 6e20 7768 6574 6865 7220 746f  re on whether to
-00035280: 206d 6172 6b20 7468 6f73 6520 7661 6c75   mark those valu
-00035290: 6573 2061 7320 4e41 2f6e 756c 6c20 7661  es as NA/null va
-000352a0: 6c75 6573 0d0a 2020 2020 2020 2020 2020  lues..          
-000352b0: 2020 2320 696e 2074 6865 2072 6574 7572    # in the retur
-000352c0: 6e65 6420 7079 6172 726f 7720 6172 7261  ned pyarrow arra
-000352d0: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
-000352e0: 2320 466f 7220 6e6f 772c 2077 6520 646f  # For now, we do
-000352f0: 6e27 7420 2d2d 2077 6520 6a75 7374 2070  n't -- we just p
-00035300: 6173 7320 7468 6520 6461 7461 2061 6c6f  ass the data alo
-00035310: 6e67 2064 6972 6563 746c 792c 2073 6f20  ng directly, so 
-00035320: 7468 6520 6361 6c6c 6572 2063 616e 2064  the caller can d
-00035330: 6563 6964 650d 0a20 2020 2020 2020 2020  ecide..         
-00035340: 2020 2023 206f 6e20 7768 6574 6865 7220     # on whether 
-00035350: 7468 6579 2077 616e 7420 746f 2068 616e  they want to han
-00035360: 646c 6520 7468 6174 2e20 2849 6465 616c  dle that. (Ideal
-00035370: 6c79 2c20 7765 2764 2068 6176 6520 6120  ly, we'd have a 
-00035380: 7761 7920 746f 2070 6172 616d 6574 6572  way to parameter
-00035390: 697a 6520 7468 6973 0d0a 2020 2020 2020  ize this..      
-000353a0: 2020 2020 2020 2320 6275 7420 7468 6520        # but the 
-000353b0: 7072 6f74 6f63 6f6c 2064 6f65 736e 2774  protocol doesn't
-000353c0: 2073 7570 706f 7274 2069 7420 6173 206f   support it as o
-000353d0: 6620 7079 6172 726f 7720 342e 302e 2049  f pyarrow 4.0. I
-000353e0: 6e20 616e 7920 6361 7365 2c20 6f6e 6c79  n any case, only
-000353f0: 2074 6865 2062 6974 6d61 736b 0d0a 2020   the bitmask..  
-00035400: 2020 2020 2020 2020 2020 2320 6e65 6564            # need
-00035410: 7320 746f 2062 6520 7265 2d63 7265 6174  s to be re-creat
-00035420: 6564 206c 6174 6572 2069 6620 7468 6520  ed later if the 
-00035430: 7573 6572 2077 616e 7473 2074 6f20 636f  user wants to co
-00035440: 6e73 6964 6572 2074 6865 204e 614e 7320  nsider the NaNs 
-00035450: 6173 204e 412f 6e75 6c6c 2076 616c 7565  as NA/null value
-00035460: 732e 290d 0a20 2020 2020 2020 2020 2020  s.)..           
-00035470: 2069 6620 7365 6c66 2e6e 6469 6d20 3e3d   if self.ndim >=
-00035480: 2032 3a0d 0a20 2020 2020 2020 2020 2020   2:..           
-00035490: 2020 2020 2023 204e 4f54 453a 2041 7320       # NOTE: As 
-000354a0: 6f66 2070 7961 7272 6f77 2034 2e30 2c20  of pyarrow 4.0, 
-000354b0: 7468 6973 206d 6574 686f 6420 646f 6573  this method does
-000354c0: 6e27 7420 7375 7070 6f72 7420 6120 6074  n't support a `t
-000354d0: 7970 6560 2061 7267 756d 656e 742e 0d0a  ype` argument...
-000354e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000354f0: 7265 7475 726e 2070 612e 5465 6e73 6f72  return pa.Tensor
-00035500: 2e66 726f 6d5f 6e75 6d70 7928 7365 6c66  .from_numpy(self
-00035510: 2e5f 6e70 290d 0a20 2020 2020 2020 2020  ._np)..         
-00035520: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00035530: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00035540: 2070 612e 6172 7261 7928 7365 6c66 2e5f   pa.array(self._
-00035550: 6e70 2c20 7479 7065 3d74 7970 6529 0d0a  np, type=type)..
-00035560: 0d0a 2020 2020 2020 2020 656c 6966 206e  ..        elif n
-00035570: 702e 6973 7375 6264 7479 7065 2873 656c  p.issubdtype(sel
-00035580: 662e 6474 7970 652c 2062 6f6f 6c29 3a0d  f.dtype, bool):.
-00035590: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000355a0: 7365 6c66 2e6e 6469 6d20 3e3d 2032 3a0d  self.ndim >= 2:.
-000355b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000355c0: 2023 204e 4f54 453a 2041 7320 6f66 2070   # NOTE: As of p
-000355d0: 7961 7272 6f77 2034 2e30 2c20 7468 6973  yarrow 4.0, this
-000355e0: 206d 6574 686f 6420 646f 6573 6e27 7420   method doesn't 
-000355f0: 7375 7070 6f72 7420 6120 6074 7970 6560  support a `type`
-00035600: 2061 7267 756d 656e 742e 0d0a 2020 2020   argument...    
-00035610: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00035620: 726e 2070 612e 5465 6e73 6f72 2e66 726f  rn pa.Tensor.fro
-00035630: 6d5f 6e75 6d70 7928 7365 6c66 2e5f 6e70  m_numpy(self._np
-00035640: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-00035650: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00035660: 2020 2020 2020 7265 7475 726e 2070 612e        return pa.
-00035670: 6172 7261 7928 7365 6c66 2e5f 6e70 2c20  array(self._np, 
-00035680: 7479 7065 3d74 7970 6529 0d0a 0d0a 2020  type=type)....  
-00035690: 2020 2020 2020 656c 6966 206e 702e 6973        elif np.is
-000356a0: 7375 6264 7479 7065 2873 656c 662e 6474  subdtype(self.dt
-000356b0: 7970 652c 2062 7974 6573 293a 0d0a 2020  ype, bytes):..  
-000356c0: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
-000356d0: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
-000356e0: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
-000356f0: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
-00035700: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
-00035710: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
-00035720: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
-00035730: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
-00035740: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00035750: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
-00035760: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
-00035770: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
-00035780: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
-00035790: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
-000357a0: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
-000357b0: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
-000357c0: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
-000357d0: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
-000357e0: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
-000357f0: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
-00035800: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
-00035810: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00035820: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
-00035830: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
-00035840: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00035850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035860: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
-00035870: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-00035880: 2020 2020 2320 446f 6573 2074 6865 2063      # Does the c
-00035890: 616c 6c65 7220 7761 6e74 2074 6f20 7072  aller want to pr
-000358a0: 6573 6572 7665 2074 6865 2066 6978 6564  eserve the fixed
-000358b0: 2d6c 656e 6774 6820 6269 6e61 7279 2064  -length binary d
-000358c0: 6174 613f 0d0a 2020 2020 2020 2020 2020  ata?..          
-000358d0: 2020 6966 2070 7265 7365 7276 655f 6669    if preserve_fi
-000358e0: 7865 645f 6279 7465 733a 0d0a 2020 2020  xed_bytes:..    
-000358f0: 2020 2020 2020 2020 2020 2020 2320 436f              # Co
-00035900: 6e76 6572 7420 746f 2061 2066 6978 6564  nvert to a fixed
-00035910: 2d6c 656e 6774 6820 6269 6e61 7279 2028  -length binary (
-00035920: 2762 7974 6573 2729 2074 7970 652e 0d0a  'bytes') type...
-00035930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035940: 656c 656d 656e 745f 7374 725f 6c65 6e67  element_str_leng
-00035950: 7468 203d 206e 702e 6474 7970 6528 7365  th = np.dtype(se
-00035960: 6c66 2e64 7479 7065 292e 6974 656d 7369  lf.dtype).itemsi
-00035970: 7a65 0d0a 2020 2020 2020 2020 2020 2020  ze..            
-00035980: 2020 2020 6172 725f 7479 7065 203d 2070      arr_type = p
-00035990: 612e 6269 6e61 7279 2865 6c65 6d65 6e74  a.binary(element
-000359a0: 5f73 7472 5f6c 656e 6774 6829 2069 6620  _str_length) if 
-000359b0: 7479 7065 2069 7320 4e6f 6e65 2065 6c73  type is None els
-000359c0: 6520 7479 7065 0d0a 2020 2020 2020 2020  e type..        
-000359d0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-000359e0: 612e 6172 7261 7928 7365 6c66 2e5f 6e70  a.array(self._np
-000359f0: 2c20 6d61 736b 3d69 6e76 616c 6964 735f  , mask=invalids_
-00035a00: 6d61 736b 2c20 7479 7065 3d61 7272 5f74  mask, type=arr_t
-00035a10: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-00035a20: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00035a30: 2020 2020 2020 2020 2023 2043 6f6e 7665           # Conve
-00035a40: 7274 2074 6869 7320 6172 7261 7920 746f  rt this array to
-00035a50: 2061 2070 7961 7272 6f77 2076 6172 6961   a pyarrow varia
-00035a60: 626c 652d 6c65 6e67 7468 2073 7472 696e  ble-length strin
-00035a70: 6720 6172 7261 792e 0d0a 2020 2020 2020  g array...      
-00035a80: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
-00035a90: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-00035aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035ab0: 7479 7065 203d 2070 612e 7374 7269 6e67  type = pa.string
-00035ac0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00035ad0: 2020 2020 2320 436f 6e76 6572 7420 6173      # Convert as
-00035ae0: 2055 6e69 636f 6465 206e 6461 7272 6179   Unicode ndarray
-00035af0: 2074 6f20 7374 7269 6e67 6172 7261 792c   to stringarray,
-00035b00: 2061 7320 6279 7465 7374 7269 6e67 2064   as bytestring d
-00035b10: 6f65 7320 6e6f 7420 7072 6573 6572 7665  oes not preserve
-00035b20: 2065 6c65 6d65 6e74 206c 656e 6774 6820   element length 
-00035b30: 2872 6970 7461 626c 6523 3234 3929 0d0a  (riptable#249)..
-00035b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035b50: 7265 7475 726e 2070 612e 6172 7261 7928  return pa.array(
-00035b60: 6e70 2e61 7272 6179 2873 656c 662e 5f6e  np.array(self._n
-00035b70: 702c 2064 7479 7065 3d22 5522 292c 206d  p, dtype="U"), m
-00035b80: 6173 6b3d 696e 7661 6c69 6473 5f6d 6173  ask=invalids_mas
-00035b90: 6b2c 2074 7970 653d 7479 7065 290d 0a0d  k, type=type)...
-00035ba0: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
-00035bb0: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
-00035bc0: 2e64 7479 7065 2c20 7374 7229 3a0d 0a20  .dtype, str):.. 
-00035bd0: 2020 2020 2020 2020 2020 2023 2049 6620             # If 
-00035be0: 7468 6520 6361 6c6c 6572 2077 616e 7473  the caller wants
-00035bf0: 2074 6f20 636f 6e76 6572 7420 656d 7074   to convert empt
-00035c00: 7920 7374 7269 6e67 7320 746f 206e 756c  y strings to nul
-00035c10: 6c73 2c20 6765 7420 6120 6d61 736b 206f  ls, get a mask o
-00035c20: 6620 696e 7661 6c69 6473 2e0d 0a20 2020  f invalids...   
-00035c30: 2020 2020 2020 2020 2069 6620 656d 7074           if empt
-00035c40: 795f 7374 7269 6e67 735f 746f 5f6e 756c  y_strings_to_nul
-00035c50: 6c3a 0d0a 2020 2020 2020 2020 2020 2020  l:..            
-00035c60: 2020 2020 696e 7661 6c69 6473 5f6d 6173      invalids_mas
-00035c70: 6b20 3d20 7365 6c66 203d 3d20 7365 6c66  k = self == self
-00035c80: 2e69 6e76 0d0a 0d0a 2020 2020 2020 2020  .inv....        
-00035c90: 2020 2020 2020 2020 2320 4966 2061 6c6c          # If all
-00035ca0: 2076 616c 7565 7320 6172 6520 7661 6c69   values are vali
-00035cb0: 642c 2064 6f6e 2774 2062 6f74 6865 7220  d, don't bother 
-00035cc0: 6372 6561 7469 6e67 2061 6e20 616c 6c2d  creating an all-
-00035cd0: 4661 6c73 6520 6d61 736b 2c20 6974 2773  False mask, it's
-00035ce0: 206a 7573 7420 7761 7374 696e 6720 6d65   just wasting me
-00035cf0: 6d6f 7279 2e0d 0a20 2020 2020 2020 2020  mory...         
-00035d00: 2020 2020 2020 2069 6620 6e6f 7420 696e         if not in
-00035d10: 7661 6c69 6473 5f6d 6173 6b2e 616e 7928  valids_mask.any(
-00035d20: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00035d30: 2020 2020 2020 2020 696e 7661 6c69 6473          invalids
-00035d40: 5f6d 6173 6b20 3d20 4e6f 6e65 0d0a 2020  _mask = None..  
-00035d50: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00035d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035d70: 2069 6e76 616c 6964 735f 6d61 736b 203d   invalids_mask =
-00035d80: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
-00035d90: 2020 2020 2023 2070 7961 7272 6f77 2028       # pyarrow (
-00035da0: 6173 206f 6620 7634 2e30 2920 646f 6573  as of v4.0) does
-00035db0: 206e 6f74 2068 6176 6520 6120 6669 7865   not have a fixe
-00035dc0: 642d 7369 7a65 2055 6e69 636f 6465 2073  d-size Unicode s
-00035dd0: 7472 696e 6720 6461 7461 2074 7970 652c  tring data type,
-00035de0: 2073 6f20 756e 6c69 6b65 2074 6865 2027   so unlike the '
-00035df0: 6279 7465 7327 0d0a 2020 2020 2020 2020  bytes'..        
-00035e00: 2020 2020 2320 6861 6e64 6c69 6e67 2061      # handling a
-00035e10: 626f 7665 2066 6f72 2041 5343 4949 2073  bove for ASCII s
-00035e20: 7472 696e 6773 2c20 7765 2068 6176 6520  trings, we have 
-00035e30: 746f 2075 7365 2074 6865 2076 6172 6961  to use the varia
-00035e40: 626c 652d 6c65 6e67 7468 2073 7472 696e  ble-length strin
-00035e50: 6720 6172 7261 7920 7479 7065 2e0d 0a20  g array type... 
-00035e60: 2020 2020 2020 2020 2020 2069 6620 7479             if ty
-00035e70: 7065 2069 7320 4e6f 6e65 3a0d 0a20 2020  pe is None:..   
-00035e80: 2020 2020 2020 2020 2020 2020 2074 7970               typ
-00035e90: 6520 3d20 7061 2e73 7472 696e 6728 290d  e = pa.string().
-00035ea0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00035eb0: 7572 6e20 7061 2e61 7272 6179 2873 656c  urn pa.array(sel
-00035ec0: 662e 5f6e 702c 206d 6173 6b3d 696e 7661  f._np, mask=inva
-00035ed0: 6c69 6473 5f6d 6173 6b2c 2074 7970 653d  lids_mask, type=
-00035ee0: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
-00035ef0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00035f00: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
-00035f10: 6c65 6d65 6e74 6564 4572 726f 7228 6622  lementedError(f"
-00035f20: 4661 7374 4172 7261 7920 7769 7468 2064  FastArray with d
-00035f30: 7479 7065 2027 7b6e 702e 6474 7970 6528  type '{np.dtype(
-00035f40: 7365 6c66 2e64 7479 7065 297d 2720 6973  self.dtype)}' is
-00035f50: 206e 6f74 2073 7570 706f 7274 6564 2e22   not supported."
-00035f60: 290d 0a0d 0a20 2020 2064 6566 205f 5f61  )....    def __a
-00035f70: 7272 6f77 5f61 7272 6179 5f5f 2873 656c  rrow_array__(sel
-00035f80: 662c 2074 7970 653a 204f 7074 696f 6e61  f, type: Optiona
-00035f90: 6c5b 2270 612e 4461 7461 5479 7065 225d  l["pa.DataType"]
-00035fa0: 203d 204e 6f6e 6529 202d 3e20 556e 696f   = None) -> Unio
-00035fb0: 6e5b 2270 612e 4172 7261 7922 2c20 2270  n["pa.Array", "p
-00035fc0: 612e 4368 756e 6b65 6441 7272 6179 225d  a.ChunkedArray"]
-00035fd0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00035fe0: 2020 2020 2020 2020 496d 706c 656d 656e          Implemen
-00035ff0: 7461 7469 6f6e 206f 6620 7468 6520 6060  tation of the ``
-00036000: 5f5f 6172 726f 775f 6172 7261 795f 5f60  __arrow_array__`
-00036010: 6020 7072 6f74 6f63 6f6c 2066 6f72 2063  ` protocol for c
-00036020: 6f6e 7665 7273 696f 6e20 746f 2061 2070  onversion to a p
-00036030: 7961 7272 6f77 2061 7272 6179 2e0d 0a0d  yarrow array....
-00036040: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-00036050: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-00036060: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00036070: 2074 7970 6520 3a20 7079 6172 726f 772e   type : pyarrow.
-00036080: 4461 7461 5479 7065 2c20 6f70 7469 6f6e  DataType, option
-00036090: 616c 2c20 6465 6661 756c 7473 2074 6f20  al, defaults to 
-000360a0: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-000360b0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-000360c0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-000360d0: 2020 7079 6172 726f 772e 4172 7261 7920    pyarrow.Array 
-000360e0: 6f72 2070 7961 7272 6f77 2e43 6875 6e6b  or pyarrow.Chunk
-000360f0: 6564 4172 7261 790d 0a0d 0a20 2020 2020  edArray....     
-00036100: 2020 204e 6f74 6573 0d0a 2020 2020 2020     Notes..      
-00036110: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
-00036120: 2068 7474 7073 3a2f 2f61 7272 6f77 2e61   https://arrow.a
-00036130: 7061 6368 652e 6f72 672f 646f 6373 2f70  pache.org/docs/p
-00036140: 7974 686f 6e2f 6578 7465 6e64 696e 675f  ython/extending_
-00036150: 7479 7065 732e 6874 6d6c 2363 6f6e 7472  types.html#contr
-00036160: 6f6c 6c69 6e67 2d63 6f6e 7665 7273 696f  olling-conversio
-00036170: 6e2d 746f 2d70 7961 7272 6f77 2d61 7272  n-to-pyarrow-arr
-00036180: 6179 2d77 6974 682d 7468 652d 6172 726f  ay-with-the-arro
-00036190: 772d 6172 7261 792d 7072 6f74 6f63 6f6c  w-array-protocol
-000361a0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000361b0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000361c0: 6c66 2e74 6f5f 6172 726f 7728 7479 7065  lf.to_arrow(type
-000361d0: 3d74 7970 652c 2070 7265 7365 7276 655f  =type, preserve_
-000361e0: 6669 7865 645f 6279 7465 733d 4661 6c73  fixed_bytes=Fals
-000361f0: 652c 2065 6d70 7479 5f73 7472 696e 6773  e, empty_strings
-00036200: 5f74 6f5f 6e75 6c6c 3d54 7275 6529 0d0a  _to_null=True)..
-00036210: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00036220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036250: 2d2d 2d0d 0a20 2020 2040 636c 6173 736d  ---..    @classm
-00036260: 6574 686f 640d 0a20 2020 2064 6566 2072  ethod..    def r
-00036270: 6567 6973 7465 725f 6675 6e63 7469 6f6e  egister_function
-00036280: 2863 6c73 2c20 6e61 6d65 2c20 6675 6e63  (cls, name, func
-00036290: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-000362a0: 0a20 2020 2020 2020 2055 7365 6420 746f  .        Used to
-000362b0: 2072 6567 6973 7465 7220 6675 6e63 7469   register functi
-000362c0: 6f6e 7320 746f 2046 6173 7441 7272 6179  ons to FastArray
-000362d0: 2e0d 0a20 2020 2020 2020 2055 7365 6420  ...        Used 
-000362e0: 6279 2072 745f 6661 7374 6172 7261 796e  by rt_fastarrayn
-000362f0: 756d 6261 0d0a 2020 2020 2020 2020 2222  umba..        ""
-00036300: 220d 0a20 2020 2020 2020 2073 6574 6174  "..        setat
-00036310: 7472 2863 6c73 2c20 6e61 6d65 2c20 6675  tr(cls, name, fu
-00036320: 6e63 290d 0a0d 0a20 2020 2064 6566 2061  nc)....    def a
-00036330: 7070 6c79 5f73 6368 656d 6128 7365 6c66  pply_schema(self
-00036340: 2c20 7363 6865 6d61 293a 0d0a 2020 2020  , schema):..    
-00036350: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00036360: 2041 7070 6c79 2061 2073 6368 656d 6120   Apply a schema 
-00036370: 636f 6e74 6169 6e69 6e67 2064 6573 6372  containing descr
-00036380: 6970 7469 7665 2069 6e66 6f72 6d61 7469  iptive informati
-00036390: 6f6e 2074 6f20 7468 6520 4661 7374 4172  on to the FastAr
-000363a0: 7261 790d 0a0d 0a20 2020 2020 2020 203a  ray....        :
-000363b0: 7061 7261 6d20 7363 6865 6d61 3a20 6469  param schema: di
-000363c0: 6374 0d0a 2020 2020 2020 2020 3a72 6574  ct..        :ret
-000363d0: 7572 6e3a 2064 6963 7469 6f6e 6172 7920  urn: dictionary 
-000363e0: 6f66 2064 6576 6961 7469 6f6e 7320 6672  of deviations fr
-000363f0: 6f6d 2074 6865 2073 6368 656d 610d 0a20  om the schema.. 
-00036400: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00036410: 2020 2020 6672 6f6d 202e 7274 5f6d 6574      from .rt_met
-00036420: 6120 696d 706f 7274 2061 7070 6c79 5f73  a import apply_s
-00036430: 6368 656d 6120 6173 205f 6170 706c 795f  chema as _apply_
-00036440: 7363 6865 6d61 0d0a 0d0a 2020 2020 2020  schema....      
-00036450: 2020 7265 7475 726e 205f 6170 706c 795f    return _apply_
-00036460: 7363 6865 6d61 2873 656c 662c 2073 6368  schema(self, sch
-00036470: 656d 6129 0d0a 0d0a 2020 2020 6465 6620  ema)....    def 
-00036480: 696e 666f 2873 656c 662c 202a 2a6b 7761  info(self, **kwa
-00036490: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
-000364a0: 2222 0d0a 2020 2020 2020 2020 5072 696e  ""..        Prin
-000364b0: 7420 6120 6465 7363 7269 7074 696f 6e20  t a description 
-000364c0: 6f66 2074 6865 2046 6173 7441 7272 6179  of the FastArray
-000364d0: 2773 2063 6f6e 7465 6e74 730d 0a20 2020  's contents..   
-000364e0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000364f0: 2020 6672 6f6d 202e 7274 5f6d 6574 6120    from .rt_meta 
-00036500: 696d 706f 7274 2069 6e66 6f20 6173 205f  import info as _
-00036510: 696e 666f 0d0a 0d0a 2020 2020 2020 2020  info....        
-00036520: 7265 7475 726e 205f 696e 666f 2873 656c  return _info(sel
-00036530: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
-00036540: 2020 2020 4070 726f 7065 7274 790d 0a20      @property.. 
-00036550: 2020 2064 6566 2064 6f63 2873 656c 6629     def doc(self)
-00036560: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00036570: 2020 2020 2020 2020 5468 6520 446f 6320          The Doc 
-00036580: 6f62 6a65 6374 2066 6f72 2074 6865 2073  object for the s
-00036590: 7472 7563 7475 7265 0d0a 2020 2020 2020  tructure..      
-000365a0: 2020 2222 220d 0a20 2020 2020 2020 2066    """..        f
-000365b0: 726f 6d20 2e72 745f 6d65 7461 2069 6d70  rom .rt_meta imp
-000365c0: 6f72 7420 646f 6320 6173 205f 646f 630d  ort doc as _doc.
-000365d0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-000365e0: 6e20 5f64 6f63 2873 656c 6629 0d0a 0d0a  n _doc(self)....
-000365f0: 2020 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d      # ==========
-00036600: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2045 4e44  ============ END
-00036610: 204f 4620 434c 4153 5320 4445 4649 4e49   OF CLASS DEFINI
-00036620: 5449 4f4e 203d 3d3d 3d3d 3d3d 3d3d 3d3d  TION ===========
-00036630: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00036640: 3d3d 3d3d 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ====......# ----
-00036650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036680: 2d2d 2d2d 2d2d 2d0d 0a64 6566 205f 7365  -------..def _se
-00036690: 7466 6173 7461 7272 6179 7669 6577 2861  tfastarrayview(a
-000366a0: 7272 293a 0d0a 2020 2020 2222 220d 0a20  rr):..    """.. 
-000366b0: 2020 2043 616c 6c20 6672 6f6d 2043 5050     Call from CPP
-000366c0: 2069 6e74 6f20 7079 7468 6f6e 2074 6f20   into python to 
-000366d0: 666c 6970 2061 7272 6179 2076 6965 770d  flip array view.
-000366e0: 0a20 2020 2022 2222 0d0a 2020 2020 6966  .    """..    if
-000366f0: 2069 7369 6e73 7461 6e63 6528 6172 722c   isinstance(arr,
-00036700: 2046 6173 7441 7272 6179 293a 0d0a 2020   FastArray):..  
-00036710: 2020 2020 2020 6966 2046 6173 7441 7272        if FastArr
-00036720: 6179 2e56 6572 626f 7365 203e 2032 3a0d  ay.Verbose > 2:.
-00036730: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00036740: 6e74 2822 6e6f 206e 6565 6420 746f 2073  nt("no need to s
-00036750: 6574 6661 7374 6172 7261 7976 6965 7722  etfastarrayview"
-00036760: 2c20 6172 722e 6474 7970 652c 206c 656e  , arr.dtype, len
-00036770: 2861 7272 2929 0d0a 2020 2020 2020 2020  (arr))..        
-00036780: 7265 7475 726e 2061 7272 0d0a 0d0a 2020  return arr....  
-00036790: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
-000367a0: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
-000367b0: 2020 2020 2070 7269 6e74 2822 7365 7466       print("setf
-000367c0: 6173 7461 7272 6179 7669 6577 222c 2061  astarrayview", a
-000367d0: 7272 2e64 7479 7065 2c20 6c65 6e28 6172  rr.dtype, len(ar
-000367e0: 7229 290d 0a0d 0a20 2020 2072 6574 7572  r))....    retur
-000367f0: 6e20 6172 722e 7669 6577 2846 6173 7441  n arr.view(FastA
-00036800: 7272 6179 290d 0a0d 0a0d 0a23 202d 2d2d  rray)......# ---
-00036810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036840: 2d2d 2d2d 2d2d 2d2d 0d0a 6465 6620 5f73  --------..def _s
-00036850: 6574 6661 7374 6172 7261 7974 7970 6528  etfastarraytype(
-00036860: 293a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ):..    # ------
-00036870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00036890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000368a0: 2d2d 2d2d 2d0d 0a20 2020 2023 2063 616c  -----..    # cal
-000368b0: 6c69 6e67 2074 6869 7320 6675 6e63 7469  ling this functi
-000368c0: 6f6e 2077 696c 6c20 666f 7263 6520 666d  on will force fm
-000368d0: 2074 6f20 7265 7475 726e 2046 6173 7441   to return FastA
-000368e0: 7272 6179 2073 7562 636c 6173 730d 0a20  rray subclass.. 
-000368f0: 2020 2023 2072 632e 4261 7369 634d 6174     # rc.BasicMat
-00036900: 6848 6f6f 6b28 4661 7374 4172 7261 792c  hHook(FastArray,
-00036910: 206e 702e 6e64 6172 7261 7929 0d0a 2020   np.ndarray)..  
-00036920: 2020 2320 436f 6d69 6e67 206e 6578 7420    # Coming next 
-00036930: 6275 696c 640d 0a20 2020 2066 6120 3d20  build..    fa = 
-00036940: 6e70 2e61 7261 6e67 6528 3129 2e76 6965  np.arange(1).vie
-00036950: 7728 4661 7374 4172 7261 7929 0d0a 2020  w(FastArray)..  
-00036960: 2020 7263 2e53 6574 4661 7374 4172 7261    rc.SetFastArra
-00036970: 7954 7970 6528 6661 2c20 5f73 6574 6661  yType(fa, _setfa
-00036980: 7374 6172 7261 7976 6965 7729 0d0a 2020  starrayview)..  
-00036990: 2020 7263 2e42 6173 6963 4d61 7468 486f    rc.BasicMathHo
-000369a0: 6f6b 2866 612c 2066 612e 5f6e 7029 0d0a  ok(fa, fa._np)..
-000369b0: 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d  ....# ----------
-000369c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000369d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000369e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000369f0: 2d0d 0a64 6566 205f 4669 7875 7044 6f63  -..def _FixupDoc
-00036a00: 5374 7269 6e67 7328 293a 0d0a 2020 2020  Strings():..    
-00036a10: 2222 220d 0a20 2020 204c 6f61 6420 616c  """..    Load al
-00036a20: 6c20 7468 6520 6d65 6d62 6572 2066 756e  l the member fun
-00036a30: 6374 696f 6e20 6f66 2074 6869 7320 6d6f  ction of this mo
-00036a40: 6475 6c65 0d0a 2020 2020 4c6f 6164 2061  dule..    Load a
-00036a50: 6c6c 2074 6865 206d 656d 6265 7220 6675  ll the member fu
-00036a60: 6e63 7469 6f6e 7320 6f66 2074 6865 206e  nctions of the n
-00036a70: 7020 6d6f 6475 6c65 0d0a 2020 2020 4966  p module..    If
-00036a80: 2077 6520 6669 6e64 2061 206d 6174 6368   we find a match
-00036a90: 2c20 636f 7079 206f 7665 7220 7468 6520  , copy over the 
-00036aa0: 646f 6320 7374 7269 6e67 730d 0a20 2020  doc strings..   
-00036ab0: 2022 2222 0d0a 2020 2020 696d 706f 7274   """..    import
-00036ac0: 2069 6e73 7065 6374 0d0a 2020 2020 696d   inspect..    im
-00036ad0: 706f 7274 2073 7973 0d0a 0d0a 2020 2020  port sys....    
-00036ae0: 6d79 6d6f 6475 6c65 203d 2073 7973 2e6d  mymodule = sys.m
-00036af0: 6f64 756c 6573 5b5f 5f6e 616d 655f 5f5d  odules[__name__]
-00036b00: 0d0a 2020 2020 616c 6c5f 6d79 6675 6e63  ..    all_myfunc
-00036b10: 7469 6f6e 7320 3d20 696e 7370 6563 742e  tions = inspect.
-00036b20: 6765 746d 656d 6265 7273 2846 6173 7441  getmembers(FastA
-00036b30: 7272 6179 2c20 696e 7370 6563 742e 6973  rray, inspect.is
-00036b40: 6675 6e63 7469 6f6e 290d 0a0d 0a20 2020  function)....   
-00036b50: 2074 7279 3a0d 0a20 2020 2020 2020 2023   try:..        #
-00036b60: 2062 6f74 746c 656e 6563 6b20 6973 206f   bottleneck is o
-00036b70: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-00036b80: 2061 6c6c 5f62 6e66 756e 6374 696f 6e73   all_bnfunctions
-00036b90: 203d 2069 6e73 7065 6374 2e67 6574 6d65   = inspect.getme
-00036ba0: 6d62 6572 7328 626e 2c20 696e 7370 6563  mbers(bn, inspec
-00036bb0: 742e 6973 6675 6e63 7469 6f6e 290d 0a20  t.isfunction).. 
-00036bc0: 2020 2020 2020 2061 6c6c 5f62 6e66 756e         all_bnfun
-00036bd0: 6374 696f 6e73 202b 3d20 696e 7370 6563  ctions += inspec
-00036be0: 742e 6765 746d 656d 6265 7273 2862 6e2c  t.getmembers(bn,
-00036bf0: 2069 6e73 7065 6374 2e69 7362 7569 6c74   inspect.isbuilt
-00036c00: 696e 290d 0a0d 0a20 2020 2020 2020 2023  in)....        #
-00036c10: 2062 7569 6c64 2064 6963 7469 6f6e 6172   build dictionar
-00036c20: 7920 6f66 2062 6f74 746c 656e 6563 6b20  y of bottleneck 
-00036c30: 646f 6373 0d0a 2020 2020 2020 2020 626e  docs..        bn
-00036c40: 6469 6374 203d 207b 7d0d 0a20 2020 2020  dict = {}..     
-00036c50: 2020 2066 6f72 2066 756e 6373 2069 6e20     for funcs in 
-00036c60: 616c 6c5f 626e 6675 6e63 7469 6f6e 733a  all_bnfunctions:
-00036c70: 0d0a 2020 2020 2020 2020 2020 2020 626e  ..            bn
-00036c80: 6469 6374 5b66 756e 6373 5b30 5d5d 203d  dict[funcs[0]] =
-00036c90: 2066 756e 6373 5b31 5d0d 0a0d 0a20 2020   funcs[1]....   
-00036ca0: 2020 2020 2023 206e 6f77 2066 6f72 2065       # now for e
-00036cb0: 6163 6820 6675 6e63 7469 6f6e 2074 6861  ach function tha
-00036cc0: 7420 6861 7320 616e 2062 6e20 666c 6176  t has an bn flav
-00036cd0: 6f72 2c20 636f 7079 206f 7665 7220 7468  or, copy over th
-00036ce0: 6520 646f 6320 7374 7269 6e67 730d 0a20  e doc strings.. 
-00036cf0: 2020 2020 2020 2066 6f72 2066 756e 6373         for funcs
-00036d00: 2069 6e20 616c 6c5f 6d79 6675 6e63 7469   in all_myfuncti
-00036d10: 6f6e 733a 0d0a 2020 2020 2020 2020 2020  ons:..          
-00036d20: 2020 6966 2028 6675 6e63 735b 305d 2069    if (funcs[0] i
-00036d30: 6e20 626e 6469 6374 2920 616e 6420 2866  n bndict) and (f
-00036d40: 756e 6373 5b31 5d2e 5f5f 646f 635f 5f20  uncs[1].__doc__ 
-00036d50: 6973 204e 6f6e 6529 3a0d 0a20 2020 2020  is None):..     
-00036d60: 2020 2020 2020 2020 2020 2066 756e 6373             funcs
-00036d70: 5b31 5d2e 5f5f 646f 635f 5f20 3d20 626e  [1].__doc__ = bn
-00036d80: 6469 6374 5b66 756e 6373 5b30 5d5d 2e5f  dict[funcs[0]]._
-00036d90: 5f64 6f63 5f5f 0d0a 2020 2020 6578 6365  _doc__..    exce
-00036da0: 7074 2045 7863 6570 7469 6f6e 3a0d 0a20  pt Exception:.. 
-00036db0: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
-00036dc0: 2020 2061 6c6c 5f6e 7066 756e 6374 696f     all_npfunctio
-00036dd0: 6e73 203d 205b 6675 6e63 2066 6f72 2066  ns = [func for f
-00036de0: 756e 6320 696e 2069 6e73 7065 6374 2e67  unc in inspect.g
-00036df0: 6574 6d65 6d62 6572 7328 6e70 2e6e 6461  etmembers(np.nda
-00036e00: 7272 6179 2920 6966 206e 6f74 2066 756e  rray) if not fun
-00036e10: 635b 305d 2e73 7461 7274 7377 6974 6828  c[0].startswith(
-00036e20: 225f 2229 5d0d 0a0d 0a20 2020 2023 2062  "_")]....    # b
-00036e30: 7569 6c64 2064 6963 7469 6f6e 6172 7920  uild dictionary 
-00036e40: 6f66 206e 702e 6e64 6172 7261 7920 646f  of np.ndarray do
-00036e50: 6373 0d0a 2020 2020 6e70 6469 6374 203d  cs..    npdict =
-00036e60: 207b 7d0d 0a20 2020 2066 6f72 2066 756e   {}..    for fun
-00036e70: 6373 2069 6e20 616c 6c5f 6e70 6675 6e63  cs in all_npfunc
-00036e80: 7469 6f6e 733a 0d0a 2020 2020 2020 2020  tions:..        
-00036e90: 6e70 6469 6374 5b66 756e 6373 5b30 5d5d  npdict[funcs[0]]
-00036ea0: 203d 2066 756e 6373 5b31 5d0d 0a0d 0a20   = funcs[1].... 
-00036eb0: 2020 2023 206e 6f77 2066 6f72 2065 6163     # now for eac
-00036ec0: 6820 6675 6e63 7469 6f6e 2074 6861 7420  h function that 
-00036ed0: 6861 7320 616e 206e 7020 666c 6176 6f72  has an np flavor
-00036ee0: 2c20 636f 7079 206f 7665 7220 7468 6520  , copy over the 
-00036ef0: 646f 6320 7374 7269 6e67 730d 0a20 2020  doc strings..   
-00036f00: 2066 6f72 2066 756e 6373 2069 6e20 616c   for funcs in al
-00036f10: 6c5f 6d79 6675 6e63 7469 6f6e 733a 0d0a  l_myfunctions:..
-00036f20: 2020 2020 2020 2020 6966 2028 6675 6e63          if (func
-00036f30: 735b 305d 2069 6e20 6e70 6469 6374 2920  s[0] in npdict) 
-00036f40: 616e 6420 2866 756e 6373 5b31 5d2e 5f5f  and (funcs[1].__
-00036f50: 646f 635f 5f20 6973 204e 6f6e 6529 3a0d  doc__ is None):.
-00036f60: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-00036f70: 6373 5b31 5d2e 5f5f 646f 635f 5f20 3d20  cs[1].__doc__ = 
-00036f80: 6e70 6469 6374 5b66 756e 6373 5b30 5d5d  npdict[funcs[0]]
-00036f90: 2e5f 5f64 6f63 5f5f 0d0a 0d0a 2020 2020  .__doc__....    
-00036fa0: 2320 6e6f 7720 646f 206a 7573 7420 706c  # now do just pl
-00036fb0: 6169 6e20 6e70 0d0a 2020 2020 616c 6c5f  ain np..    all_
-00036fc0: 6e70 6675 6e63 7469 6f6e 7320 3d20 5b66  npfunctions = [f
-00036fd0: 756e 6320 666f 7220 6675 6e63 2069 6e20  unc for func in 
-00036fe0: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
-00036ff0: 7273 286e 7029 2069 6620 225f 5f22 206e  rs(np) if "__" n
-00037000: 6f74 2069 6e20 6675 6e63 735b 305d 5d0d  ot in funcs[0]].
-00037010: 0a0d 0a20 2020 2023 2062 7569 6c64 2064  ...    # build d
-00037020: 6963 7469 6f6e 6172 7920 6f66 206e 7020  ictionary of np 
-00037030: 646f 6373 0d0a 2020 2020 6e70 6469 6374  docs..    npdict
-00037040: 203d 207b 7d0d 0a20 2020 2066 6f72 2066   = {}..    for f
-00037050: 756e 6373 2069 6e20 616c 6c5f 6e70 6675  uncs in all_npfu
-00037060: 6e63 7469 6f6e 733a 0d0a 2020 2020 2020  nctions:..      
-00037070: 2020 2320 7072 696e 7428 2267 6574 7469    # print("getti
-00037080: 6e67 2064 6f63 2073 7472 696e 6720 666f  ng doc string fo
-00037090: 7220 222c 2066 756e 6373 5b30 5d29 0d0a  r ", funcs[0])..
-000370a0: 2020 2020 2020 2020 6e70 6469 6374 5b66          npdict[f
-000370b0: 756e 6373 5b30 5d5d 203d 2066 756e 6373  uncs[0]] = funcs
-000370c0: 5b31 5d0d 0a0d 0a20 2020 2023 206e 6f77  [1]....    # now
-000370d0: 2066 6f72 2065 6163 6820 6675 6e63 7469   for each functi
-000370e0: 6f6e 2074 6861 7420 6861 7320 616e 206e  on that has an n
-000370f0: 7020 666c 6176 6f72 2c20 636f 7079 206f  p flavor, copy o
-00037100: 7665 7220 7468 6520 646f 6320 7374 7269  ver the doc stri
-00037110: 6e67 730d 0a20 2020 2066 6f72 2066 756e  ngs..    for fun
-00037120: 6373 2069 6e20 616c 6c5f 6d79 6675 6e63  cs in all_myfunc
-00037130: 7469 6f6e 733a 0d0a 2020 2020 2020 2020  tions:..        
-00037140: 6966 2028 6675 6e63 735b 305d 2069 6e20  if (funcs[0] in 
-00037150: 6e70 6469 6374 2920 616e 6420 2866 756e  npdict) and (fun
-00037160: 6373 5b31 5d2e 5f5f 646f 635f 5f20 6973  cs[1].__doc__ is
-00037170: 204e 6f6e 6529 3a0d 0a20 2020 2020 2020   None):..       
-00037180: 2020 2020 2066 756e 6373 5b31 5d2e 5f5f       funcs[1].__
-00037190: 646f 635f 5f20 3d20 6e70 6469 6374 5b66  doc__ = npdict[f
-000371a0: 756e 6373 5b30 5d5d 2e5f 5f64 6f63 5f5f  uncs[0]].__doc__
-000371b0: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
-000371c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000371d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000371e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000371f0: 2d2d 0d0a 636c 6173 7320 5468 7265 6164  --..class Thread
-00037200: 696e 673a 0d0a 2020 2020 4073 7461 7469  ing:..    @stati
-00037210: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00037220: 206f 6e28 293a 0d0a 2020 2020 2020 2020   on():..        
-00037230: 2222 220d 0a20 2020 2020 2020 2054 7572  """..        Tur
-00037240: 6e20 7269 7074 6162 6c65 2074 6872 6561  n riptable threa
-00037250: 6469 6e67 206f 6e2e 0d0a 2020 2020 2020  ding on...      
-00037260: 2020 5573 6564 206f 6e6c 7920 7768 656e    Used only when
-00037270: 2072 6970 7461 626c 6520 7468 7265 6164   riptable thread
-00037280: 696e 6720 7761 7320 7475 726e 6564 206f  ing was turned o
-00037290: 6666 2e0d 0a0d 0a20 2020 2020 2020 2045  ff.....        E
-000372a0: 7861 6d70 6c65 0d0a 2020 2020 2020 2020  xample..        
-000372b0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000372c0: 2061 3d72 742e 6172 616e 6765 2831 5f30   a=rt.arange(1_0
-000372d0: 3030 5f30 3029 0d0a 2020 2020 2020 2020  00_00)..        
-000372e0: 5468 7265 6164 696e 672e 6f66 6628 290d  Threading.off().
-000372f0: 0a20 2020 2020 2020 2025 7469 6d65 2061  .        %time a
-00037300: 2b3d 310d 0a20 2020 2020 2020 2054 6872  +=1..        Thr
-00037310: 6561 6469 6e67 2e6f 6e28 290d 0a20 2020  eading.on()..   
-00037320: 2020 2020 2025 7469 6d65 2061 2b3d 310d       %time a+=1.
-00037330: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00037340: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00037350: 2d2d 2d0d 0a20 2020 2020 2020 2050 7265  ---..        Pre
-00037360: 7669 6f75 736c 7920 7768 6574 6865 7220  viously whether 
-00037370: 7468 7265 6164 696e 6720 7761 7320 6f6e  threading was on
-00037380: 206f 7220 6e6f 742e 2030 206f 7220 312e   or not. 0 or 1.
-00037390: 2030 3d74 6872 6561 6469 6e67 2077 6173   0=threading was
-000373a0: 206f 6666 2062 6566 6f72 652e 0d0a 0d0a   off before.....
-000373b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000373c0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-000373d0: 4172 7261 792e 5f54 4f4e 2829 0d0a 0d0a  Array._TON()....
-000373e0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-000373f0: 640d 0a20 2020 2064 6566 206f 6666 2829  d..    def off()
-00037400: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00037410: 2020 2020 2020 2020 5475 726e 2072 6970          Turn rip
-00037420: 7461 626c 6520 7468 7265 6164 696e 6720  table threading 
-00037430: 6f66 662e 0d0a 2020 2020 2020 2020 5573  off...        Us
-00037440: 6566 756c 2066 6f72 2077 6865 6e20 7468  eful for when th
-00037450: 6520 7379 7374 656d 2068 6173 206f 7468  e system has oth
-00037460: 6572 2070 726f 6365 7373 6573 2075 7369  er processes usi
-00037470: 6e67 206f 7468 6572 2074 6872 6561 6473  ng other threads
-00037480: 0d0a 2020 2020 2020 2020 6f72 2074 6f20  ..        or to 
-00037490: 6c69 6d69 7420 7468 7265 6164 696e 6720  limit threading 
-000374a0: 7265 736f 7572 6365 732e 0d0a 0d0a 2020  resources.....  
-000374b0: 2020 2020 2020 4578 616d 706c 650d 0a20        Example.. 
-000374c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-000374d0: 2020 2020 2020 2020 613d 7274 2e61 7261          a=rt.ara
-000374e0: 6e67 6528 315f 3030 305f 3030 290d 0a20  nge(1_000_00).. 
-000374f0: 2020 2020 2020 2054 6872 6561 6469 6e67         Threading
-00037500: 2e6f 6666 2829 0d0a 2020 2020 2020 2020  .off()..        
-00037510: 2574 696d 6520 612b 3d31 0d0a 2020 2020  %time a+=1..    
-00037520: 2020 2020 5468 7265 6164 696e 672e 6f6e      Threading.on
-00037530: 2829 0d0a 2020 2020 2020 2020 2574 696d  ()..        %tim
-00037540: 6520 612b 3d31 0d0a 0d0a 2020 2020 2020  e a+=1....      
-00037550: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00037560: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00037570: 2020 2020 5072 6576 696f 7573 6c79 2077      Previously w
-00037580: 6865 7468 6572 2074 6872 6561 6469 6e67  hether threading
-00037590: 2077 6173 206f 6e20 6f72 206e 6f74 2e20   was on or not. 
-000375a0: 3020 6f72 2031 2e20 303d 7468 7265 6164  0 or 1. 0=thread
-000375b0: 696e 6720 7761 7320 6f66 6620 6265 666f  ing was off befo
-000375c0: 7265 2e0d 0a20 2020 2020 2020 2022 2222  re...        """
-000375d0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000375e0: 2046 6173 7441 7272 6179 2e5f 544f 4646   FastArray._TOFF
-000375f0: 2829 0d0a 0d0a 2020 2020 4073 7461 7469  ()....    @stati
-00037600: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00037610: 2074 6872 6561 6473 2874 6872 6561 6463   threads(threadc
-00037620: 6f75 6e74 293a 0d0a 2020 2020 2020 2020  ount):..        
-00037630: 2222 220d 0a20 2020 2020 2020 2053 6574  """..        Set
-00037640: 2068 6f77 206d 616e 7920 776f 726b 6572   how many worker
-00037650: 2074 6872 6561 6473 2072 6970 7461 626c   threads riptabl
-00037660: 6520 6361 6e20 7573 652e 0d0a 2020 2020  e can use...    
-00037670: 2020 2020 4f66 7465 6e20 6465 6661 756c      Often defaul
-00037680: 7473 2074 6f20 3132 2061 6e64 2063 616e  ts to 12 and can
-00037690: 6e6f 7420 6265 2073 6574 2062 656c 6f77  not be set below
-000376a0: 2031 206f 7220 3e20 3331 2e0d 0a0d 0a20   1 or > 31..... 
-000376b0: 2020 2020 2020 2054 6f20 7475 726e 2072         To turn r
-000376c0: 6970 7461 626c 6520 7468 7265 6164 696e  iptable threadin
-000376d0: 6720 6f66 6620 636f 6d70 6c65 7465 6c79  g off completely
-000376e0: 2075 7365 2054 6872 6561 6469 6e67 2e6f   use Threading.o
-000376f0: 6666 2829 0d0a 2020 2020 2020 2020 5573  ff()..        Us
-00037700: 6566 756c 2066 6f72 2077 6865 6e20 7468  eful for when th
-00037710: 6520 7379 7374 656d 2068 6173 206f 7468  e system has oth
-00037720: 6572 2070 726f 6365 7373 6573 2075 7369  er processes usi
-00037730: 6e67 206f 7468 6572 2074 6872 6561 6473  ng other threads
-00037740: 0d0a 2020 2020 2020 2020 6f72 2074 6f20  ..        or to 
-00037750: 6c69 6d69 7420 7468 7265 6164 696e 6720  limit threading 
-00037760: 7265 736f 7572 6365 732e 0d0a 0d0a 2020  resources.....  
-00037770: 2020 2020 2020 4578 616d 706c 650d 0a20        Example.. 
-00037780: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00037790: 2020 2020 2020 2020 5468 7265 6164 696e          Threadin
-000377a0: 672e 7468 7265 6164 7328 3829 0d0a 0d0a  g.threads(8)....
-000377b0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-000377c0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-000377d0: 0d0a 2020 2020 2020 2020 6e75 6d62 6572  ..        number
-000377e0: 206f 6620 7468 7265 6164 7320 7072 6576   of threads prev
-000377f0: 696f 7573 6c79 2075 7365 640d 0a20 2020  iously used..   
-00037800: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00037810: 2020 7265 7475 726e 2072 632e 5365 7454    return rc.SetT
-00037820: 6872 6561 6457 616b 6555 7028 7468 7265  hreadWakeUp(thre
-00037830: 6164 636f 756e 7429 0d0a 0d0a 0d0a 2320  adcount)......# 
-00037840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037870: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 636c 6173  ----------..clas
-00037880: 7320 5265 6379 636c 653a 0d0a 2020 2020  s Recycle:..    
-00037890: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-000378a0: 2020 2064 6566 206f 6e28 293a 0d0a 2020     def on():..  
-000378b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000378c0: 2020 2054 7572 6e20 7269 7074 6162 6c65     Turn riptable
-000378d0: 2072 6563 7963 6c69 6e67 206f 6e2e 0d0a   recycling on...
-000378e0: 2020 2020 2020 2020 5573 6564 206f 6e6c          Used onl
-000378f0: 7920 7768 656e 2072 6970 7461 626c 6520  y when riptable 
-00037900: 7265 6379 636c 696e 6720 7761 7320 7475  recycling was tu
-00037910: 726e 6564 206f 6666 2e0d 0a0d 0a20 2020  rned off.....   
-00037920: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
-00037930: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00037940: 2020 2020 2020 2061 3d61 7261 6e67 6528         a=arange(
-00037950: 315f 3030 305f 3030 290d 0a20 2020 2020  1_000_00)..     
-00037960: 2020 2052 6563 7963 6c65 2e6f 6666 2829     Recycle.off()
-00037970: 0d0a 2020 2020 2020 2020 2574 696d 6569  ..        %timei
-00037980: 7420 613d 6120 2b20 310d 0a20 2020 2020  t a=a + 1..     
-00037990: 2020 2052 6563 7963 6c65 2e6f 6e28 290d     Recycle.on().
-000379a0: 0a20 2020 2020 2020 2025 7469 6d65 6974  .        %timeit
-000379b0: 2061 3d61 202b 2031 0d0a 0d0a 2020 2020   a=a + 1....    
-000379c0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000379d0: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
-000379e0: 792e 5f52 4f4e 2829 0d0a 0d0a 2020 2020  y._RON()....    
-000379f0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00037a00: 2020 2064 6566 206f 6666 2829 3a0d 0a20     def off():.. 
-00037a10: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00037a20: 7374 4172 7261 792e 5f52 4f46 4628 290d  stArray._ROFF().
-00037a30: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00037a40: 7468 6f64 0d0a 2020 2020 6465 6620 6e6f  thod..    def no
-00037a50: 7728 7469 6d65 6f75 743a 2069 6e74 203d  w(timeout: int =
-00037a60: 2030 293a 0d0a 2020 2020 2020 2020 2222   0):..        ""
-00037a70: 220d 0a20 2020 2020 2020 2050 6173 7320  "..        Pass 
-00037a80: 7468 6520 6761 7262 6167 6520 636f 6c6c  the garbage coll
-00037a90: 6563 746f 7220 7469 6d65 6f75 7420 7661  ector timeout va
-00037aa0: 6c75 6520 746f 2063 6c65 616e 7570 2e0d  lue to cleanup..
-00037ab0: 0a20 2020 2020 2020 2041 6c73 6f20 6361  .        Also ca
-00037ac0: 6c6c 7320 7468 6520 7079 7468 6f6e 2067  lls the python g
-00037ad0: 6172 6261 6765 2063 6f6c 6c65 6374 6f72  arbage collector
-00037ae0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00037af0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00037b00: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00037b10: 2020 2020 2074 696d 656f 7574 3a20 6465       timeout: de
-00037b20: 6661 756c 7420 746f 2030 2e20 2030 2077  fault to 0.  0 w
-00037b30: 696c 6c20 6e6f 7420 7365 7420 6120 7469  ill not set a ti
-00037b40: 6d65 6f75 740d 0a0d 0a20 2020 2020 2020  meout....       
-00037b50: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00037b60: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00037b70: 2020 2074 6f74 616c 2061 7272 6179 7320     total arrays 
-00037b80: 6465 6c65 7465 640d 0a20 2020 2020 2020  deleted..       
-00037b90: 2022 2222 0d0a 2020 2020 2020 2020 696d   """..        im
-00037ba0: 706f 7274 2067 630d 0a0d 0a20 2020 2020  port gc....     
-00037bb0: 2020 2067 632e 636f 6c6c 6563 7428 290d     gc.collect().
-00037bc0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00037bd0: 3d20 7263 2e52 6563 7963 6c65 4761 7262  = rc.RecycleGarb
-00037be0: 6167 6543 6f6c 6c65 6374 4e6f 7728 7469  ageCollectNow(ti
-00037bf0: 6d65 6f75 7429 5b22 546f 7461 6c44 656c  meout)["TotalDel
-00037c00: 6574 6564 225d 0d0a 2020 2020 2020 2020  eted"]..        
-00037c10: 6966 2072 6573 756c 7420 3e20 303a 0d0a  if result > 0:..
-00037c20: 2020 2020 2020 2020 2020 2020 7263 2e52              rc.R
-00037c30: 6563 7963 6c65 4761 7262 6167 6543 6f6c  ecycleGarbageCol
-00037c40: 6c65 6374 4e6f 7728 7469 6d65 6f75 7429  lectNow(timeout)
-00037c50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00037c60: 2072 6573 756c 740d 0a0d 0a20 2020 2040   result....    @
-00037c70: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-00037c80: 2020 6465 6620 7469 6d65 6f75 7428 7469    def timeout(ti
-00037c90: 6d65 6f75 743a 2069 6e74 203d 2031 3030  meout: int = 100
-00037ca0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00037cb0: 0a20 2020 2020 2020 2050 6173 7320 7468  .        Pass th
-00037cc0: 6520 6761 7262 6167 6520 636f 6c6c 6563  e garbage collec
-00037cd0: 746f 7220 7469 6d65 6f75 7420 7661 6c75  tor timeout valu
-00037ce0: 6520 746f 2065 7870 6972 652e 0d0a 2020  e to expire...  
-00037cf0: 2020 2020 2020 5468 6520 7469 6d65 6f75        The timeou
-00037d00: 7420 7661 6c75 6520 6973 2072 6f75 6768  t value is rough
-00037d10: 6c79 2069 6e20 322f 3520 7365 6373 2e0d  ly in 2/5 secs..
-00037d20: 0a20 2020 2020 2020 2041 2076 616c 7565  .        A value
-00037d30: 206f 6620 3130 3020 6973 2075 7375 616c   of 100 is usual
-00037d40: 6c79 2061 626f 7574 2034 3020 7365 636f  ly about 40 seco
-00037d50: 6e64 732e 0d0a 2020 2020 2020 2020 4966  nds...        If
-00037d60: 2061 6e20 6172 7261 7920 6861 7320 6e6f   an array has no
-00037d70: 7420 6265 656e 2072 6575 7365 6420 6279  t been reused by
-00037d80: 2074 6865 2074 696d 656f 7574 2c20 6974   the timeout, it
-00037d90: 2069 7320 7065 726d 616e 656e 746c 7920   is permanently 
-00037da0: 6465 6c65 7465 642e 0d0a 0d0a 2020 2020  deleted.....    
-00037db0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-00037dc0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-00037dd0: 2020 2020 2020 7072 6576 696f 7573 2074        previous t
-00037de0: 696d 6573 7061 6e0d 0a20 2020 2020 2020  imespan..       
-00037df0: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
-00037e00: 7475 726e 2072 632e 5265 6379 636c 6553  turn rc.RecycleS
-00037e10: 6574 4761 7262 6167 6543 6f6c 6c65 6374  etGarbageCollect
-00037e20: 5469 6d65 6f75 7428 7469 6d65 6f75 7429  Timeout(timeout)
-00037e30: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
-00037e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e70: 2d2d 0d0a 636c 6173 7320 4c65 6467 6572  --..class Ledger
-00037e80: 3a0d 0a20 2020 2040 7374 6174 6963 6d65  :..    @staticme
-00037e90: 7468 6f64 0d0a 2020 2020 6465 6620 6f6e  thod..    def on
-00037ea0: 2829 3a0d 0a20 2020 2020 2020 2022 2222  ():..        """
-00037eb0: 5475 726e 2074 6865 206d 6174 6820 6c65  Turn the math le
-00037ec0: 6467 6572 206f 6e20 746f 2072 6563 6f72  dger on to recor
-00037ed0: 6420 616c 6c20 6172 7261 7920 6d61 7468  d all array math
-00037ee0: 2072 6f75 7469 6e65 7322 2222 0d0a 2020   routines"""..  
-00037ef0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-00037f00: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-00037f10: 6467 6572 2e5f 4c65 6467 6572 4f6e 2829  dger._LedgerOn()
-00037f20: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00037f30: 6574 686f 640d 0a20 2020 2064 6566 206f  ethod..    def o
-00037f40: 6666 2829 3a0d 0a20 2020 2020 2020 2022  ff():..        "
-00037f50: 2222 5475 726e 2074 6865 206d 6174 6820  ""Turn the math 
-00037f60: 6c65 6467 6572 206f 6666 2222 220d 0a20  ledger off""".. 
-00037f70: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
-00037f80: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-00037f90: 6564 6765 722e 5f4c 6564 6765 724f 6666  edger._LedgerOff
-00037fa0: 2829 0d0a 0d0a 2020 2020 4073 7461 7469  ()....    @stati
-00037fb0: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00037fc0: 2064 756d 7028 6461 7461 7365 743d 5472   dump(dataset=Tr
-00037fd0: 7565 293a 0d0a 2020 2020 2020 2020 2222  ue):..        ""
-00037fe0: 2250 7269 6e74 206f 7574 2074 6865 206d  "Print out the m
-00037ff0: 6174 6820 6c65 6467 6572 2222 220d 0a20  ath ledger""".. 
-00038000: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
-00038010: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-00038020: 6564 6765 722e 5f4c 6564 6765 7244 756d  edger._LedgerDum
-00038030: 7028 6461 7461 7365 743d 6461 7461 7365  p(dataset=datase
-00038040: 7429 0d0a 0d0a 2020 2020 4073 7461 7469  t)....    @stati
-00038050: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-00038060: 2074 6f5f 6669 6c65 2866 696c 656e 616d   to_file(filenam
-00038070: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-00038080: 5361 7665 2074 6865 206d 6174 6820 6c65  Save the math le
-00038090: 6467 6572 2074 6f20 6120 6669 6c65 2222  dger to a file""
-000380a0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-000380b0: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
-000380c0: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
-000380d0: 7244 756d 7046 696c 6528 6669 6c65 6e61  rDumpFile(filena
-000380e0: 6d65 290d 0a0d 0a20 2020 2040 7374 6174  me)....    @stat
-000380f0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-00038100: 6620 636c 6561 7228 293a 0d0a 2020 2020  f clear():..    
-00038110: 2020 2020 2222 2243 6c65 6172 2061 6c6c      """Clear all
-00038120: 2074 6865 2065 6e74 7269 6573 2069 6e20   the entries in 
-00038130: 7468 6520 6d61 7468 206c 6564 6765 7222  the math ledger"
-00038140: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00038150: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
-00038160: 4d61 7468 4c65 6467 6572 2e5f 4c65 6467  MathLedger._Ledg
-00038170: 6572 436c 6561 7228 290d 0a0d 0a0d 0a23  erClear()......#
-00038180: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00038190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000381a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000381b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2074  -----------..# t
-000381c0: 6869 7320 6973 2063 616c 6c65 6420 7768  his is called wh
-000381d0: 656e 2074 6865 206d 6f64 756c 6520 6973  en the module is
-000381e0: 206c 6f61 6465 640d 0a5f 4669 7875 7044   loaded.._FixupD
-000381f0: 6f63 5374 7269 6e67 7328 290d 0a0d 0a23  ocStrings()....#
-00038200: 204e 4f54 453a 204b 6565 7020 7468 6973   NOTE: Keep this
-00038210: 2061 7420 7468 6520 656e 6420 6f66 2074   at the end of t
-00038220: 6865 2066 696c 650d 0a23 202d 2d2d 2d2d  he file..# -----
-00038230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038260: 2d2d 2d2d 2d2d 0d0a 2320 6361 6c6c 696e  ------..# callin
-00038270: 6720 7468 6973 2066 756e 6374 696f 6e20  g this function 
-00038280: 7769 6c6c 2066 6f72 6365 2066 6d20 746f  will force fm to
-00038290: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
-000382a0: 7920 7375 6263 6c61 7373 0d0a 5f73 6574  y subclass.._set
-000382b0: 6661 7374 6172 7261 7974 7970 6528 290d  fastarraytype().
-000382c0: 0a0d 0a54 7970 6552 6567 6973 7465 722e  ...TypeRegister.
-000382d0: 4661 7374 4172 7261 7920 3d20 4661 7374  FastArray = Fast
-000382e0: 4172 7261 790d 0a0d 0a46 6173 7441 7272  Array....FastArr
-000382f0: 6179 2e72 6567 6973 7465 725f 6675 6e63  ay.register_func
-00038300: 7469 6f6e 2822 6465 7363 7269 6265 222c  tion("describe",
-00038310: 2064 6573 6372 6962 6529 0d0a             describe)..
+0002c940: 2020 2061 7267 735b 315d 203d 205f 4153     args[1] = _AS
+0002c950: 5459 5045 2861 7267 735b 315d 2c20 6669  TYPE(args[1], fi
+0002c960: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
+0002c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c990: 2020 2020 2320 544a 4420 6368 6563 6b20      # TJD check 
+0002c9a0: 6c6f 6769 6320 6865 7265 2e2e 2e20 7768  logic here... wh
+0002c9b0: 6174 2064 6f65 7320 6e75 6d70 7920 7768  at does numpy wh
+0002c9c0: 656e 2069 6e74 2a20 2a20 7569 6e74 3820  en int* * uint8 
+0002c9d0: 3f20 7370 6565 6420 7465 7374 0d0a 2020  ? speed test..  
+0002c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca00: 2020 2020 2020 2323 5573 654e 756d 7079        ##UseNumpy
+0002ca10: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+0002ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca30: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca50: 2020 2020 2020 2020 2020 2020 2320 5550              # UP
+0002ca60: 4341 5354 2052 554c 4553 2077 6865 6e20  CAST RULES when 
+0002ca70: 6f6e 6520 6973 2061 2073 6361 6c61 720d  one is a scalar.
+0002ca80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ca90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002caa0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
+0002cab0: 305d 2021 3d20 6669 6e61 6c5f 6474 7970  0] != final_dtyp
+0002cac0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cae0: 2020 2020 2020 2020 2320 7768 6963 6820          # which 
+0002caf0: 6172 6775 6d65 6e74 2069 7320 7468 6520  argument is the 
+0002cb00: 7363 616c 6172 3f20 2063 6f6e 7665 7274  scalar?  convert
+0002cb10: 2074 6865 206f 7468 6572 206f 6e65 0d0a   the other one..
+0002cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb40: 2020 2020 6966 2074 7970 6528 6172 6773      if type(args
+0002cb50: 5b30 5d29 2069 6e20 5363 616c 6172 5479  [0]) in ScalarTy
+0002cb60: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
+0002cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb80: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+0002cb90: 7269 6e74 2822 636f 6e76 6572 7469 6e67  rint("converting
+0002cba0: 2061 7267 3220 6672 6f6d 222c 2061 7267   arg2 from", arg
+0002cbb0: 735b 315d 2c20 6669 6e61 6c5f 6474 7970  s[1], final_dtyp
+0002cbc0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0002cbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cbe0: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002cbf0: 5b31 5d20 3d20 5f41 5354 5950 4528 6172  [1] = _ASTYPE(ar
+0002cc00: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
+0002cc10: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+0002cc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc30: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc60: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002cc70: 2263 6f6e 7665 7274 696e 6720 6172 6731  "converting arg1
+0002cc80: 2066 726f 6d20 222c 2061 7267 735b 305d   from ", args[0]
+0002cc90: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
+0002cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ccc0: 2020 2020 2020 2020 6172 6773 5b30 5d20          args[0] 
+0002ccd0: 3d20 5f41 5354 5950 4528 6172 6773 5b30  = _ASTYPE(args[0
+0002cce0: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
+0002ccf0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0002cd00: 206e 6f74 2061 2062 696e 6172 7920 7566   not a binary uf
+0002cd10: 756e 632c 2063 6865 636b 2066 6f72 2075  unc, check for u
+0002cd20: 6e61 7279 2075 6675 6e63 0d0a 2020 2020  nary ufunc..    
+0002cd30: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+0002cd40: 666f 7220 6a75 7374 2031 2069 6e70 7574  for just 1 input
+0002cd50: 2028 756e 6172 7929 0d0a 0d0a 2020 2020   (unary)....    
+0002cd60: 2020 2020 2020 2020 656c 6966 2028 7566          elif (uf
+0002cd70: 756e 632e 6e69 6e20 3d3d 2031 2920 616e  unc.nin == 1) an
+0002cd80: 6420 2875 6675 6e63 2e6e 6f75 7420 3d3d  d (ufunc.nout ==
+0002cd90: 2031 293a 0d0a 2020 2020 2020 2020 2020   1):..          
+0002cda0: 2020 2020 2020 2323 2323 2323 2323 2323        ##########
+0002cdb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002cdc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002cdd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002cde0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002cdf0: 230d 0a20 2020 2020 2020 2020 2020 2020  #..             
+0002ce00: 2020 2023 2320 554e 4152 590d 0a20 2020     ## UNARY..   
+0002ce10: 2020 2020 2020 2020 2020 2020 2023 2323               ###
+0002ce20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002ce30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002ce40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002ce50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002ce60: 2323 2323 2323 2323 0d0a 2020 2020 2020  ########..      
+0002ce70: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
+0002ce80: 756e 6374 696f 6e20 3d20 6755 6e61 7279  unction = gUnary
+0002ce90: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
+0002cea0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0002ceb0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002cec0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002ced0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002cee0: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
+0002cef0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0002cf00: 2822 2a2a 2a75 6e6b 6e6f 776e 2075 6675  ("***unknown ufu
+0002cf10: 6e63 2061 7267 2073 7479 6c65 3a20 222c  nc arg style: ",
+0002cf20: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
+0002cf30: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
+0002cf40: 7267 732c 206b 7761 7267 7329 0d0a 0d0a  rgs, kwargs)....
+0002cf50: 2020 2020 2020 2020 2320 2d2d 2d2d 2d2d          # ------
+0002cf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cf80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cf90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cfa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cfb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002cfc0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0002cfd0: 2069 6620 6e6f 7420 4661 7374 4172 7261   if not FastArra
+0002cfe0: 792e 4661 7374 6572 5546 756e 633a 0d0a  y.FasterUFunc:..
+0002cff0: 2020 2020 2020 2020 2020 2020 6661 7374              fast
+0002d000: 5f66 756e 6374 696f 6e20 3d20 4e6f 6e65  _function = None
+0002d010: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0002d020: 6475 6365 5f66 756e 6320 3d20 4e6f 6e65  duce_func = None
+0002d030: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
+0002d040: 6563 6b20 666f 7220 6120 7265 6475 6365  eck for a reduce
+0002d050: 2066 756e 6320 6c69 6b65 2073 756d 206f   func like sum o
+0002d060: 7220 6d69 6e0d 0a20 2020 2020 2020 2069  r min..        i
+0002d070: 6620 7265 6475 6365 5f66 756e 6320 6973  f reduce_func is
+0002d080: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0002d090: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
+0002d0a0: 3a20 626f 6f6c 203d 206b 7761 7267 732e  : bool = kwargs.
+0002d0b0: 6765 7428 226b 6565 7064 696d 7322 2c20  get("keepdims", 
+0002d0c0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+0002d0d0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
+0002d0e0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0002d0f0: 2020 2020 2020 2064 7479 7065 203d 2061         dtype = a
+0002d100: 7267 735b 305d 2e64 7479 7065 0d0a 0d0a  rgs[0].dtype....
+0002d110: 2020 2020 2020 2020 2020 2020 2320 4d61              # Ma
+0002d120: 7468 4c65 6467 6572 0d0a 2020 2020 2020  thLedger..      
+0002d130: 2020 2020 2020 7265 7375 6c74 203d 2054        result = T
+0002d140: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002d150: 4c65 6467 6572 2e5f 5245 4455 4345 2861  Ledger._REDUCE(a
+0002d160: 7267 735b 305d 2c20 7265 6475 6365 5f66  rgs[0], reduce_f
+0002d170: 756e 6329 0d0a 2020 2020 2020 2020 2020  unc)..          
+0002d180: 2020 6368 6172 203d 206e 702e 6474 7970    char = np.dtyp
+0002d190: 6528 6474 7970 6529 2e63 6861 720d 0a20  e(dtype).char.. 
+0002d1a0: 2020 2020 2020 2020 2020 2069 6620 4661             if Fa
+0002d1b0: 7374 4172 7261 792e 5665 7262 6f73 6520  stArray.Verbose 
+0002d1c0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
+0002d1d0: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
+0002d1e0: 7265 7375 6c74 2066 726f 6d20 7265 6475  result from redu
+0002d1f0: 6365 222c 2072 6573 756c 742c 2074 7970  ce", result, typ
+0002d200: 6528 7265 7375 6c74 292c 2064 7479 7065  e(result), dtype
+0002d210: 2c20 6368 6172 290d 0a0d 0a20 2020 2020  , char)....     
+0002d220: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+0002d230: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0002d240: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002d250: 2070 7269 6e74 2822 7265 6475 6365 2063   print("reduce c
+0002d260: 616c 6c65 6422 2c20 7566 756e 632c 206b  alled", ufunc, k
+0002d270: 6565 7064 696d 732c 2064 7479 7065 290d  eepdims, dtype).
+0002d280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d290: 2069 6620 7265 6475 6365 5f66 756e 6320   if reduce_func 
+0002d2a0: 696e 205b 5245 4455 4345 5f46 554e 4354  in [REDUCE_FUNCT
+0002d2b0: 494f 4e53 2e52 4544 5543 455f 5355 4d2c  IONS.REDUCE_SUM,
+0002d2c0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
+0002d2d0: 532e 5245 4455 4345 5f4e 414e 5355 4d5d  S.REDUCE_NANSUM]
+0002d2e0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+0002d2f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d300: 2020 2020 2020 7265 7375 6c74 2c20 666c        result, fl
+0002d310: 6f61 740d 0a20 2020 2020 2020 2020 2020  oat..           
+0002d320: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
+0002d330: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0002d340: 756c 7420 3d20 6e70 2e66 6c6f 6174 3634  ult = np.float64
+0002d350: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
+0002d360: 2020 2020 2020 2020 2020 656c 6966 2064            elif d
+0002d370: 7479 7065 2021 3d20 6e70 2e66 6c6f 6174  type != np.float
+0002d380: 3332 2061 6e64 2064 7479 7065 2021 3d20  32 and dtype != 
+0002d390: 6e70 2e66 6c6f 6174 3634 3a0d 0a20 2020  np.float64:..   
+0002d3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3b0: 2023 2070 7265 7365 7276 6520 696e 7465   # preserve inte
+0002d3c0: 6765 7273 0d0a 2020 2020 2020 2020 2020  gers..          
+0002d3d0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
+0002d3e0: 7220 696e 204e 756d 7079 4368 6172 5479  r in NumpyCharTy
+0002d3f0: 7065 732e 556e 7369 676e 6564 496e 7465  pes.UnsignedInte
+0002d400: 6765 7236 343a 0d0a 2020 2020 2020 2020  ger64:..        
+0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d420: 2320 7072 6573 6572 7665 2068 6967 6820  # preserve high 
+0002d430: 6269 740d 0a20 2020 2020 2020 2020 2020  bit..           
+0002d440: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0002d450: 756c 7420 3d20 6e70 2e75 696e 7436 3428  ult = np.uint64(
+0002d460: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
+0002d470: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002d480: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002d490: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0002d4a0: 6c74 203d 206e 702e 696e 7436 3428 7265  lt = np.int64(re
+0002d4b0: 7375 6c74 290d 0a20 2020 2020 2020 2020  sult)..         
+0002d4c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0002d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4e0: 2020 7265 7375 6c74 203d 206e 702e 666c    result = np.fl
+0002d4f0: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
+0002d500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d510: 2023 204d 494e 2f4d 4158 206e 6565 6420   # MIN/MAX need 
+0002d520: 746f 2072 6574 7572 6e20 7361 6d65 2074  to return same t
+0002d530: 7970 650d 0a20 2020 2020 2020 2020 2020  ype..           
+0002d540: 2020 2020 2069 6620 7265 6475 6365 5f66       if reduce_f
+0002d550: 756e 6320 3e3d 2052 4544 5543 455f 4655  unc >= REDUCE_FU
+0002d560: 4e43 5449 4f4e 532e 5245 4455 4345 5f4d  NCTIONS.REDUCE_M
+0002d570: 494e 3a0d 0a20 2020 2020 2020 2020 2020  IN:..           
+0002d580: 2020 2020 2020 2020 2023 206d 696e 206d           # min m
+0002d590: 6178 206e 6f74 2061 6c6c 6f77 6564 206f  ax not allowed o
+0002d5a0: 6e20 656d 7074 7920 6172 7261 7920 7065  n empty array pe
+0002d5b0: 7220 756e 6974 2074 6573 740d 0a20 2020  r unit test..   
+0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d5d0: 2069 6620 6c65 6e28 6172 6773 5b30 5d29   if len(args[0])
+0002d5e0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+0002d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d600: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0002d610: 2822 6d69 6e2f 6d61 7820 6172 6720 6973  ("min/max arg is
+0002d620: 2061 6e20 656d 7074 7920 7365 7175 656e   an empty sequen
+0002d630: 6365 2e22 290d 0a0d 0a20 2020 2020 2020  ce.")....       
+0002d640: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0002d650: 696e 2f6d 6178 2f6e 616e 6d69 6e2f 6e61  in/max/nanmin/na
+0002d660: 6e6d 6178 202d 2d20 7361 6d65 2072 6573  nmax -- same res
+0002d670: 756c 740d 0a20 2020 2020 2020 2020 2020  ult..           
+0002d680: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
+0002d690: 6520 3d3d 206e 702e 626f 6f6c 5f3a 0d0a  e == np.bool_:..
+0002d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d6b0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0002d6c0: 206e 702e 626f 6f6c 2872 6573 756c 7429   np.bool(result)
+0002d6d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d6e0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d700: 2020 2020 2072 6573 756c 7420 3d20 6474       result = dt
+0002d710: 7970 652e 7479 7065 2872 6573 756c 7429  ype.type(result)
+0002d720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002d730: 2020 2020 2020 2020 6966 206b 6565 7064          if keepd
+0002d740: 696d 733a 0d0a 2020 2020 2020 2020 2020  ims:..          
+0002d750: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002d760: 7375 6c74 203d 2046 6173 7441 7272 6179  sult = FastArray
+0002d770: 285b 7265 7375 6c74 5d29 2e61 7374 7970  ([result]).astyp
+0002d780: 6528 6474 7970 6529 0d0a 2020 2020 2020  e(dtype)..      
+0002d790: 2020 2020 2020 2020 2020 656c 6966 206b            elif k
+0002d7a0: 6565 7064 696d 733a 0d0a 2020 2020 2020  eepdims:..      
+0002d7b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002d7c0: 666f 7263 6520 6261 636b 2069 6e74 6f20  force back into 
+0002d7d0: 616e 2061 7272 6179 2066 726f 6d20 7363  an array from sc
+0002d7e0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
+0002d7f0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0002d800: 203d 2046 6173 7441 7272 6179 285b 7265   = FastArray([re
+0002d810: 7375 6c74 5d29 0d0a 0d0a 2020 2020 2020  sult])....      
+0002d820: 2020 2020 2020 2020 2020 2320 7765 2064            # we d
+0002d830: 6964 2074 6865 2072 6564 7563 652c 206e  id the reduce, n
+0002d840: 6f77 2072 6574 7572 6e20 7468 6520 7265  ow return the re
+0002d850: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
+0002d860: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+0002d870: 756c 740d 0a0d 0a20 2020 2020 2020 2023  ult....        #
+0002d880: 2063 6865 636b 2066 6f72 206e 6f72 6d61   check for norma
+0002d890: 6c20 6361 6c6c 2066 756e 6374 696f 6e0d  l call function.
+0002d8a0: 0a20 2020 2020 2020 2065 6c69 6620 6661  .        elif fa
+0002d8b0: 7374 5f66 756e 6374 696f 6e20 6973 206e  st_function is n
+0002d8c0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0002d8d0: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
+0002d8e0: 2046 6173 7441 7272 6179 2041 5049 7320   FastArray APIs 
+0002d8f0: 696e 7374 6561 6420 6f66 206e 756d 7079  instead of numpy
+0002d900: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002d910: 6361 6c6c 6d6f 6465 203d 2027 6627 0d0a  callmode = 'f'..
+0002d920: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0002d930: 6c74 7320 3d20 4e6f 6e65 0d0a 2020 2020  lts = None..    
+0002d940: 2020 2020 2020 2020 6966 2075 6675 6e63          if ufunc
+0002d950: 2e6e 696e 203d 3d20 323a 0d0a 2020 2020  .nin == 2:..    
+0002d960: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002d970: 6c5f 6e75 6d20 3d20 2d31 0d0a 2020 2020  l_num = -1..    
+0002d980: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0002d990: 696e 616c 5f64 7479 7065 2069 7320 6e6f  inal_dtype is no
+0002d9a0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0002d9b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002d9c0: 6669 6e61 6c5f 6474 7970 6520 3d3d 206e  final_dtype == n
+0002d9d0: 702e 626f 6f6c 5f3a 0d0a 2020 2020 2020  p.bool_:..      
+0002d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9f0: 2020 6669 6e61 6c5f 6e75 6d20 3d20 300d    final_num = 0.
+0002da00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002da10: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da30: 2020 2020 6669 6e61 6c5f 6e75 6d20 3d20      final_num = 
+0002da40: 6669 6e61 6c5f 6474 7970 652e 6e75 6d0d  final_dtype.num.
+0002da50: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002da60: 2020 2023 2062 6563 6175 7365 2073 6361     # because sca
+0002da70: 6c61 7273 2063 616e 2062 6520 7061 7373  lars can be pass
+0002da80: 6564 2061 7320 6e70 2e69 6e74 3634 2838  ed as np.int64(8
+0002da90: 3634 3030 3029 0d0a 2020 2020 2020 2020  64000)..        
+0002daa0: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
+0002dab0: 6172 6773 5b30 5d29 2069 6e20 674e 756d  args[0]) in gNum
+0002dac0: 7079 5363 616c 6172 5479 7065 3a0d 0a20  pyScalarType:.. 
+0002dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dae0: 2020 2023 2070 7269 6e74 2827 636f 6e76     # print('conv
+0002daf0: 6572 7469 6e67 2061 7267 3127 2c20 6172  erting arg1', ar
+0002db00: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
+0002db10: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002db20: 5b30 5d20 3d20 6e70 2e61 7361 7272 6179  [0] = np.asarray
+0002db30: 2861 7267 735b 305d 290d 0a0d 0a20 2020  (args[0])....   
+0002db40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002db50: 7479 7065 2861 7267 735b 315d 2920 696e  type(args[1]) in
+0002db60: 2067 4e75 6d70 7953 6361 6c61 7254 7970   gNumpyScalarTyp
+0002db70: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002db80: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002db90: 2763 6f6e 7665 7274 696e 6720 6172 6732  'converting arg2
+0002dba0: 272c 2061 7267 735b 315d 290d 0a20 2020  ', args[1])..   
+0002dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbc0: 2061 7267 735b 315d 203d 206e 702e 6173   args[1] = np.as
+0002dbd0: 6172 7261 7928 6172 6773 5b31 5d29 0d0a  array(args[1])..
+0002dbe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002dbf0: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
+0002dc00: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
+0002dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc20: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
+0002dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc40: 2022 2a2a 2a20 6269 6e61 7279 2074 6869   "*** binary thi
+0002dc50: 6e6b 2077 6520 6361 6e20 6361 6c6c 222c  nk we can call",
+0002dc60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002dc70: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
+0002dc80: 756e 6374 696f 6e2c 0d0a 2020 2020 2020  unction,..      
+0002dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dca0: 2020 7566 756e 632e 6e69 6e2c 0d0a 2020    ufunc.nin,..  
+0002dcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dcc0: 2020 2020 2020 7566 756e 632e 6e6f 7574        ufunc.nout
+0002dcd0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002dce0: 2020 2020 2020 2020 2020 2022 6172 6731             "arg1
+0002dcf0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0002dd00: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002dd10: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+0002dd20: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+0002dd30: 7267 3222 2c0d 0a20 2020 2020 2020 2020  rg2",..         
+0002dd40: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0002dd50: 7267 735b 315d 2c0d 0a20 2020 2020 2020  rgs[1],..       
+0002dd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd70: 2022 6f75 7422 2c0d 0a20 2020 2020 2020   "out",..       
+0002dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd90: 206f 7574 5f61 7267 732c 0d0a 2020 2020   out_args,..    
+0002dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ddb0: 2020 2020 2266 696e 616c 222c 0d0a 2020      "final",..  
+0002ddc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ddd0: 2020 2020 2020 6669 6e61 6c5f 6e75 6d2c        final_num,
+0002dde0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ddf0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0002de00: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+0002de10: 6f75 745f 6172 6773 2920 3d3d 2031 3a0d  out_args) == 1:.
+0002de20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002de30: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+0002de40: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002de50: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
+0002de60: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
+0002de70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de80: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
+0002de90: 2061 7267 735b 315d 2c20 6f75 745f 6172   args[1], out_ar
+0002dea0: 6773 5b30 5d29 2c20 6661 7374 5f66 756e  gs[0]), fast_fun
+0002deb0: 6374 696f 6e2c 2066 696e 616c 5f6e 756d  ction, final_num
+0002dec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ded0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0002dee0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002def0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df00: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
+0002df10: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0002df20: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
+0002df30: 5f54 574f 5f49 4e50 5554 5328 0d0a 2020  _TWO_INPUTS(..  
+0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df50: 2020 2020 2020 2861 7267 735b 305d 2c20        (args[0], 
+0002df60: 6172 6773 5b31 5d29 2c20 6661 7374 5f66  args[1]), fast_f
+0002df70: 756e 6374 696f 6e2c 2066 696e 616c 5f6e  unction, final_n
+0002df80: 756d 0d0a 2020 2020 2020 2020 2020 2020  um..            
+0002df90: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+0002dfa0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0002dfb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002dfc0: 666f 7220 636f 6e76 6572 7369 6f6e 2066  for conversion f
+0002dfd0: 756e 6374 696f 6e73 0d0a 2020 2020 2020  unctions..      
+0002dfe0: 2020 2020 2020 2020 2020 2320 6474 7970            # dtyp
+0002dff0: 653d 6b77 6172 6773 2e67 6574 2827 6474  e=kwargs.get('dt
+0002e000: 7970 6527 2c4e 6f6e 6529 0d0a 2020 2020  ype',None)..    
+0002e010: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002e020: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002e030: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
+0002e040: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0002e050: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0002e060: 2020 2020 2020 2020 2020 2022 2a2a 2a20             "*** 
+0002e070: 756e 6172 7920 7468 696e 6b20 7765 2063  unary think we c
+0002e080: 616e 2063 616c 6c22 2c0d 0a20 2020 2020  an call",..     
+0002e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0a0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
+0002e0b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002e0c0: 2020 2020 2020 2020 2020 2075 6675 6e63             ufunc
+0002e0d0: 2e6e 696e 2c0d 0a20 2020 2020 2020 2020  .nin,..         
+0002e0e0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0002e0f0: 6675 6e63 2e6e 6f75 742c 0d0a 2020 2020  func.nout,..    
+0002e100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e110: 2020 2020 2261 7267 3122 2c0d 0a20 2020      "arg1",..   
+0002e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e130: 2020 2020 2061 7267 735b 305d 2c0d 0a20       args[0],.. 
+0002e140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e150: 2020 2020 2020 2022 6f75 7422 2c0d 0a20         "out",.. 
+0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e170: 2020 2020 2020 206f 7574 5f61 7267 732c         out_args,
+0002e180: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e190: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0002e1a0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0002e1b0: 6e28 6f75 745f 6172 6773 2920 3d3d 2031  n(out_args) == 1
+0002e1c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002e1d0: 2020 2020 2020 2072 6573 756c 7473 203d         results =
+0002e1e0: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+0002e1f0: 7468 4c65 6467 6572 2e5f 4241 5349 434d  thLedger._BASICM
+0002e200: 4154 485f 4f4e 455f 494e 5055 5428 2861  ATH_ONE_INPUT((a
+0002e210: 7267 735b 305d 2c20 6f75 745f 6172 6773  rgs[0], out_args
+0002e220: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
+0002e230: 696f 6e2c 2030 290d 0a20 2020 2020 2020  ion, 0)..       
+0002e240: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e260: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
+0002e270: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0002e280: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
+0002e290: 5f4f 4e45 5f49 4e50 5554 2828 6172 6773  _ONE_INPUT((args
+0002e2a0: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
+0002e2b0: 696f 6e2c 2030 290d 0a0d 0a20 2020 2020  ion, 0)....     
+0002e2c0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+0002e2d0: 7320 6973 206e 6f74 204e 6f6e 6520 616e  s is not None an
+0002e2e0: 6420 6c65 6e28 6f75 745f 6172 6773 2920  d len(out_args) 
+0002e2f0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+0002e300: 2020 2020 2020 2023 2077 6865 6e20 7468         # when th
+0002e310: 6520 6f75 7470 7574 2061 7267 756d 656e  e output argumen
+0002e320: 7420 6973 2066 6f72 6365 6420 6275 7420  t is forced but 
+0002e330: 7765 2063 616c 6375 6c61 7465 2069 7420  we calculate it 
+0002e340: 696e 746f 2061 6e6f 7468 6572 2061 7272  into another arr
+0002e350: 6179 2077 6520 6e65 6564 2074 6f20 636f  ay we need to co
+0002e360: 7079 2074 6865 2072 6573 756c 7420 696e  py the result in
+0002e370: 746f 2074 6865 206f 7574 7075 740d 0a20  to the output.. 
+0002e380: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002e390: 6620 6e6f 7420 7263 2e43 6f6d 7061 7265  f not rc.Compare
+0002e3a0: 4e75 6d70 794d 656d 4164 6472 6573 7328  NumpyMemAddress(
+0002e3b0: 6f75 745f 6172 6773 5b30 5d2c 2072 6573  out_args[0], res
+0002e3c0: 756c 7473 293a 0d0a 2020 2020 2020 2020  ults):..        
+0002e3d0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002e3e0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002e3f0: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
+0002e400: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002e410: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
+0002e420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e430: 2020 2022 2a2a 2a20 7065 7266 6f72 6d69     "*** performi
+0002e440: 6e67 2061 6e20 6578 7472 6120 636f 7079  ng an extra copy
+0002e450: 2074 6f20 6d61 7463 6820 6f75 7470 7574   to match output
+0002e460: 2072 6571 7565 7374 222c 0d0a 2020 2020   request",..    
+0002e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e480: 2020 2020 2020 2020 6964 286f 7574 5f61          id(out_a
+0002e490: 7267 735b 305d 292c 0d0a 2020 2020 2020  rgs[0]),..      
+0002e4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4b0: 2020 2020 2020 6964 2872 6573 756c 7473        id(results
+0002e4c0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0002e4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4e0: 6f75 745f 6172 6773 5b30 5d2c 0d0a 2020  out_args[0],..  
+0002e4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e500: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0002e510: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0002e520: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0002e530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e540: 2020 206f 7574 5f61 7267 735b 305d 5b2e     out_args[0][.
+0002e550: 2e2e 5d20 3d20 7265 7375 6c74 730d 0a20  ..] = results.. 
+0002e560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e570: 2020 2072 6573 756c 7473 203d 206f 7574     results = out
+0002e580: 5f61 7267 735b 305d 0d0a 0d0a 2020 2020  _args[0]....    
+0002e590: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+0002e5a0: 7473 2069 7320 4e6f 6e65 3a0d 0a20 2020  ts is None:..   
+0002e5b0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+0002e5c0: 756e 7465 640d 0a20 2020 2020 2020 2020  unted..         
+0002e5d0: 2020 2020 2020 2023 2063 616c 6c6d 6f64         # callmod
+0002e5e0: 653d 2770 270d 0a20 2020 2020 2020 2020  e='p'..         
+0002e5f0: 2020 2020 2020 2069 6620 4661 7374 4172         if FastAr
+0002e600: 7261 792e 5665 7262 6f73 6520 3e20 313a  ray.Verbose > 1:
+0002e610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e620: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
+0002e630: 7075 6e74 6564 2075 6675 6e63 3a20 222c  punted ufunc: ",
+0002e640: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
+0002e650: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
+0002e660: 7267 732c 206b 7761 7267 7329 0d0a 2020  rgs, kwargs)..  
+0002e670: 2020 2020 2020 2020 2020 2020 2020 6661                fa
+0002e680: 7374 5f66 756e 6374 696f 6e20 3d20 4e6f  st_function = No
+0002e690: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+0002e6a0: 2020 2020 2320 6661 6c6c 2074 6f20 2269      # fall to "i
+0002e6b0: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002e6c0: 6973 204e 6f6e 6522 2061 6e64 2072 756e  is None" and run
+0002e6d0: 2074 6872 6f75 6768 206e 756d 7079 2e2e   through numpy..
+0002e6e0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+0002e6f0: 2023 2072 6573 7065 6374 2064 7479 7065   # respect dtype
+0002e700: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+0002e710: 6966 2064 7479 7065 2069 7320 6e6f 7420  if dtype is not 
+0002e720: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
+0002e730: 6e63 6528 7265 7375 6c74 732c 206e 702e  nce(results, np.
+0002e740: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
+0002e750: 2020 2020 2020 2020 2020 2069 6620 6474             if dt
+0002e760: 7970 6520 6973 206e 6f74 2072 6573 756c  ype is not resul
+0002e770: 7473 2e64 7479 7065 3a0d 0a20 2020 2020  ts.dtype:..     
+0002e780: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002e790: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
+0002e7a0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
+0002e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e7c0: 2020 7072 696e 7428 222a 2a2a 7265 7375    print("***resu
+0002e7d0: 6c74 2066 726f 6d20 7265 6475 6365 222c  lt from reduce",
+0002e7e0: 2072 6573 756c 7473 2c20 7265 7375 6c74   results, result
+0002e7f0: 732e 6474 7970 652c 2064 7479 7065 290d  s.dtype, dtype).
+0002e800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e810: 2020 2020 2023 2063 6f6e 7665 7274 0d0a       # convert..
+0002e820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e830: 2020 2020 7265 7375 6c74 7320 3d20 7265      results = re
+0002e840: 7375 6c74 732e 6173 7479 7065 2864 7479  sults.astype(dty
+0002e850: 7065 290d 0a0d 0a20 2020 2020 2020 2069  pe)....        i
+0002e860: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002e870: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+0002e880: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
+0002e890: 206e 756d 7079 2041 5049 730d 0a20 2020   numpy APIs..   
+0002e8a0: 2020 2020 2020 2020 2023 2043 6865 636b           # Check
+0002e8b0: 2069 6620 7765 2063 616e 2075 7365 2074   if we can use t
+0002e8c0: 6865 2072 6563 7963 6c65 6420 6172 7261  he recycled arra
+0002e8d0: 7973 2074 6f20 6176 6f69 6420 616e 2061  ys to avoid an a
+0002e8e0: 6c6c 6f63 6174 696f 6e20 666f 7220 7468  llocation for th
+0002e8f0: 6520 6f75 7470 7574 2061 7272 6179 0d0a  e output array..
+0002e900: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0002e910: 2046 6173 7441 7272 6179 2e56 6572 626f   FastArray.Verbo
+0002e920: 7365 203e 2031 3a0d 0a20 2020 2020 2020  se > 1:..       
+0002e930: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0002e940: 2a2a 7075 6e74 6564 206f 6e20 6e75 6d70  **punted on nump
+0002e950: 7921 222c 2075 6675 6e63 290d 0a0d 0a20  y!", ufunc).... 
+0002e960: 2020 2020 2020 2020 2020 2023 204e 4f54             # NOT
+0002e970: 453a 2057 6520 6172 6520 676f 696e 6720  E: We are going 
+0002e980: 746f 206c 6574 206e 756d 7079 2070 726f  to let numpy pro
+0002e990: 6365 7373 2069 740d 0a20 2020 2020 2020  cess it..       
+0002e9a0: 2020 2020 2023 2057 6520 6d75 7374 2063       # We must c
+0002e9b0: 6861 6e67 6520 616c 6c20 4661 7374 4172  hange all FastAr
+0002e9c0: 7261 7973 2074 6f20 6e6f 726d 616c 206e  rays to normal n
+0002e9d0: 756d 7079 2061 7272 6179 730d 0a20 2020  umpy arrays..   
+0002e9e0: 2020 2020 2020 2020 2061 7267 7320 3d20           args = 
+0002e9f0: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+0002ea00: 666f 7220 696e 7075 7420 696e 2069 6e70  for input in inp
+0002ea10: 7574 733a 0d0a 2020 2020 2020 2020 2020  uts:..          
+0002ea20: 2020 2020 2020 2320 666c 6970 2062 6163        # flip bac
+0002ea30: 6b20 746f 206e 756d 7079 2074 6f20 6176  k to numpy to av
+0002ea40: 6f69 6420 6572 726f 7273 2077 6865 6e20  oid errors when 
+0002ea50: 6e75 6d70 7920 6361 6c63 756c 6174 6573  numpy calculates
+0002ea60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ea70: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002ea80: 696e 7075 742c 2046 6173 7441 7272 6179  input, FastArray
+0002ea90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0002eaa0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
+0002eab0: 656e 6428 696e 7075 742e 7669 6577 286e  end(input.view(n
+0002eac0: 702e 6e64 6172 7261 7929 290d 0a20 2020  p.ndarray))..   
+0002ead0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002eae0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002eaf0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
+0002eb00: 656e 6428 696e 7075 7429 0d0a 0d0a 2020  end(input)....  
+0002eb10: 2020 2020 2020 2020 2020 6966 2068 6173            if has
+0002eb20: 5f6f 7574 7075 7473 3a0d 0a20 2020 2020  _outputs:..     
+0002eb30: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+0002eb40: 7473 203d 206b 7761 7267 732e 706f 7028  ts = kwargs.pop(
+0002eb50: 226f 7574 222c 204e 6f6e 6529 0d0a 2020  "out", None)..  
+0002eb60: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002eb70: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
+0002eb80: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0002eb90: 7574 5f61 7267 7320 3d20 5b5d 0d0a 2020  ut_args = []..  
+0002eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ebb0: 2020 666f 7220 6f75 7470 7574 2069 6e20    for output in 
+0002ebc0: 6f75 7470 7574 733a 0d0a 2020 2020 2020  outputs:..      
+0002ebd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ebe0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0002ebf0: 6f75 7470 7574 2c20 4661 7374 4172 7261  output, FastArra
+0002ec00: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+0002ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec20: 206f 7574 5f61 7267 732e 6170 7065 6e64   out_args.append
+0002ec30: 286f 7574 7075 742e 7669 6577 286e 702e  (output.view(np.
+0002ec40: 6e64 6172 7261 7929 290d 0a20 2020 2020  ndarray))..     
+0002ec50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec60: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002ec70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec80: 2020 2020 2020 6f75 745f 6172 6773 2e61        out_args.a
+0002ec90: 7070 656e 6428 6f75 7470 7574 290d 0a20  ppend(output).. 
+0002eca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ecb0: 2020 2023 2072 6570 6c61 6365 206f 7574     # replace out
+0002ecc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ecd0: 2020 2020 2020 6b77 6172 6773 5b22 6f75        kwargs["ou
+0002ece0: 7422 5d20 3d20 7475 706c 6528 6f75 745f  t"] = tuple(out_
+0002ecf0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+0002ed00: 2020 2020 2023 204e 4f54 453a 2049 6620       # NOTE: If 
+0002ed10: 7468 6520 7370 6563 6966 6965 6420 7566  the specified uf
+0002ed20: 756e 6320 2b20 696e 7075 7473 2063 6f6d  unc + inputs com
+0002ed30: 6269 6e61 7469 6f6e 2069 736e 2774 2073  bination isn't s
+0002ed40: 7570 706f 7274 6564 2062 7920 6e75 6d70  upported by nump
+0002ed50: 7920 6569 7468 6572 2c0d 0a20 2020 2020  y either,..     
+0002ed60: 2020 2020 2020 2023 2020 2020 2020 2061         #       a
+0002ed70: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
+0002ed80: 7820 7468 6973 2063 616c 6c20 7769 6c6c  x this call will
+0002ed90: 2065 6e64 2075 7020 7261 6973 696e 6720   end up raising 
+0002eda0: 6120 5546 756e 6354 7970 6545 7272 6f72  a UFuncTypeError
+0002edb0: 2073 6f20 7468 6520 7265 7374 0d0a 2020   so the rest..  
+0002edc0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0002edd0: 2020 6f66 2074 6865 2046 6173 7441 7272    of the FastArr
+0002ede0: 6179 2e5f 5f61 7272 6179 5f75 6675 6e63  ay.__array_ufunc
+0002edf0: 5f5f 2062 6f64 7920 2862 656c 6f77 2920  __ body (below) 
+0002ee00: 776f 6e27 7420 656e 6420 7570 2065 7865  won't end up exe
+0002ee10: 6375 7469 6e67 2e0d 0a20 2020 2020 2020  cuting...       
+0002ee20: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+0002ee30: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002ee40: 4c65 6467 6572 2e5f 4152 5241 595f 5546  Ledger._ARRAY_UF
+0002ee50: 554e 4328 7375 7065 7228 4661 7374 4172  UNC(super(FastAr
+0002ee60: 7261 792c 2073 656c 6629 2c20 7566 756e  ray, self), ufun
+0002ee70: 632c 206d 6574 686f 642c 202a 6172 6773  c, method, *args
+0002ee80: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+0002ee90: 2020 2020 2020 2023 2049 6620 7269 7074         # If ript
+0002eea0: 6162 6c65 2068 6173 206e 6f74 2069 6d70  able has not imp
+0002eeb0: 6c65 6d65 6e74 6564 2061 2063 6572 7461  lemented a certa
+0002eec0: 696e 2075 6675 6e63 2028 6f72 2064 6f65  in ufunc (or doe
+0002eed0: 736e 2774 2073 7570 706f 7274 2069 7420  sn't support it 
+0002eee0: 666f 7220 7468 6520 6769 7665 6e20 6172  for the given ar
+0002eef0: 6775 6d65 6e74 7329 2c0d 0a20 2020 2020  guments),..     
+0002ef00: 2020 2023 2065 6d69 7420 6120 7761 726e     # emit a warn
+0002ef10: 696e 6720 6162 6f75 7420 6974 2074 6f20  ing about it to 
+0002ef20: 6c65 7420 7468 6520 7573 6572 206b 6e6f  let the user kno
+0002ef30: 772e 0d0a 2020 2020 2020 2020 2320 5768  w...        # Wh
+0002ef40: 656e 206e 756d 7079 2064 6f65 7320 6e6f  en numpy does no
+0002ef50: 7420 7375 7070 6f72 7420 7468 6520 7566  t support the uf
+0002ef60: 756e 632b 696e 7075 7473 2065 6974 6865  unc+inputs eithe
+0002ef70: 722c 2077 6520 776f 6e27 7420 7265 6163  r, we won't reac
+0002ef80: 6820 7468 6973 2070 6f69 6e74 2028 6173  h this point (as
+0002ef90: 206f 6620 6e75 6d70 7920 312e 3137 2e78   of numpy 1.17.x
+0002efa0: 292c 0d0a 2020 2020 2020 2020 2320 7369  ),..        # si
+0002efb0: 6e63 6520 6e75 6d70 7920 7769 6c6c 2072  nce numpy will r
+0002efc0: 6169 7365 2061 2055 4675 6e63 5479 7065  aise a UFuncType
+0002efd0: 4572 726f 7220 6561 726c 6965 7220 2862  Error earlier (b
+0002efe0: 6566 6f72 6520 7468 6973 2070 6f69 6e74  efore this point
+0002eff0: 2920 7261 7468 6572 2074 6861 6e20 6166  ) rather than af
+0002f000: 7465 7220 7765 2072 6574 7572 6e20 4e6f  ter we return No
+0002f010: 7449 6d70 6c65 6d65 6e74 6564 2e0d 0a20  tImplemented... 
+0002f020: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+0002f030: 7320 6973 204e 6f74 496d 706c 656d 656e  s is NotImplemen
+0002f040: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
+0002f050: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
+0002f060: 6622 2a2a 2a75 6675 6e63 207b 7566 756e  f"***ufunc {ufun
+0002f070: 637d 207b 6172 6773 7d20 7b6b 7761 7267  c} {args} {kwarg
+0002f080: 737d 2069 7320 6e6f 7420 696d 706c 656d  s} is not implem
+0002f090: 656e 7465 6422 290d 0a20 2020 2020 2020  ented")..       
+0002f0a0: 2020 2020 2072 6574 7572 6e20 4e6f 7449       return NotI
+0002f0b0: 6d70 6c65 6d65 6e74 6564 0d0a 0d0a 2020  mplemented....  
+0002f0c0: 2020 2020 2020 2320 5566 756e 6373 2061        # Ufuncs a
+0002f0d0: 6c73 6f20 6861 7665 2061 2066 6966 7468  lso have a fifth
+0002f0e0: 206d 6574 686f 6420 7468 6174 2061 6c6c   method that all
+0002f0f0: 6f77 7320 696e 2070 6c61 6365 206f 7065  ows in place ope
+0002f100: 7261 7469 6f6e 7320 746f 2062 6520 7065  rations to be pe
+0002f110: 7266 6f72 6d65 6420 7573 696e 6720 6661  rformed using fa
+0002f120: 6e63 7920 696e 6465 7869 6e67 2e0d 0a20  ncy indexing... 
+0002f130: 2020 2020 2020 2023 204e 6f20 6275 6666         # No buff
+0002f140: 6572 696e 6720 6973 2075 7365 6420 6f6e  ering is used on
+0002f150: 2074 6865 2064 696d 656e 7369 6f6e 7320   the dimensions 
+0002f160: 7768 6572 6520 6661 6e63 7920 696e 6465  where fancy inde
+0002f170: 7869 6e67 2069 7320 7573 6564 2c20 736f  xing is used, so
+0002f180: 2074 6865 2066 616e 6379 2069 6e64 6578   the fancy index
+0002f190: 2063 616e 206c 6973 7420 616e 2069 7465   can list an ite
+0002f1a0: 6d20 6d6f 7265 2074 6861 6e20 6f6e 6365  m more than once
+0002f1b0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+0002f1c0: 616e 6420 7468 6520 6f70 6572 6174 696f  and the operatio
+0002f1d0: 6e20 7769 6c6c 2062 6520 7065 7266 6f72  n will be perfor
+0002f1e0: 6d65 6420 6f6e 2074 6865 2072 6573 756c  med on the resul
+0002f1f0: 7420 6f66 2074 6865 2070 7265 7669 6f75  t of the previou
+0002f200: 7320 6f70 6572 6174 696f 6e20 666f 7220  s operation for 
+0002f210: 7468 6174 2069 7465 6d2e 0d0a 2020 2020  that item...    
+0002f220: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
+0002f230: 6365 2861 5b2c 2061 7869 732c 2064 7479  ce(a[, axis, dty
+0002f240: 7065 2c20 6f75 742c 206b 6565 7064 696d  pe, out, keepdim
+0002f250: 735d 2909 5265 6475 6365 7320 6127 7320  s]).Reduces a's 
+0002f260: 6469 6d65 6e73 696f 6e20 6279 206f 6e65  dimension by one
+0002f270: 2c20 6279 2061 7070 6c79 696e 6720 7566  , by applying uf
+0002f280: 756e 6320 616c 6f6e 6720 6f6e 6520 6178  unc along one ax
+0002f290: 6973 2e0d 0a20 2020 2020 2020 2023 2075  is...        # u
+0002f2a0: 6675 6e63 2e61 6363 756d 756c 6174 6528  func.accumulate(
+0002f2b0: 6172 7261 795b 2c20 6178 6973 2c20 6474  array[, axis, dt
+0002f2c0: 7970 652c 206f 7574 5d29 0941 6363 756d  ype, out]).Accum
+0002f2d0: 756c 6174 6520 7468 6520 7265 7375 6c74  ulate the result
+0002f2e0: 206f 6620 6170 706c 7969 6e67 2074 6865   of applying the
+0002f2f0: 206f 7065 7261 746f 7220 746f 2061 6c6c   operator to all
+0002f300: 2065 6c65 6d65 6e74 732e 0d0a 2020 2020   elements...    
+0002f310: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
+0002f320: 6365 6174 2861 2c20 696e 6469 6365 735b  ceat(a, indices[
+0002f330: 2c20 6178 6973 2c20 6474 7970 652c 206f  , axis, dtype, o
+0002f340: 7574 5d29 0950 6572 666f 726d 7320 6120  ut]).Performs a 
+0002f350: 286c 6f63 616c 2920 7265 6475 6365 2077  (local) reduce w
+0002f360: 6974 6820 7370 6563 6966 6965 6420 736c  ith specified sl
+0002f370: 6963 6573 206f 7665 7220 6120 7369 6e67  ices over a sing
+0002f380: 6c65 2061 7869 732e 0d0a 2020 2020 2020  le axis...      
+0002f390: 2020 2320 7566 756e 632e 6f75 7465 7228    # ufunc.outer(
+0002f3a0: 412c 2042 2909 4170 706c 7920 7468 6520  A, B).Apply the 
+0002f3b0: 7566 756e 6320 6f70 2074 6f20 616c 6c20  ufunc op to all 
+0002f3c0: 7061 6972 7320 2861 2c20 6229 2077 6974  pairs (a, b) wit
+0002f3d0: 6820 6120 696e 2041 2061 6e64 2062 2069  h a in A and b i
+0002f3e0: 6e20 422e 0d0a 2020 2020 2020 2020 2320  n B...        # 
+0002f3f0: 7566 756e 632e 6174 2861 2c20 696e 6469  ufunc.at(a, indi
+0002f400: 6365 735b 2c20 625d 2909 5065 7266 6f72  ces[, b]).Perfor
+0002f410: 6d73 2075 6e62 7566 6665 7265 6420 696e  ms unbuffered in
+0002f420: 2070 6c61 6365 206f 7065 7261 7469 6f6e   place operation
+0002f430: 206f 6e20 6f70 6572 616e 6420 2761 2720   on operand 'a' 
+0002f440: 666f 7220 656c 656d 656e 7473 2073 7065  for elements spe
+0002f450: 6369 6669 6564 2062 7920 2769 6e64 6963  cified by 'indic
+0002f460: 6573 272e 0d0a 0d0a 2020 2020 2020 2020  es'.....        
+0002f470: 6966 206d 6574 686f 6420 3d3d 2022 6174  if method == "at
+0002f480: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0002f490: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
+0002f4a0: 2020 6966 2075 6675 6e63 2e6e 6f75 7420    if ufunc.nout 
+0002f4b0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+0002f4c0: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
+0002f4d0: 2075 7365 6420 6f75 7220 6f77 6e20 6f75   used our own ou
+0002f4e0: 7470 7574 0d0a 0d0a 2020 2020 2020 2020  tput....        
+0002f4f0: 2020 2020 2320 6966 2069 7369 6e73 7461      # if isinsta
+0002f500: 6e63 6528 6f75 7441 7272 6179 2c20 6e70  nce(outArray, np
+0002f510: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
+0002f520: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
+0002f530: 7572 6e20 6f75 7441 7272 6179 2e76 6965  urn outArray.vie
+0002f540: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
+0002f550: 2020 2020 2020 2020 2020 2020 2320 6966              # if
+0002f560: 2028 6669 6e61 6c5f 6474 7970 6520 213d   (final_dtype !=
+0002f570: 204e 6f6e 6520 616e 6420 6669 6e61 6c5f   None and final_
+0002f580: 6474 7970 6520 213d 2072 6573 756c 7473  dtype != results
+0002f590: 2e64 7479 7065 293a 0d0a 2020 2020 2020  .dtype):..      
+0002f5a0: 2020 2020 2020 2320 2020 2070 7269 6e74        #    print
+0002f5b0: 2822 2a2a 2a2a 2a2a 206d 6973 7072 6564  ("****** mispred
+0002f5c0: 6963 7465 6420 6669 6e61 6c22 2c20 6669  icted final", fi
+0002f5d0: 6e61 6c5f 6474 7970 652c 2072 6573 756c  nal_dtype, resul
+0002f5e0: 7473 2e64 7479 7065 2c20 7566 756e 632c  ts.dtype, ufunc,
+0002f5f0: 2073 6361 6c61 7274 7970 6573 2c20 6172   scalartypes, ar
+0002f600: 6773 2c20 6f75 7470 7574 732c 206b 7761  gs, outputs, kwa
+0002f610: 7267 7329 3b0d 0a20 2020 2020 2020 2020  rgs);..         
+0002f620: 2020 2023 2072 6573 756c 7473 203d 2028     # results = (
+0002f630: 7265 7375 6c74 732c 290d 0a0d 0a20 2020  results,)....   
+0002f640: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0002f650: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
+0002f660: 7473 2c20 4661 7374 4172 7261 7929 2061  ts, FastArray) a
+0002f670: 6e64 2069 7369 6e73 7461 6e63 6528 7265  nd isinstance(re
+0002f680: 7375 6c74 732c 206e 702e 6e64 6172 7261  sults, np.ndarra
+0002f690: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+0002f6a0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+0002f6b0: 6c74 732e 7669 6577 2846 6173 7441 7272  lts.view(FastArr
+0002f6c0: 6179 290d 0a0d 0a20 2020 2020 2020 2020  ay)....         
+0002f6d0: 2020 2023 2074 6869 6e6b 2068 6974 2068     # think hit h
+0002f6e0: 6572 6520 666f 7220 7375 6d20 7769 6863  ere for sum wihc
+0002f6f0: 6820 646f 6573 206e 6f74 2072 6574 7572  h does not retur
+0002f700: 6e20 616e 2061 7272 6179 2c20 6a75 7374  n an array, just
+0002f710: 2061 206e 756d 6265 720d 0a20 2020 2020   a number..     
+0002f720: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0002f730: 7375 6c74 730d 0a0d 0a20 2020 2020 2020  sults....       
+0002f740: 2023 206d 6f72 6520 7468 616e 206f 6e65   # more than one
+0002f750: 2069 7465 6d2c 2073 6f20 7765 2061 7265   item, so we are
+0002f760: 206d 616b 696e 6720 6120 7475 706c 650d   making a tuple.
+0002f770: 0a20 2020 2020 2020 2023 2063 616e 2072  .        # can r
+0002f780: 6573 756c 7420 696e 205f 5f61 7272 6179  esult in __array
+0002f790: 5f66 696e 616c 697a 655f 5f20 6265 696e  _finalize__ bein
+0002f7a0: 6720 6361 6c6c 6564 0d0a 2020 2020 2020  g called..      
+0002f7b0: 2020 7265 7375 6c74 7320 3d20 7475 706c    results = tupl
+0002f7c0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+0002f7d0: 286e 702e 6173 6172 7261 7928 7265 7375  (np.asarray(resu
+0002f7e0: 6c74 292e 7669 6577 2846 6173 7441 7272  lt).view(FastArr
+0002f7f0: 6179 2920 6966 206f 7574 7075 7420 6973  ay) if output is
+0002f800: 204e 6f6e 6520 656c 7365 206f 7574 7075   None else outpu
+0002f810: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+0002f820: 666f 7220 7265 7375 6c74 2c20 6f75 7470  for result, outp
+0002f830: 7574 2069 6e20 7a69 7028 7265 7375 6c74  ut in zip(result
+0002f840: 732c 206f 7574 7075 7473 290d 0a20 2020  s, outputs)..   
+0002f850: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+0002f860: 2020 2320 6368 6563 6b20 6966 2077 6520    # check if we 
+0002f870: 6861 7665 2061 2074 7570 6c65 206f 6620  have a tuple of 
+0002f880: 6f6e 6520 6974 656d 2c20 6966 2073 6f20  one item, if so 
+0002f890: 6a75 7374 2072 6574 7572 6e20 7468 6520  just return the 
+0002f8a0: 6f6e 6520 6974 656d 0d0a 2020 2020 2020  one item..      
+0002f8b0: 2020 6966 206c 656e 2872 6573 756c 7473    if len(results
+0002f8c0: 2920 3d3d 2031 3a0d 0a20 2020 2020 2020  ) == 1:..       
+0002f8d0: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
+0002f8e0: 6573 756c 7473 5b30 5d0d 0a20 2020 2020  esults[0]..     
+0002f8f0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+0002f900: 730d 0a0d 0a20 2020 2040 7072 6f70 6572  s....    @proper
+0002f910: 7479 0d0a 2020 2020 6465 6620 6e75 6d62  ty..    def numb
+0002f920: 6173 7472 696e 6728 7365 6c66 293a 0d0a  astring(self):..
+0002f930: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0002f940: 2020 2020 2063 6f6e 7665 7274 7320 6279       converts by
+0002f950: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
+0002f960: 6963 6f64 6520 7374 7269 6e67 7320 746f  icode strings to
+0002f970: 2061 2032 6469 6d65 6e73 696f 6e61 6c20   a 2dimensional 
+0002f980: 6172 7261 790d 0a20 2020 2020 2020 2073  array..        s
+0002f990: 6f20 7468 6174 206e 756d 6261 2063 616e  o that numba can
+0002f9a0: 2070 726f 6365 7373 2069 7420 636f 7272   process it corr
+0002f9b0: 6563 746c 790d 0a0d 0a20 2020 2020 2020  ectly....       
+0002f9c0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+0002f9d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+0002f9e0: 2020 2020 203e 3e3e 2040 6e75 6d62 612e       >>> @numba.
+0002f9f0: 6a69 7428 6e6f 7079 7468 6f6e 3d54 7275  jit(nopython=Tru
+0002fa00: 6529 0d0a 2020 2020 2020 2020 2e2e 2e20  e)..        ... 
+0002fa10: 6465 6620 6e75 6d62 615f 7374 7228 7478  def numba_str(tx
+0002fa20: 7429 3a0d 0a20 2020 2020 2020 202e 2e2e  t):..        ...
+0002fa30: 2020 2020 2078 3d30 0d0a 2020 2020 2020       x=0..      
+0002fa40: 2020 2e2e 2e20 2020 2020 666f 7220 6920    ...     for i 
+0002fa50: 696e 2072 616e 6765 2874 7874 2e73 6861  in range(txt.sha
+0002fa60: 7065 5b30 5d29 3a0d 0a20 2020 2020 2020  pe[0]):..       
+0002fa70: 202e 2e2e 2020 2020 2020 2020 2069 6620   ...         if 
+0002fa80: 2874 7874 5b69 2c30 5d3d 3d31 3136 2061  (txt[i,0]==116 a
+0002fa90: 6e64 2020 2320 2774 270d 0a20 2020 2020  nd  # 't'..     
+0002faa0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
+0002fab0: 2020 2074 7874 5b69 2c31 5d3d 3d31 3031     txt[i,1]==101
+0002fac0: 2061 6e64 2020 2320 2765 270d 0a20 2020   and  # 'e'..   
+0002fad0: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
+0002fae0: 2020 2020 2074 7874 5b69 2c32 5d3d 3d31       txt[i,2]==1
+0002faf0: 3230 2061 6e64 2020 2320 2778 270d 0a20  20 and  # 'x'.. 
+0002fb00: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
+0002fb10: 2020 2020 2020 2074 7874 5b69 2c33 5d3d         txt[i,3]=
+0002fb20: 3d31 3136 293a 2020 2020 2320 2774 270d  =116):    # 't'.
+0002fb30: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+0002fb40: 2020 2020 2020 2020 2078 202b 3d20 310d           x += 1.
+0002fb50: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+0002fb60: 2072 6574 7572 6e20 780d 0a20 2020 2020   return x..     
+0002fb70: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
+0002fb80: 3e3e 3e20 783d 4661 7374 4172 7261 7928  >>> x=FastArray(
+0002fb90: 5b27 736f 6d65 272c 2774 6578 7427 2c27  ['some','text','
+0002fba0: 7468 6973 272c 2769 7327 5d29 0d0a 2020  this','is'])..  
+0002fbb0: 2020 2020 2020 3e3e 3e20 6e75 6d62 615f        >>> numba_
+0002fbc0: 7374 7228 782e 7669 6577 286e 702e 7569  str(x.view(np.ui
+0002fbd0: 6e74 3829 2e72 6573 6861 7065 2828 6c65  nt8).reshape((le
+0002fbe0: 6e28 7829 2c20 782e 6974 656d 7369 7a65  n(x), x.itemsize
+0002fbf0: 2929 290d 0a20 2020 2020 2020 203e 3e3e  )))..        >>>
+0002fc00: 206e 756d 6261 5f73 7472 2878 2e6e 756d   numba_str(x.num
+0002fc10: 6261 7374 7269 6e67 290d 0a20 2020 2020  bastring)..     
+0002fc20: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+0002fc30: 2020 696e 7479 7065 203d 2073 656c 662e    intype = self.
+0002fc40: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
+0002fc50: 0a20 2020 2020 2020 2069 6620 696e 7479  .        if inty
+0002fc60: 7065 5b30 5d20 3d3d 2022 7c22 206f 7220  pe[0] == "|" or 
+0002fc70: 696e 7479 7065 5b30 5d20 3d3d 2022 3c22  intype[0] == "<"
+0002fc80: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+0002fc90: 6620 696e 7479 7065 5b31 5d20 3d3d 2022  f intype[1] == "
+0002fca0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
+0002fcb0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0002fcc0: 2e76 6965 7728 6e70 2e75 696e 7438 292e  .view(np.uint8).
+0002fcd0: 7265 7368 6170 6528 286c 656e 2873 656c  reshape((len(sel
+0002fce0: 6629 2c20 7365 6c66 2e69 7465 6d73 697a  f), self.itemsiz
+0002fcf0: 6529 290d 0a20 2020 2020 2020 2020 2020  e))..           
+0002fd00: 2069 6620 696e 7479 7065 5b31 5d20 3d3d   if intype[1] ==
+0002fd10: 2022 5522 3a0d 0a20 2020 2020 2020 2020   "U":..         
+0002fd20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0002fd30: 6c66 2e76 6965 7728 6e70 2e75 696e 7433  lf.view(np.uint3
+0002fd40: 3229 2e72 6573 6861 7065 2828 6c65 6e28  2).reshape((len(
+0002fd50: 7365 6c66 292c 2073 656c 662e 6974 656d  self), self.item
+0002fd60: 7369 7a65 202f 2f20 3429 290d 0a20 2020  size // 4))..   
+0002fd70: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0002fd80: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0002fd90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002fda0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002fdb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002fdc0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2061  -----..    def a
+0002fdd0: 7070 6c79 5f6e 756d 6261 2873 656c 662c  pply_numba(self,
+0002fde0: 202a 6172 6773 2c20 6f74 7970 653d 4e6f   *args, otype=No
+0002fdf0: 6e65 2c20 6d79 6675 6e63 3d22 6d79 6675  ne, myfunc="myfu
+0002fe00: 6e63 222c 206e 616d 653d 4e6f 6e65 293a  nc", name=None):
+0002fe10: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0002fe20: 2020 2020 2020 2050 7269 6e74 2074 6f20         Print to 
+0002fe30: 7363 7265 656e 2061 6e20 6578 616d 706c  screen an exampl
+0002fe40: 6520 6e75 6d62 6120 7369 676e 6174 7572  e numba signatur
+0002fe50: 6520 666f 7220 7468 6520 6172 7261 792e  e for the array.
+0002fe60: 0d0a 0d0a 2020 2020 2020 2020 596f 7520  ....        You 
+0002fe70: 6361 6e20 7468 656e 2063 6f70 7920 7468  can then copy th
+0002fe80: 6973 2065 7861 6d70 6c65 2074 6f20 6275  is example to bu
+0002fe90: 696c 6420 796f 7572 206f 776e 206e 756d  ild your own num
+0002fea0: 6261 2066 756e 6374 696f 6e2e 0d0a 0d0a  ba function.....
+0002feb0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+0002fec0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+0002fed0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0002fee0: 2a61 7267 733a 0d0a 2020 2020 2020 2020  *args:..        
+0002fef0: 2020 2020 5465 7374 2061 7267 756d 656e      Test argumen
+0002ff00: 7473 0d0a 0d0a 2020 2020 2020 2020 6f74  ts....        ot
+0002ff10: 7970 653a 2073 7472 2c20 6465 6661 756c  ype: str, defaul
+0002ff20: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+0002ff30: 2020 2020 4120 6469 6666 6572 656e 7420      A different 
+0002ff40: 6f75 7470 7574 2064 6174 6120 7479 7065  output data type
+0002ff50: 0d0a 0d0a 2020 2020 2020 2020 6d79 6675  ....        myfu
+0002ff60: 6e63 3a20 7374 722c 2064 6566 6175 6c74  nc: str, default
+0002ff70: 2027 6d79 6675 6e63 270d 0a20 2020 2020   'myfunc'..     
+0002ff80: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
+0002ff90: 746f 2063 616c 6c20 7468 6520 6675 6e63  to call the func
+0002ffa0: 7469 6f6e 0d0a 0d0a 2020 2020 2020 2020  tion....        
+0002ffb0: 6e61 6d65 3a20 7374 722c 2064 6566 6175  name: str, defau
+0002ffc0: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+0002ffd0: 2020 2020 2041 2073 7472 696e 6720 746f       A string to
+0002ffe0: 206e 616d 6520 7468 6520 6172 7261 790d   name the array.
+0002fff0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+00030000: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+00030010: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+00030020: 3e3e 2069 6d70 6f72 7420 6e75 6d62 610d  >> import numba.
+00030030: 0a20 2020 2020 2020 203e 3e3e 2040 6e75  .        >>> @nu
+00030040: 6d62 612e 6775 7665 6374 6f72 697a 6528  mba.guvectorize(
+00030050: 5b27 766f 6964 2869 6e74 3634 5b3a 5d2c  ['void(int64[:],
+00030060: 2069 6e74 3634 5b3a 5d29 275d 2c20 2728   int64[:])'], '(
+00030070: 6e29 2d3e 286e 2927 290d 0a20 2020 2020  n)->(n)')..     
+00030080: 2020 202e 2e2e 2064 6566 2073 7175 6172     ... def squar
+00030090: 6576 2878 2c6f 7574 293a 0d0a 2020 2020  ev(x,out):..    
+000300a0: 2020 2020 2e2e 2e20 2020 2020 666f 7220      ...     for 
+000300b0: 6920 696e 2072 616e 6765 286c 656e 2878  i in range(len(x
+000300c0: 2929 3a0d 0a20 2020 2020 2020 202e 2e2e  )):..        ...
+000300d0: 2020 2020 2020 2020 206f 7574 5b69 5d3d           out[i]=
+000300e0: 785b 695d 2a2a 320d 0a20 2020 2020 2020  x[i]**2..       
+000300f0: 202e 2e2e 0d0a 2020 2020 2020 2020 3e3e   .....        >>
+00030100: 3e20 613d 6172 616e 6765 2831 5f30 3030  > a=arange(1_000
+00030110: 5f30 3030 292e 6173 7479 7065 286e 702e  _000).astype(np.
+00030120: 696e 7436 3429 0d0a 2020 2020 2020 2020  int64)..        
+00030130: 3e3e 3e20 7371 7561 7265 7628 6129 0d0a  >>> squarev(a)..
+00030140: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00030150: 7928 5b20 2020 2020 2020 2020 2020 302c  y([           0,
+00030160: 2020 2020 2020 2020 2020 2020 312c 2020              1,  
+00030170: 2020 2020 2020 2020 2020 342c 202e 2e2e            4, ...
+00030180: 2c20 3939 3939 3934 3030 3030 3039 2c0d  , 999994000009,.
+00030190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000301a0: 2020 2020 3939 3939 3936 3030 3030 3034      999996000004
+000301b0: 2c20 3939 3939 3938 3030 3030 3031 5d2c  , 999998000001],
+000301c0: 2064 7479 7065 3d69 6e74 3634 290d 0a20   dtype=int64).. 
+000301d0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000301e0: 2020 2020 6966 206e 616d 6520 6973 204e      if name is N
+000301f0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00030200: 2020 2320 7472 7920 6669 7273 7420 746f    # try first to
+00030210: 2067 6574 2074 6865 206e 616d 650d 0a20   get the name.. 
+00030220: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00030230: 3d20 7365 6c66 2e67 6574 5f6e 616d 6528  = self.get_name(
+00030240: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00030250: 2069 6620 6e61 6d65 2069 7320 4e6f 6e65   if name is None
+00030260: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00030270: 2020 206e 616d 6520 3d20 2261 220d 0a0d     name = "a"...
+00030280: 0a20 2020 2020 2020 2069 6e74 7970 6520  .        intype 
+00030290: 3d20 7365 6c66 2e64 7479 7065 2e5f 5f73  = self.dtype.__s
+000302a0: 7472 5f5f 2829 0d0a 0d0a 2020 2020 2020  tr__()....      
+000302b0: 2020 6966 206f 7479 7065 2069 7320 4e6f    if otype is No
+000302c0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+000302d0: 206f 7574 7479 7065 203d 2073 656c 662e   outtype = self.
+000302e0: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
+000302f0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00030300: 2020 2020 2020 2020 2020 2020 6f75 7474              outt
+00030310: 7970 6520 3d20 6e70 2e64 7479 7065 286f  ype = np.dtype(o
+00030320: 7479 7065 292e 5f5f 7374 725f 5f28 290d  type).__str__().
+00030330: 0a0d 0a20 2020 2020 2020 2023 2054 4f44  ...        # TOD
+00030340: 4f3a 2077 6861 7420 6966 2075 6e69 636f  O: what if unico
+00030350: 6465 206f 7220 7374 7269 6e67 3f20 202e  de or string?  .
+00030360: 6672 6f6d 6275 6666 6572 2f2e 7669 6577  frombuffer/.view
+00030370: 286e 702e 7569 6e74 3829 0d0a 0d0a 2020  (np.uint8)....  
+00030380: 2020 2020 2020 7072 6561 6d62 6c65 203d        preamble =
+00030390: 2022 696d 706f 7274 206e 756d 6261 5c6e   "import numba\n
+000303a0: 406e 756d 6261 2e67 7576 6563 746f 7269  @numba.guvectori
+000303b0: 7a65 285b 5c6e 220d 0a0d 0a20 2020 2020  ze([\n"....     
+000303c0: 2020 206d 6964 646c 6520 3d20 6622 2776     middle = f"'v
+000303d0: 6f69 6428 7b69 6e74 7970 657d 5b3a 5d2c  oid({intype}[:],
+000303e0: 207b 6f75 7474 7970 657d 5b3a 5d29 272c   {outtype}[:])',
+000303f0: 2020 2020 2020 2023 203c 2d2d 2063 616e         # <-- can
+00030400: 2073 7461 636b 206d 756c 7469 706c 6520   stack multiple 
+00030410: 6469 6666 6572 656e 7420 6474 7970 6573  different dtypes
+00030420: 2020 782e 7669 6577 286e 702e 7569 6e74    x.view(np.uint
+00030430: 3829 2e72 6573 6861 7065 282d 312c 2078  8).reshape(-1, x
+00030440: 2e69 7465 6d73 697a 6529 5c6e 220d 0a0d  .itemsize)\n"...
+00030450: 0a20 2020 2020 2020 2070 6f73 7461 6d62  .        postamb
+00030460: 6c65 203d 2022 2020 2020 5d2c 2027 286e  le = "    ], '(n
+00030470: 292d 3e28 6e29 272c 2074 6172 6765 743d  )->(n)', target=
+00030480: 2763 7075 2729 5c6e 220d 0a20 2020 2020  'cpu')\n"..     
+00030490: 2020 2063 6f64 6520 3d20 6622 6465 6620     code = f"def 
+000304a0: 7b6d 7966 756e 637d 2864 6174 615f 696e  {myfunc}(data_in
+000304b0: 2c20 6461 7461 5f6f 7574 293a 5c6e 2020  , data_out):\n  
+000304c0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000304d0: 286c 656e 2864 6174 615f 696e 2929 3a5c  (len(data_in)):\
+000304e0: 6e20 2020 2020 2020 2064 6174 615f 6f75  n        data_ou
+000304f0: 745b 695d 3d64 6174 615f 696e 5b69 5d20  t[i]=data_in[i] 
+00030500: 2020 233c 2d2d 2070 7574 2079 6f75 7220    #<-- put your 
+00030510: 636f 6465 2068 6572 655c 6e22 0d0a 2020  code here\n"..  
+00030520: 2020 2020 2020 6578 6563 203d 2070 7265        exec = pre
+00030530: 616d 626c 6520 2b20 6d69 6464 6c65 202b  amble + middle +
+00030540: 2070 6f73 7461 6d62 6c65 202b 2063 6f64   postamble + cod
+00030550: 650d 0a0d 0a20 2020 2020 2020 2070 7269  e....        pri
+00030560: 6e74 2822 436f 7079 2074 6865 2063 6f64  nt("Copy the cod
+00030570: 6520 736e 6970 7065 7420 6265 6c6f 7720  e snippet below 
+00030580: 616e 6420 7265 6e61 6d65 206d 7966 756e  and rename myfun
+00030590: 6322 290d 0a20 2020 2020 2020 2070 7269  c")..        pri
+000305a0: 6e74 2822 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt("------------
+000305b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000305c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000305d0: 2d22 290d 0a20 2020 2020 2020 2070 7269  -")..        pri
+000305e0: 6e74 2865 7865 6329 0d0a 2020 2020 2020  nt(exec)..      
+000305f0: 2020 7072 696e 7428 222d 2d2d 2d2d 2d2d    print("-------
+00030600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00030610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00030620: 2d2d 2d2d 2d2d 2229 0d0a 2020 2020 2020  ------")..      
+00030630: 2020 6966 2069 6e74 7970 655b 305d 203d    if intype[0] =
+00030640: 3d20 227c 2220 6f72 2069 6e74 7970 655b  = "|" or intype[
+00030650: 305d 203d 3d20 223c 223a 0d0a 2020 2020  0] == "<":..    
+00030660: 2020 2020 2020 2020 6966 2069 6e74 7970          if intyp
+00030670: 655b 315d 203d 3d20 2253 223a 0d0a 2020  e[1] == "S":..  
+00030680: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00030690: 696e 7428 0d0a 2020 2020 2020 2020 2020  int(..          
+000306a0: 2020 2020 2020 2020 2020 6622 5468 656e            f"Then
+000306b0: 2063 616c 6c20 7b6d 7966 756e 637d 287b   call {myfunc}({
+000306c0: 6e61 6d65 7d2e 6e75 6d62 6173 7472 696e  name}.numbastrin
+000306d0: 672c 656d 7074 795f 6c69 6b65 287b 6e61  g,empty_like({na
+000306e0: 6d65 7d29 2e6e 756d 6261 7374 7269 6e67  me}).numbastring
+000306f0: 2920 7768 6572 6520 7b6e 616d 657d 2069  ) where {name} i
+00030700: 7320 7468 6520 696e 7075 7420 6172 7261  s the input arra
+00030710: 7922 0d0a 2020 2020 2020 2020 2020 2020  y"..            
+00030720: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00030730: 2020 2065 6c69 6620 696e 7479 7065 5b31     elif intype[1
+00030740: 5d20 3d3d 2022 5522 3a0d 0a20 2020 2020  ] == "U":..     
+00030750: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00030760: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00030770: 2020 2020 2020 2066 2254 6865 6e20 6361         f"Then ca
+00030780: 6c6c 207b 6d79 6675 6e63 7d28 7b6e 616d  ll {myfunc}({nam
+00030790: 657d 2e6e 756d 6261 7374 7269 6e67 2c65  e}.numbastring,e
+000307a0: 6d70 7479 5f6c 696b 6528 7b6e 616d 657d  mpty_like({name}
+000307b0: 292e 6e75 6d62 6173 7472 696e 6729 2077  ).numbastring) w
+000307c0: 6865 7265 207b 6e61 6d65 7d20 6973 2074  here {name} is t
+000307d0: 6865 2069 6e70 7574 2061 7272 6179 220d  he input array".
+000307e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000307f0: 2029 0d0a 2020 2020 2020 2020 656c 7365   )..        else
+00030800: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00030810: 7269 6e74 2866 2254 6865 6e20 6361 6c6c  rint(f"Then call
+00030820: 207b 6d79 6675 6e63 7d28 7b6e 616d 657d   {myfunc}({name}
+00030830: 2c65 6d70 7479 5f6c 696b 6528 7b6e 616d  ,empty_like({nam
+00030840: 657d 2929 2077 6865 7265 207b 6e61 6d65  e})) where {name
+00030850: 7d20 6973 2074 6865 2069 6e70 7574 2061  } is the input a
+00030860: 7272 6179 2229 0d0a 2020 2020 2020 2020  rray")..        
+00030870: 2320 7265 7475 726e 2065 7865 630d 0a0d  # return exec...
+00030880: 0a20 2020 2064 6566 2061 7070 6c79 2873  .    def apply(s
+00030890: 656c 662c 2070 7966 756e 632c 202a 6172  elf, pyfunc, *ar
+000308a0: 6773 2c20 6f74 7970 6573 3d4e 6f6e 652c  gs, otypes=None,
+000308b0: 2064 6f63 3d4e 6f6e 652c 2065 7863 6c75   doc=None, exclu
+000308c0: 6465 643d 4e6f 6e65 2c20 6361 6368 653d  ded=None, cache=
+000308d0: 4661 6c73 652c 2073 6967 6e61 7475 7265  False, signature
+000308e0: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+000308f0: 2022 2222 0d0a 2020 2020 2020 2020 4765   """..        Ge
+00030900: 6e65 7261 6c69 7a65 6420 6675 6e63 7469  neralized functi
+00030910: 6f6e 2063 6c61 7373 2e20 2073 6565 3a20  on class.  see: 
+00030920: 6e70 2e76 6563 746f 7269 7a65 0d0a 0d0a  np.vectorize....
+00030930: 2020 2020 2020 2020 4372 6561 7465 7320          Creates 
+00030940: 616e 6420 7468 656e 2061 7070 6c69 6573  and then applies
+00030950: 2061 2076 6563 746f 7269 7a65 6420 6675   a vectorized fu
+00030960: 6e63 7469 6f6e 2077 6869 6368 2074 616b  nction which tak
+00030970: 6573 2061 206e 6573 7465 6420 7365 7175  es a nested sequ
+00030980: 656e 6365 206f 6620 6f62 6a65 6374 7320  ence of objects 
+00030990: 6f72 0d0a 2020 2020 2020 2020 6e75 6d70  or..        nump
+000309a0: 7920 6172 7261 7973 2061 7320 696e 7075  y arrays as inpu
+000309b0: 7473 2061 6e64 2072 6574 7572 6e73 2061  ts and returns a
+000309c0: 6e20 7369 6e67 6c65 206f 7220 7475 706c  n single or tupl
+000309d0: 6520 6f66 206e 756d 7079 2061 7272 6179  e of numpy array
+000309e0: 2061 730d 0a20 2020 2020 2020 206f 7574   as..        out
+000309f0: 7075 742e 2054 6865 2076 6563 746f 7269  put. The vectori
+00030a00: 7a65 6420 6675 6e63 7469 6f6e 2065 7661  zed function eva
+00030a10: 6c75 6174 6573 2060 7079 6675 6e63 6020  luates `pyfunc` 
+00030a20: 6f76 6572 2073 7563 6365 7373 6976 6520  over successive 
+00030a30: 7475 706c 6573 0d0a 2020 2020 2020 2020  tuples..        
+00030a40: 6f66 2074 6865 2069 6e70 7574 2061 7272  of the input arr
+00030a50: 6179 7320 6c69 6b65 2074 6865 2070 7974  ays like the pyt
+00030a60: 686f 6e20 6d61 7020 6675 6e63 7469 6f6e  hon map function
+00030a70: 2c20 6578 6365 7074 2069 7420 7573 6573  , except it uses
+00030a80: 2074 6865 0d0a 2020 2020 2020 2020 6272   the..        br
+00030a90: 6f61 6463 6173 7469 6e67 2072 756c 6573  oadcasting rules
+00030aa0: 206f 6620 6e75 6d70 792e 0d0a 0d0a 2020   of numpy.....  
+00030ab0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
+00030ac0: 7970 6520 6f66 2074 6865 206f 7574 7075  ype of the outpu
+00030ad0: 7420 6f66 2060 7665 6374 6f72 697a 6564  t of `vectorized
+00030ae0: 6020 6973 2064 6574 6572 6d69 6e65 6420  ` is determined 
+00030af0: 6279 2063 616c 6c69 6e67 0d0a 2020 2020  by calling..    
+00030b00: 2020 2020 7468 6520 6675 6e63 7469 6f6e      the function
+00030b10: 2077 6974 6820 7468 6520 6669 7273 7420   with the first 
+00030b20: 656c 656d 656e 7420 6f66 2074 6865 2069  element of the i
+00030b30: 6e70 7574 2e20 2054 6869 7320 6361 6e20  nput.  This can 
+00030b40: 6265 2061 766f 6964 6564 0d0a 2020 2020  be avoided..    
+00030b50: 2020 2020 6279 2073 7065 6369 6679 696e      by specifyin
+00030b60: 6720 7468 6520 606f 7479 7065 7360 2061  g the `otypes` a
+00030b70: 7267 756d 656e 742e 0d0a 0d0a 2020 2020  rgument.....    
+00030b80: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00030b90: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00030ba0: 2d2d 0d0a 2020 2020 2020 2020 7079 6675  --..        pyfu
+00030bb0: 6e63 203a 2063 616c 6c61 626c 650d 0a20  nc : callable.. 
+00030bc0: 2020 2020 2020 2020 2020 2041 2070 7974             A pyt
+00030bd0: 686f 6e20 6675 6e63 7469 6f6e 206f 7220  hon function or 
+00030be0: 6d65 7468 6f64 2e0d 0a20 2020 2020 2020  method...       
+00030bf0: 206f 7479 7065 7320 3a20 7374 7220 6f72   otypes : str or
+00030c00: 206c 6973 7420 6f66 2064 7479 7065 732c   list of dtypes,
+00030c10: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+00030c20: 2020 2020 2020 2054 6865 206f 7574 7075         The outpu
+00030c30: 7420 6461 7461 2074 7970 652e 2049 7420  t data type. It 
+00030c40: 6d75 7374 2062 6520 7370 6563 6966 6965  must be specifie
+00030c50: 6420 6173 2065 6974 6865 7220 6120 7374  d as either a st
+00030c60: 7269 6e67 206f 660d 0a20 2020 2020 2020  ring of..       
+00030c70: 2020 2020 2074 7970 6563 6f64 6520 6368       typecode ch
+00030c80: 6172 6163 7465 7273 206f 7220 6120 6c69  aracters or a li
+00030c90: 7374 206f 6620 6461 7461 2074 7970 6520  st of data type 
+00030ca0: 7370 6563 6966 6965 7273 2e20 5468 6572  specifiers. Ther
+00030cb0: 6520 7368 6f75 6c64 0d0a 2020 2020 2020  e should..      
+00030cc0: 2020 2020 2020 6265 206f 6e65 2064 6174        be one dat
+00030cd0: 6120 7479 7065 2073 7065 6369 6669 6572  a type specifier
+00030ce0: 2066 6f72 2065 6163 6820 6f75 7470 7574   for each output
+00030cf0: 2e0d 0a20 2020 2020 2020 2064 6f63 203a  ...        doc :
+00030d00: 2073 7472 2c20 6f70 7469 6f6e 616c 0d0a   str, optional..
+00030d10: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00030d20: 646f 6373 7472 696e 6720 666f 7220 7468  docstring for th
+00030d30: 6520 6675 6e63 7469 6f6e 2e20 4966 2060  e function. If `
+00030d40: 4e6f 6e65 602c 2074 6865 2064 6f63 7374  None`, the docst
+00030d50: 7269 6e67 2077 696c 6c20 6265 2074 6865  ring will be the
+00030d60: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
+00030d70: 7079 6675 6e63 2e5f 5f64 6f63 5f5f 6060  pyfunc.__doc__``
+00030d80: 2e0d 0a20 2020 2020 2020 2065 7863 6c75  ...        exclu
+00030d90: 6465 6420 3a20 7365 742c 206f 7074 696f  ded : set, optio
+00030da0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+00030db0: 2053 6574 206f 6620 7374 7269 6e67 7320   Set of strings 
+00030dc0: 6f72 2069 6e74 6567 6572 7320 7265 7072  or integers repr
+00030dd0: 6573 656e 7469 6e67 2074 6865 2070 6f73  esenting the pos
+00030de0: 6974 696f 6e61 6c20 6f72 206b 6579 776f  itional or keywo
+00030df0: 7264 0d0a 2020 2020 2020 2020 2020 2020  rd..            
+00030e00: 6172 6775 6d65 6e74 7320 666f 7220 7768  arguments for wh
+00030e10: 6963 6820 7468 6520 6675 6e63 7469 6f6e  ich the function
+00030e20: 2077 696c 6c20 6e6f 7420 6265 2076 6563   will not be vec
+00030e30: 746f 7269 7a65 642e 2020 5468 6573 6520  torized.  These 
+00030e40: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
+00030e50: 2020 2020 2070 6173 7365 6420 6469 7265       passed dire
+00030e60: 6374 6c79 2074 6f20 6070 7966 756e 6360  ctly to `pyfunc`
+00030e70: 2075 6e6d 6f64 6966 6965 642e 0d0a 0d0a   unmodified.....
+00030e80: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
+00030e90: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
+00030ea0: 372e 300d 0a0d 0a20 2020 2020 2020 2063  7.0....        c
+00030eb0: 6163 6865 203a 2062 6f6f 6c2c 206f 7074  ache : bool, opt
+00030ec0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+00030ed0: 2020 4966 2060 5472 7565 602c 2074 6865    If `True`, the
+00030ee0: 6e20 6361 6368 6520 7468 6520 6669 7273  n cache the firs
+00030ef0: 7420 6675 6e63 7469 6f6e 2063 616c 6c20  t function call 
+00030f00: 7468 6174 2064 6574 6572 6d69 6e65 7320  that determines 
+00030f10: 7468 6520 6e75 6d62 6572 0d0a 2020 2020  the number..    
+00030f20: 2020 2020 2020 206f 6620 6f75 7470 7574         of output
+00030f30: 7320 6966 2060 6f74 7970 6573 6020 6973  s if `otypes` is
+00030f40: 206e 6f74 2070 726f 7669 6465 642e 0d0a   not provided...
+00030f50: 0d0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
+00030f60: 2076 6572 7369 6f6e 6164 6465 643a 3a20   versionadded:: 
+00030f70: 312e 372e 300d 0a0d 0a20 2020 2020 2020  1.7.0....       
+00030f80: 2073 6967 6e61 7475 7265 203a 2073 7472   signature : str
+00030f90: 696e 672c 206f 7074 696f 6e61 6c0d 0a20  ing, optional.. 
+00030fa0: 2020 2020 2020 2020 2020 2047 656e 6572             Gener
+00030fb0: 616c 697a 6564 2075 6e69 7665 7273 616c  alized universal
+00030fc0: 2066 756e 6374 696f 6e20 7369 676e 6174   function signat
+00030fd0: 7572 652c 2065 2e67 2e2c 2060 6028 6d2c  ure, e.g., ``(m,
+00030fe0: 6e29 2c28 6e29 2d3e 286d 2960 6020 666f  n),(n)->(m)`` fo
+00030ff0: 720d 0a20 2020 2020 2020 2020 2020 2076  r..            v
+00031000: 6563 746f 7269 7a65 6420 6d61 7472 6978  ectorized matrix
+00031010: 2d76 6563 746f 7220 6d75 6c74 6970 6c69  -vector multipli
+00031020: 6361 7469 6f6e 2e20 4966 2070 726f 7669  cation. If provi
+00031030: 6465 642c 2060 6070 7966 756e 6360 6020  ded, ``pyfunc`` 
+00031040: 7769 6c6c 0d0a 2020 2020 2020 2020 2020  will..          
+00031050: 2020 6265 2063 616c 6c65 6420 7769 7468    be called with
+00031060: 2028 616e 6420 6578 7065 6374 6564 2074   (and expected t
+00031070: 6f20 7265 7475 726e 2920 6172 7261 7973  o return) arrays
+00031080: 2077 6974 6820 7368 6170 6573 2067 6976   with shapes giv
+00031090: 656e 2062 7920 7468 650d 0a20 2020 2020  en by the..     
+000310a0: 2020 2020 2020 2073 697a 6520 6f66 2063         size of c
+000310b0: 6f72 7265 7370 6f6e 6469 6e67 2063 6f72  orresponding cor
+000310c0: 6520 6469 6d65 6e73 696f 6e73 2e20 4279  e dimensions. By
+000310d0: 2064 6566 6175 6c74 2c20 6060 7079 6675   default, ``pyfu
+000310e0: 6e63 6060 2069 730d 0a20 2020 2020 2020  nc`` is..       
+000310f0: 2020 2020 2061 7373 756d 6564 2074 6f20       assumed to 
+00031100: 7461 6b65 2073 6361 6c61 7273 2061 7320  take scalars as 
+00031110: 696e 7075 7420 616e 6420 6f75 7470 7574  input and output
+00031120: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00031130: 202e 2e20 7665 7273 696f 6e61 6464 6564   .. versionadded
+00031140: 3a3a 2031 2e31 322e 300d 0a0d 0a20 2020  :: 1.12.0....   
+00031150: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00031160: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00031170: 2020 2020 2020 2076 6563 746f 7269 7a65         vectorize
+00031180: 6420 3a20 6361 6c6c 6162 6c65 0d0a 2020  d : callable..  
+00031190: 2020 2020 2020 2020 2020 5665 6374 6f72            Vector
+000311a0: 697a 6564 2066 756e 6374 696f 6e2e 0d0a  ized function...
+000311b0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+000311c0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+000311d0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
+000311e0: 7374 4172 7261 792e 6170 706c 795f 6e75  stArray.apply_nu
+000311f0: 6d62 610d 0a20 2020 2020 2020 2046 6173  mba..        Fas
+00031200: 7441 7272 6179 2e61 7070 6c79 5f70 616e  tArray.apply_pan
+00031210: 6461 730d 0a0d 0a20 2020 2020 2020 2045  das....        E
+00031220: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00031230: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00031240: 2020 203e 3e3e 2064 6566 206d 7966 756e     >>> def myfun
+00031250: 6328 612c 2062 293a 0d0a 2020 2020 2020  c(a, b):..      
+00031260: 2020 2e2e 2e20 2020 2020 2252 6574 7572    ...     "Retur
+00031270: 6e20 612d 6220 6966 2061 3e62 2c20 6f74  n a-b if a>b, ot
+00031280: 6865 7277 6973 6520 7265 7475 726e 2061  herwise return a
+00031290: 2b62 220d 0a20 2020 2020 2020 202e 2e2e  +b"..        ...
+000312a0: 2020 2020 2069 6620 6120 3e20 623a 0d0a       if a > b:..
+000312b0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+000312c0: 2020 2020 7265 7475 726e 2061 202d 2062      return a - b
+000312d0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+000312e0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000312f0: 202e 2e2e 2020 2020 2020 2020 2072 6574   ...         ret
+00031300: 7572 6e20 6120 2b20 620d 0a20 2020 2020  urn a + b..     
+00031310: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
+00031320: 3e3e 3e20 613d 6172 616e 6765 2831 3029  >>> a=arange(10)
+00031330: 0d0a 2020 2020 2020 2020 3e3e 3e20 623d  ..        >>> b=
+00031340: 6172 616e 6765 2831 3029 2b31 0d0a 2020  arange(10)+1..  
+00031350: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
+00031360: 7928 6d79 6675 6e63 2c62 290d 0a20 2020  y(myfunc,b)..   
+00031370: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00031380: 2031 2c20 2033 2c20 2035 2c20 2037 2c20   1,  3,  5,  7, 
+00031390: 2039 2c20 3131 2c20 3133 2c20 3135 2c20   9, 11, 13, 15, 
+000313a0: 3137 2c20 3139 5d29 0d0a 0d0a 2020 2020  17, 19])....    
+000313b0: 2020 2020 4578 616d 706c 6520 7769 7468      Example with
+000313c0: 206f 6e65 2069 6e70 7574 2061 7272 6179   one input array
+000313d0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+000313e0: 6465 6620 7371 7561 7265 2878 293a 0d0a  def square(x):..
+000313f0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00031400: 7265 7475 726e 2078 2a2a 320d 0a20 2020  return x**2..   
+00031410: 2020 2020 203e 3e3e 0d0a 2020 2020 2020       >>>..      
+00031420: 2020 3e3e 3e20 613d 6172 616e 6765 2831    >>> a=arange(1
+00031430: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
+00031440: 612e 6170 706c 7928 7371 7561 7265 290d  a.apply(square).
+00031450: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00031460: 6179 285b 2030 2c20 2031 2c20 2034 2c20  ay([ 0,  1,  4, 
+00031470: 2039 2c20 3136 2c20 3235 2c20 3336 2c20   9, 16, 25, 36, 
+00031480: 3439 2c20 3634 2c20 3831 5d29 0d0a 0d0a  49, 64, 81])....
+00031490: 2020 2020 2020 2020 4578 616d 706c 6520          Example 
+000314a0: 7769 7468 206c 616d 6264 610d 0a0d 0a20  with lambda.... 
+000314b0: 2020 2020 2020 203e 3e3e 2061 3d61 7261         >>> a=ara
+000314c0: 6e67 6528 3130 290d 0a20 2020 2020 2020  nge(10)..       
+000314d0: 203e 3e3e 2061 2e61 7070 6c79 286c 616d   >>> a.apply(lam
+000314e0: 6264 6120 783a 2078 2a2a 3229 0d0a 2020  bda x: x**2)..  
+000314f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00031500: 5b20 302c 2020 312c 2020 342c 2020 392c  [ 0,  1,  4,  9,
+00031510: 2031 362c 2032 352c 2033 362c 2034 392c   16, 25, 36, 49,
+00031520: 2036 342c 2038 315d 290d 0a0d 0a20 2020   64, 81])....   
+00031530: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
+00031540: 6820 6e75 6d62 610d 0a0d 0a20 2020 2020  h numba....     
+00031550: 2020 203e 3e3e 2066 726f 6d20 6e75 6d62     >>> from numb
+00031560: 6120 696d 706f 7274 206a 6974 0d0a 2020  a import jit..  
+00031570: 2020 2020 2020 3e3e 3e20 406a 6974 0d0a        >>> @jit..
+00031580: 2020 2020 2020 2020 2e2e 2e20 6465 6620          ... def 
+00031590: 7371 7561 7265 6974 2878 293a 0d0a 2020  squareit(x):..  
+000315a0: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
+000315b0: 7475 726e 2078 2a2a 320d 0a20 2020 2020  turn x**2..     
+000315c0: 2020 203e 3e3e 2061 2e61 7070 6c79 2873     >>> a.apply(s
+000315d0: 7175 6172 6569 7429 0d0a 2020 2020 2020  quareit)..      
+000315e0: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
+000315f0: 2020 312c 2020 342c 2020 392c 2031 362c    1,  4,  9, 16,
+00031600: 2032 352c 2033 362c 2034 392c 2036 342c   25, 36, 49, 64,
+00031610: 2038 315d 290d 0a0d 0a20 2020 2020 2020   81])....       
+00031620: 2045 7861 6d70 6c65 7320 746f 2075 7365   Examples to use
+00031630: 2065 7869 7374 696e 6720 6275 696c 7469   existing builti
+00031640: 6e20 6f63 7420 6675 6e63 7469 6f6e 2062  n oct function b
+00031650: 7574 2063 6861 6e67 6520 7468 6520 6f75  ut change the ou
+00031660: 7470 7574 2066 726f 6d20 7374 7269 6e67  tput from string
+00031670: 2c20 746f 2075 6e69 636f 6465 2c20 746f  , to unicode, to
+00031680: 206f 626a 6563 740d 0a0d 0a20 2020 2020   object....     
+00031690: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
+000316a0: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
+000316b0: 2061 2e61 7070 6c79 286f 6374 2c20 6f74   a.apply(oct, ot
+000316c0: 7970 6573 3d5b 2753 275d 290d 0a20 2020  ypes=['S'])..   
+000316d0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+000316e0: 6227 306f 3027 2c20 6227 306f 3127 2c20  b'0o0', b'0o1', 
+000316f0: 6227 306f 3227 2c20 6227 306f 3327 2c20  b'0o2', b'0o3', 
+00031700: 6227 306f 3427 2c20 6227 306f 3527 2c20  b'0o4', b'0o5', 
+00031710: 6227 306f 3627 2c20 6227 306f 3727 2c20  b'0o6', b'0o7', 
+00031720: 6227 306f 3130 272c 2062 2730 6f31 3127  b'0o10', b'0o11'
+00031730: 5d2c 2064 7479 7065 3d27 7c53 3427 290d  ], dtype='|S4').
+00031740: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00031750: 3d61 7261 6e67 6528 3130 290d 0a20 2020  =arange(10)..   
+00031760: 2020 2020 203e 3e3e 2061 2e61 7070 6c79       >>> a.apply
+00031770: 286f 6374 2c20 6f74 7970 6573 3d5b 2755  (oct, otypes=['U
+00031780: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
+00031790: 7441 7272 6179 285b 2730 6f30 272c 2027  tArray(['0o0', '
+000317a0: 306f 3127 2c20 2730 6f32 272c 2027 306f  0o1', '0o2', '0o
+000317b0: 3327 2c20 2730 6f34 272c 2027 306f 3527  3', '0o4', '0o5'
+000317c0: 2c20 2730 6f36 272c 2027 306f 3727 2c20  , '0o6', '0o7', 
+000317d0: 2730 6f31 3027 2c20 2730 6f31 3127 5d2c  '0o10', '0o11'],
+000317e0: 2064 7479 7065 3d27 3c55 3427 290d 0a0d   dtype='<U4')...
+000317f0: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+00031800: 7261 6e67 6528 3130 290d 0a20 2020 2020  range(10)..     
+00031810: 2020 203e 3e3e 2061 2e61 7070 6c79 286f     >>> a.apply(o
+00031820: 6374 2c20 6f74 7970 6573 3d5b 274f 275d  ct, otypes=['O']
+00031830: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00031840: 7272 6179 285b 2730 6f30 272c 2027 306f  rray(['0o0', '0o
+00031850: 3127 2c20 2730 6f32 272c 2027 306f 3327  1', '0o2', '0o3'
+00031860: 2c20 2730 6f34 272c 2027 306f 3527 2c20  , '0o4', '0o5', 
+00031870: 2730 6f36 272c 2027 306f 3727 2c20 2730  '0o6', '0o7', '0
+00031880: 6f31 3027 2c20 2730 6f31 3127 5d2c 2064  o10', '0o11'], d
+00031890: 7479 7065 3d6f 626a 6563 7429 0d0a 0d0a  type=object)....
+000318a0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+000318b0: 2020 2020 2020 2076 6675 6e63 203d 206e         vfunc = n
+000318c0: 702e 7665 6374 6f72 697a 6528 7079 6675  p.vectorize(pyfu
+000318d0: 6e63 2c20 6f74 7970 6573 3d6f 7479 7065  nc, otypes=otype
+000318e0: 732c 2064 6f63 3d64 6f63 2c20 6578 636c  s, doc=doc, excl
+000318f0: 7564 6564 3d65 7863 6c75 6465 642c 2063  uded=excluded, c
+00031900: 6163 6865 3d63 6163 6865 2c20 7369 676e  ache=cache, sign
+00031910: 6174 7572 653d 7369 676e 6174 7572 6529  ature=signature)
+00031920: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+00031930: 203d 2076 6675 6e63 2873 656c 662c 202a   = vfunc(self, *
+00031940: 6172 6773 290d 0a20 2020 2020 2020 2072  args)..        r
+00031950: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00031960: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00031970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000319a0: 2d0d 0a20 2020 2064 6566 2061 7070 6c79  -..    def apply
+000319b0: 5f70 616e 6461 7328 7365 6c66 2c20 6675  _pandas(self, fu
+000319c0: 6e63 2c20 636f 6e76 6572 745f 6474 7970  nc, convert_dtyp
+000319d0: 653d 5472 7565 2c20 6172 6773 3d28 292c  e=True, args=(),
+000319e0: 202a 2a6b 7764 7329 3a0d 0a20 2020 2020   **kwds):..     
+000319f0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00031a00: 496e 766f 6b65 2066 756e 6374 696f 6e20  Invoke function 
+00031a10: 6f6e 2076 616c 7565 7320 6f66 2046 6173  on values of Fas
+00031a20: 7441 7272 6179 2e20 4361 6e20 6265 2075  tArray. Can be u
+00031a30: 6675 6e63 2028 6120 4e75 6d50 7920 6675  func (a NumPy fu
+00031a40: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
+00031a50: 7468 6174 2061 7070 6c69 6573 2074 6f20  that applies to 
+00031a60: 7468 6520 656e 7469 7265 2046 6173 7441  the entire FastA
+00031a70: 7272 6179 2920 6f72 2061 2050 7974 686f  rray) or a Pytho
+00031a80: 6e20 6675 6e63 7469 6f6e 2074 6861 7420  n function that 
+00031a90: 6f6e 6c79 2077 6f72 6b73 0d0a 2020 2020  only works..    
+00031aa0: 2020 2020 6f6e 2073 696e 676c 6520 7661      on single va
+00031ab0: 6c75 6573 0d0a 0d0a 2020 2020 2020 2020  lues....        
+00031ac0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00031ad0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00031ae0: 2020 2020 2020 2020 6675 6e63 203a 2066          func : f
+00031af0: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
+00031b00: 2063 6f6e 7665 7274 5f64 7479 7065 203a   convert_dtype :
+00031b10: 2062 6f6f 6c65 616e 2c20 6465 6661 756c   boolean, defaul
+00031b20: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
+00031b30: 2020 2020 5472 7920 746f 2066 696e 6420      Try to find 
+00031b40: 6265 7474 6572 2064 7479 7065 2066 6f72  better dtype for
+00031b50: 2065 6c65 6d65 6e74 7769 7365 2066 756e   elementwise fun
+00031b60: 6374 696f 6e20 7265 7375 6c74 732e 2049  ction results. I
+00031b70: 660d 0a20 2020 2020 2020 2020 2020 2046  f..            F
+00031b80: 616c 7365 2c20 6c65 6176 6520 6173 2064  alse, leave as d
+00031b90: 7479 7065 3d6f 626a 6563 740d 0a20 2020  type=object..   
+00031ba0: 2020 2020 2061 7267 7320 3a20 7475 706c       args : tupl
+00031bb0: 650d 0a20 2020 2020 2020 2020 2020 2050  e..            P
+00031bc0: 6f73 6974 696f 6e61 6c20 6172 6775 6d65  ositional argume
+00031bd0: 6e74 7320 746f 2070 6173 7320 746f 2066  nts to pass to f
+00031be0: 756e 6374 696f 6e20 696e 2061 6464 6974  unction in addit
+00031bf0: 696f 6e20 746f 2074 6865 2076 616c 7565  ion to the value
+00031c00: 0d0a 2020 2020 2020 2020 4164 6469 7469  ..        Additi
+00031c10: 6f6e 616c 206b 6579 776f 7264 2061 7267  onal keyword arg
+00031c20: 756d 656e 7473 2077 696c 6c20 6265 2070  uments will be p
+00031c30: 6173 7365 6420 6173 206b 6579 776f 7264  assed as keyword
+00031c40: 7320 746f 2074 6865 2066 756e 6374 696f  s to the functio
+00031c50: 6e0d 0a0d 0a20 2020 2020 2020 2052 6574  n....        Ret
+00031c60: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00031c70: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2079  -----..        y
+00031c80: 203a 2046 6173 7441 7272 6179 206f 7220   : FastArray or 
+00031c90: 4461 7461 7365 7420 6966 2066 756e 6320  Dataset if func 
+00031ca0: 7265 7475 726e 7320 6120 4661 7374 4172  returns a FastAr
+00031cb0: 7261 790d 0a0d 0a20 2020 2020 2020 2053  ray....        S
+00031cc0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+00031cd0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00031ce0: 2020 2046 6173 7441 7272 6179 2e6d 6170     FastArray.map
+00031cf0: 3a20 466f 7220 656c 656d 656e 742d 7769  : For element-wi
+00031d00: 7365 206f 7065 7261 7469 6f6e 730d 0a20  se operations.. 
+00031d10: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00031d20: 2e61 6767 3a20 6f6e 6c79 2070 6572 666f  .agg: only perfo
+00031d30: 726d 2061 6767 7265 6761 7469 6e67 2074  rm aggregating t
+00031d40: 7970 6520 6f70 6572 6174 696f 6e73 0d0a  ype operations..
+00031d50: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00031d60: 792e 7472 616e 7366 6f72 6d3a 206f 6e6c  y.transform: onl
+00031d70: 7920 7065 7266 6f72 6d20 7472 616e 7366  y perform transf
+00031d80: 6f72 6d69 6e67 2074 7970 6520 6f70 6572  orming type oper
+00031d90: 6174 696f 6e73 0d0a 0d0a 2020 2020 2020  ations....      
+00031da0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+00031db0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00031dc0: 2020 2020 2020 4372 6561 7465 2061 2046        Create a F
+00031dd0: 6173 7441 7272 6179 2077 6974 6820 7479  astArray with ty
+00031de0: 7069 6361 6c20 7375 6d6d 6572 2074 656d  pical summer tem
+00031df0: 7065 7261 7475 7265 7320 666f 7220 6561  peratures for ea
+00031e00: 6368 2063 6974 792e 0d0a 0d0a 2020 2020  ch city.....    
+00031e10: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
+00031e20: 4661 7374 4172 7261 7928 5b32 302c 2032  FastArray([20, 2
+00031e30: 312c 2031 325d 2c20 696e 6465 783d 5b27  1, 12], index=['
+00031e40: 4c6f 6e64 6f6e 272c 2027 4e65 7720 596f  London', 'New Yo
+00031e50: 726b 272c 2748 656c 7369 6e6b 6927 5d29  rk','Helsinki'])
+00031e60: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
+00031e70: 0d0a 2020 2020 2020 2020 4c6f 6e64 6f6e  ..        London
+00031e80: 2020 2020 2020 3230 0d0a 2020 2020 2020        20..      
+00031e90: 2020 4e65 7720 596f 726b 2020 2020 3231    New York    21
+00031ea0: 0d0a 2020 2020 2020 2020 4865 6c73 696e  ..        Helsin
+00031eb0: 6b69 2020 2020 3132 0d0a 2020 2020 2020  ki    12..      
+00031ec0: 2020 6474 7970 653a 2069 6e74 3634 0d0a    dtype: int64..
+00031ed0: 0d0a 2020 2020 2020 2020 5371 7561 7265  ..        Square
+00031ee0: 2074 6865 2076 616c 7565 7320 6279 2064   the values by d
+00031ef0: 6566 696e 696e 6720 6120 6675 6e63 7469  efining a functi
+00031f00: 6f6e 2061 6e64 2070 6173 7369 6e67 2069  on and passing i
+00031f10: 7420 6173 2061 6e0d 0a20 2020 2020 2020  t as an..       
+00031f20: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
+00031f30: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
+00031f40: 2020 2020 203e 3e3e 2064 6566 2073 7175       >>> def squ
+00031f50: 6172 6528 7829 3a0d 0a20 2020 2020 2020  are(x):..       
+00031f60: 202e 2e2e 2020 2020 2072 6574 7572 6e20   ...     return 
+00031f70: 782a 2a32 0d0a 2020 2020 2020 2020 3e3e  x**2..        >>
+00031f80: 3e20 6661 2e61 7070 6c79 2873 7175 6172  > fa.apply(squar
+00031f90: 6529 0d0a 2020 2020 2020 2020 4c6f 6e64  e)..        Lond
+00031fa0: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
+00031fb0: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
+00031fc0: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
+00031fd0: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
+00031fe0: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
+00031ff0: 7436 340d 0a0d 0a20 2020 2020 2020 2053  t64....        S
+00032000: 7175 6172 6520 7468 6520 7661 6c75 6573  quare the values
+00032010: 2062 7920 7061 7373 696e 6720 616e 2061   by passing an a
+00032020: 6e6f 6e79 6d6f 7573 2066 756e 6374 696f  nonymous functio
+00032030: 6e20 6173 2061 6e0d 0a20 2020 2020 2020  n as an..       
+00032040: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
+00032050: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
+00032060: 2020 2020 203e 3e3e 2066 612e 6170 706c       >>> fa.appl
+00032070: 7928 6c61 6d62 6461 2078 3a20 782a 2a32  y(lambda x: x**2
+00032080: 290d 0a20 2020 2020 2020 204c 6f6e 646f  )..        Londo
+00032090: 6e20 2020 2020 2034 3030 0d0a 2020 2020  n      400..    
+000320a0: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
+000320b0: 3434 310d 0a20 2020 2020 2020 2048 656c  441..        Hel
+000320c0: 7369 6e6b 6920 2020 2031 3434 0d0a 2020  sinki    144..  
+000320d0: 2020 2020 2020 6474 7970 653a 2069 6e74        dtype: int
+000320e0: 3634 0d0a 0d0a 2020 2020 2020 2020 4465  64....        De
+000320f0: 6669 6e65 2061 2063 7573 746f 6d20 6675  fine a custom fu
+00032100: 6e63 7469 6f6e 2074 6861 7420 6e65 6564  nction that need
+00032110: 7320 6164 6469 7469 6f6e 616c 2070 6f73  s additional pos
+00032120: 6974 696f 6e61 6c0d 0a20 2020 2020 2020  itional..       
+00032130: 2061 7267 756d 656e 7473 2061 6e64 2070   arguments and p
+00032140: 6173 7320 7468 6573 6520 6164 6469 7469  ass these additi
+00032150: 6f6e 616c 2061 7267 756d 656e 7473 2075  onal arguments u
+00032160: 7369 6e67 2074 6865 0d0a 2020 2020 2020  sing the..      
+00032170: 2020 6060 6172 6773 6060 206b 6579 776f    ``args`` keywo
+00032180: 7264 2e0d 0a0d 0a20 2020 2020 2020 203e  rd.....        >
+00032190: 3e3e 2064 6566 2073 7562 7472 6163 745f  >> def subtract_
+000321a0: 6375 7374 6f6d 5f76 616c 7565 2878 2c20  custom_value(x, 
+000321b0: 6375 7374 6f6d 5f76 616c 7565 293a 0d0a  custom_value):..
+000321c0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+000321d0: 7265 7475 726e 2078 2d63 7573 746f 6d5f  return x-custom_
+000321e0: 7661 6c75 650d 0a20 2020 2020 2020 203e  value..        >
+000321f0: 3e3e 2066 612e 6170 706c 7928 7375 6274  >> fa.apply(subt
+00032200: 7261 6374 5f63 7573 746f 6d5f 7661 6c75  ract_custom_valu
+00032210: 652c 2061 7267 733d 2835 2c29 290d 0a20  e, args=(5,)).. 
+00032220: 2020 2020 2020 204c 6f6e 646f 6e20 2020         London   
+00032230: 2020 2031 350d 0a20 2020 2020 2020 204e     15..        N
+00032240: 6577 2059 6f72 6b20 2020 2031 360d 0a20  ew York    16.. 
+00032250: 2020 2020 2020 2048 656c 7369 6e6b 6920         Helsinki 
+00032260: 2020 2020 370d 0a20 2020 2020 2020 2064      7..        d
+00032270: 7479 7065 3a20 696e 7436 340d 0a0d 0a20  type: int64.... 
+00032280: 2020 2020 2020 2044 6566 696e 6520 6120         Define a 
+00032290: 6375 7374 6f6d 2066 756e 6374 696f 6e20  custom function 
+000322a0: 7468 6174 2074 616b 6573 206b 6579 776f  that takes keywo
+000322b0: 7264 2061 7267 756d 656e 7473 0d0a 2020  rd arguments..  
+000322c0: 2020 2020 2020 616e 6420 7061 7373 2074        and pass t
+000322d0: 6865 7365 2061 7267 756d 656e 7473 2074  hese arguments t
+000322e0: 6f20 6060 6170 706c 7960 602e 0d0a 0d0a  o ``apply``.....
+000322f0: 2020 2020 2020 2020 3e3e 3e20 6465 6620          >>> def 
+00032300: 6164 645f 6375 7374 6f6d 5f76 616c 7565  add_custom_value
+00032310: 7328 782c 202a 2a6b 7761 7267 7329 3a0d  s(x, **kwargs):.
+00032320: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00032330: 2066 6f72 206d 6f6e 7468 2069 6e20 6b77   for month in kw
+00032340: 6172 6773 3a0d 0a20 2020 2020 2020 202e  args:..        .
+00032350: 2e2e 2020 2020 2020 2020 2078 2b3d 6b77  ..         x+=kw
+00032360: 6172 6773 5b6d 6f6e 7468 5d0d 0a20 2020  args[month]..   
+00032370: 2020 2020 202e 2e2e 2020 2020 2072 6574       ...     ret
+00032380: 7572 6e20 780d 0a20 2020 2020 2020 203e  urn x..        >
+00032390: 3e3e 2066 612e 6170 706c 7928 6164 645f  >> fa.apply(add_
+000323a0: 6375 7374 6f6d 5f76 616c 7565 732c 206a  custom_values, j
+000323b0: 756e 653d 3330 2c20 6a75 6c79 3d32 302c  une=30, july=20,
+000323c0: 2061 7567 7573 743d 3235 290d 0a20 2020   august=25)..   
+000323d0: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
+000323e0: 2039 350d 0a20 2020 2020 2020 204e 6577   95..        New
+000323f0: 2059 6f72 6b20 2020 2039 360d 0a20 2020   York    96..   
+00032400: 2020 2020 2048 656c 7369 6e6b 6920 2020       Helsinki   
+00032410: 2038 370d 0a20 2020 2020 2020 2064 7479   87..        dty
+00032420: 7065 3a20 696e 7436 340d 0a0d 0a20 2020  pe: int64....   
+00032430: 2020 2020 2055 7365 2061 2066 756e 6374       Use a funct
+00032440: 696f 6e20 6672 6f6d 2074 6865 204e 756d  ion from the Num
+00032450: 7079 206c 6962 7261 7279 2e0d 0a0d 0a20  py library..... 
+00032460: 2020 2020 2020 203e 3e3e 2066 612e 6170         >>> fa.ap
+00032470: 706c 7928 6e70 2e6c 6f67 290d 0a20 2020  ply(np.log)..   
+00032480: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
+00032490: 2032 2e39 3935 3733 320d 0a20 2020 2020   2.995732..     
+000324a0: 2020 204e 6577 2059 6f72 6b20 2020 2033     New York    3
+000324b0: 2e30 3434 3532 320d 0a20 2020 2020 2020  .044522..       
+000324c0: 2048 656c 7369 6e6b 6920 2020 2032 2e34   Helsinki    2.4
+000324d0: 3834 3930 370d 0a20 2020 2020 2020 2064  84907..        d
+000324e0: 7479 7065 3a20 666c 6f61 7436 340d 0a20  type: float64.. 
+000324f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00032500: 2020 2020 696d 706f 7274 2070 616e 6461      import panda
+00032510: 7320 6173 2070 640d 0a0d 0a20 2020 2020  s as pd....     
+00032520: 2020 2073 6572 6965 7320 3d20 7064 2e53     series = pd.S
+00032530: 6572 6965 7328 7365 6c66 290d 0a20 2020  eries(self)..   
+00032540: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00032550: 7269 6573 2e61 7070 6c79 2866 756e 632c  ries.apply(func,
+00032560: 2063 6f6e 7665 7274 5f64 7479 7065 3d63   convert_dtype=c
+00032570: 6f6e 7665 7274 5f64 7479 7065 2c20 6172  onvert_dtype, ar
+00032580: 6773 3d61 7267 732c 202a 2a6b 7764 7329  gs=args, **kwds)
+00032590: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000325a0: 2072 6573 756c 742e 7661 6c75 6573 0d0a   result.values..
+000325b0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+000325c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000325d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000325e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000325f0: 2d2d 2d0d 0a20 2020 2040 6361 6368 6564  ---..    @cached
+00032600: 5f77 6561 6b72 6566 5f70 726f 7065 7274  _weakref_propert
+00032610: 790d 0a20 2020 2064 6566 2073 7472 2873  y..    def str(s
+00032620: 656c 6629 202d 3e20 2246 4153 7472 696e  elf) -> "FAStrin
+00032630: 6722 3a0d 0a20 2020 2020 2020 2072 2222  g":..        r""
+00032640: 2243 6173 7473 2061 6e20 6172 7261 7920  "Casts an array 
+00032650: 6f66 2062 7974 6520 7374 7269 6e67 7320  of byte strings 
+00032660: 6f72 2075 6e69 636f 6465 2061 7320 6060  or unicode as ``
+00032670: 4641 5374 7269 6e67 6060 2e0d 0a0d 0a20  FAString``..... 
+00032680: 2020 2020 2020 2045 6e61 626c 6573 2061         Enables a
+00032690: 2076 6172 6965 7479 206f 6620 7573 6566   variety of usef
+000326a0: 756c 2073 7472 696e 6720 6d61 6e69 7075  ul string manipu
+000326b0: 6c61 7469 6f6e 206d 6574 686f 6473 2e0d  lation methods..
+000326c0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+000326d0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+000326e0: 2d2d 2d0d 0a20 2020 2020 2020 2046 4153  ---..        FAS
+000326f0: 7472 696e 670d 0a0d 0a20 2020 2020 2020  tring....       
+00032700: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
+00032710: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
+00032720: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
+00032730: 2020 2020 2020 2020 4966 2074 6865 2046          If the F
+00032740: 6173 7441 7272 6179 2069 7320 6f66 2064  astArray is of d
+00032750: 7479 7065 206f 7468 6572 2074 6861 6e20  type other than 
+00032760: 6279 7465 2073 7472 696e 6720 6f72 2075  byte string or u
+00032770: 6e69 636f 6465 0d0a 0d0a 2020 2020 2020  nicode....      
+00032780: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
+00032790: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000327a0: 2020 2020 2020 6e70 2e63 6861 7261 7272        np.chararr
+000327b0: 6179 0d0a 2020 2020 2020 2020 6e70 2e63  ay..        np.c
+000327c0: 6861 720d 0a20 2020 2020 2020 2072 742e  har..        rt.
+000327d0: 4641 5374 7269 6e67 2e61 7070 6c79 0d0a  FAString.apply..
+000327e0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+000327f0: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00032800: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00032810: 3e20 733d 4641 285b 2774 6869 7327 2c27  > s=FA(['this','
+00032820: 7468 6174 272c 2774 6573 7420 275d 2a31  that','test ']*1
+00032830: 3030 5f30 3030 290d 0a20 2020 2020 2020  00_000)..       
+00032840: 203e 3e3e 2073 2e73 7472 2e75 7070 6572   >>> s.str.upper
+00032850: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00032860: 7261 7928 5b62 2754 4849 5327 2c20 6227  ray([b'THIS', b'
+00032870: 5448 4154 272c 2062 2754 4553 5420 272c  THAT', b'TEST ',
+00032880: 202e 2e2e 2c20 6227 5448 4953 272c 2062   ..., b'THIS', b
+00032890: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
+000328a0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+000328b0: 2020 2020 2020 6474 7970 653d 277c 5335        dtype='|S5
+000328c0: 2729 0d0a 0d0a 2020 2020 2020 2020 3e3e  ')....        >>
+000328d0: 3e20 732e 7374 722e 6c6f 7765 720d 0a20  > s.str.lower.. 
+000328e0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+000328f0: 285b 6227 7468 6973 272c 2062 2774 6861  ([b'this', b'tha
+00032900: 7427 2c20 6227 7465 7374 2027 2c20 2e2e  t', b'test ', ..
+00032910: 2e2c 2062 2774 6869 7327 2c20 6227 7468  ., b'this', b'th
+00032920: 6174 272c 2062 2774 6573 7420 275d 2c0d  at', b'test '],.
+00032930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032940: 2020 2064 7479 7065 3d27 7c53 3527 290d     dtype='|S5').
+00032950: 0a0d 0a20 2020 2020 2020 203e 3e3e 2073  ...        >>> s
+00032960: 2e73 7472 2e72 656d 6f76 6574 7261 696c  .str.removetrail
+00032970: 696e 6728 290d 0a20 2020 2020 2020 2046  ing()..        F
+00032980: 6173 7441 7272 6179 285b 6227 7468 6973  astArray([b'this
+00032990: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
+000329a0: 7374 272c 202e 2e2e 2c20 6227 7468 6973  st', ..., b'this
+000329b0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
+000329c0: 7374 275d 2c0d 0a20 2020 2020 2020 2020  st'],..         
+000329d0: 2020 2020 2020 2020 2064 7479 7065 3d27           dtype='
+000329e0: 7c53 3527 290d 0a20 2020 2020 2020 2022  |S5')..        "
+000329f0: 2222 0d0a 2020 2020 2020 2020 6966 2073  ""..        if s
+00032a00: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
+00032a10: 6e20 2255 5322 3a0d 0a20 2020 2020 2020  n "US":..       
+00032a20: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
+00032a30: 5265 6769 7374 6572 2e46 4153 7472 696e  Register.FAStrin
+00032a40: 6728 7365 6c66 290d 0a20 2020 2020 2020  g(self)..       
+00032a50: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
+00032a60: 6861 7220 3d3d 2022 4f22 3a0d 0a20 2020  har == "O":..   
+00032a70: 2020 2020 2020 2020 2023 2074 7279 2074           # try t
+00032a80: 6f20 636f 6e76 6572 7420 746f 2073 7472  o convert to str
+00032a90: 696e 6720 286d 6967 6874 2068 6176 6520  ing (might have 
+00032aa0: 636f 6d65 2066 726f 6d20 7061 6e64 6173  come from pandas
+00032ab0: 290d 0a20 2020 2020 2020 2020 2020 2074  )..            t
+00032ac0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00032ad0: 2020 2020 2063 6f6e 7620 3d20 7365 6c66       conv = self
+00032ae0: 2e61 7374 7970 6528 2253 2229 0d0a 2020  .astype("S")..  
+00032af0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00032b00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00032b10: 2020 2063 6f6e 7620 3d20 7365 6c66 2e61     conv = self.a
+00032b20: 7374 7970 6528 2255 2229 0d0a 2020 2020  stype("U")..    
+00032b30: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00032b40: 7970 6552 6567 6973 7465 722e 4641 5374  ypeRegister.FASt
+00032b50: 7269 6e67 2863 6f6e 7629 0d0a 0d0a 2020  ring(conv)....  
+00032b60: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+00032b70: 4572 726f 7228 6622 5468 6520 2e73 7472  Error(f"The .str
+00032b80: 2066 756e 6374 696f 6e20 6361 6e20 6f6e   function can on
+00032b90: 6c79 2062 6520 7573 6564 206f 6e20 6279  ly be used on by
+00032ba0: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
+00032bb0: 6963 6f64 6520 6e6f 7420 7b73 656c 662e  icode not {self.
+00032bc0: 6474 7970 6521 727d 2229 0d0a 0d0a 2020  dtype!r}")....  
+00032bd0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00032be0: 0a20 2020 2064 6566 2066 726f 6d5f 6172  .    def from_ar
+00032bf0: 726f 7728 0d0a 2020 2020 2020 2020 6172  row(..        ar
+00032c00: 723a 2055 6e69 6f6e 5b22 7061 2e41 7272  r: Union["pa.Arr
+00032c10: 6179 222c 2022 7061 2e43 6875 6e6b 6564  ay", "pa.Chunked
+00032c20: 4172 7261 7922 5d2c 0d0a 2020 2020 2020  Array"],..      
+00032c30: 2020 7a65 726f 5f63 6f70 795f 6f6e 6c79    zero_copy_only
+00032c40: 3a20 626f 6f6c 203d 2054 7275 652c 0d0a  : bool = True,..
+00032c50: 2020 2020 2020 2020 7772 6974 6162 6c65          writable
+00032c60: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
+00032c70: 0a20 2020 2020 2020 2061 7574 6f5f 7769  .        auto_wi
+00032c80: 6465 6e3a 2062 6f6f 6c20 3d20 4661 6c73  den: bool = Fals
+00032c90: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
+00032ca0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
+00032cb0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00032cc0: 436f 6e76 6572 7420 6120 7079 6172 726f  Convert a pyarro
+00032cd0: 7720 6041 7272 6179 6020 746f 2061 2072  w `Array` to a r
+00032ce0: 6970 7461 626c 6520 6046 6173 7441 7272  iptable `FastArr
+00032cf0: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
+00032d00: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00032d10: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00032d20: 2020 2020 2020 2020 6172 7220 3a20 7079          arr : py
+00032d30: 6172 726f 772e 4172 7261 7920 6f72 2070  arrow.Array or p
+00032d40: 7961 7272 6f77 2e43 6875 6e6b 6564 4172  yarrow.ChunkedAr
+00032d50: 7261 790d 0a20 2020 2020 2020 207a 6572  ray..        zer
+00032d60: 6f5f 636f 7079 5f6f 6e6c 7920 3a20 626f  o_copy_only : bo
+00032d70: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
+00032d80: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+00032d90: 2054 7275 652c 2061 6e20 6578 6365 7074   True, an except
+00032da0: 696f 6e20 7769 6c6c 2062 6520 7261 6973  ion will be rais
+00032db0: 6564 2069 6620 7468 6520 636f 6e76 6572  ed if the conver
+00032dc0: 7369 6f6e 2074 6f20 6120 6046 6173 7441  sion to a `FastA
+00032dd0: 7272 6179 6020 776f 756c 6420 7265 7175  rray` would requ
+00032de0: 6972 6520 636f 7079 696e 6720 7468 650d  ire copying the.
+00032df0: 0a20 2020 2020 2020 2020 2020 2075 6e64  .            und
+00032e00: 6572 6c79 696e 6720 6461 7461 2028 652e  erlying data (e.
+00032e10: 672e 2069 6e20 7072 6573 656e 6365 206f  g. in presence o
+00032e20: 6620 6e75 6c6c 732c 206f 7220 666f 7220  f nulls, or for 
+00032e30: 6e6f 6e2d 7072 696d 6974 6976 6520 7479  non-primitive ty
+00032e40: 7065 7329 2e0d 0a20 2020 2020 2020 2077  pes)...        w
+00032e50: 7269 7461 626c 6520 3a20 626f 6f6c 2c20  ritable : bool, 
+00032e60: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
+00032e70: 2020 2020 2020 2020 2020 2046 6f72 2061             For a
+00032e80: 2060 4661 7374 4172 7261 7960 2063 7265   `FastArray` cre
+00032e90: 6174 6564 2077 6974 6820 7a65 726f 2063  ated with zero c
+00032ea0: 6f70 7920 2876 6965 7720 6f6e 2074 6865  opy (view on the
+00032eb0: 2041 7272 6f77 2064 6174 6129 2c20 7468   Arrow data), th
+00032ec0: 6520 7265 7375 6c74 696e 6720 6172 7261  e resulting arra
+00032ed0: 7920 6973 206e 6f74 2077 7269 7461 626c  y is not writabl
+00032ee0: 6520 2841 7272 6f77 2064 6174 6120 6973  e (Arrow data is
+00032ef0: 2069 6d6d 7574 6162 6c65 292e 0d0a 2020   immutable)...  
+00032f00: 2020 2020 2020 2020 2020 4279 2073 6574            By set
+00032f10: 7469 6e67 2074 6869 7320 746f 2054 7275  ting this to Tru
+00032f20: 652c 2061 2063 6f70 7920 6f66 2074 6865  e, a copy of the
+00032f30: 2061 7272 6179 2069 7320 6d61 6465 2074   array is made t
+00032f40: 6f20 656e 7375 7265 2069 7420 6973 2077  o ensure it is w
+00032f50: 7269 7461 626c 652e 0d0a 2020 2020 2020  ritable...      
+00032f60: 2020 6175 746f 5f77 6964 656e 203a 2062    auto_widen : b
+00032f70: 6f6f 6c2c 206f 7074 696f 6e61 6c2c 2064  ool, optional, d
+00032f80: 6566 6175 6c74 2074 6f20 4661 6c73 650d  efault to False.
+00032f90: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
+00032fa0: 6e20 4661 6c73 6520 2874 6865 2064 6566  n False (the def
+00032fb0: 6175 6c74 292c 2069 6620 616e 2061 7272  ault), if an arr
+00032fc0: 6f77 2061 7272 6179 2063 6f6e 7461 696e  ow array contain
+00032fd0: 7320 6120 7661 6c75 6520 7768 6963 6820  s a value which 
+00032fe0: 776f 756c 6420 6265 2063 6f6e 7369 6465  would be conside
+00032ff0: 7265 640d 0a20 2020 2020 2020 2020 2020  red..           
+00033000: 2074 6865 2027 696e 7661 6c69 6427 2f4e   the 'invalid'/N
+00033010: 4120 7661 6c75 6520 666f 7220 7468 6520  A value for the 
+00033020: 6571 7569 7661 6c65 6e74 2064 7479 7065  equivalent dtype
+00033030: 2069 6e20 6120 6046 6173 7441 7272 6179   in a `FastArray
+00033040: 602c 2072 6169 7365 2061 6e20 6578 6365  `, raise an exce
+00033050: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
+00033060: 2020 2062 6563 6175 7365 2064 6972 6563     because direc
+00033070: 7420 636f 6e76 6572 7369 6f6e 2077 6f75  t conversion wou
+00033080: 6c64 2062 6520 6c6f 7373 7920 2f20 6368  ld be lossy / ch
+00033090: 616e 6765 2074 6865 2073 656d 616e 7469  ange the semanti
+000330a0: 6320 6d65 616e 696e 6720 6f66 2074 6865  c meaning of the
+000330b0: 2064 6174 612e 0d0a 2020 2020 2020 2020   data...        
+000330c0: 2020 2020 5768 656e 2054 7275 652c 2074      When True, t
+000330d0: 6865 2063 6f6e 7665 7274 6564 2061 7272  he converted arr
+000330e0: 6179 2077 696c 6c20 6265 2077 6964 656e  ay will be widen
+000330f0: 6564 2028 6966 2070 6f73 7369 626c 6529  ed (if possible)
+00033100: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
+00033110: 6765 7374 2064 7479 7065 0d0a 2020 2020  gest dtype..    
+00033120: 2020 2020 2020 2020 746f 2065 6e73 7572          to ensur
+00033130: 6520 7468 6520 6461 7461 2077 696c 6c20  e the data will 
+00033140: 6265 2069 6e74 6572 7072 6574 6564 2069  be interpreted i
+00033150: 6e20 7468 6520 7361 6d65 2077 6179 2e0d  n the same way..
+00033160: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00033170: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00033180: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
+00033190: 7441 7272 6179 0d0a 2020 2020 2020 2020  tArray..        
+000331a0: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
+000331b0: 6f72 7420 7079 6172 726f 772e 7479 7065  ort pyarrow.type
+000331c0: 7320 6173 2070 6174 0d0a 0d0a 2020 2020  s as pat....    
+000331d0: 2020 2020 2320 4261 7365 6420 6f6e 2074      # Based on t
+000331e0: 6865 2074 7970 6520 6f66 2074 6865 2061  he type of the a
+000331f0: 7272 6179 2c20 6469 7370 6174 6368 2074  rray, dispatch t
+00033200: 6f20 7479 7065 2d73 7065 6369 6669 6320  o type-specific 
+00033210: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
+00033220: 6f66 202e 6672 6f6d 5f61 7272 6f77 2829  of .from_arrow()
+00033230: 2e0d 0a20 2020 2020 2020 2070 615f 6172  ...        pa_ar
+00033240: 725f 7479 7065 203d 2061 7272 2e74 7970  r_type = arr.typ
+00033250: 650d 0a20 2020 2020 2020 2069 6620 280d  e..        if (.
+00033260: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
+00033270: 2e69 735f 626f 6f6c 6561 6e28 7061 5f61  .is_boolean(pa_a
+00033280: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
+00033290: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
+000332a0: 696e 7465 6765 7228 7061 5f61 7272 5f74  integer(pa_arr_t
+000332b0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+000332c0: 2020 6f72 2070 6174 2e69 735f 666c 6f61    or pat.is_floa
+000332d0: 7469 6e67 2870 615f 6172 725f 7479 7065  ting(pa_arr_type
+000332e0: 290d 0a20 2020 2020 2020 2020 2020 206f  )..            o
+000332f0: 7220 7061 742e 6973 5f73 7472 696e 6728  r pat.is_string(
+00033300: 7061 5f61 7272 5f74 7970 6529 0d0a 2020  pa_arr_type)..  
+00033310: 2020 2020 2020 2020 2020 6f72 2070 6174            or pat
+00033320: 2e69 735f 6269 6e61 7279 2870 615f 6172  .is_binary(pa_ar
+00033330: 725f 7479 7065 290d 0a20 2020 2020 2020  r_type)..       
+00033340: 2020 2020 206f 7220 7061 742e 6973 5f66       or pat.is_f
+00033350: 6978 6564 5f73 697a 655f 6269 6e61 7279  ixed_size_binary
+00033360: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
+00033370: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
+00033380: 2020 2020 2020 2023 2054 4f44 4f3a 2043         # TODO: C
+00033390: 6865 636b 2077 6865 7468 6572 2074 6869  heck whether thi
+000333a0: 7320 636f 6c75 6d6e 2068 6173 2061 2075  s column has a u
+000333b0: 7365 722d 7370 6563 6966 6965 6420 6669  ser-specified fi
+000333c0: 6c6c 2076 616c 7565 2070 726f 7669 6465  ll value provide
+000333d0: 643b 2069 6620 736f 2c20 7061 7373 2069  d; if so, pass i
+000333e0: 7420 616c 6f6e 6720 746f 0d0a 2020 2020  t along to..    
+000333f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00033400: 7468 6520 4661 7374 4172 7261 792e 6672  the FastArray.fr
+00033410: 6f6d 5f61 7272 6f77 2829 206d 6574 686f  om_arrow() metho
+00033420: 6420 6361 6c6c 2062 656c 6f77 2e0d 0a20  d call below... 
+00033430: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00033440: 6e20 4661 7374 4172 7261 792e 5f66 726f  n FastArray._fro
+00033450: 6d5f 6172 726f 7728 6172 722c 207a 6572  m_arrow(arr, zer
+00033460: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
+00033470: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
+00033480: 6162 6c65 3d77 7269 7461 626c 652c 2061  able=writable, a
+00033490: 7574 6f5f 7769 6465 6e3d 6175 746f 5f77  uto_widen=auto_w
+000334a0: 6964 656e 290d 0a0d 0a20 2020 2020 2020  iden)....       
+000334b0: 2065 6c69 6620 7061 742e 6973 5f64 6963   elif pat.is_dic
+000334c0: 7469 6f6e 6172 7928 7061 5f61 7272 5f74  tionary(pa_arr_t
+000334d0: 7970 6529 206f 7220 7061 742e 6973 5f73  ype) or pat.is_s
+000334e0: 7472 7563 7428 7061 5f61 7272 5f74 7970  truct(pa_arr_typ
+000334f0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00033500: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+00033510: 7374 6572 2e43 6174 6567 6f72 6963 616c  ster.Categorical
+00033520: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
+00033530: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
+00033540: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
+00033550: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
+00033560: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
+00033570: 6c69 6620 7061 742e 6973 5f74 696d 6573  lif pat.is_times
+00033580: 7461 6d70 2870 615f 6172 725f 7479 7065  tamp(pa_arr_type
+00033590: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000335a0: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
+000335b0: 7465 722e 4461 7465 5469 6d65 4e61 6e6f  ter.DateTimeNano
+000335c0: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
+000335d0: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
+000335e0: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
+000335f0: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
+00033600: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
+00033610: 6c69 6620 7061 742e 6973 5f64 6174 6528  lif pat.is_date(
+00033620: 7061 5f61 7272 5f74 7970 6529 3a0d 0a20  pa_arr_type):.. 
+00033630: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00033640: 6e20 5479 7065 5265 6769 7374 6572 2e44  n TypeRegister.D
+00033650: 6174 652e 5f66 726f 6d5f 6172 726f 7728  ate._from_arrow(
+00033660: 6172 722c 207a 6572 6f5f 636f 7079 5f6f  arr, zero_copy_o
+00033670: 6e6c 793d 7a65 726f 5f63 6f70 795f 6f6e  nly=zero_copy_on
+00033680: 6c79 2c20 7772 6974 6162 6c65 3d77 7269  ly, writable=wri
+00033690: 7461 626c 6529 0d0a 0d0a 2020 2020 2020  table)....      
+000336a0: 2020 656c 6966 2070 6174 2e69 735f 6475    elif pat.is_du
+000336b0: 7261 7469 6f6e 2870 615f 6172 725f 7479  ration(pa_arr_ty
+000336c0: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
+000336d0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+000336e0: 6973 7465 722e 5469 6d65 5370 616e 2e5f  ister.TimeSpan._
+000336f0: 6672 6f6d 5f61 7272 6f77 2861 7272 2c20  from_arrow(arr, 
+00033700: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
+00033710: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
+00033720: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
+00033730: 290d 0a0d 0a20 2020 2020 2020 2065 6c73  )....        els
+00033740: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00033750: 2320 556e 6b6e 6f77 6e2f 756e 7375 7070  # Unknown/unsupp
+00033760: 6f72 7465 6420 6172 7261 7920 7479 7065  orted array type
+00033770: 202d 2d20 6361 6e27 7420 636f 6e76 6572   -- can't conver
+00033780: 742e 0d0a 2020 2020 2020 2020 2020 2020  t...            
+00033790: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
+000337a0: 6e74 6564 4572 726f 7228 6622 7079 6172  ntedError(f"pyar
+000337b0: 726f 7720 6172 7261 7973 206f 6620 7479  row arrays of ty
+000337c0: 7065 2027 7b70 615f 6172 725f 7479 7065  pe '{pa_arr_type
+000337d0: 7d27 2063 616e 2774 2062 6520 636f 6e76  }' can't be conv
+000337e0: 6572 7465 6420 746f 2072 6970 7461 626c  erted to riptabl
+000337f0: 6520 6172 7261 7973 2e22 290d 0a0d 0a20  e arrays.").... 
+00033800: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00033810: 0d0a 2020 2020 6465 6620 5f66 726f 6d5f  ..    def _from_
+00033820: 6172 726f 7728 0d0a 2020 2020 2020 2020  arrow(..        
+00033830: 6172 723a 2055 6e69 6f6e 5b22 7061 2e41  arr: Union["pa.A
+00033840: 7272 6179 222c 2022 7061 2e43 6875 6e6b  rray", "pa.Chunk
+00033850: 6564 4172 7261 7922 5d2c 0d0a 2020 2020  edArray"],..    
+00033860: 2020 2020 7a65 726f 5f63 6f70 795f 6f6e      zero_copy_on
+00033870: 6c79 3a20 626f 6f6c 203d 2054 7275 652c  ly: bool = True,
+00033880: 0d0a 2020 2020 2020 2020 7772 6974 6162  ..        writab
+00033890: 6c65 3a20 626f 6f6c 203d 2046 616c 7365  le: bool = False
+000338a0: 2c0d 0a20 2020 2020 2020 2061 7574 6f5f  ,..        auto_
+000338b0: 7769 6465 6e3a 2062 6f6f 6c20 3d20 4661  widen: bool = Fa
+000338c0: 6c73 652c 0d0a 2020 2020 2920 2d3e 2022  lse,..    ) -> "
+000338d0: 4661 7374 4172 7261 7922 3a0d 0a20 2020  FastArray":..   
+000338e0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000338f0: 2020 436f 6e76 6572 7420 6120 7079 6172    Convert a pyar
+00033900: 726f 7720 6041 7272 6179 6020 746f 2061  row `Array` to a
+00033910: 2072 6970 7461 626c 6520 6046 6173 7441   riptable `FastA
+00033920: 7272 6179 602e 0d0a 0d0a 2020 2020 2020  rray`.....      
+00033930: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00033940: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00033950: 0d0a 2020 2020 2020 2020 6172 7220 3a20  ..        arr : 
+00033960: 7079 6172 726f 772e 4172 7261 7920 6f72  pyarrow.Array or
+00033970: 2070 7961 7272 6f77 2e43 6875 6e6b 6564   pyarrow.Chunked
+00033980: 4172 7261 790d 0a20 2020 2020 2020 207a  Array..        z
+00033990: 6572 6f5f 636f 7079 5f6f 6e6c 7920 3a20  ero_copy_only : 
+000339a0: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
+000339b0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+000339c0: 4966 2054 7275 652c 2061 6e20 6578 6365  If True, an exce
+000339d0: 7074 696f 6e20 7769 6c6c 2062 6520 7261  ption will be ra
+000339e0: 6973 6564 2069 6620 7468 6520 636f 6e76  ised if the conv
+000339f0: 6572 7369 6f6e 2074 6f20 6120 6046 6173  ersion to a `Fas
+00033a00: 7441 7272 6179 6020 776f 756c 6420 7265  tArray` would re
+00033a10: 7175 6972 6520 636f 7079 696e 6720 7468  quire copying th
+00033a20: 650d 0a20 2020 2020 2020 2020 2020 2075  e..            u
+00033a30: 6e64 6572 6c79 696e 6720 6461 7461 2028  nderlying data (
+00033a40: 652e 672e 2069 6e20 7072 6573 656e 6365  e.g. in presence
+00033a50: 206f 6620 6e75 6c6c 732c 206f 7220 666f   of nulls, or fo
+00033a60: 7220 6e6f 6e2d 7072 696d 6974 6976 6520  r non-primitive 
+00033a70: 7479 7065 7329 2e0d 0a20 2020 2020 2020  types)...       
+00033a80: 2077 7269 7461 626c 6520 3a20 626f 6f6c   writable : bool
+00033a90: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
+00033aa0: 0a20 2020 2020 2020 2020 2020 2046 6f72  .            For
+00033ab0: 2061 2060 4661 7374 4172 7261 7960 2063   a `FastArray` c
+00033ac0: 7265 6174 6564 2077 6974 6820 7a65 726f  reated with zero
+00033ad0: 2063 6f70 7920 2876 6965 7720 6f6e 2074   copy (view on t
+00033ae0: 6865 2041 7272 6f77 2064 6174 6129 2c20  he Arrow data), 
+00033af0: 7468 6520 7265 7375 6c74 696e 6720 6172  the resulting ar
+00033b00: 7261 7920 6973 206e 6f74 2077 7269 7461  ray is not writa
+00033b10: 626c 6520 2841 7272 6f77 2064 6174 6120  ble (Arrow data 
+00033b20: 6973 2069 6d6d 7574 6162 6c65 292e 0d0a  is immutable)...
+00033b30: 2020 2020 2020 2020 2020 2020 4279 2073              By s
+00033b40: 6574 7469 6e67 2074 6869 7320 746f 2054  etting this to T
+00033b50: 7275 652c 2061 2063 6f70 7920 6f66 2074  rue, a copy of t
+00033b60: 6865 2061 7272 6179 2069 7320 6d61 6465  he array is made
+00033b70: 2074 6f20 656e 7375 7265 2069 7420 6973   to ensure it is
+00033b80: 2077 7269 7461 626c 652e 0d0a 2020 2020   writable...    
+00033b90: 2020 2020 6175 746f 5f77 6964 656e 203a      auto_widen :
+00033ba0: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
+00033bb0: 2064 6566 6175 6c74 2074 6f20 4661 6c73   default to Fals
+00033bc0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
+00033bd0: 6865 6e20 4661 6c73 6520 2874 6865 2064  hen False (the d
+00033be0: 6566 6175 6c74 292c 2069 6620 616e 2061  efault), if an a
+00033bf0: 7272 6f77 2061 7272 6179 2063 6f6e 7461  rrow array conta
+00033c00: 696e 7320 6120 7661 6c75 6520 7768 6963  ins a value whic
+00033c10: 6820 776f 756c 6420 6265 2063 6f6e 7369  h would be consi
+00033c20: 6465 7265 640d 0a20 2020 2020 2020 2020  dered..         
+00033c30: 2020 2074 6865 2027 696e 7661 6c69 6427     the 'invalid'
+00033c40: 2f4e 4120 7661 6c75 6520 666f 7220 7468  /NA value for th
+00033c50: 6520 6571 7569 7661 6c65 6e74 2064 7479  e equivalent dty
+00033c60: 7065 2069 6e20 6120 6046 6173 7441 7272  pe in a `FastArr
+00033c70: 6179 602c 2072 6169 7365 2061 6e20 6578  ay`, raise an ex
+00033c80: 6365 7074 696f 6e0d 0a20 2020 2020 2020  ception..       
+00033c90: 2020 2020 2062 6563 6175 7365 2064 6972       because dir
+00033ca0: 6563 7420 636f 6e76 6572 7369 6f6e 2077  ect conversion w
+00033cb0: 6f75 6c64 2062 6520 6c6f 7373 7920 2f20  ould be lossy / 
+00033cc0: 6368 616e 6765 2074 6865 2073 656d 616e  change the seman
+00033cd0: 7469 6320 6d65 616e 696e 6720 6f66 2074  tic meaning of t
+00033ce0: 6865 2064 6174 612e 0d0a 2020 2020 2020  he data...      
+00033cf0: 2020 2020 2020 5768 656e 2054 7275 652c        When True,
+00033d00: 2074 6865 2063 6f6e 7665 7274 6564 2061   the converted a
+00033d10: 7272 6179 2077 696c 6c20 6265 2077 6964  rray will be wid
+00033d20: 656e 6564 2028 6966 2070 6f73 7369 626c  ened (if possibl
+00033d30: 6529 2074 6f20 7468 6520 6e65 7874 2d6c  e) to the next-l
+00033d40: 6172 6765 7374 2064 7479 7065 0d0a 2020  argest dtype..  
+00033d50: 2020 2020 2020 2020 2020 746f 2065 6e73            to ens
+00033d60: 7572 6520 7468 6520 6461 7461 2077 696c  ure the data wil
+00033d70: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
+00033d80: 2069 6e20 7468 6520 7361 6d65 2077 6179   in the same way
+00033d90: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+00033da0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00033db0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+00033dc0: 6173 7441 7272 6179 0d0a 2020 2020 2020  astArray..      
+00033dd0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+00033de0: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
+00033df0: 2070 610d 0a20 2020 2020 2020 2069 6d70   pa..        imp
+00033e00: 6f72 7420 7079 6172 726f 772e 636f 6d70  ort pyarrow.comp
+00033e10: 7574 6520 6173 2070 630d 0a20 2020 2020  ute as pc..     
+00033e20: 2020 2069 6d70 6f72 7420 7079 6172 726f     import pyarro
+00033e30: 772e 7479 7065 7320 6173 2070 6174 0d0a  w.types as pat..
+00033e40: 0d0a 2020 2020 2020 2020 2320 4d61 6b65  ..        # Make
+00033e50: 2073 7572 6520 7468 6520 696e 7075 7420   sure the input 
+00033e60: 6172 7261 7920 6973 206f 6e65 206f 6620  array is one of 
+00033e70: 7468 6520 7079 6172 726f 7720 6172 7261  the pyarrow arra
+00033e80: 7920 7479 7065 732e 0d0a 2020 2020 2020  y types...      
+00033e90: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00033ea0: 6e63 6528 6172 722c 2028 7061 2e41 7272  nce(arr, (pa.Arr
+00033eb0: 6179 2c20 7061 2e43 6875 6e6b 6564 4172  ay, pa.ChunkedAr
+00033ec0: 7261 7929 293a 0d0a 2020 2020 2020 2020  ray)):..        
+00033ed0: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+00033ee0: 726f 7228 2254 6865 2061 7272 6179 2069  ror("The array i
+00033ef0: 7320 6e6f 7420 616e 2069 6e73 7461 6e63  s not an instanc
+00033f00: 6520 6f66 2060 7079 6172 726f 772e 4172  e of `pyarrow.Ar
+00033f10: 7261 7960 206f 7220 6070 7961 7272 6f77  ray` or `pyarrow
+00033f20: 2e43 6875 6e6b 6564 4172 7261 7960 2e22  .ChunkedArray`."
+00033f30: 290d 0a0d 0a20 2020 2020 2020 2023 2043  )....        # C
+00033f40: 6875 6e6b 6564 4172 7261 7973 206e 6565  hunkedArrays nee
+00033f50: 6420 7370 6563 6961 6c20 6861 6e64 6c69  d special handli
+00033f60: 6e67 2e0d 0a20 2020 2020 2020 2069 6620  ng...        if 
+00033f70: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
+00033f80: 7061 2e43 6875 6e6b 6564 4172 7261 7929  pa.ChunkedArray)
+00033f90: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00033fa0: 2041 2073 696e 676c 652d 6368 756e 6b20   A single-chunk 
+00033fb0: 4368 756e 6b65 6441 7272 6179 2063 616e  ChunkedArray can
+00033fc0: 2062 6520 6861 6e64 6c65 6420 6279 206a   be handled by j
+00033fd0: 7573 7420 6578 7472 6163 7469 6e67 2074  ust extracting t
+00033fe0: 6861 7420 6368 756e 6b0d 0a20 2020 2020  hat chunk..     
+00033ff0: 2020 2020 2020 2023 2061 6e64 2072 6563         # and rec
+00034000: 7572 7369 7665 6c79 2070 726f 6365 7373  ursively process
+00034010: 696e 6720 6974 2e0d 0a20 2020 2020 2020  ing it...       
+00034020: 2020 2020 2069 6620 6172 722e 6e75 6d5f       if arr.num_
+00034030: 6368 756e 6b73 203d 3d20 313a 0d0a 2020  chunks == 1:..  
+00034040: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00034050: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
+00034060: 6672 6f6d 5f61 7272 6f77 280d 0a20 2020  from_arrow(..   
+00034070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034080: 2061 7272 2e63 6875 6e6b 2830 292c 207a   arr.chunk(0), z
+00034090: 6572 6f5f 636f 7079 5f6f 6e6c 793d 7a65  ero_copy_only=ze
+000340a0: 726f 5f63 6f70 795f 6f6e 6c79 2c20 7772  ro_copy_only, wr
+000340b0: 6974 6162 6c65 3d77 7269 7461 626c 652c  itable=writable,
+000340c0: 2061 7574 6f5f 7769 6465 6e3d 6175 746f   auto_widen=auto
+000340d0: 5f77 6964 656e 0d0a 2020 2020 2020 2020  _widen..        
+000340e0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+000340f0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00034100: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00034110: 544f 444f 3a20 4265 6e63 686d 6172 6b20  TODO: Benchmark 
+00034120: 7468 6973 2076 732e 2075 7369 6e67 2043  this vs. using C
+00034130: 6875 6e6b 6564 4172 7261 792e 636f 6d62  hunkedArray.comb
+00034140: 696e 655f 6368 756e 6b73 2829 2074 6865  ine_chunks() the
+00034150: 6e20 636f 6e76 6572 7469 6e67 2e0d 0a20  n converting... 
+00034160: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00034170: 2054 4f44 4f3a 204c 6f6f 6b20 6174 2060   TODO: Look at `
+00034180: 7a65 726f 5f63 6f70 795f 6f6e 6c79 6020  zero_copy_only` 
+00034190: 616e 6420 6077 7269 7461 626c 6560 202d  and `writable` -
+000341a0: 2d20 7468 6520 636f 6e76 6572 7465 6420  - the converted 
+000341b0: 6172 7261 7973 2063 6f75 6c64 2062 6520  arrays could be 
+000341c0: 6465 7374 726f 7965 6420 7768 696c 6520  destroyed while 
+000341d0: 6873 7461 636b 696e 670d 0a20 2020 2020  hstacking..     
+000341e0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000341f0: 2020 2073 696e 6365 2077 6520 6b6e 6f77     since we know
+00034200: 2074 6865 7927 6c6c 2068 6176 6520 6a75   they'll have ju
+00034210: 7374 2062 6565 6e20 6372 6561 7465 643b  st been created;
+00034220: 2074 6869 7320 636f 756c 6420 7265 6475   this could redu
+00034230: 6365 2070 6561 6b20 6d65 6d6f 7279 2075  ce peak memory u
+00034240: 7469 6c69 7a61 7469 6f6e 2e0d 0a20 2020  tilization...   
+00034250: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00034260: 7572 6e20 6873 7461 636b 280d 0a20 2020  urn hstack(..   
+00034270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034280: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
+00034290: 2020 2020 2020 2020 2020 2020 4661 7374              Fast
+000342a0: 4172 7261 792e 5f66 726f 6d5f 6172 726f  Array._from_arro
+000342b0: 7728 0d0a 2020 2020 2020 2020 2020 2020  w(..            
+000342c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000342d0: 6172 725f 6368 756e 6b2c 207a 6572 6f5f  arr_chunk, zero_
+000342e0: 636f 7079 5f6f 6e6c 793d 7a65 726f 5f63  copy_only=zero_c
+000342f0: 6f70 795f 6f6e 6c79 2c20 7772 6974 6162  opy_only, writab
+00034300: 6c65 3d77 7269 7461 626c 652c 2061 7574  le=writable, aut
+00034310: 6f5f 7769 6465 6e3d 6175 746f 5f77 6964  o_widen=auto_wid
+00034320: 656e 0d0a 2020 2020 2020 2020 2020 2020  en..            
+00034330: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00034340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034350: 2020 2020 2020 2066 6f72 2061 7272 5f63         for arr_c
+00034360: 6875 6e6b 2069 6e20 6172 722e 6974 6572  hunk in arr.iter
+00034370: 6368 756e 6b73 2829 0d0a 2020 2020 2020  chunks()..      
+00034380: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
+00034390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000343a0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
+000343b0: 4861 6e64 6c65 2062 6173 6564 206f 6e20  Handle based on 
+000343c0: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
+000343d0: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
+000343e0: 2020 2020 2020 6966 2070 6174 2e69 735f        if pat.is_
+000343f0: 696e 7465 6765 7228 6172 722e 7479 7065  integer(arr.type
+00034400: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00034410: 2320 466f 7220 6172 7261 7973 206f 6620  # For arrays of 
+00034420: 7072 696d 6974 6976 6520 7479 7065 732c  primitive types,
+00034430: 2070 612e 4461 7461 5479 7065 2e74 6f5f   pa.DataType.to_
+00034440: 7061 6e64 6173 5f64 7479 7065 2829 2061  pandas_dtype() a
+00034450: 6374 7561 6c6c 7920 7265 7475 726e 7320  ctually returns 
+00034460: 7468 6520 6571 7569 7661 6c65 6e74 206e  the equivalent n
+00034470: 756d 7079 2064 7479 7065 2e0d 0a20 2020  umpy dtype...   
+00034480: 2020 2020 2020 2020 2061 7272 5f64 7479           arr_dty
+00034490: 7065 203d 2061 7272 2e74 7970 652e 746f  pe = arr.type.to
+000344a0: 5f70 616e 6461 735f 6474 7970 6528 290d  _pandas_dtype().
+000344b0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+000344c0: 2047 6574 2074 6865 2072 6970 7461 626c   Get the riptabl
+000344d0: 6520 696e 7661 6c69 6420 7661 6c75 6520  e invalid value 
+000344e0: 666f 7220 7468 6973 2061 7272 6179 2074  for this array t
+000344f0: 7970 652e 0d0a 2020 2020 2020 2020 2020  ype...          
+00034500: 2020 6172 725f 7274 5f69 6e76 203d 2049    arr_rt_inv = I
+00034510: 4e56 414c 4944 5f44 4943 545b 6e70 2e64  NVALID_DICT[np.d
+00034520: 7479 7065 2861 7272 5f64 7479 7065 292e  type(arr_dtype).
+00034530: 6e75 6d5d 0d0a 0d0a 2020 2020 2020 2020  num]....        
+00034540: 2020 2020 2320 4765 7420 6d69 6e20 616e      # Get min an
+00034550: 6420 6d61 7820 7661 6c75 6520 6f66 2074  d max value of t
+00034560: 6865 2069 6e70 7574 2061 7272 6179 2c20  he input array, 
+00034570: 736f 2077 6520 6b6e 6f77 2069 6620 7765  so we know if we
+00034580: 206e 6565 6420 746f 2070 726f 6d6f 7465   need to promote
+00034590: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000345a0: 746f 2074 6865 206e 6578 742d 6c61 7267  to the next-larg
+000345b0: 6573 7420 6474 7970 6520 746f 2062 6520  est dtype to be 
+000345c0: 6162 6c65 2074 6f20 636f 7272 6563 746c  able to correctl
+000345d0: 7920 7265 7072 6573 656e 7420 6e75 6c6c  y represent null
+000345e0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
+000345f0: 2320 5468 6973 206d 7573 7420 6265 2064  # This must be d
+00034600: 6f6e 6520 6576 656e 2069 6620 7468 6520  one even if the 
+00034610: 696e 7075 7420 6172 7261 7920 6861 7320  input array has 
+00034620: 6e6f 206e 756c 6c73 2c20 6265 6361 7573  no nulls, becaus
+00034630: 6520 6f74 6865 7277 6973 6520 7468 6520  e otherwise the 
+00034640: 6e6f 6e2d 6e75 6c6c 0d0a 2020 2020 2020  non-null..      
+00034650: 2020 2020 2020 2320 7661 6c75 6573 2069        # values i
+00034660: 6e20 7468 6520 696e 7075 7420 636f 7272  n the input corr
+00034670: 6573 706f 6e64 696e 6720 746f 2072 6970  esponding to rip
+00034680: 7461 626c 6520 696e 7465 6765 7220 696e  table integer in
+00034690: 7661 6c69 6473 2077 6f75 6c64 2074 6865  valids would the
+000346a0: 6e20 6265 2072 6563 6f67 6e69 7a65 640d  n be recognized.
+000346b0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+000346c0: 7320 7375 6368 2061 6674 6572 2063 6f6e  s such after con
+000346d0: 7665 7273 696f 6e2e 0d0a 2020 2020 2020  version...      
+000346e0: 2020 2020 2020 6d69 6e5f 6d61 785f 7265        min_max_re
+000346f0: 7375 6c74 3a20 7061 2e53 7472 7563 7453  sult: pa.StructS
+00034700: 6361 6c61 7220 3d20 7063 2e6d 696e 5f6d  calar = pc.min_m
+00034710: 6178 2861 7272 290d 0a20 2020 2020 2020  ax(arr)..       
+00034720: 2020 2020 206d 696e 5f76 616c 7565 203d       min_value =
+00034730: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
+00034740: 226d 696e 225d 0d0a 2020 2020 2020 2020  "min"]..        
+00034750: 2020 2020 6d61 785f 7661 6c75 6520 3d20      max_value = 
+00034760: 6d69 6e5f 6d61 785f 7265 7375 6c74 5b22  min_max_result["
+00034770: 6d61 7822 5d0d 0a0d 0a20 2020 2020 2020  max"]....       
+00034780: 2020 2020 2061 7272 5f70 615f 6474 7970       arr_pa_dtyp
+00034790: 655f 7769 6465 6e65 643a 204f 7074 696f  e_widened: Optio
+000347a0: 6e61 6c5b 7061 2e44 6174 6154 7970 655d  nal[pa.DataType]
+000347b0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+000347c0: 2020 2020 2069 6620 6d69 6e5f 7661 6c75       if min_valu
+000347d0: 6520 3d3d 2061 7272 5f72 745f 696e 7620  e == arr_rt_inv 
+000347e0: 6f72 206d 6178 5f76 616c 7565 203d 3d20  or max_value == 
+000347f0: 6172 725f 7274 5f69 6e76 3a0d 0a20 2020  arr_rt_inv:..   
+00034800: 2020 2020 2020 2020 2020 2020 2023 2049               # I
+00034810: 6620 7468 6520 696e 7075 7420 6172 7261  f the input arra
+00034820: 7920 686f 6c64 7320 3634 2d62 6974 2069  y holds 64-bit i
+00034830: 6e74 6567 6572 7320 2873 6967 6e65 6420  ntegers (signed 
+00034840: 6f72 2075 6e73 6967 6e65 6429 2c20 7765  or unsigned), we
+00034850: 2063 616e 2774 2064 6f20 6120 6c6f 7373   can't do a loss
+00034860: 6c65 7373 2063 6f6e 7665 7273 696f 6e2c  less conversion,
+00034870: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00034880: 2020 2320 7369 6e63 6520 7468 6572 6520    # since there 
+00034890: 6973 206e 6f20 7769 6465 7220 696e 7465  is no wider inte
+000348a0: 6765 7220 6176 6169 6c61 626c 652e 0d0a  ger available...
+000348b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000348c0: 6966 207a 6572 6f5f 636f 7079 5f6f 6e6c  if zero_copy_onl
+000348d0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+000348e0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+000348f0: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
+00034900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034910: 2020 2022 4361 6e6e 6f74 2070 6572 666f     "Cannot perfo
+00034920: 726d 2061 207a 6572 6f2d 636f 7079 2063  rm a zero-copy c
+00034930: 6f6e 7665 7273 696f 6e20 6f66 2061 6e20  onversion of an 
+00034940: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
+00034950: 6169 6e69 6e67 2074 6865 2072 6970 7461  aining the ripta
+00034960: 626c 6520 696e 7661 6c69 6420 7661 6c75  ble invalid valu
+00034970: 6520 666f 7220 7468 6520 6172 7261 7920  e for the array 
+00034980: 6474 7970 652e 220d 0a20 2020 2020 2020  dtype."..       
+00034990: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+000349a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000349b0: 656c 6966 2061 7272 5f64 7479 7065 2e69  elif arr_dtype.i
+000349c0: 7465 6d73 697a 6520 3d3d 2038 3a0d 0a20  temsize == 8:.. 
+000349d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000349e0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+000349f0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+00034a00: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+00034a10: 616e 6e6f 7420 6c6f 7373 6c65 7373 6c79  annot losslessly
+00034a20: 2063 6f6e 7665 7274 2061 6e20 6172 726f   convert an arro
+00034a30: 7720 6172 7261 7920 6f66 2028 7529 696e  w array of (u)in
+00034a40: 7436 3420 636f 6e74 6169 6e69 6e67 2074  t64 containing t
+00034a50: 6865 2072 6970 7461 626c 6520 696e 7661  he riptable inva
+00034a60: 6c69 6420 7661 6c75 6520 746f 2061 2072  lid value to a r
+00034a70: 6970 7461 626c 6520 6172 7261 792e 220d  iptable array.".
+00034a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034a90: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00034aa0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+00034ab0: 2061 7574 6f5f 7769 6465 6e3a 0d0a 2020   auto_widen:..  
+00034ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034ad0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00034ae0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00034af0: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+00034b00: 7075 7420 6172 7261 7920 7265 7175 6972  put array requir
+00034b10: 6573 2077 6964 656e 696e 6720 666f 7220  es widening for 
+00034b20: 6c6f 7373 6c65 7373 2063 6f6e 7665 7273  lossless convers
+00034b30: 696f 6e2e 2053 7065 6369 6679 2061 7574  ion. Specify aut
+00034b40: 6f5f 7769 6465 6e3d 5472 7565 2069 6620  o_widen=True if 
+00034b50: 796f 7520 7761 6e74 2074 6f20 616c 6c6f  you want to allo
+00034b60: 7720 7468 6520 7769 6465 6e69 6e67 2063  w the widening c
+00034b70: 6f6e 7665 7273 696f 6e20 2877 6869 6368  onversion (which
+00034b80: 2072 6571 7569 7265 7320 616e 2061 7272   requires an arr
+00034b90: 6179 2063 6f70 7929 2e22 0d0a 2020 2020  ay copy)."..    
+00034ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034bb0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00034bc0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00034bd0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00034be0: 5769 6465 6e20 7468 6520 6474 7970 6520  Widen the dtype 
+00034bf0: 6f66 2074 6865 206f 7574 7075 7420 6172  of the output ar
+00034c00: 7261 792e 0d0a 2020 2020 2020 2020 2020  ray...          
+00034c10: 2020 2020 2020 2020 2020 6f75 7470 7574            output
+00034c20: 5f64 7479 7065 203d 206e 702e 6d69 6e5f  _dtype = np.min_
+00034c30: 7363 616c 6172 5f74 7970 6528 3220 2a20  scalar_type(2 * 
+00034c40: 6172 725f 7274 5f69 6e76 290d 0a20 2020  arr_rt_inv)..   
+00034c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034c60: 2061 7272 5f70 615f 6474 7970 655f 7769   arr_pa_dtype_wi
+00034c70: 6465 6e65 6420 3d20 7061 2e66 726f 6d5f  dened = pa.from_
+00034c80: 6e75 6d70 795f 6474 7970 6528 6f75 7470  numpy_dtype(outp
+00034c90: 7574 5f64 7479 7065 290d 0a0d 0a20 2020  ut_dtype)....   
+00034ca0: 2020 2020 2020 2020 2023 2043 7265 6174           # Creat
+00034cb0: 6520 7468 6520 6f75 7470 7574 2061 7272  e the output arr
+00034cc0: 6179 2c20 7065 7266 6f72 6d69 6e67 2061  ay, performing a
+00034cd0: 2077 6964 656e 696e 6720 636f 6e76 6572   widening conver
+00034ce0: 7369 6f6e 202b 2066 696c 6c69 6e67 2069  sion + filling i
+00034cf0: 6e20 6e75 6c6c 7320 7769 7468 2074 6865  n nulls with the
+00034d00: 2072 6970 7461 626c 6520 696e 7661 6c69   riptable invali
+00034d10: 6420 6966 206e 6563 6573 7361 7279 2e0d  d if necessary..
+00034d20: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00034d30: 4f44 4f3a 2054 6869 7320 636f 756c 6420  ODO: This could 
+00034d40: 6265 2066 6173 7465 7220 2d2d 2069 6620  be faster -- if 
+00034d50: 7468 6572 6527 7320 6120 7761 7920 746f  there's a way to
+00034d60: 2067 6574 2061 206e 756d 7079 2062 6f6f   get a numpy boo
+00034d70: 6c65 616e 2061 7272 6179 2066 726f 6d20  lean array from 
+00034d80: 6120 7079 6172 726f 7720 6172 7261 7927  a pyarrow array'
+00034d90: 7320 6e75 6c6c 2d6d 6173 6b2c 0d0a 2020  s null-mask,..  
+00034da0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00034db0: 2020 7765 2063 616e 2063 6f6e 7665 7274    we can convert
+00034dc0: 2064 6972 6563 746c 7920 746f 206e 756d   directly to num
+00034dd0: 7079 2f72 6970 7461 626c 653b 2074 6865  py/riptable; the
+00034de0: 6e2c 2077 6964 656e 2074 6865 2046 6173  n, widen the Fas
+00034df0: 7441 7272 6179 2028 7768 6963 6827 6c6c  tArray (which'll
+00034e00: 2062 6520 7061 7261 6c6c 656c 697a 6564   be parallelized
+00034e10: 293b 0d0a 2020 2020 2020 2020 2020 2020  );..            
+00034e20: 2320 2020 2020 2020 7468 656e 2075 7365  #       then use
+00034e30: 2072 742e 636f 7079 5f74 6f28 2920 2f20   rt.copy_to() / 
+00034e40: 7274 2e70 7574 6d61 736b 2829 2074 6f20  rt.putmask() to 
+00034e50: 6f76 6572 7772 6974 6520 7468 6520 656c  overwrite the el
+00034e60: 656d 656e 7473 206f 6620 7468 6520 7769  ements of the wi
+00034e70: 6465 6e65 6420 4661 7374 4172 7261 790d  dened FastArray.
+00034e80: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00034e90: 2020 2020 2063 6f72 7265 7370 6f6e 6469       correspondi
+00034ea0: 6e67 2074 6f20 7468 6520 6e75 6c6c 7320  ng to the nulls 
+00034eb0: 6672 6f6d 2074 6865 206d 6173 6b20 7769  from the mask wi
+00034ec0: 7468 2074 6865 2072 6970 7461 626c 6520  th the riptable 
+00034ed0: 696e 7661 6c69 6420 7661 6c75 6520 666f  invalid value fo
+00034ee0: 7220 7468 6520 6f75 7470 7574 2061 7272  r the output arr
+00034ef0: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
+00034f00: 2020 2020 2020 6966 2061 7272 5f70 615f        if arr_pa_
+00034f10: 6474 7970 655f 7769 6465 6e65 6420 6973  dtype_widened is
+00034f20: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00034f30: 2020 2020 2020 2020 2020 2020 6172 723a              arr:
+00034f40: 2070 612e 4172 7261 7920 3d20 6172 722e   pa.Array = arr.
+00034f50: 6361 7374 2861 7272 5f70 615f 6474 7970  cast(arr_pa_dtyp
+00034f60: 655f 7769 6465 6e65 6429 0d0a 0d0a 2020  e_widened)....  
+00034f70: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00034f80: 2061 7272 2e66 696c 6c5f 6e75 6c6c 2861   arr.fill_null(a
+00034f90: 7272 5f72 745f 696e 7629 2e74 6f5f 6e75  rr_rt_inv).to_nu
+00034fa0: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
+00034fb0: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
+00034fc0: 6c65 3d77 7269 7461 626c 6529 2e76 6965  le=writable).vie
+00034fd0: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
+00034fe0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
+00034ff0: 2e69 735f 666c 6f61 7469 6e67 2861 7272  .is_floating(arr
+00035000: 2e74 7970 6529 3a0d 0a20 2020 2020 2020  .type):..       
+00035010: 2020 2020 2023 2046 6c6f 6174 696e 672d       # Floating-
+00035020: 706f 696e 7420 6172 7261 7973 2063 616e  point arrays can
+00035030: 2062 6520 636f 6e76 6572 7465 6420 6469   be converted di
+00035040: 7265 6374 6c79 2074 6f20 6e75 6d70 792c  rectly to numpy,
+00035050: 2073 696e 6365 2070 7961 7272 6f77 2077   since pyarrow w
+00035060: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00035070: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
+00035080: 2066 696c 6c20 6e75 6c6c 2076 616c 7565   fill null value
+00035090: 7320 7769 7468 204e 614e 2e0d 0a20 2020  s with NaN...   
+000350a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000350b0: 6172 722e 746f 5f6e 756d 7079 287a 6572  arr.to_numpy(zer
+000350c0: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
+000350d0: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
+000350e0: 6162 6c65 3d77 7269 7461 626c 6529 2e76  able=writable).v
+000350f0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
+00035100: 0d0a 2020 2020 2020 2020 656c 6966 2070  ..        elif p
+00035110: 6174 2e69 735f 626f 6f6c 6561 6e28 6172  at.is_boolean(ar
+00035120: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
+00035130: 2020 2020 2020 2320 426f 6f6c 6561 6e20        # Boolean 
+00035140: 6172 7261 7973 2063 616e 206f 6e6c 7920  arrays can only 
+00035150: 6265 2063 6f6e 7665 7274 6564 2077 6865  be converted whe
+00035160: 6e20 7468 6579 2064 6f20 6e6f 7420 636f  n they do not co
+00035170: 6e74 6169 6e20 6e75 6c6c 732e 0d0a 2020  ntain nulls...  
+00035180: 2020 2020 2020 2020 2020 2320 7269 7074            # ript
+00035190: 6162 6c65 2064 6f65 7320 6e6f 7420 7375  able does not su
+000351a0: 7070 6f72 7420 616e 2027 696e 7661 6c69  pport an 'invali
+000351b0: 6427 2f4e 4120 7661 6c75 6520 666f 7220  d'/NA value for 
+000351c0: 626f 6f6c 6561 6e2c 2073 6f20 7079 6172  boolean, so pyar
+000351d0: 726f 7720 6172 7261 7973 0d0a 2020 2020  row arrays..    
+000351e0: 2020 2020 2020 2020 2320 7769 7468 206e          # with n
+000351f0: 756c 6c73 2063 616e 2774 2062 6520 7265  ulls can't be re
+00035200: 7072 6573 656e 7465 6420 696e 2072 6970  presented in rip
+00035210: 7461 626c 652e 0d0a 2020 2020 2020 2020  table...        
+00035220: 2020 2020 6966 2061 7272 2e6e 756c 6c5f      if arr.null_
+00035230: 636f 756e 7420 3d3d 2030 3a0d 0a20 2020  count == 0:..   
+00035240: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00035250: 7572 6e20 6172 722e 746f 5f6e 756d 7079  urn arr.to_numpy
+00035260: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
+00035270: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
+00035280: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
+00035290: 6529 2e76 6965 7728 4661 7374 4172 7261  e).view(FastArra
+000352a0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
+000352b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000352c0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+000352d0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+000352e0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+000352f0: 6970 7461 626c 6520 626f 6f6c 6561 6e20  iptable boolean 
+00035300: 6172 7261 7973 2064 6f20 6e6f 7420 7375  arrays do not su
+00035310: 7070 6f72 7420 616e 2069 6e76 616c 6964  pport an invalid
+00035320: 2076 616c 7565 2c20 736f 2074 6865 7920   value, so they 
+00035330: 6361 6e6e 6f74 2062 6520 6372 6561 7465  cannot be create
+00035340: 6420 6672 6f6d 2070 7961 7272 6f77 2061  d from pyarrow a
+00035350: 7272 6179 7320 636f 6e74 6169 6e69 6e67  rrays containing
+00035360: 206e 756c 6c73 2e22 0d0a 2020 2020 2020   nulls."..      
+00035370: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00035380: 2020 2020 2020 2065 6c69 6620 7061 742e         elif pat.
+00035390: 6973 5f73 7472 696e 6728 6172 722e 7479  is_string(arr.ty
+000353a0: 7065 2920 6f72 2070 6174 2e69 735f 6c61  pe) or pat.is_la
+000353b0: 7267 655f 7374 7269 6e67 2861 7272 2e74  rge_string(arr.t
+000353c0: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
+000353d0: 2020 2023 2070 7961 7272 6f77 2076 6172     # pyarrow var
+000353e0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
+000353f0: 696e 6720 6172 7261 7973 2063 616e 205f  ing arrays can _
+00035400: 6e65 7665 725f 2062 6520 7a65 726f 2d63  never_ be zero-c
+00035410: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
+00035420: 2066 6978 6564 2d6c 656e 6774 6820 6e75   fixed-length nu
+00035430: 6d70 792f 7269 7074 6162 6c65 2061 7272  mpy/riptable arr
+00035440: 6179 730d 0a20 2020 2020 2020 2020 2020  ays..           
+00035450: 2023 2062 6563 6175 7365 206f 6620 6469   # because of di
+00035460: 6666 6572 656e 6365 7320 696e 2074 6865  fferences in the
+00035470: 206d 656d 6f72 7920 6c61 796f 7574 2e0d   memory layout..
+00035480: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00035490: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
+000354a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000354b0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+000354c0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+000354d0: 2020 2020 2020 2020 2270 7961 7272 6f77          "pyarrow
+000354e0: 2076 6172 6961 626c 652d 6c65 6e67 7468   variable-length
+000354f0: 2073 7472 696e 6720 6172 7261 7973 2063   string arrays c
+00035500: 616e 6e6f 7420 6265 207a 6572 6f2d 636f  annot be zero-co
+00035510: 7079 2063 6f6e 7665 7274 6564 2074 6f20  py converted to 
+00035520: 7269 7074 6162 6c65 2061 7272 6179 732e  riptable arrays.
+00035530: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00035540: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00035550: 2020 2020 2320 4368 6563 6b20 666f 7220      # Check for 
+00035560: 7768 6574 6865 7220 7468 6520 6172 7261  whether the arra
+00035570: 7920 636f 6e74 6169 6e73 206f 6e6c 7920  y contains only 
+00035580: 4153 4349 4920 7374 7269 6e67 732e 0d0a  ASCII strings...
+00035590: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+000355a0: 6973 2069 7320 7573 6564 2074 6f20 6775  is is used to gu
+000355b0: 6964 6520 686f 7720 7468 6520 4661 7374  ide how the Fast
+000355c0: 4172 7261 7920 6973 2063 7265 6174 6564  Array is created
+000355d0: 2e0d 0a20 2020 2020 2020 2020 2020 2068  ...            h
+000355e0: 6173 5f75 6e69 636f 6465 203d 206e 6f74  as_unicode = not
+000355f0: 2070 632e 616c 6c28 7063 2e73 7472 696e   pc.all(pc.strin
+00035600: 675f 6973 5f61 7363 6969 2861 7272 2929  g_is_ascii(arr))
+00035610: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00035620: 2320 436f 6e76 6572 7420 7468 6520 6172  # Convert the ar
+00035630: 7261 7920 746f 2061 206e 756d 7079 2061  ray to a numpy a
+00035640: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
+00035650: 2020 2023 2055 6e66 6f72 7475 6e61 7465     # Unfortunate
+00035660: 6c79 2c20 6173 206f 6620 7079 6172 726f  ly, as of pyarro
+00035670: 7720 342e 302c 2074 6869 7320 636f 6e76  w 4.0, this conv
+00035680: 6572 7369 6f6e 2061 6c77 6179 7320 7072  ersion always pr
+00035690: 6f64 7563 6573 2061 206e 756d 7079 206f  oduces a numpy o
+000356a0: 626a 6563 7420 6172 7261 7920 636f 6e74  bject array cont
+000356b0: 6169 6e69 6e67 2074 6865 0d0a 2020 2020  aining the..    
+000356c0: 2020 2020 2020 2020 2320 7374 7269 6e67          # string
+000356d0: 7320 2861 7320 5079 7468 6f6e 2073 7472  s (as Python str
+000356e0: 696e 6773 2920 7261 7468 6572 2074 6861  ings) rather tha
+000356f0: 6e20 6120 6e75 6d70 7920 7374 7269 6e67  n a numpy string
+00035700: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
+00035710: 2020 2020 2023 2057 6527 7265 2061 626c       # We're abl
+00035720: 6520 746f 2068 616e 646c 6520 7468 6973  e to handle this
+00035730: 2074 6f20 7265 7475 726e 2074 6865 2073   to return the s
+00035740: 656e 7369 626c 6520 7468 696e 6720 666f  ensible thing fo
+00035750: 7220 7269 7074 6162 6c65 2075 7365 7273  r riptable users
+00035760: 2c20 6275 7420 6974 2064 6f65 7320 6d65  , but it does me
+00035770: 616e 2074 6869 7320 636f 6e76 6572 7369  an this conversi
+00035780: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+00035790: 2320 6973 2073 6c6f 7765 7220 7468 616e  # is slower than
+000357a0: 206e 6563 6573 7361 7279 2072 6967 6874   necessary right
+000357b0: 206e 6f77 2e0d 0a20 2020 2020 2020 2020   now...         
+000357c0: 2020 2023 2054 4f44 4f3a 2041 736b 2070     # TODO: Ask p
+000357d0: 7961 7272 6f77 2d64 6576 2061 626f 7574  yarrow-dev about
+000357e0: 2069 6d70 6c65 6d65 6e74 696e 6720 616e   implementing an
+000357f0: 206f 7074 696f 6e20 746f 2072 6574 7572   option to retur
+00035800: 6e20 6120 6e75 6d70 7920 2753 2720 6f72  n a numpy 'S' or
+00035810: 2027 5527 2061 7272 6179 2069 6e73 7465   'U' array inste
+00035820: 6164 2c20 6974 276c 6c20 6265 0d0a 2020  ad, it'll be..  
+00035830: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00035840: 2020 6d75 6368 206d 6f72 6520 6566 6669    much more effi
+00035850: 6369 656e 742c 2065 7665 6e20 7468 6f75  cient, even thou
+00035860: 6768 2073 6f6d 6520 7370 6163 6520 7769  gh some space wi
+00035870: 6c6c 2062 6520 7761 7374 6564 2064 7565  ll be wasted due
+00035880: 2074 6f20 6e75 6d70 7920 6e6f 7420 7375   to numpy not su
+00035890: 7070 6f72 7469 6e67 2076 6172 6961 626c  pporting variabl
+000358a0: 652d 6c65 6e67 7468 2073 7472 696e 6773  e-length strings
+000358b0: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+000358c0: 2054 4f44 4f3a 2043 6f6e 7369 6465 7220   TODO: Consider 
+000358d0: 636f 6e76 6572 7469 6e67 2074 6865 2070  converting the p
+000358e0: 7961 7272 6f77 2061 7272 6179 2074 6f20  yarrow array to 
+000358f0: 6120 6469 6374 696f 6e61 7279 2d65 6e63  a dictionary-enc
+00035900: 6f64 6564 2061 7272 6179 202d 2d20 6966  oded array -- if
+00035910: 2074 6865 7265 2061 7265 206f 6e6c 7920   there are only 
+00035920: 6120 6665 7720 756e 6971 7565 732c 0d0a  a few uniques,..
+00035930: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00035940: 2020 2020 6974 276c 6c20 6265 206d 6f72      it'll be mor
+00035950: 6520 6566 6669 6369 656e 7420 2865 7665  e efficient (eve
+00035960: 6e20 7468 6f75 6768 2064 6f69 6e67 206d  n though doing m
+00035970: 6f72 6520 776f 726b 2920 6279 2061 766f  ore work) by avo
+00035980: 6964 696e 6720 7265 7065 7469 7469 7665  iding repetitive
+00035990: 2063 7265 6174 696f 6e20 6f66 2074 6865   creation of the
+000359a0: 2050 7974 686f 6e20 7374 7269 6e67 206f   Python string o
+000359b0: 626a 6563 7473 2e0d 0a20 2020 2020 2020  bjects...       
+000359c0: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
+000359d0: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
+000359e0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+000359f0: 7020 3d20 6172 722e 746f 5f6e 756d 7079  p = arr.to_numpy
+00035a00: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
+00035a10: 4661 6c73 652c 2077 7269 7461 626c 653d  False, writable=
+00035a20: 7772 6974 6162 6c65 290d 0a0d 0a20 2020  writable)....   
+00035a30: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00035a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035a50: 2320 4e65 6564 2074 6f20 6669 6c6c 206e  # Need to fill n
+00035a60: 756c 6c73 2077 6974 6820 616e 2065 6d70  ulls with an emp
+00035a70: 7479 2073 7472 696e 6720 6265 666f 7265  ty string before
+00035a80: 2063 6f6e 7665 7274 696e 6720 746f 206e   converting to n
+00035a90: 756d 7079 2e0d 0a20 2020 2020 2020 2020  umpy...         
+00035aa0: 2020 2020 2020 2023 2028 494e 5641 4c49         # (INVALI
+00035ab0: 445f 4449 4354 5b6e 702e 6474 7970 6528  D_DICT[np.dtype(
+00035ac0: 2755 2729 2e6e 756d 5d20 3d3d 2027 2729  'U').num] == '')
+00035ad0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00035ae0: 2020 2074 6d70 203d 2061 7272 2e66 696c     tmp = arr.fil
+00035af0: 6c5f 6e75 6c6c 2822 2229 2e74 6f5f 6e75  l_null("").to_nu
+00035b00: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
+00035b10: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
+00035b20: 6c65 3d77 7269 7461 626c 6529 0d0a 0d0a  le=writable)....
+00035b30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00035b40: 6c74 203d 2046 6173 7441 7272 6179 2874  lt = FastArray(t
+00035b50: 6d70 2c20 6474 7970 653d 7374 722c 2075  mp, dtype=str, u
+00035b60: 6e69 636f 6465 3d68 6173 5f75 6e69 636f  nicode=has_unico
+00035b70: 6465 290d 0a20 2020 2020 2020 2020 2020  de)..           
+00035b80: 2069 6620 6e6f 7420 7772 6974 6162 6c65   if not writable
+00035b90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00035ba0: 2020 2072 6573 756c 742e 666c 6167 732e     result.flags.
+00035bb0: 7772 6974 6561 626c 6520 3d20 4661 6c73  writeable = Fals
+00035bc0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
+00035bd0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00035be0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
+00035bf0: 2e69 735f 6669 7865 645f 7369 7a65 5f62  .is_fixed_size_b
+00035c00: 696e 6172 7928 6172 722e 7479 7065 293a  inary(arr.type):
+00035c10: 0d0a 2020 2020 2020 2020 2020 2020 6e75  ..            nu
+00035c20: 6c6c 5f63 6f75 6e74 203d 2061 7272 2e6e  ll_count = arr.n
+00035c30: 756c 6c5f 636f 756e 740d 0a20 2020 2020  ull_count..     
+00035c40: 2020 2020 2020 2069 6620 6e75 6c6c 5f63         if null_c
+00035c50: 6f75 6e74 2021 3d20 303a 0d0a 2020 2020  ount != 0:..    
+00035c60: 2020 2020 2020 2020 2020 2020 6966 207a              if z
+00035c70: 6572 6f5f 636f 7079 5f6f 6e6c 793a 0d0a  ero_copy_only:..
+00035c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035c90: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00035ca0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00035cb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00035cc0: 4361 6e27 7420 7065 7266 6f72 6d20 6120  Can't perform a 
+00035cd0: 7a65 726f 2d63 6f70 7920 636f 6e76 6572  zero-copy conver
+00035ce0: 7369 6f6e 206f 6620 6120 6669 7865 642d  sion of a fixed-
+00035cf0: 7369 7a65 2062 696e 6172 7920 6172 7261  size binary arra
+00035d00: 7920 746f 2072 6970 7461 626c 6520 7768  y to riptable wh
+00035d10: 656e 2074 6865 2069 6e70 7574 2061 7272  en the input arr
+00035d20: 6179 2063 6f6e 7461 696e 7320 6e75 6c6c  ay contains null
+00035d30: 732e 220d 0a20 2020 2020 2020 2020 2020  s."..           
+00035d40: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00035d50: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00035d60: 7220 3d20 6172 722e 6669 6c6c 5f6e 756c  r = arr.fill_nul
+00035d70: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+00035d80: 2020 2020 2020 2020 6222 5c78 3030 2220          b"\x00" 
+00035d90: 2a20 6172 722e 7479 7065 2e62 7974 655f  * arr.type.byte_
+00035da0: 7769 6474 680d 0a20 2020 2020 2020 2020  width..         
+00035db0: 2020 2020 2020 2029 2020 2320 6361 6e27         )  # can'
+00035dc0: 7420 6669 6c6c 2077 6974 6820 6222 222c  t fill with b"",
+00035dd0: 2073 696e 6365 2062 2222 2069 7320 6e6f   since b"" is no
+00035de0: 7420 7661 6c69 6420 666f 7220 6669 7865  t valid for fixe
+00035df0: 6420 7769 6474 6820 7479 7065 0d0a 0d0a  d width type....
+00035e00: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
+00035e10: 6c6c 696e 6720 7061 2e41 7272 6179 2e74  lling pa.Array.t
+00035e20: 6f5f 6e75 6d70 7920 7769 7468 207a 6572  o_numpy with zer
+00035e30: 6f5f 636f 7079 3d54 7275 6520 7261 6973  o_copy=True rais
+00035e40: 6573 2061 6e20 6572 726f 7220 7769 7468  es an error with
+00035e50: 2066 6978 6564 2073 697a 6564 2062 696e   fixed sized bin
+00035e60: 6172 7920 7479 7065 2e0d 0a20 2020 2020  ary type...     
+00035e70: 2020 2020 2020 2023 2043 616c 6c69 6e67         # Calling
+00035e80: 2070 612e 4172 7261 792e 746f 5f6e 756d   pa.Array.to_num
+00035e90: 7079 2077 6974 6820 7a65 726f 5f63 6f70  py with zero_cop
+00035ea0: 793d 4661 6c73 6520 7265 7475 726e 7320  y=False returns 
+00035eb0: 6120 6e75 6d70 7920 6172 7261 7920 7768  a numpy array wh
+00035ec0: 6572 6520 7479 7065 7320 6172 6520 7079  ere types are py
+00035ed0: 7468 6f6e 2062 7974 6573 206f 626a 6563  thon bytes objec
+00035ee0: 7473 2e0d 0a20 2020 2020 2020 2020 2020  ts...           
+00035ef0: 2023 2057 6f72 6b61 726f 756e 6420 6265   # Workaround be
+00035f00: 6c6f 7720 6372 6561 7465 7320 7468 6520  low creates the 
+00035f10: 6e75 6d70 7920 6275 6666 6572 206f 6620  numpy buffer of 
+00035f20: 7479 7065 2022 5322 206d 616e 7561 6c6c  type "S" manuall
+00035f30: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
+00035f40: 6275 6620 3d20 6e70 2e66 726f 6d62 7566  buf = np.frombuf
+00035f50: 6665 7228 0d0a 2020 2020 2020 2020 2020  fer(..          
+00035f60: 2020 2020 2020 6172 722e 6275 6666 6572        arr.buffer
+00035f70: 7328 295b 315d 2c0d 0a20 2020 2020 2020  s()[1],..       
+00035f80: 2020 2020 2020 2020 2064 7479 7065 3d22           dtype="
+00035f90: 5322 202b 2073 7472 2861 7272 2e74 7970  S" + str(arr.typ
+00035fa0: 652e 6279 7465 5f77 6964 7468 292c 0d0a  e.byte_width),..
+00035fb0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00035fc0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00035fd0: 7772 6974 6162 6c65 2061 6e64 206e 756c  writable and nul
+00035fe0: 6c5f 636f 756e 7420 3d3d 2030 3a20 2023  l_count == 0:  #
+00035ff0: 2061 6c72 6561 6479 206d 6164 6520 6120   already made a 
+00036000: 636f 7079 2069 6620 6e75 6c6c 5f63 6f75  copy if null_cou
+00036010: 6e74 2021 3d20 300d 0a20 2020 2020 2020  nt != 0..       
+00036020: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00036030: 3d20 4661 7374 4172 7261 7928 6e70 2e63  = FastArray(np.c
+00036040: 6f70 7928 6275 6629 290d 0a20 2020 2020  opy(buf))..     
+00036050: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00036060: 742e 666c 6167 732e 7772 6974 6561 626c  t.flags.writeabl
+00036070: 6520 3d20 7772 6974 6162 6c65 0d0a 2020  e = writable..  
+00036080: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00036090: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
+000360a0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000360b0: 7420 3d20 4661 7374 4172 7261 7928 6275  t = FastArray(bu
+000360c0: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
+000360d0: 7265 7375 6c74 2e66 6c61 6773 2e77 7269  result.flags.wri
+000360e0: 7465 6162 6c65 203d 2077 7269 7461 626c  teable = writabl
+000360f0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
+00036100: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00036110: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00036120: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00036130: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
+00036140: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00036150: 4661 7374 4172 7261 7920 6361 6e6e 6f74  FastArray cannot
+00036160: 2062 6520 6372 6561 7465 6420 6672 6f6d   be created from
+00036170: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
+00036180: 206f 6620 7479 7065 2027 7b61 7272 2e74   of type '{arr.t
+00036190: 7970 657d 272e 2059 6f75 206d 6179 206e  ype}'. You may n
+000361a0: 6565 6420 746f 2063 616c 6c20 7468 6520  eed to call the 
+000361b0: 6066 726f 6d5f 6172 726f 7760 206d 6574  `from_arrow` met
+000361c0: 686f 6420 6f6e 206f 6e65 206f 6620 7468  hod on one of th
+000361d0: 6520 6465 7269 7665 6420 7375 6263 6c61  e derived subcla
+000361e0: 7373 6573 2069 6e73 7465 6164 2e22 0d0a  sses instead."..
+000361f0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00036200: 0a20 2020 2064 6566 2074 6f5f 6172 726f  .    def to_arro
+00036210: 7728 0d0a 2020 2020 2020 2020 7365 6c66  w(..        self
+00036220: 2c0d 0a20 2020 2020 2020 2074 7970 653a  ,..        type:
+00036230: 204f 7074 696f 6e61 6c5b 2270 612e 4461   Optional["pa.Da
+00036240: 7461 5479 7065 225d 203d 204e 6f6e 652c  taType"] = None,
+00036250: 0d0a 2020 2020 2020 2020 2a2c 0d0a 2020  ..        *,..  
+00036260: 2020 2020 2020 7072 6573 6572 7665 5f66        preserve_f
+00036270: 6978 6564 5f62 7974 6573 3a20 626f 6f6c  ixed_bytes: bool
+00036280: 203d 2046 616c 7365 2c0d 0a20 2020 2020   = False,..     
+00036290: 2020 2065 6d70 7479 5f73 7472 696e 6773     empty_strings
+000362a0: 5f74 6f5f 6e75 6c6c 3a20 626f 6f6c 203d  _to_null: bool =
+000362b0: 2054 7275 652c 0d0a 2020 2020 2920 2d3e   True,..    ) ->
+000362c0: 2055 6e69 6f6e 5b22 7061 2e41 7272 6179   Union["pa.Array
+000362d0: 222c 2022 7061 2e43 6875 6e6b 6564 4172  ", "pa.ChunkedAr
+000362e0: 7261 7922 5d3a 0d0a 2020 2020 2020 2020  ray"]:..        
+000362f0: 2222 220d 0a20 2020 2020 2020 2043 6f6e  """..        Con
+00036300: 7665 7274 2074 6869 7320 6046 6173 7441  vert this `FastA
+00036310: 7272 6179 6020 746f 2061 2060 7079 6172  rray` to a `pyar
+00036320: 726f 772e 4172 7261 7960 2e0d 0a0d 0a20  row.Array`..... 
+00036330: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00036340: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00036350: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2074  -----..        t
+00036360: 7970 6520 3a20 7079 6172 726f 772e 4461  ype : pyarrow.Da
+00036370: 7461 5479 7065 2c20 6f70 7469 6f6e 616c  taType, optional
+00036380: 2c20 6465 6661 756c 7473 2074 6f20 4e6f  , defaults to No
+00036390: 6e65 0d0a 2020 2020 2020 2020 7072 6573  ne..        pres
+000363a0: 6572 7665 5f66 6978 6564 5f62 7974 6573  erve_fixed_bytes
+000363b0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
+000363c0: 6c2c 2064 6566 6175 6c74 7320 746f 2046  l, defaults to F
+000363d0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+000363e0: 2020 4966 2074 6869 7320 6046 6173 7441    If this `FastA
+000363f0: 7272 6179 6020 6973 2061 6e20 4153 4349  rray` is an ASCI
+00036400: 4920 7374 7269 6e67 2061 7272 6179 2028  I string array (
+00036410: 6474 7970 652e 6b69 6e64 203d 3d20 2753  dtype.kind == 'S
+00036420: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
+00036430: 2073 6574 2074 6869 7320 7061 7261 6d65   set this parame
+00036440: 7465 7220 746f 2054 7275 6520 746f 2070  ter to True to p
+00036450: 726f 6475 6365 2061 2066 6978 6564 2d6c  roduce a fixed-l
+00036460: 656e 6774 6820 6269 6e61 7279 2061 7272  ength binary arr
+00036470: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
+00036480: 696e 7374 6561 6420 6f66 2061 2076 6172  instead of a var
+00036490: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
+000364a0: 696e 6720 6172 7261 792e 0d0a 2020 2020  ing array...    
+000364b0: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
+000364c0: 735f 746f 5f6e 756c 6c20 3a20 626f 6f6c  s_to_null : bool
+000364d0: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
+000364e0: 756c 7473 2054 6f20 5472 7565 0d0a 2020  ults To True..  
+000364f0: 2020 2020 2020 2020 2020 4966 2074 6869            If thi
+00036500: 7320 6046 6173 7441 7272 6179 6020 6973  s `FastArray` is
+00036510: 2061 6e20 4153 4349 4920 6f72 2055 6e69   an ASCII or Uni
+00036520: 636f 6465 2073 7472 696e 6720 6172 7261  code string arra
+00036530: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+00036540: 7370 6563 6966 7920 5472 7565 2066 6f72  specify True for
+00036550: 2074 6869 7320 7061 7261 6d65 7465 7220   this parameter 
+00036560: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
+00036570: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
+00036580: 7320 696e 2074 6865 206f 7574 7075 742e  s in the output.
+00036590: 0d0a 2020 2020 2020 2020 2020 2020 7269  ..            ri
+000365a0: 7074 6162 6c65 2069 6e63 6f6e 7369 7374  ptable inconsist
+000365b0: 656e 746c 7920 7265 636f 676e 697a 6573  ently recognizes
+000365c0: 2074 6865 2065 6d70 7479 2073 7472 696e   the empty strin
+000365d0: 6720 6173 2061 6e20 2769 6e76 616c 6964  g as an 'invalid
+000365e0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+000365f0: 736f 2074 6869 7320 7061 7261 6d65 7465  so this paramete
+00036600: 7220 616c 6c6f 7773 2074 6865 2063 616c  r allows the cal
+00036610: 6c65 7220 746f 2073 7065 6369 6679 2077  ler to specify w
+00036620: 6869 6368 2069 6e74 6572 7072 6574 6174  hich interpretat
+00036630: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
+00036640: 2074 6865 7920 7761 6e74 2e0d 0a0d 0a20   they want..... 
+00036650: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00036660: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00036670: 0a20 2020 2020 2020 2070 7961 7272 6f77  .        pyarrow
+00036680: 2e41 7272 6179 206f 7220 7079 6172 726f  .Array or pyarro
+00036690: 772e 4368 756e 6b65 6441 7272 6179 0d0a  w.ChunkedArray..
+000366a0: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
+000366b0: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
+000366c0: 2020 2020 2020 2020 544f 444f 3a20 4164          TODO: Ad
+000366d0: 6420 626f 6f6c 2070 6172 616d 6574 6572  d bool parameter
+000366e0: 2077 6869 6368 2064 6972 6563 7473 2074   which directs t
+000366f0: 6865 2063 6f6e 7665 7273 696f 6e20 746f  he conversion to
+00036700: 2063 686f 6f73 6520 7468 6520 6d6f 7374   choose the most
+00036710: 2d63 6f6d 7061 6374 206f 7574 7075 7420  -compact output 
+00036720: 7479 7065 2070 6f73 7369 626c 653f 0d0a  type possible?..
+00036730: 2020 2020 2020 2020 2020 2020 2020 5468                Th
+00036740: 6973 2077 6f75 6c64 2062 6520 7265 6c65  is would be rele
+00036750: 7661 6e74 2074 6f20 696e 6469 6365 7320  vant to indices 
+00036760: 6f66 2063 6174 6567 6f72 6963 616c 2f64  of categorical/d
+00036770: 6963 7469 6f6e 6172 792d 656e 636f 6465  ictionary-encode
+00036780: 6420 6172 7261 7973 2c20 6275 7420 636f  d arrays, but co
+00036790: 756c 6420 616c 736f 206d 616b 6520 7365  uld also make se
+000367a0: 6e73 650d 0a20 2020 2020 2020 2020 2020  nse..           
+000367b0: 2020 2066 6f72 2072 6567 756c 6172 2046     for regular F
+000367c0: 6173 7441 7272 6179 2074 7970 6573 2028  astArray types (
+000367d0: 652e 672e 2074 6f20 7573 6520 616e 2069  e.g. to use an i
+000367e0: 6e74 3820 696e 7374 6561 6420 6f66 2061  nt8 instead of a
+000367f0: 6e20 696e 7433 3220 7768 656e 2069 7427  n int32 when it'
+00036800: 6420 6265 2061 206c 6f73 736c 6573 7320  d be a lossless 
+00036810: 636f 6e76 6572 7369 6f6e 292e 0d0a 2020  conversion)...  
+00036820: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00036830: 2020 2069 6d70 6f72 7420 6275 696c 7469     import builti
+00036840: 6e73 0d0a 0d0a 2020 2020 2020 2020 696d  ns....        im
+00036850: 706f 7274 2070 7961 7272 6f77 2061 7320  port pyarrow as 
+00036860: 7061 0d0a 0d0a 2020 2020 2020 2020 2320  pa....        # 
+00036870: 4465 7269 7665 6420 6172 7261 7920 7479  Derived array ty
+00036880: 7065 7320 4d55 5354 2069 6d70 6c65 6d65  pes MUST impleme
+00036890: 6e74 2074 6865 6972 206f 776e 206f 7665  nt their own ove
+000368a0: 726c 6f61 6420 6f66 2074 6869 7320 6675  rload of this fu
+000368b0: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
+000368c0: 2320 666f 7220 636f 7272 6563 746e 6573  # for correctnes
+000368d0: 733b 2066 6f72 2074 6861 7420 7265 6173  s; for that reas
+000368e0: 6f6e 2c20 7261 6973 6520 616e 2065 7272  on, raise an err
+000368f0: 6f72 2069 6620 736f 6d65 6f6e 6520 6174  or if someone at
+00036900: 7465 6d70 7473 2074 6f0d 0a20 2020 2020  tempts to..     
+00036910: 2020 2023 2063 616c 6c20 2a74 6869 732a     # call *this*
+00036920: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+00036930: 6f66 2074 6865 206d 6574 686f 6420 666f  of the method fo
+00036940: 7220 6120 6465 7269 7665 6420 6172 7261  r a derived arra
+00036950: 7920 7479 7065 2e0d 0a20 2020 2020 2020  y type...       
+00036960: 2069 6620 6275 696c 7469 6e73 2e74 7970   if builtins.typ
+00036970: 6528 7365 6c66 2920 213d 2046 6173 7441  e(self) != FastA
+00036980: 7272 6179 3a0d 0a20 2020 2020 2020 2020  rray:..         
+00036990: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+000369a0: 656d 656e 7465 6445 7272 6f72 280d 0a20  ementedError(.. 
+000369b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000369c0: 2254 6865 2060 7b62 7569 6c74 696e 732e  "The `{builtins.
+000369d0: 7479 7065 2873 656c 6629 2e5f 5f71 7561  type(self).__qua
+000369e0: 6c6e 616d 655f 5f7d 6020 7479 7065 206d  lname__}` type m
+000369f0: 7573 7420 696d 706c 656d 656e 7420 6974  ust implement it
+00036a00: 2773 206f 776e 206f 7665 7272 6964 6520  's own override 
+00036a10: 6f66 2074 6865 2060 746f 5f61 7272 6f77  of the `to_arrow
+00036a20: 2829 6020 6d65 7468 6f64 2e22 0d0a 2020  ()` method."..  
+00036a30: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00036a40: 2020 2020 2020 2023 2072 6970 7461 626c         # riptabl
+00036a50: 6520 2861 7420 6c65 6173 7420 6173 206f  e (at least as o
+00036a60: 6620 312e 302e 3536 2920 646f 6573 206e  f 1.0.56) does n
+00036a70: 6f74 202a 7472 756c 792a 2073 7570 706f  ot *truly* suppo
+00036a80: 7274 2069 6e76 616c 6964 2f4e 4120 7661  rt invalid/NA va
+00036a90: 6c75 6573 0d0a 2020 2020 2020 2020 2320  lues..        # 
+00036aa0: 696e 2062 6f6f 6c20 6f72 2061 7363 6969  in bool or ascii
+00036ab0: 2f75 6e69 636f 6465 2073 7472 696e 672d  /unicode string-
+00036ac0: 7479 7065 6420 6172 7261 7973 2e20 4861  typed arrays. Ha
+00036ad0: 6e64 6c65 2074 686f 7365 2064 7479 7065  ndle those dtype
+00036ae0: 7320 7370 6563 6961 6c6c 792e 0d0a 2020  s specially...  
+00036af0: 2020 2020 2020 6966 206e 702e 6973 7375        if np.issu
+00036b00: 6264 7479 7065 2873 656c 662e 6474 7970  bdtype(self.dtyp
+00036b10: 652c 206e 702e 696e 7465 6765 7229 3a0d  e, np.integer):.
+00036b20: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00036b30: 4f44 4f3a 2049 6620 7468 6973 2061 7272  ODO: If this arr
+00036b40: 6179 2068 6173 202e 6e64 696d 7320 3e3d  ay has .ndims >=
+00036b50: 2032 2c20 6e65 6564 2074 6f20 636f 6e76   2, need to conv
+00036b60: 6572 7420 746f 2070 7961 7272 6f77 2075  ert to pyarrow u
+00036b70: 7369 6e67 2070 612e 5465 6e73 6f72 2e66  sing pa.Tensor.f
+00036b80: 726f 6d5f 6e75 6d70 7928 2e2e 2e29 2e20  rom_numpy(...). 
+00036b90: 5468 6174 2064 6f65 736e 2774 2068 616e  That doesn't han
+00036ba0: 646c 6520 6d61 736b 7320 6173 206f 6620  dle masks as of 
+00036bb0: 7079 6172 726f 7720 342e 302e 0d0a 0d0a  pyarrow 4.0.....
+00036bc0: 2020 2020 2020 2020 2020 2020 2320 4765              # Ge
+00036bd0: 7420 6120 6d61 736b 206f 6620 696e 7661  t a mask of inva
+00036be0: 6c69 6473 2e0d 0a20 2020 2020 2020 2020  lids...         
+00036bf0: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
+00036c00: 203d 2073 656c 662e 6973 6e61 6e28 290d   = self.isnan().
+00036c10: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00036c20: 2049 6620 616c 6c20 7661 6c75 6573 2061   If all values a
+00036c30: 7265 2076 616c 6964 2c20 646f 6e27 7420  re valid, don't 
+00036c40: 626f 7468 6572 2063 7265 6174 696e 6720  bother creating 
+00036c50: 616e 2061 6c6c 2d46 616c 7365 206d 6173  an all-False mas
+00036c60: 6b2c 2069 7427 7320 6a75 7374 2077 6173  k, it's just was
+00036c70: 7469 6e67 206d 656d 6f72 792e 0d0a 2020  ting memory...  
+00036c80: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00036c90: 2069 6e76 616c 6964 735f 6d61 736b 2e61   invalids_mask.a
+00036ca0: 6e79 2829 3a0d 0a20 2020 2020 2020 2020  ny():..         
+00036cb0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
+00036cc0: 6d61 736b 203d 204e 6f6e 650d 0a0d 0a20  mask = None.... 
+00036cd0: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
+00036ce0: 6174 6520 7468 6520 7079 6172 726f 7720  ate the pyarrow 
+00036cf0: 6172 7261 7920 6672 6f6d 2069 7420 2b20  array from it + 
+00036d00: 7468 6973 2061 7272 6179 2e0d 0a20 2020  this array...   
+00036d10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00036d20: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
+00036d30: 702c 206d 6173 6b3d 696e 7661 6c69 6473  p, mask=invalids
+00036d40: 5f6d 6173 6b2c 2074 7970 653d 7479 7065  _mask, type=type
+00036d50: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
+00036d60: 6620 6e70 2e69 7373 7562 6474 7970 6528  f np.issubdtype(
+00036d70: 7365 6c66 2e64 7479 7065 2c20 6e70 2e66  self.dtype, np.f
+00036d80: 6c6f 6174 696e 6729 3a0d 0a20 2020 2020  loating):..     
+00036d90: 2020 2020 2020 2023 2055 7369 6e67 2066         # Using f
+00036da0: 6c6f 6174 696e 672d 706f 696e 7420 4e61  loating-point Na
+00036db0: 4e20 746f 2073 6967 6e61 6c20 626f 7468  N to signal both
+00036dc0: 204e 614e 2061 6e64 204e 412f 6e75 6c6c   NaN and NA/null
+00036dd0: 2069 6e20 7269 7074 6162 6c65 206d 6561   in riptable mea
+00036de0: 6e73 2077 650d 0a20 2020 2020 2020 2020  ns we..         
+00036df0: 2020 2023 206e 6565 6420 746f 206d 616b     # need to mak
+00036e00: 6520 6120 6465 6369 7369 6f6e 2068 6572  e a decision her
+00036e10: 6520 6f6e 2077 6865 7468 6572 2074 6f20  e on whether to 
+00036e20: 6d61 726b 2074 686f 7365 2076 616c 7565  mark those value
+00036e30: 7320 6173 204e 412f 6e75 6c6c 2076 616c  s as NA/null val
+00036e40: 7565 730d 0a20 2020 2020 2020 2020 2020  ues..           
+00036e50: 2023 2069 6e20 7468 6520 7265 7475 726e   # in the return
+00036e60: 6564 2070 7961 7272 6f77 2061 7272 6179  ed pyarrow array
+00036e70: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00036e80: 2046 6f72 206e 6f77 2c20 7765 2064 6f6e   For now, we don
+00036e90: 2774 202d 2d20 7765 206a 7573 7420 7061  't -- we just pa
+00036ea0: 7373 2074 6865 2064 6174 6120 616c 6f6e  ss the data alon
+00036eb0: 6720 6469 7265 6374 6c79 2c20 736f 2074  g directly, so t
+00036ec0: 6865 2063 616c 6c65 7220 6361 6e20 6465  he caller can de
+00036ed0: 6369 6465 0d0a 2020 2020 2020 2020 2020  cide..          
+00036ee0: 2020 2320 6f6e 2077 6865 7468 6572 2074    # on whether t
+00036ef0: 6865 7920 7761 6e74 2074 6f20 6861 6e64  hey want to hand
+00036f00: 6c65 2074 6861 742e 2028 4964 6561 6c6c  le that. (Ideall
+00036f10: 792c 2077 6527 6420 6861 7665 2061 2077  y, we'd have a w
+00036f20: 6179 2074 6f20 7061 7261 6d65 7465 7269  ay to parameteri
+00036f30: 7a65 2074 6869 730d 0a20 2020 2020 2020  ze this..       
+00036f40: 2020 2020 2023 2062 7574 2074 6865 2070       # but the p
+00036f50: 726f 746f 636f 6c20 646f 6573 6e27 7420  rotocol doesn't 
+00036f60: 7375 7070 6f72 7420 6974 2061 7320 6f66  support it as of
+00036f70: 2070 7961 7272 6f77 2034 2e30 2e20 496e   pyarrow 4.0. In
+00036f80: 2061 6e79 2063 6173 652c 206f 6e6c 7920   any case, only 
+00036f90: 7468 6520 6269 746d 6173 6b0d 0a20 2020  the bitmask..   
+00036fa0: 2020 2020 2020 2020 2023 206e 6565 6473           # needs
+00036fb0: 2074 6f20 6265 2072 652d 6372 6561 7465   to be re-create
+00036fc0: 6420 6c61 7465 7220 6966 2074 6865 2075  d later if the u
+00036fd0: 7365 7220 7761 6e74 7320 746f 2063 6f6e  ser wants to con
+00036fe0: 7369 6465 7220 7468 6520 4e61 4e73 2061  sider the NaNs a
+00036ff0: 7320 4e41 2f6e 756c 6c20 7661 6c75 6573  s NA/null values
+00037000: 2e29 0d0a 2020 2020 2020 2020 2020 2020  .)..            
+00037010: 6966 2073 656c 662e 6e64 696d 203e 3d20  if self.ndim >= 
+00037020: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+00037030: 2020 2020 2320 4e4f 5445 3a20 4173 206f      # NOTE: As o
+00037040: 6620 7079 6172 726f 7720 342e 302c 2074  f pyarrow 4.0, t
+00037050: 6869 7320 6d65 7468 6f64 2064 6f65 736e  his method doesn
+00037060: 2774 2073 7570 706f 7274 2061 2060 7479  't support a `ty
+00037070: 7065 6020 6172 6775 6d65 6e74 2e0d 0a20  pe` argument... 
+00037080: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00037090: 6574 7572 6e20 7061 2e54 656e 736f 722e  eturn pa.Tensor.
+000370a0: 6672 6f6d 5f6e 756d 7079 2873 656c 662e  from_numpy(self.
+000370b0: 5f6e 7029 0d0a 2020 2020 2020 2020 2020  _np)..          
+000370c0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000370d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000370e0: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
+000370f0: 702c 2074 7970 653d 7479 7065 290d 0a0d  p, type=type)...
+00037100: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
+00037110: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
+00037120: 2e64 7479 7065 2c20 626f 6f6c 293a 0d0a  .dtype, bool):..
+00037130: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00037140: 656c 662e 6e64 696d 203e 3d20 323a 0d0a  elf.ndim >= 2:..
+00037150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037160: 2320 4e4f 5445 3a20 4173 206f 6620 7079  # NOTE: As of py
+00037170: 6172 726f 7720 342e 302c 2074 6869 7320  arrow 4.0, this 
+00037180: 6d65 7468 6f64 2064 6f65 736e 2774 2073  method doesn't s
+00037190: 7570 706f 7274 2061 2060 7479 7065 6020  upport a `type` 
+000371a0: 6172 6775 6d65 6e74 2e0d 0a20 2020 2020  argument...     
+000371b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000371c0: 6e20 7061 2e54 656e 736f 722e 6672 6f6d  n pa.Tensor.from
+000371d0: 5f6e 756d 7079 2873 656c 662e 5f6e 7029  _numpy(self._np)
+000371e0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+000371f0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00037200: 2020 2020 2072 6574 7572 6e20 7061 2e61       return pa.a
+00037210: 7272 6179 2873 656c 662e 5f6e 702c 2074  rray(self._np, t
+00037220: 7970 653d 7479 7065 290d 0a0d 0a20 2020  ype=type)....   
+00037230: 2020 2020 2065 6c69 6620 6e70 2e69 7373       elif np.iss
+00037240: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
+00037250: 7065 2c20 6279 7465 7329 3a0d 0a20 2020  pe, bytes):..   
+00037260: 2020 2020 2020 2020 2023 2049 6620 7468           # If th
+00037270: 6520 6361 6c6c 6572 2077 616e 7473 2074  e caller wants t
+00037280: 6f20 636f 6e76 6572 7420 656d 7074 7920  o convert empty 
+00037290: 7374 7269 6e67 7320 746f 206e 756c 6c73  strings to nulls
+000372a0: 2c20 6765 7420 6120 6d61 736b 206f 6620  , get a mask of 
+000372b0: 696e 7661 6c69 6473 2e0d 0a20 2020 2020  invalids...     
+000372c0: 2020 2020 2020 2069 6620 656d 7074 795f         if empty_
+000372d0: 7374 7269 6e67 735f 746f 5f6e 756c 6c3a  strings_to_null:
+000372e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000372f0: 2020 696e 7661 6c69 6473 5f6d 6173 6b20    invalids_mask 
+00037300: 3d20 7365 6c66 203d 3d20 7365 6c66 2e69  = self == self.i
+00037310: 6e76 0d0a 0d0a 2020 2020 2020 2020 2020  nv....          
+00037320: 2020 2020 2020 2320 4966 2061 6c6c 2076        # If all v
+00037330: 616c 7565 7320 6172 6520 7661 6c69 642c  alues are valid,
+00037340: 2064 6f6e 2774 2062 6f74 6865 7220 6372   don't bother cr
+00037350: 6561 7469 6e67 2061 6e20 616c 6c2d 4661  eating an all-Fa
+00037360: 6c73 6520 6d61 736b 2c20 6974 2773 206a  lse mask, it's j
+00037370: 7573 7420 7761 7374 696e 6720 6d65 6d6f  ust wasting memo
+00037380: 7279 2e0d 0a20 2020 2020 2020 2020 2020  ry...           
+00037390: 2020 2020 2069 6620 6e6f 7420 696e 7661       if not inva
+000373a0: 6c69 6473 5f6d 6173 6b2e 616e 7928 293a  lids_mask.any():
+000373b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000373c0: 2020 2020 2020 696e 7661 6c69 6473 5f6d        invalids_m
+000373d0: 6173 6b20 3d20 4e6f 6e65 0d0a 2020 2020  ask = None..    
+000373e0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000373f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00037400: 6e76 616c 6964 735f 6d61 736b 203d 204e  nvalids_mask = N
+00037410: 6f6e 650d 0a0d 0a20 2020 2020 2020 2020  one....         
+00037420: 2020 2023 2044 6f65 7320 7468 6520 6361     # Does the ca
+00037430: 6c6c 6572 2077 616e 7420 746f 2070 7265  ller want to pre
+00037440: 7365 7276 6520 7468 6520 6669 7865 642d  serve the fixed-
+00037450: 6c65 6e67 7468 2062 696e 6172 7920 6461  length binary da
+00037460: 7461 3f0d 0a20 2020 2020 2020 2020 2020  ta?..           
+00037470: 2069 6620 7072 6573 6572 7665 5f66 6978   if preserve_fix
+00037480: 6564 5f62 7974 6573 3a0d 0a20 2020 2020  ed_bytes:..     
+00037490: 2020 2020 2020 2020 2020 2023 2043 6f6e             # Con
+000374a0: 7665 7274 2074 6f20 6120 6669 7865 642d  vert to a fixed-
+000374b0: 6c65 6e67 7468 2062 696e 6172 7920 2827  length binary ('
+000374c0: 6279 7465 7327 2920 7479 7065 2e0d 0a20  bytes') type... 
+000374d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000374e0: 6c65 6d65 6e74 5f73 7472 5f6c 656e 6774  lement_str_lengt
+000374f0: 6820 3d20 6e70 2e64 7479 7065 2873 656c  h = np.dtype(sel
+00037500: 662e 6474 7970 6529 2e69 7465 6d73 697a  f.dtype).itemsiz
+00037510: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00037520: 2020 2061 7272 5f74 7970 6520 3d20 7061     arr_type = pa
+00037530: 2e62 696e 6172 7928 656c 656d 656e 745f  .binary(element_
+00037540: 7374 725f 6c65 6e67 7468 2920 6966 2074  str_length) if t
+00037550: 7970 6520 6973 204e 6f6e 6520 656c 7365  ype is None else
+00037560: 2074 7970 650d 0a20 2020 2020 2020 2020   type..         
+00037570: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
+00037580: 2e61 7272 6179 2873 656c 662e 5f6e 702c  .array(self._np,
+00037590: 206d 6173 6b3d 696e 7661 6c69 6473 5f6d   mask=invalids_m
+000375a0: 6173 6b2c 2074 7970 653d 6172 725f 7479  ask, type=arr_ty
+000375b0: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+000375c0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000375d0: 2020 2020 2020 2020 2320 436f 6e76 6572          # Conver
+000375e0: 7420 7468 6973 2061 7272 6179 2074 6f20  t this array to 
+000375f0: 6120 7079 6172 726f 7720 7661 7269 6162  a pyarrow variab
+00037600: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
+00037610: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
+00037620: 2020 2020 2020 2020 2069 6620 7479 7065           if type
+00037630: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00037640: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00037650: 7970 6520 3d20 7061 2e73 7472 696e 6728  ype = pa.string(
+00037660: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00037670: 2020 2023 2043 6f6e 7665 7274 2061 7320     # Convert as 
+00037680: 556e 6963 6f64 6520 6e64 6172 7261 7920  Unicode ndarray 
+00037690: 746f 2073 7472 696e 6761 7272 6179 2c20  to stringarray, 
+000376a0: 6173 2062 7974 6573 7472 696e 6720 646f  as bytestring do
+000376b0: 6573 206e 6f74 2070 7265 7365 7276 6520  es not preserve 
+000376c0: 656c 656d 656e 7420 6c65 6e67 7468 2028  element length (
+000376d0: 7269 7074 6162 6c65 2332 3439 290d 0a20  riptable#249).. 
+000376e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000376f0: 6574 7572 6e20 7061 2e61 7272 6179 286e  eturn pa.array(n
+00037700: 702e 6172 7261 7928 7365 6c66 2e5f 6e70  p.array(self._np
+00037710: 2c20 6474 7970 653d 2255 2229 2c20 6d61  , dtype="U"), ma
+00037720: 736b 3d69 6e76 616c 6964 735f 6d61 736b  sk=invalids_mask
+00037730: 2c20 7479 7065 3d74 7970 6529 0d0a 0d0a  , type=type)....
+00037740: 2020 2020 2020 2020 656c 6966 206e 702e          elif np.
+00037750: 6973 7375 6264 7479 7065 2873 656c 662e  issubdtype(self.
+00037760: 6474 7970 652c 2073 7472 293a 0d0a 2020  dtype, str):..  
+00037770: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
+00037780: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
+00037790: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
+000377a0: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
+000377b0: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
+000377c0: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
+000377d0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
+000377e0: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
+000377f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00037800: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
+00037810: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
+00037820: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
+00037830: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
+00037840: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
+00037850: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
+00037860: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
+00037870: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
+00037880: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
+00037890: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
+000378a0: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
+000378b0: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
+000378c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000378d0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
+000378e0: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
+000378f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00037900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037910: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
+00037920: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00037930: 2020 2020 2320 7079 6172 726f 7720 2861      # pyarrow (a
+00037940: 7320 6f66 2076 342e 3029 2064 6f65 7320  s of v4.0) does 
+00037950: 6e6f 7420 6861 7665 2061 2066 6978 6564  not have a fixed
+00037960: 2d73 697a 6520 556e 6963 6f64 6520 7374  -size Unicode st
+00037970: 7269 6e67 2064 6174 6120 7479 7065 2c20  ring data type, 
+00037980: 736f 2075 6e6c 696b 6520 7468 6520 2762  so unlike the 'b
+00037990: 7974 6573 270d 0a20 2020 2020 2020 2020  ytes'..         
+000379a0: 2020 2023 2068 616e 646c 696e 6720 6162     # handling ab
+000379b0: 6f76 6520 666f 7220 4153 4349 4920 7374  ove for ASCII st
+000379c0: 7269 6e67 732c 2077 6520 6861 7665 2074  rings, we have t
+000379d0: 6f20 7573 6520 7468 6520 7661 7269 6162  o use the variab
+000379e0: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
+000379f0: 2061 7272 6179 2074 7970 652e 0d0a 2020   array type...  
+00037a00: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00037a10: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
+00037a20: 2020 2020 2020 2020 2020 2020 7479 7065              type
+00037a30: 203d 2070 612e 7374 7269 6e67 2829 0d0a   = pa.string()..
+00037a40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00037a50: 726e 2070 612e 6172 7261 7928 7365 6c66  rn pa.array(self
+00037a60: 2e5f 6e70 2c20 6d61 736b 3d69 6e76 616c  ._np, mask=inval
+00037a70: 6964 735f 6d61 736b 2c20 7479 7065 3d74  ids_mask, type=t
+00037a80: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
+00037a90: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00037aa0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+00037ab0: 656d 656e 7465 6445 7272 6f72 2866 2246  ementedError(f"F
+00037ac0: 6173 7441 7272 6179 2077 6974 6820 6474  astArray with dt
+00037ad0: 7970 6520 277b 6e70 2e64 7479 7065 2873  ype '{np.dtype(s
+00037ae0: 656c 662e 6474 7970 6529 7d27 2069 7320  elf.dtype)}' is 
+00037af0: 6e6f 7420 7375 7070 6f72 7465 642e 2229  not supported.")
+00037b00: 0d0a 0d0a 2020 2020 6465 6620 5f5f 6172  ....    def __ar
+00037b10: 726f 775f 6172 7261 795f 5f28 7365 6c66  row_array__(self
+00037b20: 2c20 7479 7065 3a20 4f70 7469 6f6e 616c  , type: Optional
+00037b30: 5b22 7061 2e44 6174 6154 7970 6522 5d20  ["pa.DataType"] 
+00037b40: 3d20 4e6f 6e65 2920 2d3e 2055 6e69 6f6e  = None) -> Union
+00037b50: 5b22 7061 2e41 7272 6179 222c 2022 7061  ["pa.Array", "pa
+00037b60: 2e43 6875 6e6b 6564 4172 7261 7922 5d3a  .ChunkedArray"]:
+00037b70: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00037b80: 2020 2020 2020 2049 6d70 6c65 6d65 6e74         Implement
+00037b90: 6174 696f 6e20 6f66 2074 6865 2060 605f  ation of the ``_
+00037ba0: 5f61 7272 6f77 5f61 7272 6179 5f5f 6060  _arrow_array__``
+00037bb0: 2070 726f 746f 636f 6c20 666f 7220 636f   protocol for co
+00037bc0: 6e76 6572 7369 6f6e 2074 6f20 6120 7079  nversion to a py
+00037bd0: 6172 726f 7720 6172 7261 792e 0d0a 0d0a  arrow array.....
+00037be0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00037bf0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+00037c00: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00037c10: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
+00037c20: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
+00037c30: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
+00037c40: 6f6e 650d 0a0d 0a20 2020 2020 2020 2052  one....        R
+00037c50: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00037c60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00037c70: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
+00037c80: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
+00037c90: 6441 7272 6179 0d0a 0d0a 2020 2020 2020  dArray....      
+00037ca0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+00037cb0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+00037cc0: 6874 7470 733a 2f2f 6172 726f 772e 6170  https://arrow.ap
+00037cd0: 6163 6865 2e6f 7267 2f64 6f63 732f 7079  ache.org/docs/py
+00037ce0: 7468 6f6e 2f65 7874 656e 6469 6e67 5f74  thon/extending_t
+00037cf0: 7970 6573 2e68 746d 6c23 636f 6e74 726f  ypes.html#contro
+00037d00: 6c6c 696e 672d 636f 6e76 6572 7369 6f6e  lling-conversion
+00037d10: 2d74 6f2d 7079 6172 726f 772d 6172 7261  -to-pyarrow-arra
+00037d20: 792d 7769 7468 2d74 6865 2d61 7272 6f77  y-with-the-arrow
+00037d30: 2d61 7272 6179 2d70 726f 746f 636f 6c0d  -array-protocol.
+00037d40: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00037d50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00037d60: 662e 746f 5f61 7272 6f77 2874 7970 653d  f.to_arrow(type=
+00037d70: 7479 7065 2c20 7072 6573 6572 7665 5f66  type, preserve_f
+00037d80: 6978 6564 5f62 7974 6573 3d46 616c 7365  ixed_bytes=False
+00037d90: 2c20 656d 7074 795f 7374 7269 6e67 735f  , empty_strings_
+00037da0: 746f 5f6e 756c 6c3d 5472 7565 290d 0a0d  to_null=True)...
+00037db0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00037dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00037dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00037de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00037df0: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
+00037e00: 7468 6f64 0d0a 2020 2020 6465 6620 7265  thod..    def re
+00037e10: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
+00037e20: 636c 732c 206e 616d 652c 2066 756e 6329  cls, name, func)
+00037e30: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00037e40: 2020 2020 2020 2020 5573 6564 2074 6f20          Used to 
+00037e50: 7265 6769 7374 6572 2066 756e 6374 696f  register functio
+00037e60: 6e73 2074 6f20 4661 7374 4172 7261 792e  ns to FastArray.
+00037e70: 0d0a 2020 2020 2020 2020 5573 6564 2062  ..        Used b
+00037e80: 7920 7274 5f66 6173 7461 7272 6179 6e75  y rt_fastarraynu
+00037e90: 6d62 610d 0a20 2020 2020 2020 2022 2222  mba..        """
+00037ea0: 0d0a 2020 2020 2020 2020 7365 7461 7474  ..        setatt
+00037eb0: 7228 636c 732c 206e 616d 652c 2066 756e  r(cls, name, fun
+00037ec0: 6329 0d0a 0d0a 2020 2020 6465 6620 6170  c)....    def ap
+00037ed0: 706c 795f 7363 6865 6d61 2873 656c 662c  ply_schema(self,
+00037ee0: 2073 6368 656d 6129 3a0d 0a20 2020 2020   schema):..     
+00037ef0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00037f00: 4170 706c 7920 6120 7363 6865 6d61 2063  Apply a schema c
+00037f10: 6f6e 7461 696e 696e 6720 6465 7363 7269  ontaining descri
+00037f20: 7074 6976 6520 696e 666f 726d 6174 696f  ptive informatio
+00037f30: 6e20 746f 2074 6865 2046 6173 7441 7272  n to the FastArr
+00037f40: 6179 0d0a 0d0a 2020 2020 2020 2020 3a70  ay....        :p
+00037f50: 6172 616d 2073 6368 656d 613a 2064 6963  aram schema: dic
+00037f60: 740d 0a20 2020 2020 2020 203a 7265 7475  t..        :retu
+00037f70: 726e 3a20 6469 6374 696f 6e61 7279 206f  rn: dictionary o
+00037f80: 6620 6465 7669 6174 696f 6e73 2066 726f  f deviations fro
+00037f90: 6d20 7468 6520 7363 6865 6d61 0d0a 2020  m the schema..  
+00037fa0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00037fb0: 2020 2066 726f 6d20 2e72 745f 6d65 7461     from .rt_meta
+00037fc0: 2069 6d70 6f72 7420 6170 706c 795f 7363   import apply_sc
+00037fd0: 6865 6d61 2061 7320 5f61 7070 6c79 5f73  hema as _apply_s
+00037fe0: 6368 656d 610d 0a0d 0a20 2020 2020 2020  chema....       
+00037ff0: 2072 6574 7572 6e20 5f61 7070 6c79 5f73   return _apply_s
+00038000: 6368 656d 6128 7365 6c66 2c20 7363 6865  chema(self, sche
+00038010: 6d61 290d 0a0d 0a20 2020 2064 6566 2069  ma)....    def i
+00038020: 6e66 6f28 7365 6c66 2c20 2a2a 6b77 6172  nfo(self, **kwar
+00038030: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
+00038040: 220d 0a20 2020 2020 2020 2050 7269 6e74  "..        Print
+00038050: 2061 2064 6573 6372 6970 7469 6f6e 206f   a description o
+00038060: 6620 7468 6520 4661 7374 4172 7261 7927  f the FastArray'
+00038070: 7320 636f 6e74 656e 7473 0d0a 2020 2020  s contents..    
+00038080: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00038090: 2066 726f 6d20 2e72 745f 6d65 7461 2069   from .rt_meta i
+000380a0: 6d70 6f72 7420 696e 666f 2061 7320 5f69  mport info as _i
+000380b0: 6e66 6f0d 0a0d 0a20 2020 2020 2020 2072  nfo....        r
+000380c0: 6574 7572 6e20 5f69 6e66 6f28 7365 6c66  eturn _info(self
+000380d0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+000380e0: 2020 2040 7072 6f70 6572 7479 0d0a 2020     @property..  
+000380f0: 2020 6465 6620 646f 6328 7365 6c66 293a    def doc(self):
+00038100: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00038110: 2020 2020 2020 2054 6865 2044 6f63 206f         The Doc o
+00038120: 626a 6563 7420 666f 7220 7468 6520 7374  bject for the st
+00038130: 7275 6374 7572 650d 0a20 2020 2020 2020  ructure..       
+00038140: 2022 2222 0d0a 2020 2020 2020 2020 6672   """..        fr
+00038150: 6f6d 202e 7274 5f6d 6574 6120 696d 706f  om .rt_meta impo
+00038160: 7274 2064 6f63 2061 7320 5f64 6f63 0d0a  rt doc as _doc..
+00038170: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00038180: 205f 646f 6328 7365 6c66 290d 0a0d 0a20   _doc(self).... 
+00038190: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
+000381a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 454e 4420  =========== END 
+000381b0: 4f46 2043 4c41 5353 2044 4546 494e 4954  OF CLASS DEFINIT
+000381c0: 494f 4e20 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ION ============
+000381d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000381e0: 3d3d 3d0d 0a0d 0a0d 0a23 202d 2d2d 2d2d  ===......# -----
+000381f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038220: 2d2d 2d2d 2d2d 0d0a 6465 6620 5f73 6574  ------..def _set
+00038230: 6661 7374 6172 7261 7976 6965 7728 6172  fastarrayview(ar
+00038240: 7229 3a0d 0a20 2020 2022 2222 0d0a 2020  r):..    """..  
+00038250: 2020 4361 6c6c 2066 726f 6d20 4350 5020    Call from CPP 
+00038260: 696e 746f 2070 7974 686f 6e20 746f 2066  into python to f
+00038270: 6c69 7020 6172 7261 7920 7669 6577 0d0a  lip array view..
+00038280: 2020 2020 2222 220d 0a20 2020 2069 6620      """..    if 
+00038290: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
+000382a0: 4661 7374 4172 7261 7929 3a0d 0a20 2020  FastArray):..   
+000382b0: 2020 2020 2069 6620 4661 7374 4172 7261       if FastArra
+000382c0: 792e 5665 7262 6f73 6520 3e20 323a 0d0a  y.Verbose > 2:..
+000382d0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000382e0: 7428 226e 6f20 6e65 6564 2074 6f20 7365  t("no need to se
+000382f0: 7466 6173 7461 7272 6179 7669 6577 222c  tfastarrayview",
+00038300: 2061 7272 2e64 7479 7065 2c20 6c65 6e28   arr.dtype, len(
+00038310: 6172 7229 290d 0a20 2020 2020 2020 2072  arr))..        r
+00038320: 6574 7572 6e20 6172 720d 0a0d 0a20 2020  eturn arr....   
+00038330: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
+00038340: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
+00038350: 2020 2020 7072 696e 7428 2273 6574 6661      print("setfa
+00038360: 7374 6172 7261 7976 6965 7722 2c20 6172  starrayview", ar
+00038370: 722e 6474 7970 652c 206c 656e 2861 7272  r.dtype, len(arr
+00038380: 2929 0d0a 0d0a 2020 2020 7265 7475 726e  ))....    return
+00038390: 2061 7272 2e76 6965 7728 4661 7374 4172   arr.view(FastAr
+000383a0: 7261 7929 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ray)......# ----
+000383b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000383c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000383d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000383e0: 2d2d 2d2d 2d2d 2d0d 0a64 6566 205f 7365  -------..def _se
+000383f0: 7466 6173 7461 7272 6179 7479 7065 2829  tfastarraytype()
+00038400: 3a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  :..    # -------
+00038410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038440: 2d2d 2d2d 0d0a 2020 2020 2320 6361 6c6c  ----..    # call
+00038450: 696e 6720 7468 6973 2066 756e 6374 696f  ing this functio
+00038460: 6e20 7769 6c6c 2066 6f72 6365 2066 6d20  n will force fm 
+00038470: 746f 2072 6574 7572 6e20 4661 7374 4172  to return FastAr
+00038480: 7261 7920 7375 6263 6c61 7373 0d0a 2020  ray subclass..  
+00038490: 2020 2320 7263 2e42 6173 6963 4d61 7468    # rc.BasicMath
+000384a0: 486f 6f6b 2846 6173 7441 7272 6179 2c20  Hook(FastArray, 
+000384b0: 6e70 2e6e 6461 7272 6179 290d 0a20 2020  np.ndarray)..   
+000384c0: 2023 2043 6f6d 696e 6720 6e65 7874 2062   # Coming next b
+000384d0: 7569 6c64 0d0a 2020 2020 6661 203d 206e  uild..    fa = n
+000384e0: 702e 6172 616e 6765 2831 292e 7669 6577  p.arange(1).view
+000384f0: 2846 6173 7441 7272 6179 290d 0a20 2020  (FastArray)..   
+00038500: 2072 632e 5365 7446 6173 7441 7272 6179   rc.SetFastArray
+00038510: 5479 7065 2866 612c 205f 7365 7466 6173  Type(fa, _setfas
+00038520: 7461 7272 6179 7669 6577 290d 0a20 2020  tarrayview)..   
+00038530: 2072 632e 4261 7369 634d 6174 6848 6f6f   rc.BasicMathHoo
+00038540: 6b28 6661 2c20 6661 2e5f 6e70 290d 0a0d  k(fa, fa._np)...
+00038550: 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ...# -----------
+00038560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038590: 0d0a 6465 6620 5f46 6978 7570 446f 6353  ..def _FixupDocS
+000385a0: 7472 696e 6773 2829 3a0d 0a20 2020 2022  trings():..    "
+000385b0: 2222 0d0a 2020 2020 4c6f 6164 2061 6c6c  ""..    Load all
+000385c0: 2074 6865 206d 656d 6265 7220 6675 6e63   the member func
+000385d0: 7469 6f6e 206f 6620 7468 6973 206d 6f64  tion of this mod
+000385e0: 756c 650d 0a20 2020 204c 6f61 6420 616c  ule..    Load al
+000385f0: 6c20 7468 6520 6d65 6d62 6572 2066 756e  l the member fun
+00038600: 6374 696f 6e73 206f 6620 7468 6520 6e70  ctions of the np
+00038610: 206d 6f64 756c 650d 0a20 2020 2049 6620   module..    If 
+00038620: 7765 2066 696e 6420 6120 6d61 7463 682c  we find a match,
+00038630: 2063 6f70 7920 6f76 6572 2074 6865 2064   copy over the d
+00038640: 6f63 2073 7472 696e 6773 0d0a 2020 2020  oc strings..    
+00038650: 2222 220d 0a20 2020 2069 6d70 6f72 7420  """..    import 
+00038660: 696e 7370 6563 740d 0a20 2020 2069 6d70  inspect..    imp
+00038670: 6f72 7420 7379 730d 0a0d 0a20 2020 206d  ort sys....    m
+00038680: 796d 6f64 756c 6520 3d20 7379 732e 6d6f  ymodule = sys.mo
+00038690: 6475 6c65 735b 5f5f 6e61 6d65 5f5f 5d0d  dules[__name__].
+000386a0: 0a20 2020 2061 6c6c 5f6d 7966 756e 6374  .    all_myfunct
+000386b0: 696f 6e73 203d 2069 6e73 7065 6374 2e67  ions = inspect.g
+000386c0: 6574 6d65 6d62 6572 7328 4661 7374 4172  etmembers(FastAr
+000386d0: 7261 792c 2069 6e73 7065 6374 2e69 7366  ray, inspect.isf
+000386e0: 756e 6374 696f 6e29 0d0a 0d0a 2020 2020  unction)....    
+000386f0: 7472 793a 0d0a 2020 2020 2020 2020 2320  try:..        # 
+00038700: 626f 7474 6c65 6e65 636b 2069 7320 6f70  bottleneck is op
+00038710: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
+00038720: 616c 6c5f 626e 6675 6e63 7469 6f6e 7320  all_bnfunctions 
+00038730: 3d20 696e 7370 6563 742e 6765 746d 656d  = inspect.getmem
+00038740: 6265 7273 2862 6e2c 2069 6e73 7065 6374  bers(bn, inspect
+00038750: 2e69 7366 756e 6374 696f 6e29 0d0a 2020  .isfunction)..  
+00038760: 2020 2020 2020 616c 6c5f 626e 6675 6e63        all_bnfunc
+00038770: 7469 6f6e 7320 2b3d 2069 6e73 7065 6374  tions += inspect
+00038780: 2e67 6574 6d65 6d62 6572 7328 626e 2c20  .getmembers(bn, 
+00038790: 696e 7370 6563 742e 6973 6275 696c 7469  inspect.isbuilti
+000387a0: 6e29 0d0a 0d0a 2020 2020 2020 2020 2320  n)....        # 
+000387b0: 6275 696c 6420 6469 6374 696f 6e61 7279  build dictionary
+000387c0: 206f 6620 626f 7474 6c65 6e65 636b 2064   of bottleneck d
+000387d0: 6f63 730d 0a20 2020 2020 2020 2062 6e64  ocs..        bnd
+000387e0: 6963 7420 3d20 7b7d 0d0a 2020 2020 2020  ict = {}..      
+000387f0: 2020 666f 7220 6675 6e63 7320 696e 2061    for funcs in a
+00038800: 6c6c 5f62 6e66 756e 6374 696f 6e73 3a0d  ll_bnfunctions:.
+00038810: 0a20 2020 2020 2020 2020 2020 2062 6e64  .            bnd
+00038820: 6963 745b 6675 6e63 735b 305d 5d20 3d20  ict[funcs[0]] = 
+00038830: 6675 6e63 735b 315d 0d0a 0d0a 2020 2020  funcs[1]....    
+00038840: 2020 2020 2320 6e6f 7720 666f 7220 6561      # now for ea
+00038850: 6368 2066 756e 6374 696f 6e20 7468 6174  ch function that
+00038860: 2068 6173 2061 6e20 626e 2066 6c61 766f   has an bn flavo
+00038870: 722c 2063 6f70 7920 6f76 6572 2074 6865  r, copy over the
+00038880: 2064 6f63 2073 7472 696e 6773 0d0a 2020   doc strings..  
+00038890: 2020 2020 2020 666f 7220 6675 6e63 7320        for funcs 
+000388a0: 696e 2061 6c6c 5f6d 7966 756e 6374 696f  in all_myfunctio
+000388b0: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
+000388c0: 2069 6620 2866 756e 6373 5b30 5d20 696e   if (funcs[0] in
+000388d0: 2062 6e64 6963 7429 2061 6e64 2028 6675   bndict) and (fu
+000388e0: 6e63 735b 315d 2e5f 5f64 6f63 5f5f 2069  ncs[1].__doc__ i
+000388f0: 7320 4e6f 6e65 293a 0d0a 2020 2020 2020  s None):..      
+00038900: 2020 2020 2020 2020 2020 6675 6e63 735b            funcs[
+00038910: 315d 2e5f 5f64 6f63 5f5f 203d 2062 6e64  1].__doc__ = bnd
+00038920: 6963 745b 6675 6e63 735b 305d 5d2e 5f5f  ict[funcs[0]].__
+00038930: 646f 635f 5f0d 0a20 2020 2065 7863 6570  doc__..    excep
+00038940: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+00038950: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+00038960: 2020 616c 6c5f 6e70 6675 6e63 7469 6f6e    all_npfunction
+00038970: 7320 3d20 5b66 756e 6320 666f 7220 6675  s = [func for fu
+00038980: 6e63 2069 6e20 696e 7370 6563 742e 6765  nc in inspect.ge
+00038990: 746d 656d 6265 7273 286e 702e 6e64 6172  tmembers(np.ndar
+000389a0: 7261 7929 2069 6620 6e6f 7420 6675 6e63  ray) if not func
+000389b0: 5b30 5d2e 7374 6172 7473 7769 7468 2822  [0].startswith("
+000389c0: 5f22 295d 0d0a 0d0a 2020 2020 2320 6275  _")]....    # bu
+000389d0: 696c 6420 6469 6374 696f 6e61 7279 206f  ild dictionary o
+000389e0: 6620 6e70 2e6e 6461 7272 6179 2064 6f63  f np.ndarray doc
+000389f0: 730d 0a20 2020 206e 7064 6963 7420 3d20  s..    npdict = 
+00038a00: 7b7d 0d0a 2020 2020 666f 7220 6675 6e63  {}..    for func
+00038a10: 7320 696e 2061 6c6c 5f6e 7066 756e 6374  s in all_npfunct
+00038a20: 696f 6e73 3a0d 0a20 2020 2020 2020 206e  ions:..        n
+00038a30: 7064 6963 745b 6675 6e63 735b 305d 5d20  pdict[funcs[0]] 
+00038a40: 3d20 6675 6e63 735b 315d 0d0a 0d0a 2020  = funcs[1]....  
+00038a50: 2020 2320 6e6f 7720 666f 7220 6561 6368    # now for each
+00038a60: 2066 756e 6374 696f 6e20 7468 6174 2068   function that h
+00038a70: 6173 2061 6e20 6e70 2066 6c61 766f 722c  as an np flavor,
+00038a80: 2063 6f70 7920 6f76 6572 2074 6865 2064   copy over the d
+00038a90: 6f63 2073 7472 696e 6773 0d0a 2020 2020  oc strings..    
+00038aa0: 666f 7220 6675 6e63 7320 696e 2061 6c6c  for funcs in all
+00038ab0: 5f6d 7966 756e 6374 696f 6e73 3a0d 0a20  _myfunctions:.. 
+00038ac0: 2020 2020 2020 2069 6620 2866 756e 6373         if (funcs
+00038ad0: 5b30 5d20 696e 206e 7064 6963 7429 2061  [0] in npdict) a
+00038ae0: 6e64 2028 6675 6e63 735b 315d 2e5f 5f64  nd (funcs[1].__d
+00038af0: 6f63 5f5f 2069 7320 4e6f 6e65 293a 0d0a  oc__ is None):..
+00038b00: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+00038b10: 735b 315d 2e5f 5f64 6f63 5f5f 203d 206e  s[1].__doc__ = n
+00038b20: 7064 6963 745b 6675 6e63 735b 305d 5d2e  pdict[funcs[0]].
+00038b30: 5f5f 646f 635f 5f0d 0a0d 0a20 2020 2023  __doc__....    #
+00038b40: 206e 6f77 2064 6f20 6a75 7374 2070 6c61   now do just pla
+00038b50: 696e 206e 700d 0a20 2020 2061 6c6c 5f6e  in np..    all_n
+00038b60: 7066 756e 6374 696f 6e73 203d 205b 6675  pfunctions = [fu
+00038b70: 6e63 2066 6f72 2066 756e 6320 696e 2069  nc for func in i
+00038b80: 6e73 7065 6374 2e67 6574 6d65 6d62 6572  nspect.getmember
+00038b90: 7328 6e70 2920 6966 2022 5f5f 2220 6e6f  s(np) if "__" no
+00038ba0: 7420 696e 2066 756e 6373 5b30 5d5d 0d0a  t in funcs[0]]..
+00038bb0: 0d0a 2020 2020 2320 6275 696c 6420 6469  ..    # build di
+00038bc0: 6374 696f 6e61 7279 206f 6620 6e70 2064  ctionary of np d
+00038bd0: 6f63 730d 0a20 2020 206e 7064 6963 7420  ocs..    npdict 
+00038be0: 3d20 7b7d 0d0a 2020 2020 666f 7220 6675  = {}..    for fu
+00038bf0: 6e63 7320 696e 2061 6c6c 5f6e 7066 756e  ncs in all_npfun
+00038c00: 6374 696f 6e73 3a0d 0a20 2020 2020 2020  ctions:..       
+00038c10: 2023 2070 7269 6e74 2822 6765 7474 696e   # print("gettin
+00038c20: 6720 646f 6320 7374 7269 6e67 2066 6f72  g doc string for
+00038c30: 2022 2c20 6675 6e63 735b 305d 290d 0a20   ", funcs[0]).. 
+00038c40: 2020 2020 2020 206e 7064 6963 745b 6675         npdict[fu
+00038c50: 6e63 735b 305d 5d20 3d20 6675 6e63 735b  ncs[0]] = funcs[
+00038c60: 315d 0d0a 0d0a 2020 2020 2320 6e6f 7720  1]....    # now 
+00038c70: 666f 7220 6561 6368 2066 756e 6374 696f  for each functio
+00038c80: 6e20 7468 6174 2068 6173 2061 6e20 6e70  n that has an np
+00038c90: 2066 6c61 766f 722c 2063 6f70 7920 6f76   flavor, copy ov
+00038ca0: 6572 2074 6865 2064 6f63 2073 7472 696e  er the doc strin
+00038cb0: 6773 0d0a 2020 2020 666f 7220 6675 6e63  gs..    for func
+00038cc0: 7320 696e 2061 6c6c 5f6d 7966 756e 6374  s in all_myfunct
+00038cd0: 696f 6e73 3a0d 0a20 2020 2020 2020 2069  ions:..        i
+00038ce0: 6620 2866 756e 6373 5b30 5d20 696e 206e  f (funcs[0] in n
+00038cf0: 7064 6963 7429 2061 6e64 2028 6675 6e63  pdict) and (func
+00038d00: 735b 315d 2e5f 5f64 6f63 5f5f 2069 7320  s[1].__doc__ is 
+00038d10: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+00038d20: 2020 2020 6675 6e63 735b 315d 2e5f 5f64      funcs[1].__d
+00038d30: 6f63 5f5f 203d 206e 7064 6963 745b 6675  oc__ = npdict[fu
+00038d40: 6e63 735b 305d 5d2e 5f5f 646f 635f 5f0d  ncs[0]].__doc__.
+00038d50: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
+00038d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038d90: 2d0d 0a63 6c61 7373 2054 6872 6561 6469  -..class Threadi
+00038da0: 6e67 3a0d 0a20 2020 2040 7374 6174 6963  ng:..    @static
+00038db0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00038dc0: 6f6e 2829 3a0d 0a20 2020 2020 2020 2022  on():..        "
+00038dd0: 2222 0d0a 2020 2020 2020 2020 5475 726e  ""..        Turn
+00038de0: 2072 6970 7461 626c 6520 7468 7265 6164   riptable thread
+00038df0: 696e 6720 6f6e 2e0d 0a20 2020 2020 2020  ing on...       
+00038e00: 2055 7365 6420 6f6e 6c79 2077 6865 6e20   Used only when 
+00038e10: 7269 7074 6162 6c65 2074 6872 6561 6469  riptable threadi
+00038e20: 6e67 2077 6173 2074 7572 6e65 6420 6f66  ng was turned of
+00038e30: 662e 0d0a 0d0a 2020 2020 2020 2020 4578  f.....        Ex
+00038e40: 616d 706c 650d 0a20 2020 2020 2020 202d  ample..        -
+00038e50: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00038e60: 613d 7274 2e61 7261 6e67 6528 315f 3030  a=rt.arange(1_00
+00038e70: 305f 3030 290d 0a20 2020 2020 2020 2054  0_00)..        T
+00038e80: 6872 6561 6469 6e67 2e6f 6666 2829 0d0a  hreading.off()..
+00038e90: 2020 2020 2020 2020 2574 696d 6520 612b          %time a+
+00038ea0: 3d31 0d0a 2020 2020 2020 2020 5468 7265  =1..        Thre
+00038eb0: 6164 696e 672e 6f6e 2829 0d0a 2020 2020  ading.on()..    
+00038ec0: 2020 2020 2574 696d 6520 612b 3d31 0d0a      %time a+=1..
+00038ed0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00038ee0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00038ef0: 2d2d 0d0a 2020 2020 2020 2020 5072 6576  --..        Prev
+00038f00: 696f 7573 6c79 2077 6865 7468 6572 2074  iously whether t
+00038f10: 6872 6561 6469 6e67 2077 6173 206f 6e20  hreading was on 
+00038f20: 6f72 206e 6f74 2e20 3020 6f72 2031 2e20  or not. 0 or 1. 
+00038f30: 303d 7468 7265 6164 696e 6720 7761 7320  0=threading was 
+00038f40: 6f66 6620 6265 666f 7265 2e0d 0a0d 0a20  off before..... 
+00038f50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00038f60: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+00038f70: 7272 6179 2e5f 544f 4e28 290d 0a0d 0a20  rray._TON().... 
+00038f80: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00038f90: 0d0a 2020 2020 6465 6620 6f66 6628 293a  ..    def off():
+00038fa0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00038fb0: 2020 2020 2020 2054 7572 6e20 7269 7074         Turn ript
+00038fc0: 6162 6c65 2074 6872 6561 6469 6e67 206f  able threading o
+00038fd0: 6666 2e0d 0a20 2020 2020 2020 2055 7365  ff...        Use
+00038fe0: 6675 6c20 666f 7220 7768 656e 2074 6865  ful for when the
+00038ff0: 2073 7973 7465 6d20 6861 7320 6f74 6865   system has othe
+00039000: 7220 7072 6f63 6573 7365 7320 7573 696e  r processes usin
+00039010: 6720 6f74 6865 7220 7468 7265 6164 730d  g other threads.
+00039020: 0a20 2020 2020 2020 206f 7220 746f 206c  .        or to l
+00039030: 696d 6974 2074 6872 6561 6469 6e67 2072  imit threading r
+00039040: 6573 6f75 7263 6573 2e0d 0a0d 0a20 2020  esources.....   
+00039050: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
+00039060: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00039070: 2020 2020 2020 2061 3d72 742e 6172 616e         a=rt.aran
+00039080: 6765 2831 5f30 3030 5f30 3029 0d0a 2020  ge(1_000_00)..  
+00039090: 2020 2020 2020 5468 7265 6164 696e 672e        Threading.
+000390a0: 6f66 6628 290d 0a20 2020 2020 2020 2025  off()..        %
+000390b0: 7469 6d65 2061 2b3d 310d 0a20 2020 2020  time a+=1..     
+000390c0: 2020 2054 6872 6561 6469 6e67 2e6f 6e28     Threading.on(
+000390d0: 290d 0a20 2020 2020 2020 2025 7469 6d65  )..        %time
+000390e0: 2061 2b3d 310d 0a0d 0a20 2020 2020 2020   a+=1....       
+000390f0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+00039100: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+00039110: 2020 2050 7265 7669 6f75 736c 7920 7768     Previously wh
+00039120: 6574 6865 7220 7468 7265 6164 696e 6720  ether threading 
+00039130: 7761 7320 6f6e 206f 7220 6e6f 742e 2030  was on or not. 0
+00039140: 206f 7220 312e 2030 3d74 6872 6561 6469   or 1. 0=threadi
+00039150: 6e67 2077 6173 206f 6666 2062 6566 6f72  ng was off befor
+00039160: 652e 0d0a 2020 2020 2020 2020 2222 220d  e...        """.
+00039170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00039180: 4661 7374 4172 7261 792e 5f54 4f46 4628  FastArray._TOFF(
+00039190: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+000391a0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+000391b0: 7468 7265 6164 7328 7468 7265 6164 636f  threads(threadco
+000391c0: 756e 7429 3a0d 0a20 2020 2020 2020 2022  unt):..        "
+000391d0: 2222 0d0a 2020 2020 2020 2020 5365 7420  ""..        Set 
+000391e0: 686f 7720 6d61 6e79 2077 6f72 6b65 7220  how many worker 
+000391f0: 7468 7265 6164 7320 7269 7074 6162 6c65  threads riptable
+00039200: 2063 616e 2075 7365 2e0d 0a20 2020 2020   can use...     
+00039210: 2020 204f 6674 656e 2064 6566 6175 6c74     Often default
+00039220: 7320 746f 2031 3220 616e 6420 6361 6e6e  s to 12 and cann
+00039230: 6f74 2062 6520 7365 7420 6265 6c6f 7720  ot be set below 
+00039240: 3120 6f72 203e 2033 312e 0d0a 0d0a 2020  1 or > 31.....  
+00039250: 2020 2020 2020 546f 2074 7572 6e20 7269        To turn ri
+00039260: 7074 6162 6c65 2074 6872 6561 6469 6e67  ptable threading
+00039270: 206f 6666 2063 6f6d 706c 6574 656c 7920   off completely 
+00039280: 7573 6520 5468 7265 6164 696e 672e 6f66  use Threading.of
+00039290: 6628 290d 0a20 2020 2020 2020 2055 7365  f()..        Use
+000392a0: 6675 6c20 666f 7220 7768 656e 2074 6865  ful for when the
+000392b0: 2073 7973 7465 6d20 6861 7320 6f74 6865   system has othe
+000392c0: 7220 7072 6f63 6573 7365 7320 7573 696e  r processes usin
+000392d0: 6720 6f74 6865 7220 7468 7265 6164 730d  g other threads.
+000392e0: 0a20 2020 2020 2020 206f 7220 746f 206c  .        or to l
+000392f0: 696d 6974 2074 6872 6561 6469 6e67 2072  imit threading r
+00039300: 6573 6f75 7263 6573 2e0d 0a0d 0a20 2020  esources.....   
+00039310: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
+00039320: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00039330: 2020 2020 2020 2054 6872 6561 6469 6e67         Threading
+00039340: 2e74 6872 6561 6473 2838 290d 0a0d 0a20  .threads(8).... 
+00039350: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00039360: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00039370: 0a20 2020 2020 2020 206e 756d 6265 7220  .        number 
+00039380: 6f66 2074 6872 6561 6473 2070 7265 7669  of threads previ
+00039390: 6f75 736c 7920 7573 6564 0d0a 2020 2020  ously used..    
+000393a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000393b0: 2072 6574 7572 6e20 7263 2e53 6574 5468   return rc.SetTh
+000393c0: 7265 6164 5761 6b65 5570 2874 6872 6561  readWakeUp(threa
+000393d0: 6463 6f75 6e74 290d 0a0d 0a0d 0a23 202d  dcount)......# -
+000393e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000393f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039410: 2d2d 2d2d 2d2d 2d2d 2d0d 0a63 6c61 7373  ---------..class
+00039420: 2052 6563 7963 6c65 3a0d 0a20 2020 2040   Recycle:..    @
+00039430: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+00039440: 2020 6465 6620 6f6e 2829 3a0d 0a20 2020    def on():..   
+00039450: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00039460: 2020 5475 726e 2072 6970 7461 626c 6520    Turn riptable 
+00039470: 7265 6379 636c 696e 6720 6f6e 2e0d 0a20  recycling on... 
+00039480: 2020 2020 2020 2055 7365 6420 6f6e 6c79         Used only
+00039490: 2077 6865 6e20 7269 7074 6162 6c65 2072   when riptable r
+000394a0: 6563 7963 6c69 6e67 2077 6173 2074 7572  ecycling was tur
+000394b0: 6e65 6420 6f66 662e 0d0a 0d0a 2020 2020  ned off.....    
+000394c0: 2020 2020 4578 616d 706c 650d 0a20 2020      Example..   
+000394d0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+000394e0: 2020 2020 2020 613d 6172 616e 6765 2831        a=arange(1
+000394f0: 5f30 3030 5f30 3029 0d0a 2020 2020 2020  _000_00)..      
+00039500: 2020 5265 6379 636c 652e 6f66 6628 290d    Recycle.off().
+00039510: 0a20 2020 2020 2020 2025 7469 6d65 6974  .        %timeit
+00039520: 2061 3d61 202b 2031 0d0a 2020 2020 2020   a=a + 1..      
+00039530: 2020 5265 6379 636c 652e 6f6e 2829 0d0a    Recycle.on()..
+00039540: 2020 2020 2020 2020 2574 696d 6569 7420          %timeit 
+00039550: 613d 6120 2b20 310d 0a0d 0a20 2020 2020  a=a + 1....     
+00039560: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00039570: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
+00039580: 2e5f 524f 4e28 290d 0a0d 0a20 2020 2040  ._RON()....    @
+00039590: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+000395a0: 2020 6465 6620 6f66 6628 293a 0d0a 2020    def off():..  
+000395b0: 2020 2020 2020 7265 7475 726e 2046 6173        return Fas
+000395c0: 7441 7272 6179 2e5f 524f 4646 2829 0d0a  tArray._ROFF()..
+000395d0: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+000395e0: 686f 640d 0a20 2020 2064 6566 206e 6f77  hod..    def now
+000395f0: 2874 696d 656f 7574 3a20 696e 7420 3d20  (timeout: int = 
+00039600: 3029 3a0d 0a20 2020 2020 2020 2022 2222  0):..        """
+00039610: 0d0a 2020 2020 2020 2020 5061 7373 2074  ..        Pass t
+00039620: 6865 2067 6172 6261 6765 2063 6f6c 6c65  he garbage colle
+00039630: 6374 6f72 2074 696d 656f 7574 2076 616c  ctor timeout val
+00039640: 7565 2074 6f20 636c 6561 6e75 702e 0d0a  ue to cleanup...
+00039650: 2020 2020 2020 2020 416c 736f 2063 616c          Also cal
+00039660: 6c73 2074 6865 2070 7974 686f 6e20 6761  ls the python ga
+00039670: 7262 6167 6520 636f 6c6c 6563 746f 722e  rbage collector.
+00039680: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+00039690: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+000396a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000396b0: 2020 2020 7469 6d65 6f75 743a 2064 6566      timeout: def
+000396c0: 6175 6c74 2074 6f20 302e 2020 3020 7769  ault to 0.  0 wi
+000396d0: 6c6c 206e 6f74 2073 6574 2061 2074 696d  ll not set a tim
+000396e0: 656f 7574 0d0a 0d0a 2020 2020 2020 2020  eout....        
+000396f0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00039700: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00039710: 2020 746f 7461 6c20 6172 7261 7973 2064    total arrays d
+00039720: 656c 6574 6564 0d0a 2020 2020 2020 2020  eleted..        
+00039730: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
+00039740: 6f72 7420 6763 0d0a 0d0a 2020 2020 2020  ort gc....      
+00039750: 2020 6763 2e63 6f6c 6c65 6374 2829 0d0a    gc.collect()..
+00039760: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00039770: 2072 632e 5265 6379 636c 6547 6172 6261   rc.RecycleGarba
+00039780: 6765 436f 6c6c 6563 744e 6f77 2874 696d  geCollectNow(tim
+00039790: 656f 7574 295b 2254 6f74 616c 4465 6c65  eout)["TotalDele
+000397a0: 7465 6422 5d0d 0a20 2020 2020 2020 2069  ted"]..        i
+000397b0: 6620 7265 7375 6c74 203e 2030 3a0d 0a20  f result > 0:.. 
+000397c0: 2020 2020 2020 2020 2020 2072 632e 5265             rc.Re
+000397d0: 6379 636c 6547 6172 6261 6765 436f 6c6c  cycleGarbageColl
+000397e0: 6563 744e 6f77 2874 696d 656f 7574 290d  ectNow(timeout).
+000397f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00039800: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
+00039810: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00039820: 2064 6566 2074 696d 656f 7574 2874 696d   def timeout(tim
+00039830: 656f 7574 3a20 696e 7420 3d20 3130 3029  eout: int = 100)
+00039840: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00039850: 2020 2020 2020 2020 5061 7373 2074 6865          Pass the
+00039860: 2067 6172 6261 6765 2063 6f6c 6c65 6374   garbage collect
+00039870: 6f72 2074 696d 656f 7574 2076 616c 7565  or timeout value
+00039880: 2074 6f20 6578 7069 7265 2e0d 0a20 2020   to expire...   
+00039890: 2020 2020 2054 6865 2074 696d 656f 7574       The timeout
+000398a0: 2076 616c 7565 2069 7320 726f 7567 686c   value is roughl
+000398b0: 7920 696e 2032 2f35 2073 6563 732e 0d0a  y in 2/5 secs...
+000398c0: 2020 2020 2020 2020 4120 7661 6c75 6520          A value 
+000398d0: 6f66 2031 3030 2069 7320 7573 7561 6c6c  of 100 is usuall
+000398e0: 7920 6162 6f75 7420 3430 2073 6563 6f6e  y about 40 secon
+000398f0: 6473 2e0d 0a20 2020 2020 2020 2049 6620  ds...        If 
+00039900: 616e 2061 7272 6179 2068 6173 206e 6f74  an array has not
+00039910: 2062 6565 6e20 7265 7573 6564 2062 7920   been reused by 
+00039920: 7468 6520 7469 6d65 6f75 742c 2069 7420  the timeout, it 
+00039930: 6973 2070 6572 6d61 6e65 6e74 6c79 2064  is permanently d
+00039940: 656c 6574 6564 2e0d 0a0d 0a20 2020 2020  eleted.....     
+00039950: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+00039960: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+00039970: 2020 2020 2070 7265 7669 6f75 7320 7469       previous ti
+00039980: 6d65 7370 616e 0d0a 2020 2020 2020 2020  mespan..        
+00039990: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+000399a0: 7572 6e20 7263 2e52 6563 7963 6c65 5365  urn rc.RecycleSe
+000399b0: 7447 6172 6261 6765 436f 6c6c 6563 7454  tGarbageCollectT
+000399c0: 696d 656f 7574 2874 696d 656f 7574 290d  imeout(timeout).
+000399d0: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
+000399e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000399f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039a10: 2d0d 0a63 6c61 7373 204c 6564 6765 723a  -..class Ledger:
+00039a20: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+00039a30: 686f 640d 0a20 2020 2064 6566 206f 6e28  hod..    def on(
+00039a40: 293a 0d0a 2020 2020 2020 2020 2222 2254  ):..        """T
+00039a50: 7572 6e20 7468 6520 6d61 7468 206c 6564  urn the math led
+00039a60: 6765 7220 6f6e 2074 6f20 7265 636f 7264  ger on to record
+00039a70: 2061 6c6c 2061 7272 6179 206d 6174 6820   all array math 
+00039a80: 726f 7574 696e 6573 2222 220d 0a20 2020  routines"""..   
+00039a90: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
+00039aa0: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
+00039ab0: 6765 722e 5f4c 6564 6765 724f 6e28 290d  ger._LedgerOn().
+00039ac0: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00039ad0: 7468 6f64 0d0a 2020 2020 6465 6620 6f66  thod..    def of
+00039ae0: 6628 293a 0d0a 2020 2020 2020 2020 2222  f():..        ""
+00039af0: 2254 7572 6e20 7468 6520 6d61 7468 206c  "Turn the math l
+00039b00: 6564 6765 7220 6f66 6622 2222 0d0a 2020  edger off"""..  
+00039b10: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+00039b20: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+00039b30: 6467 6572 2e5f 4c65 6467 6572 4f66 6628  dger._LedgerOff(
+00039b40: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00039b50: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00039b60: 6475 6d70 2864 6174 6173 6574 3d54 7275  dump(dataset=Tru
+00039b70: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+00039b80: 5072 696e 7420 6f75 7420 7468 6520 6d61  Print out the ma
+00039b90: 7468 206c 6564 6765 7222 2222 0d0a 2020  th ledger"""..  
+00039ba0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+00039bb0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+00039bc0: 6467 6572 2e5f 4c65 6467 6572 4475 6d70  dger._LedgerDump
+00039bd0: 2864 6174 6173 6574 3d64 6174 6173 6574  (dataset=dataset
+00039be0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00039bf0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00039c00: 746f 5f66 696c 6528 6669 6c65 6e61 6d65  to_file(filename
+00039c10: 293a 0d0a 2020 2020 2020 2020 2222 2253  ):..        """S
+00039c20: 6176 6520 7468 6520 6d61 7468 206c 6564  ave the math led
+00039c30: 6765 7220 746f 2061 2066 696c 6522 2222  ger to a file"""
+00039c40: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00039c50: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+00039c60: 7468 4c65 6467 6572 2e5f 4c65 6467 6572  thLedger._Ledger
+00039c70: 4475 6d70 4669 6c65 2866 696c 656e 616d  DumpFile(filenam
+00039c80: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
+00039c90: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
+00039ca0: 2063 6c65 6172 2829 3a0d 0a20 2020 2020   clear():..     
+00039cb0: 2020 2022 2222 436c 6561 7220 616c 6c20     """Clear all 
+00039cc0: 7468 6520 656e 7472 6965 7320 696e 2074  the entries in t
+00039cd0: 6865 206d 6174 6820 6c65 6467 6572 2222  he math ledger""
+00039ce0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00039cf0: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
+00039d00: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
+00039d10: 7243 6c65 6172 2829 0d0a 0d0a 0d0a 2320  rClear()......# 
+00039d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039d50: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 7468  ----------..# th
+00039d60: 6973 2069 7320 6361 6c6c 6564 2077 6865  is is called whe
+00039d70: 6e20 7468 6520 6d6f 6475 6c65 2069 7320  n the module is 
+00039d80: 6c6f 6164 6564 0d0a 5f46 6978 7570 446f  loaded.._FixupDo
+00039d90: 6353 7472 696e 6773 2829 0d0a 0d0a 2320  cStrings()....# 
+00039da0: 4e4f 5445 3a20 4b65 6570 2074 6869 7320  NOTE: Keep this 
+00039db0: 6174 2074 6865 2065 6e64 206f 6620 7468  at the end of th
+00039dc0: 6520 6669 6c65 0d0a 2320 2d2d 2d2d 2d2d  e file..# ------
+00039dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039e00: 2d2d 2d2d 2d0d 0a23 2063 616c 6c69 6e67  -----..# calling
+00039e10: 2074 6869 7320 6675 6e63 7469 6f6e 2077   this function w
+00039e20: 696c 6c20 666f 7263 6520 666d 2074 6f20  ill force fm to 
+00039e30: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
+00039e40: 2073 7562 636c 6173 730d 0a5f 7365 7466   subclass.._setf
+00039e50: 6173 7461 7272 6179 7479 7065 2829 0d0a  astarraytype()..
+00039e60: 0d0a 5479 7065 5265 6769 7374 6572 2e46  ..TypeRegister.F
+00039e70: 6173 7441 7272 6179 203d 2046 6173 7441  astArray = FastA
+00039e80: 7272 6179 0d0a 0d0a 4661 7374 4172 7261  rray....FastArra
+00039e90: 792e 7265 6769 7374 6572 5f66 756e 6374  y.register_funct
+00039ea0: 696f 6e28 2264 6573 6372 6962 6522 2c20  ion("describe", 
+00039eb0: 6465 7363 7269 6265 290d 0a              describe)..
```

### Comparing `riptable-1.6.9/riptable/rt_fastarraynumba.py` & `riptable-1.7.0/riptable/rt_fastarraynumba.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_groupby.py` & `riptable-1.7.0/riptable/rt_groupby.py`

 * *Files 2% similar despite different names*

```diff
@@ -348,14 +348,55 @@
             return self._possibly_transform(gb_ds, label_keys=keychain.keys(), **kwargs)
 
     # ---------------------------------------------------------------
     def count(self, **kwargs):
         """Compute count of group"""
         return self.grouping.count(keychain=self.gb_keychain, **kwargs)
 
+    # ---------------------------------------------------------------
+    def nth(self, n: int = 1):
+        """
+        Select the nth row from each group.
+
+        Parameters
+        ----------
+        n : int
+            A single nth value for the row
+
+        Examples
+        --------
+        >>> ds = rt.Dataset({'A': [1, 1, 2, 1, 2],
+        ...                  'B': [np.nan, 2, 3, 4, 5]})
+        >>> g = ds.groupby('A')
+        >>> g.nth(0)
+        *A      B
+        --   ----
+        1    nan
+        2   3.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 32.0 B
+
+        >>> g.nth(1)
+        *A      B
+        --   ----
+        1  2.00
+        2  5.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 32.0 B
+
+        >>> g.nth(-1)
+        *A      B
+        --   ----
+        1  4.00
+        2  5.00
+        <BLANKLINE>
+        [2 rows x 2 columns] total bytes: 32.0 B
+        """
+        return super()._nth(n=n)
+
     ## ------------------------------------------------------------
     def __getattr__(self, name):
         """
         __getattr__ is hit when '.' is used to trim a single column.
 
         Examples
         --------
```

### Comparing `riptable-1.6.9/riptable/rt_groupbykeys.py` & `riptable-1.7.0/riptable/rt_groupbykeys.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_groupbynumba.py` & `riptable-1.7.0/riptable/rt_groupbynumba.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_groupbyops.py` & `riptable-1.7.0/riptable/rt_groupbyops.py`

 * *Files 1% similar despite different names*

```diff
@@ -17,15 +17,15 @@
     GB_STRING_ALLOWED,
     ApplyType,
     TypeRegister,
 )
 from .rt_groupbykeys import GroupByKeys
 from .rt_grouping import Grouping
 from .rt_misc import _use_autocomplete_placeholder
-from .rt_numpy import bool_to_fancy, empty_like, gb_np_quantile, groupbyhash, zeros_like
+from .rt_numpy import bool_to_fancy, empty_like, gb_np_quantile, groupbyhash, zeros_like, zeros
 from .rt_utils import rolling_quantile_funcParam
 
 if TYPE_CHECKING:
     from .rt_dataset import Dataset
     from .rt_fastarray import FastArray
 
 
@@ -953,14 +953,16 @@
         --------
         >>> rt.Cat(np.random.choice(['SPY','IBM'], 100)).null(showfilter=True)
         """
         return self.grouping._finalize_dataset(
             TypeRegister.Dataset({}), self.gb_keychain, None, addkeys=True, showfilter=showfilter
         )
 
+    _USE_FAST_COUNT_UNIQUES = True  # set to False to restore original implementation.
+
     # ---------------------------------------------------------------
     def count_uniques(self, *args, **kwargs):
         """
         Compute unique count of group
 
         Returns
         -------
@@ -980,32 +982,57 @@
         *Symbol   *Exchange   TradeSize   TradePrice
         -------   ---------   ---------   ----------
         IBM       NYSE                2            2
         .         AMEX                2            3
         SPY       AMEX                3            2
         .         NYSE                1            2
         """
+
+        if isinstance(self, TypeRegister.Accum2):
+            raise NotImplementedError("May I recommend using a multicat and then pivoting?")
+
         origdict, user_args, tups = self._prepare_gb_data("count_uniques", None, *args, **kwargs)
 
         label_keys = self.gb_keychain
         g = self.grouping
 
-        filter = kwargs["filter"] if "filter" in kwargs else None
-        transform = kwargs["transform"] if "transform" in kwargs else None
+        if GroupByOps._USE_FAST_COUNT_UNIQUES:
+            filter = kwargs.get("filter")
+            transform = kwargs.get("transform")
+            showfilter = kwargs.get("showfilter")
+
+            gbk = TypeRegister.Dataset(label_keys.gbkeys)
+            newdict = {}
+            for colname, arr in origdict.items():
+                if colname not in gbk:
+                    mcat = TypeRegister.Categorical([g.catinstance, arr], filter=filter)
+                    if transform:
+                        result = self.nansum(mcat.first_bool, transform=transform)[-1]
+                    else:
+                        count = mcat.null()[0].count()
+                        result = zeros(len(gbk) + 1, dtype=int)
+                        result[count[0]] = count.Count
+                        if not showfilter:
+                            result = result[1:]
+                    newdict[colname] = result
+
+        else:  # slow code
+            # get way to make groups contiguous
+            igroup = g.igroup
+            cutoffs = g.ncountgroup.cumsum(dtype=np.int64)[1:]
+            newdict = {}
+            for colname, arr in origdict.items():
+                gbk = label_keys.gbkeys
+                if colname not in gbk:
+                    ifirstkey = groupbyhash(arr[igroup], cutoffs=cutoffs)["iFirstKey"][1]
+                    # the cutoffs will generate iFirstKey cutoffs that help us determine the unique counts
+                    result = ifirstkey.diff()
+                    result[0] = ifirstkey[0]
+                    newdict[colname] = result
 
-        newdict = {}
-        for colname, arr in origdict.items():
-            gbk = label_keys.gbkeys
-            if colname not in gbk:
-                mcat = TypeRegister.Categorical([self, arr], filter=filter)
-                if transform:
-                    result = self.nansum(mcat.first_bool, transform=transform)[0]
-                else:
-                    result = mcat.null()[0].count().Count
-                newdict[colname] = result
         return g._finalize_dataset(newdict, label_keys, None, addkeys=True, **kwargs)
 
     def _gb_keyword_wrapper(
         self,
         filter=None,
         transform=False,
         showfilter=False,
@@ -1076,15 +1103,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1145,15 +1172,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1213,15 +1240,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1281,15 +1308,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1349,15 +1376,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1421,15 +1448,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1712,15 +1739,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1783,15 +1810,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1856,15 +1883,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1924,15 +1951,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -1992,15 +2019,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2060,15 +2087,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2128,15 +2155,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2196,15 +2223,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2264,15 +2291,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2364,15 +2391,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2435,15 +2462,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2506,15 +2533,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2578,15 +2605,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2646,15 +2673,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2718,15 +2745,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -2788,15 +2815,15 @@
         transform : bool
             If transform = True, the output will have the same shape as `args`.
             If transform = False, the output will typically have the same shape
             as the categorical.
         showfilter : bool
             If showfilter is True, there will be an extra row in the output
             representing the GroupBy Operation applied to all those elements that
-            were filered out.
+            were filtered out.
         col_idx : str, list of str, optional
             If the input is a Dataset, col_idx specifies which columns to keep.
         dataset : Dataset, optional
             If a dataset is specified, the GroupBy Operation will also be applied to
             the dataset. If there is an `args` argument and dataset is specified then
             the result will be appended to the dataset.
         return_all : bool
@@ -3369,56 +3396,21 @@
         Provide resampling when using a TimeGrouper
         Return a new grouper with our resampler appended
         """
         raise NotImplementedError
         # from pandas.core.resample import get_resampler_for_grouping
         # return get_resampler_for_grouping(self, rule, *args, **kwargs)
 
-    # -------------------------------------------------------
-    def nth(self, *args, n=1, **kwargs):
-        """
-        Take the nth row from each group if `n` is an int.
-
-        Parameters
-        ----------
-        n : int
-            a single nth value for the row
+    @abstractmethod
+    def nth(self, *args, **kwargs):
+        pass
 
-        Examples
-        --------
-        >>> df = rt.Dataset({'A': [1, 1, 2, 1, 2],
-        ...                    'B': [np.nan, 2, 3, 4, 5]}, columns=['A', 'B'])
-        >>> g = df.groupby('A')
-        >>> g.nth(0)
-             B
-        A
-        1  NaN
-        2  3.0
-
-        >>> g.nth(1)
-             B
-        A
-        1  2.0
-        2  5.0
-
-        >>> g.nth(-1)
-             B
-        A
-        1  4.0
-        2  5.0
-
-        >>> g.nth([0, 1])
-             B
-        A
-        1  NaN
-        1  2.0
-        2  3.0
-        2  5.0
-        """
-        return self._calculate_all(GB_FUNCTIONS.GB_NTH, *args, func_param=(n), **kwargs)
+    # -------------------------------------------------------
+    def _nth(self, *args, n: int = 1, **kwargs):
+        return self._calculate_all(GB_FUNCTIONS.GB_NTH, *args, func_param=n, **kwargs)
 
     ##-------------------------------------------------------
     def diff(self, period=1, **kwargs):
         """rolling diff for each group
 
         Parameters
         ----------
```

### Comparing `riptable-1.6.9/riptable/rt_grouping.py` & `riptable-1.7.0/riptable/rt_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_hstack.py` & `riptable-1.7.0/riptable/rt_hstack.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_imatrix.py` & `riptable-1.7.0/riptable/rt_imatrix.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_io.py` & `riptable-1.7.0/riptable/rt_io.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_itemcontainer.py` & `riptable-1.7.0/riptable/rt_itemcontainer.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_ledger.py` & `riptable-1.7.0/riptable/rt_ledger.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_matplotlib.py` & `riptable-1.7.0/riptable/rt_matplotlib.py`

 * *Files 0% similar despite different names*

```diff
@@ -140,15 +140,15 @@
     def get_aligned(self):
         aligned = self.tz.localize(self.start_local.replace(microsecond=0, tzinfo=None))
         return aligned
 
     def make_formats(self):
         if len(self.second_aligned_ticks) == 0:
             first_tick = self.ticks_local[0]
-            self.offset_local = first_tick.replace(second=0, microsecond=0)
+            self.offset_local = first_tick.replace(microsecond=0)
             self.tick_format = "%fus"
             self.offset_format = "%Y-%m-%d %H:%M:%S"
 
         elif len(self.second_aligned_ticks) == 1:
             self.offset_local = self.second_aligned_ticks[0]
             self.tick_format = "%fus"
             self.offset_format = "%Y-%m-%d %H:%M:%S"
```

### Comparing `riptable-1.6.9/riptable/rt_merge.py` & `riptable-1.7.0/riptable/rt_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_merge_asof.py` & `riptable-1.7.0/riptable/rt_merge_asof.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_meta.py` & `riptable-1.7.0/riptable/rt_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_misc.py` & `riptable-1.7.0/riptable/rt_misc.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_mlutils.py` & `riptable-1.7.0/riptable/rt_mlutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_multiset.py` & `riptable-1.7.0/riptable/rt_multiset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_numpy.py` & `riptable-1.7.0/riptable/rt_numpy.py`

 * *Files 0% similar despite different names*

```diff
@@ -5237,33 +5237,44 @@
     if lenbool == 0:
         raise ValueError(f"Nothing passed")
 
     # check if nothing to do because just one boolean array in list
     if lenbool == 1:
         return bool_list[0]
 
-    # check all boolean arrays are same size - cpp code seems to fail
-    size = len(bool_list[0])
-    for i in range(lenbool):
-        if len(bool_list[i]) != size:
-            raise ValueError(f"Boolean arrays must be the same length")
-
     # we could support all int types here as well
     dtype = 0
     for v in bool_list:
-        dtype += v.dtype.num
+        # allow for scalar bool, as well as bool arrays.
+        dtype += 0 if isinstance(v, bool) else v.dtype.num
     if dtype != 0:
         raise TypeError(f"Must all be boolean types")
 
     # we have at least two items
     # grabbing the func pointer speeds things up in testing
-    func = TypeRegister.MathLedger._BASICMATH_TWO_INPUTS
+    ledgerFunc = TypeRegister.MathLedger._BASICMATH_TWO_INPUTS
+
+    # Wrapper to detect not-supported result from rc and raise an error.
+    def func(*args):
+        result = ledgerFunc(*args)
+        if result is None:
+            # Operation not supported, so raise appropriate error.
+            # Check all boolean arrays are same size
+            size = len(bool_list[0])
+            for i in range(lenbool):
+                if len(bool_list[i]) != size:
+                    raise ValueError("Boolean arrays must be the same length")
+            raise ValueError(f"Cannot perform mask_op {funcNum}")
+        return result
+
     if inplace:
         # assume first value can be reused
         result = bool_list[0]
+        if not isinstance(result, np.ndarray):
+            raise TypeError("First argument must be an array")
         func((result, bool_list[1], result), funcNum, 0)
         i = 2
 
         while i < lenbool:
             # this will do inplace
             func((result, bool_list[i], result), funcNum, 0)
             i += 1
```

### Comparing `riptable-1.6.9/riptable/rt_pdataset.py` & `riptable-1.7.0/riptable/rt_pdataset.py`

 * *Files 1% similar despite different names*

```diff
@@ -113,15 +113,15 @@
         self._showpartitions = showpartitions
 
         # cutoffs will be the same for dataset columns
         if cutoffs is not None:
             self._pcutoffs = list(cutoffs.values())[0]
         else:
             # assume one row, init from dataset
-            self._pcutoffs = FastArray([self._nrows])
+            self._pcutoffs = FastArray([self._nrows if self._nrows is not None else 1])
 
         # number of rows in each partition
         self._prows = self._pcutoffs.copy()
 
         if len(self._prows) > 1:
             # calculate row length
             self._prows[1:] -= self._pcutoffs[:-1]
```

### Comparing `riptable-1.6.9/riptable/rt_pgroupby.py` & `riptable-1.7.0/riptable/rt_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_sds.py` & `riptable-1.7.0/riptable/rt_sds.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_sharedmemory.py` & `riptable-1.7.0/riptable/rt_sharedmemory.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_sort_cache.py` & `riptable-1.7.0/riptable/rt_sort_cache.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_stats.py` & `riptable-1.7.0/riptable/rt_stats.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_str.py` & `riptable-1.7.0/riptable/rt_str.py`

 * *Files 3% similar despite different names*

```diff
@@ -13,21 +13,23 @@
 import inspect
 import re
 import warnings
 from functools import wraps
 
 import numba as nb
 import numpy as np
+import numpy.typing as npt
 from numba.core.dispatcher import Dispatcher
 
 from .config import get_global_settings
 from .rt_enum import TypeRegister
 from .rt_fastarray import FastArray
 from .rt_numpy import empty, ones, unique, where, zeros
 from .Utils.common import cached_property
+from .numba.indexing import scalar_or_lookup
 
 # Partially-specialize the numba.njit decorator to simplify its use in the FAString class below.
 _njit_serial = partial(nb.njit, parallel=False, cache=get_global_settings().enable_numba_cache, nogil=True)
 _njit_par = partial(nb.njit, parallel=True, cache=get_global_settings().enable_numba_cache, nogil=True)
 
 
 class FAStrDispatchPair(NamedTuple):
@@ -73,14 +75,16 @@
 #
 # Keeping it as 1d and remembering the itemsize is 10% faster on large arrays, and even faster on small arrays
 # If recycling kicks in (only works on 1d arrays), it is 30% faster
 # Also note: On Windows as of Aug 2019, prange is much slower without tbb installed
 #
 # subclass from FastArray
 
+SliceBoundType = Union[int, npt.NDArray[np.integer]]
+
 
 @nb.njit
 def _str_equal(str1, str2):
     for char1, char2 in zip(str1, str2):
         if char1 != char2:
             return False
     return True
@@ -1153,51 +1157,62 @@
             out = FastArray(out_arrs[0])
         return out
 
     def _nb_substr(src, out, itemsize, start, stop, strlen):
         n_elements = len(out)
         max_chars = 0
         for elem in nb.prange(n_elements):
+            i = scalar_or_lookup(start, elem)
+            j = scalar_or_lookup(stop, elem)
             elem_len = strlen[elem]
-            i, j = start[elem], stop[elem]
             if i < 0:
                 i += elem_len
             if j < 0:
                 j += elem_len
             i = max(i, 0)
             j = min(j, elem_len)
             for out_pos, pos in enumerate(range(i, j)):
                 char = src[itemsize * elem + pos]
                 out[elem, out_pos] = char
                 max_chars = max(max_chars, out_pos + 1)
         return out[:, :max_chars]
 
-    def _substr(self, start: Union[int, np.ndarray], stop: Optional[Union[int, np.ndarray]] = None) -> FastArray:
+    def _substr(self, start: SliceBoundType, stop: Optional[SliceBoundType] = None) -> FastArray:
         """
         Take a substring of each element using slice args.
+        Behaves like slice, such that a single argument is treated as the stop.
+        start, stop may be integers or arrays of integers aligned with self.
+
+        Examples
+        --------
+        >>> a = rt.FA(['abc', 'xyzQ'])
+        >>> a.str.substr(2)
+        FastArray([b'ab', b'xy'], dtype='|S2')
+        >>> a.str.substr(0, 2)
+        FastArray([b'ab', b'xy'], dtype='|S2')
+        >>> a.str.substr(1, 2)
+        FastArray([b'b', b'y'], dtype='|S2')
+        >>> a.str.substr([1, 2])    # element-wise bounds
+        FastArray([b'a', b'xy'], dtype='|S2')
         """
         if stop is None:
-            # emulate behaviour of slice
             start, stop = 0, start
 
-        def _bound_to_array(value, name):
-            value = TypeRegister.FastArray(value)
-            if len(value) == 1:
-                value = np.full(self.n_elements, value[0])
-            if value.shape != (self.n_elements,):
-                raise ValueError(
-                    f"{name} must be an integer or an array of length equal to the number of elements"
-                    f" in self. Expected {(self.n_elements,)}, got {value.shape}"
-                )
-            return value
+        strlen = self.strlen
 
-        start = _bound_to_array(start, "start")
-        stop = _bound_to_array(stop, "stop")
+        if start is None:
+            start = 0
+        if stop is None:
+            stop = strlen
 
-        strlen = self.strlen
+        def _asarray_or_int(x):
+            return int(x) if np.ndim(x) == 0 else np.asarray(x)
+
+        start = _asarray_or_int(start)
+        stop = _asarray_or_int(stop)
 
         out = zeros((self.n_elements, self._itemsize), self.dtype)
 
         if self.n_elements >= self._APPLY_PARALLEL_THRESHOLD:
             substr = self.nb_substr_par
         else:
             substr = self.nb_substr
@@ -1283,15 +1298,15 @@
                     break
             position = ones(self.n_elements, dtype) * position
 
         if len(position) != self.n_elements:
             raise ValueError("position must be a scalar or a vector of the same length as self")
 
         out = zeros(self.n_elements, self.dtype)
-        broken_at = self._nb_char(position, self._itemsize, self.strlen, out)
+        broken_at = self.nb_char(position, self._itemsize, self.strlen, out)
         if broken_at >= 0:
             raise ValueError(f"Position {position[broken_at]} out of bounds " f"for string of length {self._itemsize}")
         out = out.view(f"{self._intype}1")
         return FastArray(out)
 
     # Use the specialized decorators to create both a serial and parallel version of each
     # numba function (so we only need one definition of each), then add it to FAString.
@@ -1381,28 +1396,55 @@
             raise RuntimeError(f"{name} is not defined on FAString as a function or property")
         setattr(cls, name, wrapper)
     return cls
 
 
 class _SubStrAccessor:
     """
-    Class for providing slicing on string arrays via FAString.substr
+    Facilitiates FAString.substr[<slice>] usage pattern.
+
+    FAString.substr return an instance of this object which can either be
+    sliced or called.
+
+    Examples
+    --------
+    >>> a = rt.FA(['abc', 'xyzQ'])
+    >>> a.str.substr(2)
+    FastArray([b'ab', b'xy'], dtype='|S2')
+    >>> a.str.substr(0, 2)
+    FastArray([b'ab', b'xy'], dtype='|S2')
+    >>> a.str.substr(1, 2)
+    FastArray([b'b', b'y'], dtype='|S1')
+    >>> a.str.substr[:2]
+    FastArray([b'ab', b'xy'], dtype='|S2')
+    >>> a.str.substr[1:2]
+    FastArray([b'b', b'y'], dtype='|S1')
+    >>> a.str.substr[-2:]
+    FastArray([b'bc', b'zQ'], dtype='|S2')
+    >>> a.str.substr[-2:-1]
+    FastArray([b'b', b'z'], dtype='|S1')
     """
 
     def __init__(self, fastring):
         self.fastring = fastring
 
     def __getitem__(self, y):
         if isinstance(y, slice):
-            start = 0 if y.start is None else y.start
-            return self.fastring._substr(start, y.stop)
+            if y.step is not None:
+                raise NotImplementedError("slicing with step in substr is not supported")
+            if y.stop is None:
+                stop = self.fastring.strlen
+            else:
+                stop = y.stop
+            return self.fastring._substr(y.start, stop)
         else:
             return self.fastring.char(y)
 
-    def __call__(self, start, stop=None):
+    @wraps(FAString._substr)
+    def __call__(self, start: SliceBoundType, stop: Optional[SliceBoundType] = None):
         return self.fastring._substr(start, stop)
 
 
 @_populate_wrappers
 class CatString:
     """
     Provides access to FAString methods for Categoricals.
```

### Comparing `riptable-1.6.9/riptable/rt_struct.py` & `riptable-1.7.0/riptable/rt_struct.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_timers.py` & `riptable-1.7.0/riptable/rt_timers.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_timezone.py` & `riptable-1.7.0/riptable/rt_timezone.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/rt_utils.py` & `riptable-1.7.0/riptable/rt_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/ipykernel_integration_test.py` & `riptable-1.7.0/riptable/test_tooling_integration/ipykernel_integration_test.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,14 @@
 # End-to-end integration tests that bring up a ipykernel instance and tests riptable completions.
 from textwrap import dedent
 from typing import List, Set, Tuple
 
 import pytest
+
+pytest.importorskip("ipykernel")
 from ipykernel.tests.utils import TIMEOUT, execute, kernel, wait_for_idle
 
 from riptable import (  # not unused; needed for evaluated code below
     Dataset,
     Multiset,
     Struct,
     arange,
```

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/ipython_compatibility_test.py` & `riptable-1.7.0/riptable/test_tooling_integration/ipython_compatibility_test.py`

 * *Files 1% similar despite different names*

```diff
@@ -4,14 +4,16 @@
 # See the original here: https://github.com/ipython/ipython/blob/master/IPython/core/tests/test_completer.py
 import os
 import sys
 import textwrap
 import unittest
 
 import pytest
+
+pytest.importorskip("IPython")
 from IPython import get_ipython
 from IPython.core import completer
 from IPython.core.completer import (
     Completion,
     _deduplicate_completions,
     match_dict_keys,
     provisionalcompleter,
```

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/ipython_integration_test.py` & `riptable-1.7.0/riptable/test_tooling_integration/ipython_integration_test.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,15 @@
 import unittest
 from contextlib import contextmanager
 from enum import IntEnum
 from typing import List, Union
 
 import pytest
+
+pytest.importorskip("IPython")
 from IPython import get_ipython
 from IPython.core.completer import provisionalcompleter
 from IPython.terminal import ptutils
 
 from riptable import Categorical, Dataset, FastArray, Multiset, Struct, arange
 from riptable.rt_misc import autocomplete
 from riptable.tests.test_categorical import decision_dict
```

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/run.py` & `riptable-1.7.0/riptable/test_tooling_integration/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/test_display/test_display.py` & `riptable-1.7.0/riptable/test_tooling_integration/test_display/test_display.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/test_tooling_integration/test_display/vnu_checker.py` & `riptable-1.7.0/riptable/test_tooling_integration/test_display/vnu_checker.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/testing/array_assert.py` & `riptable-1.7.0/riptable/testing/array_assert.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/testing/randgen.py` & `riptable-1.7.0/riptable/testing/randgen.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/generator_categorical_unit_test.py` & `riptable-1.7.0/riptable/tests/generator_categorical_unit_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/generator_groupby_unit_test.py` & `riptable-1.7.0/riptable/tests/generator_groupby_unit_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/groupby_categorical_unit_test_parameters.py` & `riptable-1.7.0/riptable/tests/groupby_categorical_unit_test_parameters.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/groupby_unit_test_parameters.py` & `riptable-1.7.0/riptable/tests/groupby_unit_test_parameters.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/run.py` & `riptable-1.7.0/riptable/tests/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/runall.py` & `riptable-1.7.0/riptable/tests/runall.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_accum2.py` & `riptable-1.7.0/riptable/tests/test_accum2.py`

 * *Files 0% similar despite different names*

```diff
@@ -640,10 +640,15 @@
         assert_almost_equal(vw[vw.date == "2000-01-03", "A"][0], 0.47355353, decimal=2)
         assert_almost_equal(
             list(vw.footer_get_values("Sum", columns=["A"]).values())[0],
             1.409830,
             decimal=2,
         )
 
+    def test_count_uniques(self):
+        accum = rt.Accum2([1, 1, 2, 2], ["A", "B", "C", "A"])
+        with pytest.raises(NotImplementedError):
+            accum.count_uniques(rt.arange(4))
+
 
 if __name__ == "__main__":
     tester = unittest.main()
```

### Comparing `riptable-1.6.9/riptable/tests/test_accumtable.py` & `riptable-1.7.0/riptable/tests/test_accumtable.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_apply.py` & `riptable-1.7.0/riptable/tests/test_apply.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_base_function.py` & `riptable-1.7.0/riptable/tests/test_base_function.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_bitcount.py` & `riptable-1.7.0/riptable/tests/test_bitcount.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical.py` & `riptable-1.7.0/riptable/tests/test_categorical.py`

 * *Files 0% similar despite different names*

```diff
@@ -351,15 +351,14 @@
                     result = func(bad_idx)
 
     def test_eq_operator(self):
         x = rt.Cat(["a", "b", "c"])
         assert rt.all(x.eq("c") == rt.FA([False, False, True]))
 
     def test_map(self):
-
         c = Categorical(["b", "b", "c", "a", "d"], ordered=False)
         mapping = {"a": "AA", "b": "BB", "c": "CC", "d": "DD"}
         result = c.map(mapping)
         correct = FastArray([b"BB", b"BB", b"CC", b"AA", b"DD"])
         assert bool(np.all(result == correct))
         c = Categorical(["b", "b", "c", "a", "d"], ordered=False, base_index=0)
         result = c.map(mapping)
@@ -1556,15 +1555,14 @@
         # with self.assertWarns(UserWarning):
         #    c = Categorical(codes, cats, ordered=True)
         #    self.assertEqual(c.category_array[0], b'c')
         #    self.assertFalse(c.ordered)
 
     # ------------------------------------------------------
     def test_keywords_not_allowed(self):
-
         # filter + base index 0
         f = np.array([True, False, True])
         with pytest.raises(ValueError):
             c = Categorical(["a", "b", "c"], filter=f, base_index=0)
 
     # ------------------------------------------------------
     def test_display_properties(self):
@@ -1584,15 +1582,14 @@
 
         # this could change, right now the convert function just does a str over the item
         assert convert_func(1, item_format) == "1", f"Incorrect convert function was returned."
 
     # ------------------------------------------------------
     # -----MISC. COVER TESTS--------------------------------
     def test_non_array_dict_categories_ctor(self):
-
         with pytest.raises(TypeError):
             c = Categories(["garbage", "list"])
 
     def test_too_many_args_categories_ctor(self):
         with pytest.raises(ValueError):
             c = Categories(FastArray([1]), FastArray([2]), FastArray([3]))
 
@@ -2593,22 +2590,61 @@
         res = mcat.numba_apply(nb_sum, ds.x)
 
         assert "x" == res[0].get_name(), "Failed check 6"
 
     # -------------------------- TEST COUNT_UNIQUES --------------------------------------------
 
     def test_count_uniques(self):
-
         cat = rt.Cat([1, 1, 1, 2, 2, 2])
         filter = rt.FA([0, 1, 0, 1, 0, 1], dtype=bool)
         x = rt.FA([1, 2, 1, 2, 1, 2])
 
         assert (cat.count_uniques(x)[0] == rt.FA([2, 2])).all(), "Failed check 1"
-        assert (cat.count_uniques(x, filter=filter)[0] == rt.FA([1, 1])).all(), "Failed check 2"
-        assert (cat.count_uniques(x, transform=True)[0] == rt.FA([2] * 6)).all(), "Failed check 3"
+
+        if GroupByOps._USE_FAST_COUNT_UNIQUES:
+            assert (cat.count_uniques(x, filter=filter)[0] == rt.FA([1, 1])).all(), "Failed check 2"
+            assert (cat.count_uniques(x, transform=True)[0] == rt.FA([2] * 6)).all(), "Failed check 3"
+
+            cat = rt.Cat([1] * 4 + [2] * 4, filter=np.arange(8) < 4)
+            x = rt.FA([1, 2] * 4)
+            filter = rt.arange(8) % 2 == 0
+            assert (cat.count_uniques(x, filter=filter, transform=True)[0] == rt.ones(8)).all(), "Failed check 4"
+
+        cat = rt.Cat(["a", "a", "b", "c"])
+        x = rt.FA(["1", "1", "2", "3"])
+        assert (cat.count_uniques(x)[0] == rt.FA([1, 1, 1])).all(), "Failed check 5"
+
+        ds = rt.Dataset({"c": rt.Cat(["a", "a", "b", "c"]), "v": rt.FA(["1", "1", "2", "3"])})
+        assert (ds.c.count_uniques(ds.v)["v"] == rt.FA([1, 1, 1])).all(), "Failed check 6"
+
+    @pytest.mark.skipif(not GroupByOps._USE_FAST_COUNT_UNIQUES, reason="Needs new implementation")
+    def test_count_uniques_filter_entire_group(self):
+        arr = rt.FA([1, 2, 3] * 2)
+        result = rt.Cat(arr).count_uniques(arr, filter=arr > 1)
+        expected = rt.FA([0, 1, 1])
+        assert (result[0] == expected).all()
+
+
+@pytest.mark.skipif(not GroupByOps._USE_FAST_COUNT_UNIQUES, reason="Needs new implementation")
+@pytest.mark.parametrize("use_filter", [True, False])
+@pytest.mark.parametrize("showfilter", [True, False])
+def test_count_uniques_with_nans(showfilter, use_filter):
+    cat = rt.Cat([0, 1, 0, 1, 2], ["a", "b"])
+
+    kwargs = dict(showfilter=showfilter, filter=cat != "a" if use_filter else None)
+    result = cat.count_uniques(rt.arange(5), **kwargs)
+    expected = rt.Dataset(
+        dict(
+            key_0=["Filtered", "a", "b"],
+            col_0=[2, 0, 1] if use_filter else [2, 2, 1],
+        )
+    )
+    if not showfilter:
+        expected = expected[1:, :]
+    assert result.equals(expected)
 
 
 # Cannot use the pytest.mark.parameterize decorator within classes that inherit from unittest.TestCase.
 # Will need to migrate for unittest to pytest and fold the following categorical tests into Categorical_Test.
 
 
 @pytest.mark.parametrize(
```

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_autotest_aggregated_functions.py` & `riptable-1.7.0/riptable/tests/test_categorical_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_base_index.py` & `riptable-1.7.0/riptable/tests/test_categorical_base_index.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_dtype.py` & `riptable-1.7.0/riptable/tests/test_categorical_dtype.py`

 * *Files 2% similar despite different names*

```diff
@@ -120,17 +120,18 @@
         assert c._fa.dtype == np.int64
 
     def test_pandas(self):
         pdc = pd.Categorical(str_fa)
         c = Categorical(str_fa)
         assert c._fa.dtype == np.int8
 
-        pdc._codes = pdc._codes.astype(np.int32)
-        c = Categorical(pdc)
-        assert c._fa.dtype == np.int8
+        # This breaks Pandas-2.0 (_codes is not writable), and seems an odd test to perform.
+        # pdc._codes = pdc._codes.astype(np.int32)
+        # c = Categorical(pdc)
+        # assert c._fa.dtype == np.int8
 
         c = Categorical(pdc, dtype=np.int64)
         assert c._fa.dtype == np.int64
 
     def test_errors(self):
         with pytest.raises(TypeError):
             c = Categorical(str_fa, dtype=np.uint8)
```

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_filter_invalid.py` & `riptable-1.7.0/riptable/tests/test_categorical_filter_invalid.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,9 @@
 import os
+import warnings
 
 import pytest
 
 from riptable import *
 from riptable.rt_sds import SDSMakeDirsOn
 
 # change to true since we write into /tests directory
@@ -63,14 +64,19 @@
 
         with pytest.warns(UserWarning):
             d = Categorical(c, unicode=True)
 
         with pytest.warns(UserWarning):
             d = Categorical(c, invalid="inv")
 
+        # ensure no warnings are otherwise raised by default
+        with warnings.catch_warnings():
+            warnings.simplefilter("error")
+            d = Categorical(c)
+
     def test_filtered_set_name(self):
         c = Categorical([0, 1, 1, 2, 3], ["a", "b", "c"])
         assert c[0] == "Filtered"
         assert c.filtered_name == "Filtered"
         c.filtered_set_name("FILT")
         assert c[0] == "FILT"
         assert c.filtered_name == "FILT"
```

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_functions.py` & `riptable-1.7.0/riptable/tests/test_categorical_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_groupby.py` & `riptable-1.7.0/riptable/tests/test_categorical_groupby.py`

 * *Files 3% similar despite different names*

```diff
@@ -14,15 +14,15 @@
     FastArray,
     arange,
     isnan,
     isnotnan,
     logical,
     mask_or,
 )
-from riptable.rt_enum import GROUPBY_KEY_PREFIX
+from riptable.rt_enum import GROUPBY_KEY_PREFIX, INVALID_DICT
 from riptable.tests.utils import get_rc_version, parse_version
 
 # %load_ext autoreload
 # %autoreload 2
 # from riptable import *
 # from enum import IntEnum
 str_fa = FastArray(
@@ -922,14 +922,34 @@
 
         with pytest.raises(ValueError):
             rt.Cat([1, 1, 1, 2]).shift(arange(4), window=4, periods=1)
 
         with pytest.raises(ValueError):
             rt.Cat([1, 1, 1, 2]).shift(arange(4), 4, periods=1)
 
+    def test_shift_filtered(self):
+        """
+        Test that Categorical.shift properly works with filter kwarg.
+        """
+
+        ds = rt.Dataset(
+            {
+                "c": rt.Cat(["a", "a", "a", "a", "a", "b", "b", "b", "b", "b"]),
+                "v": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
+                "f": [False, True, True, True, False, True, False, True, False, True],
+            }
+        )
+
+        result = ds.c.shift(ds.v, filter=ds.f)
+
+        inv = rt.INVALID_DICT[result.v.dtype.num]
+        expected = rt.Dataset({"v": rt.FA([inv, inv, 1, 2, inv, inv, inv, 5, inv, 7], dtype="int")})
+
+        assert expected.equals(result)
+
     @pytest.mark.xfail(
         get_rc_version() < parse_version("1.11.5a"), reason="cat.shift of flexible not supported", strict=False
     )
     def test_shift_flexible(self):
         """
         Test that Categorical.shift shifts the flexible values in an array or Dataset *per group*.
         """
@@ -1031,7 +1051,64 @@
         x = rt.Cat(rt.arange(5))
         y = rt.arange(4)
         with pytest.raises(
             ValueError,
             match="Tried to perform a groupby operation where the length of the input was not equal to the length of the categorical.",
         ):
             _ = x.median(y)
+
+    @pytest.mark.skipif(get_rc_version() < parse_version("1.11.5a2"), reason="groupby.nth(n<0) is broken", strict=False)
+    def test_nth_offsets(self):
+        ds = Dataset({"a": rt.Cat([0, 1, 1]), "num": [123.0, 456.0, 789.0], "str": ["Aa", "Bb", "Cc"]})
+        grp_offsets = [0, 1]
+        gb: rt.Cat = ds.a
+        for n in range(-3, 3):
+            result = gb.nth((ds.num, ds.str), n=n)
+            for grp in range(2):
+                grp_count = grp + 1
+                grp_index = n if n >= 0 else grp_count + n
+                if grp_index >= 0 and grp_index < grp_count:
+                    assert result["num"][grp] == ds["num"][grp_offsets[grp] + grp_index]
+                    assert result["str"][grp] == ds["str"][grp_offsets[grp] + grp_index]
+                else:
+                    assert np.isnan(result["num"][grp])
+                    assert len(result["str"][grp]) == 0
+
+    @pytest.mark.parametrize("showfilter", [None, True, False])
+    @pytest.mark.parametrize("filter", [None, True])
+    @pytest.mark.parametrize("transform", [None, True, False])
+    def test_nth(self, transform, filter, showfilter):
+        ds = Dataset(
+            {
+                "a": rt.Cat([10, 11, 11]),
+                "num": [123.0, 456.0, 789.0],
+                "str": ["Aa", "Bb", "Cc"],
+            }
+        )
+        gb: rt.Cat = ds.a
+        filter_arr = rt.FA([True, False, True]) if filter else None
+
+        expected = {
+            "num": [123.0, 789.0] if filter else [123.0, 456.0],
+            "str": ["Aa", "Cc"] if filter else ["Aa", "Bb"],
+        }
+        if transform:
+            expected["num"].append(expected["num"][-1])
+            expected["str"].append(expected["str"][-1])
+        else:
+            expected["a"] = [10, 11]
+        if showfilter and not transform:
+            expected["num"].insert(0, 456.0 if filter else np.nan)
+            expected["str"].insert(0, "Bb" if filter else INVALID_DICT[np.dtype(str).num])
+            expected["a"].insert(0, INVALID_DICT[np.dtype(int).num])
+
+        actual = gb.nth(
+            [ds.num, ds.str],
+            0,
+            transform=transform,
+            filter=filter_arr,
+            showfilter=showfilter,
+        )
+
+        assert len(actual.keys()) == len(expected.keys())
+        for k in expected.keys():
+            assert_array_equal(actual[k], rt.FA(expected[k]))
```

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_keywords.py` & `riptable-1.7.0/riptable/tests/test_categorical_keywords.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_modify.py` & `riptable-1.7.0/riptable/tests/test_categorical_modify.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_ordered.py` & `riptable-1.7.0/riptable/tests/test_categorical_ordered.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_setitem.py` & `riptable-1.7.0/riptable/tests/test_categorical_setitem.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_sort_order.py` & `riptable-1.7.0/riptable/tests/test_categorical_sort_order.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_categorical_values.py` & `riptable-1.7.0/riptable/tests/test_categorical_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_conversion_utils.py` & `riptable-1.7.0/riptable/tests/test_conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_csv.py` & `riptable-1.7.0/riptable/tests/test_csv.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_cut.py` & `riptable-1.7.0/riptable/tests/test_cut.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,12 +1,38 @@
 import unittest
+import pytest
 
 import numpy as np
 
-from riptable import FA, Categorical, FastArray, arange, cut, qcut
+from riptable import FA, Categorical, FastArray, arange, cut, qcut, unique
+
+from riptable.testing.array_assert import assert_categorical_equal
+
+
+@pytest.mark.parametrize(
+    "kwargs, msg",
+    [
+        ({"duplicates": "drop"}, None),
+        ({}, "Bin edges must be unique"),
+        ({"duplicates": "raise"}, "Bin edges must be unique"),
+        ({"duplicates": "foo"}, "invalid value for 'duplicates' parameter"),
+    ],
+)
+def test_cut_duplicates_bin(kwargs, msg):
+    bins = FA([0, 2, 4, 6, 10, 10])
+    values = FA([1, 3, 5, 7, 9])
+    assert bins.duplicated().any(), "For this test, bins should have duplicates."
+
+    if msg is not None:
+        with pytest.raises(ValueError, match=msg):
+            cut(values, bins, **kwargs)
+    else:
+        result = cut(values, bins, **kwargs)
+        expected = cut(values, unique(bins))
+        assert_categorical_equal(result, expected)
 
 
 class Cut_Test(unittest.TestCase):
     """
     TODO: add more tests for different types
     also include string types
     """
```

### Comparing `riptable-1.6.9/riptable/tests/test_dataset.py` & `riptable-1.7.0/riptable/tests/test_dataset.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 import keyword
 import re
 import unittest
 from collections import namedtuple
+import itertools
 
 import numpy as np
 import pandas as pd
 import pytest
 from numpy.testing import assert_array_almost_equal, assert_array_equal
 
 import riptable as rt
@@ -1494,14 +1495,135 @@
     def test_drop_duplicates_empty_dataset(self):
         empty_ds = Dataset({"a": [], "b": []})
         new_ds = empty_ds.drop_duplicates("a")
         self.assertIsNot(new_ds, empty_ds)
         self_ds = empty_ds.drop_duplicates("a", inplace=True)
         self.assertIs(self_ds, empty_ds)
 
+    def test_trim(self):
+        def create_ds(N):
+            return Dataset(
+                {
+                    "stridxcol": [str(i) for i in range(N)],
+                    "strcol": np.random.choice(["a", "b", "c", "d"], N),
+                    "catintcol": Categorical(np.random.choice([1, 2, 3], N)),
+                    "catstrcol": Categorical(np.random.choice(["X", "Y", "Z"], N)),
+                    "intcol": np.random.randint(1, 10, N),
+                    "intcol_zeros": np.random.randint(0, 3, N),
+                    "intcol_nans": np.random.randint(0, 3, N),
+                    "intcol_zeros_nans": np.random.randint(0, 3, N),
+                    "floatcol": np.abs(np.random.rand(N)) + 1,
+                    "floatcol_zeros": np.random.rand(N),
+                    "floatcol_nans": np.random.rand(N),
+                    "floatcol_zeros_nans": np.random.rand(N),
+                }
+            )
+
+        def add_filtered_vals(
+            ds, zero_cols, zero_rows, nan_cols, nan_rows, mixed_cols, mixed_rows, computable_cols, rows_first=True
+        ):
+            def fill_rows():
+                for column in computable_cols:
+                    for row in zero_rows:
+                        ds[column][row] = 0
+
+                    for row in nan_rows:
+                        ds[column][row] = np.nan
+
+                for row in mixed_rows:
+                    perm = np.random.permutation(computable_cols)
+                    for col in perm[: len(computable_cols) // 2]:
+                        ds[col][row] = 0
+                    for col in perm[len(computable_cols) // 2 :]:
+                        ds[col][row] = np.nan
+
+            def fill_cols():
+                for col in zero_cols:
+                    ds[col][:] = 0
+
+                for col in nan_cols:
+                    ds[col][:] = np.nan
+
+                for col in mixed_cols:
+                    ds[col][:] = np.nan
+                    perm_idxs = np.random.choice(range(len(ds[col])), len(ds[col]) // 2, replace=False)
+                    ds[col][perm_idxs] = 0
+
+            if rows_first:
+                fill_rows()
+                fill_cols()
+            else:
+                fill_cols()
+                fill_rows()
+
+        zero_cols = ["intcol_zeros", "floatcol_zeros"]
+        nan_cols = ["intcol_nans", "floatcol_nans"]
+        mixed_cols = ["intcol_zeros_nans", "floatcol_zeros_nans"]
+
+        def create_and_add_filtered(N, rows_first):
+            ds = create_ds(N)
+            all_cols = ds.keys()
+            computable_cols = all_cols[4:]
+
+            zero_rows, nan_rows, mixed_rows = np.random.choice(range(N), N // 3, replace=False).reshape(3, -1)
+            zero_rows = list(zero_rows)
+            nan_rows = list(nan_rows)
+            mixed_rows = list(mixed_rows)
+
+            add_filtered_vals(
+                ds, zero_cols, zero_rows, nan_cols, nan_rows, mixed_cols, mixed_rows, computable_cols, rows_first
+            )
+
+            return ds, zero_rows, nan_rows, mixed_rows
+
+        N = 200
+
+        for rows_first in [True, False]:
+
+            ds, zero_rows, nan_rows, mixed_rows = create_and_add_filtered(N, rows_first)
+            all_cols = ds.keys()
+
+            for zeros, nans, columns, rows in itertools.product((False, True), repeat=4):
+                if not zeros and not nans:
+                    with self.assertRaises(ValueError):
+                        ds.trim(zeros=zeros, nans=nans, columns=columns, rows=rows)
+                    continue
+
+                trim_ds = ds.trim(zeros=zeros, nans=nans, columns=columns, rows=rows)
+                filtered_cols = []
+                if columns:
+                    if zeros and nans:
+                        filtered_cols = nan_cols + zero_cols + mixed_cols
+                    elif zeros and rows_first:
+                        filtered_cols = zero_cols
+                    elif nans and rows_first:
+                        filtered_cols = nan_cols
+
+                filtered_rows = []
+                if rows:
+                    if zeros and nans:
+                        filtered_rows = zero_rows + nan_rows + mixed_rows
+                    elif zeros and not rows_first:
+                        filtered_rows = zero_rows
+                    elif nans and not rows_first:
+                        filtered_rows = nan_rows
+
+                self.assertEqual(
+                    trim_ds.shape,
+                    (
+                        N - len(filtered_rows),
+                        len(all_cols) - len(filtered_cols),
+                    ),
+                )
+
+                self.assertListEqual(trim_ds.keys(), [c for c in all_cols if c not in filtered_cols])
+                self.assertListEqual(
+                    [int(idx) for idx in trim_ds["stridxcol"]], [idx for idx in range(N) if idx not in filtered_rows]
+                )
+
     def test_describe(self):
         ds = self.get_basic_dataset()
         # TODO NW Should be String, not FastArray
         ds.b = FastArray(ds.b.astype(str))
         labels = describe(None)
         col_a_res = np.array([10.0, 10.0, 0.0, 4.5, 3.028, 0.0, 0.9, 2.25, 4.5, 6.75, 8.1, 9.0, 4.5])
         col_c_res = col_a_res + 20.0
```

### Comparing `riptable-1.6.9/riptable/tests/test_dataset_slicing.py` & `riptable-1.7.0/riptable/tests/test_dataset_slicing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_date.py` & `riptable-1.7.0/riptable/tests/test_date.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_datetime.py` & `riptable-1.7.0/riptable/tests/test_datetime.py`

 * *Files 6% similar despite different names*

```diff
@@ -1926,14 +1926,242 @@
         result = dtn.nanosecond_span
         self.assertTrue(isinstance(result, TimeSpan))
         self.assertTrue(
             bool(np.all(mask == result.isnan())),
             f"Did not match at time: \n{dtn[mask!=result.isnan()]}",
         )
 
+    def test_isnan(self):
+        d = DateTimeNano([0, np.nan, 1])
+        result = d.isnan()
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNano: \n{d[expected != result]}",
+        )
+
+        d = [DateTimeNanoScalar(x) for x in [0, -1, 1]]
+        result = [x.isnan() for x in d]
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNanoScalar: \n{d[expected != result]}",
+        )
+
+        d = Date([0, np.nan, 1])
+        result = d.isnan()
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at Date: \n{d[expected != result]}",
+        )
+
+        d = DateSpan([-1, 0, INVALID_DICT[np.dtype(int32).num], 1])
+        result = d.isnan()
+        expected = [False, False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpan: \n{d[expected != result]}",
+        )
+
+        d = [DateSpanScalar(x) for x in [-1, 0, INVALID_DICT[np.dtype(int32).num], 1]]
+        result = [x.isnan() for x in d]
+        expected = [False, False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpanScalar: \n{d[expected != result]}",
+        )
+
+        d = TimeSpan([0, np.nan, 1])
+        result = d.isnan()
+        expected = [False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpan: \n{d[expected != result]}",
+        )
+
+        d = [TimeSpanScalar(x) for x in [0, np.nan, 1]]
+        result = [x.isnan() for x in d]
+        expected = [False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpanScalar: \n{d[expected != result]}",
+        )
+
+    def test_isnotnan(self):
+        d = DateTimeNano([0, np.nan, 1])
+        result = d.isnotnan()
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNano: \n{d[expected != result]}",
+        )
+
+        d = [DateTimeNanoScalar(x) for x in [0, -1, 1]]
+        result = [x.isnotnan() for x in d]
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNanoScalar: \n{d[expected != result]}",
+        )
+
+        d = Date([0, np.nan, 1])
+        result = d.isnotnan()
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at Date: \n{d[expected != result]}",
+        )
+
+        d = DateSpan([-1, 0, INVALID_DICT[np.dtype(int32).num], 1])
+        result = d.isnotnan()
+        expected = [True, True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpan: \n{d[expected != result]}",
+        )
+
+        d = [DateSpanScalar(x) for x in [-1, 0, INVALID_DICT[np.dtype(int32).num], 1]]
+        result = [x.isnotnan() for x in d]
+        expected = [True, True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpanScalar: \n{d[expected != result]}",
+        )
+
+        d = TimeSpan([0, np.nan, 1])
+        result = d.isnotnan()
+        expected = [True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpan: \n{d[expected != result]}",
+        )
+
+        d = [TimeSpanScalar(x) for x in [0, np.nan, 1]]
+        result = [x.isnotnan() for x in d]
+        expected = [True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpanScalar: \n{d[expected != result]}",
+        )
+
+    def test_isfinite(self):
+        d = DateTimeNano([0, np.nan, 1])
+        result = d.isfinite()
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNano: \n{d[expected != result]}",
+        )
+
+        d = [DateTimeNanoScalar(x) for x in [0, -1, 1]]
+        result = [x.isfinite() for x in d]
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNanoScalar: \n{d[expected != result]}",
+        )
+
+        d = Date([0, np.nan, 1])
+        result = d.isfinite()
+        expected = [False, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at Date: \n{d[expected != result]}",
+        )
+
+        d = DateSpan([-1, 0, INVALID_DICT[np.dtype(int32).num], 1])
+        result = d.isnotnan()
+        expected = [True, True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpan: \n{d[expected != result]}",
+        )
+
+        d = [DateSpanScalar(x) for x in [-1, 0, INVALID_DICT[np.dtype(int32).num], 1]]
+        result = [x.isfinite() for x in d]
+        expected = [True, True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpanScalar: \n{d[expected != result]}",
+        )
+
+        d = TimeSpan([0, np.nan, 1])
+        result = d.isfinite()
+        expected = [True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpan: \n{d[expected != result]}",
+        )
+
+        d = [TimeSpanScalar(x) for x in [0, np.nan, 1]]
+        result = [x.isfinite() for x in d]
+        expected = [True, False, True]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpanScalar: \n{d[expected != result]}",
+        )
+
+    def test_isnotfinite(self):
+        d = DateTimeNano([0, np.nan, 1])
+        result = d.isnotfinite()
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNano: \n{d[expected != result]}",
+        )
+
+        d = [DateTimeNanoScalar(x) for x in [0, -1, 1]]
+        result = [x.isnotfinite() for x in d]
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateTimeNanoScalar: \n{d[expected != result]}",
+        )
+
+        d = Date([0, np.nan, 1])
+        result = d.isnotfinite()
+        expected = [True, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at Date: \n{d[expected != result]}",
+        )
+
+        d = DateSpan([-1, 0, INVALID_DICT[np.dtype(int32).num], 1])
+        result = d.isnotfinite()
+        expected = [False, False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpan: \n{d[expected != result]}",
+        )
+
+        d = [DateSpanScalar(x) for x in [-1, 0, INVALID_DICT[np.dtype(int32).num], 1]]
+        result = [x.isnotfinite() for x in d]
+        expected = [False, False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at DateSpanScalar: \n{d[expected != result]}",
+        )
+
+        d = TimeSpan([0, np.nan, 1])
+        result = d.isnotfinite()
+        expected = [False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpan: \n{d[expected != result]}",
+        )
+
+        d = [TimeSpanScalar(x) for x in [0, np.nan, 1]]
+        result = [x.isnotfinite() for x in d]
+        expected = [False, True, False]
+        self.assertTrue(
+            bool(np.all(expected == result)),
+            f"Did not match at TimeSpanScalar: \n{d[expected != result]}",
+        )
+
     def test_groupby_restore(self):
         dtn = DateTimeNano(
             [
                 "2000-01-01",
                 "2000-01-02",
                 "2000-01-03",
                 "2000-01-01",
@@ -2143,15 +2371,16 @@
             ],
             from_tz="UTC",
             to_tz="UTC",
         )
         pdt = pd.DatetimeIndex(dtn._fa)
         self.assertTrue(bool(np.all(dtn._fa == pdt.values.view(np.int64))))
 
-        df = pd.DataFrame({"pdt": pdt})
+        # Add dummy to avoid empty DataFrame errors in pandas-2.0
+        df = pd.DataFrame({"pdt": pdt, "dummy": 1})
         df = df.set_index("pdt")
 
         rule = "1H"
         pd_result = df.resample(rule).count().index.values.view(np.int64)
         rt_result = dtn.resample(rule)
         self.assertTrue(
             bool(np.all(pd_result == rt_result)),
@@ -2191,94 +2420,82 @@
                 "2015-04-21 02:25:11.768548100",
                 "2015-04-24 07:47:54.737776979",
                 "2015-04-10 23:59:59.376589955",
             ],
             from_tz="UTC",
             to_tz="UTC",
         )
-        correct_hour = DateTimeNano(
-            [
+        expected_rule_conversions = {
+            "H": "h",
+            "T": "m",
+            "min": "m",
+            "S": "s",
+            "L": "ms",
+            "ms": "ms",
+            "U": "us",
+            "US": "us",
+            "N": "ns",
+            "NS": "ns",
+        }
+        expected_results = {
+            "h": [
                 "2015-04-15 14:00:00",
                 "2015-04-20 07:00:00",
                 "2015-04-23 13:00:00",
                 "2015-04-21 02:00:00",
                 "2015-04-24 07:00:00",
                 "2015-04-10 23:00:00",
             ],
-            from_tz="UTC",
-            to_tz="UTC",
-        )
-        h_result = dtn.resample("H", dropna=True)
-        self.assertTrue(arr_eq(correct_hour, h_result))
-
-        correct_minute = DateTimeNano(
-            [
+            "m": [
                 "2015-04-15 14:26:00",
                 "2015-04-20 07:30:00",
                 "2015-04-23 13:15:00",
                 "2015-04-21 02:25:00",
                 "2015-04-24 07:47:00",
                 "2015-04-10 23:59:00",
             ],
-            from_tz="UTC",
-            to_tz="UTC",
-        )
-        m_result = dtn.resample("T", dropna=True)
-        self.assertTrue(arr_eq(correct_minute, m_result))
-
-        correct_second = DateTimeNano(
-            [
+            "s": [
                 "2015-04-15 14:26:54",
                 "2015-04-20 07:30:00",
                 "2015-04-23 13:15:24",
                 "2015-04-21 02:25:11",
                 "2015-04-24 07:47:54",
                 "2015-04-10 23:59:59",
             ],
-            from_tz="UTC",
-            to_tz="UTC",
-        )
-        s_result = dtn.resample("S", dropna=True)
-        self.assertTrue(arr_eq(correct_second, s_result))
-
-        correct_ms = DateTimeNano(
-            [
+            "ms": [
                 "2015-04-15 14:26:54.735",
                 "2015-04-20 07:30:00.858",
                 "2015-04-23 13:15:24.526",
                 "2015-04-21 02:25:11.768",
                 "2015-04-24 07:47:54.737",
                 "2015-04-10 23:59:59.376",
             ],
-            from_tz="UTC",
-            to_tz="UTC",
-        )
-        ms_result = dtn.resample("L", dropna=True)
-        self.assertTrue(arr_eq(correct_ms, ms_result))
-
-        correct_us = DateTimeNano(
-            [
+            "us": [
                 "2015-04-15 14:26:54.735321",
                 "2015-04-20 07:30:00.858219",
                 "2015-04-23 13:15:24.526871",
                 "2015-04-21 02:25:11.768548",
                 "2015-04-24 07:47:54.737776",
                 "2015-04-10 23:59:59.376589",
             ],
-            from_tz="UTC",
-            to_tz="UTC",
-        )
-        us_result = dtn.resample("U", dropna=True)
-        self.assertTrue(arr_eq(correct_us, us_result))
-
-    # def test_resample_float(self):
-    #    pass
-
-    # def test_resample_units(self):
-    #    pass
+            "ns": [
+                "2015-04-15 14:26:54.735321368",
+                "2015-04-20 07:30:00.858219615",
+                "2015-04-23 13:15:24.526871083",
+                "2015-04-21 02:25:11.768548100",
+                "2015-04-24 07:47:54.737776979",
+                "2015-04-10 23:59:59.376589955",
+            ],
+        }
+        for rule in expected_rule_conversions:
+            with self.subTest(rule=rule):
+                res = dtn.resample(rule=rule, dropna=True)
+                converted_rule = expected_rule_conversions[rule]
+                expected_dtn = DateTimeNano(expected_results[converted_rule], from_tz="UTC", to_tz="UTC")
+                self.assertTrue(arr_eq(expected_dtn, res))
 
     def test_resample_errors(self):
         dtn = DateTimeNano.random(5)
 
         # non string
         with self.assertRaises(TypeError):
             dtn.resample(1)
@@ -2741,9 +2958,37 @@
     assert repr(objView) == repr(obj)
     members = dir(obj)
     viewMembers = dir(objView)
     missing = [m for m in members if m not in viewMembers]
     assert len(missing) == 0, f"Not found: {missing}"
 
 
+_INV_I32 = INVALID_DICT[np.dtype(np.int32).num]
+_INV_I64 = INVALID_DICT[np.dtype(np.int64).num]
+_INV_F = np.nan
+
+
+@pytest.mark.parametrize(
+    "obj,expected",
+    [
+        pytest.param(Date([_INV_I32]), "'Inv'", id="Date(inv)"),
+        pytest.param(Date([0]), "'Inv'", id="Date(0)"),
+        pytest.param(DateScalar(_INV_I32), "Inv", id="DateScalar(inv)"),
+        pytest.param(DateScalar(0), "Inv", id="DateScalar(0)"),
+        pytest.param(DateSpan([_INV_I32]), "'Inv'", id="DateSpan(inv)"),
+        pytest.param(DateSpanScalar(_INV_I32), "Inv", id="DateSpanScalar(inv)"),
+        pytest.param(DateTimeNano([_INV_I64]), "'Inv'", id="DateTimeNano(inv)"),
+        pytest.param(DateTimeNanoScalar(_INV_I64), "Inv", id="DateTimeNanoScalar(inv)"),
+        pytest.param(TimeSpan([_INV_F]), "'Inv'", id="TimeSpan(inv)"),
+        pytest.param(TimeSpanScalar(_INV_F), "Inv", id="TimeSpanScalar(inv)"),
+    ],
+)
+def test_invalid_str(obj, expected):
+    actual = str(obj)
+    if isinstance(expected, list):
+        actual = actual[0]
+        expected = expected[0]
+    assert actual == expected, f"Failed for {obj!r}: expected {expected!r}, got {actual!r}"
+
+
 if __name__ == "__main__":
     tester = unittest.main()
```

### Comparing `riptable-1.6.9/riptable/tests/test_datetime_math.py` & `riptable-1.7.0/riptable/tests/test_datetime_math.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_fastarray.py` & `riptable-1.7.0/riptable/tests/test_fastarray.py`

 * *Files 2% similar despite different names*

```diff
@@ -1586,14 +1586,52 @@
         cat = rt.Categorical(["a", "a", "b", "b", "a", "b"])
         assert_array_or_cat_equal(cat.filter(filt), rt.Categorical(["a", "b", "a", "b"]))
 
         # Make sure Categorical filter doesn't rebase categories even if one disappears
         filtered_cat = cat.filter([True, True, False, False, True, False])
         assert_array_or_cat_equal(cat.categories(), filtered_cat.categories())
 
+    def test_fill_internal(self):
+        int_fa = rt.FA([1, 2, 3])
+        float_fa = rt.FA([1.0, 2, 3])
+
+        int_inv = INVALID_DICT[int_fa.dtype.num]
+        float_inv = INVALID_DICT[float_fa.dtype.num]
+
+        # Basic test
+        int_result = int_fa.fill_invalid(inplace=False)
+        int_expected = rt.FA([int_inv, int_inv, int_inv])
+        assert_array_equal(int_expected, int_result)
+        assert int_expected.dtype == int_result.dtype
+
+        # Inplace=True
+        inplace_fa = rt.FA([1, 2, 3])
+        inplace_fa.fill_invalid()
+        inplace_expected = rt.FA([int_inv, int_inv, int_inv])
+        assert_array_equal(inplace_expected, inplace_fa)
+        assert inplace_expected.dtype == inplace_fa.dtype
+
+        # Specific dtype
+        float_result = int_fa.fill_invalid(inplace=False, dtype=np.dtype("float"))
+        float_expected = rt.FA([float_inv, float_inv, float_inv])
+        assert_array_equal(float_expected, float_result)
+        assert float_expected.dtype == float_result.dtype
+
+        # Specific dtype as string
+        float_result = int_fa.fill_invalid(inplace=False, dtype="float")
+        float_expected = rt.FA([float_inv, float_inv, float_inv])
+        assert_array_equal(float_expected, float_result)
+        assert float_expected.dtype == float_result.dtype
+
+        # Different shape
+        int_result = int_fa.fill_invalid(inplace=False, shape=2)
+        int_expected = rt.FA([int_inv, int_inv])
+        assert_array_equal(int_expected, int_result)
+        assert int_expected.dtype == int_result.dtype
+
 
 # TODO: Extend the tests in the TestFastArrayNanmax / TestFastArrayNanmin classes below to cover the following cases:
 #   * non-array inputs (e.g. a list or set or scalar)
 #   * other FastArray subclass, e.g. Date
 #       * The tests for these should be implemented in the appropriate file for each class, e.g. test_date.py
 #   * other unordered FastArray subclass, e.g. DateSpan (or at least, a subclass which doesn't
 #       have a normal 3-way comparison because it's not a poset).
```

### Comparing `riptable-1.6.9/riptable/tests/test_fastarray_constructor.py` & `riptable-1.7.0/riptable/tests/test_fastarray_constructor.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_fastarray_functions.py` & `riptable-1.7.0/riptable/tests/test_fastarray_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_files/groupby1_ex3.pickle` & `riptable-1.7.0/riptable/tests/test_files/groupby1_ex3.pickle`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_files/unicode_ex1.csv` & `riptable-1.7.0/riptable/tests/test_files/unicode_ex1.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_files/unicode_ex2.csv` & `riptable-1.7.0/riptable/tests/test_files/unicode_ex2.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_files/unicode_ex3.csv` & `riptable-1.7.0/riptable/tests/test_files/unicode_ex3.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_flatten.py` & `riptable-1.7.0/riptable/tests/test_flatten.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_groupby.py` & `riptable-1.7.0/riptable/tests/test_groupby.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import os
 import unittest
 from math import isclose
 import pytest
 
+import riptable as rt
 from riptable import *
 from riptable import Categorical, Dataset, FastArray, GroupBy, arange, isnan, isnotnan
 from riptable.rt_enum import INVALID_DICT
 from riptable.tests.utils import LikertDecision, get_rc_version, parse_version
 from riptable.Utils.pandas_utils import dataset_as_pandas_df
 
 num_list = [3, 4, 5, 1, 2]
@@ -723,21 +724,82 @@
 
     @pytest.mark.skipif(get_rc_version() < parse_version("1.11.5a2"), reason="groupby.nth(n<0) is broken", strict=False)
     def test_nth(self):
         ds = Dataset({"a": [0, 1, 1], "num": [123.0, 456.0, 789.0], "str": ["Aa", "Bb", "Cc"]})
         grp_offsets = [0, 1]
         gb = ds.groupby("a")
         for n in range(-3, 3):
-            result = gb.nth(n=n)
+            result = gb.nth(n)
             for grp in range(2):
                 grp_count = grp + 1
                 grp_index = n if n >= 0 else grp_count + n
                 if grp_index >= 0 and grp_index < grp_count:
                     assert result["num"][grp] == ds["num"][grp_offsets[grp] + grp_index]
                     assert result["str"][grp] == ds["str"][grp_offsets[grp] + grp_index]
                 else:
                     assert np.isnan(result["num"][grp])
                     assert len(result["str"][grp]) == 0
 
+    # -------------------------- TEST COUNT_UNIQUES --------------------------------------------
+
+    def test_count_uniques(self):
+        k = rt.FA([1, 1, 1, 2, 2, 2])
+        x = rt.FA([1, 2, 1, 2, 1, 2])
+
+        gb = rt.Dataset({"k": k, "x": x}).groupby("k")
+        assert (gb.count_uniques()[0] == rt.FA([2, 2])).all(), "Failed check 1"
+
+        if GroupByOps._USE_FAST_COUNT_UNIQUES:
+            filter = rt.FA([0, 1, 0, 1, 0, 1], dtype=bool)
+            assert (gb.count_uniques(filter=filter)[0] == rt.FA([1, 1])).all(), "Failed check 2"
+
+            assert (gb.count_uniques(transform=True)[0] == rt.FA([2] * 6)).all(), "Failed check 3"
+
+            k = rt.FA([1] * 4 + [2] * 4)
+            x = rt.FA([1, 2] * 4)
+            gb = rt.Dataset({"k": k, "x": x}).groupby("k", filter=np.arange(8) < 4)
+            filter = rt.arange(8) % 2 == 0
+            assert (gb.count_uniques(filter=filter, transform=True)[0] == rt.ones(8)).all(), "Failed check 4"
+
+        k = rt.FA(["a", "a", "b", "c"])
+        x = rt.FA(["1", "1", "2", "3"])
+        gb = rt.Dataset({"k": k, "x": x}).groupby("k")
+        assert (gb.count_uniques()["x"] == rt.FA([1, 1, 1])).all(), "Failed check 5"
+
+    @pytest.mark.skipif(not GroupByOps._USE_FAST_COUNT_UNIQUES, reason="Needs new implementation")
+    def test_count_uniques_filter_entire_group(self):
+        strs = rt.FA(["a", "b", "c"] * 2)
+        nums = rt.FA([5, 6, 7] * 2)
+        ds = rt.Dataset({"strs": strs, "nums": nums})
+        gb = ds.groupby("strs")
+        result = gb.count_uniques(filter=nums > 5)["nums"]
+        expected = rt.FA([0, 1, 1])
+        assert (result == expected).all()
+
+
+@pytest.mark.skipif(not GroupByOps._USE_FAST_COUNT_UNIQUES, reason="Needs new implementation")
+@pytest.mark.parametrize("use_filter", [True, False])
+@pytest.mark.parametrize("showfilter", [True, False])
+def test_count_uniques_with_nans(showfilter, use_filter):
+    k1 = rt.FA([0, 1, 0, 1, 2])
+    k2 = rt.FA(["a", "b", "a", "b", "c"])
+    ds = rt.Dataset({"k1": k1, "k2": k2, "v": rt.arange(5)})
+    gb = ds.groupby(["k1", "k2"])
+
+    kwargs = dict(showfilter=showfilter, filter=k2 != "a" if use_filter else None)
+    result = gb.count_uniques(**kwargs)
+    expected = rt.Dataset(
+        dict(
+            k1=[INVALID_DICT[k1.dtype.num], 0, 1, 2],
+            k2=["Filtered", "a", "b", "c"],
+            v=[0, 0, 2, 1] if use_filter else [0, 2, 2, 1],
+        )
+    )
+    if not showfilter:
+        expected = expected[1:, :]
+    assert len(result) == len(expected)
+    for k in expected.keys():
+        assert (result[k] == expected[k]).all()
+
 
 if __name__ == "__main__":
     tester = unittest.main()
```

### Comparing `riptable-1.6.9/riptable/tests/test_groupby_autotest_aggregated_functions.py` & `riptable-1.7.0/riptable/tests/test_groupby_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_groupby_functions.py` & `riptable-1.7.0/riptable/tests/test_groupby_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_groupby_simple_multikey.py` & `riptable-1.7.0/riptable/tests/test_groupby_simple_multikey.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_groupbyops.py` & `riptable-1.7.0/riptable/tests/test_groupbyops.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_grouping.py` & `riptable-1.7.0/riptable/tests/test_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_interop_pyarrow.py` & `riptable-1.7.0/riptable/tests/test_interop_pyarrow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_ismember.py` & `riptable-1.7.0/riptable/tests/test_ismember.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_lexsort.py` & `riptable-1.7.0/riptable/tests/test_lexsort.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_merge.py` & `riptable-1.7.0/riptable/tests/test_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_merge_asof.py` & `riptable-1.7.0/riptable/tests/test_merge_asof.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_meta.py` & `riptable-1.7.0/riptable/tests/test_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_multiset.py` & `riptable-1.7.0/riptable/tests/test_multiset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_pandas_utils.py` & `riptable-1.7.0/riptable/tests/test_pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_pdataset.py` & `riptable-1.7.0/riptable/tests/test_pdataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_pgroupby.py` & `riptable-1.7.0/riptable/tests/test_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_restore_subclass.py` & `riptable-1.7.0/riptable/tests/test_restore_subclass.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_riptide_cpp.py` & `riptable-1.7.0/riptable/tests/test_riptide_cpp.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_rtnumpy.py` & `riptable-1.7.0/riptable/tests/test_rtnumpy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_rtutils.py` & `riptable-1.7.0/riptable/tests/test_rtutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_saveload.py` & `riptable-1.7.0/riptable/tests/test_saveload.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_scalar.py` & `riptable-1.7.0/riptable/tests/test_scalar.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_sds.py` & `riptable-1.7.0/riptable/tests/test_sds.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_sprint_fastarray.py` & `riptable-1.7.0/riptable/tests/test_sprint_fastarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_str.py` & `riptable-1.7.0/riptable/tests/test_str.py`

 * *Files 1% similar despite different names*

```diff
@@ -485,14 +485,16 @@
             (1, 3),
             (1, -1),
             (-2, 3),
             (2,),
             (-1,),
             (-3, -1),
             (-1, 1),
+            (None, 3),
+            (None, None),
         ],
     )
 
     @substr_test_cases
     def test_substr(self, start_stop):
         expected = rt.FastArray([s[slice(*start_stop)] for s in SYMBOLS])
         result = FAString(SYMBOLS).substr(*start_stop)
@@ -509,26 +511,31 @@
         result = self.cat_symbol.str.substr(*start_stop)
         expected = [s[slice(*start_stop)] for s in SYMBOLS]
         expected = Categorical(self.cat_symbol.ikey, expected, base_index=1)
         assert_array_or_cat_equal(expected, result, relaxed_cat_check=True)
         # check categories are unique
         assert len(set(result.category_array)) == len(result.category_array)
 
+    def test_substr_stop_is_None(self):
+        result = FAString(SYMBOLS).str.substr(3, None)
+        expected = rt.FastArray([s[:3] for s in SYMBOLS])
+        assert_array_equal(result, expected)
+
     @parametrize(
-        "start, stop, expected",
+        "start_stop, expected",
         [
-            (0, [1, 2, 3, 2, 3], ["A", "AM", "FB", "GO", "IBM"]),
-            ([1, 1, 1, 1, 1], [1, 2, 3, 2, 3], ["", "M", "B", "O", "BM"]),
-            ([1, 2, 3, 2, 3], None, ["A", "AM", "FB", "GO", "IBM"]),
-            ([0, 1, 1, 0, 1], [3, 10, 2, -1, -2], ["AAP", "MZN", "B", "GOO", ""]),
-            ([1, 1, 1, 1, 1], [1, 1, 1, 1, 1], ["", "", "", "", ""]),
+            ((0, [1, 2, 3, 2, 3]), ["A", "AM", "FB", "GO", "IBM"]),
+            (([1, 1, 1, 1, 1], [1, 2, 3, 2, 3]), ["", "M", "B", "O", "BM"]),
+            (([1, 2, 3, 2, 3],), ["A", "AM", "FB", "GO", "IBM"]),
+            (([0, 1, 1, 0, 1], [3, 10, 2, -1, -2]), ["AAP", "MZN", "B", "GOO", ""]),
+            (([1, 1, 1, 1, 1], [1, 1, 1, 1, 1]), ["", "", "", "", ""]),
         ],
     )
-    def test_substr_array_bounds(self, start, stop, expected):
-        result = FAString(SYMBOLS).substr(start, stop)
+    def test_substr_array_bounds(self, start_stop, expected):
+        result = FAString(SYMBOLS).substr(*start_stop)
         assert_array_equal(rt.FastArray(expected), result)
 
     @substr_test_cases
     def test_substr_getitem(self, start_stop):
         expected = rt.FastArray([s[slice(*start_stop)] for s in SYMBOLS])
         result = FAString(SYMBOLS).substr[slice(*start_stop)]
         assert_array_equal(expected, result)
@@ -540,14 +547,19 @@
 
     def test_substr_getitem_array(self):
         indexer = [0, 1, 0, 1, 0]
         expected = rt.FastArray([s[i] for s, i in zip(SYMBOLS, indexer)])
         result = FAString(SYMBOLS).substr[indexer]
         assert_array_equal(expected, result)
 
+    def test_substr_getitem_None_stop(self):
+        expected = rt.FastArray([s[-2:] for s in SYMBOLS])
+        result = FAString(SYMBOLS).substr[-2:]
+        assert_array_equal(expected, result)
+
     def test_substr_char_stop(self):
         s = FastArray(["ABC", "A_B", "AB_C", "AB_C_DD"])
         res = s.str.substr_char_stop("_")
         expected = FastArray([b"ABC", b"A", b"AB", b"AB"], dtype="|S3")
         assert_array_equal(expected, res)
 
         res = s.str.substr_char_stop("_", inclusive=True)
```

### Comparing `riptable-1.6.9/riptable/tests/test_struct.py` & `riptable-1.7.0/riptable/tests/test_struct.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_timewindow.py` & `riptable-1.7.0/riptable/tests/test_timewindow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_ufunc2.py` & `riptable-1.7.0/riptable/tests/test_ufunc2.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_unique.py` & `riptable-1.7.0/riptable/tests/test_unique.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/test_utils.py` & `riptable-1.7.0/riptable/tests/test_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable/tests/utils.py` & `riptable-1.7.0/riptable/tests/utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.6.9/riptable.egg-info/PKG-INFO` & `riptable-1.7.0/riptable.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.6.9
+Version: 1.7.0
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.6.9/riptable.egg-info/SOURCES.txt` & `riptable-1.7.0/riptable.egg-info/SOURCES.txt`

 * *Files 1% similar despite different names*

```diff
@@ -39,14 +39,15 @@
 docs/source/tutorial/rt_autocomplete_internal.png
 docs/source/tutorial/rt_dataset.svg
 docs/source/tutorial/rt_dataset_indices.svg
 docs/source/tutorial/rt_fastarray.svg
 docs/source/tutorial/split-apply-combine-gray.svg
 docs/source/tutorial/tutorial.rst
 docs/source/tutorial/tutorial_accums.rst
+docs/source/tutorial/tutorial_cat_adv_instantiation.rst
 docs/source/tutorial/tutorial_cat_reduce.rst
 docs/source/tutorial/tutorial_categoricals.rst
 docs/source/tutorial/tutorial_concat.rst
 docs/source/tutorial/tutorial_datasets.rst
 docs/source/tutorial/tutorial_datetimes.rst
 docs/source/tutorial/tutorial_filters.rst
 docs/source/tutorial/tutorial_intro.rst
```

### Comparing `riptable-1.6.9/setup.py` & `riptable-1.7.0/setup.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,19 +1,18 @@
 from setuptools import setup
 
 package_name = "riptable"
 
 install_requires = [
     "ansi2html >=1.5.2",
-    "ipykernel",
     "numba >=0.56.2",
     "numpy >=1.22",
-    "pandas >=0.24,<2.0",
+    "pandas >=1.0,<3.0",
     "python-dateutil",
-    "riptide_cpp >=1.12.0,<2",
+    "riptide_cpp >=1.12.2,<2",
 ]
 
 setup(
     name=package_name,
     packages=[package_name],
     use_scm_version={
         "version_scheme": "post-release",
```

